<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/avatar.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="为了更好的你，也为了更好的世界"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:description" content="为了更好的你，也为了更好的世界"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/avatar.png"}},"description":"为了更好的你，也为了更好的世界"}</script><link rel="icon" href="https://brath.cloud/avatar.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章列表</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">更多</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-27T13:50:38.000Z" title="2022-4-27 21:50:38">2022-04-27</time>发表</span><span class="level-item"><time dateTime="2020-05-21T22:25:35.000Z" title="2020-5-22 6:25:35">2020-05-22</time>更新</span><span class="level-item">3 分钟读完 (大约394个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/27/%E3%80%90MySQL%E3%80%91MySQL%E4%B8%BB%E4%BB%8E%E5%BC%80%E5%85%B3%E6%9C%BA%E9%A1%BA%E5%BA%8F/">【MySQL】MySQL主从开关机顺序</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>MySQL 主从开关机顺序<br>
停应用 -&gt; 停数据库（先备后主） -&gt; 改配置 -&gt; 启数据库（先主后备）-&gt; 启应用</p>
<p>关闭 MySQL 从库<br>
 a. 先查看当前的主从同步状态 show slave statusG; 看是否双 yes<br>
b. 执行 stop slave<br>
c. 停止从库服务 mysqladmin shutdown -u 用户名 -p 密码<br>
 d. 查看是否还有 mysql 的进程 ps -ef | grep mysql<br>
d. 如果部署了多个实例，那每个实例都要按照以上步骤来操作</p>
<p>关闭 MySQL 主库<br>
 a. 停止主库服务 mysqladmin shutdown -u 用户名 -p 密码<br>
 b. 查看是否还有 mysql 的进程 ps -ef | grep mysql</p>
<p>启动 MySQL 主库<br>
 a. 启动主库服务 mysqladmin start -u 用户名 -p 密码<br>
 b. 查看 mysql 的进程 ps -ef | grep mysql</p>
<p>启动 MySQL 从库<br>
 a. 启动从库服务 mysqladmin start -u 用户名 -p 密码<br>
 b. 启动复制 start slave;<br>
c. 检查同步状态 show slave statusG; 是否双 yes<br>
d. 查看 mysql 的进程 ps -ef | grep mysql</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-26T04:23:33.000Z" title="2022-4-26 12:23:33">2022-04-26</time>发表</span><span class="level-item"><time dateTime="2023-05-23T03:40:34.031Z" title="2023-5-23 11:40:34">2023-05-23</time>更新</span><span class="level-item">11 分钟读完 (大约1676个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/26/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97%E7%9A%84%E6%A6%82%E5%BF%B5/">【算法】斐波那契数列的概念</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="算法斐波那契数列的概念"><a class="markdownIt-Anchor" href="#算法斐波那契数列的概念">#</a> 【算法】斐波那契数列的概念</h1>
<h1 id="斐波那契数列的概念"><a class="markdownIt-Anchor" href="#斐波那契数列的概念">#</a> <strong>斐波那契数列的概念</strong></h1>
<p>​    <strong>斐波那契数列（Fibonacci sequence）</strong>，又称<strong>黄金分割数列</strong>，因数学家莱昂纳多・斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为 “<strong>兔子数列</strong>”。</p>
<p>​    <strong>斐波那契数列</strong>指的是这样一个数列：</p>
<p>​    0，1，1，2，3，5，8，13，21，34，55，89，144，233，377，610，987，1597，2584，4181，6765，10946，17711……</p>
<p>​    它的规律是：<strong>这个数列从第 3 项开始，每一项都等于前两项之和。</strong></p>
<p>​    在数学上，斐波那契数列以如下被以递推的方法定义：<em><strong>F*(0)=0，*F*(1)=1, *F*(n)=*F*(n - 1)+*F*(n - 2)（*n* ≥ 2，*n* ∈ N*）</strong>，显然，斐波那契数列是一个</em><em>线性递推数列</em> *。</p>
<hr>
<h1 id="斐波那契数列的实现"><a class="markdownIt-Anchor" href="#斐波那契数列的实现">#</a> <strong>斐波那契数列的实现</strong></h1>
<p>​    常用的<strong>实现斐波那契数列的方法</strong>分为两大类：<strong>递归和循环。</strong></p>
<h1 id="1-递归实现"><a class="markdownIt-Anchor" href="#1-递归实现">#</a> <strong>1. 递归实现</strong></h1>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20210730212031150.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int F(int n) //斐波那契数列函数 递归形式</span><br><span class="line">&#123;</span><br><span class="line">    if(n == 0) //初始化</span><br><span class="line">		return 0;</span><br><span class="line">	if(n == 1 || n == 2)</span><br><span class="line">		return 1;</span><br><span class="line">    return F(n-1) + F(n-2);  //如果n != 1 &amp;&amp; n != 2 进行递归运算</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int t,n;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    while(t--)</span><br><span class="line">    &#123;</span><br><span class="line">    	scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">    	printf(&quot;%d\n&quot;, F(n));</span><br><span class="line">	&#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="2-迭代实现优先使用"><a class="markdownIt-Anchor" href="#2-迭代实现优先使用">#</a> <strong>2. 迭代实现（<strong><strong>优先使用</strong></strong>）</strong></h1>
<h1 id="6091-斐波那契数列"><a class="markdownIt-Anchor" href="#6091-斐波那契数列">#</a> <strong><a target="_blank" rel="noopener" href="http://www.tzcoder.cn/acmhome/problemdetail.do?method=showdetail&amp;id=6091">6091: 斐波那契数列</a></strong></h1>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">int fibonacci(int n) //定义斐波那契函数</span><br><span class="line">&#123;</span><br><span class="line">    if(n == 0)	 //定义初始值</span><br><span class="line">        return 0;   </span><br><span class="line">    if(n == 1 || n == 2)	</span><br><span class="line">        return 1;</span><br><span class="line">    int a=1,b=1,c=0;    //定义初始值</span><br><span class="line">//用一个for循环，a、b分别为前两项，c为前两项之和，得到c后进行交换更新a、b的值，进行n次交换即可。</span><br><span class="line">    for(int i=3;i&lt;=n;i++)    //更新操作</span><br><span class="line">    &#123;</span><br><span class="line">    	c = a+b;</span><br><span class="line">    	a = b;</span><br><span class="line">    	b = c;</span><br><span class="line">	&#125;</span><br><span class="line">	return c;  //c即为结果输出</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int t,n;</span><br><span class="line">    scanf(&quot;%d&quot;,&amp;t);</span><br><span class="line">    while(t--)</span><br><span class="line">    &#123;</span><br><span class="line">    	scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">    	printf(&quot;%d\n&quot;, fibonacci(n));</span><br><span class="line">	&#125;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>​    递归和迭代的改进算法可以参考 **<a target="_blank" rel="noopener" href="https://blog.csdn.net/Web_J/article/details/115696927"> 微 光的斐波那契数列</a> **。</p>
<p>​    因为递归算法存在着大量的重复计算，在 N 趋近于较大值时，可能会造成<strong>内存溢出或超时</strong>的情况，又因为使用迭代算法的情况下同样可以实现计算斐波那契数列第 N 项的功能，所以<strong>在 N 值很大时我们优先使用迭代算法。</strong></p>
<hr>
<h1 id="斐波那契数列的应用"><a class="markdownIt-Anchor" href="#斐波那契数列的应用">#</a> <strong>斐波那契数列的应用</strong></h1>
<ul>
<li>10 个连续的斐波那契数的和 = 第 7 个数的 11 倍</li>
<li>前 n 项和 =  第 n + 2 项 - 第 2 项</li>
<li>从第 2 项开始，第 2n - 1 项的平方比 2n * (2n - 2) 多 1；第 2n 项的平方比 2n * (2n - 2) 少 1。</li>
</ul>
<h2 id="1-黄金分割"><a class="markdownIt-Anchor" href="#1-黄金分割">#</a> 1**. 黄金分割 **</h2>
<p>** 黄金分割：** 把任一线段分割成两段，使 大段 / 全段 = 小段 / 大段， 比值经过计算之后，就是黄金分割比。</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/47b9219c2b1646be8cbec9fa7e8579dd.png" alt="img"></p>
<p>​    斐波那契数列：随着数列项数的增加，前一项与后一项之比越来越逼近 **<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%BB%84%E9%87%91%E5%88%86%E5%89%B2"> 黄金分割</a> *<em> 的数值 0.6180339887……*</em>**</p>
<p>​    卢卡斯数列：斐波那契数列的推广形式，卢卡斯数列的形式为：1， 3， 4， 7， 11， 18，29，47…… 卢卡斯数列的相邻两项比值的极限恰好也是二分之根号五减一，即黄金分割比。所以说，卢卡斯抓住了斐波那契数列的本质。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;stdio.h&gt;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	double f[100];</span><br><span class="line">	f[1]=1, f[2]=1;</span><br><span class="line">	for(int i=3; i&lt;=50; i++)</span><br><span class="line">	&#123;</span><br><span class="line">		f[i]=f[i-1]+f[i-2];</span><br><span class="line">	&#125;</span><br><span class="line">	int n;</span><br><span class="line">	scanf(&quot;%d&quot;,&amp;n);</span><br><span class="line">	printf(&quot;%.10lf\n&quot;,f[n]/f[n+1]);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="2-杨辉三角"><a class="markdownIt-Anchor" href="#2-杨辉三角">#</a> <strong>2. 杨辉三角</strong></h2>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/937552c4735a58c66db1d43a4fd97004.png" alt="img"></p>
<p>​    如图所示作 45 度斜线，之后做直线的平行线，将每条直线所经过的数，即得之和即为<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97&amp;spm=1001.2101.3001.7020">斐波那契数列</a>。</p>
<hr>
<h2 id="3-兔子数列"><a class="markdownIt-Anchor" href="#3-兔子数列">#</a> <strong>3. 兔子数列</strong></h2>
<p>​    <em><em><em>* 斐波那契数列又因数学家 *</em><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%88%97%E6%98%82%E7%BA%B3%E5%A4%9A%C2%B7%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91"> 列昂纳多・斐波那契</a> *<em> 以兔子繁殖为例子而引入，故又称为 “*</em><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%85%94%E5%AD%90%E6%95%B0%E5%88%97"> 兔子数列</a> *</em>”。*</em>**</p>
<p>​    **** 兔子数列是指：**** 一般而言，兔子在出生两个月后，就有繁殖能力，一对兔子每个月能生出一对小兔子来。如果所有兔子都不死，那么一年以后可以繁殖多少对兔子？</p>
<p>​    很容易发现 “兔子数列” 问题和斐波那契数列问题相同，都是一样的解法。</p>
<h2 id="1376-母牛的故事"><a class="markdownIt-Anchor" href="#1376-母牛的故事">#</a> <strong><a target="_blank" rel="noopener" href="http://www.tzcoder.cn/acmhome/problemdetail.do?method=showdetail&amp;id=1376">1376: 母牛的故事</a></strong></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">#include&lt;stdio.h&gt; </span><br><span class="line">void DataInit(int *a)</span><br><span class="line">&#123;</span><br><span class="line">    for(int i = 4; i &lt; 55; i++)</span><br><span class="line">        a[i] = a[i-1] + a[i-3];</span><br><span class="line">&#125;</span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    int a[55] = &#123;0, 1, 2, 3&#125;;</span><br><span class="line">    int n;</span><br><span class="line">    DataInit(a);</span><br><span class="line">    while(scanf(&quot;%d&quot;, &amp;n)!=EOF)</span><br><span class="line">    if(n)</span><br><span class="line">        printf(&quot;%ld\n&quot;, a[n]);</span><br><span class="line">    else break;</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="4-排列组合"><a class="markdownIt-Anchor" href="#4-排列组合">#</a> <strong>4. 排列组合</strong></h2>
<p>​    有一段楼梯，有 10 级台阶，规定每一步只能跨一级或两级，要登上第 10 级台阶有几种不同的走法？</p>
<p>​    这也是一个斐波那契数列：</p>
<p>​    登第一级台阶，有一种走法，0-&gt;1；</p>
<p>​    登第二级台阶，有两种走法，0-&gt;1-&gt;2，0-&gt;2；</p>
<p>​    登第三级台阶，有三种走法，0-&gt;1-&gt;2-&gt;3，0-&gt;1-&gt;3，0-&gt;2-&gt;3；</p>
<p>​    登第四级台阶，有五种走法，0-&gt;1-&gt;2-&gt;3-&gt;4，0-&gt;1-&gt;2-&gt;4，0-&gt;1-&gt;3-&gt;4，0-&gt;2-&gt;3-&gt;4，0-&gt;2-&gt;4；</p>
<p>​    …</p>
<p>​    即 1， 2， 3， 5， 8， 13，… 到 10 级，就是 89 种走法，与斐波那契数列的<strong>规律契合</strong>。</p>
<p>​    类似的斐波那契数列的规律运用还有很多。</p>
<p>​    （1， 1， 2， 3， 5， 8， 13， 21， 33， 54， 89…）</p>
<h2 id="5-矩形面积"><a class="markdownIt-Anchor" href="#5-矩形面积">#</a> <strong>5. 矩形面积</strong></h2>
<p>​    <strong>右下图可知，斐波那契数列与矩形面积的生成相关。</strong></p>
<p>​    <img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/4a97beffd31d919e71655e29cf287ec0.gif" alt="img"></p>
<p>​    不难发现一个规律，即 ** 生成的矩形中，所有小正方形的面积之和等于大矩形的面积。** 即： <img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9nc3MwLmJkc3RhdGljLmNvbS8tNG8zZFNhZ194STRraEdrcG9XSzFIRjZoaHkvYmFpa2UvcGljL2l0ZW0vZDQ2Mjg1MzVlNWRkZTcxMTVjZDVkOGEzYThlZmNlMWI5ZDE2NjE2NC5qcGc?x-oss-process=image/format,png" alt="img"></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-26T04:23:33.000Z" title="2022-4-26 12:23:33">2022-04-26</time>发表</span><span class="level-item"><time dateTime="2023-05-23T03:40:38.821Z" title="2023-5-23 11:40:38">2023-05-23</time>更新</span><span class="level-item">4 分钟读完 (大约611个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/26/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E4%BD%BF%E7%94%A8Java%E5%AE%9E%E7%8E%B0%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91%E6%95%B0%E5%88%97%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E6%B3%95%EF%BC%8C%E5%A4%AA%E9%85%B7%E5%95%A6/">【算法】使用Java实现斐波那契数列的三种方法，太酷啦</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="算法使用java实现斐波那契数列的三种方法太酷啦"><a class="markdownIt-Anchor" href="#算法使用java实现斐波那契数列的三种方法太酷啦">#</a> 【算法】使用 Java 实现斐波那契数列的三种方法，太酷啦</h1>
<h2 id="java实现斐波那契数列的三种方法"><a class="markdownIt-Anchor" href="#java实现斐波那契数列的三种方法">#</a> Java 实现<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E6%96%90%E6%B3%A2%E9%82%A3%E5%A5%91&amp;spm=1001.2101.3001.7020">斐波那契</a>数列的三种方法</h2>
<p><strong>什么是斐波那契数列</strong></p>
<ul>
<li>这里借用一下度娘的一段话：斐波那契数列（Fibonacci sequence），又称黄金分割数列、因数学家列昂纳多・斐波那契（Leonardoda Fibonacci）以兔子繁殖为例子而引入，故又称为 “兔子数列”，指的是这样一个数列：1、1、2、3、5、8、13、21、34、……<br>
 其规律很明显，从第 3 个数开始，每个数都等于它前两个数的和。<br>
那么通过 java 可以如何实现斐波那契数列呢？这里介绍三种方法。</li>
<li>通过代码实现以下效果：当你输入 n 时，会获取斐波那契数列的第 n 个数的值。</li>
</ul>
<h4 id="1for循环实现"><a class="markdownIt-Anchor" href="#1for循环实现">#</a> <strong>1.for 循环实现</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   	<span class="type">int</span>[] fib = <span class="keyword">new</span> <span class="title class_">int</span>[n+<span class="number">1</span>];</span><br><span class="line">   	fib[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">   	fib[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">       fib[i] = fib[i-<span class="number">1</span>] + fib[i-<span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> fib[n];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="2平方根实现"><a class="markdownIt-Anchor" href="#2平方根实现">#</a> <strong>2. 平方根实现</strong></h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">     <span class="type">double</span> <span class="variable">goldenRatio</span> <span class="operator">=</span> (<span class="number">1</span> + Math.sqrt(<span class="number">5</span>)) / <span class="number">2</span>;</span><br><span class="line">     <span class="keyword">return</span> (<span class="type">int</span>) Math.round(Math.pow(goldenRatio, n) / Math.sqrt(<span class="number">5</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="3矩阵快速幂实现"><a class="markdownIt-Anchor" href="#3矩阵快速幂实现">#</a> 3. 矩阵快速幂实现</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">fibonacci</span><span class="params">(<span class="type">int</span> n)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span>[][] base = &#123;&#123;<span class="number">1</span>, <span class="number">1</span>&#125;, &#123;<span class="number">1</span>, <span class="number">0</span>&#125;&#125;;</span><br><span class="line">    <span class="type">int</span>[][] result = pow(base, n - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result[<span class="number">0</span>][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][] pow(<span class="type">int</span>[][] base, <span class="type">int</span> power) &#123;</span><br><span class="line">    <span class="type">int</span>[][] result = <span class="keyword">new</span> <span class="title class_">int</span>[base.length][base.length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; base.length; i++) &#123;</span><br><span class="line">        result[i][i] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (power &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (power % <span class="number">2</span> == <span class="number">1</span>) &#123;</span><br><span class="line">            result = multiply(result, base);</span><br><span class="line">        &#125;</span><br><span class="line">        base = multiply(base, base);</span><br><span class="line">        power /= <span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> result;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="type">int</span>[][] multiply(<span class="type">int</span>[][] a, <span class="type">int</span>[][] b) &#123;</span><br><span class="line">    <span class="type">int</span>[][] c = <span class="keyword">new</span> <span class="title class_">int</span>[a.length][b[<span class="number">0</span>].length];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>; j &lt; b[<span class="number">0</span>].length; j++) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; b.length; k++) &#123;</span><br><span class="line">                c[i][j] += a[i][k] * b[k][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> c;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>OK，到这里 java 实现斐波那契数列的三种写法就全部写完了，如果大家还有其他方法，欢迎交流～</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-22T02:20:16.000Z" title="2022-4-22 10:20:16">2022-04-22</time>发表</span><span class="level-item"><time dateTime="2023-10-12T08:25:18.000Z" title="2023-10-12 16:25:18">2023-10-12</time>更新</span><span class="level-item">12 分钟读完 (大约1839个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/22/%E3%80%90Flutter%E3%80%91flutter%E5%8F%91%E5%B1%95%E5%89%8D%E6%99%AF%E5%A6%82%E4%BD%95%EF%BC%9F/">【Flutter】flutter发展前景如何？</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p><img src="https://pic1.zhimg.com/80/v2-184c74e7aa102e484165122bb5cec4bd_720w.webp?source=1940ef5c" alt="img"></p>
<blockquote>
<p>在 <strong>Flutter</strong> 刚刚从 <strong>Google</strong> 刚刚推向 <strong>Android</strong> 市场的时候，我就开始对 <strong>Flutter</strong> 开始了<strong>学习之路</strong>；但由于当时 <strong>Flutter</strong> 许多东西<strong>尚未完善</strong>而没有推出<strong>稳定的版本</strong>，所以也就没有对其进行<strong>深入</strong>的学习，直到如今 <strong>Flutter</strong> 又<strong>重出江湖</strong>，在<strong>市场</strong>上也得到<strong>了蓬勃发展</strong>及许多业内<strong>大佬</strong>的<strong>力推</strong>，我便又再次<strong>入坑 Flutter</strong></p>
</blockquote>
<p><strong>实现 UI 和交互</strong>是<strong>高级开发者</strong>的<strong>必备技能</strong>，也是<strong>掌握 Flutter 开发</strong>的<strong>重点</strong>；同样 <strong>Flutter</strong> <strong>跨平台</strong>的<strong>特性</strong>是<strong>原生</strong>不能比拟的，更何况还有不弱的<strong>性能</strong>表现；而<strong>性能</strong>往往是由<strong>生命周期</strong>来决定的</p>
<h3 id="何为-flutter-的生命周期"><a class="markdownIt-Anchor" href="#何为-flutter-的生命周期">#</a> <strong>何为 Flutter 的生命周期？</strong></h3>
<p>如果你是一名<strong>开发</strong>人员，那么你一定不会对<strong>生命周期</strong>感到陌生；当你在学习 <strong>Flutter</strong> 的时候，<strong>Flutter 也有自己的生命周期</strong>，只有通过了解 <strong>Flutter</strong> 的<strong>生命周期</strong>，才能知道应该在哪里来写<strong>业务逻辑</strong></p>
<h3 id="flutter-生命周期"><a class="markdownIt-Anchor" href="#flutter-生命周期">#</a> <strong>Flutter 生命周期</strong></h3>
<p><img src="https://picx.zhimg.com/80/v2-6ae547ee1a88db89634eb9c6567146d8_720w.webp?source=1940ef5c" alt="img"></p>
<p>如上图所示，<strong>Flutter 生命周期</strong>大体上可以分为<strong>三个阶段：</strong> <strong>初始化、状态变化、销毁</strong>；下面依次说明各个阶段的工作</p>
<p><strong>初始化阶段</strong>（插入<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%B8%B2%E6%9F%93%E6%A0%91&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">渲染树</a>）</p>
<ul>
<li>对应执行构造方法和 initState</li>
</ul>
<p><strong>状态变化阶段</strong>（在渲染树中存在）</p>
<ul>
<li>开新的 widget 或者调用 setState 方法</li>
</ul>
<p><strong>销毁阶段</strong>（从渲染树种移除）</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=deactivate&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">deactivate</a> 和 dispose</li>
</ul>
<p>如果之前你对 <strong>Flutter</strong> 有一点点了解的话，你会发现 <strong>Flutter</strong> 中有<strong>两个</strong>主要的 <strong>Widget：</strong> <strong>StatelessWidget（无状态）</strong> 和 <strong>StatefulWidget（有状态）</strong></p>
<h3 id="statelesswidget"><a class="markdownIt-Anchor" href="#statelesswidget">#</a> <strong>StatelessWidget</strong></h3>
<ul>
<li><strong><a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">无状态组件</a>] 是不可变的</strong>，这意味着它们的<strong>属性不能变化</strong>，所有的值都是最终的；可以理解为将<strong>外部传入的数据转化为界面展示的内容，只会渲染一次</strong></li>
<li><strong>对于无状态组件生命周期只有 build 这个过程</strong>；无状态组件的构建方法通常只在三种情况下会被调用：<strong>小组件第一次被插入树中，小组件的父组件改变其配置，以及它所依赖的 InheritedWidget 发生变化时</strong></li>
</ul>
<h3 id="statefulwidget"><a class="markdownIt-Anchor" href="#statefulwidget">#</a> <strong>StatefulWidget</strong></h3>
<ul>
<li>有状态组件持有的状态可能在 Widget 生命周期中发生变化，是定义<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">交互逻辑</a>和业务逻辑；可以理解为具有动态可交互的内容界面，会根据数据的变化进行多次渲染</li>
</ul>
<h3 id="实现一个-statefulwidget-至少需要两个类"><a class="markdownIt-Anchor" href="#实现一个-statefulwidget-至少需要两个类">#</a> <strong>实现一个 StatefulWidget 至少需要两个类：</strong></h3>
<p><strong>一个是 StatefulWidget 类</strong> <strong>另一个是 Sate 类</strong></p>
<ul>
<li><strong>StatefulWidget 类本身是不可变的</strong>，但是 <strong>State 类</strong>在 <strong>Widget 生命周期中始终存在</strong></li>
<li><strong>StatefulWidget</strong> 将其<strong>可变</strong>的<strong>状态存储</strong>在由 <strong>createState</strong> 方法创建的 <strong>State</strong> 对象中，或者存储在该 <strong>State 订阅</strong>的对象中</li>
</ul>
<h3 id="fultter-的优势在哪里"><a class="markdownIt-Anchor" href="#fultter-的优势在哪里">#</a> <strong>Fultter 的优势在哪里？</strong></h3>
<h3 id="快速开发和迭代"><a class="markdownIt-Anchor" href="#快速开发和迭代">#</a> <strong>快速开发和迭代</strong></h3>
<p><strong>Flutter 自身具有热修复（<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E7%83%AD%E9%87%8D%E8%BD%BD&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">热重载</a>）<strong>的功能，尽管有使用的限制，但是它依然能够为</strong>开发过程</strong>提供<strong>更高的效率</strong>；另外，<strong>Flutter SDK</strong> 还允许我们<strong>修复崩溃</strong>和继续从<strong>应用程序</strong>停止的地方进行<strong>调试</strong></p>
<h3 id="页面流畅-样式美观"><a class="markdownIt-Anchor" href="#页面流畅-样式美观">#</a> <strong>页面流畅、样式美观</strong></h3>
<p><strong>对于不同的平台（Android 和 iOS）</strong>，<strong>Flutter</strong> 提供了<strong>风格不同</strong>的<strong>控件</strong>，以<strong>满足不同平台</strong>的<strong>设计理念</strong></p>
<h3 id="提供原生性能"><a class="markdownIt-Anchor" href="#提供原生性能">#</a> <strong>提供原生性能</strong></h3>
<p><strong>Flutter</strong> 提供了一种 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%86%E5%9B%BE&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 响应式视图</a><strong>，无须 <strong>JavaScript</strong> 做</strong>桥接 **；强大的 <strong>API</strong> 使得<strong>实现复杂的页面效果</strong>成为可能；高性能的 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 渲染机制</a> ** 使得 <strong>120 FPS 的高频率</strong> 可以轻而易举的实现；<strong>当界面上的图片数量越来越多时，与 React Native 相比，Flutter 的优势会越来越明显</strong></p>
<h3 id="灵活的跨平台开发"><a class="markdownIt-Anchor" href="#灵活的跨平台开发">#</a> <strong>灵活的跨平台开发</strong></h3>
<p><strong>Flutter</strong> 可以单独作为<strong>开发框架</strong>完成整个 <strong>App 的开发</strong>，也可以与现有<strong>原生代码</strong>相结合实现 <strong>Hybrid 混合模式的开发</strong></p>
<h3 id="那-flutter-需要学吗"><a class="markdownIt-Anchor" href="#那-flutter-需要学吗">#</a> <strong>那 Flutter 需要学吗？</strong></h3>
<p><strong>Flutter</strong> 抛弃了<strong>原生系统控件</strong>和 <strong>Webview</strong>，使用<strong>自研高性能渲染引擎</strong>来绘制 <strong>Widget</strong>，预先 (AOT) 编译，<strong>运行时直接执行 Native (arm) 代码</strong>，<strong>Dart 代码</strong>执行 (在 UI TaskRunner)，<strong>图片下载</strong> (IO TaskRunner)，<strong>真正的渲染</strong> (GPU TaskRunner) ，<strong>同平台的通信</strong>等 (Platform TaskRunner 即 <strong>Native 概念</strong>下的 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E4%B8%BB%E7%BA%BF%E7%A8%8B&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 主线程</a><strong>) 是</strong>互相隔离 ** 的</p>
<p>针对<strong>布局</strong>等的<strong>优</strong>化；<strong>布局</strong>计算时单次树走动即可完成；<strong>Relayout Boundary</strong> 机制：如果 <strong>Child</strong> 的 <strong>size</strong> 是<strong>固定</strong>的，那么不会因为 <strong>Child</strong> 的 <strong>Relayout</strong> 导致 <strong>Parent ReLayout</strong> 等<strong>布局优化</strong>，都让 <strong>Flutter 脱颖而出</strong></p>
<p>如上所述 <strong>Flutter</strong> 于谷歌而言，这是他们重新整理 <strong>跨平台生态环境</strong> 决心的体现，<strong>Flutter</strong> 所展现的内容，也是谷歌想拓展和维护的方向；对于长期苦恼于 <strong>跨平台</strong> 选择的广大 <strong>Android 开发者</strong> 而言，<strong>Flutter</strong> 可谓是谷歌为我们提供的 <strong>指路明灯</strong></p>
<p>以<strong>目前</strong>的<strong>开发速度</strong>，只要不出<strong>大的纰漏</strong>，<strong>按部就班</strong>的<strong>往前推进</strong>，在<strong>不久的将来</strong>， <strong>Google</strong> 一定可以把 <strong>Flutter</strong> 平台打造得非常完美，届时又会改变 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 移动开发技术</a><strong>的</strong>格局 ** 了</p>
<p>也许，<strong>Flutter</strong> 系列的<strong>部分库</strong>还没成熟到成为你<strong>工作的第一选择</strong>，但是，深入学习 <strong>Flutter</strong> 组件会为你日常的开发带来一些想法</p>
<p><strong>总的来说，Flutter</strong> 对广大开发者而言是 <strong>利远远大于弊的</strong></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-12T13:30:55.000Z" title="2022-4-12 21:30:55">2022-04-12</time>发表</span><span class="level-item"><time dateTime="2022-03-20T19:34:41.000Z" title="2022-3-21 3:34:41">2022-03-21</time>更新</span><span class="level-item">15 分钟读完 (大约2230个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/12/%E3%80%90Flutter%E3%80%91Flutter%20%E6%B5%81%E7%95%85%E5%BA%A6%E4%BC%98%E5%8C%96%E7%BB%84%E4%BB%B6%20Keframe/">Flutter 流畅度优化组件 Keframe</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>最近在开发一款 APP，核心场景类似于帖子这类的，所以下拉加载页面的流畅度成为最棘手的问题，在掘金上看见了这篇文章： <a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>
<p>Nayuta 的 Keframe 组件正好可以满足帧率优化的问题</p>
<h3 id="项目依赖"><a class="markdownIt-Anchor" href="#项目依赖">#</a> 项目依赖：</h3>
<p>在  <code>pubspec.yaml</code>  中添加  <code>keframe</code>  依赖</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">keframe:</span> <span class="string">version</span></span><br></pre></td></tr></table></figure>
<p>组件仅区分非空安全与空安全版本</p>
<p>非空安全使用：  <code>1.0.2</code></p>
<p>空安全版本使用：  <code>2.0.2</code></p>
<p>github 地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLianjiaTech%2Fkeframe">github.com/LianjiaTech…</a></p>
<p>pub 查看：<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fkeframe">pub.dev/packages/ke…</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#SizeCacheWidget用来包裹最外层的list</span><br><span class="line">#FrameSeparateWidget用来包裹list的子集即可    </span><br><span class="line">example:</span><br><span class="line">SizeCacheWidget(</span><br><span class="line">	child：ListView || CustomScrollView(</span><br><span class="line">    	slivers[</span><br><span class="line">            SliverList(</span><br><span class="line">            	delegate: SliverChildBuilderDelegate</span><br><span class="line">                (BuildContext context, <span class="built_in">int</span> index)&#123;</span><br><span class="line">                    <span class="keyword">return</span> FrameSeparateWidget(</span><br><span class="line">                    	child: ···</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="快速上手"><a class="markdownIt-Anchor" href="#快速上手">#</a> 快速上手：</h3>
<p>如下图所示</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83d16f3b2a3e45b79fc73d7a52774696~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>假如现在页面由 A、B、C、D 四部分组成，每部分耗时 10ms，在页面时构建为 40ms。使用分帧组件   <code>FrameSeparateWidget</code>  嵌套每一个部分。页面构建时会在第一帧渲染简单的占位，在后续四帧内分别渲染 A、B、C、D。</p>
<p>对于列表，在每一个 item 中嵌套  <code>FrameSeparateWidget</code> ，并将  <code>ListView</code>  嵌套在  <code>SizeCacheWidget</code>  内即可。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffecd49bf9ba4379984a22ef79663104~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<hr>
<h2 id="构造函数说明"><a class="markdownIt-Anchor" href="#构造函数说明">#</a> 构造函数说明</h2>
<p>FrameSeparateWidget ：分帧组件，将嵌套的 widget 单独一帧渲染</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>index</td>
<td>否</td>
<td>分帧组件 id，<strong>使用 SizeCacheWidget 的场景必传</strong>，SizeCacheWidget 中维护了 index 对应的 Size 信息</td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>实际需要渲染的 widget</td>
</tr>
<tr>
<td>Widget</td>
<td>placeHolder</td>
<td>否</td>
<td>占位 widget，尽量设置简单的占位，不传默认是 Container ()</td>
</tr>
</tbody>
</table>
<p>SizeCacheWidget：缓存子节点中，分帧组件嵌套的<strong>实际 widget 的尺寸信息</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>子节点中如果包含分帧组件，则缓存<strong>实际的 widget 尺寸</strong></td>
</tr>
<tr>
<td>int</td>
<td>estimateCount</td>
<td>否</td>
<td>预估屏幕上子节点的数量，提高快速滚动时的响应速度</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="方案设计与分析"><a class="markdownIt-Anchor" href="#方案设计与分析">#</a> 方案设计与分析：</h2>
<p>卡顿的本质，就是 <strong>单帧的绘制时间过长</strong>。基于此自然衍生出两种思路解决：</p>
<p>1、减少一帧的绘制耗时，因为导致耗时过长的原因有很多，比如不合理的刷新，或者绘制时间过长，都有可能，需要具体问题具体分析，后面我会分享一些我的优化经验。</p>
<p><strong>2、在不对耗时优化下，将一帧的任务拆分到多帧内，保证每一帧都不超时。这也是本组件的设计思路，分帧渲染。</strong></p>
<p>如下图所示:</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb09c9aadc5d45c9b966661c8d73e4c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>原理并不复杂，问题在于如何在 Flutter 中实践这一机制。</p>
<p>因为涉及到帧与系统的调度，自然联想到看  <code>SchedulerBinding</code>  中有无现成的 API。</p>
<p>发现了  <code>scheduleTask</code>  方法，这是系统提供的一个执行任务的方法，但这个方法存在两个问题：</p>
<ul>
<li>1、其中的渲染任务是优先级进行堆排序，而堆排序是<strong>不稳定</strong>排序，这会导致任务的执行顺序并非 FIFO。从效果上来看，就是列表不会按照顺序渲染，而是会出现跳动渲染的情况</li>
<li>2、这个方法本身存在调度问题，我已经提交 issue 与 pr，不过一直卡在单元测试上，如果感兴趣可以以在这里交流谈论。</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F82781">fix: Tasks scheduled through ‘SchedulerBinding.instance.scheduleTask’… #82781 </a></p>
<p>最终，参考这个设计结合  <code>endOfFrame</code>  方法的使用，完成了分帧队列。整个渲染流程变为下图所示：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb9d177b4b0847339eaf952a7ef67cca~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>对于列表构建场景来说，假设屏幕上能显示五个 item。首先在第一帧的时候，列表会渲染 5 个占位的 Widget，同时添加 5 个高优先级任务到队列中，这里的任务可以是简单的将占位 Widget 和实际 item 进行替换，也可通过渐变等动画提升体验。在后续的五帧中占位 Widget 依次被替换成实际的列表 item。</p>
<p>在  <a target="_blank" rel="noopener" href="https://juejin.cn/post/6940134891606507534">ListView 流畅度翻倍！！Flutter 卡顿分析和通用优化方案</a>  这篇文章中有更加详细的分析。</p>
<h2 id="一些展示效果example-说明请查看-github"><a class="markdownIt-Anchor" href="#一些展示效果example-说明请查看-github">#</a> 一些展示效果（Example 说明请查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLianjiaTech%2Fkeframe%2Fblob%2Fmaster%2FREADME-ZH.md">Github</a>）</h2>
<p>卡顿的页面往往都是由多个复杂 widget 同时渲染导致。通过为复杂的 widget 嵌套分帧组件  <code>FrameSeparateWidget</code> 。渲染时，分帧组件会在第一帧同时渲染多个  <code>palceHolder</code> ，之后连续的多帧内依次渲染复杂子项，以此提升页面流畅度。</p>
<p>例如 example 中的优化前示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">              itemCount: childCount,</span><br><span class="line">              itemBuilder: (c, i) =&gt; CellWidget(</span><br><span class="line">                color: i % <span class="number">2</span> == <span class="number">0</span> ? Colors.red : Colors.blue,</span><br><span class="line">                index: i,</span><br><span class="line">              ),</span><br><span class="line">            )</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>其中  <code>CellWidget</code>  高度为 60，内部嵌套了三个  <code>TextField</code>  的组件（整体构建耗时在 9ms 左右）。</p>
<p>优化仅需为每一个 item 嵌套分帧组件，并为其设置  <code>placeHolder</code> （placeHolder 尽量简单，样式与实际 item 接近即可）。</p>
<p>在列表情况下，给 ListView 嵌套  <code>SizeCacheWidget</code> ，同时建议将预加载范围  <code>cacheExtent</code>  设置大一点，例如 500（该属性默认为 250），提升慢速滑动时候的体验。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f33ddd7d9de4e369b0e457f84171cc8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210611_194905.gif"> (占位与实际列表项不一致时，首次渲染抖动，二次渲染正常)</p>
<p>此外，也可以给 item 嵌套透明度 / 位移等动画，优化视觉上的效果。</p>
<p>效果如下图：</p>
<table>
<thead>
<tr>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb7d1361ae7842df954bb1c559e2ec54~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133310.gif"></th>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ee6827f7eed4463a1a8a5b00a58fd6e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133848.gif"></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="分帧的成本"><a class="markdownIt-Anchor" href="#分帧的成本">#</a> 分帧的成本</h2>
<p>当然分帧方案也非十全十美，在我看来主要有两点成本：</p>
<p>1、额外的构建开销：整个构建过程的构建消耗由「n * widget 消耗 」变成了「n *（ widget + 占位）消耗 + 系统调度 n 帧消耗」。可以看出，额外的开销主要由占位的复杂度决定。如果占位只是简单的 Container，测试后发现整体构建耗时大概提升在 15 % 左右。这种额外开销对于当下的移动设备而言，成本几乎可以不计。</p>
<p>2、视觉上的变化：如同上面的演示，组件会将 item 分帧渲染，页面在视觉上出现占位变成实际 widget 的过程。但其实由于列表存在缓存区域（建议将缓存区调大），在高端机或正常滑动情况下用户并无感知。而在中低端设备上快速滑动能感觉到切换的过程，但比严重顿挫要好。</p>
<hr>
<h2 id="优化前后对比演示"><a class="markdownIt-Anchor" href="#优化前后对比演示">#</a> 优化前后对比演示</h2>
<p>注：gif 帧率只有 20</p>
<table>
<thead>
<tr>
<th>优化前</th>
<th>优化后</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f20f593cc144b72a1df4bdae57a165c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化前"></td>
<td><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05aea6de421545b9bbf868c344a9afe9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化后"></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="最后一点点思考"><a class="markdownIt-Anchor" href="#最后一点点思考">#</a> 最后：一点点思考</h2>
<p>列表优化篇到此告一段落，在整个开源实践过程中，有两点感触较深：</p>
<p>作者：Nayuta<br>
 链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-10T13:17:57.000Z" title="2022-4-10 21:17:57">2022-04-10</time>发表</span><span class="level-item"><time dateTime="2020-09-15T06:02:25.000Z" title="2020-9-15 14:02:25">2020-09-15</time>更新</span><span class="level-item">11 分钟读完 (大约1638个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/10/%E3%80%90Node%E3%80%91node&amp;npm&amp;cnpm&amp;webpack&amp;yarn%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/">node&amp;npm&amp;cnpm&amp;webpack&amp;yarn安装教程</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h3 id="nodejs"><a class="markdownIt-Anchor" href="#nodejs">#</a> Node.js</h3>
<p>​		nodejs 是一个让 JavaScript 运行在服务端的开发平台，它让 JavaScript 成为与 PHP、Python、Perl、Ruby 等服务端语言平起平坐的脚本语言</p>
<p>​		nodejs 能做 web 开发，REST 开发，小程序开发等等，它就是使用 JavaScript 进行开发的，也就是说，基本上每个 web 开发的人员都可以比较轻松的转到 nodejs 平台，nodejs 就像是 JavaScript 抛弃 window,document 等这些 dom 对象后的东西的一个封装</p>
<p>nodejs 下载地址：<a target="_blank" rel="noopener" href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<h5 id="nodejs安装"><a class="markdownIt-Anchor" href="#nodejs安装">#</a> Node.js 安装：</h5>
<p>​		1 . 首先要查看本机是否已安装 nodeJs，打开命令提示符，输入 node&amp;node -v 查看。</p>
<p>​		2 . 打开 Node.js Setup 文件执行安装    选择安装路径，全部下一步。</p>
<p>​		3 . 安装完毕之后，重新打开一个命令提示符窗口，出入 node -v</p>
<p>现在，我们来 Hello World 一下，开启命令行窗口，输入 node，进入 node 的命令行，我们可以输入 console.log (“hello world”)<img src="https://img2018.cnblogs.com/blog/1033563/201906/1033563-20190604153223076-1028024327.png" alt="img"></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">或者，我们可以创建一个web服务，进入node命令行后，输入</span><br><span class="line">View Code</span><br><span class="line">回车后，在浏览器输入：http<span class="punctuation">:</span><span class="comment">//localhost:8000就输出了hello world</span></span><br></pre></td></tr></table></figure>
<hr>
<h3 id="npm"><a class="markdownIt-Anchor" href="#npm">#</a> npm：</h3>
<h5 id="npm安装"><a class="markdownIt-Anchor" href="#npm安装">#</a> npm 安装：</h5>
<p>Nodejs 下的包管理器。</p>
<p>下载 Node 后自带一个旧版本的 npm。</p>
<hr>
<h3 id="cnpm"><a class="markdownIt-Anchor" href="#cnpm">#</a> cnpm:</h3>
<p>Nodejs 下的包管理器，国内淘宝镜像版本。</p>
<h5 id="cnpm安装"><a class="markdownIt-Anchor" href="#cnpm安装">#</a> cnpm 安装：</h5>
<p>首先要有 node 环境和 npm 环境–</p>
<p>1、安装 cnpm，输入以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure>
<p>如图所示：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/a5fada1c44e9cba82055d5c6db8ea69a.png" alt="img"></p>
<p>2、输入 <code>cnpm -v</code>  ，检测是否正常</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/374a7ba6c4e04cdb785a5dca12536ad1.png" alt="img"></p>
<hr>
<h3 id="webpack"><a class="markdownIt-Anchor" href="#webpack">#</a> webpack:</h3>
<p>它主要的用途是通过 CommonJS 的语法把所有浏览器端需要发布的静态资源做相应的准备，比如资源的合并和打包。</p>
<h5 id="webpack安装"><a class="markdownIt-Anchor" href="#webpack安装">#</a> webpack 安装：</h5>
<p>首先需要安装好 nodeJs&amp;npm 的环境～</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">node -v   <span class="comment">// 查看node的版本 不能太高</span></span><br><span class="line">npm -v   <span class="comment">//查看npm的版本</span></span><br></pre></td></tr></table></figure>
<p>全局安装:</p>
<p>打开命令行（win+R    输入 cmd）</p>
<p><img src="https://img-blog.csdn.net/20180809221529512?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTMwOTgz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack webpack-cli -g --save-dev #输入并执行下载webpack </span><br><span class="line">-g #全局安装 </span><br><span class="line">--save-dev #信息写入package.json的devDependencies中</span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdn.net/20180809222148241?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM3MTMwOTgz/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>下载好后在命令行执行 webpack -v 查看 webpack 的版本号，正常显示说明安装好了</p>
<hr>
<h3 id="yarn"><a class="markdownIt-Anchor" href="#yarn">#</a> yarn：</h3>
<p>​	<strong>Yarn 是 facebook 发布的一款取代 npm 的包管理工具。</strong><br>
​	Yarn 缓存了每个下载过的包，所以再次使用时无需重复下载。 同时利用并行下载以最大化资源利用率，因此安装速度更快，在执行代码之前，Yarn 会通过算法校验每个安装包的完整性，使用详细、简洁的锁文件格式和明确的安装算法，Yarn 能够保证在不同系统上无差异的工作。</p>
<h5 id="yarn安装"><a class="markdownIt-Anchor" href="#yarn安装">#</a> yarn 安装:</h5>
<p>首先需要 node.js &amp; npm 环境<br>
输入命令： npm install -g yarn<br>
 查看版本：yarn -V &amp; --version</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Yarn 淘宝源安装，分别复制粘贴以下代码行到黑窗口运行即可</span><br><span class="line">yarn config set registry https://registry.npm.taobao.org -g</span><br><span class="line">yarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g</span><br></pre></td></tr></table></figure>
<hr>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">yarn的常用命令：</span><br><span class="line">安装yarn：npm install -g yarn</span><br><span class="line">安装成功后，查看版本号：yarn --version</span><br><span class="line">创建文件夹 ：md yarn</span><br><span class="line">进入yarn文件夹：cd yarn</span><br><span class="line">初始化项目：yarn init <span class="comment">// 同npm init，执行输入信息后，会生成package.json文件</span></span><br><span class="line"></span><br><span class="line">yarn的配置项：</span><br><span class="line">yarn config list <span class="comment">// 显示所有配置项</span></span><br><span class="line">yarn config get &lt;key&gt; <span class="comment">//显示某配置项</span></span><br><span class="line">yarn config delete &lt;key&gt; <span class="comment">//删除某配置项</span></span><br><span class="line">yarn config set &lt;key&gt; &lt;value&gt; <span class="punctuation">[</span>-g|--global<span class="punctuation">]</span> <span class="comment">//设置配置项</span></span><br><span class="line"></span><br><span class="line">安装包：</span><br><span class="line">yarn install <span class="comment">//安装package.json里所有包，并将包及它的所有依赖项保存进yarn.lock</span></span><br><span class="line">yarn install --flat <span class="comment">//安装一个包的单一版本</span></span><br><span class="line">yarn install --force <span class="comment">//强制重新下载所有包</span></span><br><span class="line">yarn install --production <span class="comment">//只安装dependencies里的包</span></span><br><span class="line">yarn install --no-lockfile <span class="comment">//不读取或生成yarn.lock</span></span><br><span class="line">yarn install --pure-lockfile <span class="comment">//不生成yarn.lock</span></span><br><span class="line"></span><br><span class="line">添加包（会更新package.json和yarn.lock）：</span><br><span class="line">yarn add <span class="punctuation">[</span>package<span class="punctuation">]</span> <span class="comment">// 在当前的项目中添加一个依赖包，会自动更新到package.json和yarn.lock文件中</span></span><br><span class="line">yarn add <span class="punctuation">[</span>package<span class="punctuation">]</span>@<span class="punctuation">[</span>version<span class="punctuation">]</span> <span class="comment">// 安装指定版本，这里指的是主要版本，如果需要精确到小版本，使用-E参数</span></span><br><span class="line">yarn add <span class="punctuation">[</span>package<span class="punctuation">]</span>@<span class="punctuation">[</span>tag<span class="punctuation">]</span> <span class="comment">// 安装某个tag（比如beta,next或者latest）</span></span><br><span class="line"><span class="comment">//不指定依赖类型默认安装到dependencies里，你也可以指定依赖类型：</span></span><br><span class="line"></span><br><span class="line">yarn add --dev/-D <span class="comment">// 加到 devDependencies</span></span><br><span class="line">yarn add --peer/-P <span class="comment">// 加到 peerDependencies</span></span><br><span class="line">yarn add --optional/-O <span class="comment">// 加到 optionalDependencies</span></span><br><span class="line"><span class="comment">//默认安装包的主要版本里的最新版本，下面两个命令可以指定版本：</span></span><br><span class="line"></span><br><span class="line">yarn add --exact/-E <span class="comment">// 安装包的精确版本。例如yarn add foo@1.2.3会接受1.9.1版，但是yarn add foo@1.2.3 --exact只会接受1.2.3版</span></span><br><span class="line">yarn add --tilde/-T <span class="comment">// 安装包的次要版本里的最新版。例如yarn add foo@1.2.3 --tilde会接受1.2.9，但不接受1.3.0</span></span><br><span class="line"></span><br><span class="line">发布包</span><br><span class="line">yarn publish</span><br><span class="line"></span><br><span class="line">移除一个包</span><br><span class="line">yarn remove &lt;packageName&gt;：移除一个包，会自动更新package.json和yarn.lock</span><br><span class="line"></span><br><span class="line">更新一个依赖</span><br><span class="line">yarn upgrade 用于更新包到基于规范范围的最新版本</span><br><span class="line"></span><br><span class="line">运行脚本</span><br><span class="line">yarn run 用来执行在 package.json 中 scripts 属性下定义的脚本</span><br><span class="line"></span><br><span class="line">显示某个包的信息</span><br><span class="line">yarn info &lt;packageName&gt; 可以用来查看某个模块的最新版本信息</span><br><span class="line"></span><br><span class="line">缓存</span><br><span class="line">yarn cache</span><br><span class="line">yarn cache list # 列出已缓存的每个包 yarn cache dir # 返回 全局缓存位置 yarn cache clean # 清除缓存</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-05T11:07:55.000Z" title="2022-4-5 19:07:55">2022-04-05</time>发表</span><span class="level-item"><time dateTime="2020-05-05T22:02:58.000Z" title="2020-5-6 6:02:58">2020-05-06</time>更新</span><span class="level-item">8 分钟读完 (大约1236个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/05/%E3%80%90Java%E3%80%91CAS-ABA%E9%97%AE%E9%A2%98/">CAS-ABA问题</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="cas-aba问题"><a class="markdownIt-Anchor" href="#cas-aba问题">#</a> CAS-ABA 问题</h1>
<h2 id="一概述"><a class="markdownIt-Anchor" href="#一概述">#</a> 一。概述：</h2>
<p>​		ABA 问题是在多线程并发的情况下，发生的一种现象。上一次记录了有关 CAS 操作的一些知识，CAS 通过比较内存中的一个数据是否是预期值，如果是就将它修改成新值，如果不是则进行自旋，重复比较的操作，直到某一刻内存值等于预期值再进行修改。而 ABA 问题则是在 CAS 操作中存在的一个经典问题，这个问题某些时候不会带来任何影响，某些时候却是影响很大的。</p>
<h2 id="二什么是aba问题"><a class="markdownIt-Anchor" href="#二什么是aba问题">#</a> 二。什么是 ABA 问题？</h2>
<h4 id="理解一"><a class="markdownIt-Anchor" href="#理解一">#</a> 理解一：</h4>
<p>​		当执行 campare and swap 会出现失败的情况。例如，一个线程先读取共享内存数据值 A，随后因某种原因，线程暂时挂起，同时另一个线程临时将共享内存数据值先改为 B，随后又改回为 A。随后挂起线程恢复，并通过 CAS 比较，最终比较结果将会无变化。这样会通过检查，这就是 ABA 问题。 在 CAS 比较前会读取原始数据，随后进行原子 CAS 操作。这个间隙之间由于并发操作，最终可能会带来问题。</p>
<h4 id="理解二"><a class="markdownIt-Anchor" href="#理解二">#</a> <strong>理解二:</strong></h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20181231131658183.png" alt=""></p>
<p>“ABA” 问题：假设 t1 线程工作时间为 10 秒，t2 线程工作时间为 2 秒，那么可能在 A 的工作期间，主内存中的共享变量 A 已经被 t2 线程修改了多次，只是恰好最后一次修改的值是该变量的初始值，虽然用 CAS 判定出来的结果是期望值，但是却不是原来那个了 =======》“狸猫换太子”<br>
 相当于是只关心共享变量的起始值和结束值，而不关心过程中共享变量是否被其他线程动过。<br>
有些业务可能不需要关心中间过程，只要前后值一样就行，但是有些业务需求要求变量在中间过程不能被修改。</p>
<p>只靠 CAS 无法保证 ABA 问题，需要使用 “原子引用” 才能解决！！！！</p>
<h1 id="三aba问题的解决"><a class="markdownIt-Anchor" href="#三aba问题的解决">#</a> 三.ABA 问题的解决：</h1>
<h2 id="原子引用存在aba问题"><a class="markdownIt-Anchor" href="#原子引用存在aba问题">#</a> 原子引用：（存在 ABA 问题）</h2>
<p>案例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">package</span> InterviewTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">	 String name;</span><br><span class="line">	 <span class="type">int</span> age;</span><br><span class="line">	 </span><br><span class="line">	 <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name,<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		 <span class="built_in">this</span>.name=name;</span><br><span class="line">		 <span class="built_in">this</span>.age=age;</span><br><span class="line">	 &#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;User [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomicReferenceDemo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">User</span> <span class="variable">z3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;z3&quot;</span>,<span class="number">25</span>);</span><br><span class="line">		<span class="type">User</span> <span class="variable">li4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;li4&quot;</span>,<span class="number">25</span>);</span><br><span class="line">		AtomicReference&lt;User&gt; atomicReference  = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">		atomicReference.set(z3);</span><br><span class="line">		System.out.println(atomicReference);</span><br><span class="line">		System.out.println(atomicReference.compareAndSet(z3, li4)+</span><br><span class="line">							<span class="string">&quot;       &quot;</span>+atomicReference.get().toString());</span><br><span class="line">		System.out.println(atomicReference.compareAndSet(li4, z3)+</span><br><span class="line">				<span class="string">&quot;       &quot;</span>+atomicReference.get().toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="带版本号的原子引用解决aba问题"><a class="markdownIt-Anchor" href="#带版本号的原子引用解决aba问题">#</a> 带版本号的原子引用（解决 ABA 问题）</h2>
<p><strong>AtomicStampedReference 版本号原子引用：</strong><br>
<strong>案例：两种原子引用的对比</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> InterviewTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicStampedReference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ABADemo</span> &#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> AtomicReference&lt;Integer&gt; atomicReference </span><br><span class="line">									= <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line">	<span class="keyword">static</span> AtomicStampedReference&lt;Integer&gt;  atomicStampedReference </span><br><span class="line">									= <span class="keyword">new</span> <span class="title class_">AtomicStampedReference</span>&lt;&gt;(<span class="number">100</span>,<span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;************以下是ABA问题的产生**************&quot;</span>);</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">101</span>);</span><br><span class="line">			atomicReference.compareAndSet(<span class="number">101</span>, <span class="number">100</span>);</span><br><span class="line">		&#125;,<span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			System.out.println(atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">2019</span>)</span><br><span class="line">					+<span class="string">&quot;   &quot;</span>+atomicReference.get());</span><br><span class="line">		&#125;,<span class="string">&quot;t2&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;************以下是ABA问题的解决**************&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicStampedReference.getStamp();</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   第一次版本号：&quot;</span>+stamp);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			atomicStampedReference.compareAndSet(<span class="number">100</span>, </span><br><span class="line">										<span class="number">101</span>, </span><br><span class="line">										atomicStampedReference.getStamp(),</span><br><span class="line">										atomicStampedReference.getStamp()+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   第2次版本号：&quot;</span>+atomicStampedReference.getStamp());</span><br><span class="line">			atomicStampedReference.compareAndSet(<span class="number">101</span>, </span><br><span class="line">					<span class="number">100</span>, </span><br><span class="line">					atomicStampedReference.getStamp(),</span><br><span class="line">					atomicStampedReference.getStamp()+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   第3次版本号：&quot;</span>+atomicStampedReference.getStamp());</span><br><span class="line">			</span><br><span class="line">		&#125;,<span class="string">&quot;t3&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicStampedReference.getStamp();</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   第一次版本号：&quot;</span>+stamp);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span>  atomicStampedReference.compareAndSet(</span><br><span class="line">					<span class="number">100</span>, </span><br><span class="line">					<span class="number">2019</span>, </span><br><span class="line">					stamp, </span><br><span class="line">					stamp+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+</span><br><span class="line">					<span class="string">&quot;  修改成功否：&quot;</span>+result+<span class="string">&quot;  当前最新实际版本号：&quot;</span></span><br><span class="line">					+atomicStampedReference.getStamp());</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+</span><br><span class="line">					<span class="string">&quot;  当前实际最新值：&quot;</span></span><br><span class="line">					+atomicStampedReference.getReference());</span><br><span class="line">			</span><br><span class="line">		&#125;,<span class="string">&quot;t4&quot;</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出:</span><br><span class="line">************以下是ABA问题的产生**************</span><br><span class="line"><span class="literal">true</span>   <span class="number">2019</span></span><br><span class="line">************以下是ABA问题的解决**************</span><br><span class="line">t3     第一次版本号：<span class="number">1</span></span><br><span class="line">t4     第一次版本号：<span class="number">1</span></span><br><span class="line">t3     第<span class="number">2</span>次版本号：<span class="number">2</span></span><br><span class="line">t3     第<span class="number">3</span>次版本号：<span class="number">3</span></span><br><span class="line">t4  修改成功否：<span class="literal">false</span>  当前最新实际版本号：<span class="number">3</span></span><br><span class="line">t4  当前实际最新值：<span class="number">100</span></span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-04-02T03:32:07.000Z" title="2022-4-2 11:32:07">2022-04-02</time>发表</span><span class="level-item"><time dateTime="2021-09-06T10:01:32.000Z" title="2021-9-6 18:01:32">2021-09-06</time>更新</span><span class="level-item">6 分钟读完 (大约900个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/04/02/%E3%80%90Vue%E3%80%91vue-json-editor%20json%E7%BC%96%E8%BE%91%E5%99%A8/">【Vue】vue-json-editor json编辑器.md</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="vuevue-json-editor-json编辑器md"><a class="markdownIt-Anchor" href="#vuevue-json-editor-json编辑器md">#</a> 【Vue】vue-json-editor <a target="_blank" rel="noopener" href="http://xn--json-303gr86s2dya.md">json 编辑器.md</a></h1>
<h1 id="一-概述"><a class="markdownIt-Anchor" href="#一-概述">#</a> 一、概述</h1>
<p>现有一个<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=vue%E9%A1%B9%E7%9B%AE&amp;spm=1001.2101.3001.7020"> vue 项目</a>，需要一个 json 编辑器，能够格式化 json 数据，同时也支持编辑功能。</p>
<p>vue-json-editor 插件就可以实现这个功能</p>
<h1 id="二-vue-json-editor-使用"><a class="markdownIt-Anchor" href="#二-vue-json-editor-使用">#</a> 二、vue-json-editor 使用</h1>
<h2 id="安装插件"><a class="markdownIt-Anchor" href="#安装插件">#</a> 安装插件</h2>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install vue<span class="operator">-</span>json<span class="operator">-</span>editor <span class="comment">--save</span></span><br></pre></td></tr></table></figure>
<h2 id="使用"><a class="markdownIt-Anchor" href="#使用">#</a> 使用</h2>
<p>test.vue</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 70%;margin-left: 30px;margin-top: 30px;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">vue-json-editor</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;resultInfo&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:showBtns</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:mode</span>=<span class="string">&quot;&#x27;code&#x27;&quot;</span></span></span><br><span class="line"><span class="tag">     </span></span><br><span class="line"><span class="tag">      @<span class="attr">json-change</span>=<span class="string">&quot;onJsonChange&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">json-save</span>=<span class="string">&quot;onJsonSave&quot;</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">has-error</span>=<span class="string">&quot;onError&quot;</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;checkJson&quot;</span>&gt;</span>确定<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="comment">// 导入模块</span></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">import</span> vueJsonEditor <span class="keyword">from</span> <span class="string">&#x27;vue-json-editor&#x27;</span></span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 注册组件</span></span></span><br><span class="line"><span class="language-javascript">    <span class="attr">components</span>: &#123; vueJsonEditor &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">hasJsonFlag</span>:<span class="literal">true</span>,  <span class="comment">// json是否验证通过</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// json数据</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">resultInfo</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="string">&#x27;employees&#x27;</span>: [</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;firstName&#x27;</span>: <span class="string">&#x27;Bill&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="string">&#x27;lastName&#x27;</span>: <span class="string">&#x27;Gates&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;firstName&#x27;</span>: <span class="string">&#x27;George&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;lastName&#x27;</span>: <span class="string">&#x27;Bush&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;,</span></span><br><span class="line"><span class="language-javascript">            &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;firstName&#x27;</span>: <span class="string">&#x27;Thomas&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">              <span class="string">&#x27;lastName&#x27;</span>: <span class="string">&#x27;Carter&#x27;</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          ]</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">mounted</span>: <span class="keyword">function</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      onJsonChange (value) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(&#x27;更改value:&#x27;, value);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// 实时保存</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="title function_">onJsonSave</span>(value)</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      onJsonSave (value) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(&#x27;保存value:&#x27;, value);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">resultInfo</span> = value</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">hasJsonFlag</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">onError</span>(<span class="params">value</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">// console.log(&quot;json错误了value:&quot;, value);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">hasJsonFlag</span> = <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// 检查json</span></span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">checkJson</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">hasJsonFlag</span> == <span class="literal">false</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// console.log(&quot;json验证失败&quot;)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// this.$message.error(&quot;json验证失败&quot;)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&quot;json验证失败&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// console.log(&quot;json验证成功&quot;)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// this.$message.success(&quot;json验证成功&quot;)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&quot;json验证成功&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">return</span> <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>插件参数说明：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">vue-json-editor</span></span></span><br><span class="line"><span class="tag">      <span class="attr">v-model</span>=<span class="string">&quot;resultInfo&quot;</span>  // <span class="attr">绑定数据resultInfo</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:showBtns</span>=<span class="string">&quot;false&quot;</span>  // <span class="attr">是否显示保存按钮</span></span></span><br><span class="line"><span class="tag">      <span class="attr">:mode</span>=<span class="string">&quot;&#x27;code&#x27;&quot;</span>  // <span class="attr">默认编辑模式</span></span></span><br><span class="line"><span class="tag">       // <span class="attr">显示中文</span>，<span class="attr">默认英文</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">json-change</span>=<span class="string">&quot;onJsonChange&quot;</span>  // <span class="attr">数据改变事件</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">json-save</span>=<span class="string">&quot;onJsonSave&quot;</span>  // <span class="attr">数据保存事件</span></span></span><br><span class="line"><span class="tag">      @<span class="attr">has-error</span>=<span class="string">&quot;onError&quot;</span>  // <span class="attr">数据错误事件</span></span></span><br><span class="line"><span class="tag">    /&gt;</span></span><br></pre></td></tr></table></figure>
<p>相关说明：</p>
<p><strong>resultInfo 默认绑定的变量，这个变量可以为空，编辑器会显示为 {}</strong></p>
<p><strong>:showBtns 这里不显示保存按钮，为什么呢？原因有 2 个。1. 默认样式不好看。2. 只能当 json 数据正确，才能点击保存按钮，否则禁止点击。</strong></p>
<p><strong>json-change，json-save，has-error 这 3 个事件，是会实时触发的。</strong></p>
<p>这里我额外加了一个检测方法，用来判断 json 数据是否正确。默认标记为 true，当不正确时，会改变状态为 false。</p>
<h2 id="访问"><a class="markdownIt-Anchor" href="#访问">#</a> 访问</h2>
<p>点击确定，提示成功</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/f9195e9eeb26d90a8751d345ccdc6c16.png" alt="img"></p>
<p>改为错误的，点击确定，会提示失败。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/c290d807c751bfc2b24672522aa35b6d.png" alt="img"></p>
<p>注意：这个 json 编辑会带有下来菜单，实际项目中，需要去除，比较用户误操作。</p>
<p>在实际使用中发现几个问题：</p>
<p>\1. 输入中文时，传给后端的值不多</p>
<p>\2. 输入大量 json 时，会有部分数据丢失。</p>
<p>因此，我们使用下面的编辑器 bin-code-editor</p>
<h1 id="三-bin-code-editor"><a class="markdownIt-Anchor" href="#三-bin-code-editor">#</a> 三、bin-code-editor</h1>
<h2 id="安装模块"><a class="markdownIt-Anchor" href="#安装模块">#</a> 安装模块</h2>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install bin-code-editor -d</span><br></pre></td></tr></table></figure>
<h2 id="引入"><a class="markdownIt-Anchor" href="#引入">#</a> 引入</h2>
<p>在 main.js 中写入 2 行</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">CodeEditor</span> <span class="keyword">from</span> <span class="string">&#x27;bin-code-editor&#x27;</span>;</span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(<span class="title class_">CodeEditor</span>);</span><br></pre></td></tr></table></figure>
<p>test.vue</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 70%;margin-left: 30px;margin-top: 30px;&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">b-code-editor</span> <span class="attr">v-model</span>=<span class="string">&quot;jsonStr&quot;</span> <span class="attr">:auto-format</span>=<span class="string">&quot;true&quot;</span> <span class="attr">:smart-indent</span>=<span class="string">&quot;true&quot;</span> <span class="attr">theme</span>=<span class="string">&quot;dracula&quot;</span> <span class="attr">:indent-unit</span>=<span class="string">&quot;4&quot;</span> <span class="attr">:line-wrap</span>=<span class="string">&quot;false&quot;</span> <span class="attr">ref</span>=<span class="string">&quot;editor&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">b-code-editor</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;onSubumit&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">const</span> jsonData =<span class="string">`&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">    &quot;employees&quot;: [&#123;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;firstName&quot;: &quot;Bill&quot;,</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;lastName&quot;: &quot;Gates&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">    &#125;, &#123;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;firstName&quot;: &quot;George&quot;,</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;lastName&quot;: &quot;Bush&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">    &#125;, &#123;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;firstName&quot;: &quot;Thomas&quot;,</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">      &quot;lastName&quot;: &quot;Carter&quot;</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">    &#125;]</span></span></span></span><br><span class="line"><span class="string"><span class="language-javascript"><span class="language-xml">  &#125;`</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="attr">jsonStr</span>:jsonData</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="comment">// 检测json格式</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">isJSON</span>(<span class="params">str</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (<span class="keyword">typeof</span> str == <span class="string">&#x27;string&#x27;</span>) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">try</span> &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">var</span> obj=<span class="title class_">JSON</span>.<span class="title function_">parse</span>(str);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">if</span>(<span class="keyword">typeof</span> obj == <span class="string">&#x27;object&#x27;</span> &amp;&amp; obj )&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">return</span> <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;<span class="keyword">else</span>&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">              <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"> </span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125; <span class="keyword">catch</span>(e) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">            <span class="keyword">return</span> <span class="literal">false</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> str == <span class="string">&#x27;object&#x27;</span>  &amp;&amp; str) &#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> <span class="literal">true</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;,</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      <span class="title function_">onSubumit</span>(<span class="params"></span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="title function_">isJSON</span>(<span class="variable language_">this</span>.<span class="property">jsonStr</span>))&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">`json格式错误`</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">          <span class="keyword">return</span> <span class="literal">false</span></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">success</span>(<span class="string">&#x27;json格式正确&#x27;</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">      &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">  &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"> </span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>访问测试页面，效果如下：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/a4e861d97e8c5834037dd0c38546c01c.png" alt="img"></p>
<p>输入错误的值，点击执行，会有提示</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/0d0f360a6b1cc9c221a0d8608dfe81da.png" alt="img"></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-28T06:44:03.000Z" title="2022-3-28 14:44:03">2022-03-28</time>发表</span><span class="level-item"><time dateTime="2019-11-23T08:25:59.000Z" title="2019-11-23 16:25:59">2019-11-23</time>更新</span><span class="level-item">5 分钟读完 (大约704个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/28/%E3%80%90NodeJS%E3%80%91Windows%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%A6%82%E4%BD%95%E5%81%9ANode%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%EF%BC%9F/">【NodeJS】Windows环境下如何做Node多版本管理？</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="nodejswindows环境下如何做node多版本管理"><a class="markdownIt-Anchor" href="#nodejswindows环境下如何做node多版本管理">#</a> 【NodeJS】Windows 环境下如何做 Node 多版本管理？</h1>
<h1 id="前言"><a class="markdownIt-Anchor" href="#前言">#</a> 前言</h1>
<p>​		在多个不同的前端项目中，总会遇到 nodeJs 需求版本不一致的情况，例如，项目 A 需要 node12 版本，项目 B 要求不能小于 node16 版本，此时就产生了冲突，因此我们需要使用一个 Node 版本控制来解决这一系列的问题。</p>
<h1 id="nvm-windows"><a class="markdownIt-Anchor" href="#nvm-windows">#</a> nvm-windows</h1>
<p>​		在 Windows 环境下，可以使用  <code>nvm-windows</code>  工具来管理多个 Node.js 版本。与  <code>nvm</code>  相似， <code>nvm-windows</code>  也是一个 Node.js 版本管理器，可以让你在同一台计算机上安装和管理多个 Node.js 版本。</p>
<p>以下是使用  <code>nvm-windows</code>  工具的步骤：</p>
<ol>
<li>
<p>下载安装包</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/coreybutler/nvm-windows/releases/tag/1.1.11</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>首先需要下载并安装  <code>nvm-windows</code>  工具。可以从 GitHub 上下载最新版本的安装包。下载后，直接运行安装程序按照提示进行安装即可。</p>
<ol>
<li>安装 Node.js 版本</li>
</ol>
<p>安装完成后，在命令行中输入以下命令来安装 Node.js 的不同版本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm install 14.17.5</span><br></pre></td></tr></table></figure>
<p>这将安装 Node.js v14.17.5 版本。如果要安装其他版本，只需将  <code>14.17.5</code>  替换为所需的版本即可。安装完成后，可以使用以下命令查看已安装的 Node.js 版本：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm list</span><br></pre></td></tr></table></figure>
<ol>
<li>切换 Node.js 版本</li>
</ol>
<p>要切换到已安装的特定版本，可以使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm use 14.17.5</span><br></pre></td></tr></table></figure>
<p>这将使当前命令行窗口使用 Node.js v14.17.5 版本。如果要设置默认版本，请使用以下命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvm alias default 14.17.5</span><br></pre></td></tr></table></figure>
<p>这将将 Node.js v14.17.5 设置为默认版本。每次打开一个新的命令行窗口时，都会自动将其设置为默认版本。</p>
<ol>
<li>其他命令</li>
</ol>
<p>除了上述命令外， <code>nvm-windows</code>  还提供了其他有用的命令，例如：</p>
<ul>
<li><code>nvm on</code> ：启用  <code>nvm</code>  环境变量。</li>
<li><code>nvm off</code> ：禁用  <code>nvm</code>  环境变量。</li>
<li><code>nvm uninstall 14.17.5</code> ：卸载 Node.js v14.17.5 版本。</li>
</ul>
<p>以上是在 Windows 环境下使用  <code>nvm-windows</code>  工具管理多个 Node.js 版本的基本步骤。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-24T06:38:19.000Z" title="2022-3-24 14:38:19">2022-03-24</time>发表</span><span class="level-item"><time dateTime="2021-10-01T11:18:24.000Z" title="2021-10-1 19:18:24">2021-10-01</time>更新</span><span class="level-item">5 分钟读完 (大约684个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/24/%E3%80%90MySQL%E3%80%91MySQL%E5%AE%89%E8%A3%85%20starting%20the%20server%E5%A4%B1%E8%B4%A5%E7%9A%84%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95/">MySQL安装 starting the server失败的解决办法</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h3 id="mysql安装-starting-the-server失败的解决办法"><a class="markdownIt-Anchor" href="#mysql安装-starting-the-server失败的解决办法">#</a> MySQL 安装 starting the server 失败的解决办法</h3>
<p>​		如果电脑是第一次安装 MySQL，一般不会出现这样的报错。如下图所示。starting the server 失败，通常是因为上次安装的该软件未清除干净。</p>
<p><img src="https://img-blog.csdnimg.cn/20190807043159195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podWFuZ2c1NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><strong>完全卸载该软件的办法</strong>：</p>
<p>第一步，进入… 控制面板 \ 程序 \ 程序和功能，卸载下图中的 MySQL 两个软件。</p>
<p><img src="https://img-blog.csdnimg.cn/20190807043419726.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podWFuZ2c1NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
第二步，删除上次安装目录的 MySQL 残留文件，更不要忘了删除 ProgramData 下的 MySQL 文件夹，如下图所示。注意：这里的文件夹与上次安装目录里的残留文件不同，C:\ProgramData 一般默认是隐藏的。<br>
<img src="https://img-blog.csdnimg.cn/20190807043522439.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podWFuZ2c1NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
第三步，Win+R 输入 regedit 运行，进入注册表编辑器，按下图路径，找到 MySQL，进而删除 MySQL 注册表信息。<br>
<img src="https://img-blog.csdnimg.cn/20190807043623577.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podWFuZ2c1NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>
第四步，做完前三步，打开服务，会发现 MySQL57 服务依然存在，如下图所示。这就是导致安装失败的重要原因，所以需要删除 MySQL57 服务。方法：以管理员的权限运行 dos 命令，然后输入 sc delete MySQL57 。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">C</span>:\<span class="title class_">Windows</span>\system32&gt;sc <span class="keyword">delete</span> <span class="title class_">MySQL57</span></span><br><span class="line">[<span class="variable constant_">SC</span>] <span class="title class_">DeleteService</span> 成功</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p><img src="https://img-blog.csdnimg.cn/20190807043734156.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3podWFuZ2c1NQ==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>现在就可以轻松的安装上 MySQL 软件了！</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-15T01:39:26.000Z" title="2022-3-15 9:39:26">2022-03-15</time>发表</span><span class="level-item"><time dateTime="2021-08-02T11:44:00.000Z" title="2021-8-2 19:44:00">2021-08-02</time>更新</span><span class="level-item">4 分钟读完 (大约529个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/15/%E3%80%90Vue%E3%80%91el-upload%E9%99%90%E5%88%B6%E5%8F%AA%E4%B8%8A%E4%BC%A0%E4%B8%80%E5%BC%A0%E5%9B%BE%E7%89%87%E5%B9%B6%E9%9A%90%E8%97%8F%E5%8F%B3%E4%BE%A7%E7%9A%84%E4%B8%8A%E4%BC%A0%E5%8C%BA%E5%9F%9F/">【Vue】el-upload限制只上传一张图片并隐藏右侧的上传区域</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="vueel-upload限制只上传一张图片并隐藏右侧的上传区域"><a class="markdownIt-Anchor" href="#vueel-upload限制只上传一张图片并隐藏右侧的上传区域">#</a> 【Vue】el-upload 限制只上传一张图片并隐藏右侧的上传区域</h1>
<p>使用 element UI 中的 el-upload 如何限制上传一张图片后隐藏右侧的上传区域</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/8c0456f090629e60b774748ac33ee22b.png" alt="img"></p>
<p>主要代码块：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">监听事件</span><br><span class="line"><span class="attr">watch</span>: &#123;</span><br><span class="line">  <span class="attr">onChangeImgUrl</span>: &#123;</span><br><span class="line">    <span class="title function_">handler</span>(<span class="params">newName</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> aa = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.el-upload--picture-card&#x27;</span>)</span><br><span class="line">      <span class="keyword">if</span> (newName) &#123;</span><br><span class="line">        aa.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span> </span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          aa.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline-block&#x27;</span></span><br><span class="line">        &#125;, <span class="number">1100</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p>原理：</p>
<p>因为只上传一张图片，监听图片的 url 即可。听过监听图片的 url 存在与否，通过获取 dom 元素设置不同的样式。</p>
<p>以下完整代码实现如下效果:</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/b3c00ea22f8c0efde7e61125a35a7083.png" alt="img"></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">父组件setBank.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;setBank&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-button</span> <span class="attr">type</span>=<span class="string">&quot;primary&quot;</span> @<span class="attr">click</span>=<span class="string">&quot;addInfo&quot;</span>&gt;</span>入驻<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-dialog</span> <span class="attr">:visible.sync</span>=<span class="string">&quot;checkDialogVisible&quot;</span> <span class="attr">title</span>=<span class="string">&quot;入驻&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">Upload</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-dialog</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">import</span> <span class="title class_">Upload</span> <span class="keyword">from</span> <span class="string">&#x27;./upload.vue&#x27;</span></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">components</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title class_">Upload</span></span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">checkDialogVisible</span>: <span class="literal">false</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript"> </span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">//  入驻</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">addInfo</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">checkDialogVisible</span> = <span class="literal">true</span></span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">子组件 upload.vue</span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;con_form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">el-form</span> <span class="attr">ref</span>=<span class="string">&quot;addForm&quot;</span> <span class="attr">:model</span>=<span class="string">&quot;addForm&quot;</span> <span class="attr">class</span>=<span class="string">&quot;demo-comCreditForm&quot;</span> <span class="attr">label-width</span>=<span class="string">&quot;200px&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;企业名称：&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;name&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;addForm.name&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;转贷机构名称&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;统一社会信用代码：&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;code&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">el-input</span> <span class="attr">v-model</span>=<span class="string">&quot;addForm.code&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;请输入统一社会信用代码&quot;</span> /&gt;</span> <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;upload_icon&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">el-form-item</span> <span class="attr">label</span>=<span class="string">&quot;上传：&quot;</span> <span class="attr">prop</span>=<span class="string">&quot;addForm&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">el-upload</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:auto-upload</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:limit</span>=<span class="string">&quot;limitCount&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:on-remove</span>=<span class="string">&quot;handleRemove&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:on-change</span>=<span class="string">&quot;onChange&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:on-success</span>=<span class="string">&quot;handleSuccess&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:file-list</span>=<span class="string">&quot;fileList&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:data</span>=<span class="string">&quot;uploadData&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">:before-upload</span>=<span class="string">&quot;beforeAvatarUpload&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">action</span>=<span class="string">&quot;#&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">class</span>=<span class="string">&quot;avatar-uploader&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">list-type</span>=<span class="string">&quot;picture-card&quot;</span></span></span><br><span class="line"><span class="tag">            <span class="attr">accept</span>=<span class="string">&quot;image/jpg,image/jpeg,image/png&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">img</span> <span class="attr">v-if</span>=<span class="string">&quot;url&quot;</span> <span class="attr">:src</span>=<span class="string">&quot;url&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-upload-list__item-thumbnail&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">img</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">slot</span>=<span class="string">&quot;default&quot;</span> <span class="attr">class</span>=<span class="string">&quot;el-icon-plus&quot;</span> /&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">el-upload</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;el-upload__tip&quot;</span>&gt;</span>jpg.jpeg、png格式，大小5M以内<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">el-form-item</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">el-form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="language-javascript">  <span class="title function_">data</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">limitCount</span>: <span class="number">1</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">onChangeImgUrl</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">uploadData</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;testFile&#x27;</span></span></span><br><span class="line"><span class="language-javascript">      &#125;,</span></span><br><span class="line"><span class="language-javascript">      <span class="attr">fileList</span>: [],</span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//  申请入驻银行 表单</span></span></span><br><span class="line"><span class="language-javascript">      <span class="attr">addForm</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">code</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">//  社会信用代码</span></span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">watch</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="attr">onChangeImgUrl</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="title function_">handler</span>(<span class="params">newName</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> aa = <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.el-upload--picture-card&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (newName) &#123;</span></span><br><span class="line"><span class="language-javascript">          aa.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span></span></span><br><span class="line"><span class="language-javascript">        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            aa.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;inline-block&#x27;</span></span></span><br><span class="line"><span class="language-javascript">          &#125;, <span class="number">1100</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;,</span></span><br><span class="line"><span class="language-javascript">  <span class="attr">methods</span>: &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">onChange</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">onChangeImgUrl</span> = file.<span class="property">url</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleRemove</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.<span class="property">onChangeImgUrl</span> = <span class="string">&#x27;&#x27;</span></span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">handleSuccess</span>(<span class="params">file, fileList</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">this</span>.$set(<span class="variable language_">this</span>.<span class="property">myForm</span>, <span class="string">&#x27;netTgThumbnail&#x27;</span>, fileList.<span class="property">response</span>.<span class="property">bean</span>.<span class="property">result</span>.<span class="property">fileUrlPath</span>)</span></span><br><span class="line"><span class="language-javascript">    &#125;,</span></span><br><span class="line"><span class="language-javascript">    <span class="comment">// 限制图片大小</span></span></span><br><span class="line"><span class="language-javascript">    <span class="title function_">beforeAvatarUpload</span>(<span class="params">file</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">const</span> isLt5M = file.<span class="property">size</span> / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">5</span></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">if</span> (!isLt5M) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">this</span>.<span class="property">$message</span>.<span class="title function_">error</span>(<span class="string">&#x27;上传头像图片大小不能超过 2MB!&#x27;</span>)</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">return</span> isLt5M</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">/deep/<span class="selector-class">.upload_icon</span> <span class="selector-class">.el-form-item__content</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: relative;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">190px</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.avatar-uploader</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">width</span>: <span class="number">145px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">height</span>: <span class="number">145px</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">top</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"><span class="selector-class">.con_form</span> <span class="selector-class">.upload_icon</span> <span class="selector-class">.el-form-item__content</span> <span class="selector-class">.el-upload__tip</span> &#123;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">position</span>: absolute;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">bottom</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">  <span class="attribute">color</span>: red;</span></span><br><span class="line"><span class="language-css">&#125;</span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-10T20:30:32.000Z" title="2022-3-11 4:30:32">2022-03-11</time>发表</span><span class="level-item"><time dateTime="2023-05-11T10:10:32.000Z" title="2023-5-11 18:10:32">2023-05-11</time>更新</span><span class="level-item">7 分钟读完 (大约982个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/11/%E3%80%90Java%E3%80%91Integer%E7%9A%84%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6/">【Java】Integer的缓存机制</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="integer的缓存机制"><a class="markdownIt-Anchor" href="#integer的缓存机制">#</a> Integer 的缓存机制</h1>
<h3 id="文章目录"><a class="markdownIt-Anchor" href="#文章目录">#</a> 文章目录</h3>
<ul>
<li><a href="#__1">一 现象</a></li>
<li><a href="#_Integer_19">二 Integer 的缓存机制</a></li>
<li>
<ul>
<li><a href="#21_valueOf_20">2.1 自动装箱等效于 valueOf</a></li>
<li><a href="#22_valueOf_29">2.2 valueOf</a></li>
<li><a href="#23_IntegerCache_39">2.3 IntegerCache</a></li>
</ul>
</li>
<li><a href="#__76">三 为什么要有缓存机制</a></li>
<li>
<ul>
<li><a href="#31__77">3.1 原因</a></li>
<li><a href="#32__79">3.2 其他包装对象的缓存</a></li>
</ul>
</li>
</ul>
<h1 id="一-现象"><a class="markdownIt-Anchor" href="#一-现象">#</a> 一 现象</h1>
<p>在引入 Integer 的缓存机制前，可以先判断一下以下几种情况</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">   # 一：自动装箱</span><br><span class="line">      <span class="type">Integer</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">      <span class="type">Integer</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line">      System.out.println(s1 == s2);</span><br><span class="line">      # 答案为<span class="literal">true</span></span><br><span class="line">     	</span><br><span class="line"># 二：</span><br><span class="line"><span class="type">Integer</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">2</span>);</span><br><span class="line"><span class="type">Integer</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(<span class="number">2</span>);</span><br><span class="line">System.out.println(s1 == s2);</span><br><span class="line"># 答案为<span class="literal">false</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>情况二很好理解，虽然传值相同，但是 Integer 是<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E5%8C%85%E8%A3%85%E7%B1%BB&amp;spm=1001.2101.3001.7020">包装类</a>，不同对象的引用地址是不一样的，而 “==” 比的是引用地址，那为什么情况一中会得到结果 true<br>
 这里就不得不提到 Integer 的缓存机制了</p>
<h1 id="二-integer的缓存机制"><a class="markdownIt-Anchor" href="#二-integer的缓存机制">#</a> 二 Integer 的缓存机制</h1>
<h2 id="21-自动装箱等效于valueof"><a class="markdownIt-Anchor" href="#21-自动装箱等效于valueof">#</a> 2.1 自动装箱等效于 valueOf</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#以上代码的情况一的自动装箱等效于Integer中的ValueOf()方法，如下：</span><br><span class="line">	<span class="type">Integer</span> <span class="variable">s1</span> <span class="operator">=</span> Integer.valueOf(<span class="number">2</span>);</span><br><span class="line">	<span class="type">Integer</span> <span class="variable">s2</span> <span class="operator">=</span> Integer.valueOf(<span class="number">2</span>);</span><br><span class="line">	System.out.println(s1 == s2);</span><br></pre></td></tr></table></figure>
<h2 id="22-valueof"><a class="markdownIt-Anchor" href="#22-valueof">#</a> 2.2 valueOf</h2>
<p>以下是 valueOf () 方法的具体实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title function_">valueOf</span><span class="params">(<span class="type">int</span> i)</span> &#123;</span><br><span class="line">     <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">         <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Integer</span>(i);</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>可以看见，其实现方式和 IntegerCache 有关</p>
<h2 id="23-integercache"><a class="markdownIt-Anchor" href="#23-integercache">#</a> 2.3 IntegerCache</h2>
<p>IntegerCache 是<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Interger&amp;spm=1001.2101.3001.7020"> Interger</a> 的一个静态内部类，实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">IntegerCache</span> &#123;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">low</span> <span class="operator">=</span> -<span class="number">128</span>;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> high;</span><br><span class="line">        <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">static</span> &#123;</span><br><span class="line">            <span class="comment">// high value may be configured by property</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">h</span> <span class="operator">=</span> <span class="number">127</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">integerCacheHighPropValue</span> <span class="operator">=</span></span><br><span class="line">                sun.misc.VM.getSavedProperty(<span class="string">&quot;java.lang.Integer.IntegerCache.high&quot;</span>);</span><br><span class="line">            <span class="keyword">if</span> (integerCacheHighPropValue != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> parseInt(integerCacheHighPropValue);</span><br><span class="line">                    i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">                    <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                    h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">                    <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            high = h;</span><br><span class="line"></span><br><span class="line">            cache = <span class="keyword">new</span> <span class="title class_">Integer</span>[(high - low) + <span class="number">1</span>];</span><br><span class="line">            <span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> low;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">k</span> <span class="operator">=</span> <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">                cache[k] = <span class="keyword">new</span> <span class="title class_">Integer</span>(j++);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">            <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>可以看到，默认情况下，该<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E9%9D%99%E6%80%81%E5%86%85%E9%83%A8%E7%B1%BB&amp;spm=1001.2101.3001.7020">静态内部类</a>会直接缓存 - 127 到 128 的 Integer 对象，因此，在 valueOf () 方法中，如果值在 - 127-128 之间，都会直接返回缓存中的该对象而不会重新生成对象，引用地址当然相同了。<br>
而且 java5 引入时，该范围还是固定的，而在 java6 之后，Integer 的缓存中还可以通过 Integer.IntegerCache.high 来设置最大值。由于这个缓存机制，程序中第一次使用 Integer 的时候还需要一定的时间家长该缓存类</p>
<h1 id="三-为什么要有缓存机制"><a class="markdownIt-Anchor" href="#三-为什么要有缓存机制">#</a> 三 为什么要有缓存机制</h1>
<h2 id="31-原因"><a class="markdownIt-Anchor" href="#31-原因">#</a> 3.1 原因</h2>
<p>因为我们常见的基本数据类型中，使用包装类包装数值时会创建大量对象，如果没有缓存的话，会有大量的包装类被创建，占用内存，降低效率。选择最常用的数值范围设置缓存机制，就可以优化这一现象</p>
<h2 id="32-其他包装对象的缓存"><a class="markdownIt-Anchor" href="#32-其他包装对象的缓存">#</a> 3.2 其他包装对象的缓存</h2>
<p>既然缓存机制的原因我们知道了，那除了 Integer 之外，其他包装类有这种缓存机制吗？肯定是有的</p>
<ul>
<li>ByteCache：缓存 Byte 对象</li>
<li>ShortChche：缓存 Short 对象</li>
<li>LongChche：缓存 Long 对象</li>
<li>CharacterChche：缓存 Character 对象<br>
 Byte，Short，Long 的缓存范围都是 - 128-127，Character 的缓存范围是 0-127，除了 Integer，其他的缓存范围都是固定的</li>
</ul>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-08T09:37:18.000Z" title="2022-3-8 17:37:18">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2019-01-01T20:59:12.000Z" title="2019-1-2 4:59:12">2019-01-02</time>更新</span><span class="level-item">7 分钟读完 (大约1031个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/08/%E3%80%90RocketMQ%E3%80%91RocketMQ/">RocketMQ</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="rocketmq"><a class="markdownIt-Anchor" href="#rocketmq">#</a> RocketMQ</h1>
<h2 id="应用场景"><a class="markdownIt-Anchor" href="#应用场景">#</a> 应用场景</h2>
<ul>
<li>异步解藕</li>
<li>削峰填谷</li>
<li>消息分发</li>
</ul>
<h2 id="环境搭建"><a class="markdownIt-Anchor" href="#环境搭建">#</a> 环境搭建</h2>
<ol>
<li>
<p>上传 rocketmq-all-4.4.0-bin-release.zip 到家目录</p>
</li>
<li>
<p>使用解压命令进行解压</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip /usr/local/rocketmq-all-4.4.0-bin-release.zip</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>软件重命名</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv /usr/local/rocketmq-all-4.4.0-bin-release/ /usr/local/rocketmq-4.4/</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>修改启动参数配置</p>
<blockquote>
<p>JAVA_OPT=”${JAVA_OPT} -server <strong>-Xms1g -Xmx1g -Xmn1g</strong>“</p>
</blockquote>
<p>两个文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/local/rocketmq-4.4/bin/runbroker.sh</span><br><span class="line"></span><br><span class="line">vi /usr/local/rocketmq-4.4/bin/runserver.sh</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>启动名字服务和代理服务</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">nohup sh /usr/local/rocketmq-4.4/bin/mqnamesrv &amp;</span><br><span class="line"></span><br><span class="line"># -n localhost:9876 指定名称服务的地址, 类似于zk的地址</span><br><span class="line"></span><br><span class="line">nohup sh /usr/local/rocketmq-4.4/bin/mqbroker -n localhost:9876 -c /usr/local/rocketmq-4.4/conf/broker.conf &amp;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>检验是否启动正常</p>
<p>使用 java 的内置命令: <strong>jps 可以看到 BrokerStartup 和 NamesrvStartup 进程</strong></p>
<p>使用 Linux 命令 **: netstat-ntlp 可以看到 9876 的端口和 10911 的端口 **</p>
<p>使用 ps-ef |grep java</p>
<p>查看启动日志:</p>
<p>tail -100f ~/logs/rocketmqlogs/namesrv.log</p>
<p>tail -100f ~/logs/rocketmqlogs/broker.log</p>
</li>
<li>
<p>关闭 RocketMQ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 1.关闭NameServer</span><br><span class="line"></span><br><span class="line">sh /usr/local/rocketmq-4.4/bin/mqshutdown namesrv</span><br><span class="line"></span><br><span class="line"># 2.关闭Broker</span><br><span class="line"></span><br><span class="line">sh /usr/local/rocketmq-4.4/bin/mqshutdown broker</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="编写sh脚本文件"><a class="markdownIt-Anchor" href="#编写sh脚本文件">#</a> 编写 sh 脚本文件</h3>
<ul>
<li>
<p>启动 (<a target="_blank" rel="noopener" href="http://startRocketMQ.sh">startRocketMQ.sh</a>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># !/bin/bash</span><br><span class="line"></span><br><span class="line">echo &#x27;------------------rocketmq-nameServer-starter-------------------------&#x27; </span><br><span class="line">nohup sh /usr/local/rocketmq-4.4/bin/mqnamesrv &amp;</span><br><span class="line">echo &#x27;------------------rocketmq-nameServer-started-------------------------&#x27;</span><br><span class="line"></span><br><span class="line">echo &#x27;------------------rocketmq-brokerServer-starter-----------------------&#x27; </span><br><span class="line">nohup sh /usr/local/rocketmq-4.4/bin/mqbroker -n localhost:9876 -c /usr/local/rocketmq-4.4/conf/broker.conf &amp;</span><br><span class="line">echo &#x27;------------------rocketmq-brokerServer-started-----------------------&#x27;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>关闭 (<a target="_blank" rel="noopener" href="http://stutdownRocketMQ.sh">stutdownRocketMQ.sh</a>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># !/bin/bash</span><br><span class="line"></span><br><span class="line">echo &#x27;------------------rocketmq-nameServer-shutdown-------------------------&#x27; </span><br><span class="line">sh /usr/local/rocketmq-4.4/bin/mqshutdown namesrv</span><br><span class="line">echo &#x27;------------------rocketmq-nameServer-shutdowned-------------------------&#x27;</span><br><span class="line"></span><br><span class="line">echo &#x27;------------------rocketmq-brokerServer-shutdown-----------------------&#x27; </span><br><span class="line">sh /usr/local/rocketmq-4.4/bin/mqshutdown broker</span><br><span class="line">echo &#x27;------------------rocketmq-brokerServer-shutdowned-----------------------&#x27;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="监控平台"><a class="markdownIt-Anchor" href="#监控平台">#</a> 监控平台</h2>
<p>使用 jar</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup  java -jar  rocketmq-console-ng-1.0.1.jar  &amp;</span><br></pre></td></tr></table></figure>
<h2 id="springboot集成"><a class="markdownIt-Anchor" href="#springboot集成">#</a> SpringBoot 集成</h2>
<h3 id="依赖"><a class="markdownIt-Anchor" href="#依赖">#</a> 依赖</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.apache.rocketmq&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;rocketmq-spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.0.3&lt;/version&gt;</span><br><span class="line">&lt;/dependency&gt;</span><br></pre></td></tr></table></figure>
<h3 id="配置"><a class="markdownIt-Anchor" href="#配置">#</a> 配置</h3>
<ul>
<li>
<p>生产者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rocketmq.name-server=127.0.0.1:9876</span><br><span class="line">rocketmq.producer.group=my-group</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>消费者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rocketmq.name-server=127.0.0.1:9876</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="编码"><a class="markdownIt-Anchor" href="#编码">#</a> 编码</h3>
<ul>
<li>
<p>生产者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">public class HelloController &#123;</span><br><span class="line">    @Autowired</span><br><span class="line">    private RocketMQTemplate rocketMQTemplate;</span><br><span class="line">    @RequestMapping(&quot;01-hello&quot;)</span><br><span class="line">    public String sendMsg(String message,String age) throws Exception&#123;</span><br><span class="line">      //发送消息</span><br><span class="line">   		  SendResult sendResult = rocketMQTemplate.syncSend(&quot;01-boot:&quot;, message);</span><br><span class="line">      </span><br><span class="line">        System.out.println(sendResult.getMsgId());</span><br><span class="line">        System.out.println(sendResult.getSendStatus());</span><br><span class="line">        return &quot;success&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>消费者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">        topic = &quot;01-boot&quot;,</span><br><span class="line">        consumerGroup = &quot;wolfcode-consumer&quot;</span><br><span class="line">)</span><br><span class="line">public class HelloConsumer implements RocketMQListener&lt;MessageExt&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(MessageExt messageExt) &#123;</span><br><span class="line">         System.out.println(&quot;消费消息&quot;+messageExt);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="发送消息方式生产者"><a class="markdownIt-Anchor" href="#发送消息方式生产者">#</a> 发送消息方式 (生产者)</h4>
<h5 id="发送类型"><a class="markdownIt-Anchor" href="#发送类型">#</a> 发送类型</h5>
<ul>
<li>
<p>同步消息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SendResult sendResult = rocketMQTemplate.syncSend(&quot;020-boot&quot;, msg);</span><br><span class="line">System.out.println(sendResult.getMsgId());</span><br><span class="line">System.out.println(sendResult.getSendStatus());</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>异步消息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.asyncSend(&quot;020-boot&quot;, msg, new SendCallback() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onSuccess(SendResult sendResult) &#123;</span><br><span class="line">                System.out.println(sendResult.getMsgId());</span><br><span class="line">                System.out.println(sendResult.getSendStatus());</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            @Override</span><br><span class="line">            public void onException(Throwable throwable) &#123;</span><br><span class="line">                System.out.println(throwable);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>一次性消息</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rocketMQTemplate.sendOneWay(&quot;020-boot&quot;, msg);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="发送时间"><a class="markdownIt-Anchor" href="#发送时间">#</a> 发送时间</h5>
<blockquote>
<p>默认立即发送</p>
</blockquote>
<ul>
<li>
<p>延时发送</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 参数1:主题 2:消息 3:rocket发送最大允许时间 4:延时级别(18级)</span><br><span class="line">SendResult sendResult = rocketMQTemplate.syncSend(&quot;020-boot&quot;, MessageBuilder.withPayload(msg).build(),100000,3);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="消费模式消费者"><a class="markdownIt-Anchor" href="#消费模式消费者">#</a> 消费模式 (消费者)</h4>
<blockquote>
<p>以组为单位 默认为集群模式</p>
</blockquote>
<ul>
<li>
<p>集群模式 (每组只有一个可以收到)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">        topic = &quot;020-boot&quot;,</span><br><span class="line">        messageModel = MessageModel.CLUSTERING,</span><br><span class="line">        consumerGroup = &quot;wolfcode-consumer&quot;</span><br><span class="line">)</span><br><span class="line">public class MqListenner implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String s) &#123;</span><br><span class="line">        System.out.println(&quot;今天上映:&quot;+s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>广播模式 (每组的所有消费者都可以收到)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">        topic = &quot;020-boot&quot;,</span><br><span class="line">        messageModel = MessageModel.BROADCASTING,</span><br><span class="line">        consumerGroup = &quot;wolfcode-consumer&quot;</span><br><span class="line">)</span><br><span class="line">public class MqListenner implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String s) &#123;</span><br><span class="line">        System.out.println(&quot;今天上映:&quot;+s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="消息过滤"><a class="markdownIt-Anchor" href="#消息过滤">#</a> 消息过滤</h4>
<h5 id="tag标签模式"><a class="markdownIt-Anchor" href="#tag标签模式">#</a> Tag 标签模式</h5>
<blockquote>
<p>在发送的消息 Topic:Tag 中间使用冒号隔开</p>
</blockquote>
<ul>
<li>
<p>生产者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@RequestMapping(&quot;/sendTagMsg&quot;)</span><br><span class="line">public String sendTagMsg(String msg) &#123;</span><br><span class="line">    rocketMQTemplate.convertAndSend(&quot;020-boot:TagB&quot;,msg);</span><br><span class="line">    return &quot;success&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>消费者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">        topic = &quot;020-boot&quot;,</span><br><span class="line">        selectorType = SelectorType.TAG,</span><br><span class="line">  //接收TagB或TagA</span><br><span class="line">        secretKey = &quot;TagB || TagA&quot;,</span><br><span class="line">        consumerGroup = &quot;wolfcode-consumer&quot;</span><br><span class="line">)</span><br><span class="line">public class MqListenner implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String s) &#123;</span><br><span class="line">        System.out.println(&quot;今天上映:&quot;+s);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="sql92过滤"><a class="markdownIt-Anchor" href="#sql92过滤">#</a> SQL92 过滤</h5>
<blockquote>
<p>注意：在使用 SQL 过滤的时候，需要配置参数 enablePropertyFilter=true</p>
</blockquote>
<ul>
<li>
<p>生产者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//Sql92过滤</span><br><span class="line">@RequestMapping(&quot;/sendSQLMsg&quot;)</span><br><span class="line">public String sendSQLMsg(int age,String msg) &#123;</span><br><span class="line">    Map&lt;String,Object&gt; map=new HashMap&lt;&gt;();</span><br><span class="line">    //用户自定义属性</span><br><span class="line">    map.put(&quot;age&quot;, age);</span><br><span class="line">    map.put(&quot;name&quot;, &quot;hesj&quot;);</span><br><span class="line">    //也可以设置系统属性</span><br><span class="line">    map.put(MessageConst.PROPERTY_KEYS,age);</span><br><span class="line">    template.convertAndSend(&quot;02-RocketMQ-Top7&quot;,msg,map);</span><br><span class="line">    return &quot;success&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>消费者</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">@Component</span><br><span class="line">@RocketMQMessageListener(</span><br><span class="line">        topic = &quot;02-RocketMQ-Top7&quot;,</span><br><span class="line">        messageModel = MessageModel.CLUSTERING,</span><br><span class="line">        selectorType = SelectorType.SQL92,</span><br><span class="line">        selectorExpression = &quot;age &gt; 16&quot;,</span><br><span class="line">        consumerGroup= &quot;wolfcode-consumer7&quot;</span><br><span class="line">)</span><br><span class="line">public class MqListiner7 implements RocketMQListener&lt;String&gt; &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void onMessage(String msg) &#123;</span><br><span class="line">        System.out.println(&quot;消费消息SQl92&quot;+msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-03-07T19:47:17.000Z" title="2022-3-8 3:47:17">2022-03-08</time>发表</span><span class="level-item"><time dateTime="2023-05-11T11:37:57.000Z" title="2023-5-11 19:37:57">2023-05-11</time>更新</span><span class="level-item">6 分钟读完 (大约855个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/03/08/%E3%80%90SpringCloud%E3%80%91%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86%E7%BB%86%E5%88%99/">微服务拆分细则</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>​	在微服务的设计过程中，微服务设计有多大，微服务粒度的把控，一直是设计人员需要考虑和设计的难点。</p>
<p>因为服务粒度设计过大，不能得到微服务架构带来的便利，例如：更加敏态的开发，更频繁的版本发布，由于服务功能划分的小，可以根据实际的业务场景，选择更加合适的技术进行代码重构等等。</p>
<p>​		但同时我们也要注意，不是服务越” 微 “越好，因为服务的过度拆分会使架构的设计复杂度大大提升，同时也会大大提升运维和测试的复杂度等。</p>
<p>​		所以对服务拆分粒度的把控，对设计人员来讲就至关重要了，甚至对项目的成败有非常重要的影响。</p>
<p>这篇文档提供了一些主要的微服务拆分原则，供您参考，来帮助您进行更加合理粒度的微服务设计。</p>
<h3 id="微服务的拆分原则-通用"><a class="markdownIt-Anchor" href="#微服务的拆分原则-通用">#</a> 微服务的拆分原则 - 通用</h3>
<table>
<thead>
<tr>
<th><strong>编号</strong></th>
<th><strong>原则</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>原则 1</td>
<td>基于业务分析拆分</td>
<td>基于 TOGAF， ADA 等</td>
</tr>
<tr>
<td>原则 2</td>
<td>基于 DDD 领域驱动设计中的子域设计拆分</td>
<td>基于领域驱动设计</td>
</tr>
<tr>
<td>原则 3</td>
<td>根据动作和用例拆分</td>
<td>比如支付</td>
</tr>
<tr>
<td>原则 4</td>
<td>根据名词或者资源拆</td>
<td>比如账号</td>
</tr>
<tr>
<td>原则 5</td>
<td>架构稳定</td>
<td>拆分的结构稳定，不会经常修改</td>
</tr>
<tr>
<td>原则 6</td>
<td>服务是可测试的</td>
<td>集成测试要可定义，测试可回溯</td>
</tr>
<tr>
<td>原则 7</td>
<td>单一原则</td>
<td>一个服务做一个业务， 自己治理自己的数据库</td>
</tr>
<tr>
<td>原则 8</td>
<td>开闭原则</td>
<td>面向对象理论， 对扩展开放， 对修改关闭</td>
</tr>
<tr>
<td>原则 9</td>
<td>高内聚</td>
<td>强一致，强依赖关系的放在一起， 减少分布式事务</td>
</tr>
<tr>
<td>原则 10</td>
<td>低耦合</td>
<td>服务间互相独立</td>
</tr>
<tr>
<td>原则 11</td>
<td>足够小的团队可维护，最大两个 pizza team</td>
<td>6-10 人一个 pizza team</td>
</tr>
<tr>
<td>原则 12</td>
<td>团队自治，自己的服务的开发和发布要跟别的团队尽可能小的协调</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="微服务的拆分原则-技术侧重点"><a class="markdownIt-Anchor" href="#微服务的拆分原则-技术侧重点">#</a> 微服务的拆分原则 - 技术侧重点</h2>
<table>
<thead>
<tr>
<th><strong>编号</strong></th>
<th><strong>原则</strong></th>
<th><strong>说明</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>原则 1</td>
<td>潜在风险</td>
<td>服务的风险性</td>
</tr>
<tr>
<td>原则 2</td>
<td>资源性能计算性能硬盘性能内存容量网络带宽</td>
<td>机器的性能决定了方案的部分选择</td>
</tr>
<tr>
<td>原则 3</td>
<td>安全</td>
<td>安全要求是否很高，安全的策略</td>
</tr>
<tr>
<td>原则 4</td>
<td>高并发瞬时并发持续并发</td>
<td>并发的种类， 持续的时间</td>
</tr>
<tr>
<td>原则 5</td>
<td>数据库数据量大小读操作写操作数据类型</td>
<td>数据的类型， 读写的多少，数据量</td>
</tr>
</tbody>
</table>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-02-24T00:35:45.000Z" title="2022-2-24 8:35:45">2022-02-24</time>发表</span><span class="level-item"><time dateTime="2019-11-17T19:58:09.000Z" title="2019-11-18 3:58:09">2019-11-18</time>更新</span><span class="level-item">9 分钟读完 (大约1304个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/02/24/%E3%80%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%91%E9%98%BF%E9%87%8C%E4%BA%91OSS%E7%9A%84CDN%E5%8A%A0%E9%80%9F%E5%92%8COSS%E4%BC%A0%E8%BE%93%E5%8A%A0%E9%80%9F%E7%9A%84%E5%8C%BA%E5%88%AB/">阿里云OSS的CDN加速和OSS传输加速的区别</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h2 id="概述"><a class="markdownIt-Anchor" href="#概述">#</a> 概述</h2>
<p>本文主要介绍阿里云对象存储 OSS 的传输加速功能和 CDN 加速 OSS 资源的区别，以便您根据实际业务进行选择。</p>
<h2 id="详细信息"><a class="markdownIt-Anchor" href="#详细信息">#</a> 详细信息</h2>
<p>阿里云对象存储 OSS 以海量、安全、低成本、高可靠等特点已经成为用户存储静态资源和文件的首要选择，实际使用中面向全球各地用户访问 OSS 资源时，访问速度会受到客户端网络、OSS 的下行带宽、Bucket 地域、访问链路长等限制出现访问慢的情况。以下主要介绍 CDN 加速 OSS 和 OSS 传输加速的加速方式：</p>
<h3 id="实现原理"><a class="markdownIt-Anchor" href="#实现原理">#</a> 实现原理</h3>
<p>具体实现加速的原理如下：</p>
<ul>
<li>CDN 加速 OSS：是建立并覆盖在承载网之上，由遍布全球的边缘节点服务器群组成的分布式网络。阿里云 CDN 能分担源站压力，避免网络拥塞，确保在不同区域、不同场景下加速网站内容的分发，提高资源访问速度。由 CDN 全球广泛分布的边缘节点缓存 OSS 存储的静态数据，从而实现客户端从边缘节点直接获取数据的方式来实现访问的加速。</li>
<li>OSS 传输加速：利用全球分布的云机房，将全球各地用户对您存储空间（Bucket）的访问，经过智能路由解析至就近的接入点，使用优化后的网络及协议，为云存储互联网的上传、下载提供端到端的加速方案。</li>
</ul>
<h3 id="资源加速场景介绍"><a class="markdownIt-Anchor" href="#资源加速场景介绍">#</a> 资源加速场景介绍</h3>
<p>OSS 传输加速是针对 OSS 的链路加速，使用 OSS 传输加速后支持 OSS 提供的任意特性。CDN 通过全球边缘节点缓存 OSS 资源，加速同时可降低带宽成本。OSS 传输加速和 CDN 加速完全是两个不同的产品，且应对的场景不同，详情请参见<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/109895.htm"> CDN 应用场景</a>和<a target="_blank" rel="noopener" href="https://help.aliyun.com/document_detail/131312.htm">传输加速场景</a>。</p>
<ul>
<li>如果您的业务是第三方数据源加速，推荐您使用 CDN 加速。</li>
<li>如果您的 OSS 资源需要进行多次下载的操作，并且不要求数据强一致性，推荐您使用 CDN 加速。</li>
<li>如果您的 OSS 资源需要加速下载，并且访问量少，推荐您使用 OSS 传输加速。</li>
<li>如果您的 OSS 资源需要进行多次下载的操作，并且要求数据强一致性，推荐您使用 OSS 传输加速。</li>
<li>如果您的业务存储的是动态资源，且数据更新频繁，推荐您使用 OSS 传输加速。</li>
<li>如果您的业务存储的是静态资源，且更新少，推荐您使用 CDN 加速。</li>
</ul>
<h3 id="cdn加速和oss传输加速的对比"><a class="markdownIt-Anchor" href="#cdn加速和oss传输加速的对比">#</a> CDN 加速和 OSS 传输加速的对比</h3>
<p>CDN 加速和 OSS 传输加速的使用场景不同，其优缺点对比如下：</p>
<table>
<thead>
<tr>
<th><strong>加速方式</strong></th>
<th><strong>实现方法</strong></th>
<th><strong>应用场景</strong></th>
<th><strong>优点</strong></th>
<th><strong>缺点</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>CDN 加速 OSS</td>
<td>通过全球分布的边缘节点缓存数据来实现加速。</td>
<td>网站或应用中小文件大文件的下载视音频点播</td>
<td>CDN 边缘节点全球分布，数量多。CDN 节点提供的服务带宽量大。</td>
<td>对于访问量大的资源，命中率高，访问量小的资源命中率低，节点未缓存的情况下，还是需要回源访问，回源依赖实时的公网回源链路。CDN 静态资源的访问，对于上传、删除等动态请求加速效果不明显。</td>
</tr>
<tr>
<td>OSS 传输加速</td>
<td>实现的是客户端到 OSS 服务端之间链路优化来实现的加速功能，实际每次资源的请求还是从 OSS 来进行获取。</td>
<td>远距离数据传输加速 GB、TB 级大文件上传和下载非静态、非热点数据下载加速</td>
<td>OSS 存储节点全球主要区域分布。远距离以及大文件的上传和下载加速。</td>
<td>所有的访问都是回源到 OSS 访问，占用 OSS 的服务带宽。同一区域大量用户集中访问资源的情况下，效果没有 CDN 加速效果好。只能使用 HTTPS 方式访问。</td>
</tr>
</tbody>
</table>
<h2 id=""><a class="markdownIt-Anchor" href="#">#</a> </h2>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/5/">上一页</a></div><div class="pagination-next"><a href="/page/7/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><a class="pagination-link is-current" href="/page/6/">6</a></li><li><a class="pagination-link" href="/page/7/">7</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/10/">10</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-12T04:13:41.000Z">2023-06-12</time></p><p class="title"><a href="/2023/06/12/%E3%80%90%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%91%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E7%AC%AC%E4%B8%89%E6%9C%9F-%E5%85%AC%E4%BC%97%E5%8F%B7%E4%BA%8B%E4%BB%B6%E5%A4%84%E7%90%86-%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AE%9E%E6%88%98%E5%88%86%E4%BA%AB/">【公众号开发】公众号技术分享第三期-公众号事件处理-设计模式实战分享</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-06T00:13:41.000Z">2023-06-06</time></p><p class="title"><a href="/2023/06/06/%E3%80%90%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%91%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E7%AC%AC%E4%BA%8C%E6%9C%9F-%E5%85%AC%E4%BC%97%E5%8F%B7%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF-%E6%A8%A1%E6%9D%BF%E6%A8%A1%E5%BC%8F%E5%AE%9E%E6%88%98%E5%88%86%E4%BA%AB/">【公众号开发】公众号技术分享第二期-公众号模板消息-模板模式实战分享</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-06T00:10:41.000Z">2023-06-06</time></p><p class="title"><a href="/2023/06/06/%E3%80%90%E5%85%AC%E4%BC%97%E5%8F%B7%E5%BC%80%E5%8F%91%E3%80%91%E5%85%AC%E4%BC%97%E5%8F%B7%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB%E7%AC%AC%E4%B8%80%E6%9C%9F-%E5%A6%82%E4%BD%95%E6%B3%A8%E5%86%8C%E5%BE%AE%E4%BF%A1%E5%85%AC%E4%BC%97%E5%B9%B3%E5%8F%B0%E5%B9%B6%E4%BD%BF%E7%94%A8%E5%85%AC%E4%BC%97%E5%8F%B7%E6%A8%A1%E6%9D%BF%E6%B6%88%E6%81%AF/">【公众号开发】公众号技术分享第一期-如何注册微信公众平台并使用公众号模板消息</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-05T17:10:41.000Z">2023-06-06</time></p><p class="title"><a href="/2023/06/06/%E3%80%90Sentinel%E3%80%91Docker%E6%90%AD%E5%BB%BASentinel/">【Sentinel】Docker搭建Sentinel</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-06-05T07:25:21.000Z">2023-06-05</time></p><p class="title"><a href="/2023/06/05/%E3%80%90Git%E3%80%91Github%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81%E9%81%87%E5%88%B0%E9%94%99%E8%AF%AF%EF%BC%9AERROR%20You%E2%80%98re%20using%20an%20RSA%20key%20with%20SHA-1,%20which%20is%20no%20longer%20allowed/">【Git】Github提交代码遇到错误：ERROR You‘re using an RSA key with SHA-1, which is no longer allowed</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">61</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">43</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">InterviewCoder</p><p class="is-size-6 is-block">面试记官方公众号</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">150</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s/jWs6lLHl5L-atXJhHc4YvA" target="_blank" rel="noopener">关注我</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/me.png" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">技能改变人生，知识改变命运。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·江苏·无锡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">150</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">泠灵(特别鸣谢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://github.com/Guoqing815/interview" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">面试记Github</span></span><span class="level-right"><span class="level-item tag">github.com</span></span></a></li><li><a class="level is-mobile" href="https://www.pgyer.com/interview_app_release" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">面试记App(Android)</span></span><span class="level-right"><span class="level-item tag">www.pgyer.com</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(码云)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">掘金</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(阿里云)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(腾讯云)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(B站)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><p class="is-size-7">© 2030</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>