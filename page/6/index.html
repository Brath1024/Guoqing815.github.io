<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/avatar.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/avatar.png"}},"description":""}</script><link rel="icon" href="https://brath.cloud/avatar.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章列表</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">更多</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-07-17T05:00:43.000Z" title="2022-7-17 13:00:43">2022-07-17</time>发表</span><span class="level-item"><time dateTime="2019-04-07T16:42:42.000Z" title="2019-4-8 0:42:42">2019-04-08</time>更新</span><span class="level-item">8 分钟读完 (大约1139个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/17/%E3%80%90ELK%E3%80%91SpringBoot%E6%95%B4%E5%90%88ELK%E5%AE%9E%E7%8E%B0%E5%88%86%E5%B8%83%E5%BC%8F%E6%97%A5%E5%BF%97%E6%90%9C%E7%B4%A2/">【ELK】SpringBoot整合ELK实现分布式日志搜索</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="elkspringboot整合elk实现分布式日志搜索"><a class="markdownIt-Anchor" href="#elkspringboot整合elk实现分布式日志搜索">#</a> 【ELK】SpringBoot 整合 ELK 实现分布式日志搜索</h1>
<h1 id="一环境准备"><a class="markdownIt-Anchor" href="#一环境准备">#</a> 一。环境准备：</h1>
<h3 id="安装elasticsearch-kibana-logstash"><a class="markdownIt-Anchor" href="#安装elasticsearch-kibana-logstash">#</a> 安装<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=ElasticSearch&amp;spm=1001.2101.3001.7020"> ElasticSearch</a>、Kibana、LogStash。</h3>
<p>docker 内，下载需要的镜像。然后启动一个镜像。</p>
<h3 id="1es创建"><a class="markdownIt-Anchor" href="#1es创建">#</a> 1.Es 创建</h3>
<p><strong>创建并运行一个 ElasticSearch 容器：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">7.6.2 启动需要增加discovery.type=single-node</span></span><br><span class="line">docker run -e ES_JAVA_OPTS=&quot;-Xms256m -Xmx256m&quot; -e discovery.type=single-node  -d -p 9200:9200 -p 9300:9300 --name MyES elasticsearch:7.6.2</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>浏览器访问测试：<a target="_blank" rel="noopener" href="http://127.0.0.1:9200">http://127.0.0.1:9200</a>，应输出如下结果：</strong></p>
</blockquote>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WQawbNC&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cluster_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;docker-cluster&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;cluster_uuid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;f6QviESlT_e5u3kaZFHoWA&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;number&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7.6.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build_flavor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;default&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;docker&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build_hash&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2f4c224&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build_date&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2020-03-18T23:22:18.622755Z&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;build_snapshot&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;lucene_version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;7.7.2&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;minimum_wire_compatibility_version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5.6.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;minimum_index_compatibility_version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;5.0.0&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;tagline&quot;</span><span class="punctuation">:</span> <span class="string">&quot;You Know, for Search&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="2kibana创建"><a class="markdownIt-Anchor" href="#2kibana创建">#</a> 2.Kibana 创建</h2>
<p><strong>创建并运行运行一个 Kibana 容器：</strong><br>
创建之前，先查看 ES 在 docker 中的 ip 地址，因为我们的<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=kibana&amp;spm=1001.2101.3001.7020"> kibana</a> 在启动的时候需要连接到 ES。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">先使用命令 docker ps 查看ES容器ID</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输出如下:</span></span><br><span class="line">CONTAINER ID   IMAGE                   COMMAND      CREATED        STATUS        PORTS      NAMES</span><br><span class="line">a266d1ff5c1b  elasticsearch:7.6.2   &quot;/usr/local/bin/dock…&quot;   19 hours ago   Up 18 hours   0.0.0.0:9200-&gt;9200/tcp, 0.0.0.0:9300-&gt;9300/tcp   MyES</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">通过容器ID，查看容器IP地址。以上的a266d1ff5c1b就是我们ES的容器ID</span></span><br><span class="line">docker inspect --format &#x27;&#123;&#123; .NetworkSettings.IPAddress &#125;&#125;&#x27; a266d1ff5c1b</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">输出如下:</span></span><br><span class="line">172.17.0.3</span><br></pre></td></tr></table></figure>
<p><strong>得到了 ES 容器 IP 地址之后，创建并运行一个 Kibana 容器。</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">注意，此处的ELASTICSEARCH_URL需替换成上面ES容器的IP地址，否则Kibana连接不到ES</span></span><br><span class="line">docker run -d --name MyKibana -p 5601:5601 -e ELASTICSEARCH_URL=http://172.17.0.3:9200 kibana:7.6.2</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>浏览器访问测试：<a target="_blank" rel="noopener" href="http://127.0.0.1:5601">http://127.0.0.1:5601</a>：</strong></p>
</blockquote>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/2584c6896d84d3290cc097f47766912c.png" alt="image.png"></p>
<h2 id="3logstash创建"><a class="markdownIt-Anchor" href="#3logstash创建">#</a> 3.LogStash 创建</h2>
<p><strong>创建并运行运行一个 LogStash 容器：</strong></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 9600:9600 -p 4560:4560 --name MyLogStash logstash:7.6.2</span><br></pre></td></tr></table></figure>
<p>运行后，进入容器内部。修改 logstash.yml 配置文件：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it 容器ID bash</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd config</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi logstash.yml</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">改成如下配置</span></span><br><span class="line">http.host: &quot;0.0.0.0&quot;</span><br><span class="line">xpack.monitoring.elasticsearch.hosts: [ &quot;http://esIP地址:9200&quot; ]</span><br><span class="line">xpack.monitoring.elasticsearch.username: elastic</span><br><span class="line">xpack.monitoring.elasticsearch.password: your password</span><br></pre></td></tr></table></figure>
<p>修改 pipeline 下的 logstash.conf 文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">input &#123;</span><br><span class="line">  tcp &#123;</span><br><span class="line">    #模式选择为server</span><br><span class="line">    mode =&gt; &quot;server&quot;</span><br><span class="line">    #ip和端口对应docker对外暴露logstash的地址可以使用下面命令查看</span><br><span class="line">    #docker inspect logstash | grep IPAddress</span><br><span class="line">    host =&gt; &quot;172.17.0.3&quot;</span><br><span class="line">    port =&gt; 4560</span><br><span class="line">    codec =&gt; json_lines</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">output &#123;</span><br><span class="line">  elasticsearch &#123;</span><br><span class="line">        action =&gt; &quot;index&quot;</span><br><span class="line">    #这里是es的地址，多个es要写成数组的形式</span><br><span class="line">    hosts  =&gt; &quot;http://你的esIP:9200&quot;</span><br><span class="line">    user =&gt; elastic #如果es配置了账号密码，要配置账号密码</span><br><span class="line">    password =&gt; password #如果es配置了账号密码，要配置账号密码</span><br><span class="line">    manage_template =&gt; true</span><br><span class="line">    #用于kibana过滤，可以填项目名称 必须必须必须小写。</span><br><span class="line">    index  =&gt; &quot;demologs&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>最后重启我们的 logstash</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker restart MyLogStash</span><br></pre></td></tr></table></figure>
<h1 id="二-使elk与springboot集成"><a class="markdownIt-Anchor" href="#二-使elk与springboot集成">#</a> 二、 使 ELK 与 SpringBoot 集成</h1>
<p>maven 相关依赖：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.4.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.elk<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>demo<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ch.qos.logback.version</span>&gt;</span>1.2.3<span class="tag">&lt;/<span class="name">ch.qos.logback.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-logging<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;ch.qos.logback.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-classic<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;ch.qos.logback.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>ch.qos.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logback-access<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;ch.qos.logback.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>net.logstash.logback<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>logstash-logback-encoder<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>logback 配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span> <span class="attr">scan</span>=<span class="string">&quot;true&quot;</span> <span class="attr">scanPeriod</span>=<span class="string">&quot;1 seconds&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">resource</span>=<span class="string">&quot;org/springframework/boot/logging/logback/base.xml&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">contextName</span>&gt;</span>logback<span class="tag">&lt;/<span class="name">contextName</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;stash&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.appender.LogstashTcpSocketAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">destination</span>&gt;</span>你的LogStashIP地址:4560<span class="tag">&lt;/<span class="name">destination</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- encoder必须配置,有多种可选 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> <span class="attr">class</span>=<span class="string">&quot;net.logstash.logback.encoder.LogstashEncoder&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;stash&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>日志记录：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ElkController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(getClass());</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/test&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">elkAdd</span><span class="params">()</span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;日志记录&quot;</span>+System.currentTimeMillis());</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在 Kibana 中查看创建索引及查看日志：<br>
<img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/2e66ba8d0e361daf4654481b328828bb.png" alt="image.png"></p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/937b6241405ccbedc5aca43fc79fdbbc.png" alt="image.png"></p>
<h4 id="可以看到我们的elk已经走通了后面就可以根据自己的实际业务需求去进行修改配置"><a class="markdownIt-Anchor" href="#可以看到我们的elk已经走通了后面就可以根据自己的实际业务需求去进行修改配置">#</a> 可以看到我们的 elk 已经走通了，后面就可以根据自己的实际业务需求去进行修改配置。</h4>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结">#</a> 总结</h2>
<p>本次通过 docker 搭建 elk+springboot 的过程还是花费了不少的时间的，还是有所收获的。碰到问题的话尽量去百度查资料，耐心点基本上都是可以解决的。有感兴趣的小伙伴可以一起交流学习呀。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-07-14T10:58:11.000Z" title="2022-7-14 18:58:11">2022-07-14</time>发表</span><span class="level-item"><time dateTime="2023-05-05T08:28:33.596Z" title="2023-5-5 16:28:33">2023-05-05</time>更新</span><span class="level-item">13 分钟读完 (大约1894个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/14/%E3%80%90Flutter%E3%80%91Flutter%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86%E6%A1%86%E6%9E%B6%EF%BC%9ABloc%E7%9A%84%E8%AE%A1%E6%95%B0%E5%99%A8%E5%BA%94%E7%94%A8%E7%A4%BA%E4%BE%8B/">【Flutter】Flutter状态管理框架：Bloc的计数器应用示例</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutterflutter状态管理框架bloc的计数器应用示例"><a class="markdownIt-Anchor" href="#flutterflutter状态管理框架bloc的计数器应用示例">#</a> 【Flutter】Flutter 状态管理框架：Bloc 的计数器应用示例</h1>
<h1 id="flutter-计数器教程"><a class="markdownIt-Anchor" href="#flutter-计数器教程">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=flutter-%E8%AE%A1%E6%95%B0%E5%99%A8%E6%95%99%E7%A8%8B">Flutter 计数器教程</a></h1>
<p><img src="https://img.shields.io/badge/level-beginner-green.svg" alt="beginner"></p>
<blockquote>
<p>在下面的教程中，我们会使用 Flutter 和 Bloc 库来开发一个计数器应用。</p>
</blockquote>
<p><img src="https://bloclibrary.dev/assets/gifs/flutter_counter.gif" alt="demo"></p>
<h2 id="核心要点"><a class="markdownIt-Anchor" href="#核心要点">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=%E6%A0%B8%E5%BF%83%E8%A6%81%E7%82%B9">核心要点</a></h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/coreconcepts?id=blocobserver">BlocObserver</a>：用于观察 Bloc 内状态变化的 Widget。</li>
<li><a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/flutterbloccoreconcepts?id=blocprovider">BlocProvider</a>：为它的 children 提供 Bloc 的 Widget。</li>
<li><a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/flutterbloccoreconcepts?id=blocbuilder">BlocBuilder</a>：根据新的 state 来绘制对应 Widget 的 Widget。</li>
<li>用 Cubit 替代 Bloc。<a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/coreconcepts?id=cubit-vs-bloc">两者有何不同？</a></li>
<li>通过 <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/migration?id=%E2%9D%97contextbloc-and-contextrepository-are-deprecated-in-favor-of-contextread-and-contextwatch">context.read</a> 来触发 Event⚡。</li>
</ul>
<h2 id="新建项目和配置文件yaml"><a class="markdownIt-Anchor" href="#新建项目和配置文件yaml">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=%E6%96%B0%E5%BB%BA%E9%A1%B9%E7%9B%AE%E5%92%8C%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6yaml">新建项目和配置文件 yaml</a></h2>
<p>我们先新建一个全新的 flutter 应用</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter create flutter_counter</span><br></pre></td></tr></table></figure>
<p>将下面代码复制粘贴到  <code>pubspec.yaml</code>  文件中</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">flutter_counter</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">A</span> <span class="string">new</span> <span class="string">Flutter</span> <span class="string">project.</span></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.0</span><span class="number">.0</span><span class="string">+1</span></span><br><span class="line"><span class="attr">publish_to:</span> <span class="string">none</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">&quot;&gt;=2.19.0 &lt;3.0.0&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">bloc:</span> <span class="string">^8.1.0</span></span><br><span class="line">  <span class="attr">flutter:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line">  <span class="attr">flutter_bloc:</span> <span class="string">^8.1.1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="attr">bloc_test:</span> <span class="string">^9.1.0</span></span><br><span class="line">  <span class="attr">flutter_test:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line">  <span class="attr">integration_test:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line">  <span class="attr">mocktail:</span> <span class="string">^0.3.0</span></span><br><span class="line">  <span class="attr">very_good_analysis:</span> <span class="string">^3.1.0</span></span><br><span class="line"></span><br><span class="line"><span class="attr">flutter:</span></span><br><span class="line">  <span class="attr">uses-material-design:</span> <span class="literal">true</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>安装依赖包 package</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flutter packages get</span><br></pre></td></tr></table></figure>
<h2 id="项目架构"><a class="markdownIt-Anchor" href="#项目架构">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84">项目架构</a></h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">├── lib</span><br><span class="line">│   ├── app.dart</span><br><span class="line">│   ├── counter</span><br><span class="line">│   │   ├── counter.dart</span><br><span class="line">│   │   ├── cubit</span><br><span class="line">│   │   │   └── counter_cubit.dart</span><br><span class="line">│   │   └── view</span><br><span class="line">│   │       ├── counter_page.dart</span><br><span class="line">│   │       └── counter_view.dart</span><br><span class="line">│   ├── counter_observer.dart</span><br><span class="line">│   └── main.dart</span><br><span class="line">├── pubspec.lock</span><br><span class="line">├── pubspec.yaml</span><br></pre></td></tr></table></figure>
<p>这个应用中我们使用的是功能驱动（feature-driven）的项目结构。这种项目结构可以让我们通过一个个独立的功能来扩展项目。在当前项目中，我们只需要做一个功能（也就是计数器），但是在将来我们可以通过加入更多功能来实现一个复杂的应用。</p>
<h2 id="blocobserver"><a class="markdownIt-Anchor" href="#blocobserver">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=blocobserver">BlocObserver</a></h2>
<p>首先，我们需要了解如何创建一个 <code>BlocObserver</code>  ， 它将帮助我们观察应用中所有的状态变化.</p>
<p>创建文件  <code>lib/counter_observer.dart</code> :</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:bloc/bloc.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#123;@template counter<span class="emphasis">_observer&#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">[BlocObserver] for the counter application which</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">observes all state changes.</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@endtemplate&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterObserver</span> <span class="keyword">extends</span> <span class="title">BlocObserver</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@macro counter_</span>observer&#125;</span></span></span><br><span class="line">  <span class="keyword">const</span> CounterObserver();</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> onChange(BlocBase&lt;<span class="built_in">dynamic</span>&gt; bloc, Change&lt;<span class="built_in">dynamic</span>&gt; change) &#123;</span><br><span class="line">    <span class="keyword">super</span>.onChange(bloc, change);</span><br><span class="line">    <span class="comment">// ignore: avoid_print</span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;<span class="subst">$&#123;bloc.runtimeType&#125;</span> <span class="subst">$change</span>&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在这个文件中，我们只重写了  <code>onChange</code> ，用来查看所有产生的状态（state）变化</p>
<p><strong>注意</strong>:  <code>onChange</code>  在  <code>Bloc</code>  和  <code>Cubit</code>  中发挥的作用是相同的。</p>
<h2 id="maindart"><a class="markdownIt-Anchor" href="#maindart">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=maindart">main.dart</a></h2>
<p>接下来，用下面的代码替换 <code>main.dart</code>  里面的内容:</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:bloc/bloc.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/widgets.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_counter/app.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_counter/counter_observer.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  Bloc.observer = <span class="keyword">const</span> CounterObserver();</span><br><span class="line">  runApp(<span class="keyword">const</span> CounterApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>在上面的代码中，我们初始化了之前创建的  <code>CounterObserver</code>  并且通过  <code>runApp</code>  调用我们即将创建的 <code>CounterApp</code> 。</p>
<h2 id="counter-app"><a class="markdownIt-Anchor" href="#counter-app">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=counter-app">Counter App</a></h2>
<p>创建  <code>lib/app.dart</code> :</p>
<p><code>CounterApp</code>  是一个 <code>home</code>  是 <code>CounterPage</code>  的 <code>MaterialApp</code> 。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_counter/counter/counter.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#123;@template counter<span class="emphasis">_app&#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">A [MaterialApp] which sets the `home` to [CounterPage].</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@endtemplate&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterApp</span> <span class="keyword">extends</span> <span class="title">MaterialApp</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@macro counter_</span>app&#125;</span></span></span><br><span class="line">  <span class="keyword">const</span> CounterApp(&#123;<span class="keyword">super</span>.key&#125;) : <span class="keyword">super</span>(home: <span class="keyword">const</span> CounterPage());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>:  <code>CounterApp</code>  扩展（extends) 自 <code>MaterialApp</code> ，所以在这里它是一个 <code>MaterialApp</code> 。 在大多数的情况下，我们会创建一个 <code>StatelessWidget</code>  或者  <code>StatefulWidget</code>  实例，并且通过 <code>build</code>  来绘制 Widget。但是现在我们并不需要绘制任何 Widget，所以我们直接从 <code>MaterialApp</code>  进行扩展（extends)，这样更简单。</p>
<p>接下来，让我们来看下  <code>CounterPage</code> !</p>
<h2 id="counter-page"><a class="markdownIt-Anchor" href="#counter-page">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=counter-page">Counter Page</a></h2>
<p>创建  <code>lib/counter/view/counter_page.dart</code> :</p>
<p><code>CounterPage</code>  是用来创建一个  <code>CounterCubit</code>  实例 (也就是接下来我们要创建的类的实例) 并把它提供给  <code>CounterView</code>  使用。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_bloc/flutter_bloc.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_counter/counter/counter.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#123;@template counter<span class="emphasis">_page&#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">A [StatelessWidget] which is responsible for providing a</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">[CounterCubit] instance to the [CounterView].</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@endtemplate&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@macro counter_</span>page&#125;</span></span></span><br><span class="line">  <span class="keyword">const</span> CounterPage(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> BlocProvider(</span><br><span class="line">      create: (_) =&gt; CounterCubit(),</span><br><span class="line">      child: <span class="keyword">const</span> CounterView(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：分离（或者解耦） <code>Cubit</code>  创建部分的代码和  <code>Cubit</code>  使用部分的代码是非常重要的。这样使得代码更容易被测试或者被重复使用。</p>
<h2 id="counter-cubit"><a class="markdownIt-Anchor" href="#counter-cubit">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=counter-cubit">Counter Cubit</a></h2>
<p>创建  <code>lib/counter/cubit/counter_cubit.dart</code> :</p>
<p><code>CounterCubit</code>  类将提供两种方法:</p>
<ul>
<li><code>increment</code> : 给当前状态（state）加 1</li>
<li><code>decrement</code> : 给当前状态（state）减 1</li>
</ul>
<p>设置  <code>CounterCubit</code>  状态的数据类型为  <code>int</code> ， 初始值是  <code>0</code> 。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:bloc/bloc.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#123;@template counter<span class="emphasis">_cubit&#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">A [Cubit] which manages an [int] as its state.</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@endtemplate&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterCubit</span> <span class="keyword">extends</span> <span class="title">Cubit</span>&lt;<span class="title">int</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@macro counter_</span>cubit&#125;</span></span></span><br><span class="line">  CounterCubit() : <span class="keyword">super</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Add 1 to the current state.</span></span></span><br><span class="line">  <span class="keyword">void</span> increment() =&gt; emit(state + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">Subtract 1 from the current state.</span></span></span><br><span class="line">  <span class="keyword">void</span> decrement() =&gt; emit(state - <span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><strong>小贴士</strong>：可以使用 <a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=FelixAngelov.bloc">VSCode Extension</a> 或者 <a target="_blank" rel="noopener" href="https://plugins.jetbrains.com/plugin/12129-bloc">IntelliJ Plugin</a> 自动创建新的 Cubit。</p>
<p>接下来我们来写 <code>CounterView</code> ，它将使用 state 并且和 <code>CounterCubit</code>  交互。</p>
<h2 id="counter-view"><a class="markdownIt-Anchor" href="#counter-view">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=counter-view">Counter View</a></h2>
<p>创建  <code>lib/counter/view/counter_view.dart</code> :</p>
<p><code>CounterView</code>  是用来绘制计数器上的数字以及两个用于增加和减少数字的 FloatingActionButtons。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_bloc/flutter_bloc.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_counter/counter/counter.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">&#123;@template counter<span class="emphasis">_view&#125;</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">A [StatelessWidget] which reacts to the provided</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">[CounterCubit] state and notifies it in response to user input.</span></span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@endtemplate&#125;</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CounterView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown"><span class="emphasis">&#123;@macro counter_</span>view&#125;</span></span></span><br><span class="line">  <span class="keyword">const</span> CounterView(&#123;<span class="keyword">super</span>.key&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">final</span> textTheme = Theme.of(context).textTheme;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(title: <span class="keyword">const</span> Text(<span class="string">&#x27;Counter&#x27;</span>)),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: BlocBuilder&lt;CounterCubit, <span class="built_in">int</span>&gt;(</span><br><span class="line">          builder: (context, state) &#123;</span><br><span class="line">            <span class="keyword">return</span> Text(<span class="string">&#x27;<span class="subst">$state</span>&#x27;</span>, style: textTheme.displayMedium);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: Column(</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.end,</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.end,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          FloatingActionButton(</span><br><span class="line">            key: <span class="keyword">const</span> Key(<span class="string">&#x27;counterView_increment_floatingActionButton&#x27;</span>),</span><br><span class="line">            child: <span class="keyword">const</span> Icon(Icons.add),</span><br><span class="line">            onPressed: () =&gt; context.read&lt;CounterCubit&gt;().increment(),</span><br><span class="line">          ),</span><br><span class="line">          <span class="keyword">const</span> SizedBox(height: <span class="number">8</span>),</span><br><span class="line">          FloatingActionButton(</span><br><span class="line">            key: <span class="keyword">const</span> Key(<span class="string">&#x27;counterView_decrement_floatingActionButton&#x27;</span>),</span><br><span class="line">            child: <span class="keyword">const</span> Icon(Icons.remove),</span><br><span class="line">            onPressed: () =&gt; context.read&lt;CounterCubit&gt;().decrement(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>用 <code>BlocBuilder</code>  把  <code>Text</code>  包起来，这样每一次 <code>CounterCubit</code>  状态变化的时候里面的文字就会更新。 另外，使用 <code>context.read&lt;CounterCubit&gt;()</code>  来接入 <code>CounterCubit</code>  实例。</p>
<p><strong>注意</strong>：只有  <code>Text</code>  需要被  <code>BlocBuilder</code>  包起来，因为这是唯一一个会随着  <code>CounterCubit</code>  状态（state) 变化而变化的组件。请不要包裹任何不随状态（state) 改变而改变的 Widget， 从而避免绘制不必要的组件。</p>
<h2 id="barrel"><a class="markdownIt-Anchor" href="#barrel">#</a> <a target="_blank" rel="noopener" href="https://bloclibrary.dev/#/zh-cn/fluttercountertutorial?id=barrel">Barrel</a></h2>
<p>创建  <code>lib/counter/counter.dart</code> :</p>
<p>加入  <code>counter.dart</code>  用来导出所有有关计数器的公共接口。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="string">&#x27;cubit/counter_cubit.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;view/view.dart&#x27;</span>;</span><br></pre></td></tr></table></figure>
<p>大功告成！我们已经将表现层（presentation layer）从数据逻辑层（business logic layer）中分离出来。 <code>CounterView</code>  不会知道用户点击按钮的时候发生了什么，它只是通知了  <code>CounterCubit</code> 。 而且，  <code>CounterCubit</code>  不会知道状态（也就是计数器的值）是什么， 它只是根据被调用的方法来发出新的状态。</p>
<p>最后，通过执行  <code>flutter run</code>  让我们在真实设备或者模拟器上运行它。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-07-09T13:56:08.000Z" title="2022-7-9 21:56:08">2022-07-09</time>发表</span><span class="level-item"><time dateTime="2023-05-23T03:40:05.903Z" title="2023-5-23 11:40:05">2023-05-23</time>更新</span><span class="level-item">33 分钟读完 (大约4929个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/09/%E3%80%90Java%E3%80%91TheadLocal/">ThreadLocal</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="threadlocal-详解"><a class="markdownIt-Anchor" href="#threadlocal-详解">#</a> ThreadLocal 详解</h1>
<p>ThreadLocal 概述<br>
 ThreadLocal 类用来提供线程内部的局部变量，不同的线程之间不会相互干扰<br>
这种变量在多线程环境下访问（通过 get 和 set 方法访问）时能保证各个线程的变量相对独立于其他线程内的变量<br>
在线程的生命周期内起作用，可以减少同一个线程内多个函数或组件之间一些公共变量传递的复杂度<br>
使用<br>
常用方法</p>
<table>
<thead>
<tr>
<th><strong>方法名</strong></th>
<th><strong>描述</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>ThreadLocal()</td>
<td>创建 ThreadLocal 对象</td>
</tr>
<tr>
<td>public void set( T value)</td>
<td>设置当前线程绑定的局部变量</td>
</tr>
<tr>
<td>public T get()</td>
<td>获取当前线程绑定的局部变量</td>
</tr>
<tr>
<td>public T remove()</td>
<td>移除当前线程绑定的局部变量，该方法可以帮助 JVM 进行 GC</td>
</tr>
<tr>
<td>protected T initialValue()</td>
<td>返回当前线程局部变量的初始值</td>
</tr>
</tbody>
</table>
<p>案例<br>
场景：让每个线程获取其设置的对应的共享变量值<br>
共享变量访问问题案例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 线程间访问共享变量之间问题</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DemoQuestion</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">DemoQuestion</span> <span class="variable">demoQuestion</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DemoQuestion</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// int j = i;</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt;&#123;</span><br><span class="line">                <span class="comment">// demoQuestion.setAge(j);</span></span><br><span class="line">                demoQuestion.setName(Thread.currentThread().getName() + <span class="string">&quot;的数据&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + demoQuestion.getName());</span><br><span class="line">                <span class="comment">// System.out.println(Thread.currentThread().getName() + &quot;---&gt;&quot; + demoQuestion.getAge());</span></span><br><span class="line">            &#125;,<span class="string">&quot;t&quot;</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用关键字 Synchronized 关键字加锁解决方案</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 使用加锁的方式解决：线程间访问共享变量之间问题</span></span><br><span class="line"><span class="comment"> * 将对共享变量的操作进行加锁，保证其原子性</span></span><br><span class="line"><span class="comment"> * */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SolveDemoQuestionBySynchronized</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SolveDemoQuestionBySynchronized</span> <span class="variable">demoQuestion</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SolveDemoQuestionBySynchronized</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="comment">// int j = i;</span></span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt;&#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (SolveDemoQuestionBySynchronized.class)&#123;</span><br><span class="line">                    demoQuestion.setName(Thread.currentThread().getName() + <span class="string">&quot;的数据&quot;</span>);</span><br><span class="line">                    System.out.println(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">                    System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + demoQuestion.getName());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,<span class="string">&quot;t&quot;</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 ThreadLocal 方式解决</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SolveDemoQuestionByThreadLocal</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  ThreadLocal&lt;String&gt; name = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">SolveDemoQuestionByThreadLocal</span> <span class="variable">demoQuestion</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SolveDemoQuestionByThreadLocal</span>();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">Thread</span>(() -&gt;&#123;</span><br><span class="line">                demoQuestion.setName(Thread.currentThread().getName() + <span class="string">&quot;的数据&quot;</span>);</span><br><span class="line">                System.out.println(<span class="string">&quot;=================&quot;</span>);</span><br><span class="line">                System.out.println(Thread.currentThread().getName() + <span class="string">&quot;---&gt;&quot;</span> + demoQuestion.getName());</span><br><span class="line">            &#125;,<span class="string">&quot;t&quot;</span> + i).start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name.get();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        name.set(content);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="threadlocalmap-内部结果"><a class="markdownIt-Anchor" href="#threadlocalmap-内部结果">#</a> ThreadLocalMap 内部结果</h2>
<blockquote>
<p>JDK8 之前的设计<br>
每个 ThreadLocal 都创建一个 ThreadLocalMap，用线程作为 ThreadLocalMap 的 key，要存储的局部变量作为 ThreadLocalMap 的 value，这样就能达到各个线程的局部变量隔离的效果</p>
</blockquote>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/baa00cdb33a14aaeab7b453c1bb1469b.png" alt="在这里插入图片描述"></p>
<p>JDK8 之后的设计<br>
每个 Thread 维护一个 ThreadLocalMap，这个 ThreadLocalMap 的 key 是 ThreadLocal 实例本身，value 才是真正要存储的值 Object<br>
 每个 Thread 线程内部都有一个 ThreadLocalMap<br>
Map 里面存储 ThreadLocal 对象（key）和线程的变量副本（value）<br>
Thread 内部的 Map 是由 ThreadLocal 维护的，由 ThreadLocal 负责向 map 获取和设置线程的变量值<br>
对于不同的线程，每次获取副本值时，别的线程并不能获取到当前线程的副本值，形成了副本的隔离，互不干扰</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/5633b9ff01d84aaeb06b799d825e289e.png" alt="在这里插入图片描述"></p>
<p>JDK 对 ThreadLocal 这样改造的好处<br>
减少 ThreadLocalMap 存储的 Entry 数量：因为之前的存储数量由 Thread 的数量决定，现在是由 ThreadLocal 的数量决定。在实际运用当中，往往 ThreadLocal 的数量要少于 Thread 的数量<br>
当 Thread 销毁之后，对应的 ThreadLocalMap 也会随之销毁，能减少内存的使用（但是不能避免内存泄漏问题，解决内存泄漏问题应该在使用完后及时调用 remove () 对 ThreadMap 里的 Entry 对象进行移除，由于 Entry 继承了弱引用类，会在下次 GC 时被 JVM 回收）</p>
<h2 id="threadlocal相关方法源码解析"><a class="markdownIt-Anchor" href="#threadlocal相关方法源码解析">#</a> ThreadLocal 相关方法源码解析</h2>
<h3 id="set方法"><a class="markdownIt-Anchor" href="#set方法">#</a> set 方法</h3>
<ul>
<li>源码及相关注释</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 设置当前线程对应的ThreadLocal的值</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> value 将要保存在当前线程对应的ThreadLocal的值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">set</span><span class="params">(T value)</span> &#123;</span><br><span class="line">       <span class="comment">// 获取当前线程对象</span></span><br><span class="line">       <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">       <span class="comment">// 获取此线程对象中维护的ThreadLocalMap对象</span></span><br><span class="line">       <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">       <span class="comment">// 判断map是否存在</span></span><br><span class="line">       <span class="keyword">if</span> (map != <span class="literal">null</span>)</span><br><span class="line">           <span class="comment">// 存在则调用map.set设置此实体entry,this这里指调用此方法的ThreadLocal对象</span></span><br><span class="line">           map.set(<span class="built_in">this</span>, value);</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="comment">// 1）当前线程Thread 不存在ThreadLocalMap对象</span></span><br><span class="line">           <span class="comment">// 2）则调用createMap进行ThreadLocalMap对象的初始化</span></span><br><span class="line">           <span class="comment">// 3）并将 t(当前线程)和value(t对应的值)作为第一个entry存放至ThreadLocalMap中</span></span><br><span class="line">           createMap(t, value);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 获取当前线程Thread对应维护的ThreadLocalMap </span></span><br><span class="line"><span class="comment">    * </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span>  t the current thread 当前线程</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> the map 对应维护的ThreadLocalMap </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   ThreadLocalMap <span class="title function_">getMap</span><span class="params">(Thread t)</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> t.threadLocals;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    *创建当前线程Thread对应维护的ThreadLocalMap </span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> t 当前线程</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@param</span> firstValue 存放到map中第一个entry的值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">createMap</span><span class="params">(Thread t, T firstValue)</span> &#123;</span><br><span class="line">       <span class="comment">//这里的this是调用此方法的threadLocal</span></span><br><span class="line">       t.threadLocals = <span class="keyword">new</span> <span class="title class_">ThreadLocalMap</span>(<span class="built_in">this</span>, firstValue);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>相关流程图</li>
</ul>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/2430f09d315e40769a63720f84a8a06c.png" alt="在这里插入图片描述"></p>
<ul>
<li>执行流程</li>
</ul>
<ol>
<li>获取当前线程，并根据当前线程获取一个 Map</li>
<li>如果获取的 Map 不为空，则将参数设置到 Map 中（当前 ThreadLocal 的引用作为 key）</li>
<li>如果 Map 为空，则给该线程创建 Map，并设置初始值</li>
</ol>
<h3 id="get方法"><a class="markdownIt-Anchor" href="#get方法">#</a> get () 方法</h3>
<ul>
<li>源码及相关注释</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 返回当前线程中保存ThreadLocal的值</span></span><br><span class="line"><span class="comment">    * 如果当前线程没有此ThreadLocal变量，</span></span><br><span class="line"><span class="comment">    * 则它会通过调用&#123;<span class="doctag">@link</span> #initialValue&#125; 方法进行初始化值</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> 返回当前线程对应此ThreadLocal的值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">public</span> T <span class="title function_">get</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">// 获取当前线程对象</span></span><br><span class="line">       <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">       <span class="comment">// 获取此线程对象中维护的ThreadLocalMap对象</span></span><br><span class="line">       <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">       <span class="comment">// 如果此map存在</span></span><br><span class="line">       <span class="keyword">if</span> (map != <span class="literal">null</span>) &#123;</span><br><span class="line">           <span class="comment">// 以当前的ThreadLocal 为 key，调用getEntry获取对应的存储实体e</span></span><br><span class="line">           ThreadLocalMap.<span class="type">Entry</span> <span class="variable">e</span> <span class="operator">=</span> map.getEntry(<span class="built_in">this</span>);</span><br><span class="line">           <span class="comment">// 对e进行判空 </span></span><br><span class="line">           <span class="keyword">if</span> (e != <span class="literal">null</span>) &#123;</span><br><span class="line">               <span class="meta">@SuppressWarnings(&quot;unchecked&quot;)</span></span><br><span class="line">               <span class="comment">// 获取存储实体 e 对应的 value值,即为我们想要的当前线程对应此ThreadLocal的值</span></span><br><span class="line">               <span class="type">T</span> <span class="variable">result</span> <span class="operator">=</span> (T)e.value;</span><br><span class="line">               <span class="keyword">return</span> result;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">/*</span></span><br><span class="line"><span class="comment">       	初始化 : 有两种情况有执行当前代码</span></span><br><span class="line"><span class="comment">       	第一种情况: map不存在，表示此线程没有维护的ThreadLocalMap对象</span></span><br><span class="line"><span class="comment">       	第二种情况: map存在, 但是没有与当前ThreadLocal关联的entry</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">return</span> setInitialValue();</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 初始化</span></span><br><span class="line"><span class="comment">    * <span class="doctag">@return</span> the initial value 初始化后的值</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> T <span class="title function_">setInitialValue</span><span class="params">()</span> &#123;</span><br><span class="line">       <span class="comment">// 调用initialValue获取初始化的值</span></span><br><span class="line">       <span class="comment">// 此方法可以被子类重写, 如果不重写默认返回null</span></span><br><span class="line">       <span class="type">T</span> <span class="variable">value</span> <span class="operator">=</span> initialValue();</span><br><span class="line">       <span class="comment">// 获取当前线程对象</span></span><br><span class="line">       <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> Thread.currentThread();</span><br><span class="line">       <span class="comment">// 获取此线程对象中维护的ThreadLocalMap对象</span></span><br><span class="line">       <span class="type">ThreadLocalMap</span> <span class="variable">map</span> <span class="operator">=</span> getMap(t);</span><br><span class="line">       <span class="comment">// 判断map是否存在</span></span><br><span class="line">       <span class="keyword">if</span> (map != <span class="literal">null</span>)</span><br><span class="line">           <span class="comment">// 存在则调用map.set设置此实体entry</span></span><br><span class="line">           map.set(<span class="built_in">this</span>, value);</span><br><span class="line">       <span class="keyword">else</span></span><br><span class="line">           <span class="comment">// 1）当前线程Thread 不存在ThreadLocalMap对象</span></span><br><span class="line">           <span class="comment">// 2）则调用createMap进行ThreadLocalMap对象的初始化</span></span><br><span class="line">           <span class="comment">// 3）并将 t(当前线程)和value(t对应的值)作为第一个entry存放至ThreadLocalMap中</span></span><br><span class="line">           createMap(t, value);</span><br><span class="line">       <span class="comment">// 返回设置的值value</span></span><br><span class="line">       <span class="keyword">return</span> value;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>流程图</li>
</ul>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/a7e417b2719348729b4229071e4d3f4f.png" alt="在这里插入图片描述"></p>
<p>执行流程<br>
获取当前线程，根据当前线程获取一个 Map<br>
 如果获取的 Map 不为空，则在 Map 中以 ThreadLocal 的引用作为 key 来在 Map 中获取对应的 Entrye，否则转到 4<br>
 如果 e 不为 null，则返回 e.value，否则转到 4<br>
Map 为空或者 e 为空，则通过 initialValue 函数获取初始值 value，然后用 ThreadLocal 的引用和 value 作为 firstKey 和 firstValue 创建一个新的 Map</p>
<h2 id="remove方法"><a class="markdownIt-Anchor" href="#remove方法">#</a> remove 方法</h2>
<ul>
<li>源码及相关注释</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 删除当前线程中保存的ThreadLocal对应的实体entry</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">     <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// 获取当前线程对象中维护的ThreadLocalMap对象</span></span><br><span class="line">         <span class="type">ThreadLocalMap</span> <span class="variable">m</span> <span class="operator">=</span> getMap(Thread.currentThread());</span><br><span class="line">        <span class="comment">// 如果此map存在</span></span><br><span class="line">         <span class="keyword">if</span> (m != <span class="literal">null</span>)</span><br><span class="line">            <span class="comment">// 存在则调用map.remove</span></span><br><span class="line">            <span class="comment">// 以当前ThreadLocal为key删除对应的实体entry</span></span><br><span class="line">             m.remove(<span class="built_in">this</span>);</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>执行流程</li>
</ul>
<ol>
<li>首先获取当前线程，并根据当前线程获取一个 Map</li>
<li>如果获取的 Map 不为空，则移除当前 ThreadLocal 对象对应的 entry</li>
</ol>
<p>initialValue 方法<br>
此方法的作用是返回该线程局部变量的初始值<br>
这个方法是一个延迟调用方法，从上面的代码我们得知，在 set 方法还未调用而先调用了 get 方法时才执行，并且仅执行 1 次<br>
这个方法缺省实现直接返回一个 null<br>
 如果想要一个除 null 之外的初始值，可以重写此方法。（备注： 该方法是一个 protected 的方法，显然是为了让子类覆盖而设计的）<br>
源码及相关注释</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 返回当前线程对应的ThreadLocal的初始值</span></span><br><span class="line"><span class="comment">  * 此方法的第一次调用发生在，当线程通过get方法访问此线程的ThreadLocal值时</span></span><br><span class="line"><span class="comment">  * 除非线程先调用了set方法，在这种情况下，initialValue 才不会被这个线程调用。</span></span><br><span class="line"><span class="comment">  * 通常情况下，每个线程最多调用一次这个方法。</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * &lt;p&gt;这个方法仅仅简单的返回null &#123;<span class="doctag">@code</span> null&#125;;</span></span><br><span class="line"><span class="comment">  * 如果想ThreadLocal线程局部变量有一个除null以外的初始值，</span></span><br><span class="line"><span class="comment">  * 必须通过子类继承&#123;<span class="doctag">@code</span> ThreadLocal&#125; 的方式去重写此方法</span></span><br><span class="line"><span class="comment">  * 通常, 可以通过匿名内部类的方式实现</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span> 当前ThreadLocal的初始值</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="keyword">protected</span> T <span class="title function_">initialValue</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ThreadLocalMap 解析</p>
<h2 id="内部结构"><a class="markdownIt-Anchor" href="#内部结构">#</a> 内部结构</h2>
<p>ThreadLocalMap 是 ThreadLocal 的内部类，没有实现 Map 接口，用独立的方式实现了 Map 的功能，其内部的 Entry 也是独立实现的，而 Entry 又是 ThreadLocalMap 的内部类，且集成弱引用 (WeakReference) 类。</p>
<h2 id="成员变量"><a class="markdownIt-Anchor" href="#成员变量">#</a> 成员变量</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">		<span class="comment">/**</span></span><br><span class="line"><span class="comment">        * The entries in this hash map extend WeakReference, using</span></span><br><span class="line"><span class="comment">        * its main ref field as the key (which is always a</span></span><br><span class="line"><span class="comment">        * ThreadLocal object).  Note that null keys (i.e. entry.get()</span></span><br><span class="line"><span class="comment">        * == null) mean that the key is no longer referenced, so the</span></span><br><span class="line"><span class="comment">        * entry can be expunged from table.  Such entries are referred to</span></span><br><span class="line"><span class="comment">        * as &quot;stale entries&quot; in the code that follows.</span></span><br><span class="line"><span class="comment">        * </span></span><br><span class="line"><span class="comment">			* Entry继承WeakReference，并且用ThreadLocal作为key.</span></span><br><span class="line"><span class="comment">				* 如果key为null(entry.get() == null)，意味着key不再被引用，</span></span><br><span class="line"><span class="comment">				* 因此这时候entry也可以从table中清除。</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">       <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Entry</span> <span class="keyword">extends</span> <span class="title class_">WeakReference</span>&lt;ThreadLocal&lt;?&gt;&gt; &#123;</span><br><span class="line">           <span class="comment">/** The value associated with this ThreadLocal. */</span></span><br><span class="line">           Object value;</span><br><span class="line"></span><br><span class="line">           Entry(ThreadLocal&lt;?&gt; k, Object v) &#123;</span><br><span class="line">               <span class="built_in">super</span>(k);</span><br><span class="line">               value = v;</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 初始容量 —— 必须是2的整次幂</span></span><br><span class="line"><span class="comment">    *  The initial capacity -- MUST be a power of two.  </span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">INITIAL_CAPACITY</span> <span class="operator">=</span> <span class="number">16</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 存放数据的table，Entry类的定义在下面分析</span></span><br><span class="line"><span class="comment">    * 同样，数组长度必须是2的整次幂。</span></span><br><span class="line"><span class="comment">    * The table, resized as necessary.</span></span><br><span class="line"><span class="comment">    * table.length MUST always be a power of two.</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> Entry[] table;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 数组里面entrys的个数，可以用于判断table当前使用量是否超过阈值。</span></span><br><span class="line"><span class="comment">    * The number of entries in the table</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> <span class="variable">size</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 进行扩容的阈值，表使用量大于它的时候进行扩容。</span></span><br><span class="line"><span class="comment">    * The next size value at which to resize</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="type">int</span> threshold; <span class="comment">// Default to 0</span></span><br></pre></td></tr></table></figure>
<h2 id="弱引用和内存泄漏"><a class="markdownIt-Anchor" href="#弱引用和内存泄漏">#</a> 弱引用和内存泄漏</h2>
<p>弱引用相关概念<br>
强引用（“Strong” Reference），就是我们最常见的普通对象引用，只要还有强引用指向一个对象，就能表明对象还 “活着”，垃圾回收器就不会回收这种对象<br>
弱引用（WeakReference），垃圾回收器一旦发现了只具有弱引用的对象，不管当前内存空间足够与否，都会回收它的内存</p>
<h2 id="内存泄漏相关概念"><a class="markdownIt-Anchor" href="#内存泄漏相关概念">#</a> 内存泄漏相关概念</h2>
<p>Memory overflow: 内存溢出，没有足够的内存提供申请者使用<br>
 Memory leak: 内存泄漏是指程序中己动态分配的堆内存由于某种原因程序未释放或无法释放，造成系统内存的浪费，导致程序运行速度减慢甚至系统崩溃等严重后果。内存泄漏的堆积终将导致内存溢出</p>
<h2 id="内存泄漏与强弱引用关系"><a class="markdownIt-Anchor" href="#内存泄漏与强弱引用关系">#</a> 内存泄漏与强弱引用关系</h2>
<p>ThreadLocal 内存结构</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/7476f5b3aec44f20b884e118880925b1.png" alt="在这里插入图片描述"></p>
<p>如果 key 使用强引用，也就是上图中的红色背景框部分<br>
业务代码中使用完 ThreadLocal ，threadLocal Ref 被回收了<br>
因为 threadLocalMap 的 Entry 强引用了 threadLocal，造成 threadLocal 无法被回收<br>
在没有手动删除这个 Entry 以及 CurrentThread 依然运行的前提下，始终有强引用链 threadRef-&gt;currentThread-&gt;threadLocalMap-&gt;entry，Entry 就不会被回收（Entry 中包括了 ThreadLocal 实例和 value），导致 Entry 内存泄漏<br>
如果 key 使用弱引用，也就是上图中的红色背景框部分<br>
业务代码中使用完 ThreadLocal ，threadLocal Ref 被回收了<br>
由于 ThreadLocalMap 只持有 ThreadLocal 的弱引用，没有任何强引用指向 threadlocal 实例，所以 threadlocal 就可以顺利被 gc 回收，此时 Entry 中的 key=null<br>
 但是在没有手动删除这个 Entry 以及 CurrentThread 依然运行的前提下，也存在有强引用链 threadRef-&gt;currentThread-&gt;threadLocalMap-&gt;entry -&gt; value ，value 不会被回收， 而这块 value 永远不会被访问到了，导致 value 内存泄漏</p>
<h2 id="出现内存泄漏的真实原因"><a class="markdownIt-Anchor" href="#出现内存泄漏的真实原因">#</a> 出现内存泄漏的真实原因</h2>
<p>没有手动删除对应的 Entry 节点信息<br>
 ThreadLocal 对象使用完后，对应线程仍然在运行</p>
<h2 id="避免内存泄漏的的两种方式"><a class="markdownIt-Anchor" href="#避免内存泄漏的的两种方式">#</a> 避免内存泄漏的的两种方式</h2>
<p>使用完 ThreadLocal，调用其 remove 方法删除对应的 Entry<br>
 使用完 ThreadLocal，当前 Thread 也随之运行结束<br>
对于第一种方式很好控制，调用对应 remove () 方法即可，但是对于第二种方式，我们是很难控制的，正因为不好控制，这也是为什么 ThreadLocalMap 里对应的 Entry 对象继承弱引用的原因，因为使用了弱引用，当 ThreadLocal 使用完后，key 的引用就会为 null，而在调用 ThreadLocal 中的 get ()/set () 方法时，当判断 key 为 null 时会将 value 置为 null，这就就会在 jvm 下次 GC 时将对应的 Entry 对象回收，从而避免内存泄漏问题的出现。</p>
<h2 id="hash冲突问题及解决方法"><a class="markdownIt-Anchor" href="#hash冲突问题及解决方法">#</a> hash 冲突问题及解决方法</h2>
<p>首先从 ThreadLocal 的 set () 方法入手</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public void set(T value) &#123;</span><br><span class="line">        Thread t = Thread.currentThread();</span><br><span class="line">        ThreadLocal.ThreadLocalMap map = getMap(t);</span><br><span class="line">        if (map != null)</span><br><span class="line">            //调用了ThreadLocalMap的set方法</span><br><span class="line">            map.set(this, value);</span><br><span class="line">        else</span><br><span class="line">            createMap(t, value);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ThreadLocal.ThreadLocalMap getMap(Thread t) &#123;</span><br><span class="line">        return t.threadLocals;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    void createMap(Thread t, T firstValue) &#123;</span><br><span class="line">        	//调用了ThreadLocalMap的构造方法</span><br><span class="line">        t.threadLocals = new ThreadLocal.ThreadLocalMap(this, firstValue);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>
<p>构造方法 <code>ThreadLocalMap(ThreadLocal&lt;?&gt; firstKey, Object firstValue)</code></p>
</li>
<li>
<pre><code> /*
  * firstKey : 本ThreadLocal实例(this)
  * firstValue ： 要保存的线程本地变量
  */
ThreadLocalMap(ThreadLocal&lt;?&gt; firstKey, Object firstValue) &#123;
        //初始化table
        table = new ThreadLocal.ThreadLocalMap.Entry[INITIAL_CAPACITY];
        //计算索引(重点代码）
        int i = firstKey.threadLocalHashCode &amp; (INITIAL_CAPACITY - 1);
        //设置值
        table[i] = new ThreadLocal.ThreadLocalMap.Entry(firstKey, firstValue);
        size = 1;
        //设置阈值
        setThreshold(INITIAL_CAPACITY);
    &#125;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">构造函数首先创建一个长度为16的Entry数组，然后计算出firstKey对应的索引，然后存储到table中，并设置size和threshold</span><br><span class="line"></span><br><span class="line">分析：int i = firstKey.threadLocalHashCode &amp; (INITIAL_CAPACITY - 1)</span><br><span class="line">关于：firstKey.threadLocalHashCode</span><br><span class="line"></span><br></pre></td></tr></table></figure>
private final int threadLocalHashCode = nextHashCode();
    
    private static int nextHashCode() &#123;
        return nextHashCode.getAndAdd(HASH_INCREMENT);
    &#125;
//AtomicInteger是一个提供原子操作的Integer类，通过线程安全的方式操作加减,适合高并发情况下的使用
    private static AtomicInteger nextHashCode =  new AtomicInteger();
     //特殊的hash值
    private static final int HASH_INCREMENT = 0x61c88647;
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">这里定义了一个AtomicInteger类型，每次获取当前值并加上HASH_INCREMENT，HASH_INCREMENT = 0x61c88647,这个值跟斐波那契数列（黄金分割数）有关，其主要目的就是为了让哈希码能均匀的分布在2的n次方的数组里, 也就是Entry[] table中，这样做可以尽量避免hash冲突</span><br><span class="line"></span><br><span class="line">关于：&amp; (INITIAL_CAPACITY - 1)</span><br><span class="line">计算hash的时候里面采用了hashCode &amp; (size - 1)的算法，这相当于取模运算hashCode % size的一个更高效的实现。正是因为这种算法，我们要求size必须是2的整次幂，这也能保证在索引不越界的前提下，使得hash发生冲突的次数减小</span><br><span class="line">ThreadLocalMap中的set方法</span><br><span class="line"></span><br></pre></td></tr></table></figure>
private void set(ThreadLocal&lt;?&gt; key, Object value) &#123;
        ThreadLocal.ThreadLocalMap.Entry[] tab = table;
        int len = tab.length;
        //计算索引(重点代码，刚才分析过了）
        int i = key.threadLocalHashCode &amp; (len-1);
        /**
         * 使用线性探测法查找元素（重点代码）
         */
        for (ThreadLocal.ThreadLocalMap.Entry e = tab[i];
             e != null;
             e = tab[i = nextIndex(i, len)]) &#123;
            ThreadLocal&lt;?&gt; k = e.get();
            //ThreadLocal 对应的 key 存在，直接覆盖之前的值
            if (k == key) &#123;
                e.value = value;
                return;
            &#125;
            // key为 null，但是值不为 null，说明之前的 ThreadLocal 对象已经被回收了，
           // 当前数组中的 Entry 是一个陈旧（stale）的元素
            if (k == null) &#123;
                //用新元素替换陈旧的元素，这个方法进行了不少的垃圾清理动作，防止内存泄漏
                replaceStaleEntry(key, value, i);
                return;
            &#125;
        &#125;
    
    	//ThreadLocal对应的key不存在并且没有找到陈旧的元素，则在空元素的位置创建一个新的Entry。
            tab[i] = new Entry(key, value);
            int sz = ++size;
            /**
             * cleanSomeSlots用于清除那些e.get()==null的元素，
             * 这种数据key关联的对象已经被回收，所以这个Entry(table[index])可以被置null。
             * 如果没有清除任何entry,并且当前使用量达到了负载因子所定义(长度的2/3)，那么进行				 * rehash（执行一次全表的扫描清理工作）
             */
            if (!cleanSomeSlots(i, sz) &amp;&amp; sz &gt;= threshold)
                rehash();
&#125;

 /**
     * 获取环形数组的下一个索引
     */
    private static int nextIndex(int i, int len) &#123;
        return ((i + 1 &lt; len) ? i + 1 : 0);
    &#125;
</code></pre>
<h2 id="代码执行流程"><a class="markdownIt-Anchor" href="#代码执行流程">#</a> 代码执行流程：</h2>
<p>1. 首先还是根据 key 计算出索引 i，然后查找 i 位置上的 Entry</p>
<p>2. 若是 Entry 已经存在并且 key 等于传入的 key，那么这时候直接给这个 Entry 赋新的 value 值</p>
<p>3. 若是 Entry 存在，但是 key 为 null，则调用 replaceStaleEntry 来更换这个 key 为空的 Entry</p>
<p>4. 不断循环检测，直到遇到为 null 的地方，这时候要是还没在循环过程中 return，那么就在这个 null 的位置新建一个 Entry，并且插入，同时 size 增加 1</p>
<p>5. 最后调用 cleanSomeSlots，清理 key 为 null 的 Entry，最后返回是否清理了 Entry，接下来再判断 sz 是否 &gt;= thresgold 达到了 rehash 的条件，达到的话就会调用 rehash 函数执行一次全表的扫描清理</p>
<ul>
<li>分析 ： ThreadLocalMap 使用线性探测法来解决哈希冲突的</li>
</ul>
<p>1. 该方法一次探测下一个地址，直到有空的地址后插入，若整个空间都找不到空余的地址，则产生溢出<br>
 2. 假设当前 table 长度为 16，也就是说如果计算出来 key 的 hash 值为 14，如果 table [14] 上已经有值，并且其 key 与当前 key 不一致，那么就发生了 hash 冲突，这个时候将 14 加 1 得到 15，取 table [15] 进行判断，这个时候如果还是冲突会回到 0，取 table [0], 以此类推，直到可以插入</p>
<p>3. 可以把 Entry [] table 看成一个环形数组</p>
</li>
</ul>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-07-02T20:20:04.000Z" title="2022-7-3 4:20:04">2022-07-03</time>发表</span><span class="level-item"><time dateTime="2022-04-27T23:29:20.000Z" title="2022-4-28 7:29:20">2022-04-28</time>更新</span><span class="level-item">9 分钟读完 (大约1312个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/07/03/%E3%80%90Java%E3%80%91SpringBoot%20%E6%95%B4%E5%90%88Redis%E5%AF%B9%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE%E5%81%9A%E7%BC%93%E5%AD%98%EF%BC%88%20%E5%88%A9%E7%94%A8Spring%E7%9A%84AOP%E6%8A%80%E6%9C%AF%EF%BC%89/">【Java】SpringBoot 整合Redis对查询数据做缓存（ 利用Spring的AOP技术）</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javaspringboot-整合redis对查询数据做缓存-利用spring的aop技术"><a class="markdownIt-Anchor" href="#javaspringboot-整合redis对查询数据做缓存-利用spring的aop技术">#</a> 【Java】SpringBoot 整合 Redis 对查询数据做缓存（ 利用 Spring 的 AOP 技术）</h1>
<h3 id="本篇主要介绍-springboot-整合redis做数据缓存利用的是-springaop-切面编程技术利用注解标识切面"><a class="markdownIt-Anchor" href="#本篇主要介绍-springboot-整合redis做数据缓存利用的是-springaop-切面编程技术利用注解标识切面">#</a> 本篇主要介绍 SpringBoot 整合 Redis 做数据缓存，利用的是 Spring<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=aop&amp;spm=1001.2101.3001.7020">Aop</a> 切面编程技术，利用注解标识切面。</h3>
<h4 id="这里不再介绍spring-boot操作数据库有兴趣的话我最后会给出源码链接"><a class="markdownIt-Anchor" href="#这里不再介绍spring-boot操作数据库有兴趣的话我最后会给出源码链接">#</a> 这里不再介绍 spring boot 操作数据库，有兴趣的话，我最后会给出源码链接</h4>
<h1 id="一引入依赖"><a class="markdownIt-Anchor" href="#一引入依赖">#</a> 一，引入依赖</h1>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-aop<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-redis<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.3.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span>12345678910</span><br></pre></td></tr></table></figure>
<h1 id="二配置redis连接"><a class="markdownIt-Anchor" href="#二配置redis连接">#</a> 二，配置 redis 连接</h1>
<p>配置文件我里这用的是 yml 格式的，tab 缩进，如果是 properties 格式的，请自己改造<br>
 redis 安装请参考 <a target="_blank" rel="noopener" href="http://blog.csdn.net/mzh1992/article/details/70805823">Redis 安装</a><br>
 windows 管理工具可以用 RedisDesktopManager，测试的时候，可以直接删除缓存。</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">redis:</span></span><br><span class="line">    <span class="attr">database:</span> <span class="number">0</span></span><br><span class="line">    <span class="comment">## Redis服务器地址</span></span><br><span class="line">    <span class="attr">host:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="number">.128</span></span><br><span class="line">    <span class="comment">## Redis服务器连接端口</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">6379</span></span><br><span class="line">    <span class="comment">## Redis服务器连接密码（默认为空）</span></span><br><span class="line">    <span class="attr">password:</span></span><br><span class="line">    <span class="comment">## 连接超时时间（毫秒）</span></span><br><span class="line">    <span class="attr">timeout:</span> <span class="number">0</span></span><br><span class="line">    <span class="comment">## 连接池最大连接数（使用负值表示没有限制）</span></span><br><span class="line">    <span class="attr">pool:</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">8</span></span><br><span class="line">      <span class="comment">## 连接池最大阻塞等待时间（使用负值表示没有限制）</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">-1</span></span><br><span class="line">      <span class="comment">## 连接池中的最大空闲连接</span></span><br><span class="line">      <span class="attr">max-idle:</span> <span class="number">8</span></span><br><span class="line">      <span class="comment">## 连接池中的最小空闲连接</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">01234567891011121314151617181920</span></span><br></pre></td></tr></table></figure>
<h1 id="三注解"><a class="markdownIt-Anchor" href="#三注解">#</a> 三，注解</h1>
<p>注解 QueryCache 用来标识查询数据库的方法，参数 nameSpace 用来区分应用的，后面会用来添加到缓存的 key 中。比如，登陆应用缓存的数据 key 值全部都是 sso 开头。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.CacheNameSpace;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.METHOD&#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> QueryCache &#123;</span><br><span class="line">    CacheNameSpace <span class="title function_">nameSpace</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>注解 QueryCacheKey 是方法级别的注解，用来标注要查询数据的主键，会和上面的 nameSpace 组合做缓存的 key 值</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.*;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.PARAMETER&#125;)</span></span><br><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> QueryCacheKey &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>枚举 CacheNameSpace 用来保存 nameSpace 的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">CacheNameSpace</span> &#123;</span><br><span class="line">    SSO_USER</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>下面就是组合起来的用法，userMapper.findById (id) 是用来查询数据库的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@QueryCache(nameSpace = CacheNameSpace.SSO_USER)</span></span><br><span class="line"><span class="keyword">public</span> UserInfo <span class="title function_">findUserById</span><span class="params">(<span class="meta">@QueryCacheKey</span> Long id)</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="type">UserInfo</span> <span class="variable">userInfo</span> <span class="operator">=</span> userMapper.findById(id);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> userInfo;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="四aop切面"><a class="markdownIt-Anchor" href="#四aop切面">#</a> 四，Aop 切面</h1>
<p>下面是重点，代码中的注释已经很多了，应该能看的懂，如有问题，可以留言。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.example.common.aspect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.example.common.CacheNameSpace;</span><br><span class="line"><span class="keyword">import</span> com.example.common.annotation.QueryCache;</span><br><span class="line"><span class="keyword">import</span> com.example.common.annotation.QueryCacheKey;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.lang3.StringUtils;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.ProceedingJoinPoint;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Around;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Aspect;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.Pointcut;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.reflect.MethodSignature;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.Logger;</span><br><span class="line"><span class="keyword">import</span> org.slf4j.LoggerFactory;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.MethodParameter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.SynthesizingMethodParameter;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.RedisTemplate;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.redis.core.ValueOperations;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.annotation.Resource;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.TimeUnit;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBCacheAspect</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">Logger</span> <span class="variable">LOGGER</span> <span class="operator">=</span> LoggerFactory.getLogger(DBCacheAspect.class);</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> RedisTemplate redisTemplate;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 定义拦截规则：拦截所有<span class="doctag">@QueryCache</span>注解的方法。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="comment">/*@Pointcut(&quot;execution(* com.example.service.impl..*(..)) , @annotation(com.example.common.annotation.QueryCache)&quot;)</span></span><br><span class="line"><span class="comment">    public void queryCachePointcut()&#123;&#125;*/</span></span><br><span class="line">    <span class="meta">@Pointcut(&quot;@annotation(com.example.common.annotation.QueryCache)&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">queryCachePointcut</span><span class="params">()</span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 拦截器具体实现</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> pjp</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Around(&quot;queryCachePointcut()&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">Interceptor</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        <span class="type">long</span> <span class="variable">beginTime</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">        LOGGER.info(<span class="string">&quot;AOP 缓存切面处理 &gt;&gt;&gt;&gt; start &quot;</span>);</span><br><span class="line">        <span class="type">MethodSignature</span> <span class="variable">signature</span> <span class="operator">=</span> (MethodSignature) pjp.getSignature();</span><br><span class="line">        <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> signature.getMethod(); <span class="comment">//获取被拦截的方法</span></span><br><span class="line">        <span class="type">CacheNameSpace</span> <span class="variable">cacheType</span> <span class="operator">=</span> method.getAnnotation(QueryCache.class).nameSpace();</span><br><span class="line">        <span class="type">String</span> <span class="variable">key</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 循环所有的参数</span></span><br><span class="line">        <span class="keyword">for</span> (Object value : pjp.getArgs()) &#123;</span><br><span class="line">            <span class="type">MethodParameter</span> <span class="variable">methodParam</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SynthesizingMethodParameter</span>(method, i);</span><br><span class="line">            Annotation[] paramAnns = methodParam.getParameterAnnotations();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 循环参数上所有的注解</span></span><br><span class="line">            <span class="keyword">for</span> (Annotation paramAnn : paramAnns) &#123;</span><br><span class="line">                <span class="keyword">if</span> ( paramAnn <span class="keyword">instanceof</span> QueryCacheKey) &#123; <span class="comment">//</span></span><br><span class="line">                    <span class="type">QueryCacheKey</span> <span class="variable">requestParam</span> <span class="operator">=</span> (QueryCacheKey) paramAnn;</span><br><span class="line">                    key = cacheType.name() + <span class="string">&quot;_&quot;</span> + value;   <span class="comment">// 取到QueryCacheKey的标识参数的值</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取不到key值，抛异常</span></span><br><span class="line">        <span class="keyword">if</span> (StringUtils.isBlank(key)) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Exception</span>(<span class="string">&quot;缓存key值不存在&quot;</span>);</span><br><span class="line"></span><br><span class="line">        LOGGER.info(<span class="string">&quot;获取到缓存key值 &gt;&gt;&gt;&gt; &quot;</span> + key);</span><br><span class="line">        ValueOperations&lt;String, Object&gt; operations = redisTemplate.opsForValue();</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">hasKey</span> <span class="operator">=</span> redisTemplate.hasKey(key);</span><br><span class="line">        <span class="keyword">if</span> (hasKey) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 缓存中获取到数据，直接返回。</span></span><br><span class="line">            <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> operations.get(key);</span><br><span class="line">            LOGGER.info(<span class="string">&quot;从缓存中获取到数据 &gt;&gt;&gt;&gt; &quot;</span> + object.toString());</span><br><span class="line">            LOGGER.info(<span class="string">&quot;AOP 缓存切面处理 &gt;&gt;&gt;&gt; end 耗时：&quot;</span> + (System.currentTimeMillis() - beginTime));</span><br><span class="line"></span><br><span class="line">            <span class="keyword">return</span> object;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 缓存中没有数据，调用原始方法查询数据库</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> pjp.proceed();</span><br><span class="line">        operations.set(key, object, <span class="number">30</span>, TimeUnit.MINUTES); <span class="comment">// 设置超时时间30分钟</span></span><br><span class="line"></span><br><span class="line">        LOGGER.info(<span class="string">&quot;DB取到数据并存入缓存 &gt;&gt;&gt;&gt; &quot;</span> + object.toString());</span><br><span class="line">        LOGGER.info(<span class="string">&quot;AOP 缓存切面处理 &gt;&gt;&gt;&gt; end 耗时：&quot;</span> + (System.currentTimeMillis() - beginTime));</span><br><span class="line">        <span class="keyword">return</span> object;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="五测试"><a class="markdownIt-Anchor" href="#五测试">#</a> 五，测试</h1>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testFindById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">UserInfo</span> <span class="variable">userInfo</span> <span class="operator">=</span> userService.findUserById(<span class="number">210001L</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="六执行结果"><a class="markdownIt-Anchor" href="#六执行结果">#</a> 六，执行结果</h1>
<p><img src="https://img-blog.csdn.net/20170504161114508?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXpoMTk5Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p><img src="https://img-blog.csdn.net/20170504161129996?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbXpoMTk5Mg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<p>两张图对比一下很明显，从 redis 缓存中取数据耗时要少的多。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-24T09:14:46.000Z" title="2022-6-24 17:14:46">2022-06-24</time>发表</span><span class="level-item"><time dateTime="2020-11-18T13:26:01.000Z" title="2020-11-18 21:26:01">2020-11-18</time>更新</span><span class="level-item">4 分钟读完 (大约546个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/24/%E3%80%90MySQL%E3%80%91Linux%E4%B8%8Bdocer%E9%83%A8%E7%BD%B2mysql/">Linux下docer部署mysql</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h2 id="linux下docer部署mysql"><a class="markdownIt-Anchor" href="#linux下docer部署mysql">#</a> Linux 下 docer 部署 mysql</h2>
<p>部署方法：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1.首先在Linux系统中启动已经安装好的docker</span><br><span class="line">service docker start</span><br><span class="line"></span><br><span class="line">2.查看docker进程，确认docker启动成功</span><br><span class="line">ps -ef|grep docker</span><br><span class="line"></span><br><span class="line">3.在docker容器中查询MySQL</span><br><span class="line">docker search mysql</span><br><span class="line"></span><br><span class="line">4.在docker中安装MySQL</span><br><span class="line">docker pull mysql</span><br><span class="line"></span><br><span class="line">5.查看MySQL镜像</span><br><span class="line">docker images</span><br><span class="line"></span><br><span class="line">6.创建MySQL用户并且将root账户密码设置为你需要的密码</span><br><span class="line">docker run --name mysqlserver -v $PWD/conf:/etc/mysql/conf.d -v $PWD/logs:/logs -v $PWD/data:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=『你的账户密码』 -d -i -p 外网端口:3306 mysql:latest</span><br><span class="line"></span><br><span class="line">docker run -p 33001:3306 --name mysqlSlave2 -v /mydata/mysql/log:/var/log/mysql -v /mydata/mysql/data:/var/lib/mysql -v /mydata/mysql/conf:/etc/mysql -e MYSQL_ROOT_PASSWORD=Lgq081538 -d mysql:5.7</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">指定配置文件容器</span></span><br><span class="line">docker run -p 33001:3306 --name mysqlSlave2 \</span><br><span class="line">-v /usr/local/docker/mysql/logs:/var/log/mysql \</span><br><span class="line">-v /usr/local/docker/mysql/data:/var/lib/mysql \</span><br><span class="line">-v /usr/local/docker/mysql/conf/my.cnf:/etc/mysql/mysql.conf.d/mysqld.cnf \</span><br><span class="line">-e MYSQL_ROOT_PASSWORD=Lgq081538 \</span><br><span class="line">-d mysql:5.7</span><br><span class="line"></span><br><span class="line">7.在docker中启动MySQL</span><br><span class="line">docker exec -it mysqlSlave2 bash</span><br><span class="line"></span><br><span class="line">8.输入用户名和密码</span><br><span class="line">mysql -uroot -p</span><br><span class="line"></span><br><span class="line">9.开启MySQL远程访问权限</span><br><span class="line">use mysql;</span><br><span class="line">select host,user from user;</span><br><span class="line">ALTER USER &#x27;root&#x27;@&#x27;%&#x27; IDENTIFIED WITH mysql_native_password BY &#x27;Lgq081538&#x27;;</span><br><span class="line">flush privileges;</span><br><span class="line"></span><br><span class="line">一些在docker的常用命令：</span><br><span class="line">1、列出正在运行的容器</span><br><span class="line">docker ps -a</span><br><span class="line"></span><br><span class="line">2、列出包括未运行的所有的容器</span><br><span class="line">docker ps</span><br><span class="line"></span><br><span class="line">3、查看某进程最近10条运行日志</span><br><span class="line">docker logs -f --tail 10 &quot;所查询的进程ID&quot;</span><br><span class="line"></span><br><span class="line">4、关闭docker中运行的进程，以MySQL为例</span><br><span class="line">docker stop mysql</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line">docker stop &quot;要停止的进程ID&quot;</span><br><span class="line"></span><br><span class="line">5、重启docker中运行的进程</span><br><span class="line">docker restart &quot;要重启的进程ID&quot;</span><br><span class="line"></span><br><span class="line">6、重启docker</span><br><span class="line">systemctl restart docker</span><br><span class="line"></span><br><span class="line">7、停止docker</span><br><span class="line">systemctl stop docker</span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-17T16:53:33.000Z" title="2022-6-18 0:53:33">2022-06-18</time>发表</span><span class="level-item"><time dateTime="2020-09-16T16:10:13.000Z" title="2020-9-17 0:10:13">2020-09-17</time>更新</span><span class="level-item">2 分钟读完 (大约269个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/18/%E3%80%90%E6%9C%8D%E5%8A%A1%E5%99%A8%E3%80%91%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2%E5%AE%9D%E5%A1%94/">云服务器部署宝塔面板</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>购买好服务器后，进入 Xshell：</p>
<p>1. 安装宝塔面板</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y wget &amp;&amp; wget -O install.sh http://download.bt.cn/install/install_6.0.sh &amp;&amp; sh install.sh</span><br></pre></td></tr></table></figure>
<p>获得：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">==================================================================</span><br><span class="line">Congratulations! Installed successfully!</span><br><span class="line">==================================================================</span><br><span class="line">外网面板地址: http://42.193.125.92:8888/ef1f509f</span><br><span class="line">内网面板地址: http://172.21.0.3:8888/ef1f509f</span><br><span class="line">username: upqknxq4</span><br><span class="line">password: f3701931</span><br><span class="line">If you cannot access the panel,</span><br><span class="line">release the following panel port [8888] in the security group</span><br><span class="line">若无法访问面板，请检查防火墙/安全组是否有放行面板[8888]端口</span><br><span class="line">==================================================================</span><br><span class="line">Time consumed: 1 Minute!</span><br></pre></td></tr></table></figure>
<p>访问 <a target="_blank" rel="noopener" href="http://ip:8888/ef1f509f">http://ip:8888/ef1f509f</a> 打开宝塔</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-16T18:13:41.000Z" title="2022-6-17 2:13:41">2022-06-17</time>发表</span><span class="level-item"><time dateTime="2021-05-14T10:01:07.000Z" title="2021-5-14 18:01:07">2021-05-14</time>更新</span><span class="level-item">2 分钟读完 (大约246个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/17/%E3%80%90Docker%E3%80%91Docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vim/">Docker环境下安装vim</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h2 id="docker环境下安装vim"><a class="markdownIt-Anchor" href="#docker环境下安装vim">#</a> Docker 环境下安装 vim</h2>
<p>在使用 docker 容器时，容器一般没有安装 vim，就需要安装 vim<br>
apt-get install vim 命令用于安装 vim，但是下载过慢。<br>
第一步 配置国内镜像源<br>
进入某个容器</p>
<p>例如进入 mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql /bin/bash</span><br></pre></td></tr></table></figure>
<p>第二步：更新源</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure>
<p>第三步安装 vim</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-05T05:37:11.000Z" title="2022-6-5 13:37:11">2022-06-05</time>发表</span><span class="level-item"><time dateTime="2021-04-12T18:49:46.000Z" title="2021-4-13 2:49:46">2021-04-13</time>更新</span><span class="level-item">5 分钟读完 (大约682个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/05/%E3%80%90SpringBoot%E3%80%91RequestParam%20%E5%92%8C%20PathVariable%E7%9A%84%E5%8C%BA%E5%88%AB/">RequestParam 和 PathVariable的区别</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>RequestParam 和 PathVariable 注解是用于从 request 中接收请求的，两个都可以接收参数，关键点不同的是 RequestParam 是从 request 里面拿取值，而 PathVariable 是从一个 URI 模板里面来填充</p>
<p>PathVariable<br>
 主要用于接收 http://host:port/path/{参数值} 数据:</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8887/test1/id1/name1">http://localhost:8887/test1/id1/name1</a></p>
<p>根据上面的这个 url，你可以用这样的方式来进行获取:</p>
<pre><code>RequestMapping(&quot;test1/&#123;id&#125;/&#123;name&#125;&quot;)
public String testPathVariable(PathVariable String id, PathVariable String name) &#123;
    return &quot;id=&quot; + id + &quot;, name=&quot; + name;
&#125;
PathVariable 支持下面三种参数：
</code></pre>
<p>name 绑定本次参数的名称，要跟 URL 上面的一样<br>
 required 这个参数是否必须的<br>
 value 跟 name 一样的作用，是 name 属性的一个别名<br>
 RequestParam<br>
 主要用于接收 http://host:port/path? 参数名 = 参数值数据，这里后面也可以不跟参数值；</p>
<p><a target="_blank" rel="noopener" href="http://localhost:8887/test2?id=id2&amp;name=name2">http://localhost:8887/test2?id=id2&amp;name=name2</a></p>
<p>根据上面的这个 url，你可以用这样的方式来进行获取:</p>
<pre><code>RequestMapping(&quot;test2&quot;)
public String testRequestParam(RequestParam(&quot;id&quot;) String id, RequestParam(&quot;name&quot;) String name) &#123;
    return &quot;id=&quot; + id + &quot;, name=&quot; + name;
&#125;
RequestParam 支持下面四种参数：
</code></pre>
<p>defaultValue 如果本次请求没有携带这个参数，或者参数为空，那么就会启用默认值<br>
 name 绑定本次参数的名称，要跟 URL 上面的一样<br>
 required 这个参数是否必须的<br>
 value 跟 name 一样的作用，是 name 属性的一个别名<br>
 PathVariable 和 RequestParam 混合使用<br>
<a target="_blank" rel="noopener" href="http://localhost:8887/test3/id3?name=name3"> http://localhost:8887/test3/id3?name=name3</a></p>
<p>根据上面的这个 url，你可以用这样的方式来进行获取:</p>
<pre><code>RequestMapping(&quot;test3/&#123;id&#125;&quot;)
public String test3(PathVariable String id, RequestParam(&quot;name&quot;) String name) &#123;
    return &quot;id=&quot; + id + &quot;, name=&quot; + name;
&#125;
对比
1.用法上的不同：
PathVariable只能用于接收url路径上的参数，而RequestParam只能用于接收请求带的params
2.内部参数不同：
PathVariable有value，name，required这三个参数，而RequestParam也有这三个参数，并且比PathVariable多一个参数defaultValue（该参数用于当请求体中不包含对应的参数变量时，参数变量使用defaultValue指定的默认值）
3.PathVariable一般用于get和delete请求，RequestParam一般用于post请求。
</code></pre>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-03T03:15:40.000Z" title="2022-6-3 11:15:40">2022-06-03</time>发表</span><span class="level-item"><time dateTime="2020-12-21T17:22:46.000Z" title="2020-12-22 1:22:46">2020-12-22</time>更新</span><span class="level-item">2 小时读完 (大约16172个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/03/%E3%80%90Flutter%E3%80%91Flutter%E6%96%87%E6%A1%A3/">Flutter全网最全学习笔记！</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutter学习文档authorbrath"><a class="markdownIt-Anchor" href="#flutter学习文档authorbrath">#</a> Flutter 学习文档 —Author：Brath</h1>
<p><img src="https://brath.cloud/blogImg/4d4dd7f20a6a494282214c730611df0e.webp" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h4 id="欢迎来到-brath-的-csdn-博客你也可访问-brathtop-到我的个人博客来进行观看"><a class="markdownIt-Anchor" href="#欢迎来到-brath-的-csdn-博客你也可访问-brathtop-到我的个人博客来进行观看">#</a> 欢迎来到 brath 的 CSDN 博客，你也可访问 brath.top 到我的个人博客来进行观看</h4>
<p>演示 demo-APK 地址: <a target="_blank" rel="noopener" href="http://124.222.106.122:8080/app-release.zip">http://124.222.106.122:8080/app-release.zip</a></p>
<h5 id="前言如果你要学习flutter那么你一定要会dart语言因为flutter是基于dart来封装的一个-ui-组件包"><a class="markdownIt-Anchor" href="#前言如果你要学习flutter那么你一定要会dart语言因为flutter是基于dart来封装的一个-ui-组件包">#</a> 前言：如果你要学习 flutter，那么你一定要会 dart 语言，因为 flutter 是基于 dart 来封装的一个 UI 组件包</h5>
<h5 id="本文使用-typort-书写禁止转载"><a class="markdownIt-Anchor" href="#本文使用-typort-书写禁止转载">#</a> 本文使用 Typort 书写，禁止转载。</h5>
<p>​		本文仅限有后端有语言基础（C/C++/C#/Java/python/Golang/PHP 都可以），前端 (JavaScript，Html，CSS) 的人来学习。如果 0 基础，请先学习任意一门后端语言并熟练掌握！</p>
<h2 id="dart语言学习"><a class="markdownIt-Anchor" href="#dart语言学习">#</a> Dart 语言学习：</h2>
<p>​	安装 Dart：<a target="_blank" rel="noopener" href="https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe">https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe</a></p>
<p>​	安装好后配置环境变量：DART_HOME  E:\dart\bin  安装路径</p>
<p>​	配置好后 cmd 输入 dart --version 查看环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dart VM version: 2.3.3-dev.0.0.flutter-b37aa3b036 (Tue Jun 11 13:00:50 2019 +0000) on &quot;windows_x64&quot;</span><br></pre></td></tr></table></figure>
<h3 id="注释"><a class="markdownIt-Anchor" href="#注释">#</a> 注释：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *多行注释</span><br><span class="line"> *多行注释</span><br><span class="line"> */</span><br><span class="line"> </span><br><span class="line"> /**</span><br><span class="line">  * 文档注释 与Java相同</span><br><span class="line">  */</span><br><span class="line">  </span><br><span class="line"> ///文档注释 dart独有</span><br></pre></td></tr></table></figure>
<h3 id="变量定义"><a class="markdownIt-Anchor" href="#变量定义">#</a> 变量定义：</h3>
<p>dart 语言特点：</p>
<p>​	自动类型转换，var 声明的变量可以是任意类型！</p>
<p>dart 拥有两种变量定义方式。</p>
<p>指定类型：</p>
<p>String name = “brath”;</p>
<p>或者</p>
<p>类型推导</p>
<p>var name = “brath”;  // 推导为任意类型</p>
<p>final name  =  “brath”;  // 不可修改，定义常量，可以初始化</p>
<p>const name  =  “brath”;  // 不可修改，定义常量，不可以初始化，可以被构造修改</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="number">111111</span>;</span><br><span class="line">  <span class="built_in">String</span> name1 = <span class="string">&quot;brath用类型定义&quot;</span>;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;Hello World! Brath~&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(name.runtimeType);</span><br><span class="line">  <span class="built_in">print</span>(name1.runtimeType);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">console:</span><br><span class="line">Hello World! Brath~</span><br><span class="line"><span class="built_in">int</span></span><br><span class="line"><span class="built_in">String</span></span><br></pre></td></tr></table></figure>
<h4 id="变量拼接"><a class="markdownIt-Anchor" href="#变量拼接">#</a> 变量拼接：</h4>
<p>与 Java 不同，拼接方式用 ${}</p>
<p>如果只拼接普通变量，可以直接 $ 变量名</p>
<p 变量名.方法名="">如果拼接变量引用方法，必须要 $</p>
<h4 id="集合类型"><a class="markdownIt-Anchor" href="#集合类型">#</a> 集合类型：</h4>
<p>list 集合： var names = [“111”,“222”,“333”];</p>
<p>set 集合:  var movies = {“111”,“222”,&quot;333”};</p>
<p 11:1,22:2="">map 集合：var info =</p>
<p>默认情况下，dart 的所有 class 都是隐式接口！</p>
<h4 id="dart函数使用"><a class="markdownIt-Anchor" href="#dart函数使用">#</a> Dart 函数使用：</h4>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(List&lt;String&gt; args) &#123;</span><br><span class="line">    print(sum(<span class="number">51</span>, <span class="number">14891</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum(<span class="keyword">int</span> a,<span class="keyword">int</span> b)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数参数"><a class="markdownIt-Anchor" href="#函数参数">#</a> 函数参数：</h4>
<p>必选参数，不能有默认值，可选参数，可以有默认值</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main()&#123;</span><br><span class="line">    sayHello(<span class="string">&quot;why&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//必选参数：String name 必须传参</span></span><br><span class="line"><span class="keyword">void</span> sayHello(<span class="built_in">String</span> name)&#123;</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：位置可选参数 </span></span><br><span class="line"><span class="keyword">void</span> sayHello2(<span class="built_in">String</span> name, [<span class="built_in">int</span> age, <span class="built_in">String</span> desc])&#123;</span><br><span class="line">    sayHello2(<span class="string">&quot;brath&quot;</span>,<span class="number">12</span>,<span class="string">&quot;waa&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用[]包围的参数可传可不传，但是位置必须对应</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：命名可选参数 重点，多用！</span></span><br><span class="line"><span class="keyword">void</span> sayHello3(<span class="built_in">String</span> name, &#123;<span class="built_in">int</span> age, <span class="built_in">String</span> desc&#125;)&#123;</span><br><span class="line">    sayHello3(<span class="string">&quot;brath&quot;</span>,age: <span class="number">13</span>,desc: <span class="string">&quot;212&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用&#123;&#125;包围的参数可传可不传，但是必须指定参数名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数是一等公民"><a class="markdownIt-Anchor" href="#函数是一等公民">#</a> 函数是一等公民:</h4>
<p>函数可以作为另外一个函数的参数！</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// test(see);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//匿名函数</span></span><br><span class="line">  <span class="comment">// test(()&#123;</span></span><br><span class="line">  <span class="comment">//   print(&quot;匿名&quot;);</span></span><br><span class="line">  <span class="comment">//   return 10;</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  test(() =&gt; <span class="built_in">print</span>(<span class="string">&quot;箭头&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">Function</span> foo)&#123;</span><br><span class="line">    see();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> see()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;see！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test((num1,num2)&#123;</span></span><br><span class="line">    <span class="comment">//   return num1+num2;</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">num</span> = demo();</span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">num</span>(<span class="number">20</span>,<span class="number">12</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将函数声明式显示，利用 typedef 声明一个函数列表，调用 typedef 声明的函数</span></span><br><span class="line"><span class="keyword">typedef</span> Calculate = <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> num1,<span class="built_in">int</span> num2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(Calculate calculate)&#123;</span><br><span class="line">  calculate(<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// void test(int foo(int num1,int num2))&#123;</span></span><br><span class="line"><span class="comment">//   foo(20,30);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">Calculate demo()&#123;</span><br><span class="line">  <span class="keyword">return</span> (num1,num2)&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="赋值运算符"><a class="markdownIt-Anchor" href="#赋值运算符">#</a> 赋值运算符：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Flutter中，有诡异的赋值运算符</span><br><span class="line">比如 name ??=&quot;111&quot;;</span><br><span class="line">解释：当原来的变量有值时，不执行</span><br><span class="line">当原来的变量为null时，执行</span><br><span class="line"></span><br><span class="line">或者 var name = name ?? &quot;11&quot;;</span><br><span class="line">解释： 当name不为空时使用name，为空使用后面的变量</span><br></pre></td></tr></table></figure>
<h3 id="级联运算符"><a class="markdownIt-Anchor" href="#级联运算符">#</a> 级联运算符：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person()</span><br><span class="line">    		..name = <span class="string">&quot;brath&quot;</span></span><br><span class="line">    		..eat();</span><br><span class="line">			..run();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用 .. 连续调用对象中的方法，类似于Java中的链式调用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>()</span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">void</span> eat()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;吃&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="keyword">void</span> run()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;跑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="for循环和switch循环与js和java基本一致"><a class="markdownIt-Anchor" href="#for循环和switch循环与js和java基本一致">#</a> For 循环和 Switch 循环与 JS 和 Java 基本一致</h4>
<h3 id="构造函数"><a class="markdownIt-Anchor" href="#构造函数">#</a> 构造函数：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">	String name;</span><br><span class="line">	int age;</span><br><span class="line">	double height;</span><br><span class="line">	</span><br><span class="line">	//默认构造函数</span><br><span class="line">	Person(this.name.this.age);</span><br><span class="line">	//命名构造函数，指定名字的构造函数</span><br><span class="line">	Person.NameCon(this.name.this.age,this.height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="dynamic"><a class="markdownIt-Anchor" href="#dynamic">#</a> dynamic：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span>代表任意类型</span><br><span class="line"><span class="built_in">dynamic</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//可以调用</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//不能调用！</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<h3 id="初始化列表"><a class="markdownIt-Anchor" href="#初始化列表">#</a> 初始化列表：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person(<span class="string">&#x27;brath&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//如果传了age参数，就用age参数，如果没传age参数就用10</span></span><br><span class="line">    Person(<span class="keyword">this</span>.name,&#123;<span class="built_in">int</span> age&#125;): <span class="keyword">this</span>.age = age ?? <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="构造函数重定向"><a class="markdownIt-Anchor" href="#构造函数重定向">#</a> 构造函数重定向：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//默认构造函数调用内部构造函数，重定向</span></span><br><span class="line">    Person(<span class="built_in">String</span> name) : <span class="keyword">this</span>._internal(name,<span class="number">0</span>);</span><br><span class="line">    Person._internal(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="工厂构造函数"><a class="markdownIt-Anchor" href="#工厂构造函数">#</a> 工厂构造函数：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相比于普通构造函数来说，工厂构造函数可以手动返回对象</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">String</span> color;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _nameCache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _colorCache = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//工厂构造函数，手动根据条件返回对象</span></span><br><span class="line">    <span class="keyword">factory</span> Person.withName(<span class="built_in">String</span> name)&#123;</span><br><span class="line">        <span class="keyword">if</span>(_nameCache.containsKey(name))&#123;</span><br><span class="line">            <span class="keyword">return</span> _nameCache[name];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _nameCache[name] = Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="getter和setter"><a class="markdownIt-Anchor" href="#getter和setter">#</a> Getter 和 Setter：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">   <span class="comment">//直接访问属性</span></span><br><span class="line">    <span class="keyword">final</span> p = Person();</span><br><span class="line">    p.name = <span class="string">&quot;brath&quot;</span>;</span><br><span class="line">    <span class="built_in">print</span>(p.name);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//get，set访问</span></span><br><span class="line">    p.setName(<span class="string">&quot;brath.cloud&quot;</span>);</span><br><span class="line">    <span class="built_in">print</span>(p.getName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">   <span class="keyword">late</span> <span class="built_in">String</span> name;	</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  //get,set方法</span></span><br><span class="line">  <span class="comment">//  void setName(String name) &#123;</span></span><br><span class="line">  <span class="comment">//     this.name = name;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   String get getName&#123;</span></span><br><span class="line">  <span class="comment">//       return name;</span></span><br><span class="line">  <span class="comment">//   &#125; </span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//get,set方法箭头函数</span></span><br><span class="line">   <span class="keyword">void</span> setName(<span class="built_in">String</span> name) =&gt; <span class="keyword">this</span>.name = name;</span><br><span class="line">   <span class="built_in">String</span> <span class="keyword">get</span> getName =&gt; name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="隐式接口"><a class="markdownIt-Anchor" href="#隐式接口">#</a> 隐式接口：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart中没有interface关键字，默认所有类都是隐式接口</span></span><br><span class="line"><span class="comment">//当讲将一个类作为接口使用时，实现这个接口的类，必须实现这个接口中的所有方法</span></span><br></pre></td></tr></table></figure>
<h3 id="类的混入"><a class="markdownIt-Anchor" href="#类的混入">#</a> 类的混入：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用<span class="class"><span class="keyword">class</span>声明的类不可以混入其他类</span></span><br><span class="line"><span class="class">要混入其他类，使用 <span class="title">mixin</span> 声明该类，并在混入时用<span class="title">with</span>关键字来连接被混入的类</span></span><br></pre></td></tr></table></figure>
<h3 id="类属性和类方法"><a class="markdownIt-Anchor" href="#类属性和类方法">#</a> 类属性和类方法：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类属性：在类中不用<span class="keyword">static</span>声明的变量，叫做成员变量，不可以被类直接调用</span><br><span class="line">静态属性：在类中用<span class="keyword">static</span>声明的变量，叫做静态属性，类属性，可以被类直接调用</span><br><span class="line">类方法：在类中不用<span class="keyword">static</span>声明的方法，叫做成员方法，不可以被类直接调用</span><br><span class="line">静态方法：在类中用<span class="keyword">static</span>声明的方法，叫做静态方法，类属性，可以被类直接调用</span><br></pre></td></tr></table></figure>
<h3 id="枚举的使用"><a class="markdownIt-Anchor" href="#枚举的使用">#</a> 枚举的使用：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">final</span> color = Colors.bule;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span>(color)&#123;</span><br><span class="line">    <span class="keyword">case</span> Colors.bule:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;蓝色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.red:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;红色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.yellow:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;黄色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(Colors.values);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Colors&#123;</span><br><span class="line">  red,</span><br><span class="line">  bule,</span><br><span class="line">  yellow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="库的使用"><a class="markdownIt-Anchor" href="#库的使用">#</a> 库的使用：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Dart中，任何一个dart文件都是一个库，类似于Java中的包</span></span><br><span class="line"><span class="comment">//系统库导入： import &#x27;dart:库名&#x27;;</span></span><br><span class="line"><span class="comment">//自定会库导入： import &#x27;包名/类名&#x27;;</span></span><br><span class="line"><span class="comment">//库别名：当本类引用其他库时，出现方法名冲突，可以用 as 来给导入的库起别名，再用别名引用</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">as</span> timeUtil;</span><br><span class="line"><span class="comment">//默认情况下，导入一个库时，导入的是这个库中所有的内容</span></span><br><span class="line"><span class="comment">//dart提供两个关键字来单独导入方法或者隐藏某个方法：</span></span><br><span class="line"><span class="keyword">show</span>   <span class="keyword">hide</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil; <span class="comment">//只导入timeUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil; <span class="comment">//只有timeUtil不会导入</span></span><br><span class="line"><span class="comment">//多个方法可以用逗号分割：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil, FileUtil; <span class="comment">//只导入timeUtil,FileUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil, FileUtil; <span class="comment">//只有timeUtil,FileUtil不会导入</span></span><br></pre></td></tr></table></figure>
<h3 id="抽取公共库文件"><a class="markdownIt-Anchor" href="#抽取公共库文件">#</a> 抽取公共库文件：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	以上方法导入库的时候总是会遇到一些问题，比如如果有<span class="number">100</span>个方法，你只想用<span class="number">50</span>个，那么你就要用<span class="number">50</span>个<span class="keyword">show</span>或者<span class="number">50</span>个<span class="keyword">hide</span>，但是dart提供了一种方式，就是抽取库到一个公共类中。</span><br><span class="line">    前面提到过，dart中所有文件都是一个库，那么我们把需要导入的库，全部<span class="keyword">export</span>到一个库中，在引用这个库，就不用担心过多引入了。</span><br><span class="line">        </span><br><span class="line">公共库：</span><br><span class="line">util.dart</span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/TimeUtil&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/FileUtil&#x27;</span></span><br><span class="line"></span><br><span class="line">我的代码：</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;util&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="使用第三方库"><a class="markdownIt-Anchor" href="#使用第三方库">#</a> 使用第三方库：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart使用第三方库需要创建一个文件 pubspec.yaml</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">库名</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">描述</span></span><br><span class="line"><span class="attr">dependencies:</span> <span class="string">依赖</span></span><br><span class="line">   <span class="attr">http:</span> <span class="string">^0.13.4</span></span><br><span class="line"><span class="string">怎么找库？</span></span><br><span class="line"><span class="string">https://pub.dev/packages/http</span></span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220402134052159.png" alt="image-20220402134052159"></p>
<p>点击 installing</p>
<p>把 dependencies 内容复制到代码中</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">coderwhy</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">a</span> <span class="string">dart</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">http:</span> <span class="string">^0.12.0+4</span></span><br><span class="line"><span class="attr">environment:</span> </span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">&#x27;&gt;=2.10.0 &lt; 3.0.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>进入当前类文件夹，终端输入 pub get 就会下载对应库包</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:http/http.dart&#x27;</span> <span class="keyword">as</span> http;</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入第三方库，必须用package来开头</span></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> url = <span class="string">&#x27;https://www.brath.cloud:9000/esn-user-service/user/getUserInfo?id=1&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> url2 = <span class="string">&#x27;https://brath.cloud/image/back.png&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> http.<span class="keyword">get</span>(url);</span><br><span class="line">  <span class="built_in">print</span>(response.body);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="异常处理"><a class="markdownIt-Anchor" href="#异常处理">#</a> 异常处理：</h3>
<p>​	与 Java 相同但是有不一样的部分：</p>
<p>​	同步处理</p>
<p>​		在一个方法中用 try 捕获异常，如果调用方法就捕获不到了！</p>
<p>​	异步处理</p>
<p>​		调用一个异步方法如果发生异常，可以用自异步 + await 来捕获异常</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> test1();</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"> test1() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">11</span>~/<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="接下来介绍-我们的flutter"><a class="markdownIt-Anchor" href="#接下来介绍-我们的flutter">#</a> 接下来介绍 我们的 Flutter！</h4>
<h2 id="最好的跨平台解决方案-flutter"><a class="markdownIt-Anchor" href="#最好的跨平台解决方案-flutter">#</a> 最好的跨平台解决方案 Flutter</h2>
<p>架构对比：</p>
<p><img src="https://brath.cloud/blogImg/image-20220401170121598.png" alt="image-20220401170121598"></p>
<h4 id="gup绘制出图像放到buffer缓存中手机屏幕根据刷新率来读取缓存的操作就是展示图像-image-20220401171307870"><a class="markdownIt-Anchor" href="#gup绘制出图像放到buffer缓存中手机屏幕根据刷新率来读取缓存的操作就是展示图像-image-20220401171307870">#</a> GUP 绘制出图像，放到 Buffer 缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。	<img src="https://brath.cloud/blogImg/image-20220401171307870.png" alt="image-20220401171307870"></h4>
<h3 id="引出了一个概念垂直同步"><a class="markdownIt-Anchor" href="#引出了一个概念垂直同步">#</a> 引出了一个概念：垂直同步</h3>
<p><img src="https://brath.cloud/blogImg/image-20220401172029367.png" alt="image-20220401172029367"></p>
<p>​	为什么要有垂直同步？</p>
<p>​	来看一个例子：假设我 GPU 每秒帧率产生 60，手机屏幕每秒也是接受 60，这时可以正常显示。</p>
<p>​								如果突然每秒帧率提高到 120，手机屏幕可能会来不及读取缓存导致画面重叠、撕裂</p>
<p>​	开启垂直同后，会有两块缓存区域。</p>
<p>​	垂直同步就限制了手机屏幕读取缓存和 GPU 产生的速度，开启垂直同步后，GPU 将画面写入到第一个缓存中，第一个缓存会复制内容（地址交换）到第二个缓存中，当两份缓存都存在这一帧，就会发送一个 VSync 的信号，告诉 GPU 可以绘制下一张图，然后手机屏幕来显示第二个缓存中的内容，这样就可以避免图像撕裂。</p>
<h5 id="一个简单的flutter结构"><a class="markdownIt-Anchor" href="#一个简单的flutter结构">#</a> 一个简单的 flutter 结构：</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mian() =&gt; runApp(MyApp());</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//APP主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: BrathScaffoldPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//页面主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathScaffoldPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      <span class="comment">//appbar：顶部标签主体</span></span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;第一个Fullter程序&quot;</span>,style: TextStyle(fontSize: <span class="number">20</span>),),</span><br><span class="line">      ),</span><br><span class="line">      body: BrathBodyPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//内容主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathBodyPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(<span class="string">&quot;Hello Fullter&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="开始学习"><a class="markdownIt-Anchor" href="#开始学习">#</a> 开始学习：</h5>
<h4 id="下载flutter-sdk"><a class="markdownIt-Anchor" href="#下载flutter-sdk">#</a> 下载 Flutter SDK</h4>
<p>配置 Flutter 的第一步就是下载 Flutter SDK，然后进行安装，上面两个地址都有给 SDK 下载地址，这里的问题是有的 SDK 安装包有时会报 没有.git 文件的错误，所以最稳妥的方法是通过 git clone 命令安装<br>
在安装目录下面执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b stable https://github.com/flutter/flutter.git</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/202202090714320308.png" alt="img"></p>
<p>安装完成之后，可以在安装根目录，找的 flutter_console.bat 文件，双击运行</p>
<p><img src="https://brath.cloud/blogImg/202202090714323989.png" alt="img"></p>
<h1 id="配置flutter运行环境变量"><a class="markdownIt-Anchor" href="#配置flutter运行环境变量">#</a> 配置 Flutter 运行环境变量</h1>
<p>在用户变量里面编辑或者添加 Path 条目，把 Flutter 的 bin 目录路径添加在里面</p>
<p><img src="https://brath.cloud/blogImg/202202090714326036.png" alt="img"></p>
<h1 id="运行flutter"><a class="markdownIt-Anchor" href="#运行flutter">#</a> 运行 Flutter</h1>
<p>在命令行运行 flutter doctor，它会下载它自己的依赖项并自行编译，一般情况是会报错提示，多半是 Android SDK 找不到什么的，如果出错了，就按照错误信息网上查一下就解决了。<br>
我的已经处理完成的</p>
<p><img src="https://brath.cloud/blogImg/202202090714328081.png" alt="img"></p>
<h1 id="编辑器设置"><a class="markdownIt-Anchor" href="#编辑器设置">#</a> 编辑器设置</h1>
<p>我用的 Android Studio，上面连接里面有不同系统和编辑器的流程，详情可以前往查看</p>
<p>Android Studio 的开发环境就不说了，需要的可以自行百度。Android Studio 配置 Flutter 开发主要是 Flutter 和 Dart 两个插件</p>
<p><img src="https://brath.cloud/blogImg/202202090714332173.png" alt="img"></p>
<p>File – Settings – Plugins – Marketplace 然后在搜索里面搜索 Flutter 和 Dart 安装就可以了。<br>
安装完插件，重启一下 Android Studio 基本就配置完成了，可以新建 Flutter 项目了。</p>
<h1 id="新建flutter项目"><a class="markdownIt-Anchor" href="#新建flutter项目">#</a> 新建 Flutter 项目</h1>
<p>File – New – New Flutter Project</p>
<p><img src="https://brath.cloud/blogImg/202202090714334854.png" alt="img"></p>
<p><img src="https://brath.cloud/blogImg/202202090714337229.png" alt="img"></p>
<p>选择 Flutter Application</p>
<p>然后到这个最后一步的时候，会有一点小问题</p>
<p><img src="https://brath.cloud/blogImg/202202090714339364.png" alt="img"></p>
<p>Flutter SDK path 这一栏第一次默认是空的，需要手动选择，选择我们最开始下载的 Flutter SDK，选择根目录，就可以了</p>
<h1 id="至此flutter的开发环境安装完毕"><a class="markdownIt-Anchor" href="#至此flutter的开发环境安装完毕">#</a> 至此 Flutter 的开发环境安装完毕！</h1>
<h4 id="现在开始学习flutter的基础组件以及进阶理论"><a class="markdownIt-Anchor" href="#现在开始学习flutter的基础组件以及进阶理论">#</a> 现在开始学习 Flutter 的基础组件，以及进阶理论！</h4>
<h1 id="flutter学习笔记-autherbrath"><a class="markdownIt-Anchor" href="#flutter学习笔记-autherbrath">#</a> flutter 学习笔记  auther：Brath</h1>
<h2 id="所有的重点都在代码的注释中标注"><a class="markdownIt-Anchor" href="#所有的重点都在代码的注释中标注">#</a> 所有的重点都在代码的注释中标注！</h2>
<h3 id="创建项目"><a class="markdownIt-Anchor" href="#创建项目">#</a> 创建项目：</h3>
<p>​		到想存储项目的文件路径，打开 CMD，输入 flutter create 项目名称即可</p>
<p><img src="https://brath.cloud/blogImg/image-20220506084830778.png" alt="image-20220506084830778"></p>
<p>​		vscode 下载好插件，dart 和 flutter 打开对应 flutter 文件，即可开始编写</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//导包 material</span></span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  runApp(MyApp()); <span class="comment">//运行app</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//继承无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp( <span class="comment">//运行根节点MaterialApp</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="widgetflutter模块组件"><a class="markdownIt-Anchor" href="#widgetflutter模块组件">#</a> Widget：flutter 模块 / 组件</h2>
<h4 id="特性"><a class="markdownIt-Anchor" href="#特性">#</a> 特性：</h4>
<h5 id="widget分为有状态statefulwidget和无状态的-statelesswidget"><a class="markdownIt-Anchor" href="#widget分为有状态statefulwidget和无状态的-statelesswidget">#</a> widget 分为有状态（StatefulWidget）和无状态的 (StatelessWidget)</h5>
<p>无状态的 widget 是静态页面</p>
<p>有状态的 widget 是动态页面</p>
<h4 id="要点"><a class="markdownIt-Anchor" href="#要点">#</a> 要点：</h4>
<h5 id="tipsflutter的main入口调用第一个widget需要该widget使用-materialapp作为首个widget"><a class="markdownIt-Anchor" href="#tipsflutter的main入口调用第一个widget需要该widget使用-materialapp作为首个widget">#</a> tips：flutter 的 main 入口调用第一个 widget 需要该 widget 使用 MaterialApp () 作为首个 widget</h5>
<p>因为 MaterialApp 包含了路由主题等等组件，flutter 规定只能用 MaterialApp 当作根节点</p>
<h3 id="使用materialapp的home属性来指定页面"><a class="markdownIt-Anchor" href="#使用materialapp的home属性来指定页面">#</a> 使用 MaterialApp 的 home 属性来指定页面</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: HomePage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="container容器相当于divwidget下面有更详细的介绍"><a class="markdownIt-Anchor" href="#container容器相当于divwidget下面有更详细的介绍">#</a> Container 容器（相当于 DIV）(widget)：下面有更详细的介绍</h2>
<p>均为可选参数</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Container(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">    <span class="keyword">this</span>.padding, <span class="comment">//边距</span></span><br><span class="line">    <span class="keyword">this</span>.color, <span class="comment">//颜色 使用 Clolrs枚举</span></span><br><span class="line">    <span class="keyword">this</span>.decoration, <span class="comment">//描述</span></span><br><span class="line">    <span class="keyword">this</span>.foregroundDecoration,</span><br><span class="line">    <span class="built_in">double?</span> width, <span class="comment">//宽度 使用double 常量</span></span><br><span class="line">    <span class="built_in">double?</span> height, <span class="comment">//高度 使用double 常量</span></span><br><span class="line">    BoxConstraints? constraints,</span><br><span class="line">    <span class="keyword">this</span>.margin, <span class="comment">//margin</span></span><br><span class="line">    <span class="keyword">this</span>.transform,</span><br><span class="line">    <span class="keyword">this</span>.transformAlignment,</span><br><span class="line">    <span class="keyword">this</span>.child, <span class="comment">//子组件</span></span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(margin == <span class="keyword">null</span> || margin.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(padding == <span class="keyword">null</span> || padding.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(decoration == <span class="keyword">null</span> || decoration.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(constraints == <span class="keyword">null</span> || constraints.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(clipBehavior != <span class="keyword">null</span>),</span><br><span class="line">       <span class="keyword">assert</span>(decoration != <span class="keyword">null</span> || clipBehavior == Clip.none),</span><br><span class="line">       <span class="keyword">assert</span>(color == <span class="keyword">null</span> || decoration == <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;Cannot provide both a color and a decoration\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;To provide both, use &quot;decoration: BoxDecoration(color: color)&quot;.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       constraints =</span><br><span class="line">        (width != <span class="keyword">null</span> || height != <span class="keyword">null</span>)</span><br><span class="line">          ? constraints?.tighten(width: width, height: height)</span><br><span class="line">            ?? BoxConstraints.tightFor(width: width, height: height)</span><br><span class="line">          : constraints,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>
<h2 id="text文本组件widget"><a class="markdownIt-Anchor" href="#text文本组件widget">#</a> Text 文本组件 (widget)：</h2>
<p>Text 默认传一个文本：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span></span><br><span class="line"><span class="class">  @<span class="title">override</span></span></span><br><span class="line"><span class="class">  <span class="title">Widget</span> <span class="title">build</span>(<span class="title">BuildContext</span> <span class="title">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Container( <span class="comment">//容器</span></span><br><span class="line">      width: <span class="built_in">double</span>.infinity, <span class="comment">//宽度 使用double枚举</span></span><br><span class="line">      color: Colors.blue, <span class="comment">//颜色 使用Colors枚举</span></span><br><span class="line">      child: Text( <span class="comment">//容器的子组件 文本组件 </span></span><br><span class="line">      <span class="string">&quot;文本&quot;</span> * <span class="number">20</span>, <span class="comment">//输入文本 20个</span></span><br><span class="line">      maxLines: <span class="number">1</span>, <span class="comment">//最大行数 1</span></span><br><span class="line">      textDirection: TextDirection.ltr, <span class="comment">//从左到右</span></span><br><span class="line">      textAlign: TextAlign.center, <span class="comment">//剧中</span></span><br><span class="line">      style: TextStyle( <span class="comment">//设置文本样式</span></span><br><span class="line">        fontSize: <span class="number">30</span>, <span class="comment">//字体大小 30</span></span><br><span class="line">        color: Colors.teal <span class="comment">//字体颜色</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Text(</span><br><span class="line">    <span class="comment">//必传参数</span></span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">this</span>.data, </span><br><span class="line">    <span class="comment">//可选参数</span></span><br><span class="line">    &#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.style, <span class="comment">//文本风格，使用 TextStyle方法来指定</span></span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">    <span class="keyword">this</span>.textAlign, <span class="comment">//设置文本居中 靠左 靠右，使用 TextAlign枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textDirection, <span class="comment">//文本排列：左到右 右到左 使用 TextDirection枚举</span></span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="keyword">this</span>.softWrap,</span><br><span class="line">    <span class="keyword">this</span>.overflow, <span class="comment">//溢出后按照什么风格显示，使用TextOverflow的枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor,</span><br><span class="line">    <span class="keyword">this</span>.maxLines,  <span class="comment">//最大行数</span></span><br><span class="line">    <span class="keyword">this</span>.semanticsLabel,</span><br><span class="line">    <span class="keyword">this</span>.textWidthBasis,</span><br><span class="line">    <span class="keyword">this</span>.textHeightBehavior,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(</span><br><span class="line">         data != <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;A non-null String must be provided to a Text widget.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       textSpan = <span class="keyword">null</span>,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>
<h2 id="button按钮组件widget"><a class="markdownIt-Anchor" href="#button按钮组件widget">#</a> Button 按钮组件 (widget)：</h2>
<p>flutter 中有几种常用按钮组件：</p>
<p>在 2.0 版本后遗弃按钮 RaisedButton 改为 ElevatedButton ，  FlatButton 改为 TextButton</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton 已遗弃</span><br><span class="line">FlatButton 已遗弃</span><br></pre></td></tr></table></figure>
<h4 id="elevatedbutton漂浮按钮升降按钮"><a class="markdownIt-Anchor" href="#elevatedbutton漂浮按钮升降按钮">#</a> ElevatedButton：漂浮按钮 / 升降按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094017377.png" alt="image-20220506094017377"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed:()&#123;</span><br><span class="line">            <span class="comment">//点击事件，如果为null未定义的话，按钮无法点击</span></span><br><span class="line">          &#125;, </span><br><span class="line">        child: Text( <span class="comment">//这里是按钮文本，可以是图片可以是文本</span></span><br><span class="line">          <span class="string">&quot;漂浮按钮&quot;</span></span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="textbutton扁平按钮文本按钮"><a class="markdownIt-Anchor" href="#textbutton扁平按钮文本按钮">#</a> TextButton：扁平按钮 / 文本按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094026219.png" alt="image-20220506094026219"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//点击事件</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Text(</span><br><span class="line">            <span class="string">&quot;扁平按钮&quot;</span></span><br><span class="line">       ))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="textbuttonicon带图标的扁平按钮文本按钮"><a class="markdownIt-Anchor" href="#textbuttonicon带图标的扁平按钮文本按钮">#</a> TextButton.icon：带图标的扁平按钮 / 文本按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094049981.png" alt="image-20220506094049981"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton.icon(onPressed: ()&#123;&#125;,</span><br><span class="line">         icon: Icon(Icons.add), <span class="comment">//使用Icons枚举选择图标</span></span><br><span class="line">         label: Text(<span class="string">&quot;图标按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="outlinedbuttonicon无阴影按钮"><a class="markdownIt-Anchor" href="#outlinedbuttonicon无阴影按钮">#</a> OutlinedButton.icon：无阴影按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094056747.png" alt="image-20220506094056747"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         OutlinedButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         child: Text(<span class="string">&quot;无阴影按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="outlinedbuttonicon图标按钮"><a class="markdownIt-Anchor" href="#outlinedbuttonicon图标按钮">#</a> OutlinedButton.icon：图标按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094100990.png" alt="image-20220506094100990"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         IconButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         icon: Icon(Icons.home)) <span class="comment">//图标用 Icons 枚举选择</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="image图片-图标组件widget"><a class="markdownIt-Anchor" href="#image图片-图标组件widget">#</a> Image 图片、图标组件 (widget)：</h2>
<p>flutter 提供了四种图片加载方式：<img src="https://brath.cloud/blogImg/image-20220506095911749.png" alt="image-20220506095911749"></p>
<p>1、Image.network   // 从网络获取图片</p>
<p>2、Image.asset   // 从项目本地获取图片</p>
<p>3、Image.file   // 从文件路径获取图片</p>
<p>4、Image.memory  // 从手机内存，存储中获取图片</p>
<p>使用 asset 需要设置 pubspec.yaml 中的 assets <img src="https://brath.cloud/blogImg/image-20220506100017264.png" alt="image-20220506100017264"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageIconDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Icon(Icons.home), <span class="comment">//普通图标</span></span><br><span class="line">        IconButton(onPressed: ()&#123;&#125;, icon: Icon(Icons.home)), <span class="comment">//带点击事件的图标</span></span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="built_in">double</span>.infinity, <span class="comment">//最大宽度</span></span><br><span class="line">          child: Image.network( <span class="comment">//从网络获取图片</span></span><br><span class="line">          <span class="string">&quot;https://brath.cloud/love/GCLK6888.JPG?versionId=CAEQNxiBgID8yJjchBgiIDUzZGFiMWU3YWVlNDQ4YmJhMzMwNDY0Mzk1OGJiOTU1&quot;</span>,</span><br><span class="line">          fit: BoxFit.fill, <span class="comment">//图片填充模式</span></span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Image.asset(<span class="string">&quot;images/image.jpeg&quot;</span>), <span class="comment">//项目加载图片</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="switch开关checkbox复选框组件widget"><a class="markdownIt-Anchor" href="#switch开关checkbox复选框组件widget">#</a> Switch 开关，CheckBox 复选框组件 (widget)：</h2>
<p>因为开关和复选框是动态的，有状态的，所以我们要使用 StatefulWidget 来做他们的 widget</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tips：在 onChanged 使用 setState 来改变状态</span></span><br></pre></td></tr></table></figure>
<p>Check 复选框<img src="https://brath.cloud/blogImg/image-20220506100951883.png" alt=""></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _check = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Checkbox(</span><br><span class="line">          value: _check, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _check = res!;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Switch 开关<img src="https://brath.cloud/blogImg/image-20220506101002490.png" alt="image-20220506101002490"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _<span class="keyword">switch</span> = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Switch(</span><br><span class="line">          value: _<span class="keyword">switch</span>, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">             setState(() &#123;</span><br><span class="line">                _<span class="keyword">switch</span> = res;</span><br><span class="line">             &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="progress-进度条指示器组件widget"><a class="markdownIt-Anchor" href="#progress-进度条指示器组件widget">#</a> Progress 进度条，指示器组件 (widget)：</h2>
<p>flutter 为我们提供了几种进度条和指示器样式</p>
<p>1、LinearProgressIndicator  线性指示器 <img src="https://brath.cloud/blogImg/image-20220506102352707.png" alt="image-20220506102352707"></p>
<p>2、CircularProgressIndicator  圆圈指示器 <img src="https://brath.cloud/blogImg/image-20220506102400475.png" alt="image-20220506102400475"></p>
<p>3、CupertinoActivityIndicator  IOS 风格的进度指示器 <img src="https://brath.cloud/blogImg/image-20220506102404297.png" alt="image-20220506102404297"></p>
<p>可以设置的参数：</p>
<p>value：可以设置 0 - 1，来表示当前进度</p>
<p>valueColor：使用 AlwaysStoppedAnimation (Colors.red)  动画包裹颜色设置进度指示器的颜色</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProgressDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Padding(</span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          LinearProgressIndicator( <span class="comment">//线性指示器</span></span><br><span class="line">            value: <span class="number">.5</span>, <span class="comment">//进度 从0-1， .5就是一半</span></span><br><span class="line">            valueColor: AlwaysStoppedAnimation(Colors.red), <span class="comment">//设置颜色要用动画包裹</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>), <span class="comment">//设置间隔 16 </span></span><br><span class="line">          Container( <span class="comment">//设置容器</span></span><br><span class="line">            height: <span class="number">100</span>, <span class="comment">//高 100</span></span><br><span class="line">            width: <span class="number">100</span>, <span class="comment">//宽 100</span></span><br><span class="line">            child: CircularProgressIndicator( <span class="comment">//圆圈指示器</span></span><br><span class="line">              <span class="comment">// value: .8,</span></span><br><span class="line">              valueColor: AlwaysStoppedAnimation(Colors.red),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>),</span><br><span class="line">          CupertinoActivityIndicator(), <span class="comment">//IOS风格的进度指示器</span></span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="click-点击组件widget"><a class="markdownIt-Anchor" href="#click-点击组件widget">#</a> Click 点击组件 (widget)：</h2>
<p>flutter 为我们提供了 GestureDetector 手势检测器<img src="https://brath.cloud/blogImg/image-20220506102924441.png" alt="image-20220506102924441"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClickDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector( <span class="comment">//创建手势检测器</span></span><br><span class="line">      onTap: ()&#123; <span class="comment">//单击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;点击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      onDoubleTap: ()&#123; <span class="comment">//双击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;双击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">&quot;点击组件&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="input-输入框组件widget"><a class="markdownIt-Anchor" href="#input-输入框组件widget">#</a> Input 输入框组件 (widget)：</h2>
<p>flutter 为我们提供了两种常用输入组件：</p>
<p>TextField：默认典型输入框，没有 validator 验证</p>
<p>TextFromField：特点是可以带参数校验 validator 一般用于登录注册表单验证</p>
<h4 id="textfield-源码"><a class="markdownIt-Anchor" href="#textfield-源码">#</a> TextField 源码</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextField(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller, <span class="comment">//控制器</span></span><br><span class="line">   <span class="keyword">this</span>.focusNode, <span class="comment">//焦点</span></span><br><span class="line">   <span class="keyword">this</span>.decoration = <span class="keyword">const</span> InputDecoration(), <span class="comment">//装饰器</span></span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   <span class="keyword">this</span>.textInputAction, <span class="comment">//输入动作 键盘右下角（完成，搜索，下一行）</span></span><br><span class="line">   <span class="keyword">this</span>.textCapitalization = TextCapitalization.none,</span><br><span class="line">   <span class="keyword">this</span>.style, <span class="comment">//样式</span></span><br><span class="line">   <span class="keyword">this</span>.strutStyle,</span><br><span class="line">   <span class="keyword">this</span>.textAlign = TextAlign.start, <span class="comment">//文本格式 默认从左开始</span></span><br><span class="line">   <span class="keyword">this</span>.textAlignVertical,</span><br><span class="line">   <span class="keyword">this</span>.textDirection, <span class="comment">//文本方向</span></span><br><span class="line">   <span class="keyword">this</span>.readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="keyword">this</span>.showCursor,</span><br><span class="line">   <span class="keyword">this</span>.autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="keyword">this</span>.enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLines = <span class="number">1</span>, <span class="comment">//最大行数</span></span><br><span class="line">   <span class="keyword">this</span>.minLines, <span class="comment">//最小行数</span></span><br><span class="line">   <span class="keyword">this</span>.expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLength, <span class="comment">//最大字数</span></span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforcement,</span><br><span class="line">   <span class="keyword">this</span>.onChanged, <span class="comment">//当值改变</span></span><br><span class="line">   <span class="keyword">this</span>.onEditingComplete,</span><br><span class="line">   <span class="keyword">this</span>.onSubmitted,</span><br><span class="line">   <span class="keyword">this</span>.onAppPrivateCommand,</span><br><span class="line">   <span class="keyword">this</span>.inputFormatters,</span><br><span class="line">   <span class="keyword">this</span>.enabled,</span><br><span class="line">   <span class="keyword">this</span>.cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="keyword">this</span>.cursorHeight,</span><br><span class="line">   <span class="keyword">this</span>.cursorRadius,</span><br><span class="line">   <span class="keyword">this</span>.cursorColor,</span><br><span class="line">   <span class="keyword">this</span>.selectionHeightStyle = ui.BoxHeightStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.selectionWidthStyle = ui.BoxWidthStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.keyboardAppearance,</span><br><span class="line">   <span class="keyword">this</span>.scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="keyword">this</span>.dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">   <span class="keyword">this</span>.enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.selectionControls,</span><br><span class="line">   <span class="keyword">this</span>.onTap,</span><br><span class="line">   <span class="keyword">this</span>.mouseCursor,</span><br><span class="line">   <span class="keyword">this</span>.buildCounter,</span><br><span class="line">   <span class="keyword">this</span>.scrollController,</span><br><span class="line">   <span class="keyword">this</span>.scrollPhysics,</span><br><span class="line">   <span class="keyword">this</span>.autofillHints = <span class="keyword">const</span> &lt;<span class="built_in">String</span>&gt;[],</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.hardEdge,</span><br><span class="line">   <span class="keyword">this</span>.restorationId,</span><br><span class="line">   <span class="keyword">this</span>.enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="textfromfield-源码"><a class="markdownIt-Anchor" href="#textfromfield-源码">#</a> TextFromField 源码</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller,</span><br><span class="line">   <span class="built_in">String?</span> initialValue,</span><br><span class="line">   FocusNode? focusNode,</span><br><span class="line">   InputDecoration? decoration = <span class="keyword">const</span> InputDecoration(),</span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   TextCapitalization textCapitalization = TextCapitalization.none,</span><br><span class="line">   TextInputAction? textInputAction,</span><br><span class="line">   TextStyle? style,</span><br><span class="line">   StrutStyle? strutStyle,</span><br><span class="line">   TextDirection? textDirection,</span><br><span class="line">   TextAlign textAlign = TextAlign.start,</span><br><span class="line">   TextAlignVertical? textAlignVertical,</span><br><span class="line">   <span class="built_in">bool</span> autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="built_in">bool?</span> showCursor,</span><br><span class="line">   <span class="built_in">String</span> obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="built_in">bool</span> obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="built_in">bool</span> enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="built_in">bool</span> maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   MaxLengthEnforcement? maxLengthEnforcement,</span><br><span class="line">   <span class="built_in">int?</span> maxLines = <span class="number">1</span>,</span><br><span class="line">   <span class="built_in">int?</span> minLines,</span><br><span class="line">   <span class="built_in">bool</span> expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">int?</span> maxLength,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onChanged,</span><br><span class="line">   GestureTapCallback? onTap,</span><br><span class="line">   VoidCallback? onEditingComplete,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onFieldSubmitted,</span><br><span class="line">   FormFieldSetter&lt;<span class="built_in">String</span>&gt;? onSaved,</span><br><span class="line">   FormFieldValidator&lt;<span class="built_in">String</span>&gt;? validator, <span class="comment">//与TextFiled不同的点，增加了 validator验证方法</span></span><br><span class="line">   <span class="built_in">List</span>&lt;TextInputFormatter&gt;? inputFormatters,</span><br><span class="line">   <span class="built_in">bool?</span> enabled,</span><br><span class="line">   <span class="built_in">double</span> cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="built_in">double?</span> cursorHeight,</span><br><span class="line">   Radius? cursorRadius,</span><br><span class="line">   Color? cursorColor,</span><br><span class="line">   Brightness? keyboardAppearance,</span><br><span class="line">   EdgeInsets scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="built_in">bool</span> enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   TextSelectionControls? selectionControls,</span><br><span class="line">   InputCounterWidgetBuilder? buildCounter,</span><br><span class="line">   ScrollPhysics? scrollPhysics,</span><br><span class="line">   <span class="built_in">Iterable</span>&lt;<span class="built_in">String</span>&gt;? autofillHints,</span><br><span class="line">   AutovalidateMode? autovalidateMode,</span><br><span class="line">   ScrollController? scrollController,</span><br><span class="line">   <span class="built_in">String?</span> restorationId,</span><br><span class="line">   <span class="built_in">bool</span> enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p>简易登录</p>
<p><img src="https://brath.cloud/blogImg/image-20220506130535502.png" alt="image-20220506130535502"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InputDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态 widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;InputDemo&gt; createState() =&gt; _InputDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputDemo</span>&gt; </span>&#123;</span><br><span class="line">  GlobalKey _key = GlobalKey&lt;FormState&gt;(); <span class="comment">//key的泛型是表单状态，这样就可以通过key提交</span></span><br><span class="line">  TextEditingController _rootController = TextEditingController();<span class="comment">//账号控制器</span></span><br><span class="line">  TextEditingController _passController = TextEditingController();<span class="comment">//密码控制器</span></span><br><span class="line">  FocusNode _r = FocusNode(); <span class="comment">//账号焦点</span></span><br><span class="line">  FocusNode _p = FocusNode(); <span class="comment">//密码焦点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//当退出时销毁controller，否则占用内存</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();  <span class="comment">//销毁父类</span></span><br><span class="line">    _rootController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _passController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _r.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _p.dispose(); <span class="comment">//销毁</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Form( <span class="comment">//构建表单</span></span><br><span class="line">      key: _key, <span class="comment">//构建表单提交key</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">        TextFormField( <span class="comment">//构建表单输入框</span></span><br><span class="line">          autofocus: <span class="keyword">true</span>, <span class="comment">//默认焦点聚集</span></span><br><span class="line">          focusNode: _r, <span class="comment">//账号焦点</span></span><br><span class="line">          controller: _rootController, <span class="comment">//引用账号控制器</span></span><br><span class="line">          decoration: InputDecoration( <span class="comment">//输入框描述</span></span><br><span class="line">            prefixIcon: Icon(Icons.add), <span class="comment">//输入框图标</span></span><br><span class="line">            labelText: <span class="string">&quot;账号&quot;</span>, <span class="comment">//输入框标题</span></span><br><span class="line">            hintText: <span class="string">&quot;默认文字&quot;</span> <span class="comment">//输入框默认value</span></span><br><span class="line">          ),</span><br><span class="line">          validator: (v)&#123; <span class="comment">//只有使用 TextFormField 才可以用验证 validator 不用验证使用 TextField</span></span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.isEmpty)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;账号不能为空!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.next, <span class="comment">//回车后跳转下个输入框</span></span><br><span class="line">          onFieldSubmitted: (v)&#123; <span class="comment">//监听回车键</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;brath&quot;</span>);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">8</span>), <span class="comment">//设置间隔高度</span></span><br><span class="line">        TextFormField(</span><br><span class="line">          focusNode: _p, <span class="comment">//密码焦点</span></span><br><span class="line">          controller: _passController,</span><br><span class="line">          decoration: InputDecoration(</span><br><span class="line">            prefixIcon: Icon(Icons.add),</span><br><span class="line">            labelText: <span class="string">&quot;密码&quot;</span>,</span><br><span class="line">            hintText: <span class="string">&quot;输入密码&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          obscureText: <span class="keyword">true</span>,</span><br><span class="line">          validator: (v)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.length &lt; <span class="number">5</span>)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;密码不能小于5位数!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.send, <span class="comment">//将小键盘右下角的回车设置图标</span></span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">16</span>),</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//当校验通过时输出 true 否则 false</span></span><br><span class="line">            <span class="built_in">print</span>((_key.currentState <span class="keyword">as</span> FormState).validate().toString());</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(<span class="string">&quot;提交&quot;</span>),</span><br><span class="line">          ),</span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter路由工具"><a class="markdownIt-Anchor" href="#flutter路由工具">#</a> Flutter 路由工具：</h2>
<p>var res = await Navigator.of (context).push ( // 跳转路由到 MenuPage 并可以接受返回值</p>
<p>这段代码用异步来监听返回值，优点是，无论是否点击按钮返回，都可以接收到返回值</p>
<p>还可以用 .then ((value) =&gt; print (value)); 的方式来获取，这样更简洁，只有返回的时候才会监听，不返回不监听</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: prefer_const_constructors, use_key_in_widget_constructors</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//新页面导包</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar( <span class="comment">//标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton( <span class="comment">//登录按钮</span></span><br><span class="line">        onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> res = <span class="keyword">await</span> Navigator.of(context).push( <span class="comment">//跳转路由到 MenuPage 并可以接受返回值</span></span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">              builder: (context) &#123;</span><br><span class="line">                <span class="keyword">return</span> MenuPage( <span class="comment">//传参 menuTitle</span></span><br><span class="line">                  menuTitle: <span class="string">&quot;菜单&quot;</span>,</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">              settings: RouteSettings( <span class="comment">//路由设置</span></span><br><span class="line">                name: <span class="string">&quot;参数&quot;</span>,</span><br><span class="line">                arguments: <span class="string">&quot;我是参数&quot;</span>, <span class="comment">//向目标传参的数据</span></span><br><span class="line">              ),</span><br><span class="line">              maintainState: <span class="keyword">false</span>,</span><br><span class="line">              fullscreenDialog: <span class="keyword">true</span>,</span><br><span class="line">          ));</span><br><span class="line">          <span class="built_in">print</span>(res); <span class="comment">//打印返回值</span></span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> menuTitle;</span><br><span class="line">  <span class="keyword">const</span> MenuPage(&#123;Key? key,<span class="keyword">required</span> <span class="keyword">this</span>.menuTitle&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//通过 ModalRoute.of(context)?.settings.arguments; 来获取传参</span></span><br><span class="line">    <span class="built_in">dynamic</span> arguments = ModalRoute.of(context)?.settings.arguments;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(menuTitle + <span class="string">&quot;  &quot;</span> + arguments),</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          Navigator.of(context).pop(<span class="string">&quot;Brath&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;返回按钮&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Flutter 中管理多个页面时有两个核心概念和类： <code>Route</code>  和 <code>Navigator</code> 。<br>
一个 <code>route</code>  是一个屏幕或页面的抽象， <code>Navigator</code>  是管理 <code>route</code>  的 <code>Widget</code> 。 <code>Navigator</code>  可以通过 <code>route</code>  入栈和出栈来实现页面之间的跳转。<br>
路由一般分为静态路由 (即命名路由) 和动态路由。</p>
<h3 id="静态路由即命名路由"><a class="markdownIt-Anchor" href="#静态路由即命名路由">#</a> 静态路由 (即命名路由)</h3>
<p>静态路由在通过 <code>Navigator</code>  跳转之前，需要在 <code>MaterialApp</code>  组件内显式声明路由的名称，而一旦声明，路由的跳转方式就固定了。通过在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明路由的定义。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyApp</span> <span class="keyword">extends</span> <span class="title class_ inherited__">StatelessWidget</span> &#123;</span><br><span class="line">  @override</span><br><span class="line">  <span class="title class_">Widget</span> <span class="title function_">build</span>(<span class="params">BuildContext context</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">MaterialApp</span>(</span><br><span class="line">      <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">      <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="comment">//&quot;/&quot;:(context) =&gt; RootPage(),</span></span><br><span class="line">        <span class="string">&quot;A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">        <span class="string">&quot;B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Bpage</span>(),</span><br><span class="line">        <span class="string">&quot;C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line"> 	<span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">注意：如果指定了home属性，routes表则不能再包含此属性。</span><br><span class="line">如上代码中【<span class="attr">home</span>: <span class="title class_">RootPage</span>()】  和 【<span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>()】两则不能同时存在。</span><br></pre></td></tr></table></figure>
<p>例如： <code>RootPage</code>  跳转 <code>Apage</code>  即： <code>RootPage</code>   —&gt; <code>Apage</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushNamed(<span class="string">&quot;A&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>一般方法中带有 <code>Name</code>  多数是通过静态路由完成跳转的，如 <code>pushNamed</code> 、 <code>pushReplacementNamed</code> 、 <code>pushNamedAndRemoveUntil</code>  等。</p>
<h3 id="动态路由"><a class="markdownIt-Anchor" href="#动态路由">#</a> 动态路由</h3>
<p>动态路由无需在 <code>MaterialApp</code>  内的 <code>routes</code>  中注册即可直接使用：RootPage  —&gt; Apage</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>动态路由中，需要传入一个 <code>Route</code> , 这里使用的是 <code>MaterialPageRoute</code> ，它可以使用和平台风格一致的路由切换动画，在 iOS 上左右滑动切换，Android 上会上下滑动切换。也可以使用 <code>CupertinoPageRoute</code>  实现全平台的左右滑动切换。<br>
当然也可以自定义路由切换动画，使用 <code>PageRouteBuilder</code> : 使用 <code>FadeTransition</code> <br>
 做一个渐入过渡动画。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(</span><br><span class="line">  PageRouteBuilder(</span><br><span class="line">    transitionDuration: <span class="built_in">Duration</span>(milliseconds: <span class="number">250</span>), <span class="comment">// //动画时间为0.25秒</span></span><br><span class="line">    pageBuilder: (BuildContext context,Animation animation,</span><br><span class="line">        Animation secondaryAnimation)&#123;</span><br><span class="line">      <span class="keyword">return</span> FadeTransition( <span class="comment">//渐隐渐入过渡动画</span></span><br><span class="line">        opacity: animation,</span><br><span class="line">        child: Apage()</span><br><span class="line">       );</span><br><span class="line">     &#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>到现在为止，可能对路由有了一定的认识，，下面就结合具体方法来详细说明。<br>
在这之前有必要说明：<br>
 <code>Navigator.of(context).push</code>  和 <code>Navigator.push</code>  两着并没有特别的区别，看源码也得知，后者其实就是调用了前者。<br>
 <code>of</code> ：获取 <code>Navigator</code>  当前已经实例的状态。</p>
<h3 id="路由拦截"><a class="markdownIt-Anchor" href="#路由拦截">#</a> 路由拦截：</h3>
<p>flutter 提供了 onGenerateRoute 来使用路由拦截器，作用于强制登录</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      initialRoute: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">&quot;/&quot;</span> :(context) =&gt; LoginPage(),</span><br><span class="line">        <span class="comment">// &quot;menu&quot; :(context) =&gt; MenuPage(), </span></span><br><span class="line">      &#125;,</span><br><span class="line">      onGenerateRoute: (RouteSettings s)&#123; <span class="comment">//路由拦截器</span></span><br><span class="line">        <span class="built_in">print</span>(s.name); <span class="comment">//路由名称</span></span><br><span class="line">        <span class="keyword">if</span>(s.name != <span class="string">&quot;menu&quot;</span>)&#123; <span class="comment">//当该路由不等于 menu 强制跳转回首页</span></span><br><span class="line">              <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> LoginPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span>(s.name)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;menu&quot;</span> : <span class="comment">//当该路由等于 menu 跳转至 menu 菜单</span></span><br><span class="line">          <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> MenuPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="路由方法解释"><a class="markdownIt-Anchor" href="#路由方法解释">#</a> 路由方法解释：</h3>
<h3 id="pop"><a class="markdownIt-Anchor" href="#pop">#</a> pop</h3>
<p>返回当前路由栈的上一个界面。<br>
 <code>Navigator.pop(context);</code></p>
<h3 id="push-pushnamed"><a class="markdownIt-Anchor" href="#push-pushnamed">#</a> push / pushNamed  ：</h3>
<p>见上，两者运行效果相同，只是调用不同，都是将一个 <code>page</code>  压入路由栈中。直白点就是 <code>push</code>  是把界面直接放入， <code>pushNames</code>  是通过路由名的方式，通过 router 使界面进入对应的栈中。<br>
结果：直接在原来的路由栈上添加一个新的  <code>page</code> 。</p>
<h3 id="pushreplacement-pushreplacementnamed-popandpushnamed"><a class="markdownIt-Anchor" href="#pushreplacement-pushreplacementnamed-popandpushnamed">#</a> pushReplacement / pushReplacementNamed / popAndPushNamed</h3>
<p>替换路由，顾名思义替换当前的路由。<br>
例如</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-de7b4cb63fcb1d83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/985/format/webp" alt="img"></p>
<p>Replacement.png</p>
<p>由图可知在 <code>BPage</code>  使用替换跳转到 <code>Cpage</code>  的时候， <code>Bpage</code>  被 <code>Cpage</code>  替换了在堆栈中的位置而移除栈， <code>CPage</code>  默认返回的是 <code>APage</code> 。</p>
<h6 id="pushreplacement-使用的动态路由方式跳转"><a class="markdownIt-Anchor" href="#pushreplacement-使用的动态路由方式跳转">#</a> pushReplacement 使用的动态路由方式跳转：</h6>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushReplacement</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<h6 id="pushreplacementnamed-使用的静态路由方式"><a class="markdownIt-Anchor" href="#pushreplacementnamed-使用的静态路由方式">#</a> pushReplacementNamed 使用的静态路由方式，</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushReplacementNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>两者运行效果相同。</p>
<h6 id="popandpushnamed"><a class="markdownIt-Anchor" href="#popandpushnamed">#</a> popAndPushNamed：</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popAndPushNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>其实和上面两个方法运行的结果也是一致，区别就是动画效果不一样： <code>BPage</code>  —&gt; <code>CPage</code>  的时候， <code>CPage</code>  会同时有 <code>pop</code>  的转场效果和从 <code>BPage</code>  页 <code>push</code>  的转场效果。简单来说就是 <code>CPage</code>  先 <code>pop</code>  到 <code>BPage</code> ，在 <code>push</code>  到 <code>CPage</code> 。（不知道是不是卡顿的原因，笔者看起来区别不大）</p>
<p>综上：3 中方法结果一样，只是调用方式和过渡动画的区别，开发者自行选择。</p>
<h3 id="pushandremoveuntil-pushnamedandremoveuntil"><a class="markdownIt-Anchor" href="#pushandremoveuntil-pushnamedandremoveuntil">#</a> pushAndRemoveUntil / pushNamedAndRemoveUntil</h3>
<p>在使用上述方式跳转时，会按次序移除其他的路由，直到遇到被标记的路由（ <code>predicate</code>  函数返回了 <code>true</code> ）时停止。若 没有标记的路由，则移除全部。<br>
当路由栈中存在重复的标记路由时，默认移除到最近的一个停止。</p>
<h6 id="第一种"><a class="markdownIt-Anchor" href="#第一种">#</a> 第一种</h6>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>此时的路由栈示意图：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-364a8005348f7aec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/983/format/webp" alt="img"></p>
<p>RemoveUntil_all.png</p>
<p>可知出了要 <code>push</code>  的 <code>CPage</code> ，当前路由栈中所有的路由都被移除， <code>CPage</code>  变成根路由。</p>
<h6 id="第二种移除到rootpage停止"><a class="markdownIt-Anchor" href="#第二种移除到rootpage停止">#</a> 第二种：移除到 RootPage 停止</h6>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;/&quot;即为RootPage，标记后，移除到该路由停止移除</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&#x27;/&#x27;</span>))</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="comment">// 只是写法不一样</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>此时的路由栈示意图：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-d03ce09352ff0619.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/992/format/webp" alt="img"></p>
<p>RemoveUntil_until.png</p>
<p><code>push</code>  到 <code>CPage</code>  的时候，移除到 <code>RootPage</code>  停止， <code>CPage</code>  默认返回 <code>RootPage</code> 。</p>
<h3 id="popuntil"><a class="markdownIt-Anchor" href="#popuntil">#</a> popUntil</h3>
<p>返回到指定的标记路由，若标记的路由为 <code>null</code> ，则程序退出，慎用！！！<br>
有时候我们需要根据业务需求判断：可能返回上一级路由，也可能返回上上级路由或是返回指定的路由等。这个时候就不能使用 <code>Replacemen</code> t 和 <code>RemoveUntil</code>  来替换、移除路由了。<br>
例如：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-7ca98d9fca946e7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/453/format/webp" alt="img"></p>
<p>until.png</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>再例如：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-6c759f94d04bf0d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/447/format/webp" alt="img"></p>
<p>要实现上述功能，从 <code>CPage</code>  返回到 <code>APage</code> ，并且不在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明路由。因为笔者觉得一个应用程序的界面太多了，如果每个界面都要显示声明路由，实在是不优雅。<br>
因为需要返回 <code>APage</code> ，还是需要标记路由，所有我们在之前跳转 <code>APage</code>  的时候设置 <code>RouteSettings</code> ，如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置APage的RouteSettings</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>在 <code>CPage</code>  需要返回的时候，调用就行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popUntil(ModalRoute.withName(<span class="string">&quot;/A&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>这样代码看起来很优雅，不会冗余。<br>
另：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回根路由</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">isFirst</span>);</span><br></pre></td></tr></table></figure>
<h3 id="canpop"><a class="markdownIt-Anchor" href="#canpop">#</a> canPop</h3>
<p>用来判断是否可以导航到新页面，返回的 <code>bool</code>  类型，一般是在设备带返回的物理按键时需要判断是否可以 <code>pop</code> 。</p>
<h3 id="maybepop"><a class="markdownIt-Anchor" href="#maybepop">#</a> maybePop</h3>
<p>可以理解为 <code>canPop</code>  的升级， <code>maybePop</code>  会自动判断。如果当前的路由可以 <code>pop</code> ，则执行当前路由的 <code>pop</code>  操作，否则将不执行。</p>
<h3 id="removerouteremoveroutebelow"><a class="markdownIt-Anchor" href="#removerouteremoveroutebelow">#</a> removeRoute/removeRouteBelow</h3>
<p>删除路由，同时执行 <code>Route.dispose</code>  操作，无过渡动画，正在进行的手势也会被取消。</p>
<h6 id="removeroute"><a class="markdownIt-Anchor" href="#removeroute">#</a> removeRoute</h6>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-b33464133f67a4db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/996/format/webp" alt="img"></p>
<p>removeRoute.png</p>
<p><code>BPage</code>  被移除了当前的路由栈。<br>
如果在当前页面调用 <code>removeRoute</code> ，则类似于调用 <code>pop</code>  方法，区别就是无过渡动画，所以 <code>removeRoute</code>  也可以用来返回上一页。</p>
<h6 id="removeroutebelow"><a class="markdownIt-Anchor" href="#removeroutebelow">#</a> removeRouteBelow</h6>
<p>移除指定路由底层的临近的一个路由，并且对应路由不存在的时候会报错。<br>
同上。</p>
<p>综上：这个两个方法一般情况下很少用，而且必须要持有对应的要移除的路由。<br>
一般用于立即关闭，如移除当前界面的弹出框等。</p>
<hr>
<h1 id="路由传值"><a class="markdownIt-Anchor" href="#路由传值">#</a> 路由传值</h1>
<p>常见的路由传值分为两个方面：</p>
<ul>
<li>向下级路由传值</li>
<li>返回上级路由时传值</li>
</ul>
<p>要注意的是，我们一般说静态路由不能传值，并不是说一定不能用于传值，而是因为静态路由一般需要在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明，在这里使用构造函数传值无实际意义。<br>
如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MaterialApp</span>(</span><br><span class="line">     <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">     <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>(),</span><br><span class="line">       <span class="string">&quot;/A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;title&quot;</span>),  <span class="comment">// 在这里传参无实际意义，一般需要传入的参数都是动态变化的</span></span><br><span class="line">       <span class="string">&quot;/B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">BPage</span>(),</span><br><span class="line">       <span class="string">&quot;/C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">CPage</span>(),</span><br><span class="line">     &#125;,</span><br><span class="line">    <span class="comment">// home: RootPage(),</span></span><br><span class="line">   );</span><br></pre></td></tr></table></figure>
<h3 id="向下级路由传值"><a class="markdownIt-Anchor" href="#向下级路由传值">#</a> 向下级路由传值</h3>
<h5 id="1-构造函数传值"><a class="markdownIt-Anchor" href="#1-构造函数传值">#</a> 1、构造函数传值</h5>
<p>首先构造一个可以带参数的构造函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  APage(<span class="keyword">this</span>.title);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _APageState createState() =&gt; _APageState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在路由跳转的时候传值：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;这是传入的参数&quot;</span>),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>在 APage 拿到传入的值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 StatefulWidget 使用[widget.参数名]</span></span><br><span class="line"><span class="built_in">Container</span>(</span><br><span class="line">  child: <span class="built_in">Text</span>(widget.title),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="2-modalroute-传值"><a class="markdownIt-Anchor" href="#2-modalroute-传值">#</a> 2、ModalRoute 传值</h5>
<p>在 <code>Navigator.of(context).push</code>  的跳转方式中， <code>MaterialPageRoute</code>  的构造参数中 可以看到有 <code>RouteSettings</code>  的属性， <code>RouteSettings</code>  就是当前路由的基本信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RouteSettings(&#123;</span><br><span class="line">    <span class="keyword">this</span>.name,</span><br><span class="line">    <span class="keyword">this</span>.isInitialRoute = <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.arguments, <span class="comment">// 存储路由相关的参数Object</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>路由跳转时设置传递参数：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>: &#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br><span class="line">或使用静态路由pushName：</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamed</span>(<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>:&#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>在 <code>APage</code>  中取值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span> argms = ModalRoute.of(context).settings.arguments;</span><br><span class="line"><span class="built_in">print</span>(argms[<span class="string">&quot;argms&quot;</span>]);</span><br></pre></td></tr></table></figure>
<h3 id="返回上级路由时传值"><a class="markdownIt-Anchor" href="#返回上级路由时传值">#</a> 返回上级路由时传值</h3>
<p>就是在调用 <code>APage</code>  中调用 <code>pop</code>  返回路由的时候传参</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator<span class="selector-class">.of</span>(context)<span class="selector-class">.pop</span>(&quot;这是pop返回的参数值&quot;);</span><br></pre></td></tr></table></figure>
<p>在上一级路由获取：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(MaterialPageRoute(</span><br><span class="line">  builder: (context) =&gt; APage(),</span><br><span class="line">)).then((<span class="keyword">value</span>)&#123; <span class="comment">// 获取pop的传值</span></span><br><span class="line">  print(<span class="keyword">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line">或</span><br><span class="line">String <span class="keyword">value</span> = <span class="keyword">await</span> Navigator.of(context).pushNamed(<span class="string">&#x27;/xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="flutter-布局layout-widget"><a class="markdownIt-Anchor" href="#flutter-布局layout-widget">#</a> Flutter 布局（Layout ）（Widget）：</h2>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br></pre></td></tr></table></figure>
<h4 id="column-纵向"><a class="markdownIt-Anchor" href="#column-纵向">#</a> Column  - 纵向</h4>
<p>概念：纵轴的宽度，默认使用子组件最大宽度</p>
<p>此时，红色和黄色容器宽度为 100 绿色为 150，整个容器就会使用 最大的子组件宽度 150 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506141732333.png" alt="image-20220506141732333"></p>
<p>Column 代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        child: Column(children: [</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="row-横向"><a class="markdownIt-Anchor" href="#row-横向">#</a> Row - 横向</h4>
<p>概念：和 Colunm 相似，纵轴的宽度，默认使用子组件最大高度</p>
<p>此时，红色和黄色容器高度为 100 绿色为 200，整个容器就会使用 最大的子组件高度 200 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506142159516.png" alt="image-20220506142159516"></p>
<p>Row 代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">      child: Row(</span><br><span class="line">        textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">        mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br><span class="line">        children: [</span><br><span class="line">           Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">200</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter弹性布局flex"><a class="markdownIt-Anchor" href="#flutter弹性布局flex">#</a> Flutter 弹性布局 (Flex)：</h2>
<p>flutter 为我们提供了 Flex 这个 widget 来制造弹性布局</p>
<p>Flex 默认 必传方向 Axis</p>
<p>children 使用 Expanded 来包裹，可以设置 flex 权重，根据数字大小来设置权重</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150504528.png" alt="image-20220506150504528"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Container(</span><br><span class="line">          color: Colors.grey,</span><br><span class="line">          child: Flex(</span><br><span class="line">            direction: Axis.vertical,</span><br><span class="line">            children: [</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.red,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.green,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">               Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter流式布局wrap"><a class="markdownIt-Anchor" href="#flutter流式布局wrap">#</a> Flutter 流式布局 (Wrap)：</h2>
<p>flutter 为我们提供了 Wrap 这个 widget 来制造弹性布局</p>
<p>使用 有状态的  StatefulWidget  来构建 wrap 布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150443707.png" alt="image-20220506150443707"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WrapDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;WrapDemo&gt; createState() =&gt; _WrapDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_WrapDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">WrapDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> list = &lt;<span class="built_in">int</span>&gt;[];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123; <span class="comment">//初始化时向数组添加 20 个数据</span></span><br><span class="line">      list.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Wrap(</span><br><span class="line">      direction: Axis.horizontal, <span class="comment">//设置方向</span></span><br><span class="line">      alignment: WrapAlignment.start, <span class="comment">//布局参数</span></span><br><span class="line">      spacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      runSpacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      children: list.map((e) =&gt; Container(</span><br><span class="line">        height: <span class="number">100</span>,</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        child: Text(</span><br><span class="line">          e.toString(),</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            fontSize: <span class="number">20</span></span><br><span class="line">          )</span><br><span class="line">          ),</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">      )).toList()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter层叠布局stack"><a class="markdownIt-Anchor" href="#flutter层叠布局stack">#</a> Flutter 层叠布局 (Stack)：</h2>
<p>flutter 为我们提供了 Stack 这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150429490.png" alt="image-20220506150429490"></p>
<p>我们设置了两个容器 div，在层叠布局中，如果后一个容器，比前面的容器大，那么就会遮挡，原理是为什么？</p>
<ol>
<li>flutter 在绘画时，从 x 0 y 0 开始绘画，也就是 左上角</li>
<li>意味着两个容器绘画开始的坐标都是相同的，只不过宽高不一样</li>
<li>那么如果第一个容器宽高为 100 第二个为 150 就理所应当的遮住啦！</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center, <span class="comment">//居中布局</span></span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter定位布局positioned"><a class="markdownIt-Anchor" href="#flutter定位布局positioned">#</a> Flutter 定位布局 (Positioned)：</h2>
<p>flutter 为我们提供了 Positioned 这个 widget 来制造层叠布局</p>
<p>如果 Positioned 设置了宽高，那么子组件不生效</p>
<p><img src="https://brath.cloud/blogImg/image-20220506151155616.png" alt="image-20220506151155616"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果设置了 </span></span><br><span class="line">​	top: <span class="number">10</span>,</span><br><span class="line">​   bottom: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置高度 height</span><br><span class="line"><span class="comment">//如果设置了</span></span><br><span class="line">​     left: <span class="number">10</span>,</span><br><span class="line">​     right: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置宽度 width</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220506151900799.png" alt="image-20220506151900799"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center,</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">          Positioned(</span><br><span class="line">            <span class="comment">// width: 100,</span></span><br><span class="line">            <span class="comment">// height: 100,</span></span><br><span class="line">            child: Container(</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">                width: <span class="number">300</span>,</span><br><span class="line">                height: <span class="number">300</span>,</span><br><span class="line">          ),</span><br><span class="line">          top: <span class="number">50</span>,</span><br><span class="line">          left: <span class="number">150</span>,</span><br><span class="line">          right: <span class="number">150</span>,</span><br><span class="line">          bottom: <span class="number">50</span>,</span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter相对定位align"><a class="markdownIt-Anchor" href="#flutter相对定位align">#</a> Flutter 相对定位 (Align)：</h2>
<p>flutter 为我们提供了 Align 这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154713361.png" alt="image-20220506154713361"></p>
<p>要点：只会相对于父组件来定位，而不是屏幕</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlignDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">200</span>,</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.green,</span><br><span class="line">      child: Align(</span><br><span class="line">        alignment: Alignment.center, <span class="comment">//居中</span></span><br><span class="line">        child: FlutterLogo( <span class="comment">//flutter的logo</span></span><br><span class="line">          size: <span class="number">60</span>, <span class="comment">//宽高60</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的内外边距-padding-margin"><a class="markdownIt-Anchor" href="#flutter的内外边距-padding-margin">#</a> Flutter 的内外边距 Padding、Margin</h2>
<p>flutter 为我们提供了 padding 和 margin 这量个 属性来设置内外边距</p>
<p>内边距：当前容器内的组件对于当前容器的距离</p>
<p>外边距：当前容器距离父类容器的距离</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154557035.png" alt="image-20220506154557035"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaddingAndMarginDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      color: Colors.red,</span><br><span class="line">      <span class="comment">//设置外边距（当前容器距离父类容器的距离）</span></span><br><span class="line">      <span class="comment">// margin: EdgeInsets.only(left: 10),//单独设置外边距</span></span><br><span class="line">      margin: EdgeInsets.all(<span class="number">10</span>),<span class="comment">//四个方向设置外边距</span></span><br><span class="line">      <span class="comment">//设置内边距（当前容器内的组件对于当前容器的距离）</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      child: Text(<span class="string">&quot;我有边距&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter尺寸限制容器constrainedboxwidget"><a class="markdownIt-Anchor" href="#flutter尺寸限制容器constrainedboxwidget">#</a> Flutter 尺寸限制容器（ConstrainedBox）widget：</h2>
<p>要点：子 widget 没有设置宽高的时候取自己设置的最大宽高</p>
<p>ConstrainedBox 的特点就是可以设置最大或者最小的宽高，子组件怎么设置都不可以超过这个宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155526846.png" alt="image-20220506155526846"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ConstrainedBox(</span><br><span class="line">      constraints: BoxConstraints(</span><br><span class="line">        maxHeight: <span class="number">100</span>,</span><br><span class="line">        maxWidth: <span class="number">100</span>,</span><br><span class="line">        minHeight: <span class="number">50</span>,</span><br><span class="line">        minWidth: <span class="number">50</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Container(</span><br><span class="line">        width: <span class="number">500</span>,</span><br><span class="line">        height: <span class="number">500</span>,</span><br><span class="line">        color: Colors.red,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter尺寸限制容器sizeboxwidget"><a class="markdownIt-Anchor" href="#flutter尺寸限制容器sizeboxwidget">#</a> Flutter 尺寸限制容器（SizeBox）widget：</h2>
<p>要点：如果父容器指定了宽高，那么子组件不可以修改宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155924950.png" alt="image-20220506155924950"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SizedBox(</span><br><span class="line">        <span class="comment">// width: 100,</span></span><br><span class="line">        <span class="comment">// height: 100,</span></span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter装饰器boxdecorationwidget"><a class="markdownIt-Anchor" href="#flutter装饰器boxdecorationwidget">#</a> Flutter 装饰器（BoxDecoration）widget：</h2>
<p>flutter 为我们提供了 BoxDecoration  这量个 widget 来设置样式装饰</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161223872.png" alt="image-20220506161223872"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: DecoratedBox( <span class="comment">//装饰器</span></span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        <span class="comment">// color: Colors.red</span></span><br><span class="line">        gradient: LinearGradient( <span class="comment">//渐变颜色</span></span><br><span class="line">          colors: [</span><br><span class="line">            Colors.red, <span class="comment">//从红色</span></span><br><span class="line">            Colors.green, <span class="comment">//到绿色</span></span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>), <span class="comment">//圆角度</span></span><br><span class="line">        boxShadow: [</span><br><span class="line">          BoxShadow(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            offset: Offset(<span class="number">2.0</span>,<span class="number">2.0</span>),</span><br><span class="line">            blurRadius: <span class="number">2</span>,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: EdgeInsets.only(</span><br><span class="line">          left: <span class="number">100</span>,</span><br><span class="line">          right: <span class="number">100</span>,</span><br><span class="line">          top: <span class="number">20</span>,</span><br><span class="line">          bottom: <span class="number">20</span></span><br><span class="line">          ),</span><br><span class="line">        child: Text(</span><br><span class="line">          <span class="string">&quot;渐变色~&quot;</span>,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.white</span><br><span class="line">          ),</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter小容器containerwidget"><a class="markdownIt-Anchor" href="#flutter小容器containerwidget">#</a> Flutter 小容器（Container）widget：</h2>
<p>要点：当 Container 设置了 foregroundDecoration（前景） 的背景颜色，那么子组件将不会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161715758.png" alt="image-20220506161715758"></p>
<p>要点：当 Container 设置了 decoration（背景） 的背景颜色，那么子组件将会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161724860.png" alt="image-20220506161724860"></p>
<p>设置内边距并旋转 0.5</p>
<p><img src="https://brath.cloud/blogImg/image-20220506162019154.png" alt="image-20220506162019154"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContarinerDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">100</span>), <span class="comment">//设置内边距</span></span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      child: Text(<span class="string">&quot;data&quot;</span>), </span><br><span class="line">      decoration: BoxDecoration( <span class="comment">//设置背景  foregroundDecoration设置前景，会遮挡</span></span><br><span class="line">        color: Colors.red</span><br><span class="line">      ),</span><br><span class="line">      transform: Matrix4.rotationZ(<span class="number">0.5</span>), <span class="comment">//旋转，可选坐标轴</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter小容器materiaappscaffoldwidget"><a class="markdownIt-Anchor" href="#flutter小容器materiaappscaffoldwidget">#</a> Flutter 小容器（MateriaApp，Scaffold）widget：</h2>
<p>1.MateriaApp 是 flutter 的根节点，flutter 规定必须要 MateriaApp 来作为根节点展示</p>
<p>2. 在 MateriaApp 可以设置路由，每个子页面必须由 Scaffold 来包裹</p>
<p>3. 每个 Scaffold 包含两个部分 appBar（头部），body（展示体）</p>
<h2 id="flutter的appbar"><a class="markdownIt-Anchor" href="#flutter的appbar">#</a> Flutter 的 AppBar：</h2>
<p>Scaffold 中的 AppBar 有很多特性：</p>
<p><img src="https://brath.cloud/blogImg/image-20220506164220445.png" alt="image-20220506164220445"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        leading: IconButton( <span class="comment">//设置左侧图标</span></span><br><span class="line">            onPressed: () &#123;</span><br><span class="line">              <span class="built_in">print</span>(<span class="string">&quot;点击了！&quot;</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            icon: Icon(Icons.home) <span class="comment">//左边房子图片</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// centerTitle: true, //设置centerTitle为true，可将标题居中</span></span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">&quot;演示&quot;</span>,</span><br><span class="line">          style: TextStyle(fontSize: <span class="number">15</span>),</span><br><span class="line">        ),</span><br><span class="line">        actions: [  <span class="comment">//设置左侧图标</span></span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了加！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.add)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了减！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.remove)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了灯！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.wb_iridescent_rounded)),</span><br><span class="line">        ],</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// body: ,</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的顶部tabbar选项卡"><a class="markdownIt-Anchor" href="#flutter的顶部tabbar选项卡">#</a> Flutter 的顶部 TabBar 选项卡：</h2>
<p>Flutter 提供 顶部 TabBar 选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506170237419.png" alt="image-20220506170237419"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>]; <span class="comment">//选项卡数组</span></span><br><span class="line">  <span class="comment">//选项控制器</span></span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">//选项索引  </span></span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 初始化</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController( <span class="comment">//创建新控制器</span></span><br><span class="line">      initialIndex: _index, <span class="comment">//设置初始索引</span></span><br><span class="line">      length: tabs.length, <span class="comment">//长度为数组疮毒</span></span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">      _controller.addListener(() &#123; <span class="comment">//监听器</span></span><br><span class="line">        setState(() &#123; <span class="comment">//监听状态，当状态改变，把控制器索引赋值到选项索引，用来做内容切换</span></span><br><span class="line">          _index = _controller.index;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    * 销毁</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>, <span class="comment">//阴影</span></span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller, <span class="comment">//选项接收控制器</span></span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab( <span class="comment">//遍历选项</span></span><br><span class="line">          text: e, <span class="comment">//文本为map中的内容</span></span><br><span class="line">        )).toList(), <span class="comment">//转为集合</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: Text(_index.toString()), <span class="comment">//body可以根据index来输出不同内容</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的顶部tabbar选项卡进阶"><a class="markdownIt-Anchor" href="#flutter的顶部tabbar选项卡进阶">#</a> Flutter 的顶部 TabBar 选项卡（进阶）</h2>
<p>使用 Flutter 提供 顶部 TabBarView 组件来设置选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506171550665.png" alt="image-20220506171550665"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//指定三个容器页面，在下方调用 widget.widgets 因为泛型指定了 Widget 所以都是Widget数组</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [FlutterView(),AndroidView(),IOSView()];</span><br><span class="line">    </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>];</span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController(</span><br><span class="line">      length: tabs.length, </span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller,</span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab(</span><br><span class="line">          text: e,</span><br><span class="line">        )).toList(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: TabBarView( <span class="comment">//使用 TabBarView 包裹body</span></span><br><span class="line">        children: widget.widgets, <span class="comment">//内容就是widgets</span></span><br><span class="line">        controller: _controller, <span class="comment">//通过控制器来切换</span></span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;FlutterView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;AndroidView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;IOSView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的侧抽屉-drawer-样式"><a class="markdownIt-Anchor" href="#flutter的侧抽屉-drawer-样式">#</a> Flutter 的侧抽屉 Drawer 样式</h2>
<p>使用 Flutter 提供 侧抽屉 Drawer 组件来设置抽屉样式</p>
<p><img src="https://brath.cloud/blogImg/image-20220506172420330.png" alt="image-20220506172420330"></p>
<h4 id="要点drawer是-scaffold-中的属性并不是-appbar-的"><a class="markdownIt-Anchor" href="#要点drawer是-scaffold-中的属性并不是-appbar-的">#</a> 要点：drawer 是 Scaffold 中的属性，并不是 AppBar 的</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506172505516.png" alt="image-20220506172505516"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myDrawer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Drawer(</span><br><span class="line">      child: MediaQuery.removePadding( <span class="comment">//删除边距</span></span><br><span class="line">        context: context, </span><br><span class="line">        child: Column(</span><br><span class="line">          crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//从左开始</span></span><br><span class="line">          children: [</span><br><span class="line">            Padding(padding: EdgeInsets.only(top: <span class="number">40</span>),</span><br><span class="line">            child: Text(<span class="string">&quot;Brath&quot;</span>),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        removeTop: <span class="keyword">true</span>, <span class="comment">//删除顶部</span></span><br><span class="line">        ),     </span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的底部选项卡"><a class="markdownIt-Anchor" href="#flutter的底部选项卡">#</a> Flutter 的底部选项卡</h2>
<p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到点击卡片切换页面</p>
<p><img src="https://brath.cloud/blogImg/image-20220506190446130.png" alt="image-20220506190446130"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BottomNavigatorBarDemo(&#123; Key? key &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;新增&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;减少&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(child: Text(_index.toString())), <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的底部选项卡进阶版"><a class="markdownIt-Anchor" href="#flutter的底部选项卡进阶版">#</a> Flutter 的底部选项卡（进阶版）</h2>
<p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到按钮居中布局</p>
<p>要点：两种实现方式，BottomNavigationBar 中如果 BottomNavigationBarItem 超过三个需要设置 type👇否则不显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type: BottomNavigationBarType.fixed</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507084730237.png" alt="image-20220507084730237"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [ <span class="comment">//四个页面数组</span></span><br><span class="line">    PageDemo(),</span><br><span class="line">    LayoutDemo(),</span><br><span class="line">    LoginPage(),</span><br><span class="line">      LoginPage(),</span><br><span class="line">    ];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">      type: BottomNavigationBarType.fixed, <span class="comment">//设置超出三个页面显示</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;首页&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, <span class="comment">//将按钮作为居中嵌入下方tabbar</span></span><br><span class="line">      floatingActionButton: FloatingActionButton( <span class="comment">//设置居中按钮</span></span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种实现方式：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507084943281.png" alt="image-20220507084943281"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomAppBar(</span><br><span class="line">        color: Theme.of(context).primaryColorDark, <span class="comment">//设置tabbar颜色主题</span></span><br><span class="line">        shape: CircularNotchedRectangle(), <span class="comment">//设置按钮风格</span></span><br><span class="line">        child: Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">          children: [</span><br><span class="line">           IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.add)),</span><br><span class="line">             SizedBox(height: <span class="number">16</span>),</span><br><span class="line">                        IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.home)),</span><br><span class="line">          ]</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的列表-listviewwidget"><a class="markdownIt-Anchor" href="#flutter的列表-listviewwidget">#</a> Flutter 的列表 （ListView）Widget</h2>
<p>flutter 为我们提供了 ListView 这个 widget 来展示我们的列表</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//均为可选参数</span></span><br><span class="line">ListView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//滑动方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向，默认否</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//监听滑动距离回调 控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//限制listview的高度为子组件的高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">this</span>.itemExtent, <span class="comment">//设置list展示间距</span></span><br><span class="line">    <span class="keyword">this</span>.prototypeItem,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">  &#125;) </span><br></pre></td></tr></table></figure>
<h5 id="用-listview-实现滑动列表并且可以细粒度显示每个list数据并且可以点击按钮返回顶部"><a class="markdownIt-Anchor" href="#用-listview-实现滑动列表并且可以细粒度显示每个list数据并且可以点击按钮返回顶部">#</a> 用 ListView 实现滑动列表，并且可以细粒度显示每个 list 数据，并且可以点击按钮返回顶部</h5>
<p><img src="https://brath.cloud/blogImg/image-20220507094032250.png" alt="image-20220507094032250" style="zoom: 67%;" /><img src="https://brath.cloud/blogImg/image-20220507094042244.png" alt="image-20220507094042244" style="zoom: 67%;" /></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建无状态Widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ListViewDemo&gt; createState() =&gt; _ListViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ListViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ListViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化list为空</span></span><br><span class="line">  ScrollController _controller = ScrollController(); <span class="comment">//控制器</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">show</span> = <span class="keyword">false</span>; <span class="comment">//是否展示按钮</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = ScrollController(); <span class="comment">//初始化时，初始控制器</span></span><br><span class="line">    _controller.addListener(() &#123; <span class="comment">//增加控制器监听</span></span><br><span class="line">      <span class="keyword">if</span>(_controller.offset &gt;= <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">false</span>)&#123; <span class="comment">//如果滑动距离大于100并且按钮没展示那就展示按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(_controller.offset &lt; <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">true</span>)&#123; <span class="comment">//如果滑动距离小于100并且按钮展示那就关闭按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      list.add(i); <span class="comment">//循环添加到数组</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement dispose</span></span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">    _controller.dispose(); <span class="comment">//退出时，销毁控制器，否则内存会溢出</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;滚动列表&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: <span class="keyword">show</span> ? FloatingActionButton( <span class="comment">//使用三元来控制按钮展示</span></span><br><span class="line">        child: Icon(Icons.vertical_align_top_outlined),</span><br><span class="line">       onPressed: ()&#123;</span><br><span class="line">        _controller.animateTo( <span class="comment">//设置回到顶部</span></span><br><span class="line">        <span class="number">0</span>, <span class="comment">//回到哪个部分 0 就是顶端</span></span><br><span class="line">        duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>),  <span class="comment">//用Duration设置时间</span></span><br><span class="line">        curve: Curves.slowMiddle <span class="comment">//用Curves设置动效</span></span><br><span class="line">        );</span><br><span class="line">       &#125;,</span><br><span class="line">      ): <span class="keyword">null</span>, <span class="comment">//如果show为false则不展示按钮</span></span><br><span class="line">      body: Scrollbar(</span><br><span class="line">        child: RefreshIndicator( <span class="comment">//使用 RefreshIndicator 包裹listview使其可以下拉刷新</span></span><br><span class="line">          <span class="comment">//第一种方法：直接展示数组数据</span></span><br><span class="line">      <span class="comment">//     child: ListView(</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; Text(e.toString())).toList(),</span></span><br><span class="line">      <span class="comment">//   shrinkWrap: true, //限制listview的高度为子组件的高度</span></span><br><span class="line">      <span class="comment">//   reverse: false,//是否反向列表</span></span><br><span class="line">      <span class="comment">//   itemExtent: 50,//设置list展示间距</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line">          <span class="comment">//第二种方法，构造展示数组数据，可以细粒度操作</span></span><br><span class="line">      child: ListView.builder(</span><br><span class="line">        itemBuilder: (BuildContext context,<span class="built_in">int</span> index)&#123; <span class="comment">//itemBuilder构建列表</span></span><br><span class="line">          <span class="keyword">if</span>(index == <span class="number">2</span>)&#123; <span class="comment">//如果第索引 == 2那么就展示一个图标</span></span><br><span class="line">            <span class="keyword">return</span> Icon(Icons.add);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> Text(list[index].toString()); <span class="comment">//返回所有list中的索引打印String类型</span></span><br><span class="line">        &#125;,</span><br><span class="line">        itemCount: list.length, <span class="comment">//itemCount表示数组长度</span></span><br><span class="line">        controller: _controller, <span class="comment">//接入控制器</span></span><br><span class="line">        ),</span><br><span class="line">      onRefresh: _onRefresh, <span class="comment">//使用_onRefresh方法决定下拉刷新时的操作</span></span><br><span class="line">      )</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  Future _onRefresh() <span class="keyword">async</span>&#123; <span class="comment">//因为是异步操作所以加入 async ，在方法返回种使用 await 可以做到强制等待异步返回</span></span><br><span class="line">    <span class="keyword">await</span> Future.delayed( <span class="comment">//处理返回</span></span><br><span class="line">      <span class="built_in">Duration</span>(seconds: <span class="number">3</span>), <span class="comment">//等待3秒</span></span><br><span class="line">      ()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;三&quot;</span>); <span class="comment">//三秒后打印</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;三&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的网格布局-gridviewwidget"><a class="markdownIt-Anchor" href="#flutter的网格布局-gridviewwidget">#</a> Flutter 的网格布局 （GridView）Widget：</h2>
<p>flutter 为我们提供了 GridView 这个 widget 来展示我们的网格数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GridView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//展示方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//滑动控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//是否跟随子组件显示最大高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.gridDelegate,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507095538462.png" alt="image-20220507095538462"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid_view_demo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>, <span class="comment">//居中appbar标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;网格布局演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: GridView(</span><br><span class="line">        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">          crossAxisCount: <span class="number">2</span>, <span class="comment">//横向最大展示个数</span></span><br><span class="line">          mainAxisSpacing: <span class="number">10</span>, <span class="comment">//横向间距</span></span><br><span class="line">          crossAxisSpacing: <span class="number">10</span>, <span class="comment">//纵向间距</span></span><br><span class="line">        ),</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">85</span>, <span class="number">76</span>, <span class="number">51</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">14</span>, <span class="number">223</span>, <span class="number">125</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">209</span>),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的弹窗alertdialogwidget"><a class="markdownIt-Anchor" href="#flutter的弹窗alertdialogwidget">#</a> Flutter 的弹窗（AlertDialog）Widget：</h2>
<p>flutter 为我们提供了 AlertDialog 这个 widget 来展示我们的弹窗数据</p>
<p>源码阅读：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AlertDialog(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.title, <span class="comment">//弹窗标题</span></span><br><span class="line">   <span class="keyword">this</span>.titlePadding, <span class="comment">//弹窗边距</span></span><br><span class="line">   <span class="keyword">this</span>.titleTextStyle, <span class="comment">//文字风格</span></span><br><span class="line">   <span class="keyword">this</span>.content, <span class="comment">//弹窗内容</span></span><br><span class="line">   <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">20.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>), <span class="comment">//内容边距</span></span><br><span class="line">   <span class="keyword">this</span>.contentTextStyle, <span class="comment">//内容风格</span></span><br><span class="line">   <span class="keyword">this</span>.actions, <span class="comment">//确认展示结果</span></span><br><span class="line">   <span class="keyword">this</span>.actionsPadding = EdgeInsets.zero,</span><br><span class="line">   <span class="keyword">this</span>.actionsAlignment,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowDirection,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowButtonSpacing,</span><br><span class="line">   <span class="keyword">this</span>.buttonPadding,</span><br><span class="line">   <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">   <span class="keyword">this</span>.elevation,</span><br><span class="line">   <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">   <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">   <span class="keyword">this</span>.shape,</span><br><span class="line">   <span class="keyword">this</span>.alignment,</span><br><span class="line">   <span class="keyword">this</span>.scrollable = <span class="keyword">false</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="图片为ios风格的弹窗"><a class="markdownIt-Anchor" href="#图片为ios风格的弹窗">#</a> 图片为 IOS 风格的弹窗</h5>
<p><strong><img src="https://brath.cloud/blogImg/image-20220507101536722.png" alt="image-20220507101536722"></strong></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>))</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showAlert() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹窗</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">        <span class="comment">//默认风格弹窗</span></span><br><span class="line">        <span class="comment">// return AlertDialog( //AlertDialog展示弹窗</span></span><br><span class="line">        <span class="comment">//   title: Text(&quot;与Brath的聊天&quot;), //弹窗标题</span></span><br><span class="line">        <span class="comment">//   content: Text(&quot;确认删除&quot;), //弹窗文本</span></span><br><span class="line">        <span class="comment">//   actions: [</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.of(context).pop(true); //第一种返回方式，of上下文然后pop关闭，并返回一个true</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;确认&quot;)),</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.pop(context,false); //第二种返回方式，先pop关闭。然后用of链接上线问，并返回一个false</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;取消&quot;)),</span></span><br><span class="line">        <span class="comment">//   ],</span></span><br><span class="line">        <span class="comment">// );</span></span><br><span class="line">        <span class="comment">//IOS风格弹窗 除了widget不一样，其他参数均为统一</span></span><br><span class="line">         <span class="keyword">return</span> CupertinoAlertDialog(</span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>),</span><br><span class="line">          content: Text(<span class="string">&quot;确认删除&quot;</span>),</span><br><span class="line">          actions: [</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.of(context).pop(<span class="keyword">true</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;确认&quot;</span>)),</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.pop(context,<span class="keyword">false</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;取消&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res); <span class="comment">//打印路由返回结果</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter的弹框simpledialog-widget"><a class="markdownIt-Anchor" href="#flutter的弹框simpledialog-widget">#</a> Flutter 的弹框（SimpleDialog） Widget：</h2>
<p>flutter 为我们提供了 SimpleDialog 这个 widget 来展示我们的弹框数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SimpleDialog(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.title, <span class="comment">//弹框标题</span></span><br><span class="line">    <span class="keyword">this</span>.titlePadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">0.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.titleTextStyle,</span><br><span class="line">    <span class="keyword">this</span>.children, </span><br><span class="line">    <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0.0</span>, <span class="number">12.0</span>, <span class="number">0.0</span>, <span class="number">16.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">    <span class="keyword">this</span>.elevation,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">    <span class="keyword">this</span>.shape,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507102533285.png" alt="image-20220507102533285"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化空数组</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      list.add(i);<span class="comment">//加入循环数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>)),</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showList, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;列表框&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showList() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹框</span></span><br><span class="line"> <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      barrierDismissible: <span class="keyword">false</span>, <span class="comment">//展示弹窗，点击空白不会关闭</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">         <span class="keyword">return</span> SimpleDialog( <span class="comment">//创建弹框展示列表</span></span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>), <span class="comment">//弹框标题</span></span><br><span class="line">          children: list.map((e) =&gt; GestureDetector( <span class="comment">//用GestureDetector展示list</span></span><br><span class="line">            child: Text(e.toString()), <span class="comment">//每个孩子都是list中的String输出</span></span><br><span class="line">            onTap: ()&#123;</span><br><span class="line">              Navigator.pop(context,e); <span class="comment">//点击每个list，路由返回并打印当前数组数值</span></span><br><span class="line">            &#125;,</span><br><span class="line">            )).toList(),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter的表格tablewidget"><a class="markdownIt-Anchor" href="#flutter的表格tablewidget">#</a> Flutter 的表格（Table）Widget：</h2>
<p>flutter 为我们提供了 Table 还有 DataTable 这两个常用 widget 来展示我们的表格</p>
<p><img src="https://brath.cloud/blogImg/image-20220507110417537.png" alt="image-20220507110417537"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;TableDemo&gt; createState() =&gt; _TableDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_TableDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">TableDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; <span class="comment">//初始化表格数据</span></span><br><span class="line">  <span class="built_in">int</span> _sortColumnIndex = <span class="number">0</span>; <span class="comment">//初始化排序索引</span></span><br><span class="line">  <span class="built_in">bool</span> _sortAscending = <span class="keyword">true</span>; <span class="comment">//初始化排序方式 ture为 ASC false为 DESC</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      list.add(&#123; <span class="comment">//循环添加map数据</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;b&quot;</span> * i,</span><br><span class="line">        <span class="string">&quot;gender&quot;</span>: i % <span class="number">1</span> == <span class="number">0</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>, <span class="comment">//取余等于0是男 否则是女</span></span><br><span class="line">        <span class="string">&quot;isSelect&quot;</span>: <span class="keyword">false</span>, <span class="comment">//选中状态默认为不选中</span></span><br><span class="line">        <span class="string">&quot;age&quot;</span>: i.toString() + i.toString(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;表格演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置10边距</span></span><br><span class="line">        <span class="comment">//普通表格</span></span><br><span class="line">      <span class="comment">//   child: Table(</span></span><br><span class="line">      <span class="comment">//   border: TableBorder.all(</span></span><br><span class="line">      <span class="comment">//     color: Colors.green</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; TableRow(</span></span><br><span class="line">      <span class="comment">//     children: [</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;name&quot;]), //展示name列</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;gender&quot;]), //展示性别列</span></span><br><span class="line">      <span class="comment">//     ],</span></span><br><span class="line">      <span class="comment">//   )).toList(),</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//H5表格，常用,可排序，可选中</span></span><br><span class="line">      child: DataTable(</span><br><span class="line">        sortColumnIndex: _sortColumnIndex, <span class="comment">//设置排序索引</span></span><br><span class="line">        sortAscending: _sortAscending, <span class="comment">//设置排序方式</span></span><br><span class="line">        columns: [</span><br><span class="line">          DataColumn(</span><br><span class="line">            onSort: (columnIndex, ascending) &#123; <span class="comment">//DataColumn的排序方法</span></span><br><span class="line">              setState(() &#123;</span><br><span class="line">                _sortAscending = ascending; <span class="comment">//设置ascending（排序方式）为当前的_sortAscending</span></span><br><span class="line">                _sortColumnIndex = columnIndex; <span class="comment">//设置columnIndex（排序索引）为当前的_sortColumnIndex</span></span><br><span class="line">                list.sort((begin,end)&#123; <span class="comment">//对数组排序</span></span><br><span class="line">                  <span class="keyword">if</span>(!ascending)&#123; <span class="comment">//如果为desc的排序方式</span></span><br><span class="line">                    <span class="keyword">var</span> c = begin; <span class="comment">//新建c变量等于 begin</span></span><br><span class="line">                    begin = end; <span class="comment">//begin 赋值到 end</span></span><br><span class="line">                    end = c; <span class="comment">//edn赋值到c ，完成数据转换</span></span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//返回begin的name数据，转换成edn的name数据</span></span><br><span class="line">                  <span class="keyword">return</span> begin[<span class="string">&quot;name&quot;</span>].toString().length.compareTo(end[<span class="string">&quot;name&quot;</span>].toString().length);</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            label: Text(<span class="string">&quot;姓名&quot;</span>) <span class="comment">//展示标题为姓名</span></span><br><span class="line">          ),</span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;性别&quot;</span>) <span class="comment">//展示标题为性别</span></span><br><span class="line">          ), </span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;年龄&quot;</span>) <span class="comment">//展示标题为年龄</span></span><br><span class="line">          ), </span><br><span class="line">        ], <span class="comment">//表头列</span></span><br><span class="line">        rows: list.map((e) =&gt; DataRow(</span><br><span class="line">          selected: e[<span class="string">&quot;isSelect&quot;</span>],</span><br><span class="line">          onSelectChanged: (v)&#123; <span class="comment">//点击数据</span></span><br><span class="line">            setState(() &#123; <span class="comment">//改变状态</span></span><br><span class="line">              <span class="keyword">if</span>(e[<span class="string">&quot;isSelect&quot;</span>] != v)&#123; <span class="comment">//如果当前选中状态不等于传过来的状态（选中|不选中）</span></span><br><span class="line">                e[<span class="string">&quot;isSelect&quot;</span>] = v; <span class="comment">//就把他传过来的状态设置为当前状态</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          cells: [</span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;name&quot;</span>])), <span class="comment">//设置姓名内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;gender&quot;</span>])), <span class="comment">//设置性别内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;age&quot;</span>])), <span class="comment">//设置年龄内容列</span></span><br><span class="line">          ]</span><br><span class="line">        )</span><br><span class="line">        ).toList(),<span class="comment">//数组打印</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter卡片card-widget"><a class="markdownIt-Anchor" href="#flutter卡片card-widget">#</a> Flutter 卡片（Card） Widget：</h2>
<p>flutter 为我们提供了 Card 这个 widget 来展示我们的卡片数据</p>
<p><img src="https://brath.cloud/blogImg/image-20220507111422728.png" alt="image-20220507111422728"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CardDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CardDemo&gt; createState() =&gt; _CardDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CardDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CardDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          list.add(&#123;</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: <span class="number">10</span> + i,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;barth&quot;</span> + i.toString(),</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">   *</span> list构建方法，一定要在 build 方法上面，init方法下面构建，因为代码从上到下执行</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">   <span class="emphasis">*/</span></span></span></span><br><span class="line">  Widget _itemBuilder(BuildContext context,<span class="built_in">int</span> index)&#123;</span><br><span class="line">    <span class="keyword">return</span> Card( <span class="comment">//返回卡片集合</span></span><br><span class="line">      color: Colors.green, <span class="comment">//设置卡片背景色</span></span><br><span class="line">      shadowColor: Colors.grey, <span class="comment">//设置阴影背景色</span></span><br><span class="line">      elevation: <span class="number">5.0</span>, <span class="comment">//设置阴影度</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//于顶部间隔 8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;name&quot;</span>]),<span class="comment">//展示list中的name</span></span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//与上个name间隔8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;age&quot;</span>].toString()), <span class="comment">//展示age内容</span></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">        child: ListView.builder( <span class="comment">//构建listView</span></span><br><span class="line">          itemBuilder: _itemBuilder, <span class="comment">//设置builder方法</span></span><br><span class="line">          itemCount: list.length, <span class="comment">//设置list大小</span></span><br><span class="line">          )</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的listtitlewidget类似于聊天标签"><a class="markdownIt-Anchor" href="#flutter的listtitlewidget类似于聊天标签">#</a> Flutter 的（ListTitle）Widget（类似于聊天标签）：</h2>
<p>Flutter 为我们提供了 ListTile 这个 Widget 来展示标签</p>
<p><img src="https://brath.cloud/blogImg/image-20220507112500603.png" alt="image-20220507112500603"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    backgroundColor: Colors.white,</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">    ),</span><br><span class="line">    body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">      <span class="comment">//listView卡片</span></span><br><span class="line">      child: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile( <span class="comment">//创建listTitle</span></span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">204</span>, <span class="number">184</span>, <span class="number">128</span>), <span class="comment">//标签颜色</span></span><br><span class="line">            leading: Icon(Icons.token_sharp), <span class="comment">//左边图标</span></span><br><span class="line">            title: Text(<span class="string">&quot;Brath&quot;</span>),<span class="comment">//主标题数据</span></span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),<span class="comment">//标题文字颜色</span></span><br><span class="line">            subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 1 &quot;</span>), <span class="comment">//副标题数据</span></span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),<span class="comment">//右边图标</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">8</span>),</span><br><span class="line">          ListTile(</span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">197</span>, <span class="number">124</span>, <span class="number">55</span>),</span><br><span class="line">            leading: Icon(Icons.token_sharp),</span><br><span class="line">            title: Text(<span class="string">&quot;Braht 2&quot;</span>),</span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),</span><br><span class="line">           subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 2 &quot;</span>),</span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),</span><br><span class="line">          ),        </span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    </span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter性能优化"><a class="markdownIt-Anchor" href="#flutter性能优化">#</a> Flutter 性能优化：</h2>
<p>先看图片：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507114818793.png" alt="image-20220507114818793"></p>
<p>​		我们以看到，这张图片由三个容器构成，并且点击黄色容器，其数字会增加，理论上来说代码并没有任何问题。</p>
<p>​		但是，在我们打开 检测工具后，发现，当点击黄色容器时，所有容器都会重新渲染，这就造成了性能的损耗！</p>
<p>​		如何优化？</p>
<p>​		代码演示：</p>
<h5 id="使用一个单独的-countdemo-来对-黄色的容器进行封装这样就可以做到单独渲染"><a class="markdownIt-Anchor" href="#使用一个单独的-countdemo-来对-黄色的容器进行封装这样就可以做到单独渲染">#</a> 使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</h5>
<h5 id="因为-setstate-会重新绘制当前组件column单独封装后他自己就是一个单独组件countdemo"><a class="markdownIt-Anchor" href="#因为-setstate-会重新绘制当前组件column单独封装后他自己就是一个单独组件countdemo">#</a> 因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">performanceDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;performanceDemo&gt; createState() =&gt; _performanceDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_performanceDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">performanceDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;性能优化专题&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.red,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.yellow,</span><br><span class="line">            child: CountDemo(),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="strong">**/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CountDemo&gt; createState() =&gt; _CountDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CountDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CountDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">              child: Text(count.toString()),</span><br><span class="line">              onTap: ()&#123;</span><br><span class="line">                setState(() &#123;</span><br><span class="line">                  count ++;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的全局状态管理-provider-非常重要"><a class="markdownIt-Anchor" href="#flutter的全局状态管理-provider-非常重要">#</a> Flutter 的全局状态管理 Provider 非常重要！</h2>
<h5 id="我们分为四个步骤来学习全局状态管理-provider"><a class="markdownIt-Anchor" href="#我们分为四个步骤来学习全局状态管理-provider">#</a> 我们分为四个步骤来学习全局状态管理 Provider</h5>
<h5 id="1-因为全局状态管理是单独的插件所以我们第一步一定是导包"><a class="markdownIt-Anchor" href="#1-因为全局状态管理是单独的插件所以我们第一步一定是导包">#</a> 1、因为全局状态管理是单独的插件，所以我们第一步一定是导包</h5>
<p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者 Brath 的 flutter 版本 2.0 为例，使用 5.0.0 版本<img src="https://brath.cloud/blogImg/image-20220507123010044.png" alt="image-20220507123010044"></p>
<h5 id="2-下载好依赖后我们在-lib-目录创建文件夹provider-并在文件夹内创建一个-count_providerdart作为我们的第一个全局状态类"><a class="markdownIt-Anchor" href="#2-下载好依赖后我们在-lib-目录创建文件夹provider-并在文件夹内创建一个-count_providerdart作为我们的第一个全局状态类">#</a> 2、下载好依赖后，我们在 lib 目录创建文件夹：Provider 并在文件夹内创建一个 Count_provider.dart，作为我们的第一个全局状态类</h5>
<p><img src="https://brath.cloud/blogImg/image-20220507123111058.png" alt="image-20220507123111058"></p>
<p>​		在类中写入代码：</p>
<h5 id="要点notifylisteners-这个方法的作用就是实现局部刷新"><a class="markdownIt-Anchor" href="#要点notifylisteners-这个方法的作用就是实现局部刷新">#</a> 要点：notifyListeners () 这个方法的作用就是实现局部刷新</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountProvider</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _count = <span class="number">0</span>; <span class="comment">//定义初始数量为0</span></span><br><span class="line">  <span class="keyword">get</span> count =&gt; _count; <span class="comment">//get方法用于外部获取count</span></span><br><span class="line">  <span class="keyword">void</span> add()&#123; <span class="comment">//增加方法</span></span><br><span class="line">    _count ++; <span class="comment">//总数+1</span></span><br><span class="line">    notifyListeners();<span class="comment">//通知监听方法</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-我们写一个新的类用于测试全局状态数据"><a class="markdownIt-Anchor" href="#3-我们写一个新的类用于测试全局状态数据">#</a> 3、我们写一个新的类用于测试全局状态数据</h5>
<p>​		要点：</p>
<p>​			1. 获取全局变量：</p>
<h5 id="通过provider的of方法泛型我们的全局状态类传入上下文对象就可以获取count"><a class="markdownIt-Anchor" href="#通过provider的of方法泛型我们的全局状态类传入上下文对象就可以获取count">#</a> 通过 Provider 的 of 方法（泛型我们的全局状态类）传入上下文对象，就可以获取 count</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Provider.of&lt;CountProvider&gt;(context).count.toString()</span><br></pre></td></tr></table></figure>
<p>​			2. 修改全局变量：</p>
<h5 id="通过上下文对象的read方法泛型我们的全局状态类就可以获取状态类中的方法来操作"><a class="markdownIt-Anchor" href="#通过上下文对象的read方法泛型我们的全局状态类就可以获取状态类中的方法来操作">#</a> 通过上下文对象的 read 方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作</h5>
<h6 id="tips不是从当前页使用方法修改全局变量而是全局变量提供了方法供外部修改"><a class="markdownIt-Anchor" href="#tips不是从当前页使用方法修改全局变量而是全局变量提供了方法供外部修改">#</a> Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！</h6>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.read&lt;CountProvider&gt;().add();</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ProviderDemo&gt; createState() =&gt; _ProviderDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProviderDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProviderDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider全局状态管理&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            Navigator.of(context).pushNamed(<span class="string">&quot;ProviderDemo2&quot;</span>); <span class="comment">//点击跳转到ProviderDemo2页面</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Icon(Icons.add_task_rounded)),</span><br><span class="line">          Text(</span><br><span class="line">          Provider.of&lt;CountProvider&gt;(context).count.toString() <span class="comment">//通过Provider展示count数据</span></span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 第二个页面</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="emphasis">*/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo2</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider2&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">     body: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4、在 main.dart 中修改启动方式</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">//只用 ChangeNotifierProvider 来包裹就只可以调用一个全局类</span></span><br><span class="line">      <span class="comment">// ChangeNotifierProvider(</span></span><br><span class="line">      <span class="comment">//   create: (context)=&gt;CountProvider(),</span></span><br><span class="line">      <span class="comment">//   child: MyApp(),</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//使用 MultiProvider 多状态管理来包裹，即可实现多个状态类</span></span><br><span class="line">      MultiProvider(</span><br><span class="line">          providers: [</span><br><span class="line">            ChangeNotifierProvider(</span><br><span class="line">            create: (context) =&gt; CountProvider(),</span><br><span class="line">          ), </span><br><span class="line">          <span class="comment">//   ChangeNotifierProvider(</span></span><br><span class="line">          <span class="comment">//   create: (context) =&gt; CountProvider2(),</span></span><br><span class="line">          <span class="comment">// ), </span></span><br><span class="line">          ],</span><br><span class="line">    child: MyApp(),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的网络请求dio"><a class="markdownIt-Anchor" href="#flutter的网络请求dio">#</a> Flutter 的网络请求（DIO）</h2>
<h5 id="flutter在-pubdev-为我们提供了许多网络请求组件我们选择用dio来做请求组件"><a class="markdownIt-Anchor" href="#flutter在-pubdev-为我们提供了许多网络请求组件我们选择用dio来做请求组件">#</a> Flutter 在 pub.dev 为我们提供了许多网络请求组件，我们选择用 DIO 来做请求组件</h5>
<p>使用方法：</p>
<h5 id="1-因为网络请求是单独的插件所以我们第一步一定是导包"><a class="markdownIt-Anchor" href="#1-因为网络请求是单独的插件所以我们第一步一定是导包">#</a> 1、因为网络请求是单独的插件，所以我们第一步一定是导包</h5>
<p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者 Brath 的 flutter 版本 2.0 为例，使用 4.0.0 版本<img src="https://brath.cloud/blogImg/image-20220507124040380.png" alt="image-20220507124040380"></p>
<h5 id="2-编写代码"><a class="markdownIt-Anchor" href="#2-编写代码">#</a> 2、编写代码：</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DioDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;DioDemo&gt; createState() =&gt; _DioDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DioDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DioDemo</span>&gt; </span>&#123;</span><br><span class="line">  Dio _dio = Dio(); <span class="comment">//定义DIO</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">//初始化baseUrl基URL</span></span><br><span class="line">    _dio.options.baseUrl = <span class="string">&quot;https://www.XXX.XXX:0000/&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;网络请求演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _<span class="keyword">get</span>,</span><br><span class="line">            child: Text(<span class="string">&quot;getUserinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ]</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _<span class="keyword">get</span>() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="comment">//第一种传参方式：名文传输</span></span><br><span class="line">    <span class="comment">// var res = await _dio.get(&quot;get/getData?id=1&quot;);</span></span><br><span class="line">    <span class="comment">// print(res.toString()); </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//第二种传参方式：queryParameters包装传输</span></span><br><span class="line">    <span class="keyword">var</span> res2 = <span class="keyword">await</span> _dio.<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;get/getData&quot;</span>,</span><br><span class="line">      queryParameters: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//通过Options来添加 headers 请求头</span></span><br><span class="line">      options: Options(</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">&quot;token&quot;</span>: <span class="string">&quot;header-Token&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res2.toString()); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-如果小伙伴们的请求报错有以下原因-参考博客httpsblogcsdnnettxaz6articledetails119168489"><a class="markdownIt-Anchor" href="#3-如果小伙伴们的请求报错有以下原因-参考博客httpsblogcsdnnettxaz6articledetails119168489">#</a> 3、如果小伙伴们的请求报错：有以下原因 （参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/txaz6/article/details/119168489%EF%BC%89">https://blog.csdn.net/txaz6/article/details/119168489）</a></h5>
<h5 id="1请求本地连接ip地址错误"><a class="markdownIt-Anchor" href="#1请求本地连接ip地址错误">#</a> 1. 请求本地连接，ip 地址错误</h5>
<h5 id="2未添加网络请求权限"><a class="markdownIt-Anchor" href="#2未添加网络请求权限">#</a> 2. 未添加网络请求权限</h5>
<h5 id="3请求的地址是http不是https"><a class="markdownIt-Anchor" href="#3请求的地址是http不是https">#</a> 3. 请求的地址是 http，不是 https</h5>
<h5 id="4与服务端的请求参数不同导致无法请求到接口"><a class="markdownIt-Anchor" href="#4与服务端的请求参数不同导致无法请求到接口">#</a> 4. 与服务端的请求参数不同，导致无法请求到接口</h5>
<h3 id=""><a class="markdownIt-Anchor" href="#">#</a> </h3>
<h2 id="flutter的设计模式mvvmmodel-view-viewmodel"><a class="markdownIt-Anchor" href="#flutter的设计模式mvvmmodel-view-viewmodel">#</a> Flutter 的设计模式（MVVM）（Model View ViewModel）</h2>
<h4 id="mvvm就是model-view-viewmodel的简写"><a class="markdownIt-Anchor" href="#mvvm就是model-view-viewmodel的简写">#</a> MVVM 就是 Model View ViewModel 的简写。</h4>
<h5 id="model-处理接口请求数据"><a class="markdownIt-Anchor" href="#model-处理接口请求数据">#</a> Model ：处理接口请求数据</h5>
<h5 id="view-展示页面"><a class="markdownIt-Anchor" href="#view-展示页面">#</a> View ：展示页面</h5>
<h5 id="viewmodel处理业务逻辑相当于model-view的链接层"><a class="markdownIt-Anchor" href="#viewmodel处理业务逻辑相当于model-view的链接层">#</a> ViewModel：处理业务逻辑（相当于 Model、View 的链接层）</h5>
<h6 id="简单流程view通知viewmodel层viewmodel通知model层调用接口viewmodel层接收model的数据响应给view层展示"><a class="markdownIt-Anchor" href="#简单流程view通知viewmodel层viewmodel通知model层调用接口viewmodel层接收model的数据响应给view层展示">#</a> 简单流程：view 通知 viewModel 层，viewModel 通知 Model 层调用接口，viewModel 层接收 Model 的数据，响应给 view 层展示</h6>
<h4 id="我们通过几个步骤来演示-mvvm-模式的请求流程以及他的优缺点"><a class="markdownIt-Anchor" href="#我们通过几个步骤来演示-mvvm-模式的请求流程以及他的优缺点">#</a> 我们通过几个步骤来演示 MVVM 模式的请求流程，以及他的优缺点</h4>
<h5 id="1-首先创建-model-view-viewmodel-三个文件夹image-20220507133147052"><a class="markdownIt-Anchor" href="#1-首先创建-model-view-viewmodel-三个文件夹image-20220507133147052">#</a> 1、首先创建   Model View ViewModel 三个文件夹<img src="https://brath.cloud/blogImg/image-20220507133147052.png" alt="image-20220507133147052"></h5>
<h5 id="2-编写-model-层-请求数据"><a class="markdownIt-Anchor" href="#2-编写-model-层-请求数据">#</a> 2、编写 Model 层 （请求数据）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmModel</span></span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 获取用户信息方法</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始调用userinfo接口&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> Dio().<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;https://xxx:0000/gerUserInfo&quot;</span>,</span><br><span class="line">      queryParameters: &#123; <span class="comment">//设置请求参数</span></span><br><span class="line">        <span class="string">&quot;userId&quot;</span>: id <span class="comment">//id = viewModel传来的ID</span></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;调用完毕&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-编写-view-层-接收-展示数据"><a class="markdownIt-Anchor" href="#3-编写-view-层-接收-展示数据">#</a> 3、编写 View 层 （接收、展示数据）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;MvvmViewDemo&gt; createState() =&gt; _MvvmViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MvvmViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MvvmViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> res;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;View展示页面&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">             <span class="comment">//使用上下文对象的read泛型 ViewModel 类来使用get方法传入 id 获取信息</span></span><br><span class="line">             context.read&lt;MvvmViewModel&gt;().<span class="keyword">get</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: Text(<span class="string">&quot;调用ViewwModel获取用户userinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-编写-viewmodel-层-整合view以及modelview调用viewmodel-viewmodel-调用-model-返回结果给view"><a class="markdownIt-Anchor" href="#4-编写-viewmodel-层-整合view以及modelview调用viewmodel-viewmodel-调用-model-返回结果给view">#</a> 4、编写 ViewModel 层 （整合 view 以及 model：view 调用 ViewModel ，ViewModel 调用 model 返回结果给 view）</h5>
<p>tips：在调用完接口后跳转时，因为 Navigator 需要一个上下文对象，但是我们当前没有上下文对象，所以要在 main 入口定义一个对象：</p>
<p>main.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> GlobalKey&lt;NavigatorState&gt; navigatorkey = GlobalKey&lt;NavigatorState&gt;();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      navigatorKey: navigatorkey, <span class="comment">//在 MaterialApp 中 将 navigatorKey 设置为我们定义的navigatorkey，这也是为什么flutter要求使用 MaterialApp 作为mian根节点的原因</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MvvmViewModel.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line"> MvvmModel _model = MvvmModel(); <span class="comment">//实例化 model 的对象，因为model是做请求的所以我们调用model</span></span><br><span class="line">  <span class="keyword">void</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">//使用model的get方法传入id来获取数据，注意使用 async 和 await 来做异步调用防止接口错误导致程序等待超时</span></span><br><span class="line">    Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line">    <span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line">    <span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line">    <span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line">    <span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br><span class="line">    <span class="comment">//使用mian中的 navigatorkey 的 currentContext 来获取当前的上下文对象，如果是dart2.0以后需要加一个 ！否则会报错，因为参数必须不能为空</span></span><br><span class="line">    Navigator.of(navigatorkey.currentContext!).pushNamed(<span class="string">&quot;DioDemo&quot;</span>); <span class="comment">//我们在调用完接口后跳转到 DioDemo页面</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-dio返回值-response-介绍"><a class="markdownIt-Anchor" href="#5-dio返回值-response-介绍">#</a> 5、DIO 返回值 <strong>Response</strong> 介绍</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line"><span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line"><span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line"><span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line"><span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br></pre></td></tr></table></figure>
<p>本篇至此就结束啦！如果你读到了这里，不妨给我点个赞，我叫 Brath，是一个非科班出身的技术狂！</p>
<p>我的博客 brath.top 欢迎访问！</p>
<p>全文共计  15332 词</p>
<p>本文由 Brath 编写，禁止转载，违法必究‘！</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-06-01T14:51:43.000Z" title="2022-6-1 22:51:43">2022-06-01</time>发表</span><span class="level-item"><time dateTime="2023-04-26T02:22:21.211Z" title="2023-4-26 10:22:21">2023-04-26</time>更新</span><span class="level-item">13 分钟读完 (大约1916个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/06/01/%E3%80%90ChatGPT%E3%80%91%E5%85%85%E6%BB%A1%E5%8F%AF%E8%83%BD%E7%9A%84%E6%96%B0%E4%B8%80%E4%BB%A3%E8%BE%85%E5%8A%A9%E7%BC%96%E7%A8%8B%E7%A5%9E%E5%99%A8%EF%BC%9ACursor/">充满可能的新一代辅助编程神器：Cursor</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="chatgpt充满可能的新一代辅助编程神器cursor"><a class="markdownIt-Anchor" href="#chatgpt充满可能的新一代辅助编程神器cursor">#</a> 【ChatGPT】充满可能的新一代辅助编程神器：Cursor</h1>
<h3 id="随着技术的不断进步人工智能已经逐渐成为了编程领域中不可或缺的一部分-而今天我们要为大家介绍的就是一款基于-gpt4-智能引擎由-openai-开发出来的全新辅助编程神器-cursor"><a class="markdownIt-Anchor" href="#随着技术的不断进步人工智能已经逐渐成为了编程领域中不可或缺的一部分-而今天我们要为大家介绍的就是一款基于-gpt4-智能引擎由-openai-开发出来的全新辅助编程神器-cursor">#</a> 随着技术的不断进步，人工智能已经逐渐成为了编程领域中不可或缺的一部分。而今天我们要为大家介绍的，就是一款基于 GPT4 智能引擎，由 OpenAI 开发出来的全新辅助编程神器 — <strong>Cursor</strong>。</h3>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/dca5b19a0af44e72aa859b914d729ec0~tplv-k3u1fbpfcp-zoom-1.image" alt="图片"></p>
<h3 id="1-cursor-编辑器"><a class="markdownIt-Anchor" href="#1-cursor-编辑器">#</a> <strong>1、Cursor 编辑器</strong></h3>
<p>Cursor 作为一款智能代码编辑器，为程序员们提供了惊人的编程体验。它支持多种常见编程语言，可以轻松的处理各种程序代码，同时还支持多种文件类型和格式化文本，让编辑代码变得更加轻松和舒适。除此之外，Cursor 还拥有许多强大的辅助功能，例如多种主题、多语言语法高亮，在编辑代码时可以根据不同的语言给出不同的颜色提示，让代码阅读变得更加清晰明了。同时，Cursor 还支持快捷键设置、代码折叠、括号匹配、自动缩进等功能，这让程序员们不仅可以在编写代码时更快捷地完成任务，同时也让整个编写过程变得更加高效，透彻地展现出 “智能、便捷、高效” 等的特性。总之，如果你正在寻找一款能够让你的编程体验更加高效、便捷、舒适的工具，那么 Cursor 绝对是一个不错的选择。无论是初学者还是已经经验丰富的程序员们，都可以从中得到惊人的帮助，成为更加专业和出色的编程专家。</p>
<h3 id="2-cursor-下载"><a class="markdownIt-Anchor" href="#2-cursor-下载">#</a> <strong>2、Cursor 下载</strong></h3>
<p>可以直接官方网站下载：<a target="_blank" rel="noopener" href="http://www.cursor.so/">www.cursor.so/</a></p>
<p>我这里也整理了最新 Mac 和 Windows 版本，提供网盘下载：</p>
<p>公众号发送 “Cursor”</p>
<h2 id="3-ide功能介绍"><a class="markdownIt-Anchor" href="#3-ide功能介绍">#</a> <strong>3、IDE 功能介绍</strong></h2>
<p>首先，Cursor 目前是一款独立的应用，你可以理解为是一个更精简版的 sublime 或 vim, 仅仅是一个编辑器，IDE 的功能上也明显弱于 VS Code。不过能够它能够借助 chatgpt 的能力，极大的加速我们的编程效率。</p>
<p><strong>核心功能其实只用到了两个快捷键，一个是 Ctrl+K（⌘+K），一个是 Ctrl+L（⌘+L）</strong></p>
<p>界面上就三个菜单栏：File、Edit、View，然后就是右上角的 4 个图标了。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8b05dcf4354842f99cc9e8f6b082b2de~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<p>点击 setting 按钮，出现一个设置的配置，需要注意的就是 Cursor 编辑器支持 vim、emacs；支持绑定 Copilot；支持安装不同语言的 server。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1260ea24788942caa155604618eb11fb~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<h3 id="generatek"><a class="markdownIt-Anchor" href="#generatek">#</a> Generate(⌘+K)</h3>
<p>在输入框里面输入你需要让它帮助你写什么代码，回车后它就开始自动帮助你写代码了。举个例子，接到个需求要写一个 H5 的登录页面，可以通以快捷键输入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">请用hooks编写一个H5登录界面</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>一个简单的页面架构就大致生成了：</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/334408cbdc6641e19e4e24596f3ab43c~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<h3 id="edit-selectionk"><a class="markdownIt-Anchor" href="#edit-selectionk">#</a> Edit Selection(⌘+K)</h3>
<p>可以选择一段代码，然后针对这段代码提出一些修改要求，比如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录界面添加手机号校验和密码规则校验：</span><br></pre></td></tr></table></figure>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e88a1664fc454606a7822a5d5f039857~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<p><code>根据上下文，模拟接口调用：</code></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1a9e5234d8f5474d8cc27949fd5c4ee6~tplv-k3u1fbpfcp-watermark.image?" alt="image.png"></p>
<h3 id="chatl"><a class="markdownIt-Anchor" href="#chatl">#</a> Chat(⌘+L)</h3>
<p>类似于集成了 chatGPT，你可以在 Cursor 里面使用 chatGPT 去问任何问题，相当于不需要专门去 官网 了或者搜索引擎就可以找到答案。</p>
<p>上面的例子里，在生成代码后，用户还可以按下 Ctrl+L 针对生成的代码进行提问：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a41908066ebb43ebb361b62aed815959~tplv-k3u1fbpfcp-zoom-1.image" alt="图片"></p>
<h3 id="chat-selectionl"><a class="markdownIt-Anchor" href="#chat-selectionl">#</a> Chat Selection(⌘+L)</h3>
<p>可以选择一段代码，然后针对这段代码提出一些问题。例如你最近想了解下 react 中的 diff 算法是怎么实现的，你可以借助 Cursor 找到具体的位置并得到解释：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/898a00e82c174f479c1d1ae0afe1f751~tplv-k3u1fbpfcp-zoom-1.image" alt="图片"></p>
<h2 id="对比github-copilot"><a class="markdownIt-Anchor" href="#对比github-copilot">#</a> 对比 GitHub Copilot</h2>
<ul>
<li>用 Copilot 也可以实现上述功能，但是 Copilot 更侧重于代码的补全，想要实现以上登录页例子，需要一行一行的补全，体验上差了点。</li>
<li>目前而言相比 Copilot，最大的优势当然是免费，目前任处于体验期间，后续正式版应该也会收费。</li>
<li>一个字，快！能处理很长的代码，选中了让给你分析还能定位到关键代码行。</li>
</ul>
<h2 id="缺陷"><a class="markdownIt-Anchor" href="#缺陷">#</a> 缺陷</h2>
<p>可以从 issues 很直观的看到，每天都会新增大量的反馈意见（当然从侧面也反映了 Cursor 当前的火热程度）</p>
<ul>
<li>体验了两天，感觉工作流比较割裂，在 vsCode 和 cursor 之间疯狂切换</li>
<li>比较遗憾的是，Cursor 作者没有添加 vsCode 插件的计划</li>
<li>chatgpt 通病，有字数限制，但可以通过提示继续（这个也能理解，毕竟免费）</li>
<li>官网上说是和 openai 有官方合作，模型用的是 GPT4，但不少用户反馈还是基于 3.5，大家可以自己去测试一下</li>
<li>没有找到修改快捷键的入口，导致一按⌘+Q（代码格式化）就退出系统，很难受</li>
</ul>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结">#</a> 总结</h2>
<p>客观评价，目前这个 IDE 是一个非常初级的产品，功能非常少，现阶段肯定无法取代 vscode，看它后续的发展了，大家更关注的可能还是 GPT4 的功能。过阵子等多模态开放了，比较期待图片视频识别等功能。不过我认为 Cursor 亦或是 ChatGPT，现在依然还是个大黑盒，你不去开箱永远不知道能带给你什么惊喜，就像是你以前只能读懂你认知以内的代码，但是 AIGC 的出现的确能加快影响你的认知。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 <code>Java</code>  程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa31569d28cd4d5baa3a7168d4021f37~tplv-k3u1fbpfcp-zoom-1.image" alt="图片"></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"> 非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/5/">上一页</a></div><div class="pagination-next"><a href="/page/7/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/5/">5</a></li><li><a class="pagination-link is-current" href="/page/6/">6</a></li><li><a class="pagination-link" href="/page/7/">7</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/15/">15</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-17T08:20:40.000Z">2023-05-17</time></p><p class="title"><a href="/2023/05/17/%E3%80%90Java%E3%80%91%E8%AE%B0%E4%B8%80%E6%AC%A1%E7%BA%BF%E4%B8%8A%E6%95%85%E9%9A%9C%EF%BC%9A%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E6%97%A0%E5%93%8D%E5%BA%94/">【Java】记一次线上故障：服务接口无响应</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:04:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91HashMap%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E8%AF%BB/">【Java】HashMap核心原理解读</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-05T01:57:09.000Z">2023-05-05</time></p><p class="title"><a href="/2023/05/05/%E3%80%90IDEA%E3%80%91IDEA%E7%9A%84debug%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E8%AF%A6%E8%A7%A3/">【IDEA】IDEA的debug调试技巧详解</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-05T01:57:09.000Z">2023-05-05</time></p><p class="title"><a href="/2023/05/05/%E3%80%90%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E3%80%91%E7%99%BE%E5%BA%A6%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5%E6%95%99%E7%A8%8B/">【文心一言】百度文心一言大型语言模型接入教程</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-29T11:42:37.000Z">2023-04-29</time></p><p class="title"><a href="/2023/04/29/%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%9123%20%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3%EF%BC%88%E5%85%A823%E7%A7%8D%EF%BC%89/">【设计模式】23 种设计模式详解（全23种）</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">34</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">60</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">44</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">InterviewCoder</p><p class="is-size-6 is-block">面试记官方公众号</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">143</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s/jWs6lLHl5L-atXJhHc4YvA" target="_blank" rel="noopener">关注我</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/me.png" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">技能改变人生，知识改变命运。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·江苏·无锡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">143</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">泠灵(特别呜谢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(码云)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">掘金</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(阿里云)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(腾讯云)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(B站)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><p class="is-size-7">© 2029</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>