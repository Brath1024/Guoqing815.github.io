<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/5/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Flutter文档" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Flutter%E6%96%87%E6%A1%A3/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.704Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Flutter%E6%96%87%E6%A1%A3/">Flutter全网最全学习笔记！</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Flutter学习文档—Author：Brath"><a href="#Flutter学习文档—Author：Brath" class="headerlink" title="Flutter学习文档—Author：Brath"></a>Flutter学习文档—Author：Brath</h1><p><img src="https://brath.cloud/blogImg/4d4dd7f20a6a494282214c730611df0e.webp" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h4 id="欢迎来到-brath-的-CSDN-博客，你也可访问-brath-top-到我的个人博客来进行观看"><a href="#欢迎来到-brath-的-CSDN-博客，你也可访问-brath-top-到我的个人博客来进行观看" class="headerlink" title="欢迎来到 brath 的 CSDN 博客，你也可访问 brath.top 到我的个人博客来进行观看"></a>欢迎来到 brath 的 CSDN 博客，你也可访问 brath.top 到我的个人博客来进行观看</h4><p> 演示demo-APK地址: <a target="_blank" rel="noopener" href="http://124.222.106.122:8080/app-release.zip">http://124.222.106.122:8080/app-release.zip</a></p>
<h5 id="前言：如果你要学习flutter，那么你一定要会dart语言，因为flutter是基于dart来封装的一个-UI-组件包"><a href="#前言：如果你要学习flutter，那么你一定要会dart语言，因为flutter是基于dart来封装的一个-UI-组件包" class="headerlink" title="前言：如果你要学习flutter，那么你一定要会dart语言，因为flutter是基于dart来封装的一个 UI 组件包"></a>前言：如果你要学习flutter，那么你一定要会dart语言，因为flutter是基于dart来封装的一个 UI 组件包</h5><h5 id="本文使用-Typort-书写，禁止转载。"><a href="#本文使用-Typort-书写，禁止转载。" class="headerlink" title="本文使用 Typort 书写，禁止转载。"></a>本文使用 Typort 书写，禁止转载。</h5><p>​		本文仅限有后端有语言基础（C&#x2F;C++&#x2F;C#&#x2F;Java&#x2F;python&#x2F;Golang&#x2F;PHP 都可以），前端 ( JavaScript，Html，CSS)的人来学习。如果0基础，请先学习任意一门后端语言并熟练掌握！</p>
<h2 id="Dart语言学习："><a href="#Dart语言学习：" class="headerlink" title="Dart语言学习："></a>Dart语言学习：</h2><p>​	安装Dart：<a target="_blank" rel="noopener" href="https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe">https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe</a></p>
<p>​	安装好后配置环境变量：DART_HOME  E:\dart\bin  安装路径</p>
<p>​	配置好后cmd输入 dart –version 查看环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dart VM version: 2.3.3-dev.0.0.flutter-b37aa3b036 (Tue Jun 11 13:00:50 2019 +0000) on &quot;windows_x64&quot;</span><br></pre></td></tr></table></figure>

<h3 id="注释："><a href="#注释：" class="headerlink" title="注释："></a>注释：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *多行注释</span><br><span class="line"> *多行注释</span><br><span class="line"> */</span><br><span class="line"> </span><br><span class="line"> /**</span><br><span class="line">  * 文档注释 与Java相同</span><br><span class="line">  */</span><br><span class="line">  </span><br><span class="line"> ///文档注释 dart独有</span><br></pre></td></tr></table></figure>

<h3 id="变量定义："><a href="#变量定义：" class="headerlink" title="变量定义："></a>变量定义：</h3><p>dart语言特点：</p>
<p>​	自动类型转换，var声明的变量可以是任意类型！</p>
<p>dart拥有两种变量定义方式。</p>
<p>指定类型：</p>
<p>String name &#x3D; “brath”;</p>
<p>或者</p>
<p>类型推导</p>
<p>var name &#x3D; “brath”;  &#x2F;&#x2F;推导为任意类型 </p>
<p>final name  &#x3D;  “brath”;  &#x2F;&#x2F;不可修改，定义常量，可以初始化</p>
<p>const name  &#x3D;  “brath”;  &#x2F;&#x2F;不可修改，定义常量，不可以初始化，可以被构造修改</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="number">111111</span>;</span><br><span class="line">  <span class="built_in">String</span> name1 = <span class="string">&quot;brath用类型定义&quot;</span>;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;Hello World! Brath~&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(name.runtimeType);</span><br><span class="line">  <span class="built_in">print</span>(name1.runtimeType);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">console:</span><br><span class="line">Hello World! Brath~</span><br><span class="line"><span class="built_in">int</span></span><br><span class="line"><span class="built_in">String</span></span><br></pre></td></tr></table></figure>



<h4 id="变量拼接："><a href="#变量拼接：" class="headerlink" title="变量拼接："></a>变量拼接：</h4><p>与Java不同，拼接方式用 ${}</p>
<p>如果只拼接普通变量，可以直接 $变量名</p>
<p>如果拼接变量引用方法，必须要${变量名.方法名}</p>
<h4 id="集合类型："><a href="#集合类型：" class="headerlink" title="集合类型："></a>集合类型：</h4><p>list集合： var names &#x3D; [“111”,”222”,”333”];</p>
<p>set集合:  var movies &#x3D; {“111”,”222”,”333”};</p>
<p>map集合：var info &#x3D; {“11”:”1”,”22”:”2”}</p>
<p>默认情况下，dart的所有class都是隐式接口！</p>
<h4 id="Dart函数使用："><a href="#Dart函数使用：" class="headerlink" title="Dart函数使用："></a>Dart函数使用：</h4><figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(List&lt;String&gt; args) &#123;</span><br><span class="line">    print(sum(<span class="number">51</span>, <span class="number">14891</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum(<span class="keyword">int</span> a,<span class="keyword">int</span> b)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数参数："><a href="#函数参数：" class="headerlink" title="函数参数："></a>函数参数：</h4><p>必选参数，不能有默认值，可选参数，可以有默认值</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main()&#123;</span><br><span class="line">    sayHello(<span class="string">&quot;why&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//必选参数：String name 必须传参</span></span><br><span class="line"><span class="keyword">void</span> sayHello(<span class="built_in">String</span> name)&#123;</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：位置可选参数 </span></span><br><span class="line"><span class="keyword">void</span> sayHello2(<span class="built_in">String</span> name, [<span class="built_in">int</span> age, <span class="built_in">String</span> desc])&#123;</span><br><span class="line">    sayHello2(<span class="string">&quot;brath&quot;</span>,<span class="number">12</span>,<span class="string">&quot;waa&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用[]包围的参数可传可不传，但是位置必须对应</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：命名可选参数 重点，多用！</span></span><br><span class="line"><span class="keyword">void</span> sayHello3(<span class="built_in">String</span> name, &#123;<span class="built_in">int</span> age, <span class="built_in">String</span> desc&#125;)&#123;</span><br><span class="line">    sayHello3(<span class="string">&quot;brath&quot;</span>,age: <span class="number">13</span>,desc: <span class="string">&quot;212&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用&#123;&#125;包围的参数可传可不传，但是必须指定参数名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="函数是一等公民"><a href="#函数是一等公民" class="headerlink" title="函数是一等公民:"></a>函数是一等公民:</h4><p>函数可以作为另外一个函数的参数！</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// test(see);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//匿名函数</span></span><br><span class="line">  <span class="comment">// test(()&#123;</span></span><br><span class="line">  <span class="comment">//   print(&quot;匿名&quot;);</span></span><br><span class="line">  <span class="comment">//   return 10;</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  test(() =&gt; <span class="built_in">print</span>(<span class="string">&quot;箭头&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">Function</span> foo)&#123;</span><br><span class="line">    see();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> see()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;see！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test((num1,num2)&#123;</span></span><br><span class="line">    <span class="comment">//   return num1+num2;</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">num</span> = demo();</span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">num</span>(<span class="number">20</span>,<span class="number">12</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将函数声明式显示，利用 typedef 声明一个函数列表，调用 typedef 声明的函数</span></span><br><span class="line"><span class="keyword">typedef</span> Calculate = <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> num1,<span class="built_in">int</span> num2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(Calculate calculate)&#123;</span><br><span class="line">  calculate(<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// void test(int foo(int num1,int num2))&#123;</span></span><br><span class="line"><span class="comment">//   foo(20,30);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">Calculate demo()&#123;</span><br><span class="line">  <span class="keyword">return</span> (num1,num2)&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="赋值运算符："><a href="#赋值运算符：" class="headerlink" title="赋值运算符："></a>赋值运算符：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Flutter中，有诡异的赋值运算符</span><br><span class="line">比如 name ??=&quot;111&quot;;</span><br><span class="line">解释：当原来的变量有值时，不执行</span><br><span class="line">当原来的变量为null时，执行</span><br><span class="line"></span><br><span class="line">或者 var name = name ?? &quot;11&quot;;</span><br><span class="line">解释： 当name不为空时使用name，为空使用后面的变量</span><br></pre></td></tr></table></figure>

<h3 id="级联运算符："><a href="#级联运算符：" class="headerlink" title="级联运算符："></a>级联运算符：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person()</span><br><span class="line">    		..name = <span class="string">&quot;brath&quot;</span></span><br><span class="line">    		..eat();</span><br><span class="line">			..run();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用 .. 连续调用对象中的方法，类似于Java中的链式调用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>()</span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">void</span> eat()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;吃&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="keyword">void</span> run()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;跑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="For循环和Switch循环与JS和Java基本一致"><a href="#For循环和Switch循环与JS和Java基本一致" class="headerlink" title="For循环和Switch循环与JS和Java基本一致"></a>For循环和Switch循环与JS和Java基本一致</h4><h3 id="构造函数："><a href="#构造函数：" class="headerlink" title="构造函数："></a>构造函数：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">	String name;</span><br><span class="line">	int age;</span><br><span class="line">	double height;</span><br><span class="line">	</span><br><span class="line">	//默认构造函数</span><br><span class="line">	Person(this.name.this.age);</span><br><span class="line">	//命名构造函数，指定名字的构造函数</span><br><span class="line">	Person.NameCon(this.name.this.age,this.height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="dynamic："><a href="#dynamic：" class="headerlink" title="dynamic："></a>dynamic：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span>代表任意类型</span><br><span class="line"><span class="built_in">dynamic</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//可以调用</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//不能调用！</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>

<h3 id="初始化列表："><a href="#初始化列表：" class="headerlink" title="初始化列表："></a>初始化列表：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person(<span class="string">&#x27;brath&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//如果传了age参数，就用age参数，如果没传age参数就用10</span></span><br><span class="line">    Person(<span class="keyword">this</span>.name,&#123;<span class="built_in">int</span> age&#125;): <span class="keyword">this</span>.age = age ?? <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="构造函数重定向："><a href="#构造函数重定向：" class="headerlink" title="构造函数重定向："></a>构造函数重定向：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//默认构造函数调用内部构造函数，重定向</span></span><br><span class="line">    Person(<span class="built_in">String</span> name) : <span class="keyword">this</span>._internal(name,<span class="number">0</span>);</span><br><span class="line">    Person._internal(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="工厂构造函数："><a href="#工厂构造函数：" class="headerlink" title="工厂构造函数："></a>工厂构造函数：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相比于普通构造函数来说，工厂构造函数可以手动返回对象</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">String</span> color;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _nameCache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _colorCache = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//工厂构造函数，手动根据条件返回对象</span></span><br><span class="line">    <span class="keyword">factory</span> Person.withName(<span class="built_in">String</span> name)&#123;</span><br><span class="line">        <span class="keyword">if</span>(_nameCache.containsKey(name))&#123;</span><br><span class="line">            <span class="keyword">return</span> _nameCache[name];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _nameCache[name] = Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Getter和Setter："><a href="#Getter和Setter：" class="headerlink" title="Getter和Setter："></a>Getter和Setter：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">   <span class="comment">//直接访问属性</span></span><br><span class="line">    <span class="keyword">final</span> p = Person();</span><br><span class="line">    p.name = <span class="string">&quot;brath&quot;</span>;</span><br><span class="line">    <span class="built_in">print</span>(p.name);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//get，set访问</span></span><br><span class="line">    p.setName(<span class="string">&quot;brath.cloud&quot;</span>);</span><br><span class="line">    <span class="built_in">print</span>(p.getName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">   <span class="keyword">late</span> <span class="built_in">String</span> name;	</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  //get,set方法</span></span><br><span class="line">  <span class="comment">//  void setName(String name) &#123;</span></span><br><span class="line">  <span class="comment">//     this.name = name;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   String get getName&#123;</span></span><br><span class="line">  <span class="comment">//       return name;</span></span><br><span class="line">  <span class="comment">//   &#125; </span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//get,set方法箭头函数</span></span><br><span class="line">   <span class="keyword">void</span> setName(<span class="built_in">String</span> name) =&gt; <span class="keyword">this</span>.name = name;</span><br><span class="line">   <span class="built_in">String</span> <span class="keyword">get</span> getName =&gt; name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐式接口："><a href="#隐式接口：" class="headerlink" title="隐式接口："></a>隐式接口：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart中没有interface关键字，默认所有类都是隐式接口</span></span><br><span class="line"><span class="comment">//当讲将一个类作为接口使用时，实现这个接口的类，必须实现这个接口中的所有方法</span></span><br></pre></td></tr></table></figure>

<h3 id="类的混入："><a href="#类的混入：" class="headerlink" title="类的混入："></a>类的混入：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用<span class="class"><span class="keyword">class</span>声明的类不可以混入其他类</span></span><br><span class="line"><span class="class">要混入其他类，使用 <span class="title">mixin</span> 声明该类，并在混入时用<span class="title">with</span>关键字来连接被混入的类</span></span><br></pre></td></tr></table></figure>

<h3 id="类属性和类方法："><a href="#类属性和类方法：" class="headerlink" title="类属性和类方法："></a>类属性和类方法：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类属性：在类中不用<span class="keyword">static</span>声明的变量，叫做成员变量，不可以被类直接调用</span><br><span class="line">静态属性：在类中用<span class="keyword">static</span>声明的变量，叫做静态属性，类属性，可以被类直接调用</span><br><span class="line">类方法：在类中不用<span class="keyword">static</span>声明的方法，叫做成员方法，不可以被类直接调用</span><br><span class="line">静态方法：在类中用<span class="keyword">static</span>声明的方法，叫做静态方法，类属性，可以被类直接调用</span><br></pre></td></tr></table></figure>

<h3 id="枚举的使用："><a href="#枚举的使用：" class="headerlink" title="枚举的使用："></a>枚举的使用：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">final</span> color = Colors.bule;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span>(color)&#123;</span><br><span class="line">    <span class="keyword">case</span> Colors.bule:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;蓝色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.red:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;红色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.yellow:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;黄色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(Colors.values);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Colors&#123;</span><br><span class="line">  red,</span><br><span class="line">  bule,</span><br><span class="line">  yellow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="库的使用："><a href="#库的使用：" class="headerlink" title="库的使用："></a>库的使用：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Dart中，任何一个dart文件都是一个库，类似于Java中的包</span></span><br><span class="line"><span class="comment">//系统库导入： import &#x27;dart:库名&#x27;;</span></span><br><span class="line"><span class="comment">//自定会库导入： import &#x27;包名/类名&#x27;;</span></span><br><span class="line"><span class="comment">//库别名：当本类引用其他库时，出现方法名冲突，可以用 as 来给导入的库起别名，再用别名引用</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">as</span> timeUtil;</span><br><span class="line"><span class="comment">//默认情况下，导入一个库时，导入的是这个库中所有的内容</span></span><br><span class="line"><span class="comment">//dart提供两个关键字来单独导入方法或者隐藏某个方法：</span></span><br><span class="line"><span class="keyword">show</span>   <span class="keyword">hide</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil; <span class="comment">//只导入timeUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil; <span class="comment">//只有timeUtil不会导入</span></span><br><span class="line"><span class="comment">//多个方法可以用逗号分割：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil, FileUtil; <span class="comment">//只导入timeUtil,FileUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil, FileUtil; <span class="comment">//只有timeUtil,FileUtil不会导入</span></span><br></pre></td></tr></table></figure>

<h3 id="抽取公共库文件："><a href="#抽取公共库文件：" class="headerlink" title="抽取公共库文件："></a>抽取公共库文件：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	以上方法导入库的时候总是会遇到一些问题，比如如果有<span class="number">100</span>个方法，你只想用<span class="number">50</span>个，那么你就要用<span class="number">50</span>个<span class="keyword">show</span>或者<span class="number">50</span>个<span class="keyword">hide</span>，但是dart提供了一种方式，就是抽取库到一个公共类中。</span><br><span class="line">    前面提到过，dart中所有文件都是一个库，那么我们把需要导入的库，全部<span class="keyword">export</span>到一个库中，在引用这个库，就不用担心过多引入了。</span><br><span class="line">        </span><br><span class="line">公共库：</span><br><span class="line">util.dart</span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/TimeUtil&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/FileUtil&#x27;</span></span><br><span class="line"></span><br><span class="line">我的代码：</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;util&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h3 id="使用第三方库："><a href="#使用第三方库：" class="headerlink" title="使用第三方库："></a>使用第三方库：</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart使用第三方库需要创建一个文件 pubspec.yaml</span></span><br></pre></td></tr></table></figure>

<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">库名</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">描述</span></span><br><span class="line"><span class="attr">dependencies:</span> <span class="string">依赖</span></span><br><span class="line">   <span class="attr">http:</span> <span class="string">^0.13.4</span></span><br><span class="line"><span class="string">怎么找库？</span></span><br><span class="line"><span class="string">https://pub.dev/packages/http</span></span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/image-20220402134052159.png" alt="image-20220402134052159"></p>
<p>点击installing</p>
<p>把dependencies内容复制到代码中</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">coderwhy</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">a</span> <span class="string">dart</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">http:</span> <span class="string">^0.12.0+4</span></span><br><span class="line"><span class="attr">environment:</span> </span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">&#x27;&gt;=2.10.0 &lt; 3.0.0&#x27;</span></span><br></pre></td></tr></table></figure>

<p>进入当前类文件夹，终端输入 pub get 就会下载对应库包</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:http/http.dart&#x27;</span> <span class="keyword">as</span> http;</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入第三方库，必须用package来开头</span></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> url = <span class="string">&#x27;https://www.brath.cloud:9000/esn-user-service/user/getUserInfo?id=1&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> url2 = <span class="string">&#x27;https://brath.cloud/image/back.png&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> http.<span class="keyword">get</span>(url);</span><br><span class="line">  <span class="built_in">print</span>(response.body);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="异常处理："><a href="#异常处理：" class="headerlink" title="异常处理："></a>异常处理：</h3><p>​	与Java相同但是有不一样的部分：</p>
<p>​	同步处理</p>
<p>​		在一个方法中用try捕获异常，如果调用方法就捕获不到了！</p>
<p>​	异步处理</p>
<p>​		调用一个异步方法如果发生异常，可以用自异步+await来捕获异常</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> test1();</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"> test1() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">11</span>~/<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="接下来介绍-我们的Flutter！"><a href="#接下来介绍-我们的Flutter！" class="headerlink" title="接下来介绍 我们的Flutter！"></a>接下来介绍 我们的Flutter！</h4><h2 id="最好的跨平台解决方案-Flutter"><a href="#最好的跨平台解决方案-Flutter" class="headerlink" title="最好的跨平台解决方案 Flutter"></a>最好的跨平台解决方案 Flutter</h2><p>架构对比：</p>
<p><img src="https://brath.cloud/blogImg/image-20220401170121598.png" alt="image-20220401170121598"></p>
<h4 id="GUP绘制出图像，放到Buffer缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。"><a href="#GUP绘制出图像，放到Buffer缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。" class="headerlink" title="GUP绘制出图像，放到Buffer缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。	"></a>GUP绘制出图像，放到Buffer缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。	<img src="https://brath.cloud/blogImg/image-20220401171307870.png" alt="image-20220401171307870"></h4><h3 id="引出了一个概念：垂直同步"><a href="#引出了一个概念：垂直同步" class="headerlink" title="引出了一个概念：垂直同步"></a>引出了一个概念：垂直同步</h3><p><img src="https://brath.cloud/blogImg/image-20220401172029367.png" alt="image-20220401172029367"></p>
<p>​	为什么要有垂直同步？</p>
<p>​	来看一个例子：假设我GPU每秒帧率产生60，手机屏幕每秒也是接受60，这时可以正常显示。</p>
<p>​								如果突然每秒帧率提高到120，手机屏幕可能会来不及读取缓存导致画面重叠、撕裂	</p>
<p>​	开启垂直同后，会有两块缓存区域。</p>
<p>​	垂直同步就限制了手机屏幕读取缓存和GPU产生的速度，开启垂直同步后，GPU将画面写入到第一个缓存中，第一个缓存会复制内容（地址交换）到第二个缓存中，当两份缓存都存在这一帧，就会发送一个VSync的信号，告诉GPU可以绘制下一张图，然后手机屏幕来显示第二个缓存中的内容，这样就可以避免图像撕裂。</p>
<h5 id="一个简单的flutter结构："><a href="#一个简单的flutter结构：" class="headerlink" title="一个简单的flutter结构："></a>一个简单的flutter结构：</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mian() =&gt; runApp(MyApp());</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//APP主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: BrathScaffoldPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//页面主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathScaffoldPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      <span class="comment">//appbar：顶部标签主体</span></span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;第一个Fullter程序&quot;</span>,style: TextStyle(fontSize: <span class="number">20</span>),),</span><br><span class="line">      ),</span><br><span class="line">      body: BrathBodyPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//内容主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathBodyPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(<span class="string">&quot;Hello Fullter&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="开始学习："><a href="#开始学习：" class="headerlink" title="开始学习："></a>开始学习：</h5><h4 id="下载Flutter-SDK"><a href="#下载Flutter-SDK" class="headerlink" title="下载Flutter SDK"></a>下载Flutter SDK</h4><p>配置Flutter的第一步就是下载Flutter SDK，然后进行安装，上面两个地址都有给SDK下载地址，这里的问题是有的SDK安装包有时会报 没有.git文件的错误，所以最稳妥的方法是通过git clone命令安装<br>在安装目录下面执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b stable https://github.com/flutter/flutter.git</span><br></pre></td></tr></table></figure>

<p> <img src="https://brath.cloud/blogImg/202202090714320308.png" alt="img"></p>
<p>安装完成之后，可以在安装根目录，找的 flutter_console.bat 文件，双击运行</p>
<p><img src="https://brath.cloud/blogImg/202202090714323989.png" alt="img"></p>
<h1 id="配置Flutter运行环境变量"><a href="#配置Flutter运行环境变量" class="headerlink" title="配置Flutter运行环境变量"></a>配置Flutter运行环境变量</h1><p>在用户变量里面编辑或者添加 Path 条目，把Flutter的bin目录路径添加在里面</p>
<p><img src="https://brath.cloud/blogImg/202202090714326036.png" alt="img"></p>
<h1 id="运行Flutter"><a href="#运行Flutter" class="headerlink" title="运行Flutter"></a>运行Flutter</h1><p>在命令行运行 flutter doctor，它会下载它自己的依赖项并自行编译，一般情况是会报错提示，多半是Android SDK找不到什么的，如果出错了，就按照错误信息网上查一下就解决了。<br>我的已经处理完成的</p>
<p><img src="https://brath.cloud/blogImg/202202090714328081.png" alt="img"></p>
<h1 id="编辑器设置"><a href="#编辑器设置" class="headerlink" title="编辑器设置"></a>编辑器设置</h1><p>我用的Android Studio，上面连接里面有不同系统和编辑器的流程，详情可以前往查看</p>
<p>Android Studio的开发环境就不说了，需要的可以自行百度。Android Studio配置Flutter开发主要是 Flutter 和 Dart两个插件</p>
<p><img src="https://brath.cloud/blogImg/202202090714332173.png" alt="img"></p>
<p>File – Settings – Plugins – Marketplace 然后在搜索里面搜索Flutter和Dart安装就可以了。<br>安装完插件，重启一下 Android Studio 基本就配置完成了，可以新建Flutter项目了。</p>
<h1 id="新建Flutter项目"><a href="#新建Flutter项目" class="headerlink" title="新建Flutter项目"></a>新建Flutter项目</h1><p>File – New – New Flutter Project</p>
<p><img src="https://brath.cloud/blogImg/202202090714334854.png" alt="img"></p>
<p><img src="https://brath.cloud/blogImg/202202090714337229.png" alt="img"></p>
<p>选择Flutter Application</p>
<p>然后到这个最后一步的时候，会有一点小问题</p>
<p><img src="https://brath.cloud/blogImg/202202090714339364.png" alt="img"></p>
<p>Flutter SDK path 这一栏第一次默认是空的，需要手动选择，选择我们最开始下载的Flutter SDK，选择根目录，就可以了</p>
<h1 id="至此Flutter的开发环境安装完毕！"><a href="#至此Flutter的开发环境安装完毕！" class="headerlink" title="至此Flutter的开发环境安装完毕！"></a>至此Flutter的开发环境安装完毕！</h1><h4 id="现在开始学习Flutter的基础组件，以及进阶理论！"><a href="#现在开始学习Flutter的基础组件，以及进阶理论！" class="headerlink" title="现在开始学习Flutter的基础组件，以及进阶理论！"></a>现在开始学习Flutter的基础组件，以及进阶理论！</h4><h1 id="flutter学习笔记-auther：Brath"><a href="#flutter学习笔记-auther：Brath" class="headerlink" title="flutter学习笔记  auther：Brath"></a>flutter学习笔记  auther：Brath</h1><h2 id="所有的重点都在代码的注释中标注！"><a href="#所有的重点都在代码的注释中标注！" class="headerlink" title="所有的重点都在代码的注释中标注！"></a>所有的重点都在代码的注释中标注！</h2><h3 id="创建项目："><a href="#创建项目：" class="headerlink" title="创建项目："></a>创建项目：</h3><p>​		到想存储项目的文件路径，打开CMD，输入 flutter create 项目名称即可</p>
<p><img src="https://brath.cloud/blogImg/image-20220506084830778.png" alt="image-20220506084830778"></p>
<p>​		vscode下载好插件，dart和flutter打开对应flutter文件，即可开始编写</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//导包 material</span></span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  runApp(MyApp()); <span class="comment">//运行app</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//继承无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp( <span class="comment">//运行根节点MaterialApp</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Widget：flutter模块-x2F-组件"><a href="#Widget：flutter模块-x2F-组件" class="headerlink" title="Widget：flutter模块&#x2F;组件"></a>Widget：flutter模块&#x2F;组件</h2><h4 id="特性："><a href="#特性：" class="headerlink" title="特性："></a>特性：</h4><h5 id="widget分为有状态（StatefulWidget）和无状态的-StatelessWidget"><a href="#widget分为有状态（StatefulWidget）和无状态的-StatelessWidget" class="headerlink" title="widget分为有状态（StatefulWidget）和无状态的 (StatelessWidget)"></a>widget分为有状态（StatefulWidget）和无状态的 (StatelessWidget)</h5><p>无状态的widget是静态页面</p>
<p>有状态的widget是动态页面</p>
<h4 id="要点："><a href="#要点：" class="headerlink" title="要点："></a>要点：</h4><h5 id="tips：flutter的main入口调用第一个widget需要该widget使用-MaterialApp-作为首个widget"><a href="#tips：flutter的main入口调用第一个widget需要该widget使用-MaterialApp-作为首个widget" class="headerlink" title="tips：flutter的main入口调用第一个widget需要该widget使用 MaterialApp()作为首个widget"></a>tips：flutter的main入口调用第一个widget需要该widget使用 MaterialApp()作为首个widget</h5><p>因为 MaterialApp 包含了路由主题等等组件，flutter规定只能用MaterialApp当作根节点</p>
<h3 id="使用MaterialApp的home属性来指定页面"><a href="#使用MaterialApp的home属性来指定页面" class="headerlink" title="使用MaterialApp的home属性来指定页面"></a>使用MaterialApp的home属性来指定页面</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: HomePage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Container容器（相当于DIV）-widget-：下面有更详细的介绍"><a href="#Container容器（相当于DIV）-widget-：下面有更详细的介绍" class="headerlink" title="Container容器（相当于DIV）(widget)：下面有更详细的介绍"></a>Container容器（相当于DIV）(widget)：下面有更详细的介绍</h2><p>均为可选参数</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Container(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">    <span class="keyword">this</span>.padding, <span class="comment">//边距</span></span><br><span class="line">    <span class="keyword">this</span>.color, <span class="comment">//颜色 使用 Clolrs枚举</span></span><br><span class="line">    <span class="keyword">this</span>.decoration, <span class="comment">//描述</span></span><br><span class="line">    <span class="keyword">this</span>.foregroundDecoration,</span><br><span class="line">    <span class="built_in">double?</span> width, <span class="comment">//宽度 使用double 常量</span></span><br><span class="line">    <span class="built_in">double?</span> height, <span class="comment">//高度 使用double 常量</span></span><br><span class="line">    BoxConstraints? constraints,</span><br><span class="line">    <span class="keyword">this</span>.margin, <span class="comment">//margin</span></span><br><span class="line">    <span class="keyword">this</span>.transform,</span><br><span class="line">    <span class="keyword">this</span>.transformAlignment,</span><br><span class="line">    <span class="keyword">this</span>.child, <span class="comment">//子组件</span></span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(margin == <span class="keyword">null</span> || margin.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(padding == <span class="keyword">null</span> || padding.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(decoration == <span class="keyword">null</span> || decoration.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(constraints == <span class="keyword">null</span> || constraints.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(clipBehavior != <span class="keyword">null</span>),</span><br><span class="line">       <span class="keyword">assert</span>(decoration != <span class="keyword">null</span> || clipBehavior == Clip.none),</span><br><span class="line">       <span class="keyword">assert</span>(color == <span class="keyword">null</span> || decoration == <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;Cannot provide both a color and a decoration\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;To provide both, use &quot;decoration: BoxDecoration(color: color)&quot;.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       constraints =</span><br><span class="line">        (width != <span class="keyword">null</span> || height != <span class="keyword">null</span>)</span><br><span class="line">          ? constraints?.tighten(width: width, height: height)</span><br><span class="line">            ?? BoxConstraints.tightFor(width: width, height: height)</span><br><span class="line">          : constraints,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>



<h2 id="Text文本组件-widget-："><a href="#Text文本组件-widget-：" class="headerlink" title="Text文本组件(widget)："></a>Text文本组件(widget)：</h2><p>Text默认传一个文本：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span></span><br><span class="line"><span class="class">  @<span class="title">override</span></span></span><br><span class="line"><span class="class">  <span class="title">Widget</span> <span class="title">build</span>(<span class="title">BuildContext</span> <span class="title">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Container( <span class="comment">//容器</span></span><br><span class="line">      width: <span class="built_in">double</span>.infinity, <span class="comment">//宽度 使用double枚举</span></span><br><span class="line">      color: Colors.blue, <span class="comment">//颜色 使用Colors枚举</span></span><br><span class="line">      child: Text( <span class="comment">//容器的子组件 文本组件 </span></span><br><span class="line">      <span class="string">&quot;文本&quot;</span> * <span class="number">20</span>, <span class="comment">//输入文本 20个</span></span><br><span class="line">      maxLines: <span class="number">1</span>, <span class="comment">//最大行数 1</span></span><br><span class="line">      textDirection: TextDirection.ltr, <span class="comment">//从左到右</span></span><br><span class="line">      textAlign: TextAlign.center, <span class="comment">//剧中</span></span><br><span class="line">      style: TextStyle( <span class="comment">//设置文本样式</span></span><br><span class="line">        fontSize: <span class="number">30</span>, <span class="comment">//字体大小 30</span></span><br><span class="line">        color: Colors.teal <span class="comment">//字体颜色</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Text(</span><br><span class="line">    <span class="comment">//必传参数</span></span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">this</span>.data, </span><br><span class="line">    <span class="comment">//可选参数</span></span><br><span class="line">    &#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.style, <span class="comment">//文本风格，使用 TextStyle方法来指定</span></span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">    <span class="keyword">this</span>.textAlign, <span class="comment">//设置文本居中 靠左 靠右，使用 TextAlign枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textDirection, <span class="comment">//文本排列：左到右 右到左 使用 TextDirection枚举</span></span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="keyword">this</span>.softWrap,</span><br><span class="line">    <span class="keyword">this</span>.overflow, <span class="comment">//溢出后按照什么风格显示，使用TextOverflow的枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor,</span><br><span class="line">    <span class="keyword">this</span>.maxLines,  <span class="comment">//最大行数</span></span><br><span class="line">    <span class="keyword">this</span>.semanticsLabel,</span><br><span class="line">    <span class="keyword">this</span>.textWidthBasis,</span><br><span class="line">    <span class="keyword">this</span>.textHeightBehavior,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(</span><br><span class="line">         data != <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;A non-null String must be provided to a Text widget.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       textSpan = <span class="keyword">null</span>,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>



<h2 id="Button按钮组件-widget-："><a href="#Button按钮组件-widget-：" class="headerlink" title="Button按钮组件(widget)："></a>Button按钮组件(widget)：</h2><p>flutter中有几种常用按钮组件：</p>
<p>在 2.0 版本后遗弃按钮 RaisedButton改为ElevatedButton ，  FlatButton改为TextButton</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton 已遗弃</span><br><span class="line">FlatButton 已遗弃</span><br></pre></td></tr></table></figure>

<h4 id="ElevatedButton：漂浮按钮-x2F-升降按钮"><a href="#ElevatedButton：漂浮按钮-x2F-升降按钮" class="headerlink" title="ElevatedButton：漂浮按钮&#x2F;升降按钮"></a>ElevatedButton：漂浮按钮&#x2F;升降按钮</h4><p><img src="https://brath.cloud/blogImg/image-20220506094017377.png" alt="image-20220506094017377"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed:()&#123;</span><br><span class="line">            <span class="comment">//点击事件，如果为null未定义的话，按钮无法点击</span></span><br><span class="line">          &#125;, </span><br><span class="line">        child: Text( <span class="comment">//这里是按钮文本，可以是图片可以是文本</span></span><br><span class="line">          <span class="string">&quot;漂浮按钮&quot;</span></span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="TextButton：扁平按钮-x2F-文本按钮"><a href="#TextButton：扁平按钮-x2F-文本按钮" class="headerlink" title="TextButton：扁平按钮&#x2F;文本按钮"></a>TextButton：扁平按钮&#x2F;文本按钮</h4><p><img src="https://brath.cloud/blogImg/image-20220506094026219.png" alt="image-20220506094026219"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//点击事件</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Text(</span><br><span class="line">            <span class="string">&quot;扁平按钮&quot;</span></span><br><span class="line">       ))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="TextButton-icon：带图标的扁平按钮-x2F-文本按钮"><a href="#TextButton-icon：带图标的扁平按钮-x2F-文本按钮" class="headerlink" title="TextButton.icon：带图标的扁平按钮&#x2F;文本按钮"></a>TextButton.icon：带图标的扁平按钮&#x2F;文本按钮</h4><p><img src="https://brath.cloud/blogImg/image-20220506094049981.png" alt="image-20220506094049981"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton.icon(onPressed: ()&#123;&#125;,</span><br><span class="line">         icon: Icon(Icons.add), <span class="comment">//使用Icons枚举选择图标</span></span><br><span class="line">         label: Text(<span class="string">&quot;图标按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="OutlinedButton-icon：无阴影按钮"><a href="#OutlinedButton-icon：无阴影按钮" class="headerlink" title="OutlinedButton.icon：无阴影按钮"></a>OutlinedButton.icon：无阴影按钮</h4><p><img src="https://brath.cloud/blogImg/image-20220506094056747.png" alt="image-20220506094056747"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         OutlinedButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         child: Text(<span class="string">&quot;无阴影按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="OutlinedButton-icon：图标按钮"><a href="#OutlinedButton-icon：图标按钮" class="headerlink" title="OutlinedButton.icon：图标按钮"></a>OutlinedButton.icon：图标按钮</h4><p><img src="https://brath.cloud/blogImg/image-20220506094100990.png" alt="image-20220506094100990"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         IconButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         icon: Icon(Icons.home)) <span class="comment">//图标用 Icons 枚举选择</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Image图片、图标组件-widget-："><a href="#Image图片、图标组件-widget-：" class="headerlink" title="Image图片、图标组件(widget)："></a>Image图片、图标组件(widget)：</h2><p>flutter提供了四种图片加载方式：<img src="https://brath.cloud/blogImg/image-20220506095911749.png" alt="image-20220506095911749"></p>
<p>1、Image.network   &#x2F;&#x2F;从网络获取图片</p>
<p>2、Image.asset   &#x2F;&#x2F;从项目本地获取图片</p>
<p>3、Image.file   &#x2F;&#x2F;从文件路径获取图片</p>
<p>4、Image.memory  &#x2F;&#x2F;从手机内存，存储中获取图片</p>
<p>使用 asset 需要设置 pubspec.yaml 中的 assets <img src="https://brath.cloud/blogImg/image-20220506100017264.png" alt="image-20220506100017264"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageIconDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Icon(Icons.home), <span class="comment">//普通图标</span></span><br><span class="line">        IconButton(onPressed: ()&#123;&#125;, icon: Icon(Icons.home)), <span class="comment">//带点击事件的图标</span></span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="built_in">double</span>.infinity, <span class="comment">//最大宽度</span></span><br><span class="line">          child: Image.network( <span class="comment">//从网络获取图片</span></span><br><span class="line">          <span class="string">&quot;https://brath.cloud/love/GCLK6888.JPG?versionId=CAEQNxiBgID8yJjchBgiIDUzZGFiMWU3YWVlNDQ4YmJhMzMwNDY0Mzk1OGJiOTU1&quot;</span>,</span><br><span class="line">          fit: BoxFit.fill, <span class="comment">//图片填充模式</span></span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Image.asset(<span class="string">&quot;images/image.jpeg&quot;</span>), <span class="comment">//项目加载图片</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Switch开关，CheckBox复选框组件-widget-："><a href="#Switch开关，CheckBox复选框组件-widget-：" class="headerlink" title="Switch开关，CheckBox复选框组件(widget)："></a>Switch开关，CheckBox复选框组件(widget)：</h2><p>因为开关和复选框是动态的，有状态的，所以我们要使用 StatefulWidget 来做他们的widget</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tips：在 onChanged 使用 setState 来改变状态</span></span><br></pre></td></tr></table></figure>

<p>Check 复选框<img src="https://brath.cloud/blogImg/image-20220506100951883.png"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _check = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Checkbox(</span><br><span class="line">          value: _check, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _check = res!;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>Switch开关<img src="https://brath.cloud/blogImg/image-20220506101002490.png" alt="image-20220506101002490"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _<span class="keyword">switch</span> = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Switch(</span><br><span class="line">          value: _<span class="keyword">switch</span>, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">             setState(() &#123;</span><br><span class="line">                _<span class="keyword">switch</span> = res;</span><br><span class="line">             &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Progress-进度条，指示器组件-widget-："><a href="#Progress-进度条，指示器组件-widget-：" class="headerlink" title="Progress 进度条，指示器组件(widget)："></a>Progress 进度条，指示器组件(widget)：</h2><p>flutter为我们提供了几种进度条和指示器样式</p>
<p>1、LinearProgressIndicator  线性指示器 <img src="https://brath.cloud/blogImg/image-20220506102352707.png" alt="image-20220506102352707"></p>
<p>2、CircularProgressIndicator  圆圈指示器 <img src="https://brath.cloud/blogImg/image-20220506102400475.png" alt="image-20220506102400475"></p>
<p>3、CupertinoActivityIndicator  IOS风格的进度指示器 <img src="https://brath.cloud/blogImg/image-20220506102404297.png" alt="image-20220506102404297"></p>
<p>可以设置的参数：</p>
<p>value：可以设置 0 - 1，来表示当前进度</p>
<p>valueColor：使用 AlwaysStoppedAnimation(Colors.red)  动画包裹颜色设置进度指示器的颜色</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProgressDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Padding(</span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          LinearProgressIndicator( <span class="comment">//线性指示器</span></span><br><span class="line">            value: <span class="number">.5</span>, <span class="comment">//进度 从0-1， .5就是一半</span></span><br><span class="line">            valueColor: AlwaysStoppedAnimation(Colors.red), <span class="comment">//设置颜色要用动画包裹</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>), <span class="comment">//设置间隔 16 </span></span><br><span class="line">          Container( <span class="comment">//设置容器</span></span><br><span class="line">            height: <span class="number">100</span>, <span class="comment">//高 100</span></span><br><span class="line">            width: <span class="number">100</span>, <span class="comment">//宽 100</span></span><br><span class="line">            child: CircularProgressIndicator( <span class="comment">//圆圈指示器</span></span><br><span class="line">              <span class="comment">// value: .8,</span></span><br><span class="line">              valueColor: AlwaysStoppedAnimation(Colors.red),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>),</span><br><span class="line">          CupertinoActivityIndicator(), <span class="comment">//IOS风格的进度指示器</span></span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Click-点击组件-widget-："><a href="#Click-点击组件-widget-：" class="headerlink" title="Click 点击组件(widget)："></a>Click 点击组件(widget)：</h2><p>flutter为我们提供了 GestureDetector 手势检测器<img src="https://brath.cloud/blogImg/image-20220506102924441.png" alt="image-20220506102924441"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClickDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector( <span class="comment">//创建手势检测器</span></span><br><span class="line">      onTap: ()&#123; <span class="comment">//单击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;点击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      onDoubleTap: ()&#123; <span class="comment">//双击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;双击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">&quot;点击组件&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Input-输入框组件-widget-："><a href="#Input-输入框组件-widget-：" class="headerlink" title="Input 输入框组件(widget)："></a>Input 输入框组件(widget)：</h2><p>flutter为我们提供了两种常用输入组件：</p>
<p>TextField：默认典型输入框，没有 validator 验证</p>
<p>TextFromField：特点是可以带参数校验 validator 一般用于登录注册表单验证</p>
<h4 id="TextField-源码"><a href="#TextField-源码" class="headerlink" title="TextField 源码"></a>TextField 源码</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextField(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller, <span class="comment">//控制器</span></span><br><span class="line">   <span class="keyword">this</span>.focusNode, <span class="comment">//焦点</span></span><br><span class="line">   <span class="keyword">this</span>.decoration = <span class="keyword">const</span> InputDecoration(), <span class="comment">//装饰器</span></span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   <span class="keyword">this</span>.textInputAction, <span class="comment">//输入动作 键盘右下角（完成，搜索，下一行）</span></span><br><span class="line">   <span class="keyword">this</span>.textCapitalization = TextCapitalization.none,</span><br><span class="line">   <span class="keyword">this</span>.style, <span class="comment">//样式</span></span><br><span class="line">   <span class="keyword">this</span>.strutStyle,</span><br><span class="line">   <span class="keyword">this</span>.textAlign = TextAlign.start, <span class="comment">//文本格式 默认从左开始</span></span><br><span class="line">   <span class="keyword">this</span>.textAlignVertical,</span><br><span class="line">   <span class="keyword">this</span>.textDirection, <span class="comment">//文本方向</span></span><br><span class="line">   <span class="keyword">this</span>.readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="keyword">this</span>.showCursor,</span><br><span class="line">   <span class="keyword">this</span>.autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="keyword">this</span>.enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLines = <span class="number">1</span>, <span class="comment">//最大行数</span></span><br><span class="line">   <span class="keyword">this</span>.minLines, <span class="comment">//最小行数</span></span><br><span class="line">   <span class="keyword">this</span>.expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLength, <span class="comment">//最大字数</span></span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforcement,</span><br><span class="line">   <span class="keyword">this</span>.onChanged, <span class="comment">//当值改变</span></span><br><span class="line">   <span class="keyword">this</span>.onEditingComplete,</span><br><span class="line">   <span class="keyword">this</span>.onSubmitted,</span><br><span class="line">   <span class="keyword">this</span>.onAppPrivateCommand,</span><br><span class="line">   <span class="keyword">this</span>.inputFormatters,</span><br><span class="line">   <span class="keyword">this</span>.enabled,</span><br><span class="line">   <span class="keyword">this</span>.cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="keyword">this</span>.cursorHeight,</span><br><span class="line">   <span class="keyword">this</span>.cursorRadius,</span><br><span class="line">   <span class="keyword">this</span>.cursorColor,</span><br><span class="line">   <span class="keyword">this</span>.selectionHeightStyle = ui.BoxHeightStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.selectionWidthStyle = ui.BoxWidthStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.keyboardAppearance,</span><br><span class="line">   <span class="keyword">this</span>.scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="keyword">this</span>.dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">   <span class="keyword">this</span>.enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.selectionControls,</span><br><span class="line">   <span class="keyword">this</span>.onTap,</span><br><span class="line">   <span class="keyword">this</span>.mouseCursor,</span><br><span class="line">   <span class="keyword">this</span>.buildCounter,</span><br><span class="line">   <span class="keyword">this</span>.scrollController,</span><br><span class="line">   <span class="keyword">this</span>.scrollPhysics,</span><br><span class="line">   <span class="keyword">this</span>.autofillHints = <span class="keyword">const</span> &lt;<span class="built_in">String</span>&gt;[],</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.hardEdge,</span><br><span class="line">   <span class="keyword">this</span>.restorationId,</span><br><span class="line">   <span class="keyword">this</span>.enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h4 id="TextFromField-源码"><a href="#TextFromField-源码" class="headerlink" title="TextFromField 源码"></a>TextFromField 源码</h4><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller,</span><br><span class="line">   <span class="built_in">String?</span> initialValue,</span><br><span class="line">   FocusNode? focusNode,</span><br><span class="line">   InputDecoration? decoration = <span class="keyword">const</span> InputDecoration(),</span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   TextCapitalization textCapitalization = TextCapitalization.none,</span><br><span class="line">   TextInputAction? textInputAction,</span><br><span class="line">   TextStyle? style,</span><br><span class="line">   StrutStyle? strutStyle,</span><br><span class="line">   TextDirection? textDirection,</span><br><span class="line">   TextAlign textAlign = TextAlign.start,</span><br><span class="line">   TextAlignVertical? textAlignVertical,</span><br><span class="line">   <span class="built_in">bool</span> autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="built_in">bool?</span> showCursor,</span><br><span class="line">   <span class="built_in">String</span> obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="built_in">bool</span> obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="built_in">bool</span> enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="built_in">bool</span> maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   MaxLengthEnforcement? maxLengthEnforcement,</span><br><span class="line">   <span class="built_in">int?</span> maxLines = <span class="number">1</span>,</span><br><span class="line">   <span class="built_in">int?</span> minLines,</span><br><span class="line">   <span class="built_in">bool</span> expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">int?</span> maxLength,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onChanged,</span><br><span class="line">   GestureTapCallback? onTap,</span><br><span class="line">   VoidCallback? onEditingComplete,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onFieldSubmitted,</span><br><span class="line">   FormFieldSetter&lt;<span class="built_in">String</span>&gt;? onSaved,</span><br><span class="line">   FormFieldValidator&lt;<span class="built_in">String</span>&gt;? validator, <span class="comment">//与TextFiled不同的点，增加了 validator验证方法</span></span><br><span class="line">   <span class="built_in">List</span>&lt;TextInputFormatter&gt;? inputFormatters,</span><br><span class="line">   <span class="built_in">bool?</span> enabled,</span><br><span class="line">   <span class="built_in">double</span> cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="built_in">double?</span> cursorHeight,</span><br><span class="line">   Radius? cursorRadius,</span><br><span class="line">   Color? cursorColor,</span><br><span class="line">   Brightness? keyboardAppearance,</span><br><span class="line">   EdgeInsets scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="built_in">bool</span> enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   TextSelectionControls? selectionControls,</span><br><span class="line">   InputCounterWidgetBuilder? buildCounter,</span><br><span class="line">   ScrollPhysics? scrollPhysics,</span><br><span class="line">   <span class="built_in">Iterable</span>&lt;<span class="built_in">String</span>&gt;? autofillHints,</span><br><span class="line">   AutovalidateMode? autovalidateMode,</span><br><span class="line">   ScrollController? scrollController,</span><br><span class="line">   <span class="built_in">String?</span> restorationId,</span><br><span class="line">   <span class="built_in">bool</span> enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>



<p>简易登录</p>
<p><img src="https://brath.cloud/blogImg/image-20220506130535502.png" alt="image-20220506130535502"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InputDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态 widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;InputDemo&gt; createState() =&gt; _InputDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputDemo</span>&gt; </span>&#123;</span><br><span class="line">  GlobalKey _key = GlobalKey&lt;FormState&gt;(); <span class="comment">//key的泛型是表单状态，这样就可以通过key提交</span></span><br><span class="line">  TextEditingController _rootController = TextEditingController();<span class="comment">//账号控制器</span></span><br><span class="line">  TextEditingController _passController = TextEditingController();<span class="comment">//密码控制器</span></span><br><span class="line">  FocusNode _r = FocusNode(); <span class="comment">//账号焦点</span></span><br><span class="line">  FocusNode _p = FocusNode(); <span class="comment">//密码焦点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//当退出时销毁controller，否则占用内存</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();  <span class="comment">//销毁父类</span></span><br><span class="line">    _rootController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _passController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _r.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _p.dispose(); <span class="comment">//销毁</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Form( <span class="comment">//构建表单</span></span><br><span class="line">      key: _key, <span class="comment">//构建表单提交key</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">        TextFormField( <span class="comment">//构建表单输入框</span></span><br><span class="line">          autofocus: <span class="keyword">true</span>, <span class="comment">//默认焦点聚集</span></span><br><span class="line">          focusNode: _r, <span class="comment">//账号焦点</span></span><br><span class="line">          controller: _rootController, <span class="comment">//引用账号控制器</span></span><br><span class="line">          decoration: InputDecoration( <span class="comment">//输入框描述</span></span><br><span class="line">            prefixIcon: Icon(Icons.add), <span class="comment">//输入框图标</span></span><br><span class="line">            labelText: <span class="string">&quot;账号&quot;</span>, <span class="comment">//输入框标题</span></span><br><span class="line">            hintText: <span class="string">&quot;默认文字&quot;</span> <span class="comment">//输入框默认value</span></span><br><span class="line">          ),</span><br><span class="line">          validator: (v)&#123; <span class="comment">//只有使用 TextFormField 才可以用验证 validator 不用验证使用 TextField</span></span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.isEmpty)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;账号不能为空!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.next, <span class="comment">//回车后跳转下个输入框</span></span><br><span class="line">          onFieldSubmitted: (v)&#123; <span class="comment">//监听回车键</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;brath&quot;</span>);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">8</span>), <span class="comment">//设置间隔高度</span></span><br><span class="line">        TextFormField(</span><br><span class="line">          focusNode: _p, <span class="comment">//密码焦点</span></span><br><span class="line">          controller: _passController,</span><br><span class="line">          decoration: InputDecoration(</span><br><span class="line">            prefixIcon: Icon(Icons.add),</span><br><span class="line">            labelText: <span class="string">&quot;密码&quot;</span>,</span><br><span class="line">            hintText: <span class="string">&quot;输入密码&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          obscureText: <span class="keyword">true</span>,</span><br><span class="line">          validator: (v)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.length &lt; <span class="number">5</span>)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;密码不能小于5位数!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.send, <span class="comment">//将小键盘右下角的回车设置图标</span></span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">16</span>),</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//当校验通过时输出 true 否则 false</span></span><br><span class="line">            <span class="built_in">print</span>((_key.currentState <span class="keyword">as</span> FormState).validate().toString());</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(<span class="string">&quot;提交&quot;</span>),</span><br><span class="line">          ),</span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter路由工具："><a href="#Flutter路由工具：" class="headerlink" title="Flutter路由工具："></a>Flutter路由工具：</h2><p>var res &#x3D; await Navigator.of(context).push( &#x2F;&#x2F;跳转路由到 MenuPage 并可以接受返回值</p>
<p>这段代码用异步来监听返回值，优点是，无论是否点击按钮返回，都可以接收到返回值</p>
<p>还可以用 .then((value) &#x3D;&gt; print(value)); 的方式来获取，这样更简洁，只有返回的时候才会监听，不返回不监听</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: prefer_const_constructors, use_key_in_widget_constructors</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//新页面导包</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar( <span class="comment">//标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton( <span class="comment">//登录按钮</span></span><br><span class="line">        onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> res = <span class="keyword">await</span> Navigator.of(context).push( <span class="comment">//跳转路由到 MenuPage 并可以接受返回值</span></span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">              builder: (context) &#123;</span><br><span class="line">                <span class="keyword">return</span> MenuPage( <span class="comment">//传参 menuTitle</span></span><br><span class="line">                  menuTitle: <span class="string">&quot;菜单&quot;</span>,</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">              settings: RouteSettings( <span class="comment">//路由设置</span></span><br><span class="line">                name: <span class="string">&quot;参数&quot;</span>,</span><br><span class="line">                arguments: <span class="string">&quot;我是参数&quot;</span>, <span class="comment">//向目标传参的数据</span></span><br><span class="line">              ),</span><br><span class="line">              maintainState: <span class="keyword">false</span>,</span><br><span class="line">              fullscreenDialog: <span class="keyword">true</span>,</span><br><span class="line">          ));</span><br><span class="line">          <span class="built_in">print</span>(res); <span class="comment">//打印返回值</span></span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> menuTitle;</span><br><span class="line">  <span class="keyword">const</span> MenuPage(&#123;Key? key,<span class="keyword">required</span> <span class="keyword">this</span>.menuTitle&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//通过 ModalRoute.of(context)?.settings.arguments; 来获取传参</span></span><br><span class="line">    <span class="built_in">dynamic</span> arguments = ModalRoute.of(context)?.settings.arguments;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(menuTitle + <span class="string">&quot;  &quot;</span> + arguments),</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          Navigator.of(context).pop(<span class="string">&quot;Brath&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;返回按钮&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>Flutter中管理多个页面时有两个核心概念和类：<code>Route</code>和<code>Navigator</code>。<br> 一个<code>route</code>是一个屏幕或页面的抽象，<code>Navigator</code>是管理<code>route</code>的<code>Widget</code>。<code>Navigator</code>可以通过<code>route</code>入栈和出栈来实现页面之间的跳转。<br> 路由一般分为静态路由(即命名路由)和动态路由。</p>
<h3 id="静态路由-即命名路由"><a href="#静态路由-即命名路由" class="headerlink" title="静态路由(即命名路由)"></a>静态路由(即命名路由)</h3><p>静态路由在通过<code>Navigator</code>跳转之前，需要在<code>MaterialApp</code>组件内显式声明路由的名称，而一旦声明，路由的跳转方式就固定了。通过在<code>MaterialApp</code>内的<code>routes</code>属性进行显式声明路由的定义。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyApp</span> <span class="keyword">extends</span> <span class="title class_ inherited__">StatelessWidget</span> &#123;</span><br><span class="line">  @override</span><br><span class="line">  <span class="title class_">Widget</span> <span class="title function_">build</span>(<span class="params">BuildContext context</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">MaterialApp</span>(</span><br><span class="line">      <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">      <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="comment">//&quot;/&quot;:(context) =&gt; RootPage(),</span></span><br><span class="line">        <span class="string">&quot;A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">        <span class="string">&quot;B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Bpage</span>(),</span><br><span class="line">        <span class="string">&quot;C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line"> 	<span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">注意：如果指定了home属性，routes表则不能再包含此属性。</span><br><span class="line">如上代码中【<span class="attr">home</span>: <span class="title class_">RootPage</span>()】  和 【<span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>()】两则不能同时存在。</span><br></pre></td></tr></table></figure>

<p>例如：<code>RootPage</code>跳转<code>Apage</code>即：<code>RootPage</code>  —&gt;<code>Apage</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushNamed(<span class="string">&quot;A&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>一般方法中带有<code>Name</code>多数是通过静态路由完成跳转的，如<code>pushNamed</code>、<code>pushReplacementNamed</code>、<code>pushNamedAndRemoveUntil</code>等。</p>
<h3 id="动态路由"><a href="#动态路由" class="headerlink" title="动态路由"></a>动态路由</h3><p>动态路由无需在<code>MaterialApp</code>内的<code>routes</code>中注册即可直接使用：RootPage  —&gt; Apage</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p>动态路由中，需要传入一个<code>Route</code>,这里使用的是<code>MaterialPageRoute</code>，它可以使用和平台风格一致的路由切换动画,在iOS上左右滑动切换，Android上会上下滑动切换。也可以使用<code>CupertinoPageRoute</code>实现全平台的左右滑动切换。<br> 当然也可以自定义路由切换动画，使用<code>PageRouteBuilder</code>:使用<code>FadeTransition</code><br> 做一个渐入过渡动画。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(</span><br><span class="line">  PageRouteBuilder(</span><br><span class="line">    transitionDuration: <span class="built_in">Duration</span>(milliseconds: <span class="number">250</span>), <span class="comment">// //动画时间为0.25秒</span></span><br><span class="line">    pageBuilder: (BuildContext context,Animation animation,</span><br><span class="line">        Animation secondaryAnimation)&#123;</span><br><span class="line">      <span class="keyword">return</span> FadeTransition( <span class="comment">//渐隐渐入过渡动画</span></span><br><span class="line">        opacity: animation,</span><br><span class="line">        child: Apage()</span><br><span class="line">       );</span><br><span class="line">     &#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>到现在为止，可能对路由有了一定的认识，，下面就结合具体方法来详细说明。<br> 在这之前有必要说明：<br> <code>Navigator.of(context).push</code>和<code>Navigator.push</code>两着并没有特别的区别，看源码也得知，后者其实就是调用了前者。<br> <code>of</code>：获取<code>Navigator</code>当前已经实例的状态。</p>
<h3 id="路由拦截："><a href="#路由拦截：" class="headerlink" title="路由拦截："></a>路由拦截：</h3><p>flutter提供了 onGenerateRoute 来使用路由拦截器，作用于强制登录</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      initialRoute: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">&quot;/&quot;</span> :(context) =&gt; LoginPage(),</span><br><span class="line">        <span class="comment">// &quot;menu&quot; :(context) =&gt; MenuPage(), </span></span><br><span class="line">      &#125;,</span><br><span class="line">      onGenerateRoute: (RouteSettings s)&#123; <span class="comment">//路由拦截器</span></span><br><span class="line">        <span class="built_in">print</span>(s.name); <span class="comment">//路由名称</span></span><br><span class="line">        <span class="keyword">if</span>(s.name != <span class="string">&quot;menu&quot;</span>)&#123; <span class="comment">//当该路由不等于 menu 强制跳转回首页</span></span><br><span class="line">              <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> LoginPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span>(s.name)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;menu&quot;</span> : <span class="comment">//当该路由等于 menu 跳转至 menu 菜单</span></span><br><span class="line">          <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> MenuPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="路由方法解释："><a href="#路由方法解释：" class="headerlink" title="路由方法解释："></a>路由方法解释：</h3><h3 id="pop"><a href="#pop" class="headerlink" title="pop"></a>pop</h3><p>返回当前路由栈的上一个界面。<br> <code>Navigator.pop(context);</code></p>
<h3 id="push-x2F-pushNamed-："><a href="#push-x2F-pushNamed-：" class="headerlink" title="push &#x2F; pushNamed  ："></a>push &#x2F; pushNamed  ：</h3><p>见上，两者运行效果相同，只是调用不同，都是将一个<code>page</code>压入路由栈中。直白点就是<code>push</code>是把界面直接放入，<code>pushNames</code>是通过路由名的方式，通过router使界面进入对应的栈中。<br> 结果：直接在原来的路由栈上添加一个新的 <code>page</code>。</p>
<h3 id="pushReplacement-x2F-pushReplacementNamed-x2F-popAndPushNamed"><a href="#pushReplacement-x2F-pushReplacementNamed-x2F-popAndPushNamed" class="headerlink" title="pushReplacement &#x2F; pushReplacementNamed &#x2F; popAndPushNamed"></a>pushReplacement &#x2F; pushReplacementNamed &#x2F; popAndPushNamed</h3><p>替换路由，顾名思义替换当前的路由。<br> 例如</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2675141-de7b4cb63fcb1d83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/985/format/webp" alt="img"></p>
<p>Replacement.png</p>
<p>由图可知在<code>BPage</code>使用替换跳转到<code>Cpage</code>的时候，<code>Bpage</code>被<code>Cpage</code>替换了在堆栈中的位置而移除栈，<code>CPage</code>默认返回的是<code>APage</code>。</p>
<h6 id="pushReplacement-使用的动态路由方式跳转："><a href="#pushReplacement-使用的动态路由方式跳转：" class="headerlink" title="pushReplacement 使用的动态路由方式跳转："></a>pushReplacement 使用的动态路由方式跳转：</h6><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushReplacement</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<h6 id="pushReplacementNamed-使用的静态路由方式，"><a href="#pushReplacementNamed-使用的静态路由方式，" class="headerlink" title="pushReplacementNamed 使用的静态路由方式，"></a>pushReplacementNamed 使用的静态路由方式，</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushReplacementNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>两者运行效果相同。</p>
<h6 id="popAndPushNamed："><a href="#popAndPushNamed：" class="headerlink" title="popAndPushNamed："></a>popAndPushNamed：</h6><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popAndPushNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>其实和上面两个方法运行的结果也是一致，区别就是动画效果不一样：<code>BPage</code> —&gt;<code>CPage</code>的时候，<code>CPage</code>会同时有<code>pop</code>的转场效果和从<code>BPage</code>页<code>push</code>的转场效果。简单来说就是<code>CPage</code>先<code>pop</code>到<code>BPage</code>，在<code>push</code>到<code>CPage</code>。（不知道是不是卡顿的原因，笔者看起来区别不大）</p>
<p>综上：3中方法结果一样，只是调用方式和过渡动画的区别，开发者自行选择。</p>
<h3 id="pushAndRemoveUntil-x2F-pushNamedAndRemoveUntil"><a href="#pushAndRemoveUntil-x2F-pushNamedAndRemoveUntil" class="headerlink" title="pushAndRemoveUntil &#x2F; pushNamedAndRemoveUntil"></a>pushAndRemoveUntil &#x2F; pushNamedAndRemoveUntil</h3><p>在使用上述方式跳转时，会按次序移除其他的路由，直到遇到被标记的路由（<code>predicate</code>函数返回了<code>true</code>）时停止。若 没有标记的路由，则移除全部。<br> 当路由栈中存在重复的标记路由时，默认移除到最近的一个停止。</p>
<h6 id="第一种"><a href="#第一种" class="headerlink" title="第一种"></a>第一种</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<p>此时的路由栈示意图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2675141-364a8005348f7aec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/983/format/webp" alt="img"></p>
<p>RemoveUntil_all.png</p>
<p>可知出了要<code>push</code>的<code>CPage</code>，当前路由栈中所有的路由都被移除，<code>CPage</code>变成根路由。</p>
<h6 id="第二种：移除到RootPage停止"><a href="#第二种：移除到RootPage停止" class="headerlink" title="第二种：移除到RootPage停止"></a>第二种：移除到RootPage停止</h6><figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;/&quot;即为RootPage，标记后，移除到该路由停止移除</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&#x27;/&#x27;</span>))</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="comment">// 只是写法不一样</span></span><br></pre></td></tr></table></figure>

<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>此时的路由栈示意图：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2675141-d03ce09352ff0619.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/992/format/webp" alt="img"></p>
<p>RemoveUntil_until.png</p>
<p><code>push</code>到<code>CPage</code>的时候，移除到<code>RootPage</code>停止,<code>CPage</code>默认返回<code>RootPage</code>。</p>
<h3 id="popUntil"><a href="#popUntil" class="headerlink" title="popUntil"></a>popUntil</h3><p>返回到指定的标记路由，若标记的路由为<code>null</code>，则程序退出，慎用！！！<br> 有时候我们需要根据业务需求判断：可能返回上一级路由，也可能返回上上级路由或是返回指定的路由等。这个时候就不能使用<code>Replacemen</code>t和<code>RemoveUntil</code>来替换、移除路由了。<br> 例如：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2675141-7ca98d9fca946e7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/453/format/webp" alt="img"></p>
<p>until.png</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>再例如：</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2675141-6c759f94d04bf0d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/447/format/webp" alt="img"></p>
<p> 要实现上述功能，从<code>CPage</code>返回到<code>APage</code>，并且不在<code>MaterialApp</code>内的<code>routes</code>属性进行显式声明路由。因为笔者觉得一个应用程序的界面太多了，如果每个界面都要显示声明路由，实在是不优雅。<br> 因为需要返回<code>APage</code>，还是需要标记路由，所有我们在之前跳转<code>APage</code>的时候设置<code>RouteSettings</code>，如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置APage的RouteSettings</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p>在<code>CPage</code>需要返回的时候，调用就行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popUntil(ModalRoute.withName(<span class="string">&quot;/A&quot;</span>));</span><br></pre></td></tr></table></figure>

<p>这样代码看起来很优雅，不会冗余。<br> 另：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回根路由</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">isFirst</span>);</span><br></pre></td></tr></table></figure>

<h3 id="canPop"><a href="#canPop" class="headerlink" title="canPop"></a>canPop</h3><p>用来判断是否可以导航到新页面，返回的<code>bool</code>类型，一般是在设备带返回的物理按键时需要判断是否可以<code>pop</code>。</p>
<h3 id="maybePop"><a href="#maybePop" class="headerlink" title="maybePop"></a>maybePop</h3><p>可以理解为<code>canPop</code>的升级，<code>maybePop</code>会自动判断。如果当前的路由可以<code>pop</code>，则执行当前路由的<code>pop</code>操作，否则将不执行。</p>
<h3 id="removeRoute-x2F-removeRouteBelow"><a href="#removeRoute-x2F-removeRouteBelow" class="headerlink" title="removeRoute&#x2F;removeRouteBelow"></a>removeRoute&#x2F;removeRouteBelow</h3><p>删除路由，同时执行<code>Route.dispose</code>操作，无过渡动画，正在进行的手势也会被取消。</p>
<h6 id="removeRoute"><a href="#removeRoute" class="headerlink" title="removeRoute"></a>removeRoute</h6><p><img src="https://upload-images.jianshu.io/upload_images/2675141-b33464133f67a4db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/996/format/webp" alt="img"></p>
<p>removeRoute.png</p>
<p><code>BPage</code>被移除了当前的路由栈。<br> 如果在当前页面调用<code>removeRoute</code>，则类似于调用<code>pop</code>方法，区别就是无过渡动画，所以<code>removeRoute</code>也可以用来返回上一页。</p>
<h6 id="removeRouteBelow"><a href="#removeRouteBelow" class="headerlink" title="removeRouteBelow"></a>removeRouteBelow</h6><p>移除指定路由底层的临近的一个路由，并且对应路由不存在的时候会报错。<br> 同上。</p>
<p>综上：这个两个方法一般情况下很少用，而且必须要持有对应的要移除的路由。<br> 一般用于立即关闭，如移除当前界面的弹出框等。</p>
<hr>
<h1 id="路由传值"><a href="#路由传值" class="headerlink" title="路由传值"></a>路由传值</h1><p>常见的路由传值分为两个方面：</p>
<ul>
<li>向下级路由传值</li>
<li>返回上级路由时传值</li>
</ul>
<p>要注意的是，我们一般说静态路由不能传值，并不是说一定不能用于传值，而是因为静态路由一般需要在<code>MaterialApp</code>内的<code>routes</code>属性进行显式声明，在这里使用构造函数传值无实际意义。<br> 如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MaterialApp</span>(</span><br><span class="line">     <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">     <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>(),</span><br><span class="line">       <span class="string">&quot;/A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;title&quot;</span>),  <span class="comment">// 在这里传参无实际意义，一般需要传入的参数都是动态变化的</span></span><br><span class="line">       <span class="string">&quot;/B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">BPage</span>(),</span><br><span class="line">       <span class="string">&quot;/C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">CPage</span>(),</span><br><span class="line">     &#125;,</span><br><span class="line">    <span class="comment">// home: RootPage(),</span></span><br><span class="line">   );</span><br></pre></td></tr></table></figure>

<h3 id="向下级路由传值"><a href="#向下级路由传值" class="headerlink" title="向下级路由传值"></a>向下级路由传值</h3><h5 id="1、构造函数传值"><a href="#1、构造函数传值" class="headerlink" title="1、构造函数传值"></a>1、构造函数传值</h5><p>首先构造一个可以带参数的构造函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  APage(<span class="keyword">this</span>.title);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _APageState createState() =&gt; _APageState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在路由跳转的时候传值：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;这是传入的参数&quot;</span>),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>

<p>在APage拿到传入的值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 StatefulWidget 使用[widget.参数名]</span></span><br><span class="line"><span class="built_in">Container</span>(</span><br><span class="line">  child: <span class="built_in">Text</span>(widget.title),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<h5 id="2、ModalRoute-传值"><a href="#2、ModalRoute-传值" class="headerlink" title="2、ModalRoute 传值"></a>2、ModalRoute 传值</h5><p>在<code>Navigator.of(context).push</code>的跳转方式中，<code>MaterialPageRoute</code>的构造参数中 可以看到有<code>RouteSettings</code>的属性，<code>RouteSettings</code>就是当前路由的基本信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RouteSettings(&#123;</span><br><span class="line">    <span class="keyword">this</span>.name,</span><br><span class="line">    <span class="keyword">this</span>.isInitialRoute = <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.arguments, <span class="comment">// 存储路由相关的参数Object</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>路由跳转时设置传递参数：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>: &#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br><span class="line">或使用静态路由pushName：</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamed</span>(<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>:&#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;);</span><br></pre></td></tr></table></figure>

<p>在<code>APage</code>中取值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span> argms = ModalRoute.of(context).settings.arguments;</span><br><span class="line"><span class="built_in">print</span>(argms[<span class="string">&quot;argms&quot;</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="返回上级路由时传值"><a href="#返回上级路由时传值" class="headerlink" title="返回上级路由时传值"></a>返回上级路由时传值</h3><p>就是在调用<code>APage</code>中调用<code>pop</code>返回路由的时候传参</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator<span class="selector-class">.of</span>(context)<span class="selector-class">.pop</span>(&quot;这是pop返回的参数值&quot;);</span><br></pre></td></tr></table></figure>

<p>在上一级路由获取：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(MaterialPageRoute(</span><br><span class="line">  builder: (context) =&gt; APage(),</span><br><span class="line">)).then((<span class="keyword">value</span>)&#123; <span class="comment">// 获取pop的传值</span></span><br><span class="line">  print(<span class="keyword">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line">或</span><br><span class="line">String <span class="keyword">value</span> = <span class="keyword">await</span> Navigator.of(context).pushNamed(<span class="string">&#x27;/xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>



<h2 id="Flutter-布局（Layout-）（Widget）："><a href="#Flutter-布局（Layout-）（Widget）：" class="headerlink" title="Flutter 布局（Layout ）（Widget）："></a>Flutter 布局（Layout ）（Widget）：</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br></pre></td></tr></table></figure>

<h4 id="Column-纵向"><a href="#Column-纵向" class="headerlink" title="Column  - 纵向"></a>Column  - 纵向</h4><p>概念：纵轴的宽度，默认使用子组件最大宽度</p>
<p>此时，红色和黄色容器宽度为 100 绿色为150，整个容器就会使用 最大的子组件宽度 150 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506141732333.png" alt="image-20220506141732333"></p>
<p>Column 代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        child: Column(children: [</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Row-横向"><a href="#Row-横向" class="headerlink" title="Row - 横向"></a>Row - 横向</h4><p>概念：和Colunm相似，纵轴的宽度，默认使用子组件最大高度</p>
<p>此时，红色和黄色容器高度为 100 绿色为200，整个容器就会使用 最大的子组件高度 200 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506142159516.png" alt="image-20220506142159516"></p>
<p>Row 代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">      child: Row(</span><br><span class="line">        textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">        mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br><span class="line">        children: [</span><br><span class="line">           Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">200</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter弹性布局-Flex-："><a href="#Flutter弹性布局-Flex-：" class="headerlink" title="Flutter弹性布局(Flex)："></a>Flutter弹性布局(Flex)：</h2><p>flutter为我们提供了 Flex 这个 widget 来制造弹性布局</p>
<p>Flex 默认 必传方向 Axis </p>
<p>children使用 Expanded来包裹，可以设置 flex权重，根据数字大小来设置权重 </p>
<p><img src="https://brath.cloud/blogImg/image-20220506150504528.png" alt="image-20220506150504528"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Container(</span><br><span class="line">          color: Colors.grey,</span><br><span class="line">          child: Flex(</span><br><span class="line">            direction: Axis.vertical,</span><br><span class="line">            children: [</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.red,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.green,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">               Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter流式布局-Wrap-："><a href="#Flutter流式布局-Wrap-：" class="headerlink" title="Flutter流式布局(Wrap)："></a>Flutter流式布局(Wrap)：</h2><p>flutter为我们提供了 Wrap 这个 widget 来制造弹性布局</p>
<p>使用 有状态的  StatefulWidget  来构建 wrap 布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150443707.png" alt="image-20220506150443707"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WrapDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;WrapDemo&gt; createState() =&gt; _WrapDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_WrapDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">WrapDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> list = &lt;<span class="built_in">int</span>&gt;[];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123; <span class="comment">//初始化时向数组添加 20 个数据</span></span><br><span class="line">      list.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Wrap(</span><br><span class="line">      direction: Axis.horizontal, <span class="comment">//设置方向</span></span><br><span class="line">      alignment: WrapAlignment.start, <span class="comment">//布局参数</span></span><br><span class="line">      spacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      runSpacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      children: list.map((e) =&gt; Container(</span><br><span class="line">        height: <span class="number">100</span>,</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        child: Text(</span><br><span class="line">          e.toString(),</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            fontSize: <span class="number">20</span></span><br><span class="line">          )</span><br><span class="line">          ),</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">      )).toList()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter层叠布局-Stack-："><a href="#Flutter层叠布局-Stack-：" class="headerlink" title="Flutter层叠布局(Stack)："></a>Flutter层叠布局(Stack)：</h2><p>flutter为我们提供了 Stack这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150429490.png" alt="image-20220506150429490"></p>
<p>我们设置了两个容器div，在层叠布局中，如果后一个容器，比前面的容器大，那么就会遮挡，原理是为什么？</p>
<ol>
<li>flutter在绘画时，从x 0 y 0开始绘画，也就是 左上角</li>
<li>意味着两个容器绘画开始的坐标都是相同的，只不过宽高不一样</li>
<li>那么如果第一个容器宽高为 100 第二个为150 就理所应当的遮住啦！</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center, <span class="comment">//居中布局</span></span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter定位布局-Positioned-："><a href="#Flutter定位布局-Positioned-：" class="headerlink" title="Flutter定位布局(Positioned )："></a>Flutter定位布局(Positioned )：</h2><p>flutter为我们提供了 Positioned 这个 widget 来制造层叠布局</p>
<p>如果 Positioned 设置了宽高，那么子组件不生效</p>
<p><img src="https://brath.cloud/blogImg/image-20220506151155616.png" alt="image-20220506151155616"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果设置了 </span></span><br><span class="line">​	top: <span class="number">10</span>,</span><br><span class="line">​   bottom: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置高度 height</span><br><span class="line"><span class="comment">//如果设置了</span></span><br><span class="line">​     left: <span class="number">10</span>,</span><br><span class="line">​     right: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置宽度 width</span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/image-20220506151900799.png" alt="image-20220506151900799"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center,</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">          Positioned(</span><br><span class="line">            <span class="comment">// width: 100,</span></span><br><span class="line">            <span class="comment">// height: 100,</span></span><br><span class="line">            child: Container(</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">                width: <span class="number">300</span>,</span><br><span class="line">                height: <span class="number">300</span>,</span><br><span class="line">          ),</span><br><span class="line">          top: <span class="number">50</span>,</span><br><span class="line">          left: <span class="number">150</span>,</span><br><span class="line">          right: <span class="number">150</span>,</span><br><span class="line">          bottom: <span class="number">50</span>,</span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter相对定位-Align-："><a href="#Flutter相对定位-Align-：" class="headerlink" title="Flutter相对定位(Align)："></a>Flutter相对定位(Align)：</h2><p>flutter为我们提供了 Align 这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154713361.png" alt="image-20220506154713361"></p>
<p>要点：只会相对于父组件来定位，而不是屏幕</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlignDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">200</span>,</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.green,</span><br><span class="line">      child: Align(</span><br><span class="line">        alignment: Alignment.center, <span class="comment">//居中</span></span><br><span class="line">        child: FlutterLogo( <span class="comment">//flutter的logo</span></span><br><span class="line">          size: <span class="number">60</span>, <span class="comment">//宽高60</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的内外边距-Padding、Margin"><a href="#Flutter的内外边距-Padding、Margin" class="headerlink" title="Flutter的内外边距 Padding、Margin"></a>Flutter的内外边距 Padding、Margin</h2><p>flutter为我们提供了 padding 和 margin 这量个 属性来设置内外边距</p>
<p>内边距：当前容器内的组件对于当前容器的距离</p>
<p>外边距：当前容器距离父类容器的距离</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154557035.png" alt="image-20220506154557035"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaddingAndMarginDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      color: Colors.red,</span><br><span class="line">      <span class="comment">//设置外边距（当前容器距离父类容器的距离）</span></span><br><span class="line">      <span class="comment">// margin: EdgeInsets.only(left: 10),//单独设置外边距</span></span><br><span class="line">      margin: EdgeInsets.all(<span class="number">10</span>),<span class="comment">//四个方向设置外边距</span></span><br><span class="line">      <span class="comment">//设置内边距（当前容器内的组件对于当前容器的距离）</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      child: Text(<span class="string">&quot;我有边距&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter尺寸限制容器（ConstrainedBox）widget："><a href="#Flutter尺寸限制容器（ConstrainedBox）widget：" class="headerlink" title="Flutter尺寸限制容器（ConstrainedBox）widget："></a>Flutter尺寸限制容器（ConstrainedBox）widget：</h2><p>要点：子widget没有设置宽高的时候取自己设置的最大宽高</p>
<p>ConstrainedBox的特点就是可以设置最大或者最小的宽高，子组件怎么设置都不可以超过这个宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155526846.png" alt="image-20220506155526846"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ConstrainedBox(</span><br><span class="line">      constraints: BoxConstraints(</span><br><span class="line">        maxHeight: <span class="number">100</span>,</span><br><span class="line">        maxWidth: <span class="number">100</span>,</span><br><span class="line">        minHeight: <span class="number">50</span>,</span><br><span class="line">        minWidth: <span class="number">50</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Container(</span><br><span class="line">        width: <span class="number">500</span>,</span><br><span class="line">        height: <span class="number">500</span>,</span><br><span class="line">        color: Colors.red,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter尺寸限制容器（SizeBox）widget："><a href="#Flutter尺寸限制容器（SizeBox）widget：" class="headerlink" title="Flutter尺寸限制容器（SizeBox）widget："></a>Flutter尺寸限制容器（SizeBox）widget：</h2><p>要点：如果父容器指定了宽高，那么子组件不可以修改宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155924950.png" alt="image-20220506155924950"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SizedBox(</span><br><span class="line">        <span class="comment">// width: 100,</span></span><br><span class="line">        <span class="comment">// height: 100,</span></span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Flutter装饰器（BoxDecoration）widget："><a href="#Flutter装饰器（BoxDecoration）widget：" class="headerlink" title="Flutter装饰器（BoxDecoration）widget："></a>Flutter装饰器（BoxDecoration）widget：</h2><p>flutter为我们提供了 BoxDecoration  这量个 widget 来设置样式装饰</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161223872.png" alt="image-20220506161223872"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: DecoratedBox( <span class="comment">//装饰器</span></span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        <span class="comment">// color: Colors.red</span></span><br><span class="line">        gradient: LinearGradient( <span class="comment">//渐变颜色</span></span><br><span class="line">          colors: [</span><br><span class="line">            Colors.red, <span class="comment">//从红色</span></span><br><span class="line">            Colors.green, <span class="comment">//到绿色</span></span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>), <span class="comment">//圆角度</span></span><br><span class="line">        boxShadow: [</span><br><span class="line">          BoxShadow(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            offset: Offset(<span class="number">2.0</span>,<span class="number">2.0</span>),</span><br><span class="line">            blurRadius: <span class="number">2</span>,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: EdgeInsets.only(</span><br><span class="line">          left: <span class="number">100</span>,</span><br><span class="line">          right: <span class="number">100</span>,</span><br><span class="line">          top: <span class="number">20</span>,</span><br><span class="line">          bottom: <span class="number">20</span></span><br><span class="line">          ),</span><br><span class="line">        child: Text(</span><br><span class="line">          <span class="string">&quot;渐变色~&quot;</span>,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.white</span><br><span class="line">          ),</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="Flutter小容器（Container）widget："><a href="#Flutter小容器（Container）widget：" class="headerlink" title="Flutter小容器（Container）widget："></a>Flutter小容器（Container）widget：</h2><p>要点：当Container设置了 foregroundDecoration（前景） 的背景颜色，那么子组件将不会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161715758.png" alt="image-20220506161715758"></p>
<p>要点：当Container设置了 decoration（背景） 的背景颜色，那么子组件将会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161724860.png" alt="image-20220506161724860"></p>
<p>设置内边距并旋转 0.5 </p>
<p><img src="https://brath.cloud/blogImg/image-20220506162019154.png" alt="image-20220506162019154"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContarinerDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">100</span>), <span class="comment">//设置内边距</span></span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      child: Text(<span class="string">&quot;data&quot;</span>), </span><br><span class="line">      decoration: BoxDecoration( <span class="comment">//设置背景  foregroundDecoration设置前景，会遮挡</span></span><br><span class="line">        color: Colors.red</span><br><span class="line">      ),</span><br><span class="line">      transform: Matrix4.rotationZ(<span class="number">0.5</span>), <span class="comment">//旋转，可选坐标轴</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter小容器（MateriaApp，Scaffold）widget："><a href="#Flutter小容器（MateriaApp，Scaffold）widget：" class="headerlink" title="Flutter小容器（MateriaApp，Scaffold）widget："></a>Flutter小容器（MateriaApp，Scaffold）widget：</h2><p>1.MateriaApp是flutter的根节点，flutter规定必须要 MateriaApp 来作为根节点展示</p>
<p>2.在MateriaApp可以设置路由，每个子页面必须由 Scaffold 来包裹</p>
<p>3.每个 Scaffold 包含两个部分 appBar（头部），body（展示体）</p>
<h2 id="Flutter的AppBar："><a href="#Flutter的AppBar：" class="headerlink" title="Flutter的AppBar："></a>Flutter的AppBar：</h2><p>Scaffold 中的 AppBar 有很多特性：</p>
<p><img src="https://brath.cloud/blogImg/image-20220506164220445.png" alt="image-20220506164220445"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        leading: IconButton( <span class="comment">//设置左侧图标</span></span><br><span class="line">            onPressed: () &#123;</span><br><span class="line">              <span class="built_in">print</span>(<span class="string">&quot;点击了！&quot;</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            icon: Icon(Icons.home) <span class="comment">//左边房子图片</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// centerTitle: true, //设置centerTitle为true，可将标题居中</span></span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">&quot;演示&quot;</span>,</span><br><span class="line">          style: TextStyle(fontSize: <span class="number">15</span>),</span><br><span class="line">        ),</span><br><span class="line">        actions: [  <span class="comment">//设置左侧图标</span></span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了加！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.add)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了减！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.remove)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了灯！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.wb_iridescent_rounded)),</span><br><span class="line">        ],</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// body: ,</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的顶部TabBar选项卡："><a href="#Flutter的顶部TabBar选项卡：" class="headerlink" title="Flutter的顶部TabBar选项卡："></a>Flutter的顶部TabBar选项卡：</h2><p>Flutter提供 顶部TabBar选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506170237419.png" alt="image-20220506170237419"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>]; <span class="comment">//选项卡数组</span></span><br><span class="line">  <span class="comment">//选项控制器</span></span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">//选项索引  </span></span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 初始化</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController( <span class="comment">//创建新控制器</span></span><br><span class="line">      initialIndex: _index, <span class="comment">//设置初始索引</span></span><br><span class="line">      length: tabs.length, <span class="comment">//长度为数组疮毒</span></span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">      _controller.addListener(() &#123; <span class="comment">//监听器</span></span><br><span class="line">        setState(() &#123; <span class="comment">//监听状态，当状态改变，把控制器索引赋值到选项索引，用来做内容切换</span></span><br><span class="line">          _index = _controller.index;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    * 销毁</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>, <span class="comment">//阴影</span></span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller, <span class="comment">//选项接收控制器</span></span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab( <span class="comment">//遍历选项</span></span><br><span class="line">          text: e, <span class="comment">//文本为map中的内容</span></span><br><span class="line">        )).toList(), <span class="comment">//转为集合</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: Text(_index.toString()), <span class="comment">//body可以根据index来输出不同内容</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的顶部TabBar选项卡（进阶）"><a href="#Flutter的顶部TabBar选项卡（进阶）" class="headerlink" title="Flutter的顶部TabBar选项卡（进阶）"></a>Flutter的顶部TabBar选项卡（进阶）</h2><p>使用Flutter提供 顶部TabBarView组件来设置选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506171550665.png" alt="image-20220506171550665"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//指定三个容器页面，在下方调用 widget.widgets 因为泛型指定了 Widget 所以都是Widget数组</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [FlutterView(),AndroidView(),IOSView()];</span><br><span class="line">    </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>];</span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController(</span><br><span class="line">      length: tabs.length, </span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller,</span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab(</span><br><span class="line">          text: e,</span><br><span class="line">        )).toList(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: TabBarView( <span class="comment">//使用 TabBarView 包裹body</span></span><br><span class="line">        children: widget.widgets, <span class="comment">//内容就是widgets</span></span><br><span class="line">        controller: _controller, <span class="comment">//通过控制器来切换</span></span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;FlutterView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;AndroidView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;IOSView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的侧抽屉-Drawer-样式"><a href="#Flutter的侧抽屉-Drawer-样式" class="headerlink" title="Flutter的侧抽屉 Drawer 样式"></a>Flutter的侧抽屉 Drawer 样式</h2><p>使用Flutter提供 侧抽屉 Drawer 组件来设置抽屉样式</p>
<p><img src="https://brath.cloud/blogImg/image-20220506172420330.png" alt="image-20220506172420330"></p>
<h4 id="要点：drawer是-Scaffold-中的属性，并不是-AppBar-的"><a href="#要点：drawer是-Scaffold-中的属性，并不是-AppBar-的" class="headerlink" title="要点：drawer是 Scaffold 中的属性，并不是 AppBar 的"></a>要点：drawer是 Scaffold 中的属性，并不是 AppBar 的</h4><p><img src="https://brath.cloud/blogImg/image-20220506172505516.png" alt="image-20220506172505516"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myDrawer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Drawer(</span><br><span class="line">      child: MediaQuery.removePadding( <span class="comment">//删除边距</span></span><br><span class="line">        context: context, </span><br><span class="line">        child: Column(</span><br><span class="line">          crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//从左开始</span></span><br><span class="line">          children: [</span><br><span class="line">            Padding(padding: EdgeInsets.only(top: <span class="number">40</span>),</span><br><span class="line">            child: Text(<span class="string">&quot;Brath&quot;</span>),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        removeTop: <span class="keyword">true</span>, <span class="comment">//删除顶部</span></span><br><span class="line">        ),     </span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的底部选项卡"><a href="#Flutter的底部选项卡" class="headerlink" title="Flutter的底部选项卡"></a>Flutter的底部选项卡</h2><p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到点击卡片切换页面</p>
<p><img src="https://brath.cloud/blogImg/image-20220506190446130.png" alt="image-20220506190446130"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BottomNavigatorBarDemo(&#123; Key? key &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;新增&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;减少&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(child: Text(_index.toString())), <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的底部选项卡（进阶版）"><a href="#Flutter的底部选项卡（进阶版）" class="headerlink" title="Flutter的底部选项卡（进阶版）"></a>Flutter的底部选项卡（进阶版）</h2><p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到按钮居中布局</p>
<p>要点：两种实现方式，BottomNavigationBar中如果BottomNavigationBarItem超过三个需要设置type👇否则不显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type: BottomNavigationBarType.fixed</span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/image-20220507084730237.png" alt="image-20220507084730237"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [ <span class="comment">//四个页面数组</span></span><br><span class="line">    PageDemo(),</span><br><span class="line">    LayoutDemo(),</span><br><span class="line">    LoginPage(),</span><br><span class="line">      LoginPage(),</span><br><span class="line">    ];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">      type: BottomNavigationBarType.fixed, <span class="comment">//设置超出三个页面显示</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;首页&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, <span class="comment">//将按钮作为居中嵌入下方tabbar</span></span><br><span class="line">      floatingActionButton: FloatingActionButton( <span class="comment">//设置居中按钮</span></span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>第二种实现方式：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507084943281.png" alt="image-20220507084943281"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomAppBar(</span><br><span class="line">        color: Theme.of(context).primaryColorDark, <span class="comment">//设置tabbar颜色主题</span></span><br><span class="line">        shape: CircularNotchedRectangle(), <span class="comment">//设置按钮风格</span></span><br><span class="line">        child: Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">          children: [</span><br><span class="line">           IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.add)),</span><br><span class="line">             SizedBox(height: <span class="number">16</span>),</span><br><span class="line">                        IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.home)),</span><br><span class="line">          ]</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的列表-（ListView）Widget"><a href="#Flutter的列表-（ListView）Widget" class="headerlink" title="Flutter的列表 （ListView）Widget"></a>Flutter的列表 （ListView）Widget</h2><p>flutter为我们提供了 ListView 这个 widget 来展示我们的列表</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//均为可选参数</span></span><br><span class="line">ListView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//滑动方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向，默认否</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//监听滑动距离回调 控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//限制listview的高度为子组件的高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">this</span>.itemExtent, <span class="comment">//设置list展示间距</span></span><br><span class="line">    <span class="keyword">this</span>.prototypeItem,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">  &#125;) </span><br></pre></td></tr></table></figure>

<h5 id="用-ListView-实现滑动列表，并且可以细粒度显示每个list数据，并且可以点击按钮返回顶部"><a href="#用-ListView-实现滑动列表，并且可以细粒度显示每个list数据，并且可以点击按钮返回顶部" class="headerlink" title="用 ListView 实现滑动列表，并且可以细粒度显示每个list数据，并且可以点击按钮返回顶部"></a>用 ListView 实现滑动列表，并且可以细粒度显示每个list数据，并且可以点击按钮返回顶部</h5><p><img src="https://brath.cloud/blogImg/image-20220507094032250.png" alt="image-20220507094032250" style="zoom: 67%;" /><img src="https://brath.cloud/blogImg/image-20220507094042244.png" alt="image-20220507094042244" style="zoom: 67%;" /></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建无状态Widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ListViewDemo&gt; createState() =&gt; _ListViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ListViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ListViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化list为空</span></span><br><span class="line">  ScrollController _controller = ScrollController(); <span class="comment">//控制器</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">show</span> = <span class="keyword">false</span>; <span class="comment">//是否展示按钮</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = ScrollController(); <span class="comment">//初始化时，初始控制器</span></span><br><span class="line">    _controller.addListener(() &#123; <span class="comment">//增加控制器监听</span></span><br><span class="line">      <span class="keyword">if</span>(_controller.offset &gt;= <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">false</span>)&#123; <span class="comment">//如果滑动距离大于100并且按钮没展示那就展示按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(_controller.offset &lt; <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">true</span>)&#123; <span class="comment">//如果滑动距离小于100并且按钮展示那就关闭按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      list.add(i); <span class="comment">//循环添加到数组</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement dispose</span></span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">    _controller.dispose(); <span class="comment">//退出时，销毁控制器，否则内存会溢出</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;滚动列表&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: <span class="keyword">show</span> ? FloatingActionButton( <span class="comment">//使用三元来控制按钮展示</span></span><br><span class="line">        child: Icon(Icons.vertical_align_top_outlined),</span><br><span class="line">       onPressed: ()&#123;</span><br><span class="line">        _controller.animateTo( <span class="comment">//设置回到顶部</span></span><br><span class="line">        <span class="number">0</span>, <span class="comment">//回到哪个部分 0 就是顶端</span></span><br><span class="line">        duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>),  <span class="comment">//用Duration设置时间</span></span><br><span class="line">        curve: Curves.slowMiddle <span class="comment">//用Curves设置动效</span></span><br><span class="line">        );</span><br><span class="line">       &#125;,</span><br><span class="line">      ): <span class="keyword">null</span>, <span class="comment">//如果show为false则不展示按钮</span></span><br><span class="line">      body: Scrollbar(</span><br><span class="line">        child: RefreshIndicator( <span class="comment">//使用 RefreshIndicator 包裹listview使其可以下拉刷新</span></span><br><span class="line">          <span class="comment">//第一种方法：直接展示数组数据</span></span><br><span class="line">      <span class="comment">//     child: ListView(</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; Text(e.toString())).toList(),</span></span><br><span class="line">      <span class="comment">//   shrinkWrap: true, //限制listview的高度为子组件的高度</span></span><br><span class="line">      <span class="comment">//   reverse: false,//是否反向列表</span></span><br><span class="line">      <span class="comment">//   itemExtent: 50,//设置list展示间距</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line">          <span class="comment">//第二种方法，构造展示数组数据，可以细粒度操作</span></span><br><span class="line">      child: ListView.builder(</span><br><span class="line">        itemBuilder: (BuildContext context,<span class="built_in">int</span> index)&#123; <span class="comment">//itemBuilder构建列表</span></span><br><span class="line">          <span class="keyword">if</span>(index == <span class="number">2</span>)&#123; <span class="comment">//如果第索引 == 2那么就展示一个图标</span></span><br><span class="line">            <span class="keyword">return</span> Icon(Icons.add);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> Text(list[index].toString()); <span class="comment">//返回所有list中的索引打印String类型</span></span><br><span class="line">        &#125;,</span><br><span class="line">        itemCount: list.length, <span class="comment">//itemCount表示数组长度</span></span><br><span class="line">        controller: _controller, <span class="comment">//接入控制器</span></span><br><span class="line">        ),</span><br><span class="line">      onRefresh: _onRefresh, <span class="comment">//使用_onRefresh方法决定下拉刷新时的操作</span></span><br><span class="line">      )</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  Future _onRefresh() <span class="keyword">async</span>&#123; <span class="comment">//因为是异步操作所以加入 async ，在方法返回种使用 await 可以做到强制等待异步返回</span></span><br><span class="line">    <span class="keyword">await</span> Future.delayed( <span class="comment">//处理返回</span></span><br><span class="line">      <span class="built_in">Duration</span>(seconds: <span class="number">3</span>), <span class="comment">//等待3秒</span></span><br><span class="line">      ()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;三&quot;</span>); <span class="comment">//三秒后打印</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;三&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的网格布局-（GridView）Widget："><a href="#Flutter的网格布局-（GridView）Widget：" class="headerlink" title="Flutter的网格布局 （GridView）Widget："></a>Flutter的网格布局 （GridView）Widget：</h2><p>flutter为我们提供了 GridView这个 widget 来展示我们的网格数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GridView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//展示方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//滑动控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//是否跟随子组件显示最大高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.gridDelegate,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/image-20220507095538462.png" alt="image-20220507095538462"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid_view_demo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>, <span class="comment">//居中appbar标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;网格布局演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: GridView(</span><br><span class="line">        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">          crossAxisCount: <span class="number">2</span>, <span class="comment">//横向最大展示个数</span></span><br><span class="line">          mainAxisSpacing: <span class="number">10</span>, <span class="comment">//横向间距</span></span><br><span class="line">          crossAxisSpacing: <span class="number">10</span>, <span class="comment">//纵向间距</span></span><br><span class="line">        ),</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">85</span>, <span class="number">76</span>, <span class="number">51</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">14</span>, <span class="number">223</span>, <span class="number">125</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">209</span>),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的弹窗（AlertDialog）Widget："><a href="#Flutter的弹窗（AlertDialog）Widget：" class="headerlink" title="Flutter的弹窗（AlertDialog）Widget："></a>Flutter的弹窗（AlertDialog）Widget：</h2><p>flutter为我们提供了 AlertDialog 这个 widget 来展示我们的弹窗数据</p>
<p>源码阅读：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AlertDialog(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.title, <span class="comment">//弹窗标题</span></span><br><span class="line">   <span class="keyword">this</span>.titlePadding, <span class="comment">//弹窗边距</span></span><br><span class="line">   <span class="keyword">this</span>.titleTextStyle, <span class="comment">//文字风格</span></span><br><span class="line">   <span class="keyword">this</span>.content, <span class="comment">//弹窗内容</span></span><br><span class="line">   <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">20.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>), <span class="comment">//内容边距</span></span><br><span class="line">   <span class="keyword">this</span>.contentTextStyle, <span class="comment">//内容风格</span></span><br><span class="line">   <span class="keyword">this</span>.actions, <span class="comment">//确认展示结果</span></span><br><span class="line">   <span class="keyword">this</span>.actionsPadding = EdgeInsets.zero,</span><br><span class="line">   <span class="keyword">this</span>.actionsAlignment,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowDirection,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowButtonSpacing,</span><br><span class="line">   <span class="keyword">this</span>.buttonPadding,</span><br><span class="line">   <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">   <span class="keyword">this</span>.elevation,</span><br><span class="line">   <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">   <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">   <span class="keyword">this</span>.shape,</span><br><span class="line">   <span class="keyword">this</span>.alignment,</span><br><span class="line">   <span class="keyword">this</span>.scrollable = <span class="keyword">false</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>

<h5 id="图片为IOS风格的弹窗"><a href="#图片为IOS风格的弹窗" class="headerlink" title="图片为IOS风格的弹窗"></a>图片为IOS风格的弹窗</h5><p><strong><img src="https://brath.cloud/blogImg/image-20220507101536722.png" alt="image-20220507101536722"></strong></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>))</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showAlert() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹窗</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">        <span class="comment">//默认风格弹窗</span></span><br><span class="line">        <span class="comment">// return AlertDialog( //AlertDialog展示弹窗</span></span><br><span class="line">        <span class="comment">//   title: Text(&quot;与Brath的聊天&quot;), //弹窗标题</span></span><br><span class="line">        <span class="comment">//   content: Text(&quot;确认删除&quot;), //弹窗文本</span></span><br><span class="line">        <span class="comment">//   actions: [</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.of(context).pop(true); //第一种返回方式，of上下文然后pop关闭，并返回一个true</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;确认&quot;)),</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.pop(context,false); //第二种返回方式，先pop关闭。然后用of链接上线问，并返回一个false</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;取消&quot;)),</span></span><br><span class="line">        <span class="comment">//   ],</span></span><br><span class="line">        <span class="comment">// );</span></span><br><span class="line">        <span class="comment">//IOS风格弹窗 除了widget不一样，其他参数均为统一</span></span><br><span class="line">         <span class="keyword">return</span> CupertinoAlertDialog(</span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>),</span><br><span class="line">          content: Text(<span class="string">&quot;确认删除&quot;</span>),</span><br><span class="line">          actions: [</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.of(context).pop(<span class="keyword">true</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;确认&quot;</span>)),</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.pop(context,<span class="keyword">false</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;取消&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res); <span class="comment">//打印路由返回结果</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Flutter的弹框（SimpleDialog）-Widget："><a href="#Flutter的弹框（SimpleDialog）-Widget：" class="headerlink" title="Flutter的弹框（SimpleDialog） Widget："></a>Flutter的弹框（SimpleDialog） Widget：</h2><p>flutter为我们提供了 SimpleDialog 这个 widget 来展示我们的弹框数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SimpleDialog(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.title, <span class="comment">//弹框标题</span></span><br><span class="line">    <span class="keyword">this</span>.titlePadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">0.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.titleTextStyle,</span><br><span class="line">    <span class="keyword">this</span>.children, </span><br><span class="line">    <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0.0</span>, <span class="number">12.0</span>, <span class="number">0.0</span>, <span class="number">16.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">    <span class="keyword">this</span>.elevation,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">    <span class="keyword">this</span>.shape,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/image-20220507102533285.png" alt="image-20220507102533285"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化空数组</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      list.add(i);<span class="comment">//加入循环数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>)),</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showList, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;列表框&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showList() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹框</span></span><br><span class="line"> <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      barrierDismissible: <span class="keyword">false</span>, <span class="comment">//展示弹窗，点击空白不会关闭</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">         <span class="keyword">return</span> SimpleDialog( <span class="comment">//创建弹框展示列表</span></span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>), <span class="comment">//弹框标题</span></span><br><span class="line">          children: list.map((e) =&gt; GestureDetector( <span class="comment">//用GestureDetector展示list</span></span><br><span class="line">            child: Text(e.toString()), <span class="comment">//每个孩子都是list中的String输出</span></span><br><span class="line">            onTap: ()&#123;</span><br><span class="line">              Navigator.pop(context,e); <span class="comment">//点击每个list，路由返回并打印当前数组数值</span></span><br><span class="line">            &#125;,</span><br><span class="line">            )).toList(),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="Flutter的表格（Table）Widget："><a href="#Flutter的表格（Table）Widget：" class="headerlink" title="Flutter的表格（Table）Widget："></a>Flutter的表格（Table）Widget：</h2><p>flutter为我们提供了 Table 还有 DataTable 这两个常用 widget 来展示我们的表格</p>
<p><img src="https://brath.cloud/blogImg/image-20220507110417537.png" alt="image-20220507110417537"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;TableDemo&gt; createState() =&gt; _TableDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_TableDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">TableDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; <span class="comment">//初始化表格数据</span></span><br><span class="line">  <span class="built_in">int</span> _sortColumnIndex = <span class="number">0</span>; <span class="comment">//初始化排序索引</span></span><br><span class="line">  <span class="built_in">bool</span> _sortAscending = <span class="keyword">true</span>; <span class="comment">//初始化排序方式 ture为 ASC false为 DESC</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      list.add(&#123; <span class="comment">//循环添加map数据</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;b&quot;</span> * i,</span><br><span class="line">        <span class="string">&quot;gender&quot;</span>: i % <span class="number">1</span> == <span class="number">0</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>, <span class="comment">//取余等于0是男 否则是女</span></span><br><span class="line">        <span class="string">&quot;isSelect&quot;</span>: <span class="keyword">false</span>, <span class="comment">//选中状态默认为不选中</span></span><br><span class="line">        <span class="string">&quot;age&quot;</span>: i.toString() + i.toString(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;表格演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置10边距</span></span><br><span class="line">        <span class="comment">//普通表格</span></span><br><span class="line">      <span class="comment">//   child: Table(</span></span><br><span class="line">      <span class="comment">//   border: TableBorder.all(</span></span><br><span class="line">      <span class="comment">//     color: Colors.green</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; TableRow(</span></span><br><span class="line">      <span class="comment">//     children: [</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;name&quot;]), //展示name列</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;gender&quot;]), //展示性别列</span></span><br><span class="line">      <span class="comment">//     ],</span></span><br><span class="line">      <span class="comment">//   )).toList(),</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//H5表格，常用,可排序，可选中</span></span><br><span class="line">      child: DataTable(</span><br><span class="line">        sortColumnIndex: _sortColumnIndex, <span class="comment">//设置排序索引</span></span><br><span class="line">        sortAscending: _sortAscending, <span class="comment">//设置排序方式</span></span><br><span class="line">        columns: [</span><br><span class="line">          DataColumn(</span><br><span class="line">            onSort: (columnIndex, ascending) &#123; <span class="comment">//DataColumn的排序方法</span></span><br><span class="line">              setState(() &#123;</span><br><span class="line">                _sortAscending = ascending; <span class="comment">//设置ascending（排序方式）为当前的_sortAscending</span></span><br><span class="line">                _sortColumnIndex = columnIndex; <span class="comment">//设置columnIndex（排序索引）为当前的_sortColumnIndex</span></span><br><span class="line">                list.sort((begin,end)&#123; <span class="comment">//对数组排序</span></span><br><span class="line">                  <span class="keyword">if</span>(!ascending)&#123; <span class="comment">//如果为desc的排序方式</span></span><br><span class="line">                    <span class="keyword">var</span> c = begin; <span class="comment">//新建c变量等于 begin</span></span><br><span class="line">                    begin = end; <span class="comment">//begin 赋值到 end</span></span><br><span class="line">                    end = c; <span class="comment">//edn赋值到c ，完成数据转换</span></span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//返回begin的name数据，转换成edn的name数据</span></span><br><span class="line">                  <span class="keyword">return</span> begin[<span class="string">&quot;name&quot;</span>].toString().length.compareTo(end[<span class="string">&quot;name&quot;</span>].toString().length);</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            label: Text(<span class="string">&quot;姓名&quot;</span>) <span class="comment">//展示标题为姓名</span></span><br><span class="line">          ),</span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;性别&quot;</span>) <span class="comment">//展示标题为性别</span></span><br><span class="line">          ), </span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;年龄&quot;</span>) <span class="comment">//展示标题为年龄</span></span><br><span class="line">          ), </span><br><span class="line">        ], <span class="comment">//表头列</span></span><br><span class="line">        rows: list.map((e) =&gt; DataRow(</span><br><span class="line">          selected: e[<span class="string">&quot;isSelect&quot;</span>],</span><br><span class="line">          onSelectChanged: (v)&#123; <span class="comment">//点击数据</span></span><br><span class="line">            setState(() &#123; <span class="comment">//改变状态</span></span><br><span class="line">              <span class="keyword">if</span>(e[<span class="string">&quot;isSelect&quot;</span>] != v)&#123; <span class="comment">//如果当前选中状态不等于传过来的状态（选中|不选中）</span></span><br><span class="line">                e[<span class="string">&quot;isSelect&quot;</span>] = v; <span class="comment">//就把他传过来的状态设置为当前状态</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          cells: [</span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;name&quot;</span>])), <span class="comment">//设置姓名内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;gender&quot;</span>])), <span class="comment">//设置性别内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;age&quot;</span>])), <span class="comment">//设置年龄内容列</span></span><br><span class="line">          ]</span><br><span class="line">        )</span><br><span class="line">        ).toList(),<span class="comment">//数组打印</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter卡片（Card）-Widget："><a href="#Flutter卡片（Card）-Widget：" class="headerlink" title="Flutter卡片（Card） Widget："></a>Flutter卡片（Card） Widget：</h2><p>flutter为我们提供了 Card 这个 widget 来展示我们的卡片数据</p>
<p><img src="https://brath.cloud/blogImg/image-20220507111422728.png" alt="image-20220507111422728"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CardDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CardDemo&gt; createState() =&gt; _CardDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CardDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CardDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          list.add(&#123;</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: <span class="number">10</span> + i,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;barth&quot;</span> + i.toString(),</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">   *</span> list构建方法，一定要在 build 方法上面，init方法下面构建，因为代码从上到下执行</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">   <span class="emphasis">*/</span></span></span></span><br><span class="line">  Widget _itemBuilder(BuildContext context,<span class="built_in">int</span> index)&#123;</span><br><span class="line">    <span class="keyword">return</span> Card( <span class="comment">//返回卡片集合</span></span><br><span class="line">      color: Colors.green, <span class="comment">//设置卡片背景色</span></span><br><span class="line">      shadowColor: Colors.grey, <span class="comment">//设置阴影背景色</span></span><br><span class="line">      elevation: <span class="number">5.0</span>, <span class="comment">//设置阴影度</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//于顶部间隔 8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;name&quot;</span>]),<span class="comment">//展示list中的name</span></span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//与上个name间隔8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;age&quot;</span>].toString()), <span class="comment">//展示age内容</span></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">        child: ListView.builder( <span class="comment">//构建listView</span></span><br><span class="line">          itemBuilder: _itemBuilder, <span class="comment">//设置builder方法</span></span><br><span class="line">          itemCount: list.length, <span class="comment">//设置list大小</span></span><br><span class="line">          )</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的（ListTitle）Widget（类似于聊天标签）："><a href="#Flutter的（ListTitle）Widget（类似于聊天标签）：" class="headerlink" title="Flutter的（ListTitle）Widget（类似于聊天标签）："></a>Flutter的（ListTitle）Widget（类似于聊天标签）：</h2><p>Flutter为我们提供了 ListTile 这个 Widget 来展示标签</p>
<p><img src="https://brath.cloud/blogImg/image-20220507112500603.png" alt="image-20220507112500603"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    backgroundColor: Colors.white,</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">    ),</span><br><span class="line">    body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">      <span class="comment">//listView卡片</span></span><br><span class="line">      child: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile( <span class="comment">//创建listTitle</span></span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">204</span>, <span class="number">184</span>, <span class="number">128</span>), <span class="comment">//标签颜色</span></span><br><span class="line">            leading: Icon(Icons.token_sharp), <span class="comment">//左边图标</span></span><br><span class="line">            title: Text(<span class="string">&quot;Brath&quot;</span>),<span class="comment">//主标题数据</span></span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),<span class="comment">//标题文字颜色</span></span><br><span class="line">            subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 1 &quot;</span>), <span class="comment">//副标题数据</span></span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),<span class="comment">//右边图标</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">8</span>),</span><br><span class="line">          ListTile(</span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">197</span>, <span class="number">124</span>, <span class="number">55</span>),</span><br><span class="line">            leading: Icon(Icons.token_sharp),</span><br><span class="line">            title: Text(<span class="string">&quot;Braht 2&quot;</span>),</span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),</span><br><span class="line">           subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 2 &quot;</span>),</span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),</span><br><span class="line">          ),        </span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    </span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter性能优化："><a href="#Flutter性能优化：" class="headerlink" title="Flutter性能优化："></a>Flutter性能优化：</h2><p>先看图片：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507114818793.png" alt="image-20220507114818793"></p>
<p>​		我们以看到，这张图片由三个容器构成，并且点击黄色容器，其数字会增加，理论上来说代码并没有任何问题。</p>
<p>​		但是，在我们打开 检测工具后，发现，当点击黄色容器时，所有容器都会重新渲染，这就造成了性能的损耗！</p>
<p>​		如何优化？</p>
<p>​		代码演示：</p>
<h5 id="使用一个单独的-CountDemo-来对-黄色的容器进行封装，这样就可以做到单独渲染"><a href="#使用一个单独的-CountDemo-来对-黄色的容器进行封装，这样就可以做到单独渲染" class="headerlink" title="使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染"></a>使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</h5><h5 id="因为-setState-会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）"><a href="#因为-setState-会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）" class="headerlink" title="因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）"></a>因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">performanceDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;performanceDemo&gt; createState() =&gt; _performanceDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_performanceDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">performanceDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;性能优化专题&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.red,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.yellow,</span><br><span class="line">            child: CountDemo(),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="strong">**/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CountDemo&gt; createState() =&gt; _CountDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CountDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CountDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">              child: Text(count.toString()),</span><br><span class="line">              onTap: ()&#123;</span><br><span class="line">                setState(() &#123;</span><br><span class="line">                  count ++;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的全局状态管理-Provider-非常重要！"><a href="#Flutter的全局状态管理-Provider-非常重要！" class="headerlink" title="Flutter的全局状态管理 Provider 非常重要！"></a>Flutter的全局状态管理 Provider 非常重要！</h2><h5 id="我们分为四个步骤来学习全局状态管理-Provider"><a href="#我们分为四个步骤来学习全局状态管理-Provider" class="headerlink" title="我们分为四个步骤来学习全局状态管理 Provider"></a>我们分为四个步骤来学习全局状态管理 Provider</h5><h5 id="1、因为全局状态管理是单独的插件，所以我们第一步一定是导包"><a href="#1、因为全局状态管理是单独的插件，所以我们第一步一定是导包" class="headerlink" title="1、因为全局状态管理是单独的插件，所以我们第一步一定是导包"></a>1、因为全局状态管理是单独的插件，所以我们第一步一定是导包</h5><p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者Brath的flutter版本 2.0 为例，使用5.0.0版本<img src="https://brath.cloud/blogImg/image-20220507123010044.png" alt="image-20220507123010044"></p>
<h5 id="2、下载好依赖后，我们在-lib-目录创建文件夹：Provider-并在文件夹内创建一个-Count-provider-dart，作为我们的第一个全局状态类"><a href="#2、下载好依赖后，我们在-lib-目录创建文件夹：Provider-并在文件夹内创建一个-Count-provider-dart，作为我们的第一个全局状态类" class="headerlink" title="2、下载好依赖后，我们在 lib 目录创建文件夹：Provider 并在文件夹内创建一个 Count_provider.dart，作为我们的第一个全局状态类"></a>2、下载好依赖后，我们在 lib 目录创建文件夹：Provider 并在文件夹内创建一个 Count_provider.dart，作为我们的第一个全局状态类</h5><p><img src="https://brath.cloud/blogImg/image-20220507123111058.png" alt="image-20220507123111058"></p>
<p>​		在类中写入代码：</p>
<h5 id="要点：notifyListeners-这个方法的作用就是实现局部刷新"><a href="#要点：notifyListeners-这个方法的作用就是实现局部刷新" class="headerlink" title="要点：notifyListeners() 这个方法的作用就是实现局部刷新"></a>要点：notifyListeners() 这个方法的作用就是实现局部刷新</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountProvider</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _count = <span class="number">0</span>; <span class="comment">//定义初始数量为0</span></span><br><span class="line">  <span class="keyword">get</span> count =&gt; _count; <span class="comment">//get方法用于外部获取count</span></span><br><span class="line">  <span class="keyword">void</span> add()&#123; <span class="comment">//增加方法</span></span><br><span class="line">    _count ++; <span class="comment">//总数+1</span></span><br><span class="line">    notifyListeners();<span class="comment">//通知监听方法</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、我们写一个新的类用于测试全局状态数据"><a href="#3、我们写一个新的类用于测试全局状态数据" class="headerlink" title="3、我们写一个新的类用于测试全局状态数据"></a>3、我们写一个新的类用于测试全局状态数据</h5><p>​		要点：</p>
<p>​			1.获取全局变量：</p>
<h5 id="通过Provider的of方法（泛型我们的全局状态类）传入上下文对象，就可以获取count"><a href="#通过Provider的of方法（泛型我们的全局状态类）传入上下文对象，就可以获取count" class="headerlink" title="通过Provider的of方法（泛型我们的全局状态类）传入上下文对象，就可以获取count"></a>通过Provider的of方法（泛型我们的全局状态类）传入上下文对象，就可以获取count</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Provider.of&lt;CountProvider&gt;(context).count.toString()</span><br></pre></td></tr></table></figure>

<p>​			2.修改全局变量：</p>
<h5 id="通过上下文对象的read方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作"><a href="#通过上下文对象的read方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作" class="headerlink" title="通过上下文对象的read方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作"></a>通过上下文对象的read方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作</h5><h6 id="Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！"><a href="#Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！" class="headerlink" title="Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！"></a>Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！</h6><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.read&lt;CountProvider&gt;().add();</span><br></pre></td></tr></table></figure>



<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ProviderDemo&gt; createState() =&gt; _ProviderDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProviderDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProviderDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider全局状态管理&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            Navigator.of(context).pushNamed(<span class="string">&quot;ProviderDemo2&quot;</span>); <span class="comment">//点击跳转到ProviderDemo2页面</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Icon(Icons.add_task_rounded)),</span><br><span class="line">          Text(</span><br><span class="line">          Provider.of&lt;CountProvider&gt;(context).count.toString() <span class="comment">//通过Provider展示count数据</span></span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 第二个页面</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="emphasis">*/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo2</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider2&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">     body: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>4、在main.dart中修改启动方式</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">//只用 ChangeNotifierProvider 来包裹就只可以调用一个全局类</span></span><br><span class="line">      <span class="comment">// ChangeNotifierProvider(</span></span><br><span class="line">      <span class="comment">//   create: (context)=&gt;CountProvider(),</span></span><br><span class="line">      <span class="comment">//   child: MyApp(),</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//使用 MultiProvider 多状态管理来包裹，即可实现多个状态类</span></span><br><span class="line">      MultiProvider(</span><br><span class="line">          providers: [</span><br><span class="line">            ChangeNotifierProvider(</span><br><span class="line">            create: (context) =&gt; CountProvider(),</span><br><span class="line">          ), </span><br><span class="line">          <span class="comment">//   ChangeNotifierProvider(</span></span><br><span class="line">          <span class="comment">//   create: (context) =&gt; CountProvider2(),</span></span><br><span class="line">          <span class="comment">// ), </span></span><br><span class="line">          ],</span><br><span class="line">    child: MyApp(),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Flutter的网络请求（DIO）"><a href="#Flutter的网络请求（DIO）" class="headerlink" title="Flutter的网络请求（DIO）"></a>Flutter的网络请求（DIO）</h2><h5 id="Flutter在-pub-dev-为我们提供了许多网络请求组件，我们选择用DIO来做请求组件"><a href="#Flutter在-pub-dev-为我们提供了许多网络请求组件，我们选择用DIO来做请求组件" class="headerlink" title="Flutter在 pub.dev 为我们提供了许多网络请求组件，我们选择用DIO来做请求组件"></a>Flutter在 pub.dev 为我们提供了许多网络请求组件，我们选择用DIO来做请求组件</h5><p>使用方法：</p>
<h5 id="1、因为网络请求是单独的插件，所以我们第一步一定是导包"><a href="#1、因为网络请求是单独的插件，所以我们第一步一定是导包" class="headerlink" title="1、因为网络请求是单独的插件，所以我们第一步一定是导包"></a>1、因为网络请求是单独的插件，所以我们第一步一定是导包</h5><p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者Brath的flutter版本 2.0 为例，使用4.0.0版本<img src="https://brath.cloud/blogImg/image-20220507124040380.png" alt="image-20220507124040380"></p>
<h5 id="2、编写代码："><a href="#2、编写代码：" class="headerlink" title="2、编写代码："></a>2、编写代码：</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DioDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;DioDemo&gt; createState() =&gt; _DioDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DioDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DioDemo</span>&gt; </span>&#123;</span><br><span class="line">  Dio _dio = Dio(); <span class="comment">//定义DIO</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">//初始化baseUrl基URL</span></span><br><span class="line">    _dio.options.baseUrl = <span class="string">&quot;https://www.XXX.XXX:0000/&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;网络请求演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _<span class="keyword">get</span>,</span><br><span class="line">            child: Text(<span class="string">&quot;getUserinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ]</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _<span class="keyword">get</span>() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="comment">//第一种传参方式：名文传输</span></span><br><span class="line">    <span class="comment">// var res = await _dio.get(&quot;get/getData?id=1&quot;);</span></span><br><span class="line">    <span class="comment">// print(res.toString()); </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//第二种传参方式：queryParameters包装传输</span></span><br><span class="line">    <span class="keyword">var</span> res2 = <span class="keyword">await</span> _dio.<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;get/getData&quot;</span>,</span><br><span class="line">      queryParameters: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//通过Options来添加 headers 请求头</span></span><br><span class="line">      options: Options(</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">&quot;token&quot;</span>: <span class="string">&quot;header-Token&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res2.toString()); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、如果小伙伴们的请求报错：有以下原因-（参考博客：https-blog-csdn-net-txaz6-article-details-119168489）"><a href="#3、如果小伙伴们的请求报错：有以下原因-（参考博客：https-blog-csdn-net-txaz6-article-details-119168489）" class="headerlink" title="3、如果小伙伴们的请求报错：有以下原因 （参考博客：https://blog.csdn.net/txaz6/article/details/119168489）"></a>3、如果小伙伴们的请求报错：有以下原因 （参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/txaz6/article/details/119168489%EF%BC%89">https://blog.csdn.net/txaz6/article/details/119168489）</a></h5><h5 id="1-请求本地连接，ip地址错误"><a href="#1-请求本地连接，ip地址错误" class="headerlink" title="1.请求本地连接，ip地址错误"></a>1.请求本地连接，ip地址错误</h5><h5 id="2-未添加网络请求权限"><a href="#2-未添加网络请求权限" class="headerlink" title="2.未添加网络请求权限"></a>2.未添加网络请求权限</h5><h5 id="3-请求的地址是http，不是https"><a href="#3-请求的地址是http，不是https" class="headerlink" title="3.请求的地址是http，不是https"></a>3.请求的地址是http，不是https</h5><h5 id="4-与服务端的请求参数不同，导致无法请求到接口"><a href="#4-与服务端的请求参数不同，导致无法请求到接口" class="headerlink" title="4.与服务端的请求参数不同，导致无法请求到接口"></a>4.与服务端的请求参数不同，导致无法请求到接口</h5><h3 id=""><a href="#" class="headerlink" title=""></a></h3><h2 id="Flutter的设计模式（MVVM）（Model-View-ViewModel）"><a href="#Flutter的设计模式（MVVM）（Model-View-ViewModel）" class="headerlink" title="Flutter的设计模式（MVVM）（Model View ViewModel）"></a>Flutter的设计模式（MVVM）（Model View ViewModel）</h2><h4 id="MVVM就是Model-View-ViewModel的简写。"><a href="#MVVM就是Model-View-ViewModel的简写。" class="headerlink" title="MVVM就是Model View ViewModel的简写。"></a>MVVM就是Model View ViewModel的简写。</h4><h5 id="Model-：处理接口请求数据"><a href="#Model-：处理接口请求数据" class="headerlink" title="Model ：处理接口请求数据"></a>Model ：处理接口请求数据</h5><h5 id="View-：展示页面"><a href="#View-：展示页面" class="headerlink" title="View ：展示页面"></a>View ：展示页面</h5><h5 id="ViewModel：处理业务逻辑（相当于Model、View的链接层）"><a href="#ViewModel：处理业务逻辑（相当于Model、View的链接层）" class="headerlink" title="ViewModel：处理业务逻辑（相当于Model、View的链接层）"></a>ViewModel：处理业务逻辑（相当于Model、View的链接层）</h5><h6 id="简单流程：view通知viewModel层，viewModel通知Model层调用接口，viewModel层接收Model的数据，响应给view层展示"><a href="#简单流程：view通知viewModel层，viewModel通知Model层调用接口，viewModel层接收Model的数据，响应给view层展示" class="headerlink" title="简单流程：view通知viewModel层，viewModel通知Model层调用接口，viewModel层接收Model的数据，响应给view层展示"></a>简单流程：view通知viewModel层，viewModel通知Model层调用接口，viewModel层接收Model的数据，响应给view层展示</h6><h4 id="我们通过几个步骤来演示-MVVM-模式的请求流程，以及他的优缺点"><a href="#我们通过几个步骤来演示-MVVM-模式的请求流程，以及他的优缺点" class="headerlink" title="我们通过几个步骤来演示 MVVM 模式的请求流程，以及他的优缺点"></a>我们通过几个步骤来演示 MVVM 模式的请求流程，以及他的优缺点</h4><h5 id="1、首先创建-Model-View-ViewModel-三个文件夹"><a href="#1、首先创建-Model-View-ViewModel-三个文件夹" class="headerlink" title="1、首先创建   Model View ViewModel 三个文件夹"></a>1、首先创建   Model View ViewModel 三个文件夹<img src="https://brath.cloud/blogImg/image-20220507133147052.png" alt="image-20220507133147052"></h5><h5 id="2、编写-Model-层-（请求数据）"><a href="#2、编写-Model-层-（请求数据）" class="headerlink" title="2、编写 Model 层 （请求数据）"></a>2、编写 Model 层 （请求数据）</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmModel</span></span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 获取用户信息方法</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始调用userinfo接口&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> Dio().<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;https://xxx:0000/gerUserInfo&quot;</span>,</span><br><span class="line">      queryParameters: &#123; <span class="comment">//设置请求参数</span></span><br><span class="line">        <span class="string">&quot;userId&quot;</span>: id <span class="comment">//id = viewModel传来的ID</span></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;调用完毕&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="3、编写-View-层-（接收、展示数据）"><a href="#3、编写-View-层-（接收、展示数据）" class="headerlink" title="3、编写 View 层 （接收、展示数据）"></a>3、编写 View 层 （接收、展示数据）</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;MvvmViewDemo&gt; createState() =&gt; _MvvmViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MvvmViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MvvmViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> res;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;View展示页面&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">             <span class="comment">//使用上下文对象的read泛型 ViewModel 类来使用get方法传入 id 获取信息</span></span><br><span class="line">             context.read&lt;MvvmViewModel&gt;().<span class="keyword">get</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: Text(<span class="string">&quot;调用ViewwModel获取用户userinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="4、编写-ViewModel-层-（整合view以及model：view调用ViewModel-，ViewModel-调用-model-返回结果给view）"><a href="#4、编写-ViewModel-层-（整合view以及model：view调用ViewModel-，ViewModel-调用-model-返回结果给view）" class="headerlink" title="4、编写 ViewModel 层 （整合view以及model：view调用ViewModel ，ViewModel 调用 model 返回结果给view）"></a>4、编写 ViewModel 层 （整合view以及model：view调用ViewModel ，ViewModel 调用 model 返回结果给view）</h5><p>tips：在调用完接口后跳转时，因为 Navigator 需要一个上下文对象，但是我们当前没有上下文对象，所以要在main入口定义一个对象：</p>
<p>main.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> GlobalKey&lt;NavigatorState&gt; navigatorkey = GlobalKey&lt;NavigatorState&gt;();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      navigatorKey: navigatorkey, <span class="comment">//在 MaterialApp 中 将 navigatorKey 设置为我们定义的navigatorkey，这也是为什么flutter要求使用 MaterialApp 作为mian根节点的原因</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>MvvmViewModel.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line"> MvvmModel _model = MvvmModel(); <span class="comment">//实例化 model 的对象，因为model是做请求的所以我们调用model</span></span><br><span class="line">  <span class="keyword">void</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">//使用model的get方法传入id来获取数据，注意使用 async 和 await 来做异步调用防止接口错误导致程序等待超时</span></span><br><span class="line">    Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line">    <span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line">    <span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line">    <span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line">    <span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br><span class="line">    <span class="comment">//使用mian中的 navigatorkey 的 currentContext 来获取当前的上下文对象，如果是dart2.0以后需要加一个 ！否则会报错，因为参数必须不能为空</span></span><br><span class="line">    Navigator.of(navigatorkey.currentContext!).pushNamed(<span class="string">&quot;DioDemo&quot;</span>); <span class="comment">//我们在调用完接口后跳转到 DioDemo页面</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="5、DIO返回值-Response-介绍"><a href="#5、DIO返回值-Response-介绍" class="headerlink" title="5、DIO返回值 Response 介绍"></a>5、DIO返回值 <strong>Response</strong> 介绍</h5><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line"><span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line"><span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line"><span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line"><span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br></pre></td></tr></table></figure>



<p>本篇至此就结束啦！如果你读到了这里，不妨给我点个赞，我叫Brath，是一个非科班出身的技术狂！</p>
<p>我的博客 brath.top 欢迎访问！</p>
<p>全文共计  15332词</p>
<p>本文由Brath编写，禁止转载，违法必究‘！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Flutter%E6%96%87%E6%A1%A3/" data-id="clc5wl9l3001geol6a0wleykj" data-title="Flutter全网最全学习笔记！" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Flutter开发中使用WIFI真机调试" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Flutter%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BD%BF%E7%94%A8WIFI%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.702Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Flutter%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BD%BF%E7%94%A8WIFI%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95/">Flutter开发中使用WIFI真机调试</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Flutter开发中使用WIFI真机调试"><a href="#Flutter开发中使用WIFI真机调试" class="headerlink" title="Flutter开发中使用WIFI真机调试"></a>Flutter开发中使用WIFI真机调试</h1><h4 id="使用vscode开发flutter，用wifi-或者-手机热点进行-无线调试过程"><a href="#使用vscode开发flutter，用wifi-或者-手机热点进行-无线调试过程" class="headerlink" title="使用vscode开发flutter，用wifi 或者 手机热点进行 无线调试过程"></a>使用vscode开发flutter，用wifi 或者 手机热点进行 无线调试过程</h4><h4 id="1-手机连接wifi后在设置中找到ip和端口"><a href="#1-手机连接wifi后在设置中找到ip和端口" class="headerlink" title="1.手机连接wifi后在设置中找到ip和端口"></a>1.手机连接wifi后在设置中找到ip和端口</h4><h4 id="2-在vscode终端输入-adb-connect-手机IP-手机端口"><a href="#2-在vscode终端输入-adb-connect-手机IP-手机端口" class="headerlink" title="2.在vscode终端输入 adb connect 手机IP:手机端口"></a>2.在vscode终端输入 adb connect 手机IP:手机端口</h4><h4 id="3-作者在CSDN这个烂环境中没找到有用的信息，全是粘贴的，所以希望这篇文章帮助到你，你可以把我的地址列出来，粘贴可以，抄袭可耻！"><a href="#3-作者在CSDN这个烂环境中没找到有用的信息，全是粘贴的，所以希望这篇文章帮助到你，你可以把我的地址列出来，粘贴可以，抄袭可耻！" class="headerlink" title="3.作者在CSDN这个烂环境中没找到有用的信息，全是粘贴的，所以希望这篇文章帮助到你，你可以把我的地址列出来，粘贴可以，抄袭可耻！"></a>3.作者在CSDN这个烂环境中没找到有用的信息，全是粘贴的，所以希望这篇文章帮助到你，你可以把我的地址列出来，粘贴可以，抄袭可耻！</h4><h4 id="4-完成以上步骤，手机端应有开启无线调试的提示，记得提前打开开发者模式。"><a href="#4-完成以上步骤，手机端应有开启无线调试的提示，记得提前打开开发者模式。" class="headerlink" title="4.完成以上步骤，手机端应有开启无线调试的提示，记得提前打开开发者模式。"></a>4.完成以上步骤，手机端应有开启无线调试的提示，记得提前打开开发者模式。</h4>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Flutter%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BD%BF%E7%94%A8WIFI%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95/" data-id="clc5wl9jr0007eol6aahncxs5" data-title="Flutter开发中使用WIFI真机调试" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Flutter_GetX文档" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Flutter_GetX%E6%96%87%E6%A1%A3/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.700Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Flutter_GetX%E6%96%87%E6%A1%A3/">Flutter GETX框架</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>​		GetX 是 Flutter 上的一个轻量且强大的解决方案：高性能的状态管理、智能的依赖注入和便捷的路由管理。</p>
<p>​		与其说是一个状态管理库，倒不如是是一个简化 Flutter 开发的百宝箱。它提供了很多工具来简化我们的开发，本篇我们先对 GetX 有一个大概的认识，然后接下来的篇章再将 GetX 的具体应用。</p>
<h2 id="GetX-工具介绍"><a href="#GetX-工具介绍" class="headerlink" title="GetX 工具介绍"></a><strong>GetX 工具介绍</strong></h2><p>官方文档给出关于 GetX 的介绍如下：</p>
<blockquote>
<p>GetX is an extra-light and powerful solution for Flutter. It combines high-performance state management, intelligent dependency injection, and route management quickly and practically. GetX是一个超轻量且强大的 Flutter 应用解决方案。它组合了高性能的状态管理、智能的依赖注入以及快速可用的路由管理。</p>
</blockquote>
<p>而实际上，GetX 还有更多的小工具，示例如下：</p>
<h4 id="状态管理"><a href="#状态管理" class="headerlink" title="状态管理"></a>状态管理</h4><ul>
<li>Obx是配合Rx响应式变量使用、GetBuilder是配合update使用：请注意，这完全是俩套定点刷新控件的方案。<br> 区别：前者响应式变量变化，Obx自动刷新；后者需要使用update手动调用刷新</li>
<li>每一个响应式变量，都需要生成对应的GetStream，占用资源大于基本数据类型，会对内存造成一定压力</li>
<li>GetBuilder内部实际上是对StatefulWidget的封装，所以占用资源极小（推荐使用）</li>
</ul>
<h4 id="控制器的注入"><a href="#控制器的注入" class="headerlink" title="控制器的注入"></a>控制器的注入</h4><ul>
<li>静态路由绑定</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AsWorkStatisticsBinding</span> <span class="keyword">implements</span> <span class="title class_">Bindings</span> &#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">void</span> <span class="title function_">dependencies</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Get</span>.<span class="property">lazyPut</span>&lt;<span class="title class_">AsWorkStatisticsController</span>&gt;(<span class="function">() =&gt;</span> <span class="title class_">AsWorkStatisticsController</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> final <span class="title class_">List</span>&lt;<span class="title class_">GetPage</span>&gt; routes = [</span><br><span class="line">    <span class="title class_">GetPage</span>(</span><br><span class="line">      <span class="attr">name</span>: workStatisticsPage,</span><br><span class="line">      <span class="attr">page</span>: <span class="function">() =&gt;</span> <span class="keyword">const</span> <span class="title class_">AsWorkStatisticsPage</span>(),</span><br><span class="line">      <span class="attr">binding</span>: <span class="title class_">AsWorkStatisticsBinding</span>(),</span><br><span class="line">    ),</span><br><span class="line">];</span><br><span class="line"><span class="title class_">Get</span>.<span class="title function_">toNamed</span>(<span class="title class_">ASRouteConfig</span>.<span class="property">workPlanDetailPage</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>动态路由绑定</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get<span class="selector-class">.to</span>(AsWorkStatisticsPage(),binding: <span class="built_in">AsWorkStatisticsBinding</span>());</span><br></pre></td></tr></table></figure>

<ul>
<li>页面注入</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Get</span>.<span class="property">lazyPut</span>&lt;<span class="title class_">AsWorkStatisticsController</span>&gt;(<span class="function">() =&gt;</span> <span class="title class_">AsWorkStatisticsController</span>());</span><br></pre></td></tr></table></figure>

<h4 id="动态-x2F-简单路由和静态-x2F-命名路由"><a href="#动态-x2F-简单路由和静态-x2F-命名路由" class="headerlink" title="动态&#x2F;简单路由和静态&#x2F;命名路由"></a>动态&#x2F;简单路由和静态&#x2F;命名路由</h4><p>请注意命名路由，只需要在api结尾加上Named即可，举例：</p>
<ul>
<li>默认：Get.to(SomePage());</li>
<li>命名路由：Get.toNamed(“&#x2F;somePage”);</li>
<li>导航到新的页面</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.to(NextScreen());</span><br><span class="line">Get.toNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>关闭SnackBars、Dialogs、BottomSheets或任何你通常会用Navigator.pop(context)关闭的东西</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get<span class="selector-class">.back</span>();</span><br></pre></td></tr></table></figure>

<ul>
<li>进入下一个页面，但没有返回上一个页面的选项（用于SplashScreens，登录页面等）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.off(NextScreen());</span><br><span class="line">Get.offNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>进入下一个界面并取消之前的所有路由（在购物车、投票和测试中很有用）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.offAll(NextScreen());</span><br><span class="line">Get.offAllNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>发送数据到其它页面</li>
</ul>
<p>只要发送你想要的参数即可。Get在这里接受任何东西，无论是一个字符串，一个Map，一个List，甚至一个类的实例。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Get</span>.<span class="title function_">to</span>(<span class="title class_">NextScreen</span>(), <span class="attr">arguments</span>: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br><span class="line"><span class="title class_">Get</span>.<span class="title function_">toNamed</span>(<span class="string">&quot;/NextScreen&quot;</span>, <span class="attr">arguments</span>: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>在你的类或控制器上。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(Get.arguments);</span><br><span class="line"><span class="comment">//print out: Get is the best</span></span><br></pre></td></tr></table></figure>

<ul>
<li>要导航到下一条路由，并在返回后立即接收或更新数据</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.to(Payment());</span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/payment&quot;</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>在另一个页面上，发送前一个路由的数据</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.back(result: <span class="string">&#x27;success&#x27;</span>);</span><br><span class="line"><span class="comment">// 并使用它，例：</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">data</span> == <span class="string">&#x27;success&#x27;</span>) madeAnything();</span><br></pre></td></tr></table></figure>

<ul>
<li>跳转重复页面，可以这样写</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.to(XxxxPage(), preventDuplicates: <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line">Get.toNamed(<span class="string">&#x27;xxx&#x27;</span>,  preventDuplicates: <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>

<ul>
<li>如果你不想使用GetX语法，只要把 Navigator（大写）改成 navigator（小写），你就可以拥有标准导航的所有功能，而不需要使用context，例如：</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认的Flutter导航</span></span><br><span class="line">Navigator.of(context).push(</span><br><span class="line">  context,</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Flutter语法获得，而不需要context。</span></span><br><span class="line">navigator.push(</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (_) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// get语法</span></span><br><span class="line">Get.to(HomePage());</span><br></pre></td></tr></table></figure>

<h4 id="GetView的使用"><a href="#GetView的使用" class="headerlink" title="GetView的使用"></a>GetView的使用</h4><p>GetView只是对已注册的Controller有一个名为controller的getter的const Stateless的Widget，如果我们只有单个控制器作为依赖项，那我们就可以使用GetView，而不是使用StatelessWidget，并且避免了写Get.Find()。</p>
<p>GetView的使用方法非常简单，只是要将你的视图层继承自GetView并传入需要注册的控制器并Get.put()即可：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GetViewAndGetWidgetExample</span> <span class="keyword">extends</span> <span class="title class_">GetView</span>&lt;GetViewCountController&gt; &#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget <span class="title function_">build</span><span class="params">(BuildContext context)</span> &#123;</span><br><span class="line"></span><br><span class="line">    Get.put(GetViewCountController());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="路由"><a href="#路由" class="headerlink" title="路由"></a><strong>路由</strong></h3><p>路由支持命名路由和匿名路由：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Get.to(() =&gt; Home());</span><br><span class="line">Get.toNamed(&#x27;/home&#x27;);</span><br><span class="line">// 返回上一个页面</span><br><span class="line">Get.back();</span><br><span class="line">// 使用下一个页面替换</span><br><span class="line">Get.off(NextScreen());</span><br><span class="line">// 清空导航堆栈全部页面</span><br><span class="line">Get.offAll(NextScreen());</span><br><span class="line">// 获取命名路由参数</span><br><span class="line">print(Get.parameters[&#x27;id&#x27;]);</span><br><span class="line">print(Get.parameters[&#x27;name&#x27;]);</span><br></pre></td></tr></table></figure>

<p>GetX 的路由好处是不依赖于 <code>context</code>，十分简洁，更多路由介绍可以参考：**<a href="https://link.zhihu.com/?target=https://github.com/jonataslaw/getx/blob/master/documentation/en_US/route_management.md">GetX 路由介绍官方文档</a>**。</p>
<h2 id="SnackBar"><a href="#SnackBar" class="headerlink" title="SnackBar"></a><strong>SnackBar</strong></h2><p>Flutter 自身携带的 SnackBar 有很多限制，而 GetX 的非常简单，当然也有更多的样式配置和位置配置参数。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get.snackbar(&#x27;SnackBar&#x27;, &#x27;这是GetX的SnackBar&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="对话框"><a href="#对话框" class="headerlink" title="对话框"></a><strong>对话框</strong></h2><p>对话框也一样，默认的对话框开箱即用。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Get.defaultDialog(</span><br><span class="line">  title: &#x27;对话框&#x27;,</span><br><span class="line">  content: Text(&#x27;对话框内容&#x27;),</span><br><span class="line">  onConfirm: () &#123;</span><br><span class="line">    print(&#x27;Confirm&#x27;);</span><br><span class="line">    Get.back();</span><br><span class="line">  &#125;,</span><br><span class="line">  onCancel: () &#123;</span><br><span class="line">    print(&#x27;Cancel&#x27;);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h2 id="内存缓存"><a href="#内存缓存" class="headerlink" title="内存缓存"></a><strong>内存缓存</strong></h2><p>GetX 可以缓存内容对象，以便在不同页面共享数据。使用的时候需要注意，需要先 <code>put</code> 操作再 <code>find</code>操作，否则会抛异常。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.put(CacheData(name: &#x27;这是缓存数据&#x27;));</span><br><span class="line">CacheData cache = Get.find();</span><br></pre></td></tr></table></figure>

<h2 id="离线存储"><a href="#离线存储" class="headerlink" title="离线存储"></a><strong>离线存储</strong></h2><p>GetX 提供了一个 <strong><a href="https://link.zhihu.com/?target=https://pub.flutter-io.cn/packages/get_storage">get_storage</a></strong> 插件用于离线存储，与 <code>shared_preferences</code> 相比，其优点是纯 Dart 编写，不依赖于原生，因此可以在安卓、iOS、Web、Linux、Mac 等多个平台使用。<code>GetStorage</code> 是基于内存和文件存储的，当内存容器中有数据时优先从内存读取。同时在构建 GetStorage 对象到时候指定存储的文件名以及存储数据的容器。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GetStorage storage = GetStorage();</span><br><span class="line">storage.write(&#x27;name&#x27;, &#x27;岛上码农&#x27;);</span><br><span class="line">storage.read(&#x27;name&#x27;);</span><br></pre></td></tr></table></figure>

<h2 id="更改主题"><a href="#更改主题" class="headerlink" title="更改主题"></a><strong>更改主题</strong></h2><p>可以说是一行代码搞定深色和浅色模式，也可以更改为自定义主题 —— <strong>老板让你根据手机壳改主体颜色的需求</strong>已经搞定了一大半了！</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.changeTheme(</span><br><span class="line">  Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><img src="https://brath.cloud/blogImg/v2-196c01dbae06a8e68132fcd94e3983a6_b.jpg" alt="img"></p>
<h2 id="多语言支持"><a href="#多语言支持" class="headerlink" title="多语言支持"></a><strong>多语言支持</strong></h2><p>多语言支持使用数据字典完成，在 <code>GetMaterialApp</code> 指定字典对象（继承自 <code>Translations</code>），使用字符串的时候假设<code>.tr</code> 后缀，就可以在切换语言的时候自动切换字符串对应语言的翻译了。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">class GetXDemo extends StatelessWidget &#123;</span><br><span class="line">  // 省略其他代码</span><br><span class="line">  TextButton(</span><br><span class="line">    onPressed: () &#123;</span><br><span class="line">      var locale = Locale(&#x27;en&#x27;, &#x27;US&#x27;);</span><br><span class="line">      Get.updateLocale(locale);</span><br><span class="line">    &#125;,</span><br><span class="line">    child: Text(&#x27;name&#x27;.tr),</span><br><span class="line">  ),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Messages extends Translations &#123;</span><br><span class="line">  @override</span><br><span class="line">  Map&lt;String, Map&lt;String, String&gt;&gt; get keys =&gt; &#123;</span><br><span class="line">        &#x27;en_US&#x27;: &#123;</span><br><span class="line">          &#x27;name&#x27;: &#x27;Island Coder&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x27;zh_CN&#x27;: &#123;</span><br><span class="line">          &#x27;name&#x27;: &#x27;岛上码农&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return GetMaterialApp(</span><br><span class="line">      translations: Messages(),</span><br><span class="line">      locale: Locale(&#x27;zh&#x27;, &#x27;CN&#x27;),</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      navigatorKey: Get.key,</span><br><span class="line">      title: &#x27;Flutter Demo&#x27;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">        brightness: Brightness.light,</span><br><span class="line">      ),</span><br><span class="line">      home: GetXDemo(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GetX-的理念"><a href="#GetX-的理念" class="headerlink" title="GetX 的理念"></a><strong>GetX 的理念</strong></h2><p>GetX有三个基本的理念，分别是性能、生产力和组织性（Organization）。</p>
<ul>
<li>性能（Performance）：GetX 关注性能并最小化资源消耗。GetX 不使用 <code>Stream</code> 或 <code>ChangeNotifier</code>。</li>
<li>生产力（Productivity）：GetX 使用简洁愉悦的语法。不管你要做什么，使用 GetX都会觉得简便。这使得开发的时间大大节省，并且保证应用性能的最大化。通常来说，开发者需要关注从内存中移除控制器。而使用 GetX 的时候，则无需这么做。当控制器不被使用的时候，资源会自动从内存中释放。如果确实需要常住内存，那就需要在依赖中声明 <code>permanent:true</code>。通过这种方式，可以降低内存中有过多不必要依赖对象的风险。同时，依赖默认也是懒加载。</li>
<li>组织性（Organization）：GetX 可以将视图、展示逻辑、业务逻辑、依赖注入和导航完全解耦。路由之间跳转无需 <code>context</code>，因此我们的导航不会依赖组件树。也不需要使用通过 <code>InheritedWidget</code> 的 <code>context</code> 访问控制器或 BLOC 对象，因此可以将展示逻辑和业务逻辑从虚拟的组件层分离。我们也不需要像 MultiProvider 那样往组件树中注入 Controller&#x2F;Model&#x2F;Bloc 等类对象。因此可以将依赖注入和视图分离。</li>
</ul>
<h2 id="GetX-生态"><a href="#GetX-生态" class="headerlink" title="GetX 生态"></a><strong>GetX 生态</strong></h2><p>GetX 有很多特性，使得编码变得容易。每个特性之间是相互独立的，并且只会在使用的时候才启动。例如，如果仅仅是使用状态管理，那么只有状态管理会被编译。而如果只使用路由，那么状态管理的部分就不会编译。</p>
<p>GetX 有一个很大的生态，包括了大型的社区维护，大量的协作者（GitHub 上看有132位），并且承诺只要 Flutter 存在就会继续维护下去。而且 GetX 兼容 Android, iOS, Web, Mac, Linux, Windows多个平台。GetX 甚至还有服务端版本 **<a href="https://link.zhihu.com/?target=https://github.com/jonataslaw/get_server">Get_Server</a>**（感觉Flutter要一统程序员界啊，啥时候支持鸿蒙？）。</p>
<p>为了简化开发，GetX 还提供了脚手架工具**<a href="https://link.zhihu.com/?target=https://pub.flutter-io.cn/packages/get_cli">GET_CLI</a>**和 VSCode 插件<code>GetX Snippets</code>（也有Android Studio和 Intellij 插件）。提供了如下快速代码模板：</p>
<ul>
<li><p>getmain：GetX 的 main.dart代码；</p>
</li>
<li><p>getmodel：Model 类代码，包括了 fromJson 和 toJson 方法</p>
</li>
<li><p>其他，输入 getxxxx 根据提示生成即可，具体参考：**<a href="https://link.zhihu.com/?target=https://marketplace.visualstudio.com/items?itemName=get-snippets.get-snippets">GetX Snippets 介绍</a>**。</p>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a><strong>总结</strong></h2><p>本篇对 GetX 插件做了简单的介绍，可以看到 GetX 的生态确实很丰富，感觉是一个集大成者，GetX 基本上涵盖了 Flutter应用开发的很大一部分，如路由、主题、多语言、弹层、状态管理、依赖注入、网络请求封装等等。GetX看着像一个框架， 但实际上它的各个模块是独立的，其实是一个工具箱。对于开发的时候，可以用它的全家桶，也可以从中任取所需的模块到我们的应用中使用。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Flutter_GetX%E6%96%87%E6%A1%A3/" data-id="clc5wl9jt0009eol60skh7gsa" data-title="Flutter GETX框架" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Flutter 流畅度优化组件 Keframe" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Flutter%20%E6%B5%81%E7%95%85%E5%BA%A6%E4%BC%98%E5%8C%96%E7%BB%84%E4%BB%B6%20Keframe/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.697Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Flutter%20%E6%B5%81%E7%95%85%E5%BA%A6%E4%BC%98%E5%8C%96%E7%BB%84%E4%BB%B6%20Keframe/">Flutter 流畅度优化组件 Keframe</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>最近在开发一款APP，核心场景类似于帖子这类的，所以下拉加载页面的流畅度成为最棘手的问题，在掘金上看见了这篇文章： <a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>
<p>Nayuta 的 Keframe 组件正好可以满足帧率优化的问题</p>
<h3 id="项目依赖："><a href="#项目依赖：" class="headerlink" title="项目依赖："></a>项目依赖：</h3><p>在 <code>pubspec.yaml</code> 中添加 <code>keframe</code> 依赖</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">keframe:</span> <span class="string">version</span></span><br></pre></td></tr></table></figure>

<p>组件仅区分非空安全与空安全版本</p>
<p>非空安全使用： <code>1.0.2</code></p>
<p>空安全版本使用： <code>2.0.2</code></p>
<p>github 地址：<a href="https://link.juejin.cn/?target=https://github.com/LianjiaTech/keframe">github.com&#x2F;LianjiaTech…</a></p>
<p>pub 查看：<a href="https://link.juejin.cn/?target=https://pub.dev/packages/keframe">pub.dev&#x2F;packages&#x2F;ke…</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#SizeCacheWidget用来包裹最外层的list</span><br><span class="line">#FrameSeparateWidget用来包裹list的子集即可    </span><br><span class="line">example:</span><br><span class="line">SizeCacheWidget(</span><br><span class="line">	child：ListView || CustomScrollView(</span><br><span class="line">    	slivers[</span><br><span class="line">            SliverList(</span><br><span class="line">            	delegate: SliverChildBuilderDelegate</span><br><span class="line">                (BuildContext context, <span class="built_in">int</span> index)&#123;</span><br><span class="line">                    <span class="keyword">return</span> FrameSeparateWidget(</span><br><span class="line">                    	child: ···</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>



<h3 id="快速上手："><a href="#快速上手：" class="headerlink" title="快速上手："></a>快速上手：</h3><p>如下图所示</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83d16f3b2a3e45b79fc73d7a52774696~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>假如现在页面由 A、B、C、D 四部分组成，每部分耗时 10ms，在页面时构建为 40ms。使用分帧组件  <code>FrameSeparateWidget</code> 嵌套每一个部分。页面构建时会在第一帧渲染简单的占位，在后续四帧内分别渲染 A、B、C、D。</p>
<p>对于列表，在每一个 item 中嵌套 <code>FrameSeparateWidget</code>，并将 <code>ListView</code> 嵌套在 <code>SizeCacheWidget</code> 内即可。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffecd49bf9ba4379984a22ef79663104~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<hr>
<h2 id="构造函数说明"><a href="#构造函数说明" class="headerlink" title="构造函数说明"></a>构造函数说明</h2><p>FrameSeparateWidget ：分帧组件，将嵌套的 widget 单独一帧渲染</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>index</td>
<td>否</td>
<td>分帧组件 id，<strong>使用 SizeCacheWidget 的场景必传</strong>，SizeCacheWidget 中维护了 index 对应的 Size 信息</td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>实际需要渲染的 widget</td>
</tr>
<tr>
<td>Widget</td>
<td>placeHolder</td>
<td>否</td>
<td>占位 widget，尽量设置简单的占位，不传默认是 Container()</td>
</tr>
</tbody></table>
<p>SizeCacheWidget：缓存子节点中，分帧组件嵌套的<strong>实际 widget 的尺寸信息</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>子节点中如果包含分帧组件，则缓存<strong>实际的 widget 尺寸</strong></td>
</tr>
<tr>
<td>int</td>
<td>estimateCount</td>
<td>否</td>
<td>预估屏幕上子节点的数量，提高快速滚动时的响应速度</td>
</tr>
</tbody></table>
<hr>
<h2 id="方案设计与分析："><a href="#方案设计与分析：" class="headerlink" title="方案设计与分析："></a>方案设计与分析：</h2><p>卡顿的本质，就是 <strong>单帧的绘制时间过长</strong>。基于此自然衍生出两种思路解决：</p>
<p>1、减少一帧的绘制耗时，因为导致耗时过长的原因有很多，比如不合理的刷新，或者绘制时间过长，都有可能，需要具体问题具体分析，后面我会分享一些我的优化经验。</p>
<p><strong>2、在不对耗时优化下，将一帧的任务拆分到多帧内，保证每一帧都不超时。这也是本组件的设计思路，分帧渲染。</strong></p>
<p>如下图所示:</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb09c9aadc5d45c9b966661c8d73e4c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>原理并不复杂，问题在于如何在 Flutter 中实践这一机制。</p>
<p>因为涉及到帧与系统的调度，自然联想到看 <code>SchedulerBinding</code> 中有无现成的 API。</p>
<p>发现了 <code>scheduleTask</code> 方法，这是系统提供的一个执行任务的方法，但这个方法存在两个问题：</p>
<ul>
<li>1、其中的渲染任务是优先级进行堆排序，而堆排序是<strong>不稳定</strong>排序，这会导致任务的执行顺序并非 FIFO。从效果上来看，就是列表不会按照顺序渲染，而是会出现跳动渲染的情况</li>
<li>2、这个方法本身存在调度问题，我已经提交 issue 与 pr，不过一直卡在单元测试上，如果感兴趣可以以在这里交流谈论。</li>
</ul>
<p><a href="https://link.juejin.cn/?target=https://github.com/flutter/flutter/pull/82781">fix: Tasks scheduled through ‘SchedulerBinding.instance.scheduleTask’… #82781 </a></p>
<p>最终，参考这个设计结合 <code>endOfFrame</code> 方法的使用，完成了分帧队列。整个渲染流程变为下图所示：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb9d177b4b0847339eaf952a7ef67cca~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>对于列表构建场景来说，假设屏幕上能显示五个 item。首先在第一帧的时候，列表会渲染 5 个占位的 Widget，同时添加 5 个高优先级任务到队列中，这里的任务可以是简单的将占位 Widget 和实际 item进行替换，也可通过渐变等动画提升体验。在后续的五帧中占位 Widget 依次被替换成实际的列表 item。</p>
<p>在  <a target="_blank" rel="noopener" href="https://juejin.cn/post/6940134891606507534">ListView流畅度翻倍！！Flutter卡顿分析和通用优化方案</a>  这篇文章中有更加详细的分析。</p>
<h2 id="一些展示效果（Example-说明请查看-Github）"><a href="#一些展示效果（Example-说明请查看-Github）" class="headerlink" title="一些展示效果（Example 说明请查看 Github）"></a>一些展示效果（Example 说明请查看 <a href="https://link.juejin.cn/?target=https://github.com/LianjiaTech/keframe/blob/master/README-ZH.md">Github</a>）</h2><p>卡顿的页面往往都是由多个复杂 widget 同时渲染导致。通过为复杂的 widget 嵌套分帧组件 <code>FrameSeparateWidget</code>。渲染时，分帧组件会在第一帧同时渲染多个 <code>palceHolder</code>，之后连续的多帧内依次渲染复杂子项，以此提升页面流畅度。</p>
<p>例如 example 中的优化前示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">              itemCount: childCount,</span><br><span class="line">              itemBuilder: (c, i) =&gt; CellWidget(</span><br><span class="line">                color: i % <span class="number">2</span> == <span class="number">0</span> ? Colors.red : Colors.blue,</span><br><span class="line">                index: i,</span><br><span class="line">              ),</span><br><span class="line">            )</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>

<p>其中 <code>CellWidget</code> 高度为 60，内部嵌套了三个 <code>TextField</code> 的组件（整体构建耗时在 9ms 左右）。</p>
<p>优化仅需为每一个 item 嵌套分帧组件，并为其设置 <code>placeHolder</code>（placeHolder 尽量简单，样式与实际 item 接近即可）。</p>
<p>在列表情况下，给 ListView 嵌套 <code>SizeCacheWidget</code>，同时建议将预加载范围 <code>cacheExtent</code> 设置大一点，例如 500（该属性默认为 250），提升慢速滑动时候的体验。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f33ddd7d9de4e369b0e457f84171cc8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210611_194905.gif"> (占位与实际列表项不一致时，首次渲染抖动，二次渲染正常)</p>
<p>此外，也可以给 item 嵌套透明度&#x2F;位移等动画，优化视觉上的效果。</p>
<p>效果如下图：</p>
<table>
<thead>
<tr>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb7d1361ae7842df954bb1c559e2ec54~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133310.gif"></th>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ee6827f7eed4463a1a8a5b00a58fd6e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133848.gif"></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
</tr>
</tbody></table>
<hr>
<h2 id="分帧的成本"><a href="#分帧的成本" class="headerlink" title="分帧的成本"></a>分帧的成本</h2><p>当然分帧方案也非十全十美，在我看来主要有两点成本：</p>
<p>1、额外的构建开销：整个构建过程的构建消耗由「n * widget消耗 」变成了「n *（ widget + 占位）消耗 + 系统调度 n 帧消耗」。可以看出，额外的开销主要由占位的复杂度决定。如果占位只是简单的 Container，测试后发现整体构建耗时大概提升在 15 % 左右。这种额外开销对于当下的移动设备而言，成本几乎可以不计。</p>
<p>2、视觉上的变化：如同上面的演示，组件会将 item 分帧渲染，页面在视觉上出现占位变成实际 widget 的过程。但其实由于列表存在缓存区域（建议将缓存区调大），在高端机或正常滑动情况下用户并无感知。而在中低端设备上快速滑动能感觉到切换的过程，但比严重顿挫要好。</p>
<hr>
<h2 id="优化前后对比演示"><a href="#优化前后对比演示" class="headerlink" title="优化前后对比演示"></a>优化前后对比演示</h2><p>注：gif 帧率只有20</p>
<table>
<thead>
<tr>
<th>优化前</th>
<th>优化后</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f20f593cc144b72a1df4bdae57a165c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化前"></td>
<td><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05aea6de421545b9bbf868c344a9afe9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化后"></td>
</tr>
</tbody></table>
<hr>
<h2 id="最后：一点点思考"><a href="#最后：一点点思考" class="headerlink" title="最后：一点点思考"></a>最后：一点点思考</h2><p>列表优化篇到此告一段落，在整个开源实践过程中，有两点感触较深：</p>
<p>作者：Nayuta<br>链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Flutter%20%E6%B5%81%E7%95%85%E5%BA%A6%E4%BC%98%E5%8C%96%E7%BB%84%E4%BB%B6%20Keframe/" data-id="clc5wl9jr0006eol679ht8bn7" data-title="Flutter 流畅度优化组件 Keframe" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Elasticsearch7配置证书" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Elasticsearch7%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.695Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Elasticsearch7%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6/">ELASTICSEARCH7.X安全性之访问密码设置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="ELASTICSEARCH7-X安全性之访问密码设置"><a href="#ELASTICSEARCH7-X安全性之访问密码设置" class="headerlink" title="ELASTICSEARCH7.X安全性之访问密码设置"></a>ELASTICSEARCH7.X安全性之访问密码设置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当我们安装完ElasticSearch的时候发现，访问过程中我们没有任何安全认证就可以直接访问并操作。如果是生产环境，端口向外暴露的话，那么对数据的安全性是无法得到保障的。</span><br></pre></td></tr></table></figure>

<p>一般解决方案有</p>
<ul>
<li>开启ElasticSearch认证插件，访问的时候添加账密不就好了</li>
<li>当然也可以通过nginx作代理防护</li>
</ul>
<p>本文主要讲解通过启用X-Pack来设置ElasticSearch的访问密码。</p>
<p>集群与单据环境都适合次方法</p>
<ul>
<li>集群与单据环境配置的区别就是，集群需要在某一台生成证书然后拷贝到其它节点目录下。</li>
<li>集群环境重设置密码的时候需要整个集群节点都已启动，可在任一台处修改。</li>
</ul>
<h2 id="2-X-PACK简介"><a href="#2-X-PACK简介" class="headerlink" title="2.X-PACK简介"></a>2.X-PACK简介</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">X-Pack是Elastic Stack扩展功能，提供安全性，警报，监视，报告，机器学习和许多其他功能。 ES7.0+之后，默认情况下，当安装Elasticsearch时，会自动安装X-Pack，无需单独再安装。自6.8以及7.1+版本之后，基础级安全永久免费了。</span><br><span class="line">在使用的时候主要需要配置一下证书，以及修改配置文件（config/elasticsearch.yml ）</span><br></pre></td></tr></table></figure>

<h2 id="3-证书配置"><a href="#3-证书配置" class="headerlink" title="3.证书配置"></a>3.证书配置</h2><h3 id="3-1生成节点证书"><a href="#3-1生成节点证书" class="headerlink" title="3.1生成节点证书"></a>3.1生成节点证书</h3><p>切换到 elasticsearch 安装文件目录 bin 下 ：示例：&#x2F;usr&#x2F;local&#x2F;elasticsearch-7.4.0&#x2F;bin<br>借助elasticsearch-certutil命令生成证书：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./elasticsearch-certutil ca -out config/certs/elastic-certificates.p12 -pass</span><br></pre></td></tr></table></figure>

<p>这里单独设置了一个 证书文件目录 config&#x2F;certs<br><img src="https://www.freesion.com/images/951/a3d0c1934c0ed0f8440f830d63e96dbf.png" alt="在这里插入图片描述"></p>
<p>生成后的证书<br><img src="https://www.freesion.com/images/953/de92ac2cf73d1ed0da994f9d1066e8f1.png" alt="在这里插入图片描述"></p>
<h3 id="3-2修改配置"><a href="#3-2修改配置" class="headerlink" title="3.2修改配置"></a>3.2修改配置</h3><p>配置通信证书 &gt; 需要在 config目前下elasticsearch.yml 配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 开启xpack</span><br><span class="line">xpack.security.enabled: true</span><br><span class="line">xpack.license.self_generated.type: basic</span><br><span class="line">xpack.security.transport.ssl.enabled: true</span><br><span class="line"># 证书配置</span><br><span class="line">xpack.security.transport.ssl.verification_mode: certificate</span><br><span class="line">xpack.security.transport.ssl.keystore.path: certs/elastic-certificates.p12</span><br><span class="line">xpack.security.transport.ssl.truststore.path: certs/elastic-certificates.p12</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其它配置（可选）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#跨域配置</span><br><span class="line">http.cors.enabled: true</span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br><span class="line">http.cors.allow-headers: Authorization,X-Requested-With,Content-Length,Content-Type</span><br></pre></td></tr></table></figure>

<p>注:若是集群环境则需要将证书文件目录，以及配置文件，在所有集群环境下都修改一下。</p>
<h3 id="3-3-重启生效"><a href="#3-3-重启生效" class="headerlink" title="3.3.重启生效"></a>3.3.重启生效</h3><p>需要重启elasticsearch</p>
<p>注：若是集群环境下则需要启动所有集群节点，再统一设置密码</p>
<p>注：重启异常情况，若出现报错，类似 failed to load plugin class[org.elasticsearch.xpack.core.XPackPlugin]<br>请检查是否是使用root用户生成的证书，启动用户无权限导致。</p>
<h2 id="4-设置用户密码"><a href="#4-设置用户密码" class="headerlink" title="4.设置用户密码"></a>4.设置用户密码</h2><p>执行设置用户名和密码的命令,内置了部分用户<br>切换到 elasticsearch 安装文件目录 bin 下 ：示例：&#x2F;usr&#x2F;local&#x2F;elasticsearch-7.4.0&#x2F;bin&#x2F;</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 手动配置每个用户密码模式（需要一个一个的输入）</span><br><span class="line">./elasticsearch-setup-passwords interactive</span><br></pre></td></tr></table></figure>

<p>也可以先自动配置密码后续再修改</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#自动配置每个用户密码（随机生成并返回字符串密码,需要保存好）</span><br><span class="line">./elasticsearch-setup-passwords auto  </span><br></pre></td></tr></table></figure>

<p>下图1是自动生成密码情况（一定拷贝下来要牢记密码）<br><img src="https://www.freesion.com/images/198/f383d0d38bab2a11f3293d44ffccf0ae.png" alt="在这里插入图片描述"></p>
<p>下图2是自定义密码情况<br>分别为多个用户设置密码例如：elastic, kibana, logstash_system,beats_system,<br>设置密码的时候需要连续输入2遍。<br><img src="https://www.freesion.com/images/458/363890f3fdffcc0b1bcfaae3c8295952.png" alt="在这里插入图片描述"></p>
<p>部分内置账号的角色权限解释如下：</p>
<ul>
<li>elastic 账号：拥有 superuser 角色，是内置的超级用户。</li>
<li>kibana 账号：拥有 kibana_system 角色，用户 kibana 用来连接 elasticsearch 并与之通信。Kibana 服务器以该用户身份提交请求以访问集群监视 API 和 .kibana 索引。不能访问 index。</li>
<li>logstash_system 账号：拥有 logstash_system 角色。用户 Logstash 在 Elasticsearch 中存储监控信息时使用。</li>
</ul>
<p>至此单节点安全配置完毕，重启es后访问9200会出现用户名和密码的提示窗口,我们就可以通过用户生成的密码过行访问了</p>
<h2 id="5-测试访问"><a href="#5-测试访问" class="headerlink" title="5.测试访问"></a>5.测试访问</h2><p>通过查看证书方式，顺便测试一下密码是否生效了<br>浏览器输入 <a target="_blank" rel="noopener" href="http://ip:9200/_license">http://IP:9200/_license</a> 可以看到，弹窗出来，需要输入密码了<br><img src="https://www.freesion.com/images/561/b7034fa6ab245e277567b01d40929119.png" alt="在这里插入图片描述"><br><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/9b1a95e8a4b361dd4f7e3012300d1115.png" alt="在这里插入图片描述"></p>
<h2 id="附录：常见问题"><a href="#附录：常见问题" class="headerlink" title="附录：常见问题"></a>附录：常见问题</h2><h3 id="1-如何修改账号密码"><a href="#1-如何修改账号密码" class="headerlink" title="1.如何修改账号密码"></a>1.如何修改账号密码</h3><p>以elastic账号为例，注意需要在elasticsearch服务已启动的情况下进行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H &#x27;Content-Type: application/json&#x27; -u elastic:123456 -XPUT &#x27;http://localhost:9200/_xpack/security/user/elastic/_password&#x27; -d &#x27;&#123; &quot;password&quot; : &quot;1234567&quot; &#125;&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="2-客户端ES-HEAD连接问题"><a href="#2-客户端ES-HEAD连接问题" class="headerlink" title="2.客户端ES-HEAD连接问题"></a>2.客户端ES-HEAD连接问题</h3><p>连接失败情况下先检查是否是跨域问题</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">http.cors.enabled: true</span><br><span class="line">http.cors.allow-origin: &quot;*&quot;</span><br><span class="line">http.cors.allow-headers: Authorization,X-Requested-With,Content-Length,Content-Type</span><br></pre></td></tr></table></figure>

<p>例如下图连接的时候报错未授权<br><img src="https://www.freesion.com/images/96/57fa25b106cf1cdee9f44a2f8577e620.png" alt="在这里插入图片描述"></p>
<p>解决方案：在访问的URL中拼接授权账号信息<br>示例：?auth_user&#x3D;elastic&amp;auth_password&#x3D;1234567</p>
<p>示例:指定服务端地址以及账户</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://IP:9100/?base_uri=http://IP:9200&amp;auth_user=elastic&amp;auth_password=1234567</span><br></pre></td></tr></table></figure>

<h3 id="3-启动报XPACK相关错"><a href="#3-启动报XPACK相关错" class="headerlink" title="3.启动报XPACK相关错"></a>3.启动报XPACK相关错</h3><p><img src="https://www.freesion.com/images/947/90ff281ef660a79e49875391f87e474b.png" alt="在这里插入图片描述"></p>
<p>DecoderException: javax.net.ssl.SSLHandshakeException: No available authentication scheme<br><img src="https://www.freesion.com/images/485/efd6d897ad8655121334fd050eecd445.png" alt="在这里插入图片描述"></p>
<p>解决方案：请通过上文配置步骤，排查，检查证书是否已经配置好，以及配置是否填写正确</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Elasticsearch7%E9%85%8D%E7%BD%AE%E8%AF%81%E4%B9%A6/" data-id="clc5wl9jq0005eol6bngj0bw1" data-title="ELASTICSEARCH7.X安全性之访问密码设置" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Elasticsearch" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Elasticsearch/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.694Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Elasticsearch/">Elasticsearch学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Elasticsearch"><a href="#Elasticsearch" class="headerlink" title="Elasticsearch"></a>Elasticsearch</h1><p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/elasticsearch.jpg" alt="img"></p>
<h2 id="目标"><a href="#目标" class="headerlink" title="目标"></a>目标</h2><ul>
<li>了解ES中的基本概念</li>
<li>掌握RESTFul操作ES的CRUD</li>
<li>掌握Spring Data Elasticsearch操作ES</li>
</ul>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>Elasticsearch是一个基于Lucene的搜索服务器。它提供了一个分布式多用户能力的全文搜索引擎，基于RESTful web接口。Elasticsearch是用Java开发的，并作为Apache许可条款下的开放源码发布，是当前流行的企业级搜索引擎。设计用于云计算中，能够达到实时搜索，稳定，可靠，快速，安装使用方便。</p>
<p>我们建立一个网站或应用程序，并要添加搜索功能，但是想要完成搜索工作的创建是非常困难的。我们希望搜索解决方案要运行速度快，我们希望能有一个零配置和一个完全免费的搜索模式，我们希望能够简单地使用JSON通过HTTP来索引数据，我们希望我们的搜索服务器始终可用，我们希望能够从一台开始并扩展到数百台，我们要实时搜索，我们要简单的多用户，我们希望建立一个云的解决方案。因此我们利用Elasticsearch来解决所有这些问题及可能出现的更多其它问题。</p>
<h2 id="安装和运行"><a href="#安装和运行" class="headerlink" title="安装和运行"></a>安装和运行</h2><p>该软件是基于Java编写的解压即用的软件，只需要有Java的运行环境即可，把压缩包解压后，进入到bin目录运行elasticsearch.bat，出现以下界面，表示成功启动服务器</p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190606092632.png" alt="img"></p>
<p>浏览器输入：<strong>localhost:9200</strong>，看到浏览器输出服务器的信息，表示安装成功，可以使用了</p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190606093141.png" alt="img"></p>
<p>注意：程序启动后有两个端口9200和9300，9200端口用于HTTP协议，基于RESTFul来使用，9300端口用于TCP协议，基于jar包来使用</p>
<h3 id="后台启动"><a href="#后台启动" class="headerlink" title="后台启动"></a>后台启动</h3><p>使用<strong>安装目录&#x2F;bin&#x2F;elasticsearch-service.bat</strong>程序可以把Elasticsearch安装后服务列表中，以后我们可以在服务列表来启动该程序，也可以设置成开机启动模式</p>
<p>注意：设置后台启动需要手动配置Java虚拟机的路径，使用命令<strong>elasticsearch-service.bat manager</strong>来配置</p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190622211819.png" alt="img"></p>
<h3 id="安装head插件"><a href="#安装head插件" class="headerlink" title="安装head插件"></a>安装head插件</h3><p>Elasticsearch默认的客户端工具是命令行形式的，操作起来不方便，也不直观看到数据的展示，所以我们需要去安装一个可视化插件，但是这些插件都是基于H5开发的，在谷歌的应用商店中找到<strong>elasticsearch-head</strong>插件，然后安装，使用该插件能比较直观的展示服务器中的数据</p>
<h3 id="安装kibana"><a href="#安装kibana" class="headerlink" title="安装kibana"></a>安装kibana</h3><p>该软件也是解压即用的工具，用于管理和监控Elasticsearch的运作，同时内部包含了客户端工具，支持RESTFul操作Elasticsearch。解压后运行bin&#x2F;kibana.bat，看到启动成功的端口号即可以使用浏览器来使用了</p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190606141235.png" alt="img"></p>
<p>浏览器输入：<a target="_blank" rel="noopener" href="http://localhost:5601/">http://localhost:5601</a></p>
<h2 id="概念名词"><a href="#概念名词" class="headerlink" title="概念名词"></a>概念名词</h2><h3 id="数据存储图"><a href="#数据存储图" class="headerlink" title="数据存储图"></a>数据存储图</h3><p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190604113843.png" alt="img"></p>
<p>注意：从Elasticsearch6开始一个索引里面只能有一个类型，后续计划删除类型这个概念，从ES6开始一般让索引名称和类型名称一致</p>
<h3 id="主要组件"><a href="#主要组件" class="headerlink" title="主要组件"></a>主要组件</h3><ul>
<li><p>索引</p>
<p>ES将数据存储于一个或多个索引中，索引是具有类似特性的文档的集合。类比传统的关系型数据库领域来说，索引相当于SQL中的一个数据库，或者一个数据存储方案(schema)。索引由其名称(必须为全小写字符)进行标识，并通过引用此名称完成文档的创建、搜索、更新及删除操作。一个ES集群中可以按需创建任意数目的索引。</p>
</li>
<li><p>类型</p>
<p>类型是索引内部的逻辑分区(category&#x2F;partition)，然而其意义完全取决于用户需求。因此，一个索引内部可定义一个或多个类型(type)。一般来说，类型就是为那些拥有相同的域的文档做的预定义。例如，在索引中，可以定义一个用于存储用户数据的类型，一个存储日志数据的类型，以及一个存储评论数据的类型。类比传统的关系型数据库领域来说，类型相当于表。</p>
</li>
<li><p>映射</p>
<p>Mapping,就是对索引库中索引的字段名称及其数据类型进行定义，类似于mysql中的表结构信息。不过es的mapping比数据库灵活很多，它可以动态识别字段。一般不需要指定mapping都可以，因为es会自动根据数据格式识别它的类型，如果你需要对某些字段添加特殊属性（如：定义使用其它分词器、是否分词、是否存储等），就必须手动添加mapping。</p>
<p>需要注意的是映射是不可修改的，一旦确定就不允许改动，在使用自动识别功能时，会以第一个存入的文档为参考来建立映射，后面存入的文档也必须符合该映射才能存入</p>
</li>
<li><p>文档</p>
<p>文档是Lucene索引和搜索的原子单位，它是包含了一个或多个域的容器，基于JSON格式进行表示。文档由一个或多个域组成，每个域拥有一个名字及一个或多个值，有多个值的域通常称为多值域。每个文档可以存储不同的域集，但同一类型下的文档至应该有某种程度上的相似之处。</p>
</li>
</ul>
<h3 id="分片和副本"><a href="#分片和副本" class="headerlink" title="分片和副本"></a>分片和副本</h3><p>ES的分片(shard)机制可将一个索引内部的数据分布地存储于多个节点，它通过将一个索引切分为多个底层物理的Lucene索引完成索引数据的分割存储功能，这每一个物理的Lucene索引称为一个分片(shard)。每个分片其内部都是一个全功能且独立的索引，因此可由集群中的任何主机存储。创建索引时，用户可指定其分片的数量，默认数量为5个。</p>
<p>Shard有两种类型：primary和replica，即主shard及副本shard。Primary shard用于文档存储，每个新的索引会自动创建5个Primary shard，当然此数量可在索引创建之前通过配置自行定义，不过，一旦创建完成，其Primary shard的数量将不可更改。Replica shard是Primary Shard的副本，用于冗余数据及提高搜索性能。每个Primary shard默认配置了一个Replica shard，但也可以配置多个，且其数量可动态更改。ES会根据需要自动增加或减少这些Replica shard的数量。</p>
<h3 id="分词器"><a href="#分词器" class="headerlink" title="分词器"></a>分词器</h3><p>把文本内容按照标准进行切分，默认的是standard，该分词器按照单词切分，内容转变为小写，去掉标点，遇到每个中文字符都当成1个单词处理，后面会安装开源的中文分词器插件（ik）</p>
<h4 id="感受分词器效果"><a href="#感受分词器效果" class="headerlink" title="感受分词器效果"></a>感受分词器效果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">先创建一个名叫shop_product的索引，然后再感受分词效果</span><br><span class="line">PUT /shop_product</span><br><span class="line"></span><br><span class="line">默认分词器：</span><br><span class="line">GET /shop_product/_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;:&quot;I am Groot&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /shop_product/_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;:&quot;英特尔酷睿i7处理器&quot;</span><br><span class="line">&#125;</span><br><span class="line">结论：默认的分词器只能对英文正常分词，不能对中文正常分词</span><br></pre></td></tr></table></figure>

<h4 id="安装IK分词器"><a href="#安装IK分词器" class="headerlink" title="安装IK分词器"></a>安装IK分词器</h4><p>直接把压缩文件中的内容解压，然后放在elasticsearch&#x2F;plugins下，然后重启即可</p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190611130218.png" alt="img"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">IK分词器：</span><br><span class="line">ik_smart：粗力度分词</span><br><span class="line">ik_max_word：细力度分词</span><br><span class="line"></span><br><span class="line">GET /shop_product/_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;:&quot;I am Groot&quot;,</span><br><span class="line">  &quot;analyzer&quot;:&quot;ik_smart&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /shop_product/_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;:&quot;英特尔酷睿i7处理器&quot;,</span><br><span class="line">  &quot;analyzer&quot;:&quot;ik_smart&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">GET /shop_product/_analyze</span><br><span class="line">&#123;</span><br><span class="line">  &quot;text&quot;:&quot;英特尔酷睿i7处理器&quot;,</span><br><span class="line">  &quot;analyzer&quot;:&quot;ik_max_word&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">结论：都能正常分词</span><br></pre></td></tr></table></figure>

<h4 id="拓展词库"><a href="#拓展词库" class="headerlink" title="拓展词库"></a>拓展词库</h4><p>最简单的方式就是找到IK插件中的<strong>config&#x2F;main.dic</strong>文件，往里面添加新的词汇，然后重启服务器即可</p>
<h3 id="倒排索引"><a href="#倒排索引" class="headerlink" title="倒排索引"></a>倒排索引</h3><p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/20190604141259.png" alt="img"></p>
<h2 id="基本操作（了解）"><a href="#基本操作（了解）" class="headerlink" title="基本操作（了解）"></a>基本操作（了解）</h2><h3 id="索引操作"><a href="#索引操作" class="headerlink" title="索引操作"></a>索引操作</h3><p>建表索引，相当于在是在建立数据库</p>
<h4 id="建立索引"><a href="#建立索引" class="headerlink" title="建立索引"></a>建立索引</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">语法：PUT /索引名</span><br><span class="line">在没有特殊设置的情况下，默认有5个分片，1个备份，也可以通过请求参数的方式来指定</span><br><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;settings&quot;: &#123;</span><br><span class="line">    &quot;number_of_shards&quot;: 5, //设置5个片区</span><br><span class="line">    &quot;number_of_replicas&quot;: 1 //设置1个备份</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：DELETE /索引名</span><br></pre></td></tr></table></figure>

<h3 id="映射操作"><a href="#映射操作" class="headerlink" title="映射操作"></a>映射操作</h3><h4 id="建立索引和映射"><a href="#建立索引和映射" class="headerlink" title="建立索引和映射"></a>建立索引和映射</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">语法：PUT /索引名</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    类型名: &#123;</span><br><span class="line">      &quot;properties..0&quot;: &#123;</span><br><span class="line">        字段名: &#123;</span><br><span class="line">          &quot;type&quot;: 字段类型, </span><br><span class="line">          &quot;analyzer&quot;: 分词器类型, </span><br><span class="line">          &quot;search_analyzer&quot;: 分词器类型,</span><br><span class="line">          ...</span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">字段类型：double / long / integer / text / keyword / date / binary</span><br><span class="line">注意：text和keyword都是字符串类型，但是只有text类型的数据才能分词，字段的配置一旦确定就不能更改</span><br><span class="line">映射的配置项有很多，我们可以根据需要只配置用得上的属性</span><br></pre></td></tr></table></figure>

<h4 id="查询映射"><a href="#查询映射" class="headerlink" title="查询映射"></a>查询映射</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">语法：GET /索引名/_mapping</span><br></pre></td></tr></table></figure>

<h2 id="CRUD操作"><a href="#CRUD操作" class="headerlink" title="CRUD操作"></a>CRUD操作</h2><h3 id="文档操作"><a href="#文档操作" class="headerlink" title="文档操作"></a>文档操作</h3><h4 id="新增和替换文档"><a href="#新增和替换文档" class="headerlink" title="新增和替换文档"></a>新增和替换文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">语法：PUT /索引名/类型名/文档ID</span><br><span class="line">&#123;</span><br><span class="line">  field1: value1,</span><br><span class="line">  field2: value2,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">注意：当索引/类型/映射不存在时，会使用默认设置自动添加</span><br><span class="line">ES中的数据一般是从别的数据库导入的，所以文档的ID会沿用原数据库中的ID</span><br><span class="line">索引库中没有该ID对应的文档时则新增，拥有该ID对应的文档时则替换</span><br><span class="line"></span><br><span class="line">需求1：新增一个文档</span><br><span class="line">需求2：替换一个文档</span><br></pre></td></tr></table></figure>

<p>每一个文档都内置以下字段</p>
<blockquote>
<p>_index：所属索引</p>
<p>_type：所属类型</p>
<p>_id：文档ID</p>
<p>_version：乐观锁版本号</p>
<p>_source：数据内容</p>
</blockquote>
<h4 id="查询文档"><a href="#查询文档" class="headerlink" title="查询文档"></a>查询文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">根据ID查询 -&gt; GET /索引名/类型名/文档ID</span><br><span class="line">查询所有（基本查询语句） -&gt; GET /索引名/类型名/_search</span><br><span class="line"></span><br><span class="line">需求1：根据文档ID查询一个文档</span><br><span class="line">需求2：查询所有的文档</span><br></pre></td></tr></table></figure>

<p>查询所有结果中包含以下字段</p>
<blockquote>
<p>took：耗时</p>
<p>_shards.total：分片总数</p>
<p>hits.total：查询到的数量</p>
<p>hits.max_score：最大匹配度</p>
<p>hits.hits：查询到的结果</p>
<p>hits.hits._score：匹配度</p>
</blockquote>
<h4 id="删除文档"><a href="#删除文档" class="headerlink" title="删除文档"></a>删除文档</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">语法：DELETE /索引名/类型名/文档ID</span><br><span class="line">注意：这里的删除并且不是真正意义上的删除，仅仅是清空文档内容而已，并且标记该文档的状态为删除</span><br><span class="line"></span><br><span class="line">需求1：根据文档ID删除一个文档</span><br><span class="line">需求2：替换刚刚删除的文档</span><br></pre></td></tr></table></figure>

<h2 id="高级查询"><a href="#高级查询" class="headerlink" title="高级查询"></a>高级查询</h2><p>数据准备：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">PUT /shop_product</span><br><span class="line">&#123;</span><br><span class="line">  &quot;mappings&quot;: &#123;</span><br><span class="line">    &quot;shop_product&quot;: &#123;</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;id&quot;: &#123;</span><br><span class="line">          &quot;type&quot;: &quot;integer&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;title&quot;:&#123;</span><br><span class="line">          &quot;type&quot;: &quot;text&quot;, </span><br><span class="line">          &quot;analyzer&quot;: &quot;ik_smart&quot;, </span><br><span class="line">          &quot;search_analyzer&quot;: &quot;ik_smart&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;price&quot;:&#123;</span><br><span class="line">          &quot;type&quot;: &quot;double&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;intro&quot;:&#123;</span><br><span class="line">          &quot;type&quot;: &quot;text&quot;, </span><br><span class="line">          &quot;analyzer&quot;: &quot;ik_smart&quot;, </span><br><span class="line">          &quot;search_analyzer&quot;: &quot;ik_smart&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;brand&quot;:&#123;</span><br><span class="line">          &quot;type&quot;: &quot;keyword&quot;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">POST /shop_product/shop_product/_bulk</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 1&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:1,&quot;title&quot;:&quot;Apple iPhone XR (A2108) 128GB 白色 移动联通电信4G手机 双卡双待&quot;,&quot;price&quot;:5299,&quot;intro&quot;:&quot;【iPhoneXR限时特惠！】6.1英寸视网膜显示屏，A12仿生芯片，面容识别，无线充电，支持双卡！选【换修无忧版】获 AppleCare 原厂服务，享只换不修！更有快速换机、保值换新、轻松月付！&quot;,&quot;brand&quot;:&quot;Apple&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 2&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:2,&quot;title&quot;:&quot;Apple 2019款 Macbook Pro 13.3【带触控栏】八代i7 18G 256G RP645显卡 深空灰 苹果笔记本电脑 轻薄本 MUHN2CH/A&quot;,&quot;price&quot;:15299,&quot;intro&quot;:&quot;【八月精选】Pro2019年新品上市送三重好礼，现在购买领满8000减400元优惠神劵，劵后更优惠！&quot;,&quot;brand&quot;:&quot;Apple&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 3&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:3,&quot;title&quot;:&quot;Apple iPad Air 3 2019年新款平板电脑 10.5英寸（64G WLAN版/A12芯片/Retina显示屏/MUUL2CH/A）金色&quot;,&quot;price&quot;:3788,&quot;intro&quot;:&quot;8月尊享好礼！买iPad即送蓝牙耳机！领券立减！多款产品支持手写笔！【新一代iPad，总有一款适合你】选【换修无忧版】获 AppleCare 原厂服务，享只换不修！更有快速换机、保值换新、轻松月付！&quot;,&quot;brand&quot;:&quot;Apple&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 4&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:4,&quot;title&quot;:&quot;华为HUAWEI MateBook X Pro 2019款 英特尔酷睿i5 13.9英寸全面屏轻薄笔记本电脑(i5 8G 512G 3K 触控) 灰&quot;,&quot;price&quot;:7999,&quot;intro&quot;:&quot;3K全面屏开启无界视野;轻薄设计灵动有型，HuaweiShare一碰传&quot;,&quot;brand&quot;:&quot;华为&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 5&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:5,&quot;title&quot;:&quot;华为 HUAWEI Mate20 X (5G) 7nm工艺5G旗舰芯片全面屏超大广角徕卡三摄8GB+256GB翡冷翠5G双模全网通手机&quot;,&quot;price&quot;:6199,&quot;intro&quot;:&quot;【5G双模，支持SA/NSA网络，7.2英寸全景巨屏，石墨烯液冷散热】5G先驱，极速体验。&quot;,&quot;brand&quot;:&quot;华为&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 6&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:6,&quot;title&quot;:&quot;华为平板 M6 10.8英寸麒麟980影音娱乐平板电脑4GB+64GB WiFi（香槟金）&quot;,&quot;price&quot;:2299,&quot;intro&quot;:&quot;【华为暑期购】8月2日-4日，M5青春版指定爆款型号优惠100元，AI语音控制&quot;,&quot;brand&quot;:&quot;华为&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 7&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:7,&quot;title&quot;:&quot;荣耀20 PRO DXOMARK全球第二高分 4800万四摄 双光学防抖 麒麟980 全网通4G 8GB+128GB 蓝水翡翠 拍照手机&quot;,&quot;price&quot;:3199,&quot;intro&quot;:&quot;白条6期免息！麒麟980，4800万全焦段AI四摄！荣耀20系列2699起，4800万超广角AI四摄！&quot;,&quot;brand&quot;:&quot;荣耀&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 8&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:8,&quot;title&quot;:&quot;荣耀MagicBook Pro 16.1英寸全面屏轻薄性能笔记本电脑（酷睿i7 8G 512G MX250 IPS FHD 指纹解锁）冰河银&quot;,&quot;price&quot;:6199,&quot;intro&quot;:&quot;16.1英寸无界全面屏金属轻薄本，100%sRGB色域，全高清IPS防眩光护眼屏，14小时长续航，指纹一健开机登录，魔法一碰传高速传输。&quot;,&quot;brand&quot;:&quot;荣耀&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 9&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:9,&quot;title&quot;:&quot;荣耀平板5 麒麟8核芯片 GT游戏加速 4G+128G 10.1英寸全高清屏影音平板电脑 WiFi版 冰川蓝&quot;,&quot;price&quot;:1549,&quot;intro&quot;:&quot;【爆款平板推荐】哈曼卡顿专业调音，10.1英寸全高清大屏，双喇叭立体环绕音，配置多重护眼，值得拥有！&quot;,&quot;brand&quot;:&quot;荣耀&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 10&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:10,&quot;title&quot;:&quot;小米9 4800万超广角三摄 6GB+128GB全息幻彩蓝 骁龙855 全网通4G 双卡双待 水滴全面屏拍照智能游戏手机&quot;,&quot;price&quot;:2799,&quot;intro&quot;:&quot;限时优惠200，成交价2799！索尼4800万广角微距三摄，屏下指纹解锁！&quot;,&quot;brand&quot;:&quot;小米&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 11&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:11,&quot;title&quot;:&quot;小米(MI)Pro 2019款 15.6英寸金属轻薄笔记本(第八代英特尔酷睿i7-8550U 16G 512GSSD MX250 2G独显) 深空灰&quot;,&quot;price&quot;:6899,&quot;intro&quot;:&quot;【PCIE固态硬盘、72%NTSC高色域全高清屏】B面康宁玻璃覆盖、16G双通道大内存、第八代酷睿I7处理器、专业级调校MX150&quot;,&quot;brand&quot;:&quot;小米&quot;&#125;</span><br><span class="line">&#123;&quot;create&quot;:&#123;&quot;_id&quot;: 12&#125;&#125;</span><br><span class="line">&#123;&quot;id&quot;:12,&quot;title&quot;:&quot;联想(Lenovo)拯救者Y7000P 2019英特尔酷睿i7 15.6英寸游戏笔记本电脑(i7 9750H 16G 1T SSD GTX1660Ti 144Hz)&quot;,&quot;price&quot;:9299,&quot;intro&quot;:&quot;超大1T固态，升级双通道16G内存一步到位，GTX1660Ti电竞级独显，英特尔9代i7H高性能处理器，144Hz电竞屏窄边框！&quot;,&quot;brand&quot;:&quot;联想&quot;&#125;</span><br></pre></td></tr></table></figure>

<p>Elasticsearch基于JSON提供完整的查询DSL（Domain Specific Language：领域特定语言）来定义查询。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">基本语法：</span><br><span class="line">GET /索引名/类型名/_search</span><br></pre></td></tr></table></figure>

<p>一般都是需要配合查询参数来使用的，配合不同的参数有不同的查询效果</p>
<p>参数配置项可以参考博客：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/6333940621ec">https://www.jianshu.com/p/6333940621ec</a></p>
<h3 id="结果排序"><a href="#结果排序" class="headerlink" title="结果排序"></a>结果排序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;sort&quot;: [</span><br><span class="line">    &#123;field: 排序规则&#125;,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">排序</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;sort&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;order&quot;: &quot;desc&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">排序规则：</span><br><span class="line">asc表示升序</span><br><span class="line">desc:表示降序</span><br><span class="line">没有配置排序的情况下，默认按照评分降序排列</span><br></pre></td></tr></table></figure>

<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;from&quot;: start,</span><br><span class="line">  &quot;size&quot;: pageSize</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">分页 从第几个开始 每页几个</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;from&quot;: 2,</span><br><span class="line">  &quot;size&quot;: 4,</span><br><span class="line">  &quot;sort&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;order&quot;: &quot;desc&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">需求1：查询所有文档按照价格降序排列</span><br><span class="line">需求2：分页查询文档按照价格降序排列，显示第2页，每页显示3个</span><br></pre></td></tr></table></figure>

<h3 id="检索查询"><a href="#检索查询" class="headerlink" title="检索查询"></a>检索查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    检索方式: &#123;field: value&#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">检索查询 全文检索</span><br><span class="line">需求1：查询商品标题中符合&quot;游戏 手机&quot;的字样的商品</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;match&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &quot;游戏 手机&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">检索查询 精准匹配</span><br><span class="line">需求2：查询商品价格等于15299的商品</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;term&quot;: &#123;</span><br><span class="line">      &quot;price&quot;: 15299</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">检索查询 范围检索</span><br><span class="line">需求3：查询商品价格在5000~10000之间商品，按照价格升序排列</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;range&quot;: &#123;</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;gte&quot;: 5000,</span><br><span class="line">        &quot;lte&quot;: 10000</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;sort&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;price&quot;: &#123;</span><br><span class="line">        &quot;order&quot;: &quot;asc&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">检索方式：</span><br><span class="line">term表示精确匹配，value值不会被分词器拆分，按照倒排索引匹配</span><br><span class="line">match表示全文检索，value值会被分词器拆分，然后去倒排索引中匹配</span><br><span class="line">range表示范围检索，其value值是一个对象，如&#123; &quot;range&quot;: &#123;field: &#123;比较规则: value, ...&#125;&#125; &#125;</span><br><span class="line">  比较规则有gt / gte / lt / lte 等</span><br><span class="line">  </span><br><span class="line">注意：term和match都能用在数值和字符上，range用在数值上</span><br><span class="line"></span><br><span class="line">需求1：查询商品标题中符合&quot;游戏 手机&quot;的字样的商品</span><br><span class="line">需求2：查询商品价格等于15299的商品</span><br><span class="line">需求3：查询商品价格在5000~10000之间商品，按照价格升序排列</span><br></pre></td></tr></table></figure>

<h3 id="关键字查询"><a href="#关键字查询" class="headerlink" title="关键字查询"></a>关键字查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;multi_match&quot;: &#123;</span><br><span class="line">      &quot;query&quot;: value,</span><br><span class="line">      &quot;fields&quot;: [field1, field2, ...]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">关键字查询</span><br><span class="line">需求1：查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;multi_match&quot;: &#123;</span><br><span class="line">      &quot;query&quot;: &quot;蓝牙 指纹 双卡&quot;,</span><br><span class="line">      &quot;fields&quot;: [&quot;title&quot;, &quot;intro&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">multi_match：表示在多个字段间做检索，只要其中一个字段满足条件就能查询出来，多用在字段上</span><br><span class="line"></span><br><span class="line">需求1：查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品</span><br></pre></td></tr></table></figure>

<h3 id="高亮显示"><a href="#高亮显示" class="headerlink" title="高亮显示"></a>高亮显示</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123; ... &#125;,</span><br><span class="line">  &quot;highlight&quot;: &#123;</span><br><span class="line">    &quot;fields&quot;: &#123;</span><br><span class="line">      field1: &#123;&#125;,</span><br><span class="line">      field2: &#123;&#125;,</span><br><span class="line">      ...</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;pre_tags&quot;: 开始标签,</span><br><span class="line">    &quot;post_tags&quot; 结束标签</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">高亮显示</span><br><span class="line">需求1：查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品，并且高亮显示</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;multi_match&quot;: &#123;</span><br><span class="line">      &quot;query&quot;: &quot;蓝牙 指纹 双卡&quot;,</span><br><span class="line">      &quot;fields&quot;: [&quot;title&quot;, &quot;intro&quot;]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;highlight&quot;: &#123;</span><br><span class="line">    &quot;fields&quot;: &#123;</span><br><span class="line">      &quot;title&quot;: &#123;&#125;,</span><br><span class="line">      &quot;intro&quot;: &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;pre_tags&quot;:&quot;&lt;h1&gt;&quot;,</span><br><span class="line">    &quot;post_tags&quot;:&quot;&lt;/h1&gt;&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">highlight：表示高亮显示，需要在fields中配置哪些字段中检索到该内容需要高亮显示</span><br><span class="line">  必须配合检索(term / match)一起使用</span><br><span class="line">  </span><br><span class="line">需求1：查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品，并且高亮显示</span><br></pre></td></tr></table></figure>

<h3 id="逻辑查询"><a href="#逻辑查询" class="headerlink" title="逻辑查询"></a>逻辑查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">参数格式： </span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      逻辑规则: [</span><br><span class="line">        &#123;检索方式: &#123;field: value&#125;&#125;, </span><br><span class="line">        ...</span><br><span class="line">      ],</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">逻辑查询</span><br><span class="line">需求1：查询商品标题中符合&quot;i7&quot;的字样并且价格大于7000的商品</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;must&quot;: [</span><br><span class="line">        &#123;&quot;match&quot;: &#123;</span><br><span class="line">          &quot;title&quot;: &quot;i7&quot;</span><br><span class="line">        &#125;&#125;,</span><br><span class="line">        &#123;&quot;range&quot;: &#123;</span><br><span class="line">          &quot;price&quot;: &#123;</span><br><span class="line">            &quot;gt&quot;: 7000</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">逻辑查询</span><br><span class="line">需求2：查询商品标题中符合&quot;pro&quot;的字样或者价格在1000~3000的商品</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;should&quot;: [</span><br><span class="line">        &#123;&quot;match&quot;: &#123;</span><br><span class="line">          &quot;title&quot;: &quot;pro&quot;</span><br><span class="line">        &#125;&#125;,</span><br><span class="line">        &#123;&quot;range&quot;: &#123;</span><br><span class="line">          &quot;price&quot;: &#123;</span><br><span class="line">            &quot;gte&quot;: 1000,</span><br><span class="line">            &quot;lte&quot;: 3000</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">逻辑规则：must / should / must_not，相当于and / or / not</span><br><span class="line"></span><br><span class="line">需求1：查询商品标题中符合&quot;i7&quot;的字样并且价格大于7000的商品</span><br><span class="line">需求2：查询商品标题中符合&quot;pro&quot;的字样或者价格在1000~3000的商品</span><br></pre></td></tr></table></figure>

<h3 id="过滤查询"><a href="#过滤查询" class="headerlink" title="过滤查询"></a>过滤查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;filter&quot;: [</span><br><span class="line">        &#123; 检索方式: &#123; field: value &#125; &#125;，            	</span><br><span class="line">        ...</span><br><span class="line">      ]</span><br><span class="line">    &#125;             </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">过滤查询 不评分</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;query&quot;: &#123;</span><br><span class="line">    &quot;bool&quot;: &#123;</span><br><span class="line">      &quot;filter&quot;: [</span><br><span class="line">        &#123;&quot;match&quot;: &#123;</span><br><span class="line">          &quot;title&quot;: &quot;pro&quot;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">从效果上讲过滤查询和检索查询能做一样的效果</span><br><span class="line">区别在于过滤查询不评分，结果能缓存，检索查询要评分，结果不缓存</span><br><span class="line">一般是不会直接使用过滤查询，都是在检索了一定数据的基础上再使用</span><br></pre></td></tr></table></figure>

<p>关于filter的更多认知推荐大家读这篇博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/laoyang360/article/details/80468757">https://blog.csdn.net/laoyang360/article/details/80468757</a></p>
<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">参数格式：</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    自定义分组字段: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: 分组字段, </span><br><span class="line">        &quot;order&quot;: &#123;自定义统计字段:排序规则&#125;, </span><br><span class="line">        &quot;size&quot;: 10  //默认显示10组 </span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;aggs&quot;: &#123; //分组后的统计查询，相当于MySQL分组函数查询</span><br><span class="line">        自定义统计字段: &#123;</span><br><span class="line">          分组运算: &#123;</span><br><span class="line">            &quot;field&quot;: 统计字段</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">分组查询</span><br><span class="line">需求1：按照品牌分组，统计各品牌的数量</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;brand_group&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;brand&quot;, </span><br><span class="line">        &quot;order&quot;: &#123;&quot;brand_group&quot;:&quot;desc&quot;&#125;, </span><br><span class="line">        &quot;size&quot;: 10  </span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;aggs&quot;: &#123; </span><br><span class="line">        &quot;brand_group&quot;: &#123;</span><br><span class="line">          &quot;value_count&quot;: &#123;</span><br><span class="line">            &quot;field&quot;: &quot;id&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">分组查询</span><br><span class="line">需求2：按照品牌分组，统计各品牌的平均价格</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;brand_group&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;brand&quot;, </span><br><span class="line">        &quot;order&quot;: &#123;&quot;brand_group&quot;:&quot;desc&quot;&#125;, </span><br><span class="line">        &quot;size&quot;: 10  </span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;aggs&quot;: &#123; </span><br><span class="line">        &quot;brand_group&quot;: &#123;</span><br><span class="line">          &quot;avg&quot;: &#123;</span><br><span class="line">            &quot;field&quot;: &quot;price&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">分组查询</span><br><span class="line">需求3：按照品牌分组，统计各品牌的价格数据</span><br><span class="line">GET /shop_product/shop_product/_search</span><br><span class="line">&#123;</span><br><span class="line">  &quot;size&quot;: 0,</span><br><span class="line">  &quot;aggs&quot;: &#123;</span><br><span class="line">    &quot;brand_group_aggs&quot;: &#123;</span><br><span class="line">      &quot;terms&quot;: &#123;</span><br><span class="line">        &quot;field&quot;: &quot;brand&quot;, </span><br><span class="line">        &quot;order&quot;: &#123;&quot;brand_group_aggs.count&quot;:&quot;desc&quot;&#125;, </span><br><span class="line">        &quot;size&quot;: 10  </span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;aggs&quot;: &#123; </span><br><span class="line">        &quot;brand_group_aggs&quot;: &#123;</span><br><span class="line">          &quot;stats&quot;: &#123;</span><br><span class="line">            &quot;field&quot;: &quot;price&quot;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;       </span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">分组运算：avg / sum / min / max / value_count / stats(执行以上所有功能的)</span><br><span class="line">注意：这里是size=0其目的是为了不要显示hit内容，专注点放在观察分组上</span><br><span class="line"></span><br><span class="line">需求1：按照品牌分组，统计各品牌的数量</span><br><span class="line">需求2：按照品牌分组，统计各品牌的平均价格</span><br><span class="line">需求3：按照品牌分组，统计各品牌的价格数据</span><br></pre></td></tr></table></figure>

<h2 id="批处理（了解）"><a href="#批处理（了解）" class="headerlink" title="批处理（了解）"></a>批处理（了解）</h2><p>当需要集中的批量处理文档时，如果依然使用传统的操作单个API的方式，将会浪费大量网络资源，Elasticsearch为了提高操作的性能，专门提供了批处理的API</p>
<h3 id="mget批量查询"><a href="#mget批量查询" class="headerlink" title="mget批量查询"></a>mget批量查询</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">GET /索引名/类型/_mget</span><br><span class="line">&#123;</span><br><span class="line">  &quot;docs&quot;: [</span><br><span class="line">    &#123;&quot;_id&quot;: 文档ID&#125;,</span><br><span class="line">    ...</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="bulk批量增删改"><a href="#bulk批量增删改" class="headerlink" title="bulk批量增删改"></a>bulk批量增删改</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">语法：</span><br><span class="line">POST /索引名/类型/_bulk</span><br><span class="line">&#123;动作:&#123;&quot;_id&quot;: 文档ID&#125;&#125;</span><br><span class="line">&#123;...&#125;</span><br><span class="line">&#123;动作:&#123;&quot;_id&quot;: 文档ID&#125;&#125;</span><br><span class="line">&#123;...&#125;</span><br><span class="line"></span><br><span class="line">动作：create / update / delete，其中delete只有1行JSON，其他操作都是有2行JSON，并且JSON不能格式化，如果是update动作，它的数据需要加个key为doc</span><br><span class="line">如：</span><br><span class="line">&#123;&quot;update&quot;: &#123;&quot;_id&quot;: xx&#125;&#125;</span><br><span class="line">&#123;&quot;doc&quot;: &#123;&quot;xx&quot;:xx, &quot;xx&quot;:xx&#125;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Spring-Data-Elasticsearch"><a href="#Spring-Data-Elasticsearch" class="headerlink" title="Spring Data Elasticsearch"></a>Spring Data Elasticsearch</h2><h3 id="准备环境"><a href="#准备环境" class="headerlink" title="准备环境"></a>准备环境</h3><h4 id="导入依赖"><a href="#导入依赖" class="headerlink" title="导入依赖"></a>导入依赖</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;parent&gt;</span><br><span class="line">    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;2.1.3.RELEASE&lt;/version&gt;</span><br><span class="line">&lt;/parent&gt;</span><br><span class="line"></span><br><span class="line">&lt;properties&gt;</span><br><span class="line">    &lt;java.version&gt;1.8&lt;/java.version&gt;</span><br><span class="line">&lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">&lt;dependencies&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;!--SpringBoot整合Spring Data Elasticsearch的依赖--&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-data-elasticsearch&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;lombok&lt;/artifactId&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;</span><br><span class="line">        &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;dependency&gt;</span><br><span class="line">        &lt;groupId&gt;commons-beanutils&lt;/groupId&gt;</span><br><span class="line">        &lt;artifactId&gt;commons-beanutils&lt;/artifactId&gt;</span><br><span class="line">        &lt;version&gt;1.8.3&lt;/version&gt;</span><br><span class="line">    &lt;/dependency&gt;</span><br><span class="line">&lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">&lt;build&gt;</span><br><span class="line">    &lt;plugins&gt;</span><br><span class="line">        &lt;plugin&gt;</span><br><span class="line">            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;</span><br><span class="line">        &lt;/plugin&gt;</span><br><span class="line">    &lt;/plugins&gt;</span><br><span class="line">&lt;/build&gt;</span><br></pre></td></tr></table></figure>

<h4 id="编写DOMAIN"><a href="#编写DOMAIN" class="headerlink" title="编写DOMAIN"></a>编写DOMAIN</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  @Document：配置操作哪个索引下的哪个类型</span><br><span class="line">  @Id：标记文档ID字段</span><br><span class="line">  @Field：配置映射信息，如：分词器</span><br><span class="line"> */</span><br><span class="line">@Getter@Setter@ToString</span><br><span class="line">@NoArgsConstructor</span><br><span class="line">@AllArgsConstructor</span><br><span class="line">@Document(indexName=&quot;shop_product&quot;, type=&quot;shop_product&quot;)</span><br><span class="line">public class Product &#123;</span><br><span class="line">    @Id</span><br><span class="line">    private String id;</span><br><span class="line"></span><br><span class="line">    @Field(analyzer=&quot;ik_max_word&quot;,searchAnalyzer=&quot;ik_max_word&quot;, type=FieldType.Text)</span><br><span class="line">    private String title;</span><br><span class="line"></span><br><span class="line">    private Integer price;</span><br><span class="line"></span><br><span class="line">    @Field(analyzer=&quot;ik_max_word&quot;,searchAnalyzer=&quot;ik_max_word&quot;, type=FieldType.Text)</span><br><span class="line">    private String intro;</span><br><span class="line"></span><br><span class="line">    @Field(type=FieldType.Keyword)</span><br><span class="line">    private String brand;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="配置连接信息"><a href="#配置连接信息" class="headerlink" title="配置连接信息"></a>配置连接信息</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#application.properties</span><br><span class="line"># 配置集群名称，名称写错会连不上服务器，默认elasticsearch</span><br><span class="line">spring.data.elasticsearch.cluster-name=elasticsearch</span><br><span class="line"># 配置集群节点</span><br><span class="line">spring.data.elasticsearch.cluster-nodes=localhost:9300</span><br></pre></td></tr></table></figure>

<h3 id="ElasticsearchRepository"><a href="#ElasticsearchRepository" class="headerlink" title="ElasticsearchRepository"></a>ElasticsearchRepository</h3><p>该接口是框架封装的用于操作Elastsearch的高级接口，只要我们自己的写个接口去继承该接口就能直接对Elasticsearch进行CRUD操作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line">  泛型1：domain的类型</span><br><span class="line">  泛型2：文档主键类型</span><br><span class="line">  该接口直接该给Spring，底层会使用JDK代理的方式创建对象，交给容器管理</span><br><span class="line"> */</span><br><span class="line">@Repository</span><br><span class="line">public interface ProductESRepository extends ElasticsearchRepository&lt;Product, String&gt; &#123;</span><br><span class="line">    // 符合Spring Data规范的高级查询方法</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="完成CRUD-分页-排序"><a href="#完成CRUD-分页-排序" class="headerlink" title="完成CRUD+分页+排序"></a>完成CRUD+分页+排序</h3><h3 id="组件介绍"><a href="#组件介绍" class="headerlink" title="组件介绍"></a>组件介绍</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ElasticsearchRepository：框架封装的用于便捷完成常用操作的工具接口</span><br><span class="line">ElasticsearchTemplate：框架封装的用于便捷操作Elasticsearch的模板类</span><br><span class="line"></span><br><span class="line">NativeSearchQueryBuilder：用于生成查询条件的构建器，需要去封装各种查询条件</span><br><span class="line">QueryBuilder：该接口表示一个查询条件，其对象可以通过QueryBuilders工具类中的方法快速生成各种条件</span><br><span class="line">  boolQuery()：生成bool条件，相当于 &quot;bool&quot;: &#123; &#125;</span><br><span class="line">  matchQuery()：生成match条件，相当于 &quot;match&quot;: &#123; &#125;</span><br><span class="line">  rangeQuery()：生成range条件，相当于 &quot;range&quot;: &#123; &#125;</span><br><span class="line">AbstractAggregationBuilder：用于生成分组查询的构建器，其对象通过AggregationBuilders工具类生成</span><br><span class="line">Pageable：表示分页参数，对象通过PageRequest.of(页数, 容量)获取</span><br><span class="line">SortBuilder：排序构建器，对象通过SortBuilders.fieldSort(字段).order(规则)获取</span><br></pre></td></tr></table></figure>

<h3 id="ElasticsearchTemplate"><a href="#ElasticsearchTemplate" class="headerlink" title="ElasticsearchTemplate"></a>ElasticsearchTemplate</h3><p>该模板类，封装了便捷操作Elasticsearch的模板方法，包括 索引 &#x2F; 映射 &#x2F; CRUD 等底层操作和高级操作，该对象用起来会略微复杂些，尤其是对于查询，还需要把查询到的结果自己封装对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//该对象已经由SpringBoot完成自动配置，直接注入即可</span><br><span class="line">@Autowired</span><br><span class="line">private ElasticsearchTemplate template;</span><br></pre></td></tr></table></figure>

<p>一般情况下，ElasticsearchTemplate和ElasticsearchRepository是分工合作的，ElasticsearchRepository已经能完成绝大部分的功能，如果遇到复杂的查询则要使用ElasticsearchTemplate，如多字段分组、高亮显示等</p>
<h3 id="实例代码"><a href="#实例代码" class="headerlink" title="实例代码"></a>实例代码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br></pre></td><td class="code"><pre><span class="line">@Autowired</span><br><span class="line">private ElasticsearchTemplate template;</span><br><span class="line"></span><br><span class="line">@Autowired</span><br><span class="line">private ProductESRepository repository;</span><br><span class="line"></span><br><span class="line">// 新增或者覆盖一个文档</span><br><span class="line">@Test</span><br><span class="line">public void testSaveOrUpdate() throws Exception &#123;</span><br><span class="line">    // 索引库中不存在则新增，存在则覆盖</span><br><span class="line">    Product p = new Product(&quot;13&quot;, &quot;华为手环 B5（Android 运动手环）&quot;, 999,</span><br><span class="line">                            &quot;高清彩屏 腕上蓝牙耳机 心率检测 来电消息提醒&quot;, &quot;华为&quot;);</span><br><span class="line">    repostitory.save(p);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 删除一个文档</span><br><span class="line">@Test</span><br><span class="line">public void testDelete() throws Exception &#123;</span><br><span class="line">    repostitory.deleteById(&quot;13&quot;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 根据ID查询一个文档</span><br><span class="line">@Test</span><br><span class="line">public void testGet() throws Exception &#123;</span><br><span class="line">    Optional&lt;Product&gt; optional = repostitory.findById(&quot;1&quot;);</span><br><span class="line">    optional.ifPresent(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询所有文档</span><br><span class="line">@Test</span><br><span class="line">public void testList() throws Exception &#123;</span><br><span class="line">    Iterable&lt;Product&gt; iter = repostitory.findAll();</span><br><span class="line">    iter.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 分页查询文档按照价格降序排列，显示第2页，每页显示3个</span><br><span class="line">@Test</span><br><span class="line">public void testQuery1() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    // 设置分页信息</span><br><span class="line">    builder.withPageable(PageRequest.of(1, 3));</span><br><span class="line">    // 设置排序信息</span><br><span class="line">    builder.withSort(SortBuilders.fieldSort(&quot;price&quot;).order(SortOrder.DESC));</span><br><span class="line"></span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    System.out.println(page.getTotalElements()); //总记录数</span><br><span class="line">    System.out.println(page.getTotalPages()); //总页数</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品标题中符合&quot;游戏 手机&quot;的字样的商品</span><br><span class="line">@Test</span><br><span class="line">public void testQuery2() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.matchQuery(&quot;title&quot;, &quot;游戏 手机&quot;)</span><br><span class="line">    );</span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品价格等于15299的商品</span><br><span class="line">@Test</span><br><span class="line">public void testQuery3() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.termQuery(&quot;price&quot;, 15299)</span><br><span class="line">    );</span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品价格在5000~9000之间商品，按照价格升序排列</span><br><span class="line">@Test</span><br><span class="line">public void testQuery4() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.rangeQuery(&quot;price&quot;)</span><br><span class="line">            .gte(5000).lte(9000)</span><br><span class="line">    );</span><br><span class="line">    builder.withSort(SortBuilders.fieldSort(&quot;price&quot;).order(SortOrder.ASC));</span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品</span><br><span class="line">@Test</span><br><span class="line">public void testQuery5() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.multiMatchQuery(&quot;蓝牙 指纹 双卡&quot;,</span><br><span class="line">                                      &quot;title&quot;, &quot;intro&quot;)</span><br><span class="line">    );</span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品标题中符合&quot;i7&quot;的字样并且价格大于7000的商品</span><br><span class="line">@Test</span><br><span class="line">public void testQuery6() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.boolQuery()</span><br><span class="line">        .must(QueryBuilders.matchQuery(&quot;title&quot;, &quot;i7&quot;))</span><br><span class="line">        .must(QueryBuilders.rangeQuery(&quot;price&quot;).gt(7000))</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品标题中符合&quot;pro&quot;的字样或者价格在1000~3000的商品</span><br><span class="line">@Test</span><br><span class="line">public void testQuery7() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.boolQuery()</span><br><span class="line">            .should(QueryBuilders.matchQuery(&quot;title&quot;, &quot;pro&quot;))</span><br><span class="line">            .should(QueryBuilders.rangeQuery(&quot;price&quot;).gte(1000).lte(3000))</span><br><span class="line">    );</span><br><span class="line">    Page&lt;Product&gt; page = repostitory.search(builder.build());</span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按照品牌分组，统计各品牌的数量</span><br><span class="line">@Test</span><br><span class="line">public void testQuery8() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.addAggregation(</span><br><span class="line">        AggregationBuilders.terms(&quot;groupByBrand&quot;).field(&quot;brand&quot;)</span><br><span class="line">    );</span><br><span class="line">    AggregatedPage&lt;Product&gt; page = (AggregatedPage&lt;Product&gt;) repostitory.search(builder.build());</span><br><span class="line">    // 获取自定义的分组字段</span><br><span class="line">    StringTerms brand = (StringTerms) page.getAggregation(&quot;groupByBrand&quot;);</span><br><span class="line">    brand.getBuckets().forEach(bucket -&gt; System.out.println(bucket.getDocCount()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按照品牌分组，统计各品牌的平均价格</span><br><span class="line">@Test</span><br><span class="line">public void testQuery9() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.addAggregation(</span><br><span class="line">        AggregationBuilders.terms(&quot;groupByBrand&quot;).field(&quot;brand&quot;)</span><br><span class="line">        .subAggregation(AggregationBuilders.avg(&quot;avgPrice&quot;).field(&quot;price&quot;))</span><br><span class="line">    );</span><br><span class="line">    AggregatedPage&lt;Product&gt; page = (AggregatedPage&lt;Product&gt;) repostitory.search(builder.build());</span><br><span class="line">    // 获取自定义的分组字段</span><br><span class="line">    StringTerms brand = (StringTerms) page.getAggregation(&quot;groupByBrand&quot;);</span><br><span class="line">    brand.getBuckets().forEach(bucket -&gt; &#123;</span><br><span class="line">        InternalAvg avgPrice = bucket.getAggregations().get(&quot;avgPrice&quot;);</span><br><span class="line">        System.out.println(avgPrice.getValue());</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 按照品牌分组，统计各品牌的价格数据</span><br><span class="line">@Test</span><br><span class="line">public void testQuery10() throws Exception &#123;</span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    builder.addAggregation(</span><br><span class="line">        AggregationBuilders.terms(&quot;groupByBrand&quot;).field(&quot;brand&quot;)</span><br><span class="line">        .subAggregation(AggregationBuilders.stats(&quot;statsPrice&quot;).field(&quot;price&quot;))</span><br><span class="line">    );</span><br><span class="line">    AggregatedPage&lt;Product&gt; page = (AggregatedPage&lt;Product&gt;) repostitory.search(builder.build());</span><br><span class="line">    // 获取自定义的分组字段</span><br><span class="line">    StringTerms brand = (StringTerms) page.getAggregation(&quot;groupByBrand&quot;);</span><br><span class="line">    brand.getBuckets().forEach(bucket -&gt; &#123;</span><br><span class="line">        InternalStats statsPrice = bucket.getAggregations().get(&quot;statsPrice&quot;);</span><br><span class="line">        System.out.println(statsPrice.getSumAsString());</span><br><span class="line">        System.out.println(statsPrice.getAvgAsString());</span><br><span class="line">        System.out.println(statsPrice.getMaxAsString());</span><br><span class="line">        System.out.println(statsPrice.getMinAsString());</span><br><span class="line">        System.out.println(statsPrice.getCount());</span><br><span class="line">        System.out.println(&quot;-----------------------&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 查询商品标题或简介中符合&quot;蓝牙 指纹 双卡&quot;的字样的商品，并且高亮显示</span><br><span class="line">@Test</span><br><span class="line">public void testHighlight() throws Exception &#123;</span><br><span class="line">    // Java与JSON互转的工具对象</span><br><span class="line">    ObjectMapper mapper = new ObjectMapper();</span><br><span class="line"></span><br><span class="line">    NativeSearchQueryBuilder builder = new NativeSearchQueryBuilder();</span><br><span class="line">    // 设置查询哪个索引中的哪个类型</span><br><span class="line">    builder.withIndices(&quot;shop_product&quot;).withTypes(&quot;shop_product&quot;);</span><br><span class="line">    builder.withQuery(</span><br><span class="line">        QueryBuilders.multiMatchQuery(&quot;蓝牙 指纹 双卡&quot;,</span><br><span class="line">                                      &quot;title&quot;, &quot;intro&quot;)</span><br><span class="line">    );</span><br><span class="line">    builder.withHighlightFields(</span><br><span class="line">        new HighlightBuilder.Field(&quot;title&quot;)</span><br><span class="line">            .preTags(&quot;&lt;span style=&#x27;color:red&#x27;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;),</span><br><span class="line">        new HighlightBuilder.Field(&quot;intro&quot;)</span><br><span class="line">            .preTags(&quot;&lt;span style=&#x27;color:red&#x27;&gt;&quot;).postTags(&quot;&lt;/span&gt;&quot;)</span><br><span class="line">    );</span><br><span class="line">    AggregatedPage&lt;Product&gt; page = template.queryForPage(builder.build(), Product.class, new SearchResultMapper() &#123;</span><br><span class="line">        public &lt;T&gt; AggregatedPage&lt;T&gt; mapResults(SearchResponse resp, Class&lt;T&gt; clazz, Pageable pageable) &#123;</span><br><span class="line">            List&lt;T&gt; list = new ArrayList&lt;&gt;();</span><br><span class="line">            try &#123;</span><br><span class="line">                for (SearchHit hit : resp.getHits().getHits()) &#123;</span><br><span class="line">                    // 把查询到的JSON字符串转换成Java对象</span><br><span class="line">                    T t = mapper.readValue(hit.getSourceAsString(), clazz);</span><br><span class="line">                    for (HighlightField field : hit.getHighlightFields().values()) &#123;</span><br><span class="line">                        // 替换需要高亮显示的字段，用到Apache的BeanUtils工具</span><br><span class="line">                        BeanUtils.setProperty(t, field.getName(), field.getFragments()[0].string());</span><br><span class="line">                    &#125;</span><br><span class="line">                    list.add(t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; catch (Exception e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">            long total = resp.getHits().totalHits;</span><br><span class="line">            return new AggregatedPageImpl&lt;&gt;(list, pageable, total);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    page.forEach(System.out::println);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="springboot2-3-x以上配置"><a href="#springboot2-3-x以上配置" class="headerlink" title="springboot2.3.x以上配置"></a>springboot2.3.x以上配置</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-data/elasticsearch/docs/4.0.1.RELEASE/reference/html/#new-features">配置关系对应</a></p>
<p><img src="https://images-jsh.oss-cn-beijing.aliyuncs.com/img/%E6%88%AA%E5%B1%8F2021-08-14%2014.17.14.png" alt="截屏2021-08-14 14.17.14"></p>
</blockquote>
<ol>
<li><p>pom相同</p>
</li>
<li><p>配置</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">## 旧版本以spring.data.elasticsearch.开头;访问地址配置不用声明访问协议,监听es的tcp端口</span><br><span class="line">#spring.data.elasticsearch.cluster-nodes=localhost:9300</span><br><span class="line">#spring.data.elasticsearch.cluster-name=elasticsearch</span><br><span class="line"></span><br><span class="line">## 新版本以spring.elasticsearch.rest.开头;访问地址配置需要声明访问协议,直接监听es访问端口</span><br><span class="line">spring.elasticsearch.rest.uris=http://localhost:9200</span><br><span class="line">spring.elasticsearch.rest.username=elasticsearch</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用</p>
<ul>
<li><p>旧版的核心访问对象是ElasticsearchTemplate；新版的核心访问对象是ElasticsearchRestTemplate；</p>
</li>
<li><p>实体类没有类型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// @Document指定当前类是索引对象。indexName:索引名称;shards:创建索引时的分片数;replicas:创建索引时的备份数</span><br><span class="line">@Document(indexName = &quot;book_&quot;, shards = 5, replicas = 1)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Elasticsearch/" data-id="clc5wl9l0001feol6cgi5ceuz" data-title="Elasticsearch学习" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-docker简单部署rocketMQ" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/docker%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2rocketMQ/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.690Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/docker%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2rocketMQ/">docker简单部署rocketMQ</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="docker简单部署rocketMQ"><a href="#docker简单部署rocketMQ" class="headerlink" title="docker简单部署rocketMQ"></a>docker简单部署rocketMQ</h1><p>1.创建namesrv服务<br>拉取镜像</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull rocketmqinc/rocketmq</span><br></pre></td></tr></table></figure>



<h3 id="创建namesrv数据存储路径"><a href="#创建namesrv数据存储路径" class="headerlink" title="创建namesrv数据存储路径"></a>创建namesrv数据存储路径</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p  /docker/rocketmq/data/namesrv/logs   /docker/rocketmq/data/namesrv/store</span><br></pre></td></tr></table></figure>



<h3 id="构建namesrv容器"><a href="#构建namesrv容器" class="headerlink" title="构建namesrv容器"></a>构建namesrv容器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">--restart=always \</span><br><span class="line">--name rmqnamesrv \</span><br><span class="line">-p 9876:9876 \</span><br><span class="line">-v /docker/rocketmq/data/namesrv/logs:/root/logs \</span><br><span class="line">-v /docker/rocketmq/data/namesrv/store:/root/store \</span><br><span class="line">-e &quot;MAX_POSSIBLE_HEAP=100000000&quot; \</span><br><span class="line">rocketmqinc/rocketmq \</span><br><span class="line">sh mqnamesrv </span><br></pre></td></tr></table></figure>

<h1 id="2-创建broker节点"><a href="#2-创建broker节点" class="headerlink" title="2.创建broker节点"></a>2.创建broker节点</h1><h2 id="创建broker数据存储路径"><a href="#创建broker数据存储路径" class="headerlink" title="创建broker数据存储路径"></a>创建broker数据存储路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mkdir</span> -p  /docker/rocketmq/data/broker/logs   /docker/rocketmq/data/broker/store /docker/rocketmq/conf</span><br></pre></td></tr></table></figure>



<h2 id="创建配置文件"><a href="#创建配置文件" class="headerlink" title="创建配置文件"></a>创建配置文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">vi /docker/rocketmq/conf/broker.conf</span><br><span class="line"># 所属集群名称，如果节点较多可以配置多个</span><br><span class="line">brokerClusterName = DefaultCluster</span><br><span class="line">#broker名称，master和slave使用相同的名称，表明他们的主从关系</span><br><span class="line">brokerName = broker-a</span><br><span class="line">#0表示Master，大于0表示不同的slave</span><br><span class="line">brokerId = 0</span><br><span class="line">#表示几点做消息删除动作，默认是凌晨4点</span><br><span class="line">deleteWhen = 04</span><br><span class="line">#在磁盘上保留消息的时长，单位是小时</span><br><span class="line">fileReservedTime = 48</span><br><span class="line">#有三个值：SYNC_MASTER，ASYNC_MASTER，SLAVE；同步和异步表示Master和Slave之间同步数据的机制；</span><br><span class="line">brokerRole = ASYNC_MASTER</span><br><span class="line">#刷盘策略，取值为：ASYNC_FLUSH，SYNC_FLUSH表示同步刷盘和异步刷盘；SYNC_FLUSH消息写入磁盘后才返回成功状态，ASYNC_FLUSH不需要；</span><br><span class="line">flushDiskType = ASYNC_FLUSH</span><br><span class="line"># 磁盘使用达到95%之后,生产者再写入消息会报错 CODE: 14 DESC: service not available now, maybe disk full</span><br><span class="line">diskMaxUsedSpaceRatio=95</span><br><span class="line"></span><br><span class="line">namesrvAddr=【IP】:9876</span><br><span class="line">brokerIP1 = 【IP】</span><br></pre></td></tr></table></figure>



<h2 id="构建broker容器"><a href="#构建broker容器" class="headerlink" title="构建broker容器"></a>构建broker容器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  \</span><br><span class="line">--restart=always \</span><br><span class="line">--name rmqbroker \</span><br><span class="line">--link rmqnamesrv:namesrv \</span><br><span class="line">-p 10911:10911 \</span><br><span class="line">-p 10912:10912 \</span><br><span class="line">-p 10909:10909 \</span><br><span class="line">-v  /docker/rocketmq/data/broker/logs:/root/logs \</span><br><span class="line">-v  /docker/rocketmq/data/broker/store:/root/store \</span><br><span class="line">-v /docker/rocketmq/conf/broker.conf:/opt/rocketmq-4.4.0/conf/broker.conf \</span><br><span class="line">-e &quot;NAMESRV_ADDR= 43.143.40.221:9876&quot; \</span><br><span class="line">-e &quot;MAX_POSSIBLE_HEAP=200000000&quot; \</span><br><span class="line">rocketmqinc/rocketmq \</span><br><span class="line">sh mqbroker -c /opt/rocketmq-4.4.0/conf/broker.conf  </span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="3-创建rockermq-console服务"><a href="#3-创建rockermq-console服务" class="headerlink" title="3.创建rockermq-console服务"></a>3.创建rockermq-console服务</h1><h2 id="拉取镜像"><a href="#拉取镜像" class="headerlink" title="拉取镜像"></a>拉取镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull pangliang/rocketmq-console-ng</span><br></pre></td></tr></table></figure>



<h2 id="构建rockermq-console容器"><a href="#构建rockermq-console容器" class="headerlink" title="构建rockermq-console容器"></a>构建rockermq-console容器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">docker run -d \</span><br><span class="line">--restart=always \</span><br><span class="line">--name rmqadmin \</span><br><span class="line">-e &quot;JAVA_OPTS=-Drocketmq.namesrv.addr=43.143.40.221:9876 \</span><br><span class="line">-Dcom.rocketmq.sendMessageWithVIPChannel=false&quot; \</span><br><span class="line">-p 9877:8080 \</span><br><span class="line">pangliang/rocketmq-console-ng</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service</span><br></pre></td></tr></table></figure>



<h3 id="开放指定端口"><a href="#开放指定端口" class="headerlink" title="开放指定端口"></a>开放指定端口</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=9876/tcp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=10911/tcp</span><br><span class="line">firewall-cmd --permanent --zone=public --add-port=10912/tcp</span><br><span class="line"># 立即生效</span><br><span class="line">firewall-cmd --reload</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="访问控制台"><a href="#访问控制台" class="headerlink" title="访问控制台"></a>访问控制台</h2><p>网页访问http:&#x2F;&#x2F;【IP】:9999&#x2F;查看控制台信息</p>
<p><img src="https://brath.cloud/blogImg/20201013235856206.png" alt="在这里插入图片描述"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/docker%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2rocketMQ/" data-id="clc5wl9kb0011eol60cyz3n0l" data-title="docker简单部署rocketMQ" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Docker环境下安装vim" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vim/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.688Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vim/">Docker环境下安装vim</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Docker环境下安装vim"><a href="#Docker环境下安装vim" class="headerlink" title="Docker环境下安装vim"></a>Docker环境下安装vim</h2><p>在使用docker容器时，容器一般没有安装vim，就需要安装vim<br>apt-get install vim命令用于安装vim，但是下载过慢。<br>第一步 配置国内镜像源<br>进入某个容器</p>
<p>例如进入mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql /bin/bash</span><br></pre></td></tr></table></figure>

<p>第二步：更新源</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure>


<p>第三步安装vim</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vim/" data-id="clc5wl9jp0003eol61o4a3zl3" data-title="Docker环境下安装vim" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-Docker环境部署Reids镜像作为从节点" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2Reids%E9%95%9C%E5%83%8F%E4%BD%9C%E4%B8%BA%E4%BB%8E%E8%8A%82%E7%82%B9/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.686Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2Reids%E9%95%9C%E5%83%8F%E4%BD%9C%E4%B8%BA%E4%BB%8E%E8%8A%82%E7%82%B9/">Docker环境部署Reids镜像作为从节点</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="Docker环境部署Reids镜像作为从节点"><a href="#Docker环境部署Reids镜像作为从节点" class="headerlink" title="Docker环境部署Reids镜像作为从节点"></a>Docker环境部署Reids镜像作为从节点</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 拉取镜像</span><br><span class="line">docker pull redis</span><br><span class="line"></span><br><span class="line"># 配置文件</span><br><span class="line">本地：/mydata/redis/data/redis.conf 提前准备好</span><br><span class="line">主要配置</span><br><span class="line">bind 127.0.0.1 #注释掉这部分，使redis可以外部访问</span><br><span class="line">daemonize no#用守护线程的方式启动</span><br><span class="line">requirepass 你的密码#给redis设置密码</span><br><span class="line">appendonly yes#redis持久化　　默认是no</span><br><span class="line">tcp-keepalive 300 #防止出现远程主机强迫关闭了一个现有的连接的错误 默认是300</span><br><span class="line"></span><br><span class="line"># 创建实例并启动</span><br><span class="line">docker run -p 6380:6379 --name redis -v /mydata/redis/data/redis.conf:/etc/redis/redis.conf  -v /mydata/redis/data:/data -d redis redis-server /etc/redis/redis.conf --appendonly yes</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/Docker%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2Reids%E9%95%9C%E5%83%8F%E4%BD%9C%E4%B8%BA%E4%BB%8E%E8%8A%82%E7%82%B9/" data-id="clc5wl9jq0004eol6fm28fu34" data-title="Docker环境部署Reids镜像作为从节点" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-CompletableFuture使用文档" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/12/27/CompletableFuture%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" class="article-date">
  <time class="dt-published" datetime="2022-12-27T07:24:12.684Z" itemprop="datePublished">2022-12-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/12/27/CompletableFuture%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/">CompletableFuture使用文档</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>背景：<br>CompletableFuture字面翻译过来，就是“可完成的Future”。同传统的Future相比较，CompletableFuture能够主动设置计算的结果值（主动终结计算过程，即completable），从而在某些场景下主动结束阻塞等待。而Future由于不能主动设置计算结果值，一旦调用get()进行阻塞等待，要么当计算结果产生，要么超时，才会返回。</p>
<p>CompletableFuture说白了其实就是为了解决Future的问题（阻塞），而生！！！</p>
<p>下面总结CompletableFuture的常用api</p>
<ol>
<li><p>创建CompletableFuture<br>  实例方法：</p>
<pre><code>//实例方法
CompletableFuture&lt;String&gt; completableFutureOne = new CompletableFuture&lt;&gt;();
Supplier&lt;?&gt; task=new Supplier&lt;Object&gt;() &#123;
    @Override
    public Object get() &#123;
        return null;
    &#125;
&#125;;
CompletableFuture&lt;?&gt; completableFuture = completableFutureOne.supplyAsync(task);
</code></pre>
</li>
</ol>
<p>  静态方法：</p>
<p>  public static void main(String[] args) throws ExecutionException, InterruptedException {<br>          Runnable runnable &#x3D; () -&gt;<br>                  System.out.println(“执行无返回结果的异步任务”);<br>          System.out.println(CompletableFuture.runAsync(runnable).get());</p>
<pre><code>      CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;
          System.out.println(&quot;执行有返回值的异步任务&quot;);
          return &quot;Hello World&quot;;
      &#125;);
      String result = future.get();
      System.out.println(result);
  &#125;
</code></pre>
<h2 id="2、whenComplete-第一个任务结束，对其结果处理-handly的作用一样"><a href="#2、whenComplete-第一个任务结束，对其结果处理-handly的作用一样" class="headerlink" title="2、whenComplete-第一个任务结束，对其结果处理(handly的作用一样)"></a>2、whenComplete-第一个任务结束，对其结果处理(handly的作用一样)</h2><p>  结果处理就是当future任务完成时，对任务的结果做处理工作！或异常情况处理！</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(1);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;执行结束1！&quot;);</span><br><span class="line">            return 5;</span><br><span class="line">        &#125;);</span><br><span class="line">        future.whenComplete(new BiConsumer&lt;Integer, Throwable&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Integer t, Throwable action) &#123;</span><br><span class="line">                t=t+1;</span><br><span class="line">//                int i = 12 / 0;</span><br><span class="line">                System.out.println(&quot;执行完成2！&quot;+action.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .exceptionally(new Function&lt;Throwable, Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Integer apply(Throwable t) &#123;</span><br><span class="line">                System.out.println(&quot;执行失败3：&quot; + t.getMessage());</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).join();</span><br><span class="line">        Integer integer = future.get();</span><br><span class="line">        System.out.println(&quot;=&gt;integer&quot;+integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>  1、whenComplete只是对任务运行结束后，拿到任务结果，做个处理，并且如果任务执行有异常，会监听到异常！<br>  2、如果whenComplete本身有异常，那么需要单独加exceptionally来监听异常！<br>  3、最终future.get()拿到的还是任务1的结果<br>  4、如果任务有异常，future.get()拿到会抛出异常！</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">执行结束1！</span><br><span class="line">执行失败3：java.lang.ArithmeticException: / by zero</span><br><span class="line">Exception in thread &quot;main&quot; java.util.concurrent.ExecutionException: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)</span><br><span class="line">	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)</span><br><span class="line">	at top.lisicheng.wmd.CompleableFutureTest2.main(CompleableFutureTest2.java:83)</span><br><span class="line">Caused by: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at top.lisicheng.wmd.CompleableFutureTest2.lambda$main$0(CompleableFutureTest2.java:65)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1590)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1582)</span><br><span class="line">	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)</span><br><span class="line">	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)</span><br><span class="line">	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)</span><br><span class="line">	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3、thenApply-第一个任务结束，可能还有第二、第三个任务，且后面一个任务，需要用到前面任务的返回值"><a href="#3、thenApply-第一个任务结束，可能还有第二、第三个任务，且后面一个任务，需要用到前面任务的返回值" class="headerlink" title="3、thenApply-第一个任务结束，可能还有第二、第三个任务，且后面一个任务，需要用到前面任务的返回值"></a>3、thenApply-第一个任务结束，可能还有第二、第三个任务，且后面一个任务，需要用到前面任务的返回值</h2>  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public static void test4(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        /**</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApply(Function&lt;? super T,? extends U&gt; fn)</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn)</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn, Executor executor)</span><br><span class="line">         *  总结：thenApply 接收一个函数作为参数，使用该函数处理上一个CompletableFuture 调用的结果，</span><br><span class="line">         *  并返回一个具有处理结果的Future对象。</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            int result = 100;</span><br><span class="line">            System.out.println(&quot;一阶段：&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;).thenApply(number -&gt; &#123;</span><br><span class="line">            int result = number * 3;</span><br><span class="line">            System.out.println(&quot;二阶段：&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;).thenApply(number -&gt; &#123;</span><br><span class="line">            int result = number * 3;</span><br><span class="line">            System.out.println(&quot;三阶段：&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;最终结果：&quot; + future.get());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h2 id="4、thenCompose-跟上面一样的作用："><a href="#4、thenCompose-跟上面一样的作用：" class="headerlink" title="4、thenCompose-跟上面一样的作用："></a>4、thenCompose-跟上面一样的作用：</h2><p>  thenCompose 的参数为一个返回 CompletableFuture 实例的函数，该函数的参数是先前计算步骤的结果。</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenCompose(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn);</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn) ;</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn, Executor executor) ;</span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws InterruptedException, ExecutionException &#123;</span><br><span class="line">    CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(new Supplier&lt;Integer&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Integer get() &#123;</span><br><span class="line">            int number = new Random().nextInt(3);</span><br><span class="line">            System.out.println(&quot;第一阶段：&quot; + number);</span><br><span class="line">            return number;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).thenCompose(new Function&lt;Integer, CompletionStage&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public CompletionStage&lt;Integer&gt; apply(Integer param) &#123;</span><br><span class="line">            return CompletableFuture.supplyAsync(new Supplier&lt;Integer&gt;() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Integer get() &#123;</span><br><span class="line">                    int number = param * 2;</span><br><span class="line">                    System.out.println(&quot;第二阶段：&quot; + number);</span><br><span class="line">                    return number;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(&quot;最终结果: &quot; + future.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">那么 thenApply 和 thenCompose 有何区别呢：</span><br><span class="line"></span><br><span class="line">thenApply 转换的是泛型中的类型，返回的是同一个CompletableFuture；</span><br><span class="line">thenCompose 将内部的 CompletableFuture 调用展开来并使用上一个CompletableFutre 调用的结果在下一步的 CompletableFuture 调用中进行运算，</span><br><span class="line">是生成一个新的CompletableFuture。</span><br></pre></td></tr></table></figure>

<p><strong>下面用一个例子对对比：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws InterruptedException, ExecutionException &#123;</span><br><span class="line">    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; &quot;Hello&quot;);</span><br><span class="line"></span><br><span class="line">    CompletableFuture&lt;String&gt; result1 = future.thenApply(param -&gt; param + &quot; World&quot;);</span><br><span class="line">    CompletableFuture&lt;String&gt; result2 = future.thenCompose(param -&gt; CompletableFuture.supplyAsync(() -&gt; param + &quot; World&quot;));</span><br><span class="line"></span><br><span class="line">    System.out.println(result1.get());</span><br><span class="line">    System.out.println(result2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5、结果消费"><a href="#5、结果消费" class="headerlink" title="5、结果消费"></a>5、结果消费</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thenAccept系列：对单个结果进行消费</span><br><span class="line">thenAcceptBoth系列：对两个结果进行消费</span><br><span class="line">thenRun系列：不关心结果，只对结果执行Action</span><br></pre></td></tr></table></figure>

<p>只会拿到上个任务的值，然后对值进行消费，但是绝对不会产生新的值<br>这是跟上面任务中间 转换的，最大的区别</p>
<p>消费结果还包括thenRun<br>thenRun跟thenAccept的区别是，它不仅不产生新的值，还不消费上个任务的值，只是自己做一个业务处理。</p>
<p>6、结果组合<br>thenCombine -合并两个线程任务的结果，并进一步处理。<br>applyToEither-两个线程任务相比较，先获得执行结果的，就对该结果进行下一步的转化操作。<br>acceptEither-两个线程任务相比较，先获得执行结果的，就对该结果进行下一步的消费操作。<br>runAfterEither-两个线程任务相比较，有任何一个执行完成，就进行下一步操作，不关心运行结果。<br>runAfterBoth-两个线程任务相比较，两个全部执行完成，才进行下一步操作，不关心运行结果。<br>anyOf-anyOf 方法的参数是多个给定的 CompletableFuture，当其中的任何一个完成时，方法返回这个 CompletableFuture。<br>allOf-allOf方法用来实现多 CompletableFuture 的同时返回。</p>
<p>代码实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/test&quot;)</span><br><span class="line">public class TestController &#123;</span><br><span class="line"></span><br><span class="line">    public static ExecutorService threadPool =</span><br><span class="line">            new ThreadPoolExecutor(</span><br><span class="line">                    10,</span><br><span class="line">                    40,</span><br><span class="line">                    20,</span><br><span class="line">                    TimeUnit.SECONDS,</span><br><span class="line">                    new ArrayBlockingQueue&lt;Runnable&gt;(</span><br><span class="line">                            16</span><br><span class="line">                    ));</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * CompletableFuture 测试</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @ApiOperation(&quot;CompletableFuture 测试&quot;)</span><br><span class="line">    @PostMapping(&quot;test&quot;)</span><br><span class="line">    public Object test() &#123;</span><br><span class="line">        Map&lt;Object, Object&gt; result = new HashMap&lt;&gt;();</span><br><span class="line">        CompletableFuture.allOf(</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;执行1&quot;);</span><br><span class="line">                    result.put(&quot;key1&quot;, seslectData1());</span><br><span class="line">                &#125;, threadPool),</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;执行2&quot;);</span><br><span class="line">                    result.put(&quot;key2&quot;, seslectData2());</span><br><span class="line">                &#125;, threadPool),</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;执行3&quot;);</span><br><span class="line">                    result.put(&quot;key3&quot;, seslectData3());</span><br><span class="line">                &#125;, threadPool)</span><br><span class="line">        ).join();</span><br><span class="line"></span><br><span class="line">        return ResponseUtil.ok(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData1() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key1&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData2() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key2&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData3() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(300);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key3&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/12/27/CompletableFuture%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/" data-id="clc5wl9js0008eol6e4ek5zy1" data-title="CompletableFuture使用文档" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">December 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/12/27/%E4%B8%BB%E4%BB%8E%E5%90%8C%E6%AD%A5%E5%BC%82%E5%B8%B8%E8%AE%B0%E5%BD%95/">主从同步遇到 Got fatal error 1236 from master when reading data from binary log</a>
          </li>
        
          <li>
            <a href="/2022/12/27/%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2%E5%AE%9D%E5%A1%94/">云服务器部署宝塔面板</a>
          </li>
        
          <li>
            <a href="/2022/12/27/%E5%BE%AE%E6%9C%8D%E5%8A%A1%E6%8B%86%E5%88%86%E7%BB%86%E5%88%99/">微服务拆分细则</a>
          </li>
        
          <li>
            <a href="/2022/12/27/%E8%85%BE%E8%AE%AF%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8liux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E6%97%A0%E6%B3%95%E9%80%9A%E8%BF%87springBoot%E5%86%85%E7%BD%AEmail%E5%8F%91%E9%80%81%E9%82%AE%E4%BB%B6%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/">腾讯云服务器liux系统下无法通过springBoot内置mail发送邮件的解决方案</a>
          </li>
        
          <li>
            <a href="/2022/12/27/%E4%BD%BF%E7%94%A8docker%E6%90%AD%E5%BB%BA%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%AE%B0%E5%BD%95/">使用docker搭建开发环境记录</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>