<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/me.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/me.png"}},"description":""}</script><link rel="icon" href="https://brath.cloud/me.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章列表</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">更多</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.165Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.557Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">17 分钟读完 (大约2507个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%E4%BF%AE%E5%A4%8DAndroid%2012%E6%97%A0%E6%B3%95%E6%9E%84%E5%BB%BA%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%8C%E8%87%AA%E5%8A%A8%E9%80%82%E9%85%8D%20exported%20%E6%B7%B1%E5%85%A5%E8%A7%A3%E6%9E%90%E9%81%BF%E5%9D%91/">【Flutter】Flutter修复Android 12无法构建的问题，自动适配 exported 深入解析避坑.md</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutterflutter修复android-12无法构建的问题自动适配-exported-深入解析避坑"><a class="markdownIt-Anchor" href="#flutterflutter修复android-12无法构建的问题自动适配-exported-深入解析避坑">#</a> 【Flutter】Flutter 修复 Android 12 无法构建的问题，自动适配 exported 深入解析避坑</h1>
<blockquote>
<p><em>【摘要】 众所周知，从 Android 12 开始，使用了 TargetSDK 31 之后，四大组件如果使用了 intent-filter， 但是没显性质配置 exported App 将会无法安装，甚至编译不通过…</em></p>
</blockquote>
<blockquote>
<p>比如启动的  <code>Activity</code>  就需要设置  <code>exported</code>  为  <code>true</code>  ，至于其他组件是否设置为  <code>true</code>  则看它是否需要被其它应用调用。</p>
</blockquote>
<h4 id="然而这个事情的状态是这样的"><a class="markdownIt-Anchor" href="#然而这个事情的状态是这样的">#</a> 然而这个事情的状态是这样的:</h4>
<ul>
<li>如果出现问题的  <code>AndroidManifest</code>  文件是你本地的，那手动修改即可；</li>
<li>但如果出现问题的是第三方远程依赖，并且对方并没有提供源码和更新，你就无法直接修改；</li>
<li>如果第三方依赖太多，查找哪些出了问题十分费时费力。</li>
</ul>
<h2 id="脚本"><a class="markdownIt-Anchor" href="#脚本">#</a> 脚本</h2>
<p>所以在之前的 《Android 12 快速适配要点》 一文中提供了一套脚本，专门用于适配 Android 12 下缺少  <code>android:exported</code>  无法编译或者安装的问题，但是在这期间收到了不少问题反馈：</p>
<h3 id="comandroidtoolsbuildgradle400-以及其下版本"><a class="markdownIt-Anchor" href="#comandroidtoolsbuildgradle400-以及其下版本">#</a> com.android.tools.build:gradle:4.0.0 以及其下版本</h3>
<p>一下脚本经过测试最高可到支持的版本： <strong>gradle:4.0.0 &amp; gradle-6.1.1-all.zip</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改 Android 12 因为 exported 的构建问题</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    variant.outputs.all &#123; output -&gt;</span><br><span class="line">        output.processResources.<span class="keyword">doFirst</span> &#123; pm -&gt;</span><br><span class="line">            String manifestPath = output.processResources.manifestFile</span><br><span class="line">            <span class="keyword">def</span> manifestFile = <span class="keyword">new</span> <span class="keyword">File</span>(manifestPath)</span><br><span class="line">            <span class="keyword">def</span> xml = <span class="keyword">new</span> XmlParser(<span class="keyword">false</span>, <span class="keyword">true</span>).parse(manifestFile)</span><br><span class="line">            <span class="keyword">def</span> exportedTag = <span class="string">&quot;android:exported&quot;</span></span><br><span class="line">            <span class="comment">///指定 space</span></span><br><span class="line">            <span class="keyword">def</span> androidSpace = <span class="keyword">new</span> groovy.xml.Namespace(<span class="string">&#x27;http://schemas.android.com/apk/res/android&#x27;</span>, <span class="string">&#x27;android&#x27;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">def</span> nodes = xml.application[<span class="number">0</span>].<span class="string">&#x27;*&#x27;</span>.<span class="keyword">findAll</span> &#123;</span><br><span class="line">                <span class="comment">//挑选要修改的节点，没有指定的 exported 的才需要增加</span></span><br><span class="line">                (it.name() == <span class="string">&#x27;activity&#x27;</span> || it.name() == <span class="string">&#x27;receiver&#x27;</span> || it.name() == <span class="string">&#x27;service&#x27;</span>) &amp;&amp; it.attribute(androidSpace.exported) == <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">///添加 exported，默认 false</span></span><br><span class="line">            nodes.<span class="keyword">each</span> &#123;</span><br><span class="line">                <span class="keyword">def</span> isMain = <span class="keyword">false</span></span><br><span class="line">                it.<span class="keyword">each</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> (it.name() == <span class="string">&quot;intent-filter&quot;</span>) &#123;</span><br><span class="line">                        it.<span class="keyword">each</span> &#123;</span><br><span class="line">                            <span class="keyword">if</span> (it.name() == <span class="string">&quot;action&quot;</span>) &#123;</span><br><span class="line">                                <span class="keyword">if</span> (it.attributes().get(androidSpace.name) == <span class="string">&quot;android.intent.action.MAIN&quot;</span>) &#123;</span><br><span class="line">                                    isMain = <span class="keyword">true</span></span><br><span class="line">                                    <span class="keyword">println</span>(<span class="string">&quot;......................MAIN FOUND......................&quot;</span>)</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                it.attributes().put(exportedTag, <span class="string">&quot;$&#123;isMain&#125;&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            PrintWriter pw = <span class="keyword">new</span> PrintWriter(manifestFile)</span><br><span class="line">            pw.<span class="keyword">write</span>(groovy.xml.XmlUtil.serialize(xml))</span><br><span class="line">            pw.close()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="comandroidtoolsbuildgradle400-以上版本"><a class="markdownIt-Anchor" href="#comandroidtoolsbuildgradle400-以上版本">#</a> com.android.tools.build:gradle:4.0.0 以上版本</h3>
<p>以下脚本经过测试支持的版本： <strong>gradle:4.1.0 &amp; gradle-6.5.1-all.zip</strong></p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 修改 Android 12 因为 exported 的构建问题</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line">android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    variant.outputs.<span class="keyword">each</span> &#123; output -&gt;</span><br><span class="line">        <span class="keyword">def</span> processManifest = output.getProcessManifestProvider().get()</span><br><span class="line">        processManifest.<span class="keyword">doLast</span> &#123; <span class="keyword">task</span> -&gt;</span><br><span class="line">            <span class="keyword">def</span> outputDir = <span class="keyword">task</span>.multiApkManifestOutputDirectory</span><br><span class="line">            <span class="keyword">File</span> outputDirectory</span><br><span class="line">            <span class="keyword">if</span> (outputDir <span class="keyword">instanceof</span> <span class="keyword">File</span>) &#123;</span><br><span class="line">                outputDirectory = outputDir</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                outputDirectory = outputDir.get().asFile</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">File</span> manifestOutFile = <span class="keyword">file</span>(<span class="string">&quot;$outputDirectory/AndroidManifest.xml&quot;</span>)</span><br><span class="line">            <span class="keyword">println</span>(<span class="string">&quot;----------- $&#123;manifestOutFile&#125; ----------- &quot;</span>)</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (manifestOutFile.exists() &amp;&amp; manifestOutFile.canRead() &amp;&amp; manifestOutFile.canWrite()) &#123;</span><br><span class="line">                <span class="keyword">def</span> manifestFile = manifestOutFile</span><br><span class="line">                <span class="comment">///这里第二个参数是 false ，所以 namespace 是展开的，所以下面不能用 androidSpace，而是用 nameTag</span></span><br><span class="line">                <span class="keyword">def</span> xml = <span class="keyword">new</span> XmlParser(<span class="keyword">false</span>, <span class="keyword">false</span>).parse(manifestFile)</span><br><span class="line">                <span class="keyword">def</span> exportedTag = <span class="string">&quot;android:exported&quot;</span></span><br><span class="line">                <span class="keyword">def</span> nameTag = <span class="string">&quot;android:name&quot;</span></span><br><span class="line">                <span class="comment">///指定 space</span></span><br><span class="line">                <span class="comment">//def androidSpace = new groovy.xml.Namespace(&#x27;http://schemas.android.com/apk/res/android&#x27;, &#x27;android&#x27;)</span></span><br><span class="line"></span><br><span class="line">                <span class="keyword">def</span> nodes = xml.application[<span class="number">0</span>].<span class="string">&#x27;*&#x27;</span>.<span class="keyword">findAll</span> &#123;</span><br><span class="line">                    <span class="comment">//挑选要修改的节点，没有指定的 exported 的才需要增加</span></span><br><span class="line">                    <span class="comment">//如果 exportedTag 拿不到可以尝试 it.attribute(androidSpace.exported)</span></span><br><span class="line">                    (it.name() == <span class="string">&#x27;activity&#x27;</span> || it.name() == <span class="string">&#x27;receiver&#x27;</span> || it.name() == <span class="string">&#x27;service&#x27;</span>) &amp;&amp; it.attribute(exportedTag) == <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">///添加 exported，默认 false</span></span><br><span class="line">                nodes.<span class="keyword">each</span> &#123;</span><br><span class="line">                    <span class="keyword">def</span> isMain = <span class="keyword">false</span></span><br><span class="line">                    it.<span class="keyword">each</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (it.name() == <span class="string">&quot;intent-filter&quot;</span>) &#123;</span><br><span class="line">                            it.<span class="keyword">each</span> &#123;</span><br><span class="line">                                <span class="keyword">if</span> (it.name() == <span class="string">&quot;action&quot;</span>) &#123;</span><br><span class="line">                                    <span class="comment">//如果 nameTag 拿不到可以尝试 it.attribute(androidSpace.name)</span></span><br><span class="line">                                    <span class="keyword">if</span> (it.attributes().get(nameTag) == <span class="string">&quot;android.intent.action.MAIN&quot;</span>) &#123;</span><br><span class="line">                                        isMain = <span class="keyword">true</span></span><br><span class="line">                                        <span class="keyword">println</span>(<span class="string">&quot;......................MAIN FOUND......................&quot;</span>)</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    it.attributes().put(exportedTag, <span class="string">&quot;$&#123;isMain&#125;&quot;</span>)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                PrintWriter pw = <span class="keyword">new</span> PrintWriter(manifestFile)</span><br><span class="line">                pw.<span class="keyword">write</span>(groovy.xml.XmlUtil.serialize(xml))</span><br><span class="line">                pw.close()</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段脚本你可以直接放到  <code>app/build.gradle</code>  下执行，也可以单独放到一个 gradle 文件之后  <code>apply</code>  引入，它的作用就是：</p>
<blockquote>
<p>在打包过程中检索所有没有设置  <code>exported</code>  的组件，给他们动态配置上  <code>exported</code> ，这里有个特殊需要注意的是，因为启动  <code>Activity</code>  默认就是需要被 Launcher 打开的，所以  <code>&quot;android.intent.action.MAIN&quot;</code>  需要  <code>exported</code>  设置为  <code>true</code>  。（<strong>PS：更正规应该是用 LAUNCHER 类别，这里故意用 MAIN</strong>）</p>
</blockquote>
<p>而后综合问题，具体反馈的问题有 ：</p>
<ul>
<li><code>label</code>  直接写死中文，不是引用  <code>@string</code>  导致的在 3.x 的版本可以正常运行，但不能打包 ；</li>
<li><code>XmlParser</code>  类找不到，这个首先确定 AGP 版本和 Gradle 版本是否匹配，具体可见 gradle-plugin，另外可以通过 <strong> <code>groovy.util.XmlParser</code> </strong> 或者 <strong> <code>groovy.xml.XmlParser</code> </strong> 全路径指定使用 ，如果是 gradle 文件里显示红色并不会影响运行；</li>
<li><strong>运行报错提示  <code>android:exported needs</code> ，这个就是今天需要输入聊的</strong>；</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Error</span>: <span class="attr">android</span>:exported needs to be explicitly specified <span class="keyword">for</span> &lt;xxxx&gt;. <span class="title class_">Apps</span> targeting <span class="title class_">Android</span> <span class="number">12</span> and higher are required to specify an explicit value <span class="keyword">for</span> <span class="string">`android:exported`</span> when the corresponding component has an intent filter defined.</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>基于上述脚本测试和反馈，目前的结论是：</p>
<blockquote>
<p><strong>从  <code>gradle:4.2.0 &amp; gradle-6.7.1-all.zip</code>  开始，TargetSDK 31 下脚本会有异常，因为在  <code>processDebugMainManifest</code>  （带有 Main） 的阶段，会直接扫描依赖库的  <code>AndroidManifest.xml</code>  然后抛出直接报错，从而进不去  <code>processDebugManifest</code>  任务阶段就编译停止，所以实际上脚本并没有成功运行</strong>。</p>
</blockquote>
<p>所以此时拿不到  <code>mergerd_manifest</code>  下的文件，因为  <code>mergerd_manifest</code>  下  <code>AndroidManifest.xml</code>  也还没创建成功，没办法进入 task ，也就是该脚本目前只能针对  <code>gradle:4.1.0</code>  以及其下版本安装 apk 到 Android12 的机器上， 有  <code>intent-filter</code>  但没有 exoprted 的适配问题，<strong>基于这个问题，不知道各位是否有什么好的建议？</strong></p>
<h2 id="新脚本"><a class="markdownIt-Anchor" href="#新脚本">#</a> 新脚本</h2>
<p>而目前基于这个问题，这里提供了如下脚本，在  <code>gradle:4.2.0 &amp; gradle-6.7.1-all.zip</code>  以及  <code>7.0</code>  的版本上，<strong>该脚本的作用是在运行时自动帮你打印出现问题的 aar 包依赖路径和组建名称</strong>：</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">android.applicationVariants.all &#123; variant -&gt;</span><br><span class="line">    variant.outputs.<span class="keyword">each</span> &#123; output -&gt;</span><br><span class="line">        <span class="comment">//println(&quot;=============== $&#123;variant.getBuildType().name.toUpperCase()&#125; ===============&quot;)</span></span><br><span class="line">        <span class="comment">//println(&quot;=============== $&#123;variant.getFlavorName()&#125; ===============&quot;)</span></span><br><span class="line">        <span class="keyword">def</span> vn</span><br><span class="line">        <span class="keyword">if</span> (variant.getFlavorName() != <span class="keyword">null</span> &amp;&amp; variant.getFlavorName() != <span class="string">&quot;&quot;</span>) &#123;</span><br><span class="line">            vn = variant.name;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (variant.getBuildType().name == <span class="string">&quot;release&quot;</span>) &#123;</span><br><span class="line">                vn = <span class="string">&quot;Release&quot;</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                vn = <span class="string">&quot;Debug&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">def</span> taskName = <span class="string">&quot;process$&#123;vn&#125;MainManifest&quot;</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">println</span>(<span class="string">&quot;=============== taskName $&#123;taskName&#125; ===============&quot;</span>)</span><br><span class="line">            <span class="keyword">project</span>.getTasks().getByName(taskName)</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">///你的自定义名字</span></span><br><span class="line">        <span class="keyword">project</span>.getTasks().getByName(taskName).<span class="keyword">doFirst</span> &#123;</span><br><span class="line">            <span class="comment">//def method = it.getClass().getMethods()</span></span><br><span class="line">            it.getManifests().getFiles().<span class="keyword">each</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (it.exists() &amp;&amp; it.canRead()) &#123;</span><br><span class="line">                    <span class="keyword">def</span> manifestFile = it</span><br><span class="line">                    <span class="keyword">def</span> exportedTag = <span class="string">&quot;android:exported&quot;</span></span><br><span class="line">                    <span class="keyword">def</span> nameTag = <span class="string">&quot;android:name&quot;</span></span><br><span class="line">                    <span class="comment">///这里第二个参数是 false ，所以 namespace 是展开的，所以下面不能用 androidSpace，而是用 nameTag</span></span><br><span class="line">                    <span class="keyword">def</span> xml = <span class="keyword">new</span> XmlParser(<span class="keyword">false</span>, <span class="keyword">false</span>).parse(manifestFile)</span><br><span class="line">                    <span class="keyword">if</span> (xml.application != <span class="keyword">null</span> &amp;&amp; xml.application.<span class="keyword">size</span>() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">def</span> nodes = xml.application[<span class="number">0</span>].<span class="string">&#x27;*&#x27;</span>.<span class="keyword">findAll</span> &#123;</span><br><span class="line">                            <span class="comment">//挑选要修改的节点，没有指定的 exported 的才需要增加</span></span><br><span class="line">                            <span class="comment">//如果 exportedTag 拿不到可以尝试 it.attribute(androidSpace.exported)</span></span><br><span class="line">                            (it.name() == <span class="string">&#x27;activity&#x27;</span> || it.name() == <span class="string">&#x27;receiver&#x27;</span> || it.name() == <span class="string">&#x27;service&#x27;</span>) &amp;&amp; it.attribute(exportedTag) == <span class="keyword">null</span></span><br><span class="line"></span><br><span class="line">                        &#125;</span><br><span class="line">                        <span class="keyword">if</span> (nodes.application != <span class="keyword">null</span> &amp;&amp; nodes.application.<span class="keyword">size</span>() &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            nodes.<span class="keyword">each</span> &#123;</span><br><span class="line">                                <span class="keyword">def</span> t = it</span><br><span class="line">                                it.<span class="keyword">each</span> &#123;</span><br><span class="line">                                    <span class="keyword">if</span> (it.name() == <span class="string">&quot;intent-filter&quot;</span>) &#123;</span><br><span class="line">                                        <span class="keyword">println</span>(<span class="string">&quot;$manifestFile \n .....................$&#123;t.attributes().get(nameTag)&#125;......................&quot;</span>)</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>如下图所示，<strong>因为目前官方如红色信息内容其实指向并不正确，容易误导问题方向，所以通过上述脚本打印，可以快速查找到问题所在的点，然后通过  <code>tool:replace</code>  临时解决</strong>。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/95c73f26b50f1880f6e8a6548ecbdd7a.png" alt="img"></p>
<p>具体为什么之前的脚本在高版本 AGP 下无法使用，原因在于新版本在  <code>processDebugMainManifest</code>  ，或者说  <code>processXXXXXXMainManifest</code>  的处理逻辑发生了变化，通过找到  <code>processDebugMainManifest</code>  的实现类，可以看到问题出现就是在于  <code>Merging library manifest</code>  。</p>
<blockquote>
<p><code>processDebugMainManifest</code>  的实现在 ProcessApplicationManifest 里，对应路径是 ProcessApplicationManifest -&gt; MainfestHelper mergeManifestsForApplication -&gt; MainfestMerger2</p>
</blockquote>
<p>错误是在  <code>Merging library manifest</code>  的阶段出现异常，但是这个阶段的 task 里对于第三方依赖路径的输入，主要是从  <code>private fun computeFullProviderList</code>  方法开始，所以输入到  <code>mergeManifestsForApplication</code>  里的第三方路径是通过这个私有方法生成。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/5e0802f3e6ebb8d98de0b09c9603bbe4.png" alt="img"></p>
<p>感觉唯一可以考虑操作的就是内部的  <code>manifests</code>  对象去变换路径，但是它是  <code>private</code>  ，并且内部并不能很好复写其内容。</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/1b2cad1e51fd633a56c64c106219d76a.png" alt="img"></p>
<p><strong>另外因为 aar 文件里的  <code>AndroidManifset</code>  是 readOnly ，所以如果真的要修改，感觉只能在输入之前读取到对应  <code>AndroidManifset</code> ， 并生成临时文件，在  <code>manifests</code>  对象中更改其路径来完成</strong>，不知道大家有没有什么比较好的思路 。</p>
<blockquote>
<p>如果有好的解决办法，后续再更新。</p>
</blockquote>
<h2 id="最后"><a class="markdownIt-Anchor" href="#最后">#</a> 最后</h2>
<p>最后再说一个坑 ，如果你是低版本 Gradle 可以打包成功，但是运行到 Android12 机器的时候，可能会因为没有 exported 遇到安装失败的问题：</p>
<p>1、如果是模拟器 12，你可能会看到如下所示的错误提示 ，提示上显示还是很直观的， 直接告诉你是  <code>android:exported</code>  的问题：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">* <span class="title class_">What</span> went <span class="attr">wrong</span>:</span><br><span class="line"><span class="title class_">Execution</span> failed <span class="keyword">for</span> task <span class="string">&#x27;:app:installDebug&#x27;</span>.</span><br><span class="line">&gt; java.<span class="property">util</span>.<span class="property">concurrent</span>.<span class="property">ExecutionException</span>: com.<span class="property">android</span>.<span class="property">builder</span>.<span class="property">testing</span>.<span class="property">api</span>.<span class="property">DeviceException</span>: com.<span class="property">android</span>.<span class="property">ddmlib</span>.<span class="property">InstallException</span>: <span class="attr">INSTALL_PARSE_FAILED_MANIFEST_MALFORMED</span>: <span class="title class_">Failed</span> parse during <span class="attr">installPackageLI</span>: <span class="regexp">/data/</span>app/vmdl487461761.<span class="property">tmp</span>/base.<span class="property">apk</span> (at <span class="title class_">Binary</span> <span class="variable constant_">XML</span> file line #<span class="number">358</span>): xxxxx.<span class="property">Activity</span>: <span class="title class_">Targeting</span> S+ (version <span class="number">31</span> and above) requires that an explicit value <span class="keyword">for</span> <span class="attr">android</span>:exported be defined when intent filters are present</span><br><span class="line"></span><br><span class="line">  </span><br><span class="line"> </span><br></pre></td></tr></table></figure>
<p>2、如果你是真机 12，那可能就是这样的提示，提示然是  <code>INSTALL_FAILED_USER_RESTRICTED</code>  ，<strong>不得不说小米系统这个安装失败很具误导性，比如 minSDK 太高导致无法安装，在小米上也会是  <code>INSTALL_FAILED_USER_RESTRICTED</code> </strong>：</p>
<p><img src="https://img-blog.csdnimg.cn/img_convert/30ac3d45bb59a0a966036244d82bfc56.png" alt="img"></p>
<p>基本上内容就这些，具体如何进一步优化还待后续测试， <strong>所以针对脚本实现，你还有什么问题或者想法，欢迎评论交流 ～</strong></p>
<p>文章来源: <a target="_blank" rel="noopener" href="http://carguo.blog.csdn.net">carguo.blog.csdn.net</a>，作者：恋猫 de 小郭，版权归原作者所有，如需转载，请联系作者。</p>
<p>原文链接：<a target="_blank" rel="noopener" href="http://carguo.blog.csdn.net/article/details/123438734">carguo.blog.csdn.net/article/details/123438734</a></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.161Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.579Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">2 小时读完 (大约16172个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%E6%96%87%E6%A1%A3/">Flutter全网最全学习笔记！</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutter学习文档authorbrath"><a class="markdownIt-Anchor" href="#flutter学习文档authorbrath">#</a> Flutter 学习文档 —Author：Brath</h1>
<p><img src="https://brath.cloud/blogImg/4d4dd7f20a6a494282214c730611df0e.webp" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<h4 id="欢迎来到-brath-的-csdn-博客你也可访问-brathtop-到我的个人博客来进行观看"><a class="markdownIt-Anchor" href="#欢迎来到-brath-的-csdn-博客你也可访问-brathtop-到我的个人博客来进行观看">#</a> 欢迎来到 brath 的 CSDN 博客，你也可访问 brath.top 到我的个人博客来进行观看</h4>
<p>演示 demo-APK 地址: <a target="_blank" rel="noopener" href="http://124.222.106.122:8080/app-release.zip">http://124.222.106.122:8080/app-release.zip</a></p>
<h5 id="前言如果你要学习flutter那么你一定要会dart语言因为flutter是基于dart来封装的一个-ui-组件包"><a class="markdownIt-Anchor" href="#前言如果你要学习flutter那么你一定要会dart语言因为flutter是基于dart来封装的一个-ui-组件包">#</a> 前言：如果你要学习 flutter，那么你一定要会 dart 语言，因为 flutter 是基于 dart 来封装的一个 UI 组件包</h5>
<h5 id="本文使用-typort-书写禁止转载"><a class="markdownIt-Anchor" href="#本文使用-typort-书写禁止转载">#</a> 本文使用 Typort 书写，禁止转载。</h5>
<p>​		本文仅限有后端有语言基础（C/C++/C#/Java/python/Golang/PHP 都可以），前端 (JavaScript，Html，CSS) 的人来学习。如果 0 基础，请先学习任意一门后端语言并熟练掌握！</p>
<h2 id="dart语言学习"><a class="markdownIt-Anchor" href="#dart语言学习">#</a> Dart 语言学习：</h2>
<p>​	安装 Dart：<a target="_blank" rel="noopener" href="https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe">https://github.com/GeKorm/dart-windows/releases/download/v1.6.0/Dart_x64.stable.setup.exe</a></p>
<p>​	安装好后配置环境变量：DART_HOME  E:\dart\bin  安装路径</p>
<p>​	配置好后 cmd 输入 dart --version 查看环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dart VM version: 2.3.3-dev.0.0.flutter-b37aa3b036 (Tue Jun 11 13:00:50 2019 +0000) on &quot;windows_x64&quot;</span><br></pre></td></tr></table></figure>
<h3 id="注释"><a class="markdownIt-Anchor" href="#注释">#</a> 注释：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line"> *多行注释</span><br><span class="line"> *多行注释</span><br><span class="line"> */</span><br><span class="line"> </span><br><span class="line"> /**</span><br><span class="line">  * 文档注释 与Java相同</span><br><span class="line">  */</span><br><span class="line">  </span><br><span class="line"> ///文档注释 dart独有</span><br></pre></td></tr></table></figure>
<h3 id="变量定义"><a class="markdownIt-Anchor" href="#变量定义">#</a> 变量定义：</h3>
<p>dart 语言特点：</p>
<p>​	自动类型转换，var 声明的变量可以是任意类型！</p>
<p>dart 拥有两种变量定义方式。</p>
<p>指定类型：</p>
<p>String name = “brath”;</p>
<p>或者</p>
<p>类型推导</p>
<p>var name = “brath”;  // 推导为任意类型</p>
<p>final name  =  “brath”;  // 不可修改，定义常量，可以初始化</p>
<p>const name  =  “brath”;  // 不可修改，定义常量，不可以初始化，可以被构造修改</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="keyword">var</span> name = <span class="number">111111</span>;</span><br><span class="line">  <span class="built_in">String</span> name1 = <span class="string">&quot;brath用类型定义&quot;</span>;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;Hello World! Brath~&quot;</span>);</span><br><span class="line">  <span class="built_in">print</span>(name.runtimeType);</span><br><span class="line">  <span class="built_in">print</span>(name1.runtimeType);</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">console:</span><br><span class="line">Hello World! Brath~</span><br><span class="line"><span class="built_in">int</span></span><br><span class="line"><span class="built_in">String</span></span><br></pre></td></tr></table></figure>
<h4 id="变量拼接"><a class="markdownIt-Anchor" href="#变量拼接">#</a> 变量拼接：</h4>
<p>与 Java 不同，拼接方式用 ${}</p>
<p>如果只拼接普通变量，可以直接 $ 变量名</p>
<p 变量名.方法名="">如果拼接变量引用方法，必须要 $</p>
<h4 id="集合类型"><a class="markdownIt-Anchor" href="#集合类型">#</a> 集合类型：</h4>
<p>list 集合： var names = [“111”,“222”,“333”];</p>
<p>set 集合:  var movies = {“111”,“222”,&quot;333”};</p>
<p 11:1,22:2="">map 集合：var info =</p>
<p>默认情况下，dart 的所有 class 都是隐式接口！</p>
<h4 id="dart函数使用"><a class="markdownIt-Anchor" href="#dart函数使用">#</a> Dart 函数使用：</h4>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(List&lt;String&gt; args) &#123;</span><br><span class="line">    print(sum(<span class="number">51</span>, <span class="number">14891</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> sum(<span class="keyword">int</span> a,<span class="keyword">int</span> b)&#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数参数"><a class="markdownIt-Anchor" href="#函数参数">#</a> 函数参数：</h4>
<p>必选参数，不能有默认值，可选参数，可以有默认值</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main()&#123;</span><br><span class="line">    sayHello(<span class="string">&quot;why&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//必选参数：String name 必须传参</span></span><br><span class="line"><span class="keyword">void</span> sayHello(<span class="built_in">String</span> name)&#123;</span><br><span class="line">    <span class="built_in">print</span>(name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：位置可选参数 </span></span><br><span class="line"><span class="keyword">void</span> sayHello2(<span class="built_in">String</span> name, [<span class="built_in">int</span> age, <span class="built_in">String</span> desc])&#123;</span><br><span class="line">    sayHello2(<span class="string">&quot;brath&quot;</span>,<span class="number">12</span>,<span class="string">&quot;waa&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用[]包围的参数可传可不传，但是位置必须对应</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可选参数：命名可选参数 重点，多用！</span></span><br><span class="line"><span class="keyword">void</span> sayHello3(<span class="built_in">String</span> name, &#123;<span class="built_in">int</span> age, <span class="built_in">String</span> desc&#125;)&#123;</span><br><span class="line">    sayHello3(<span class="string">&quot;brath&quot;</span>,age: <span class="number">13</span>,desc: <span class="string">&quot;212&quot;</span>);</span><br><span class="line">    <span class="comment">//位置可选参数：用&#123;&#125;包围的参数可传可不传，但是必须指定参数名</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="函数是一等公民"><a class="markdownIt-Anchor" href="#函数是一等公民">#</a> 函数是一等公民:</h4>
<p>函数可以作为另外一个函数的参数！</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  <span class="comment">// test(see);</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//匿名函数</span></span><br><span class="line">  <span class="comment">// test(()&#123;</span></span><br><span class="line">  <span class="comment">//   print(&quot;匿名&quot;);</span></span><br><span class="line">  <span class="comment">//   return 10;</span></span><br><span class="line">  <span class="comment">// &#125;);</span></span><br><span class="line"></span><br><span class="line">  test(() =&gt; <span class="built_in">print</span>(<span class="string">&quot;箭头&quot;</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(<span class="built_in">Function</span> foo)&#123;</span><br><span class="line">    see();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> see()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">&quot;see！&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// test((num1,num2)&#123;</span></span><br><span class="line">    <span class="comment">//   return num1+num2;</span></span><br><span class="line">    <span class="comment">// &#125;);</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">var</span> <span class="built_in">num</span> = demo();</span><br><span class="line">  <span class="built_in">print</span>(<span class="built_in">num</span>(<span class="number">20</span>,<span class="number">12</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//将函数声明式显示，利用 typedef 声明一个函数列表，调用 typedef 声明的函数</span></span><br><span class="line"><span class="keyword">typedef</span> Calculate = <span class="built_in">int</span> <span class="built_in">Function</span>(<span class="built_in">int</span> num1,<span class="built_in">int</span> num2);</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> test(Calculate calculate)&#123;</span><br><span class="line">  calculate(<span class="number">20</span>,<span class="number">30</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// void test(int foo(int num1,int num2))&#123;</span></span><br><span class="line"><span class="comment">//   foo(20,30);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line">Calculate demo()&#123;</span><br><span class="line">  <span class="keyword">return</span> (num1,num2)&#123;</span><br><span class="line">    <span class="keyword">return</span> num1 * num2;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="赋值运算符"><a class="markdownIt-Anchor" href="#赋值运算符">#</a> 赋值运算符：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Flutter中，有诡异的赋值运算符</span><br><span class="line">比如 name ??=&quot;111&quot;;</span><br><span class="line">解释：当原来的变量有值时，不执行</span><br><span class="line">当原来的变量为null时，执行</span><br><span class="line"></span><br><span class="line">或者 var name = name ?? &quot;11&quot;;</span><br><span class="line">解释： 当name不为空时使用name，为空使用后面的变量</span><br></pre></td></tr></table></figure>
<h3 id="级联运算符"><a class="markdownIt-Anchor" href="#级联运算符">#</a> 级联运算符：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person()</span><br><span class="line">    		..name = <span class="string">&quot;brath&quot;</span></span><br><span class="line">    		..eat();</span><br><span class="line">			..run();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//利用 .. 连续调用对象中的方法，类似于Java中的链式调用</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>()</span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">   </span><br><span class="line">    <span class="keyword">void</span> eat()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;吃&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">      <span class="keyword">void</span> run()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;跑&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="for循环和switch循环与js和java基本一致"><a class="markdownIt-Anchor" href="#for循环和switch循环与js和java基本一致">#</a> For 循环和 Switch 循环与 JS 和 Java 基本一致</h4>
<h3 id="构造函数"><a class="markdownIt-Anchor" href="#构造函数">#</a> 构造函数：</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class Person&#123;</span><br><span class="line">	String name;</span><br><span class="line">	int age;</span><br><span class="line">	double height;</span><br><span class="line">	</span><br><span class="line">	//默认构造函数</span><br><span class="line">	Person(this.name.this.age);</span><br><span class="line">	//命名构造函数，指定名字的构造函数</span><br><span class="line">	Person.NameCon(this.name.this.age,this.height);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="dynamic"><a class="markdownIt-Anchor" href="#dynamic">#</a> dynamic：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">dynamic</span>代表任意类型</span><br><span class="line"><span class="built_in">dynamic</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//可以调用</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span> obj = <span class="string">&quot;obj&quot;</span>;</span><br><span class="line"><span class="comment">//不能调用！</span></span><br><span class="line"><span class="built_in">print</span>(obj.subString(<span class="number">1</span>));</span><br></pre></td></tr></table></figure>
<h3 id="初始化列表"><a class="markdownIt-Anchor" href="#初始化列表">#</a> 初始化列表：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    <span class="keyword">var</span> p = Person(<span class="string">&#x27;brath&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">String</span> name;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//如果传了age参数，就用age参数，如果没传age参数就用10</span></span><br><span class="line">    Person(<span class="keyword">this</span>.name,&#123;<span class="built_in">int</span> age&#125;): <span class="keyword">this</span>.age = age ?? <span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="构造函数重定向"><a class="markdownIt-Anchor" href="#构造函数重定向">#</a> 构造函数重定向：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mian()&#123;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">int</span> age;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//默认构造函数调用内部构造函数，重定向</span></span><br><span class="line">    Person(<span class="built_in">String</span> name) : <span class="keyword">this</span>._internal(name,<span class="number">0</span>);</span><br><span class="line">    Person._internal(<span class="keyword">this</span>.name,<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="工厂构造函数"><a class="markdownIt-Anchor" href="#工厂构造函数">#</a> 工厂构造函数：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//相比于普通构造函数来说，工厂构造函数可以手动返回对象</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">    <span class="built_in">String</span> name;</span><br><span class="line">    <span class="built_in">String</span> color;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _nameCache = &#123;&#125;;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="built_in">Map</span>&lt;<span class="built_in">String</span>,Person&gt; _colorCache = &#123;&#125;;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//工厂构造函数，手动根据条件返回对象</span></span><br><span class="line">    <span class="keyword">factory</span> Person.withName(<span class="built_in">String</span> name)&#123;</span><br><span class="line">        <span class="keyword">if</span>(_nameCache.containsKey(name))&#123;</span><br><span class="line">            <span class="keyword">return</span> _nameCache[name];</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _nameCache[name] = Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> Person(name,<span class="string">&quot;default&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="getter和setter"><a class="markdownIt-Anchor" href="#getter和setter">#</a> Getter 和 Setter：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">   <span class="comment">//直接访问属性</span></span><br><span class="line">    <span class="keyword">final</span> p = Person();</span><br><span class="line">    p.name = <span class="string">&quot;brath&quot;</span>;</span><br><span class="line">    <span class="built_in">print</span>(p.name);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//get，set访问</span></span><br><span class="line">    p.setName(<span class="string">&quot;brath.cloud&quot;</span>);</span><br><span class="line">    <span class="built_in">print</span>(p.getName);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123;</span><br><span class="line">   <span class="keyword">late</span> <span class="built_in">String</span> name;	</span><br><span class="line"></span><br><span class="line">  <span class="comment">//  //get,set方法</span></span><br><span class="line">  <span class="comment">//  void setName(String name) &#123;</span></span><br><span class="line">  <span class="comment">//     this.name = name;</span></span><br><span class="line">  <span class="comment">//   &#125;</span></span><br><span class="line">  <span class="comment">//   String get getName&#123;</span></span><br><span class="line">  <span class="comment">//       return name;</span></span><br><span class="line">  <span class="comment">//   &#125; </span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//get,set方法箭头函数</span></span><br><span class="line">   <span class="keyword">void</span> setName(<span class="built_in">String</span> name) =&gt; <span class="keyword">this</span>.name = name;</span><br><span class="line">   <span class="built_in">String</span> <span class="keyword">get</span> getName =&gt; name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="隐式接口"><a class="markdownIt-Anchor" href="#隐式接口">#</a> 隐式接口：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart中没有interface关键字，默认所有类都是隐式接口</span></span><br><span class="line"><span class="comment">//当讲将一个类作为接口使用时，实现这个接口的类，必须实现这个接口中的所有方法</span></span><br></pre></td></tr></table></figure>
<h3 id="类的混入"><a class="markdownIt-Anchor" href="#类的混入">#</a> 类的混入：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用<span class="class"><span class="keyword">class</span>声明的类不可以混入其他类</span></span><br><span class="line"><span class="class">要混入其他类，使用 <span class="title">mixin</span> 声明该类，并在混入时用<span class="title">with</span>关键字来连接被混入的类</span></span><br></pre></td></tr></table></figure>
<h3 id="类属性和类方法"><a class="markdownIt-Anchor" href="#类属性和类方法">#</a> 类属性和类方法：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">类属性：在类中不用<span class="keyword">static</span>声明的变量，叫做成员变量，不可以被类直接调用</span><br><span class="line">静态属性：在类中用<span class="keyword">static</span>声明的变量，叫做静态属性，类属性，可以被类直接调用</span><br><span class="line">类方法：在类中不用<span class="keyword">static</span>声明的方法，叫做成员方法，不可以被类直接调用</span><br><span class="line">静态方法：在类中用<span class="keyword">static</span>声明的方法，叫做静态方法，类属性，可以被类直接调用</span><br></pre></td></tr></table></figure>
<h3 id="枚举的使用"><a class="markdownIt-Anchor" href="#枚举的使用">#</a> 枚举的使用：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main(<span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; args) &#123;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">final</span> color = Colors.bule;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">switch</span>(color)&#123;</span><br><span class="line">    <span class="keyword">case</span> Colors.bule:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;蓝色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.red:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;红色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> Colors.yellow:</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;黄色&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">print</span>(Colors.values);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Colors&#123;</span><br><span class="line">  red,</span><br><span class="line">  bule,</span><br><span class="line">  yellow</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="库的使用"><a class="markdownIt-Anchor" href="#库的使用">#</a> 库的使用：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//在Dart中，任何一个dart文件都是一个库，类似于Java中的包</span></span><br><span class="line"><span class="comment">//系统库导入： import &#x27;dart:库名&#x27;;</span></span><br><span class="line"><span class="comment">//自定会库导入： import &#x27;包名/类名&#x27;;</span></span><br><span class="line"><span class="comment">//库别名：当本类引用其他库时，出现方法名冲突，可以用 as 来给导入的库起别名，再用别名引用</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">as</span> timeUtil;</span><br><span class="line"><span class="comment">//默认情况下，导入一个库时，导入的是这个库中所有的内容</span></span><br><span class="line"><span class="comment">//dart提供两个关键字来单独导入方法或者隐藏某个方法：</span></span><br><span class="line"><span class="keyword">show</span>   <span class="keyword">hide</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil; <span class="comment">//只导入timeUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil; <span class="comment">//只有timeUtil不会导入</span></span><br><span class="line"><span class="comment">//多个方法可以用逗号分割：</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">show</span> timeUtil, FileUtil; <span class="comment">//只导入timeUtil,FileUtil方法</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;utils/TimeUtil&#x27;</span> <span class="keyword">hide</span> timeUtil, FileUtil; <span class="comment">//只有timeUtil,FileUtil不会导入</span></span><br></pre></td></tr></table></figure>
<h3 id="抽取公共库文件"><a class="markdownIt-Anchor" href="#抽取公共库文件">#</a> 抽取公共库文件：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">	以上方法导入库的时候总是会遇到一些问题，比如如果有<span class="number">100</span>个方法，你只想用<span class="number">50</span>个，那么你就要用<span class="number">50</span>个<span class="keyword">show</span>或者<span class="number">50</span>个<span class="keyword">hide</span>，但是dart提供了一种方式，就是抽取库到一个公共类中。</span><br><span class="line">    前面提到过，dart中所有文件都是一个库，那么我们把需要导入的库，全部<span class="keyword">export</span>到一个库中，在引用这个库，就不用担心过多引入了。</span><br><span class="line">        </span><br><span class="line">公共库：</span><br><span class="line">util.dart</span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/TimeUtil&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="string">&#x27;util/FileUtil&#x27;</span></span><br><span class="line"></span><br><span class="line">我的代码：</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;util&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="使用第三方库"><a class="markdownIt-Anchor" href="#使用第三方库">#</a> 使用第三方库：</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//dart使用第三方库需要创建一个文件 pubspec.yaml</span></span><br></pre></td></tr></table></figure>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">库名</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">描述</span></span><br><span class="line"><span class="attr">dependencies:</span> <span class="string">依赖</span></span><br><span class="line">   <span class="attr">http:</span> <span class="string">^0.13.4</span></span><br><span class="line"><span class="string">怎么找库？</span></span><br><span class="line"><span class="string">https://pub.dev/packages/http</span></span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220402134052159.png" alt="image-20220402134052159"></p>
<p>点击 installing</p>
<p>把 dependencies 内容复制到代码中</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">coderwhy</span></span><br><span class="line"><span class="attr">desciption:</span> <span class="string">a</span> <span class="string">dart</span></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">http:</span> <span class="string">^0.12.0+4</span></span><br><span class="line"><span class="attr">environment:</span> </span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">&#x27;&gt;=2.10.0 &lt; 3.0.0&#x27;</span></span><br></pre></td></tr></table></figure>
<p>进入当前类文件夹，终端输入 pub get 就会下载对应库包</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:http/http.dart&#x27;</span> <span class="keyword">as</span> http;</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入第三方库，必须用package来开头</span></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">	<span class="keyword">var</span> url = <span class="string">&#x27;https://www.brath.cloud:9000/esn-user-service/user/getUserInfo?id=1&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> url2 = <span class="string">&#x27;https://brath.cloud/image/back.png&#x27;</span>;</span><br><span class="line">  <span class="keyword">var</span> response = <span class="keyword">await</span> http.<span class="keyword">get</span>(url);</span><br><span class="line">  <span class="built_in">print</span>(response.body);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="异常处理"><a class="markdownIt-Anchor" href="#异常处理">#</a> 异常处理：</h3>
<p>​	与 Java 相同但是有不一样的部分：</p>
<p>​	同步处理</p>
<p>​		在一个方法中用 try 捕获异常，如果调用方法就捕获不到了！</p>
<p>​	异步处理</p>
<p>​		调用一个异步方法如果发生异常，可以用自异步 + await 来捕获异常</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span>&#123;</span><br><span class="line">  <span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> test1();</span><br><span class="line">  &#125;<span class="keyword">catch</span>(e)&#123;</span><br><span class="line">    <span class="built_in">print</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"> test1() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="number">11</span>~/<span class="number">0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="接下来介绍-我们的flutter"><a class="markdownIt-Anchor" href="#接下来介绍-我们的flutter">#</a> 接下来介绍 我们的 Flutter！</h4>
<h2 id="最好的跨平台解决方案-flutter"><a class="markdownIt-Anchor" href="#最好的跨平台解决方案-flutter">#</a> 最好的跨平台解决方案 Flutter</h2>
<p>架构对比：</p>
<p><img src="https://brath.cloud/blogImg/image-20220401170121598.png" alt="image-20220401170121598"></p>
<h4 id="gup绘制出图像放到buffer缓存中手机屏幕根据刷新率来读取缓存的操作就是展示图像-image-20220401171307870"><a class="markdownIt-Anchor" href="#gup绘制出图像放到buffer缓存中手机屏幕根据刷新率来读取缓存的操作就是展示图像-image-20220401171307870">#</a> GUP 绘制出图像，放到 Buffer 缓存中，手机屏幕根据刷新率来读取缓存的操作，就是展示图像。	<img src="https://brath.cloud/blogImg/image-20220401171307870.png" alt="image-20220401171307870"></h4>
<h3 id="引出了一个概念垂直同步"><a class="markdownIt-Anchor" href="#引出了一个概念垂直同步">#</a> 引出了一个概念：垂直同步</h3>
<p><img src="https://brath.cloud/blogImg/image-20220401172029367.png" alt="image-20220401172029367"></p>
<p>​	为什么要有垂直同步？</p>
<p>​	来看一个例子：假设我 GPU 每秒帧率产生 60，手机屏幕每秒也是接受 60，这时可以正常显示。</p>
<p>​								如果突然每秒帧率提高到 120，手机屏幕可能会来不及读取缓存导致画面重叠、撕裂</p>
<p>​	开启垂直同后，会有两块缓存区域。</p>
<p>​	垂直同步就限制了手机屏幕读取缓存和 GPU 产生的速度，开启垂直同步后，GPU 将画面写入到第一个缓存中，第一个缓存会复制内容（地址交换）到第二个缓存中，当两份缓存都存在这一帧，就会发送一个 VSync 的信号，告诉 GPU 可以绘制下一张图，然后手机屏幕来显示第二个缓存中的内容，这样就可以避免图像撕裂。</p>
<h5 id="一个简单的flutter结构"><a class="markdownIt-Anchor" href="#一个简单的flutter结构">#</a> 一个简单的 flutter 结构：</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// mian() =&gt; runApp(MyApp());</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">  runApp(<span class="keyword">const</span> MyApp());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//APP主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: BrathScaffoldPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//页面主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathScaffoldPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">    <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      <span class="comment">//appbar：顶部标签主体</span></span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;第一个Fullter程序&quot;</span>,style: TextStyle(fontSize: <span class="number">20</span>),),</span><br><span class="line">      ),</span><br><span class="line">      body: BrathBodyPage()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//内容主体</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BrathBodyPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Text(<span class="string">&quot;Hello Fullter&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="开始学习"><a class="markdownIt-Anchor" href="#开始学习">#</a> 开始学习：</h5>
<h4 id="下载flutter-sdk"><a class="markdownIt-Anchor" href="#下载flutter-sdk">#</a> 下载 Flutter SDK</h4>
<p>配置 Flutter 的第一步就是下载 Flutter SDK，然后进行安装，上面两个地址都有给 SDK 下载地址，这里的问题是有的 SDK 安装包有时会报 没有.git 文件的错误，所以最稳妥的方法是通过 git clone 命令安装<br>
在安装目录下面执行</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone -b stable https://github.com/flutter/flutter.git</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/202202090714320308.png" alt="img"></p>
<p>安装完成之后，可以在安装根目录，找的 flutter_console.bat 文件，双击运行</p>
<p><img src="https://brath.cloud/blogImg/202202090714323989.png" alt="img"></p>
<h1 id="配置flutter运行环境变量"><a class="markdownIt-Anchor" href="#配置flutter运行环境变量">#</a> 配置 Flutter 运行环境变量</h1>
<p>在用户变量里面编辑或者添加 Path 条目，把 Flutter 的 bin 目录路径添加在里面</p>
<p><img src="https://brath.cloud/blogImg/202202090714326036.png" alt="img"></p>
<h1 id="运行flutter"><a class="markdownIt-Anchor" href="#运行flutter">#</a> 运行 Flutter</h1>
<p>在命令行运行 flutter doctor，它会下载它自己的依赖项并自行编译，一般情况是会报错提示，多半是 Android SDK 找不到什么的，如果出错了，就按照错误信息网上查一下就解决了。<br>
我的已经处理完成的</p>
<p><img src="https://brath.cloud/blogImg/202202090714328081.png" alt="img"></p>
<h1 id="编辑器设置"><a class="markdownIt-Anchor" href="#编辑器设置">#</a> 编辑器设置</h1>
<p>我用的 Android Studio，上面连接里面有不同系统和编辑器的流程，详情可以前往查看</p>
<p>Android Studio 的开发环境就不说了，需要的可以自行百度。Android Studio 配置 Flutter 开发主要是 Flutter 和 Dart 两个插件</p>
<p><img src="https://brath.cloud/blogImg/202202090714332173.png" alt="img"></p>
<p>File – Settings – Plugins – Marketplace 然后在搜索里面搜索 Flutter 和 Dart 安装就可以了。<br>
安装完插件，重启一下 Android Studio 基本就配置完成了，可以新建 Flutter 项目了。</p>
<h1 id="新建flutter项目"><a class="markdownIt-Anchor" href="#新建flutter项目">#</a> 新建 Flutter 项目</h1>
<p>File – New – New Flutter Project</p>
<p><img src="https://brath.cloud/blogImg/202202090714334854.png" alt="img"></p>
<p><img src="https://brath.cloud/blogImg/202202090714337229.png" alt="img"></p>
<p>选择 Flutter Application</p>
<p>然后到这个最后一步的时候，会有一点小问题</p>
<p><img src="https://brath.cloud/blogImg/202202090714339364.png" alt="img"></p>
<p>Flutter SDK path 这一栏第一次默认是空的，需要手动选择，选择我们最开始下载的 Flutter SDK，选择根目录，就可以了</p>
<h1 id="至此flutter的开发环境安装完毕"><a class="markdownIt-Anchor" href="#至此flutter的开发环境安装完毕">#</a> 至此 Flutter 的开发环境安装完毕！</h1>
<h4 id="现在开始学习flutter的基础组件以及进阶理论"><a class="markdownIt-Anchor" href="#现在开始学习flutter的基础组件以及进阶理论">#</a> 现在开始学习 Flutter 的基础组件，以及进阶理论！</h4>
<h1 id="flutter学习笔记-autherbrath"><a class="markdownIt-Anchor" href="#flutter学习笔记-autherbrath">#</a> flutter 学习笔记  auther：Brath</h1>
<h2 id="所有的重点都在代码的注释中标注"><a class="markdownIt-Anchor" href="#所有的重点都在代码的注释中标注">#</a> 所有的重点都在代码的注释中标注！</h2>
<h3 id="创建项目"><a class="markdownIt-Anchor" href="#创建项目">#</a> 创建项目：</h3>
<p>​		到想存储项目的文件路径，打开 CMD，输入 flutter create 项目名称即可</p>
<p><img src="https://brath.cloud/blogImg/image-20220506084830778.png" alt="image-20220506084830778"></p>
<p>​		vscode 下载好插件，dart 和 flutter 打开对应 flutter 文件，即可开始编写</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//导包 material</span></span><br><span class="line"></span><br><span class="line">main() &#123;</span><br><span class="line">  runApp(MyApp()); <span class="comment">//运行app</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//继承无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp( <span class="comment">//运行根节点MaterialApp</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="widgetflutter模块组件"><a class="markdownIt-Anchor" href="#widgetflutter模块组件">#</a> Widget：flutter 模块 / 组件</h2>
<h4 id="特性"><a class="markdownIt-Anchor" href="#特性">#</a> 特性：</h4>
<h5 id="widget分为有状态statefulwidget和无状态的-statelesswidget"><a class="markdownIt-Anchor" href="#widget分为有状态statefulwidget和无状态的-statelesswidget">#</a> widget 分为有状态（StatefulWidget）和无状态的 (StatelessWidget)</h5>
<p>无状态的 widget 是静态页面</p>
<p>有状态的 widget 是动态页面</p>
<h4 id="要点"><a class="markdownIt-Anchor" href="#要点">#</a> 要点：</h4>
<h5 id="tipsflutter的main入口调用第一个widget需要该widget使用-materialapp作为首个widget"><a class="markdownIt-Anchor" href="#tipsflutter的main入口调用第一个widget需要该widget使用-materialapp作为首个widget">#</a> tips：flutter 的 main 入口调用第一个 widget 需要该 widget 使用 MaterialApp () 作为首个 widget</h5>
<p>因为 MaterialApp 包含了路由主题等等组件，flutter 规定只能用 MaterialApp 当作根节点</p>
<h3 id="使用materialapp的home属性来指定页面"><a class="markdownIt-Anchor" href="#使用materialapp的home属性来指定页面">#</a> 使用 MaterialApp 的 home 属性来指定页面</h3>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      home: HomePage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="container容器相当于divwidget下面有更详细的介绍"><a class="markdownIt-Anchor" href="#container容器相当于divwidget下面有更详细的介绍">#</a> Container 容器（相当于 DIV）(widget)：下面有更详细的介绍</h2>
<p>均为可选参数</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">Container(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">    <span class="keyword">this</span>.padding, <span class="comment">//边距</span></span><br><span class="line">    <span class="keyword">this</span>.color, <span class="comment">//颜色 使用 Clolrs枚举</span></span><br><span class="line">    <span class="keyword">this</span>.decoration, <span class="comment">//描述</span></span><br><span class="line">    <span class="keyword">this</span>.foregroundDecoration,</span><br><span class="line">    <span class="built_in">double?</span> width, <span class="comment">//宽度 使用double 常量</span></span><br><span class="line">    <span class="built_in">double?</span> height, <span class="comment">//高度 使用double 常量</span></span><br><span class="line">    BoxConstraints? constraints,</span><br><span class="line">    <span class="keyword">this</span>.margin, <span class="comment">//margin</span></span><br><span class="line">    <span class="keyword">this</span>.transform,</span><br><span class="line">    <span class="keyword">this</span>.transformAlignment,</span><br><span class="line">    <span class="keyword">this</span>.child, <span class="comment">//子组件</span></span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(margin == <span class="keyword">null</span> || margin.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(padding == <span class="keyword">null</span> || padding.isNonNegative),</span><br><span class="line">       <span class="keyword">assert</span>(decoration == <span class="keyword">null</span> || decoration.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(constraints == <span class="keyword">null</span> || constraints.debugAssertIsValid()),</span><br><span class="line">       <span class="keyword">assert</span>(clipBehavior != <span class="keyword">null</span>),</span><br><span class="line">       <span class="keyword">assert</span>(decoration != <span class="keyword">null</span> || clipBehavior == Clip.none),</span><br><span class="line">       <span class="keyword">assert</span>(color == <span class="keyword">null</span> || decoration == <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;Cannot provide both a color and a decoration\n&#x27;</span></span><br><span class="line">         <span class="string">&#x27;To provide both, use &quot;decoration: BoxDecoration(color: color)&quot;.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       constraints =</span><br><span class="line">        (width != <span class="keyword">null</span> || height != <span class="keyword">null</span>)</span><br><span class="line">          ? constraints?.tighten(width: width, height: height)</span><br><span class="line">            ?? BoxConstraints.tightFor(width: width, height: height)</span><br><span class="line">          : constraints,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>
<h2 id="text文本组件widget"><a class="markdownIt-Anchor" href="#text文本组件widget">#</a> Text 文本组件 (widget)：</h2>
<p>Text 默认传一个文本：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span></span><br><span class="line"><span class="class">  @<span class="title">override</span></span></span><br><span class="line"><span class="class">  <span class="title">Widget</span> <span class="title">build</span>(<span class="title">BuildContext</span> <span class="title">context</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Container( <span class="comment">//容器</span></span><br><span class="line">      width: <span class="built_in">double</span>.infinity, <span class="comment">//宽度 使用double枚举</span></span><br><span class="line">      color: Colors.blue, <span class="comment">//颜色 使用Colors枚举</span></span><br><span class="line">      child: Text( <span class="comment">//容器的子组件 文本组件 </span></span><br><span class="line">      <span class="string">&quot;文本&quot;</span> * <span class="number">20</span>, <span class="comment">//输入文本 20个</span></span><br><span class="line">      maxLines: <span class="number">1</span>, <span class="comment">//最大行数 1</span></span><br><span class="line">      textDirection: TextDirection.ltr, <span class="comment">//从左到右</span></span><br><span class="line">      textAlign: TextAlign.center, <span class="comment">//剧中</span></span><br><span class="line">      style: TextStyle( <span class="comment">//设置文本样式</span></span><br><span class="line">        fontSize: <span class="number">30</span>, <span class="comment">//字体大小 30</span></span><br><span class="line">        color: Colors.teal <span class="comment">//字体颜色</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Text(</span><br><span class="line">    <span class="comment">//必传参数</span></span><br><span class="line">    <span class="built_in">String</span> <span class="keyword">this</span>.data, </span><br><span class="line">    <span class="comment">//可选参数</span></span><br><span class="line">    &#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.style, <span class="comment">//文本风格，使用 TextStyle方法来指定</span></span><br><span class="line">    <span class="keyword">this</span>.strutStyle,</span><br><span class="line">    <span class="keyword">this</span>.textAlign, <span class="comment">//设置文本居中 靠左 靠右，使用 TextAlign枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textDirection, <span class="comment">//文本排列：左到右 右到左 使用 TextDirection枚举</span></span><br><span class="line">    <span class="keyword">this</span>.locale,</span><br><span class="line">    <span class="keyword">this</span>.softWrap,</span><br><span class="line">    <span class="keyword">this</span>.overflow, <span class="comment">//溢出后按照什么风格显示，使用TextOverflow的枚举</span></span><br><span class="line">    <span class="keyword">this</span>.textScaleFactor,</span><br><span class="line">    <span class="keyword">this</span>.maxLines,  <span class="comment">//最大行数</span></span><br><span class="line">    <span class="keyword">this</span>.semanticsLabel,</span><br><span class="line">    <span class="keyword">this</span>.textWidthBasis,</span><br><span class="line">    <span class="keyword">this</span>.textHeightBehavior,</span><br><span class="line">  &#125;) : <span class="keyword">assert</span>(</span><br><span class="line">         data != <span class="keyword">null</span>,</span><br><span class="line">         <span class="string">&#x27;A non-null String must be provided to a Text widget.&#x27;</span>,</span><br><span class="line">       ),</span><br><span class="line">       textSpan = <span class="keyword">null</span>,</span><br><span class="line">       <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure>
<h2 id="button按钮组件widget"><a class="markdownIt-Anchor" href="#button按钮组件widget">#</a> Button 按钮组件 (widget)：</h2>
<p>flutter 中有几种常用按钮组件：</p>
<p>在 2.0 版本后遗弃按钮 RaisedButton 改为 ElevatedButton ，  FlatButton 改为 TextButton</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton 已遗弃</span><br><span class="line">FlatButton 已遗弃</span><br></pre></td></tr></table></figure>
<h4 id="elevatedbutton漂浮按钮升降按钮"><a class="markdownIt-Anchor" href="#elevatedbutton漂浮按钮升降按钮">#</a> ElevatedButton：漂浮按钮 / 升降按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094017377.png" alt="image-20220506094017377"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed:()&#123;</span><br><span class="line">            <span class="comment">//点击事件，如果为null未定义的话，按钮无法点击</span></span><br><span class="line">          &#125;, </span><br><span class="line">        child: Text( <span class="comment">//这里是按钮文本，可以是图片可以是文本</span></span><br><span class="line">          <span class="string">&quot;漂浮按钮&quot;</span></span><br><span class="line">          )</span><br><span class="line">        )</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="textbutton扁平按钮文本按钮"><a class="markdownIt-Anchor" href="#textbutton扁平按钮文本按钮">#</a> TextButton：扁平按钮 / 文本按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094026219.png" alt="image-20220506094026219"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//点击事件</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Text(</span><br><span class="line">            <span class="string">&quot;扁平按钮&quot;</span></span><br><span class="line">       ))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="textbuttonicon带图标的扁平按钮文本按钮"><a class="markdownIt-Anchor" href="#textbuttonicon带图标的扁平按钮文本按钮">#</a> TextButton.icon：带图标的扁平按钮 / 文本按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094049981.png" alt="image-20220506094049981"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        TextButton.icon(onPressed: ()&#123;&#125;,</span><br><span class="line">         icon: Icon(Icons.add), <span class="comment">//使用Icons枚举选择图标</span></span><br><span class="line">         label: Text(<span class="string">&quot;图标按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="outlinedbuttonicon无阴影按钮"><a class="markdownIt-Anchor" href="#outlinedbuttonicon无阴影按钮">#</a> OutlinedButton.icon：无阴影按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094056747.png" alt="image-20220506094056747"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         OutlinedButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         child: Text(<span class="string">&quot;无阴影按钮&quot;</span>))</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="outlinedbuttonicon图标按钮"><a class="markdownIt-Anchor" href="#outlinedbuttonicon图标按钮">#</a> OutlinedButton.icon：图标按钮</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506094100990.png" alt="image-20220506094100990"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">         IconButton(onPressed: ()&#123;&#125;, </span><br><span class="line">         icon: Icon(Icons.home)) <span class="comment">//图标用 Icons 枚举选择</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="image图片-图标组件widget"><a class="markdownIt-Anchor" href="#image图片-图标组件widget">#</a> Image 图片、图标组件 (widget)：</h2>
<p>flutter 提供了四种图片加载方式：<img src="https://brath.cloud/blogImg/image-20220506095911749.png" alt="image-20220506095911749"></p>
<p>1、Image.network   // 从网络获取图片</p>
<p>2、Image.asset   // 从项目本地获取图片</p>
<p>3、Image.file   // 从文件路径获取图片</p>
<p>4、Image.memory  // 从手机内存，存储中获取图片</p>
<p>使用 asset 需要设置 pubspec.yaml 中的 assets <img src="https://brath.cloud/blogImg/image-20220506100017264.png" alt="image-20220506100017264"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageIconDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Icon(Icons.home), <span class="comment">//普通图标</span></span><br><span class="line">        IconButton(onPressed: ()&#123;&#125;, icon: Icon(Icons.home)), <span class="comment">//带点击事件的图标</span></span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="built_in">double</span>.infinity, <span class="comment">//最大宽度</span></span><br><span class="line">          child: Image.network( <span class="comment">//从网络获取图片</span></span><br><span class="line">          <span class="string">&quot;https://brath.cloud/love/GCLK6888.JPG?versionId=CAEQNxiBgID8yJjchBgiIDUzZGFiMWU3YWVlNDQ4YmJhMzMwNDY0Mzk1OGJiOTU1&quot;</span>,</span><br><span class="line">          fit: BoxFit.fill, <span class="comment">//图片填充模式</span></span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Image.asset(<span class="string">&quot;images/image.jpeg&quot;</span>), <span class="comment">//项目加载图片</span></span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="switch开关checkbox复选框组件widget"><a class="markdownIt-Anchor" href="#switch开关checkbox复选框组件widget">#</a> Switch 开关，CheckBox 复选框组件 (widget)：</h2>
<p>因为开关和复选框是动态的，有状态的，所以我们要使用 StatefulWidget 来做他们的 widget</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Tips：在 onChanged 使用 setState 来改变状态</span></span><br></pre></td></tr></table></figure>
<p>Check 复选框<img src="https://brath.cloud/blogImg/image-20220506100951883.png" alt=""></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _check = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Checkbox(</span><br><span class="line">          value: _check, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">            setState(() &#123;</span><br><span class="line">              _check = res!;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Switch 开关<img src="https://brath.cloud/blogImg/image-20220506101002490.png" alt="image-20220506101002490"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CheckDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CheckDemo&gt; createState() =&gt; _CheckDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CheckDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CheckDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">bool</span> _<span class="keyword">switch</span> = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      children: [</span><br><span class="line">        Switch(</span><br><span class="line">          value: _<span class="keyword">switch</span>, </span><br><span class="line">          onChanged: (res)&#123; <span class="comment">//在 onChanged 使用 setState 来改变状态</span></span><br><span class="line">             setState(() &#123;</span><br><span class="line">                _<span class="keyword">switch</span> = res;</span><br><span class="line">             &#125;);</span><br><span class="line">          &#125;)</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="progress-进度条指示器组件widget"><a class="markdownIt-Anchor" href="#progress-进度条指示器组件widget">#</a> Progress 进度条，指示器组件 (widget)：</h2>
<p>flutter 为我们提供了几种进度条和指示器样式</p>
<p>1、LinearProgressIndicator  线性指示器 <img src="https://brath.cloud/blogImg/image-20220506102352707.png" alt="image-20220506102352707"></p>
<p>2、CircularProgressIndicator  圆圈指示器 <img src="https://brath.cloud/blogImg/image-20220506102400475.png" alt="image-20220506102400475"></p>
<p>3、CupertinoActivityIndicator  IOS 风格的进度指示器 <img src="https://brath.cloud/blogImg/image-20220506102404297.png" alt="image-20220506102404297"></p>
<p>可以设置的参数：</p>
<p>value：可以设置 0 - 1，来表示当前进度</p>
<p>valueColor：使用 AlwaysStoppedAnimation (Colors.red)  动画包裹颜色设置进度指示器的颜色</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProgressDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Padding(</span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>),</span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          LinearProgressIndicator( <span class="comment">//线性指示器</span></span><br><span class="line">            value: <span class="number">.5</span>, <span class="comment">//进度 从0-1， .5就是一半</span></span><br><span class="line">            valueColor: AlwaysStoppedAnimation(Colors.red), <span class="comment">//设置颜色要用动画包裹</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>), <span class="comment">//设置间隔 16 </span></span><br><span class="line">          Container( <span class="comment">//设置容器</span></span><br><span class="line">            height: <span class="number">100</span>, <span class="comment">//高 100</span></span><br><span class="line">            width: <span class="number">100</span>, <span class="comment">//宽 100</span></span><br><span class="line">            child: CircularProgressIndicator( <span class="comment">//圆圈指示器</span></span><br><span class="line">              <span class="comment">// value: .8,</span></span><br><span class="line">              valueColor: AlwaysStoppedAnimation(Colors.red),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">16</span>),</span><br><span class="line">          CupertinoActivityIndicator(), <span class="comment">//IOS风格的进度指示器</span></span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="click-点击组件widget"><a class="markdownIt-Anchor" href="#click-点击组件widget">#</a> Click 点击组件 (widget)：</h2>
<p>flutter 为我们提供了 GestureDetector 手势检测器<img src="https://brath.cloud/blogImg/image-20220506102924441.png" alt="image-20220506102924441"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ClickDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector( <span class="comment">//创建手势检测器</span></span><br><span class="line">      onTap: ()&#123; <span class="comment">//单击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;点击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      onDoubleTap: ()&#123; <span class="comment">//双击</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;双击&quot;</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Text(<span class="string">&quot;点击组件&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="input-输入框组件widget"><a class="markdownIt-Anchor" href="#input-输入框组件widget">#</a> Input 输入框组件 (widget)：</h2>
<p>flutter 为我们提供了两种常用输入组件：</p>
<p>TextField：默认典型输入框，没有 validator 验证</p>
<p>TextFromField：特点是可以带参数校验 validator 一般用于登录注册表单验证</p>
<h4 id="textfield-源码"><a class="markdownIt-Anchor" href="#textfield-源码">#</a> TextField 源码</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> TextField(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller, <span class="comment">//控制器</span></span><br><span class="line">   <span class="keyword">this</span>.focusNode, <span class="comment">//焦点</span></span><br><span class="line">   <span class="keyword">this</span>.decoration = <span class="keyword">const</span> InputDecoration(), <span class="comment">//装饰器</span></span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   <span class="keyword">this</span>.textInputAction, <span class="comment">//输入动作 键盘右下角（完成，搜索，下一行）</span></span><br><span class="line">   <span class="keyword">this</span>.textCapitalization = TextCapitalization.none,</span><br><span class="line">   <span class="keyword">this</span>.style, <span class="comment">//样式</span></span><br><span class="line">   <span class="keyword">this</span>.strutStyle,</span><br><span class="line">   <span class="keyword">this</span>.textAlign = TextAlign.start, <span class="comment">//文本格式 默认从左开始</span></span><br><span class="line">   <span class="keyword">this</span>.textAlignVertical,</span><br><span class="line">   <span class="keyword">this</span>.textDirection, <span class="comment">//文本方向</span></span><br><span class="line">   <span class="keyword">this</span>.readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="keyword">this</span>.showCursor,</span><br><span class="line">   <span class="keyword">this</span>.autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="keyword">this</span>.obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="keyword">this</span>.enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLines = <span class="number">1</span>, <span class="comment">//最大行数</span></span><br><span class="line">   <span class="keyword">this</span>.minLines, <span class="comment">//最小行数</span></span><br><span class="line">   <span class="keyword">this</span>.expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLength, <span class="comment">//最大字数</span></span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.maxLengthEnforcement,</span><br><span class="line">   <span class="keyword">this</span>.onChanged, <span class="comment">//当值改变</span></span><br><span class="line">   <span class="keyword">this</span>.onEditingComplete,</span><br><span class="line">   <span class="keyword">this</span>.onSubmitted,</span><br><span class="line">   <span class="keyword">this</span>.onAppPrivateCommand,</span><br><span class="line">   <span class="keyword">this</span>.inputFormatters,</span><br><span class="line">   <span class="keyword">this</span>.enabled,</span><br><span class="line">   <span class="keyword">this</span>.cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="keyword">this</span>.cursorHeight,</span><br><span class="line">   <span class="keyword">this</span>.cursorRadius,</span><br><span class="line">   <span class="keyword">this</span>.cursorColor,</span><br><span class="line">   <span class="keyword">this</span>.selectionHeightStyle = ui.BoxHeightStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.selectionWidthStyle = ui.BoxWidthStyle.tight,</span><br><span class="line">   <span class="keyword">this</span>.keyboardAppearance,</span><br><span class="line">   <span class="keyword">this</span>.scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="keyword">this</span>.dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">   <span class="keyword">this</span>.enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   <span class="keyword">this</span>.selectionControls,</span><br><span class="line">   <span class="keyword">this</span>.onTap,</span><br><span class="line">   <span class="keyword">this</span>.mouseCursor,</span><br><span class="line">   <span class="keyword">this</span>.buildCounter,</span><br><span class="line">   <span class="keyword">this</span>.scrollController,</span><br><span class="line">   <span class="keyword">this</span>.scrollPhysics,</span><br><span class="line">   <span class="keyword">this</span>.autofillHints = <span class="keyword">const</span> &lt;<span class="built_in">String</span>&gt;[],</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.hardEdge,</span><br><span class="line">   <span class="keyword">this</span>.restorationId,</span><br><span class="line">   <span class="keyword">this</span>.enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="textfromfield-源码"><a class="markdownIt-Anchor" href="#textfromfield-源码">#</a> TextFromField 源码</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">Key? key,</span><br><span class="line">   <span class="keyword">this</span>.controller,</span><br><span class="line">   <span class="built_in">String?</span> initialValue,</span><br><span class="line">   FocusNode? focusNode,</span><br><span class="line">   InputDecoration? decoration = <span class="keyword">const</span> InputDecoration(),</span><br><span class="line">   TextInputType? keyboardType,</span><br><span class="line">   TextCapitalization textCapitalization = TextCapitalization.none,</span><br><span class="line">   TextInputAction? textInputAction,</span><br><span class="line">   TextStyle? style,</span><br><span class="line">   StrutStyle? strutStyle,</span><br><span class="line">   TextDirection? textDirection,</span><br><span class="line">   TextAlign textAlign = TextAlign.start,</span><br><span class="line">   TextAlignVertical? textAlignVertical,</span><br><span class="line">   <span class="built_in">bool</span> autofocus = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> readOnly = <span class="keyword">false</span>,</span><br><span class="line">   ToolbarOptions? toolbarOptions,</span><br><span class="line">   <span class="built_in">bool?</span> showCursor,</span><br><span class="line">   <span class="built_in">String</span> obscuringCharacter = <span class="string">&#x27;•&#x27;</span>,</span><br><span class="line">   <span class="built_in">bool</span> obscureText = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">bool</span> autocorrect = <span class="keyword">true</span>,</span><br><span class="line">   SmartDashesType? smartDashesType,</span><br><span class="line">   SmartQuotesType? smartQuotesType,</span><br><span class="line">   <span class="built_in">bool</span> enableSuggestions = <span class="keyword">true</span>,</span><br><span class="line">   <span class="meta">@Deprecated</span>(</span><br><span class="line">     <span class="string">&#x27;Use maxLengthEnforcement parameter which provides more specific &#x27;</span></span><br><span class="line">     <span class="string">&#x27;behavior related to the maxLength limit. &#x27;</span></span><br><span class="line">     <span class="string">&#x27;This feature was deprecated after v1.25.0-5.0.pre.&#x27;</span>,</span><br><span class="line">   )</span><br><span class="line">   <span class="built_in">bool</span> maxLengthEnforced = <span class="keyword">true</span>,</span><br><span class="line">   MaxLengthEnforcement? maxLengthEnforcement,</span><br><span class="line">   <span class="built_in">int?</span> maxLines = <span class="number">1</span>,</span><br><span class="line">   <span class="built_in">int?</span> minLines,</span><br><span class="line">   <span class="built_in">bool</span> expands = <span class="keyword">false</span>,</span><br><span class="line">   <span class="built_in">int?</span> maxLength,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onChanged,</span><br><span class="line">   GestureTapCallback? onTap,</span><br><span class="line">   VoidCallback? onEditingComplete,</span><br><span class="line">   ValueChanged&lt;<span class="built_in">String</span>&gt;? onFieldSubmitted,</span><br><span class="line">   FormFieldSetter&lt;<span class="built_in">String</span>&gt;? onSaved,</span><br><span class="line">   FormFieldValidator&lt;<span class="built_in">String</span>&gt;? validator, <span class="comment">//与TextFiled不同的点，增加了 validator验证方法</span></span><br><span class="line">   <span class="built_in">List</span>&lt;TextInputFormatter&gt;? inputFormatters,</span><br><span class="line">   <span class="built_in">bool?</span> enabled,</span><br><span class="line">   <span class="built_in">double</span> cursorWidth = <span class="number">2.0</span>,</span><br><span class="line">   <span class="built_in">double?</span> cursorHeight,</span><br><span class="line">   Radius? cursorRadius,</span><br><span class="line">   Color? cursorColor,</span><br><span class="line">   Brightness? keyboardAppearance,</span><br><span class="line">   EdgeInsets scrollPadding = <span class="keyword">const</span> EdgeInsets.all(<span class="number">20.0</span>),</span><br><span class="line">   <span class="built_in">bool</span> enableInteractiveSelection = <span class="keyword">true</span>,</span><br><span class="line">   TextSelectionControls? selectionControls,</span><br><span class="line">   InputCounterWidgetBuilder? buildCounter,</span><br><span class="line">   ScrollPhysics? scrollPhysics,</span><br><span class="line">   <span class="built_in">Iterable</span>&lt;<span class="built_in">String</span>&gt;? autofillHints,</span><br><span class="line">   AutovalidateMode? autovalidateMode,</span><br><span class="line">   ScrollController? scrollController,</span><br><span class="line">   <span class="built_in">String?</span> restorationId,</span><br><span class="line">   <span class="built_in">bool</span> enableIMEPersonalizedLearning = <span class="keyword">true</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<p>简易登录</p>
<p><img src="https://brath.cloud/blogImg/image-20220506130535502.png" alt="image-20220506130535502"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InputDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态 widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;InputDemo&gt; createState() =&gt; _InputDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputDemo</span>&gt; </span>&#123;</span><br><span class="line">  GlobalKey _key = GlobalKey&lt;FormState&gt;(); <span class="comment">//key的泛型是表单状态，这样就可以通过key提交</span></span><br><span class="line">  TextEditingController _rootController = TextEditingController();<span class="comment">//账号控制器</span></span><br><span class="line">  TextEditingController _passController = TextEditingController();<span class="comment">//密码控制器</span></span><br><span class="line">  FocusNode _r = FocusNode(); <span class="comment">//账号焦点</span></span><br><span class="line">  FocusNode _p = FocusNode(); <span class="comment">//密码焦点</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//当退出时销毁controller，否则占用内存</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();  <span class="comment">//销毁父类</span></span><br><span class="line">    _rootController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _passController.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _r.dispose(); <span class="comment">//销毁</span></span><br><span class="line">    _p.dispose(); <span class="comment">//销毁</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Form( <span class="comment">//构建表单</span></span><br><span class="line">      key: _key, <span class="comment">//构建表单提交key</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">        TextFormField( <span class="comment">//构建表单输入框</span></span><br><span class="line">          autofocus: <span class="keyword">true</span>, <span class="comment">//默认焦点聚集</span></span><br><span class="line">          focusNode: _r, <span class="comment">//账号焦点</span></span><br><span class="line">          controller: _rootController, <span class="comment">//引用账号控制器</span></span><br><span class="line">          decoration: InputDecoration( <span class="comment">//输入框描述</span></span><br><span class="line">            prefixIcon: Icon(Icons.add), <span class="comment">//输入框图标</span></span><br><span class="line">            labelText: <span class="string">&quot;账号&quot;</span>, <span class="comment">//输入框标题</span></span><br><span class="line">            hintText: <span class="string">&quot;默认文字&quot;</span> <span class="comment">//输入框默认value</span></span><br><span class="line">          ),</span><br><span class="line">          validator: (v)&#123; <span class="comment">//只有使用 TextFormField 才可以用验证 validator 不用验证使用 TextField</span></span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.isEmpty)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;账号不能为空!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.next, <span class="comment">//回车后跳转下个输入框</span></span><br><span class="line">          onFieldSubmitted: (v)&#123; <span class="comment">//监听回车键</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;brath&quot;</span>);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">8</span>), <span class="comment">//设置间隔高度</span></span><br><span class="line">        TextFormField(</span><br><span class="line">          focusNode: _p, <span class="comment">//密码焦点</span></span><br><span class="line">          controller: _passController,</span><br><span class="line">          decoration: InputDecoration(</span><br><span class="line">            prefixIcon: Icon(Icons.add),</span><br><span class="line">            labelText: <span class="string">&quot;密码&quot;</span>,</span><br><span class="line">            hintText: <span class="string">&quot;输入密码&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          obscureText: <span class="keyword">true</span>,</span><br><span class="line">          validator: (v)&#123;</span><br><span class="line">            <span class="keyword">if</span>(v == <span class="keyword">null</span> || v.length &lt; <span class="number">5</span>)&#123;</span><br><span class="line">              <span class="keyword">return</span> <span class="string">&quot;密码不能小于5位数!&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          textInputAction: TextInputAction.send, <span class="comment">//将小键盘右下角的回车设置图标</span></span><br><span class="line">        ),</span><br><span class="line">        SizedBox(height: <span class="number">16</span>),</span><br><span class="line">        ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            <span class="comment">//当校验通过时输出 true 否则 false</span></span><br><span class="line">            <span class="built_in">print</span>((_key.currentState <span class="keyword">as</span> FormState).validate().toString());</span><br><span class="line">          &#125;,</span><br><span class="line">          child: Text(<span class="string">&quot;提交&quot;</span>),</span><br><span class="line">          ),</span><br><span class="line">      ]),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter路由工具"><a class="markdownIt-Anchor" href="#flutter路由工具">#</a> Flutter 路由工具：</h2>
<p>var res = await Navigator.of (context).push ( // 跳转路由到 MenuPage 并可以接受返回值</p>
<p>这段代码用异步来监听返回值，优点是，无论是否点击按钮返回，都可以接收到返回值</p>
<p>还可以用 .then ((value) =&gt; print (value)); 的方式来获取，这样更简洁，只有返回的时候才会监听，不返回不监听</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: prefer_const_constructors, use_key_in_widget_constructors</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>; <span class="comment">//新页面导包</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LoginPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123; <span class="comment">//无状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar( <span class="comment">//标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton( <span class="comment">//登录按钮</span></span><br><span class="line">        onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">          <span class="keyword">var</span> res = <span class="keyword">await</span> Navigator.of(context).push( <span class="comment">//跳转路由到 MenuPage 并可以接受返回值</span></span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">              builder: (context) &#123;</span><br><span class="line">                <span class="keyword">return</span> MenuPage( <span class="comment">//传参 menuTitle</span></span><br><span class="line">                  menuTitle: <span class="string">&quot;菜单&quot;</span>,</span><br><span class="line">                );</span><br><span class="line">              &#125;,</span><br><span class="line">              settings: RouteSettings( <span class="comment">//路由设置</span></span><br><span class="line">                name: <span class="string">&quot;参数&quot;</span>,</span><br><span class="line">                arguments: <span class="string">&quot;我是参数&quot;</span>, <span class="comment">//向目标传参的数据</span></span><br><span class="line">              ),</span><br><span class="line">              maintainState: <span class="keyword">false</span>,</span><br><span class="line">              fullscreenDialog: <span class="keyword">true</span>,</span><br><span class="line">          ));</span><br><span class="line">          <span class="built_in">print</span>(res); <span class="comment">//打印返回值</span></span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;登录&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> menuTitle;</span><br><span class="line">  <span class="keyword">const</span> MenuPage(&#123;Key? key,<span class="keyword">required</span> <span class="keyword">this</span>.menuTitle&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="comment">//通过 ModalRoute.of(context)?.settings.arguments; 来获取传参</span></span><br><span class="line">    <span class="built_in">dynamic</span> arguments = ModalRoute.of(context)?.settings.arguments;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(menuTitle + <span class="string">&quot;  &quot;</span> + arguments),</span><br><span class="line">      ),</span><br><span class="line">      body: ElevatedButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          Navigator.of(context).pop(<span class="string">&quot;Brath&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">        child: Text(<span class="string">&quot;返回按钮&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>Flutter 中管理多个页面时有两个核心概念和类： <code>Route</code>  和 <code>Navigator</code> 。<br>
一个 <code>route</code>  是一个屏幕或页面的抽象， <code>Navigator</code>  是管理 <code>route</code>  的 <code>Widget</code> 。 <code>Navigator</code>  可以通过 <code>route</code>  入栈和出栈来实现页面之间的跳转。<br>
路由一般分为静态路由 (即命名路由) 和动态路由。</p>
<h3 id="静态路由即命名路由"><a class="markdownIt-Anchor" href="#静态路由即命名路由">#</a> 静态路由 (即命名路由)</h3>
<p>静态路由在通过 <code>Navigator</code>  跳转之前，需要在 <code>MaterialApp</code>  组件内显式声明路由的名称，而一旦声明，路由的跳转方式就固定了。通过在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明路由的定义。</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyApp</span> <span class="keyword">extends</span> <span class="title class_ inherited__">StatelessWidget</span> &#123;</span><br><span class="line">  @override</span><br><span class="line">  <span class="title class_">Widget</span> <span class="title function_">build</span>(<span class="params">BuildContext context</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">MaterialApp</span>(</span><br><span class="line">      <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">      <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="comment">//&quot;/&quot;:(context) =&gt; RootPage(),</span></span><br><span class="line">        <span class="string">&quot;A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">        <span class="string">&quot;B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Bpage</span>(),</span><br><span class="line">        <span class="string">&quot;C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">      &#125;,</span><br><span class="line"> 	<span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">注意：如果指定了home属性，routes表则不能再包含此属性。</span><br><span class="line">如上代码中【<span class="attr">home</span>: <span class="title class_">RootPage</span>()】  和 【<span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>()】两则不能同时存在。</span><br></pre></td></tr></table></figure>
<p>例如： <code>RootPage</code>  跳转 <code>Apage</code>  即： <code>RootPage</code>   —&gt; <code>Apage</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushNamed(<span class="string">&quot;A&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>一般方法中带有 <code>Name</code>  多数是通过静态路由完成跳转的，如 <code>pushNamed</code> 、 <code>pushReplacementNamed</code> 、 <code>pushNamedAndRemoveUntil</code>  等。</p>
<h3 id="动态路由"><a class="markdownIt-Anchor" href="#动态路由">#</a> 动态路由</h3>
<p>动态路由无需在 <code>MaterialApp</code>  内的 <code>routes</code>  中注册即可直接使用：RootPage  —&gt; Apage</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Apage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>动态路由中，需要传入一个 <code>Route</code> , 这里使用的是 <code>MaterialPageRoute</code> ，它可以使用和平台风格一致的路由切换动画，在 iOS 上左右滑动切换，Android 上会上下滑动切换。也可以使用 <code>CupertinoPageRoute</code>  实现全平台的左右滑动切换。<br>
当然也可以自定义路由切换动画，使用 <code>PageRouteBuilder</code> : 使用 <code>FadeTransition</code> <br>
 做一个渐入过渡动画。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(</span><br><span class="line">  PageRouteBuilder(</span><br><span class="line">    transitionDuration: <span class="built_in">Duration</span>(milliseconds: <span class="number">250</span>), <span class="comment">// //动画时间为0.25秒</span></span><br><span class="line">    pageBuilder: (BuildContext context,Animation animation,</span><br><span class="line">        Animation secondaryAnimation)&#123;</span><br><span class="line">      <span class="keyword">return</span> FadeTransition( <span class="comment">//渐隐渐入过渡动画</span></span><br><span class="line">        opacity: animation,</span><br><span class="line">        child: Apage()</span><br><span class="line">       );</span><br><span class="line">     &#125;</span><br><span class="line">  )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>到现在为止，可能对路由有了一定的认识，，下面就结合具体方法来详细说明。<br>
在这之前有必要说明：<br>
 <code>Navigator.of(context).push</code>  和 <code>Navigator.push</code>  两着并没有特别的区别，看源码也得知，后者其实就是调用了前者。<br>
 <code>of</code> ：获取 <code>Navigator</code>  当前已经实例的状态。</p>
<h3 id="路由拦截"><a class="markdownIt-Anchor" href="#路由拦截">#</a> 路由拦截：</h3>
<p>flutter 提供了 onGenerateRoute 来使用路由拦截器，作用于强制登录</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">      initialRoute: <span class="string">&quot;/&quot;</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">&quot;/&quot;</span> :(context) =&gt; LoginPage(),</span><br><span class="line">        <span class="comment">// &quot;menu&quot; :(context) =&gt; MenuPage(), </span></span><br><span class="line">      &#125;,</span><br><span class="line">      onGenerateRoute: (RouteSettings s)&#123; <span class="comment">//路由拦截器</span></span><br><span class="line">        <span class="built_in">print</span>(s.name); <span class="comment">//路由名称</span></span><br><span class="line">        <span class="keyword">if</span>(s.name != <span class="string">&quot;menu&quot;</span>)&#123; <span class="comment">//当该路由不等于 menu 强制跳转回首页</span></span><br><span class="line">              <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> LoginPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">switch</span>(s.name)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">&quot;menu&quot;</span> : <span class="comment">//当该路由等于 menu 跳转至 menu 菜单</span></span><br><span class="line">          <span class="keyword">return</span> MaterialPageRoute(builder: (context)&#123;</span><br><span class="line">            <span class="keyword">return</span> MenuPage();</span><br><span class="line">          &#125;,settings: s);</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// home: LoginPage(),//当设置命名路由后，home不用设置</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="路由方法解释"><a class="markdownIt-Anchor" href="#路由方法解释">#</a> 路由方法解释：</h3>
<h3 id="pop"><a class="markdownIt-Anchor" href="#pop">#</a> pop</h3>
<p>返回当前路由栈的上一个界面。<br>
 <code>Navigator.pop(context);</code></p>
<h3 id="push-pushnamed"><a class="markdownIt-Anchor" href="#push-pushnamed">#</a> push / pushNamed  ：</h3>
<p>见上，两者运行效果相同，只是调用不同，都是将一个 <code>page</code>  压入路由栈中。直白点就是 <code>push</code>  是把界面直接放入， <code>pushNames</code>  是通过路由名的方式，通过 router 使界面进入对应的栈中。<br>
结果：直接在原来的路由栈上添加一个新的  <code>page</code> 。</p>
<h3 id="pushreplacement-pushreplacementnamed-popandpushnamed"><a class="markdownIt-Anchor" href="#pushreplacement-pushreplacementnamed-popandpushnamed">#</a> pushReplacement / pushReplacementNamed / popAndPushNamed</h3>
<p>替换路由，顾名思义替换当前的路由。<br>
例如</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-de7b4cb63fcb1d83.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/985/format/webp" alt="img"></p>
<p>Replacement.png</p>
<p>由图可知在 <code>BPage</code>  使用替换跳转到 <code>Cpage</code>  的时候， <code>Bpage</code>  被 <code>Cpage</code>  替换了在堆栈中的位置而移除栈， <code>CPage</code>  默认返回的是 <code>APage</code> 。</p>
<h6 id="pushreplacement-使用的动态路由方式跳转"><a class="markdownIt-Anchor" href="#pushreplacement-使用的动态路由方式跳转">#</a> pushReplacement 使用的动态路由方式跳转：</h6>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushReplacement</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">Cpage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<h6 id="pushreplacementnamed-使用的静态路由方式"><a class="markdownIt-Anchor" href="#pushreplacementnamed-使用的静态路由方式">#</a> pushReplacementNamed 使用的静态路由方式，</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).pushReplacementNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>两者运行效果相同。</p>
<h6 id="popandpushnamed"><a class="markdownIt-Anchor" href="#popandpushnamed">#</a> popAndPushNamed：</h6>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popAndPushNamed(<span class="string">&quot;/C&quot;</span>);</span><br></pre></td></tr></table></figure>
<p>其实和上面两个方法运行的结果也是一致，区别就是动画效果不一样： <code>BPage</code>  —&gt; <code>CPage</code>  的时候， <code>CPage</code>  会同时有 <code>pop</code>  的转场效果和从 <code>BPage</code>  页 <code>push</code>  的转场效果。简单来说就是 <code>CPage</code>  先 <code>pop</code>  到 <code>BPage</code> ，在 <code>push</code>  到 <code>CPage</code> 。（不知道是不是卡顿的原因，笔者看起来区别不大）</p>
<p>综上：3 中方法结果一样，只是调用方式和过渡动画的区别，开发者自行选择。</p>
<h3 id="pushandremoveuntil-pushnamedandremoveuntil"><a class="markdownIt-Anchor" href="#pushandremoveuntil-pushnamedandremoveuntil">#</a> pushAndRemoveUntil / pushNamedAndRemoveUntil</h3>
<p>在使用上述方式跳转时，会按次序移除其他的路由，直到遇到被标记的路由（ <code>predicate</code>  函数返回了 <code>true</code> ）时停止。若 没有标记的路由，则移除全部。<br>
当路由栈中存在重复的标记路由时，默认移除到最近的一个停止。</p>
<h6 id="第一种"><a class="markdownIt-Anchor" href="#第一种">#</a> 第一种</h6>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 移除全部</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router == <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>
<p>此时的路由栈示意图：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-364a8005348f7aec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/983/format/webp" alt="img"></p>
<p>RemoveUntil_all.png</p>
<p>可知出了要 <code>push</code>  的 <code>CPage</code> ，当前路由栈中所有的路由都被移除， <code>CPage</code>  变成根路由。</p>
<h6 id="第二种移除到rootpage停止"><a class="markdownIt-Anchor" href="#第二种移除到rootpage停止">#</a> 第二种：移除到 RootPage 停止</h6>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &quot;/&quot;即为RootPage，标记后，移除到该路由停止移除</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&#x27;/&#x27;</span>))</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">pushAndRemoveUntil</span>(context,</span><br><span class="line">                <span class="title class_">MaterialPageRoute</span>(<span class="attr">builder</span>: <span class="function">(<span class="params">_</span>) =&gt;</span> <span class="title class_">CPage</span>()), <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line"><span class="comment">// 只是写法不一样</span></span><br></pre></td></tr></table></figure>
<p>或</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="function">(<span class="params">Route router</span>) =&gt;</span> router.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamedAndRemoveUntil</span>(<span class="string">&quot;/C&quot;</span>, <span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>此时的路由栈示意图：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-d03ce09352ff0619.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/992/format/webp" alt="img"></p>
<p>RemoveUntil_until.png</p>
<p><code>push</code>  到 <code>CPage</code>  的时候，移除到 <code>RootPage</code>  停止， <code>CPage</code>  默认返回 <code>RootPage</code> 。</p>
<h3 id="popuntil"><a class="markdownIt-Anchor" href="#popuntil">#</a> popUntil</h3>
<p>返回到指定的标记路由，若标记的路由为 <code>null</code> ，则程序退出，慎用！！！<br>
有时候我们需要根据业务需求判断：可能返回上一级路由，也可能返回上上级路由或是返回指定的路由等。这个时候就不能使用 <code>Replacemen</code> t 和 <code>RemoveUntil</code>  来替换、移除路由了。<br>
例如：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-7ca98d9fca946e7e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/453/format/webp" alt="img"></p>
<p>until.png</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">settings</span>.<span class="property">name</span> == <span class="string">&quot;/&quot;</span>);</span><br><span class="line">或</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="title class_">ModalRoute</span>.<span class="title function_">withName</span>(<span class="string">&quot;/&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>再例如：</p>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-6c759f94d04bf0d9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/447/format/webp" alt="img"></p>
<p>要实现上述功能，从 <code>CPage</code>  返回到 <code>APage</code> ，并且不在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明路由。因为笔者觉得一个应用程序的界面太多了，如果每个界面都要显示声明路由，实在是不优雅。<br>
因为需要返回 <code>APage</code> ，还是需要标记路由，所有我们在之前跳转 <code>APage</code>  的时候设置 <code>RouteSettings</code> ，如下：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置APage的RouteSettings</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>在 <code>CPage</code>  需要返回的时候，调用就行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).popUntil(ModalRoute.withName(<span class="string">&quot;/A&quot;</span>));</span><br></pre></td></tr></table></figure>
<p>这样代码看起来很优雅，不会冗余。<br>
另：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回根路由</span></span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">popUntil</span>(<span class="function">(<span class="params">route</span>) =&gt;</span> route.<span class="property">isFirst</span>);</span><br></pre></td></tr></table></figure>
<h3 id="canpop"><a class="markdownIt-Anchor" href="#canpop">#</a> canPop</h3>
<p>用来判断是否可以导航到新页面，返回的 <code>bool</code>  类型，一般是在设备带返回的物理按键时需要判断是否可以 <code>pop</code> 。</p>
<h3 id="maybepop"><a class="markdownIt-Anchor" href="#maybepop">#</a> maybePop</h3>
<p>可以理解为 <code>canPop</code>  的升级， <code>maybePop</code>  会自动判断。如果当前的路由可以 <code>pop</code> ，则执行当前路由的 <code>pop</code>  操作，否则将不执行。</p>
<h3 id="removerouteremoveroutebelow"><a class="markdownIt-Anchor" href="#removerouteremoveroutebelow">#</a> removeRoute/removeRouteBelow</h3>
<p>删除路由，同时执行 <code>Route.dispose</code>  操作，无过渡动画，正在进行的手势也会被取消。</p>
<h6 id="removeroute"><a class="markdownIt-Anchor" href="#removeroute">#</a> removeRoute</h6>
<p><img src="https:////upload-images.jianshu.io/upload_images/2675141-b33464133f67a4db.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/996/format/webp" alt="img"></p>
<p>removeRoute.png</p>
<p><code>BPage</code>  被移除了当前的路由栈。<br>
如果在当前页面调用 <code>removeRoute</code> ，则类似于调用 <code>pop</code>  方法，区别就是无过渡动画，所以 <code>removeRoute</code>  也可以用来返回上一页。</p>
<h6 id="removeroutebelow"><a class="markdownIt-Anchor" href="#removeroutebelow">#</a> removeRouteBelow</h6>
<p>移除指定路由底层的临近的一个路由，并且对应路由不存在的时候会报错。<br>
同上。</p>
<p>综上：这个两个方法一般情况下很少用，而且必须要持有对应的要移除的路由。<br>
一般用于立即关闭，如移除当前界面的弹出框等。</p>
<hr>
<h1 id="路由传值"><a class="markdownIt-Anchor" href="#路由传值">#</a> 路由传值</h1>
<p>常见的路由传值分为两个方面：</p>
<ul>
<li>向下级路由传值</li>
<li>返回上级路由时传值</li>
</ul>
<p>要注意的是，我们一般说静态路由不能传值，并不是说一定不能用于传值，而是因为静态路由一般需要在 <code>MaterialApp</code>  内的 <code>routes</code>  属性进行显式声明，在这里使用构造函数传值无实际意义。<br>
如：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">MaterialApp</span>(</span><br><span class="line">     <span class="attr">initialRoute</span>: <span class="string">&quot;/&quot;</span>, <span class="comment">// 默认加载的界面，这里为RootPage</span></span><br><span class="line">     <span class="attr">routes</span>: &#123; <span class="comment">// 显式声明路由</span></span><br><span class="line">       <span class="string">&quot;/&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">RootPage</span>(),</span><br><span class="line">       <span class="string">&quot;/A&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;title&quot;</span>),  <span class="comment">// 在这里传参无实际意义，一般需要传入的参数都是动态变化的</span></span><br><span class="line">       <span class="string">&quot;/B&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">BPage</span>(),</span><br><span class="line">       <span class="string">&quot;/C&quot;</span>:<span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">CPage</span>(),</span><br><span class="line">     &#125;,</span><br><span class="line">    <span class="comment">// home: RootPage(),</span></span><br><span class="line">   );</span><br></pre></td></tr></table></figure>
<h3 id="向下级路由传值"><a class="markdownIt-Anchor" href="#向下级路由传值">#</a> 向下级路由传值</h3>
<h5 id="1-构造函数传值"><a class="markdownIt-Anchor" href="#1-构造函数传值">#</a> 1、构造函数传值</h5>
<p>首先构造一个可以带参数的构造函数：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> title;</span><br><span class="line">  APage(<span class="keyword">this</span>.title);</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _APageState createState() =&gt; _APageState();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>在路由跳转的时候传值：</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(<span class="string">&quot;这是传入的参数&quot;</span>),</span><br><span class="line">));</span><br></pre></td></tr></table></figure>
<p>在 APage 拿到传入的值：</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在 StatefulWidget 使用[widget.参数名]</span></span><br><span class="line"><span class="built_in">Container</span>(</span><br><span class="line">  child: <span class="built_in">Text</span>(widget.title),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h5 id="2-modalroute-传值"><a class="markdownIt-Anchor" href="#2-modalroute-传值">#</a> 2、ModalRoute 传值</h5>
<p>在 <code>Navigator.of(context).push</code>  的跳转方式中， <code>MaterialPageRoute</code>  的构造参数中 可以看到有 <code>RouteSettings</code>  的属性， <code>RouteSettings</code>  就是当前路由的基本信息</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> RouteSettings(&#123;</span><br><span class="line">    <span class="keyword">this</span>.name,</span><br><span class="line">    <span class="keyword">this</span>.isInitialRoute = <span class="literal">false</span>,</span><br><span class="line">    <span class="keyword">this</span>.arguments, <span class="comment">// 存储路由相关的参数Object</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>
<p>路由跳转时设置传递参数：</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">push</span>(<span class="title class_">MaterialPageRoute</span>(</span><br><span class="line">  <span class="attr">settings</span>: <span class="title class_">RouteSettings</span>(<span class="attr">name</span>:<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>: &#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;),</span><br><span class="line">  <span class="attr">builder</span>: <span class="function">(<span class="params">context</span>) =&gt;</span> <span class="title class_">APage</span>(),</span><br><span class="line">));</span><br><span class="line">或使用静态路由pushName：</span><br><span class="line"><span class="title class_">Navigator</span>.<span class="title function_">of</span>(context).<span class="title function_">pushNamed</span>(<span class="string">&quot;/A&quot;</span>,<span class="attr">arguments</span>:&#123;<span class="string">&quot;argms&quot;</span>:<span class="string">&quot;这是传入A的参数&quot;</span>&#125;);</span><br></pre></td></tr></table></figure>
<p>在 <code>APage</code>  中取值：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span> argms = ModalRoute.of(context).settings.arguments;</span><br><span class="line"><span class="built_in">print</span>(argms[<span class="string">&quot;argms&quot;</span>]);</span><br></pre></td></tr></table></figure>
<h3 id="返回上级路由时传值"><a class="markdownIt-Anchor" href="#返回上级路由时传值">#</a> 返回上级路由时传值</h3>
<p>就是在调用 <code>APage</code>  中调用 <code>pop</code>  返回路由的时候传参</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Navigator<span class="selector-class">.of</span>(context)<span class="selector-class">.pop</span>(&quot;这是pop返回的参数值&quot;);</span><br></pre></td></tr></table></figure>
<p>在上一级路由获取：</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Navigator.of(context).push(MaterialPageRoute(</span><br><span class="line">  builder: (context) =&gt; APage(),</span><br><span class="line">)).then((<span class="keyword">value</span>)&#123; <span class="comment">// 获取pop的传值</span></span><br><span class="line">  print(<span class="keyword">value</span>);</span><br><span class="line">&#125;);</span><br><span class="line">或</span><br><span class="line">String <span class="keyword">value</span> = <span class="keyword">await</span> Navigator.of(context).pushNamed(<span class="string">&#x27;/xxx&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h2 id="flutter-布局layout-widget"><a class="markdownIt-Anchor" href="#flutter-布局layout-widget">#</a> Flutter 布局（Layout ）（Widget）：</h2>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br></pre></td></tr></table></figure>
<h4 id="column-纵向"><a class="markdownIt-Anchor" href="#column-纵向">#</a> Column  - 纵向</h4>
<p>概念：纵轴的宽度，默认使用子组件最大宽度</p>
<p>此时，红色和黄色容器宽度为 100 绿色为 150，整个容器就会使用 最大的子组件宽度 150 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506141732333.png" alt="image-20220506141732333"></p>
<p>Column 代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">        child: Column(children: [</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">        Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="row-横向"><a class="markdownIt-Anchor" href="#row-横向">#</a> Row - 横向</h4>
<p>概念：和 Colunm 相似，纵轴的宽度，默认使用子组件最大高度</p>
<p>此时，红色和黄色容器高度为 100 绿色为 200，整个容器就会使用 最大的子组件高度 200 来表示自己</p>
<p><img src="https://brath.cloud/blogImg/image-20220506142159516.png" alt="image-20220506142159516"></p>
<p>Row 代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Container(</span><br><span class="line">        color: Colors.grey,</span><br><span class="line">      child: Row(</span><br><span class="line">        textDirection: TextDirection.ltr, <span class="comment">//组件排列方式</span></span><br><span class="line">        mainAxisSize: MainAxisSize.max, <span class="comment">//主轴最大值</span></span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceEvenly, <span class="comment">//主轴布局</span></span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//纵轴排列方式</span></span><br><span class="line">        children: [</span><br><span class="line">           Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">200</span>,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">150</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">            Container(</span><br><span class="line">          width: <span class="number">100</span>,</span><br><span class="line">          height: <span class="number">100</span>,</span><br><span class="line">          color: Colors.yellow,</span><br><span class="line">        ),</span><br><span class="line">      ]),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter弹性布局flex"><a class="markdownIt-Anchor" href="#flutter弹性布局flex">#</a> Flutter 弹性布局 (Flex)：</h2>
<p>flutter 为我们提供了 Flex 这个 widget 来制造弹性布局</p>
<p>Flex 默认 必传方向 Axis</p>
<p>children 使用 Expanded 来包裹，可以设置 flex 权重，根据数字大小来设置权重</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150504528.png" alt="image-20220506150504528"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LayoutDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">        appBar: AppBar(</span><br><span class="line">          title: Text(<span class="string">&quot;布局练习&quot;</span>),</span><br><span class="line">        ),</span><br><span class="line">        body: Container(</span><br><span class="line">          color: Colors.grey,</span><br><span class="line">          child: Flex(</span><br><span class="line">            direction: Axis.vertical,</span><br><span class="line">            children: [</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.red,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">              Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.green,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">               Expanded(child: </span><br><span class="line">              Container(</span><br><span class="line">                width: <span class="number">100</span>,</span><br><span class="line">                height: <span class="number">200</span>,</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">              ),flex: <span class="number">2</span>,),</span><br><span class="line">            ],</span><br><span class="line">          ),</span><br><span class="line">        ));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter流式布局wrap"><a class="markdownIt-Anchor" href="#flutter流式布局wrap">#</a> Flutter 流式布局 (Wrap)：</h2>
<p>flutter 为我们提供了 Wrap 这个 widget 来制造弹性布局</p>
<p>使用 有状态的  StatefulWidget  来构建 wrap 布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150443707.png" alt="image-20220506150443707"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WrapDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;WrapDemo&gt; createState() =&gt; _WrapDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_WrapDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">WrapDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> list = &lt;<span class="built_in">int</span>&gt;[];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123; <span class="comment">//初始化时向数组添加 20 个数据</span></span><br><span class="line">      list.add(i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Wrap(</span><br><span class="line">      direction: Axis.horizontal, <span class="comment">//设置方向</span></span><br><span class="line">      alignment: WrapAlignment.start, <span class="comment">//布局参数</span></span><br><span class="line">      spacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      runSpacing: <span class="number">1.0</span>, <span class="comment">//边距</span></span><br><span class="line">      children: list.map((e) =&gt; Container(</span><br><span class="line">        height: <span class="number">100</span>,</span><br><span class="line">        width: <span class="number">100</span>,</span><br><span class="line">        child: Text(</span><br><span class="line">          e.toString(),</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            fontSize: <span class="number">20</span></span><br><span class="line">          )</span><br><span class="line">          ),</span><br><span class="line">        color: Colors.blue,</span><br><span class="line">      )).toList()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter层叠布局stack"><a class="markdownIt-Anchor" href="#flutter层叠布局stack">#</a> Flutter 层叠布局 (Stack)：</h2>
<p>flutter 为我们提供了 Stack 这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506150429490.png" alt="image-20220506150429490"></p>
<p>我们设置了两个容器 div，在层叠布局中，如果后一个容器，比前面的容器大，那么就会遮挡，原理是为什么？</p>
<ol>
<li>flutter 在绘画时，从 x 0 y 0 开始绘画，也就是 左上角</li>
<li>意味着两个容器绘画开始的坐标都是相同的，只不过宽高不一样</li>
<li>那么如果第一个容器宽高为 100 第二个为 150 就理所应当的遮住啦！</li>
</ol>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center, <span class="comment">//居中布局</span></span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter定位布局positioned"><a class="markdownIt-Anchor" href="#flutter定位布局positioned">#</a> Flutter 定位布局 (Positioned)：</h2>
<p>flutter 为我们提供了 Positioned 这个 widget 来制造层叠布局</p>
<p>如果 Positioned 设置了宽高，那么子组件不生效</p>
<p><img src="https://brath.cloud/blogImg/image-20220506151155616.png" alt="image-20220506151155616"></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//如果设置了 </span></span><br><span class="line">​	top: <span class="number">10</span>,</span><br><span class="line">​   bottom: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置高度 height</span><br><span class="line"><span class="comment">//如果设置了</span></span><br><span class="line">​     left: <span class="number">10</span>,</span><br><span class="line">​     right: <span class="number">10</span>,</span><br><span class="line">​		那么就不能设置宽度 width</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220506151900799.png" alt="image-20220506151900799"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">StackDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      color: Colors.grey,</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: Stack(</span><br><span class="line">        alignment: AlignmentDirectional.center,</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.green,</span><br><span class="line">            width: <span class="number">150</span>,</span><br><span class="line">            height: <span class="number">150</span>,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.red,</span><br><span class="line">            width: <span class="number">100</span>,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">          ),</span><br><span class="line">          Positioned(</span><br><span class="line">            <span class="comment">// width: 100,</span></span><br><span class="line">            <span class="comment">// height: 100,</span></span><br><span class="line">            child: Container(</span><br><span class="line">                color: Colors.yellow,</span><br><span class="line">                width: <span class="number">300</span>,</span><br><span class="line">                height: <span class="number">300</span>,</span><br><span class="line">          ),</span><br><span class="line">          top: <span class="number">50</span>,</span><br><span class="line">          left: <span class="number">150</span>,</span><br><span class="line">          right: <span class="number">150</span>,</span><br><span class="line">          bottom: <span class="number">50</span>,</span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter相对定位align"><a class="markdownIt-Anchor" href="#flutter相对定位align">#</a> Flutter 相对定位 (Align)：</h2>
<p>flutter 为我们提供了 Align 这个 widget 来制造层叠布局</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154713361.png" alt="image-20220506154713361"></p>
<p>要点：只会相对于父组件来定位，而不是屏幕</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlignDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">200</span>,</span><br><span class="line">      height: <span class="number">200</span>,</span><br><span class="line">      color: Colors.green,</span><br><span class="line">      child: Align(</span><br><span class="line">        alignment: Alignment.center, <span class="comment">//居中</span></span><br><span class="line">        child: FlutterLogo( <span class="comment">//flutter的logo</span></span><br><span class="line">          size: <span class="number">60</span>, <span class="comment">//宽高60</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的内外边距-padding-margin"><a class="markdownIt-Anchor" href="#flutter的内外边距-padding-margin">#</a> Flutter 的内外边距 Padding、Margin</h2>
<p>flutter 为我们提供了 padding 和 margin 这量个 属性来设置内外边距</p>
<p>内边距：当前容器内的组件对于当前容器的距离</p>
<p>外边距：当前容器距离父类容器的距离</p>
<p><img src="https://brath.cloud/blogImg/image-20220506154557035.png" alt="image-20220506154557035"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PaddingAndMarginDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      color: Colors.red,</span><br><span class="line">      <span class="comment">//设置外边距（当前容器距离父类容器的距离）</span></span><br><span class="line">      <span class="comment">// margin: EdgeInsets.only(left: 10),//单独设置外边距</span></span><br><span class="line">      margin: EdgeInsets.all(<span class="number">10</span>),<span class="comment">//四个方向设置外边距</span></span><br><span class="line">      <span class="comment">//设置内边距（当前容器内的组件对于当前容器的距离）</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      child: Text(<span class="string">&quot;我有边距&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter尺寸限制容器constrainedboxwidget"><a class="markdownIt-Anchor" href="#flutter尺寸限制容器constrainedboxwidget">#</a> Flutter 尺寸限制容器（ConstrainedBox）widget：</h2>
<p>要点：子 widget 没有设置宽高的时候取自己设置的最大宽高</p>
<p>ConstrainedBox 的特点就是可以设置最大或者最小的宽高，子组件怎么设置都不可以超过这个宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155526846.png" alt="image-20220506155526846"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ConstrainedBox(</span><br><span class="line">      constraints: BoxConstraints(</span><br><span class="line">        maxHeight: <span class="number">100</span>,</span><br><span class="line">        maxWidth: <span class="number">100</span>,</span><br><span class="line">        minHeight: <span class="number">50</span>,</span><br><span class="line">        minWidth: <span class="number">50</span>,</span><br><span class="line">      ),</span><br><span class="line">      child: Container(</span><br><span class="line">        width: <span class="number">500</span>,</span><br><span class="line">        height: <span class="number">500</span>,</span><br><span class="line">        color: Colors.red,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter尺寸限制容器sizeboxwidget"><a class="markdownIt-Anchor" href="#flutter尺寸限制容器sizeboxwidget">#</a> Flutter 尺寸限制容器（SizeBox）widget：</h2>
<p>要点：如果父容器指定了宽高，那么子组件不可以修改宽高</p>
<p><img src="https://brath.cloud/blogImg/image-20220506155924950.png" alt="image-20220506155924950"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> SizedBox(</span><br><span class="line">        <span class="comment">// width: 100,</span></span><br><span class="line">        <span class="comment">// height: 100,</span></span><br><span class="line">      child: Container(</span><br><span class="line">        color: Colors.red,</span><br><span class="line">        width: <span class="number">200</span>,</span><br><span class="line">        height: <span class="number">200</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter装饰器boxdecorationwidget"><a class="markdownIt-Anchor" href="#flutter装饰器boxdecorationwidget">#</a> Flutter 装饰器（BoxDecoration）widget：</h2>
<p>flutter 为我们提供了 BoxDecoration  这量个 widget 来设置样式装饰</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161223872.png" alt="image-20220506161223872"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConstrainedBoxDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">20</span>),</span><br><span class="line">      width: <span class="built_in">double</span>.infinity,</span><br><span class="line">      child: DecoratedBox( <span class="comment">//装饰器</span></span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        <span class="comment">// color: Colors.red</span></span><br><span class="line">        gradient: LinearGradient( <span class="comment">//渐变颜色</span></span><br><span class="line">          colors: [</span><br><span class="line">            Colors.red, <span class="comment">//从红色</span></span><br><span class="line">            Colors.green, <span class="comment">//到绿色</span></span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>), <span class="comment">//圆角度</span></span><br><span class="line">        boxShadow: [</span><br><span class="line">          BoxShadow(</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            offset: Offset(<span class="number">2.0</span>,<span class="number">2.0</span>),</span><br><span class="line">            blurRadius: <span class="number">2</span>,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      child: Padding(</span><br><span class="line">        padding: EdgeInsets.only(</span><br><span class="line">          left: <span class="number">100</span>,</span><br><span class="line">          right: <span class="number">100</span>,</span><br><span class="line">          top: <span class="number">20</span>,</span><br><span class="line">          bottom: <span class="number">20</span></span><br><span class="line">          ),</span><br><span class="line">        child: Text(</span><br><span class="line">          <span class="string">&quot;渐变色~&quot;</span>,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            color: Colors.white</span><br><span class="line">          ),</span><br><span class="line">          textAlign: TextAlign.center,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter小容器containerwidget"><a class="markdownIt-Anchor" href="#flutter小容器containerwidget">#</a> Flutter 小容器（Container）widget：</h2>
<p>要点：当 Container 设置了 foregroundDecoration（前景） 的背景颜色，那么子组件将不会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161715758.png" alt="image-20220506161715758"></p>
<p>要点：当 Container 设置了 decoration（背景） 的背景颜色，那么子组件将会显示</p>
<p><img src="https://brath.cloud/blogImg/image-20220506161724860.png" alt="image-20220506161724860"></p>
<p>设置内边距并旋转 0.5</p>
<p><img src="https://brath.cloud/blogImg/image-20220506162019154.png" alt="image-20220506162019154"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ContarinerDemo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">100</span>), <span class="comment">//设置内边距</span></span><br><span class="line">      width: <span class="number">100</span>,</span><br><span class="line">      height: <span class="number">100</span>,</span><br><span class="line">      child: Text(<span class="string">&quot;data&quot;</span>), </span><br><span class="line">      decoration: BoxDecoration( <span class="comment">//设置背景  foregroundDecoration设置前景，会遮挡</span></span><br><span class="line">        color: Colors.red</span><br><span class="line">      ),</span><br><span class="line">      transform: Matrix4.rotationZ(<span class="number">0.5</span>), <span class="comment">//旋转，可选坐标轴</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter小容器materiaappscaffoldwidget"><a class="markdownIt-Anchor" href="#flutter小容器materiaappscaffoldwidget">#</a> Flutter 小容器（MateriaApp，Scaffold）widget：</h2>
<p>1.MateriaApp 是 flutter 的根节点，flutter 规定必须要 MateriaApp 来作为根节点展示</p>
<p>2. 在 MateriaApp 可以设置路由，每个子页面必须由 Scaffold 来包裹</p>
<p>3. 每个 Scaffold 包含两个部分 appBar（头部），body（展示体）</p>
<h2 id="flutter的appbar"><a class="markdownIt-Anchor" href="#flutter的appbar">#</a> Flutter 的 AppBar：</h2>
<p>Scaffold 中的 AppBar 有很多特性：</p>
<p><img src="https://brath.cloud/blogImg/image-20220506164220445.png" alt="image-20220506164220445"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        leading: IconButton( <span class="comment">//设置左侧图标</span></span><br><span class="line">            onPressed: () &#123;</span><br><span class="line">              <span class="built_in">print</span>(<span class="string">&quot;点击了！&quot;</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            icon: Icon(Icons.home) <span class="comment">//左边房子图片</span></span><br><span class="line">        ),</span><br><span class="line">        <span class="comment">// centerTitle: true, //设置centerTitle为true，可将标题居中</span></span><br><span class="line">        title: Text(</span><br><span class="line">          <span class="string">&quot;演示&quot;</span>,</span><br><span class="line">          style: TextStyle(fontSize: <span class="number">15</span>),</span><br><span class="line">        ),</span><br><span class="line">        actions: [  <span class="comment">//设置左侧图标</span></span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了加！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.add)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了减！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.remove)),</span><br><span class="line">          IconButton(</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;点击了灯！&quot;</span>);</span><br><span class="line">              &#125;,</span><br><span class="line">              icon: Icon(Icons.wb_iridescent_rounded)),</span><br><span class="line">        ],</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      <span class="comment">// body: ,</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的顶部tabbar选项卡"><a class="markdownIt-Anchor" href="#flutter的顶部tabbar选项卡">#</a> Flutter 的顶部 TabBar 选项卡：</h2>
<p>Flutter 提供 顶部 TabBar 选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506170237419.png" alt="image-20220506170237419"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>]; <span class="comment">//选项卡数组</span></span><br><span class="line">  <span class="comment">//选项控制器</span></span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line">  <span class="comment">//选项索引  </span></span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 初始化</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController( <span class="comment">//创建新控制器</span></span><br><span class="line">      initialIndex: _index, <span class="comment">//设置初始索引</span></span><br><span class="line">      length: tabs.length, <span class="comment">//长度为数组疮毒</span></span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">      _controller.addListener(() &#123; <span class="comment">//监听器</span></span><br><span class="line">        setState(() &#123; <span class="comment">//监听状态，当状态改变，把控制器索引赋值到选项索引，用来做内容切换</span></span><br><span class="line">          _index = _controller.index;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;);</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">    </span><br><span class="line">   <span class="comment"><span class="language-markdown"><span class="code">/**</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    * 销毁</span></span></span></span><br><span class="line"><span class="code"><span class="language-markdown"><span class="comment">    **/</span></span></span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>, <span class="comment">//阴影</span></span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller, <span class="comment">//选项接收控制器</span></span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab( <span class="comment">//遍历选项</span></span><br><span class="line">          text: e, <span class="comment">//文本为map中的内容</span></span><br><span class="line">        )).toList(), <span class="comment">//转为集合</span></span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: Text(_index.toString()), <span class="comment">//body可以根据index来输出不同内容</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的顶部tabbar选项卡进阶"><a class="markdownIt-Anchor" href="#flutter的顶部tabbar选项卡进阶">#</a> Flutter 的顶部 TabBar 选项卡（进阶）</h2>
<p>使用 Flutter 提供 顶部 TabBarView 组件来设置选项卡</p>
<p><img src="https://brath.cloud/blogImg/image-20220506171550665.png" alt="image-20220506171550665"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PageDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//指定三个容器页面，在下方调用 widget.widgets 因为泛型指定了 Widget 所以都是Widget数组</span></span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [FlutterView(),AndroidView(),IOSView()];</span><br><span class="line">    </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;PageDemo&gt; createState() =&gt; _PageDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_PageDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">PageDemo</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span></span>&#123;</span><br><span class="line">  <span class="built_in">List</span> tabs = [<span class="string">&quot;Fullter&quot;</span>, <span class="string">&quot;Andiord&quot;</span>, <span class="string">&quot;IOS&quot;</span>];</span><br><span class="line">  <span class="keyword">late</span> TabController _controller = TabController(length: tabs.length, vsync: <span class="keyword">this</span>);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    _controller = TabController(</span><br><span class="line">      length: tabs.length, </span><br><span class="line">      vsync: <span class="keyword">this</span></span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _controller.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        elevation: <span class="number">10.0</span>,</span><br><span class="line">        bottom: TabBar(</span><br><span class="line">          controller: _controller,</span><br><span class="line">          tabs: tabs.map((e) =&gt; Tab(</span><br><span class="line">          text: e,</span><br><span class="line">        )).toList(),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      body: TabBarView( <span class="comment">//使用 TabBarView 包裹body</span></span><br><span class="line">        children: widget.widgets, <span class="comment">//内容就是widgets</span></span><br><span class="line">        controller: _controller, <span class="comment">//通过控制器来切换</span></span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">FlutterView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;FlutterView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AndroidView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;AndroidView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IOSView</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Center(</span><br><span class="line">      child: Text(<span class="string">&quot;IOSView&quot;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的侧抽屉-drawer-样式"><a class="markdownIt-Anchor" href="#flutter的侧抽屉-drawer-样式">#</a> Flutter 的侧抽屉 Drawer 样式</h2>
<p>使用 Flutter 提供 侧抽屉 Drawer 组件来设置抽屉样式</p>
<p><img src="https://brath.cloud/blogImg/image-20220506172420330.png" alt="image-20220506172420330"></p>
<h4 id="要点drawer是-scaffold-中的属性并不是-appbar-的"><a class="markdownIt-Anchor" href="#要点drawer是-scaffold-中的属性并不是-appbar-的">#</a> 要点：drawer 是 Scaffold 中的属性，并不是 AppBar 的</h4>
<p><img src="https://brath.cloud/blogImg/image-20220506172505516.png" alt="image-20220506172505516"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">myDrawer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Drawer(</span><br><span class="line">      child: MediaQuery.removePadding( <span class="comment">//删除边距</span></span><br><span class="line">        context: context, </span><br><span class="line">        child: Column(</span><br><span class="line">          crossAxisAlignment: CrossAxisAlignment.start, <span class="comment">//从左开始</span></span><br><span class="line">          children: [</span><br><span class="line">            Padding(padding: EdgeInsets.only(top: <span class="number">40</span>),</span><br><span class="line">            child: Text(<span class="string">&quot;Brath&quot;</span>),</span><br><span class="line">            )</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">        removeTop: <span class="keyword">true</span>, <span class="comment">//删除顶部</span></span><br><span class="line">        ),     </span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的底部选项卡"><a class="markdownIt-Anchor" href="#flutter的底部选项卡">#</a> Flutter 的底部选项卡</h2>
<p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到点击卡片切换页面</p>
<p><img src="https://brath.cloud/blogImg/image-20220506190446130.png" alt="image-20220506190446130"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> BottomNavigatorBarDemo(&#123; Key? key &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;新增&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;减少&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: Center(child: Text(_index.toString())), <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的底部选项卡进阶版"><a class="markdownIt-Anchor" href="#flutter的底部选项卡进阶版">#</a> Flutter 的底部选项卡（进阶版）</h2>
<p>使用 flutter 提供的 bottomNavigationBar 来做底部选项卡，做到按钮居中布局</p>
<p>要点：两种实现方式，BottomNavigationBar 中如果 BottomNavigationBarItem 超过三个需要设置 type👇否则不显示</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type: BottomNavigationBarType.fixed</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507084730237.png" alt="image-20220507084730237"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomNavigatorBarDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Widget&gt; widgets = [ <span class="comment">//四个页面数组</span></span><br><span class="line">    PageDemo(),</span><br><span class="line">    LayoutDemo(),</span><br><span class="line">    LoginPage(),</span><br><span class="line">      LoginPage(),</span><br><span class="line">    ];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;BottomNavigatorBarDemo&gt; createState() =&gt; _BottomNavigatorBarDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomNavigationBar( <span class="comment">//底部选项widget</span></span><br><span class="line">      type: BottomNavigationBarType.fixed, <span class="comment">//设置超出三个页面显示</span></span><br><span class="line">        items: [</span><br><span class="line">          <span class="comment">//三个选项</span></span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.add),</span><br><span class="line">            label: <span class="string">&quot;首页&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.home),</span><br><span class="line">            label: <span class="string">&quot;我的&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">          BottomNavigationBarItem(</span><br><span class="line">            icon: Icon(Icons.remove),</span><br><span class="line">            label: <span class="string">&quot;登录&quot;</span></span><br><span class="line">          ),</span><br><span class="line">      ],</span><br><span class="line">      currentIndex: _index, <span class="comment">//当前index</span></span><br><span class="line">      onTap: (v)&#123; <span class="comment">//当点击时，把当前索引状态改为点击的索引</span></span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _index = v;</span><br><span class="line">      &#125;);</span><br><span class="line">      &#125;,</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, <span class="comment">//将按钮作为居中嵌入下方tabbar</span></span><br><span class="line">      floatingActionButton: FloatingActionButton( <span class="comment">//设置居中按钮</span></span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第二种实现方式：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507084943281.png" alt="image-20220507084943281"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_BottomNavigatorBarDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">BottomNavigatorBarDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _index = <span class="number">0</span>; <span class="comment">//页面index</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">       <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;底部选项卡&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      bottomNavigationBar: BottomAppBar(</span><br><span class="line">        color: Theme.of(context).primaryColorDark, <span class="comment">//设置tabbar颜色主题</span></span><br><span class="line">        shape: CircularNotchedRectangle(), <span class="comment">//设置按钮风格</span></span><br><span class="line">        child: Row(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.spaceAround,</span><br><span class="line">          children: [</span><br><span class="line">           IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.add)),</span><br><span class="line">             SizedBox(height: <span class="number">16</span>),</span><br><span class="line">                        IconButton(</span><br><span class="line">             onPressed: ()&#123;</span><br><span class="line"></span><br><span class="line">             &#125;, </span><br><span class="line">             icon: Icon(Icons.home)),</span><br><span class="line">          ]</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked,</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          <span class="built_in">print</span>(<span class="string">&quot;object&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">      body: widget.widgets[_index], <span class="comment">//展示当前索引</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的列表-listviewwidget"><a class="markdownIt-Anchor" href="#flutter的列表-listviewwidget">#</a> Flutter 的列表 （ListView）Widget</h2>
<p>flutter 为我们提供了 ListView 这个 widget 来展示我们的列表</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//均为可选参数</span></span><br><span class="line">ListView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//滑动方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向，默认否</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//监听滑动距离回调 控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//限制listview的高度为子组件的高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">this</span>.itemExtent, <span class="comment">//设置list展示间距</span></span><br><span class="line">    <span class="keyword">this</span>.prototypeItem,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">  &#125;) </span><br></pre></td></tr></table></figure>
<h5 id="用-listview-实现滑动列表并且可以细粒度显示每个list数据并且可以点击按钮返回顶部"><a class="markdownIt-Anchor" href="#用-listview-实现滑动列表并且可以细粒度显示每个list数据并且可以点击按钮返回顶部">#</a> 用 ListView 实现滑动列表，并且可以细粒度显示每个 list 数据，并且可以点击按钮返回顶部</h5>
<p><img src="https://brath.cloud/blogImg/image-20220507094032250.png" alt="image-20220507094032250" style="zoom: 67%;" /><img src="https://brath.cloud/blogImg/image-20220507094042244.png" alt="image-20220507094042244" style="zoom: 67%;" /></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ListViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建无状态Widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ListViewDemo&gt; createState() =&gt; _ListViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ListViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ListViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化list为空</span></span><br><span class="line">  ScrollController _controller = ScrollController(); <span class="comment">//控制器</span></span><br><span class="line">  <span class="built_in">bool</span> <span class="keyword">show</span> = <span class="keyword">false</span>; <span class="comment">//是否展示按钮</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = ScrollController(); <span class="comment">//初始化时，初始控制器</span></span><br><span class="line">    _controller.addListener(() &#123; <span class="comment">//增加控制器监听</span></span><br><span class="line">      <span class="keyword">if</span>(_controller.offset &gt;= <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">false</span>)&#123; <span class="comment">//如果滑动距离大于100并且按钮没展示那就展示按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">true</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;<span class="keyword">else</span> <span class="keyword">if</span>(_controller.offset &lt; <span class="number">100</span> &amp;&amp; <span class="keyword">show</span> == <span class="keyword">true</span>)&#123; <span class="comment">//如果滑动距离小于100并且按钮展示那就关闭按钮</span></span><br><span class="line">        setState(() &#123;</span><br><span class="line">          <span class="keyword">show</span> = <span class="keyword">false</span>;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">      list.add(i); <span class="comment">//循环添加到数组</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement dispose</span></span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">    _controller.dispose(); <span class="comment">//退出时，销毁控制器，否则内存会溢出</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;滚动列表&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: <span class="keyword">show</span> ? FloatingActionButton( <span class="comment">//使用三元来控制按钮展示</span></span><br><span class="line">        child: Icon(Icons.vertical_align_top_outlined),</span><br><span class="line">       onPressed: ()&#123;</span><br><span class="line">        _controller.animateTo( <span class="comment">//设置回到顶部</span></span><br><span class="line">        <span class="number">0</span>, <span class="comment">//回到哪个部分 0 就是顶端</span></span><br><span class="line">        duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>),  <span class="comment">//用Duration设置时间</span></span><br><span class="line">        curve: Curves.slowMiddle <span class="comment">//用Curves设置动效</span></span><br><span class="line">        );</span><br><span class="line">       &#125;,</span><br><span class="line">      ): <span class="keyword">null</span>, <span class="comment">//如果show为false则不展示按钮</span></span><br><span class="line">      body: Scrollbar(</span><br><span class="line">        child: RefreshIndicator( <span class="comment">//使用 RefreshIndicator 包裹listview使其可以下拉刷新</span></span><br><span class="line">          <span class="comment">//第一种方法：直接展示数组数据</span></span><br><span class="line">      <span class="comment">//     child: ListView(</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; Text(e.toString())).toList(),</span></span><br><span class="line">      <span class="comment">//   shrinkWrap: true, //限制listview的高度为子组件的高度</span></span><br><span class="line">      <span class="comment">//   reverse: false,//是否反向列表</span></span><br><span class="line">      <span class="comment">//   itemExtent: 50,//设置list展示间距</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line">          <span class="comment">//第二种方法，构造展示数组数据，可以细粒度操作</span></span><br><span class="line">      child: ListView.builder(</span><br><span class="line">        itemBuilder: (BuildContext context,<span class="built_in">int</span> index)&#123; <span class="comment">//itemBuilder构建列表</span></span><br><span class="line">          <span class="keyword">if</span>(index == <span class="number">2</span>)&#123; <span class="comment">//如果第索引 == 2那么就展示一个图标</span></span><br><span class="line">            <span class="keyword">return</span> Icon(Icons.add);</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">return</span> Text(list[index].toString()); <span class="comment">//返回所有list中的索引打印String类型</span></span><br><span class="line">        &#125;,</span><br><span class="line">        itemCount: list.length, <span class="comment">//itemCount表示数组长度</span></span><br><span class="line">        controller: _controller, <span class="comment">//接入控制器</span></span><br><span class="line">        ),</span><br><span class="line">      onRefresh: _onRefresh, <span class="comment">//使用_onRefresh方法决定下拉刷新时的操作</span></span><br><span class="line">      )</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">  Future _onRefresh() <span class="keyword">async</span>&#123; <span class="comment">//因为是异步操作所以加入 async ，在方法返回种使用 await 可以做到强制等待异步返回</span></span><br><span class="line">    <span class="keyword">await</span> Future.delayed( <span class="comment">//处理返回</span></span><br><span class="line">      <span class="built_in">Duration</span>(seconds: <span class="number">3</span>), <span class="comment">//等待3秒</span></span><br><span class="line">      ()&#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;三&quot;</span>); <span class="comment">//三秒后打印</span></span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;三&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的网格布局-gridviewwidget"><a class="markdownIt-Anchor" href="#flutter的网格布局-gridviewwidget">#</a> Flutter 的网格布局 （GridView）Widget：</h2>
<p>flutter 为我们提供了 GridView 这个 widget 来展示我们的网格数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">GridView(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    Axis scrollDirection = Axis.vertical, <span class="comment">//展示方向，默认垂直</span></span><br><span class="line">    <span class="built_in">bool</span> reverse = <span class="keyword">false</span>, <span class="comment">//是否反向</span></span><br><span class="line">    ScrollController? controller, <span class="comment">//滑动控制器</span></span><br><span class="line">    <span class="built_in">bool?</span> primary,</span><br><span class="line">    ScrollPhysics? physics,</span><br><span class="line">    <span class="built_in">bool</span> shrinkWrap = <span class="keyword">false</span>, <span class="comment">//是否跟随子组件显示最大高度</span></span><br><span class="line">    EdgeInsetsGeometry? padding,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.gridDelegate,</span><br><span class="line">    <span class="built_in">bool</span> addAutomaticKeepAlives = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addRepaintBoundaries = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">bool</span> addSemanticIndexes = <span class="keyword">true</span>,</span><br><span class="line">    <span class="built_in">double?</span> cacheExtent,</span><br><span class="line">    <span class="built_in">List</span>&lt;Widget&gt; children = <span class="keyword">const</span> &lt;Widget&gt;[],</span><br><span class="line">    <span class="built_in">int?</span> semanticChildCount,</span><br><span class="line">    DragStartBehavior dragStartBehavior = DragStartBehavior.start,</span><br><span class="line">    Clip clipBehavior = Clip.hardEdge,</span><br><span class="line">    ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual,</span><br><span class="line">    <span class="built_in">String?</span> restorationId,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507095538462.png" alt="image-20220507095538462"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grid_view_demo</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>, <span class="comment">//居中appbar标题</span></span><br><span class="line">        title: Text(<span class="string">&quot;网格布局演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: GridView(</span><br><span class="line">        gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">          crossAxisCount: <span class="number">2</span>, <span class="comment">//横向最大展示个数</span></span><br><span class="line">          mainAxisSpacing: <span class="number">10</span>, <span class="comment">//横向间距</span></span><br><span class="line">          crossAxisSpacing: <span class="number">10</span>, <span class="comment">//纵向间距</span></span><br><span class="line">        ),</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            color: Colors.amber,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">85</span>, <span class="number">76</span>, <span class="number">51</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">14</span>, <span class="number">223</span>, <span class="number">125</span>),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            color: Color.fromARGB(<span class="number">255</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">209</span>),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的弹窗alertdialogwidget"><a class="markdownIt-Anchor" href="#flutter的弹窗alertdialogwidget">#</a> Flutter 的弹窗（AlertDialog）Widget：</h2>
<p>flutter 为我们提供了 AlertDialog 这个 widget 来展示我们的弹窗数据</p>
<p>源码阅读：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> AlertDialog(&#123;</span><br><span class="line">   Key? key,</span><br><span class="line">   <span class="keyword">this</span>.title, <span class="comment">//弹窗标题</span></span><br><span class="line">   <span class="keyword">this</span>.titlePadding, <span class="comment">//弹窗边距</span></span><br><span class="line">   <span class="keyword">this</span>.titleTextStyle, <span class="comment">//文字风格</span></span><br><span class="line">   <span class="keyword">this</span>.content, <span class="comment">//弹窗内容</span></span><br><span class="line">   <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">20.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>), <span class="comment">//内容边距</span></span><br><span class="line">   <span class="keyword">this</span>.contentTextStyle, <span class="comment">//内容风格</span></span><br><span class="line">   <span class="keyword">this</span>.actions, <span class="comment">//确认展示结果</span></span><br><span class="line">   <span class="keyword">this</span>.actionsPadding = EdgeInsets.zero,</span><br><span class="line">   <span class="keyword">this</span>.actionsAlignment,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowDirection,</span><br><span class="line">   <span class="keyword">this</span>.actionsOverflowButtonSpacing,</span><br><span class="line">   <span class="keyword">this</span>.buttonPadding,</span><br><span class="line">   <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">   <span class="keyword">this</span>.elevation,</span><br><span class="line">   <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">   <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">   <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">   <span class="keyword">this</span>.shape,</span><br><span class="line">   <span class="keyword">this</span>.alignment,</span><br><span class="line">   <span class="keyword">this</span>.scrollable = <span class="keyword">false</span>,</span><br><span class="line"> &#125;)</span><br></pre></td></tr></table></figure>
<h5 id="图片为ios风格的弹窗"><a class="markdownIt-Anchor" href="#图片为ios风格的弹窗">#</a> 图片为 IOS 风格的弹窗</h5>
<p><strong><img src="https://brath.cloud/blogImg/image-20220507101536722.png" alt="image-20220507101536722"></strong></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>))</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showAlert() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹窗</span></span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">        <span class="comment">//默认风格弹窗</span></span><br><span class="line">        <span class="comment">// return AlertDialog( //AlertDialog展示弹窗</span></span><br><span class="line">        <span class="comment">//   title: Text(&quot;与Brath的聊天&quot;), //弹窗标题</span></span><br><span class="line">        <span class="comment">//   content: Text(&quot;确认删除&quot;), //弹窗文本</span></span><br><span class="line">        <span class="comment">//   actions: [</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.of(context).pop(true); //第一种返回方式，of上下文然后pop关闭，并返回一个true</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;确认&quot;)),</span></span><br><span class="line">        <span class="comment">//     TextButton(onPressed: () &#123;</span></span><br><span class="line">        <span class="comment">//       Navigator.pop(context,false); //第二种返回方式，先pop关闭。然后用of链接上线问，并返回一个false</span></span><br><span class="line">        <span class="comment">//     &#125;, child: Text(&quot;取消&quot;)),</span></span><br><span class="line">        <span class="comment">//   ],</span></span><br><span class="line">        <span class="comment">// );</span></span><br><span class="line">        <span class="comment">//IOS风格弹窗 除了widget不一样，其他参数均为统一</span></span><br><span class="line">         <span class="keyword">return</span> CupertinoAlertDialog(</span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>),</span><br><span class="line">          content: Text(<span class="string">&quot;确认删除&quot;</span>),</span><br><span class="line">          actions: [</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.of(context).pop(<span class="keyword">true</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;确认&quot;</span>)),</span><br><span class="line">            TextButton(onPressed: () &#123;</span><br><span class="line">              Navigator.pop(context,<span class="keyword">false</span>);</span><br><span class="line">            &#125;, child: Text(<span class="string">&quot;取消&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res); <span class="comment">//打印路由返回结果</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter的弹框simpledialog-widget"><a class="markdownIt-Anchor" href="#flutter的弹框simpledialog-widget">#</a> Flutter 的弹框（SimpleDialog） Widget：</h2>
<p>flutter 为我们提供了 SimpleDialog 这个 widget 来展示我们的弹框数据</p>
<p>源码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> SimpleDialog(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.title, <span class="comment">//弹框标题</span></span><br><span class="line">    <span class="keyword">this</span>.titlePadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">24.0</span>, <span class="number">0.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.titleTextStyle,</span><br><span class="line">    <span class="keyword">this</span>.children, </span><br><span class="line">    <span class="keyword">this</span>.contentPadding = <span class="keyword">const</span> EdgeInsets.fromLTRB(<span class="number">0.0</span>, <span class="number">12.0</span>, <span class="number">0.0</span>, <span class="number">16.0</span>),</span><br><span class="line">    <span class="keyword">this</span>.backgroundColor,</span><br><span class="line">    <span class="keyword">this</span>.elevation,</span><br><span class="line">    <span class="keyword">this</span>.semanticLabel,</span><br><span class="line">    <span class="keyword">this</span>.insetPadding = _defaultInsetPadding,</span><br><span class="line">    <span class="keyword">this</span>.clipBehavior = Clip.none,</span><br><span class="line">    <span class="keyword">this</span>.shape,</span><br><span class="line">    <span class="keyword">this</span>.alignment,</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/image-20220507102533285.png" alt="image-20220507102533285"></p>
<p>代码演示</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AlertDialogDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123; <span class="comment">//创建有状态widget</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;AlertDialogDemo&gt; createState() =&gt; _AlertDialogDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_AlertDialogDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">AlertDialogDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">int</span>&gt; list = []; <span class="comment">//初始化空数组</span></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      list.add(i);<span class="comment">//加入循环数据</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;弹窗展示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column( <span class="comment">//构建Column，展示按钮为对话框</span></span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showAlert, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;对话框&quot;</span>)),</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _showList, <span class="comment">//设置弹窗方法 _showAlert</span></span><br><span class="line">            child: Text(<span class="string">&quot;列表框&quot;</span>)),</span><br><span class="line">          ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _showList() <span class="keyword">async</span>&#123; <span class="comment">//async异步弹框</span></span><br><span class="line"> <span class="keyword">var</span> res = <span class="keyword">await</span> showDialog( <span class="comment">//await接收异步结果</span></span><br><span class="line">      barrierDismissible: <span class="keyword">false</span>, <span class="comment">//展示弹窗，点击空白不会关闭</span></span><br><span class="line">      context: context, <span class="comment">//传递上下文对象</span></span><br><span class="line">      builder: (BuildContext context) &#123; <span class="comment">//builder构建方法，传入BuildContext</span></span><br><span class="line">         <span class="keyword">return</span> SimpleDialog( <span class="comment">//创建弹框展示列表</span></span><br><span class="line">          title: Text(<span class="string">&quot;与Brath的聊天&quot;</span>), <span class="comment">//弹框标题</span></span><br><span class="line">          children: list.map((e) =&gt; GestureDetector( <span class="comment">//用GestureDetector展示list</span></span><br><span class="line">            child: Text(e.toString()), <span class="comment">//每个孩子都是list中的String输出</span></span><br><span class="line">            onTap: ()&#123;</span><br><span class="line">              Navigator.pop(context,e); <span class="comment">//点击每个list，路由返回并打印当前数组数值</span></span><br><span class="line">            &#125;,</span><br><span class="line">            )).toList(),</span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="flutter的表格tablewidget"><a class="markdownIt-Anchor" href="#flutter的表格tablewidget">#</a> Flutter 的表格（Table）Widget：</h2>
<p>flutter 为我们提供了 Table 还有 DataTable 这两个常用 widget 来展示我们的表格</p>
<p><img src="https://brath.cloud/blogImg/image-20220507110417537.png" alt="image-20220507110417537"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TableDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;TableDemo&gt; createState() =&gt; _TableDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_TableDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">TableDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; <span class="comment">//初始化表格数据</span></span><br><span class="line">  <span class="built_in">int</span> _sortColumnIndex = <span class="number">0</span>; <span class="comment">//初始化排序索引</span></span><br><span class="line">  <span class="built_in">bool</span> _sortAscending = <span class="keyword">true</span>; <span class="comment">//初始化排序方式 ture为 ASC false为 DESC</span></span><br><span class="line">  </span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      list.add(&#123; <span class="comment">//循环添加map数据</span></span><br><span class="line">        <span class="string">&quot;name&quot;</span>: <span class="string">&quot;b&quot;</span> * i,</span><br><span class="line">        <span class="string">&quot;gender&quot;</span>: i % <span class="number">1</span> == <span class="number">0</span> ? <span class="string">&quot;男&quot;</span> : <span class="string">&quot;女&quot;</span>, <span class="comment">//取余等于0是男 否则是女</span></span><br><span class="line">        <span class="string">&quot;isSelect&quot;</span>: <span class="keyword">false</span>, <span class="comment">//选中状态默认为不选中</span></span><br><span class="line">        <span class="string">&quot;age&quot;</span>: i.toString() + i.toString(),</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;表格演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding(</span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置10边距</span></span><br><span class="line">        <span class="comment">//普通表格</span></span><br><span class="line">      <span class="comment">//   child: Table(</span></span><br><span class="line">      <span class="comment">//   border: TableBorder.all(</span></span><br><span class="line">      <span class="comment">//     color: Colors.green</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//   children: list.map((e) =&gt; TableRow(</span></span><br><span class="line">      <span class="comment">//     children: [</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;name&quot;]), //展示name列</span></span><br><span class="line">      <span class="comment">//       Text(e[&quot;gender&quot;]), //展示性别列</span></span><br><span class="line">      <span class="comment">//     ],</span></span><br><span class="line">      <span class="comment">//   )).toList(),</span></span><br><span class="line">      <span class="comment">// ),</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">//H5表格，常用,可排序，可选中</span></span><br><span class="line">      child: DataTable(</span><br><span class="line">        sortColumnIndex: _sortColumnIndex, <span class="comment">//设置排序索引</span></span><br><span class="line">        sortAscending: _sortAscending, <span class="comment">//设置排序方式</span></span><br><span class="line">        columns: [</span><br><span class="line">          DataColumn(</span><br><span class="line">            onSort: (columnIndex, ascending) &#123; <span class="comment">//DataColumn的排序方法</span></span><br><span class="line">              setState(() &#123;</span><br><span class="line">                _sortAscending = ascending; <span class="comment">//设置ascending（排序方式）为当前的_sortAscending</span></span><br><span class="line">                _sortColumnIndex = columnIndex; <span class="comment">//设置columnIndex（排序索引）为当前的_sortColumnIndex</span></span><br><span class="line">                list.sort((begin,end)&#123; <span class="comment">//对数组排序</span></span><br><span class="line">                  <span class="keyword">if</span>(!ascending)&#123; <span class="comment">//如果为desc的排序方式</span></span><br><span class="line">                    <span class="keyword">var</span> c = begin; <span class="comment">//新建c变量等于 begin</span></span><br><span class="line">                    begin = end; <span class="comment">//begin 赋值到 end</span></span><br><span class="line">                    end = c; <span class="comment">//edn赋值到c ，完成数据转换</span></span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//返回begin的name数据，转换成edn的name数据</span></span><br><span class="line">                  <span class="keyword">return</span> begin[<span class="string">&quot;name&quot;</span>].toString().length.compareTo(end[<span class="string">&quot;name&quot;</span>].toString().length);</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            label: Text(<span class="string">&quot;姓名&quot;</span>) <span class="comment">//展示标题为姓名</span></span><br><span class="line">          ),</span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;性别&quot;</span>) <span class="comment">//展示标题为性别</span></span><br><span class="line">          ), </span><br><span class="line">          DataColumn(</span><br><span class="line">            label: Text(<span class="string">&quot;年龄&quot;</span>) <span class="comment">//展示标题为年龄</span></span><br><span class="line">          ), </span><br><span class="line">        ], <span class="comment">//表头列</span></span><br><span class="line">        rows: list.map((e) =&gt; DataRow(</span><br><span class="line">          selected: e[<span class="string">&quot;isSelect&quot;</span>],</span><br><span class="line">          onSelectChanged: (v)&#123; <span class="comment">//点击数据</span></span><br><span class="line">            setState(() &#123; <span class="comment">//改变状态</span></span><br><span class="line">              <span class="keyword">if</span>(e[<span class="string">&quot;isSelect&quot;</span>] != v)&#123; <span class="comment">//如果当前选中状态不等于传过来的状态（选中|不选中）</span></span><br><span class="line">                e[<span class="string">&quot;isSelect&quot;</span>] = v; <span class="comment">//就把他传过来的状态设置为当前状态</span></span><br><span class="line">            &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;,</span><br><span class="line">          cells: [</span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;name&quot;</span>])), <span class="comment">//设置姓名内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;gender&quot;</span>])), <span class="comment">//设置性别内容列</span></span><br><span class="line">            DataCell(Text(e[<span class="string">&quot;age&quot;</span>])), <span class="comment">//设置年龄内容列</span></span><br><span class="line">          ]</span><br><span class="line">        )</span><br><span class="line">        ).toList(),<span class="comment">//数组打印</span></span><br><span class="line">      ),</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter卡片card-widget"><a class="markdownIt-Anchor" href="#flutter卡片card-widget">#</a> Flutter 卡片（Card） Widget：</h2>
<p>flutter 为我们提供了 Card 这个 widget 来展示我们的卡片数据</p>
<p><img src="https://brath.cloud/blogImg/image-20220507111422728.png" alt="image-20220507111422728"></p>
<p>代码展示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CardDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CardDemo&gt; createState() =&gt; _CardDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CardDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CardDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">Map</span>&gt; list = []; </span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          list.add(&#123;</span><br><span class="line">            <span class="string">&quot;age&quot;</span>: <span class="number">10</span> + i,</span><br><span class="line">            <span class="string">&quot;name&quot;</span>: <span class="string">&quot;barth&quot;</span> + i.toString(),</span><br><span class="line">          &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">   *</span> list构建方法，一定要在 build 方法上面，init方法下面构建，因为代码从上到下执行</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment">   <span class="emphasis">*/</span></span></span></span><br><span class="line">  Widget _itemBuilder(BuildContext context,<span class="built_in">int</span> index)&#123;</span><br><span class="line">    <span class="keyword">return</span> Card( <span class="comment">//返回卡片集合</span></span><br><span class="line">      color: Colors.green, <span class="comment">//设置卡片背景色</span></span><br><span class="line">      shadowColor: Colors.grey, <span class="comment">//设置阴影背景色</span></span><br><span class="line">      elevation: <span class="number">5.0</span>, <span class="comment">//设置阴影度</span></span><br><span class="line">      child: Column(</span><br><span class="line">        children: [</span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//于顶部间隔 8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;name&quot;</span>]),<span class="comment">//展示list中的name</span></span><br><span class="line">          SizedBox(height: <span class="number">8</span>), <span class="comment">//与上个name间隔8</span></span><br><span class="line">          Text(list[index][<span class="string">&quot;age&quot;</span>].toString()), <span class="comment">//展示age内容</span></span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">        padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">        child: ListView.builder( <span class="comment">//构建listView</span></span><br><span class="line">          itemBuilder: _itemBuilder, <span class="comment">//设置builder方法</span></span><br><span class="line">          itemCount: list.length, <span class="comment">//设置list大小</span></span><br><span class="line">          )</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的listtitlewidget类似于聊天标签"><a class="markdownIt-Anchor" href="#flutter的listtitlewidget类似于聊天标签">#</a> Flutter 的（ListTitle）Widget（类似于聊天标签）：</h2>
<p>Flutter 为我们提供了 ListTile 这个 Widget 来展示标签</p>
<p><img src="https://brath.cloud/blogImg/image-20220507112500603.png" alt="image-20220507112500603"></p>
<p>代码演示：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@override</span></span><br><span class="line">Widget build(BuildContext context) &#123;</span><br><span class="line">  <span class="keyword">return</span> Scaffold(</span><br><span class="line">    backgroundColor: Colors.white,</span><br><span class="line">    appBar: AppBar(</span><br><span class="line">      centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      title: Text(<span class="string">&quot;卡片数据演示&quot;</span>),</span><br><span class="line">    ),</span><br><span class="line">    body: Padding( <span class="comment">//边距 Widget</span></span><br><span class="line">      padding: EdgeInsets.all(<span class="number">10</span>), <span class="comment">//设置上下左右10边距</span></span><br><span class="line">      <span class="comment">//listView卡片</span></span><br><span class="line">      child: ListView(</span><br><span class="line">        children: [</span><br><span class="line">          ListTile( <span class="comment">//创建listTitle</span></span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">204</span>, <span class="number">184</span>, <span class="number">128</span>), <span class="comment">//标签颜色</span></span><br><span class="line">            leading: Icon(Icons.token_sharp), <span class="comment">//左边图标</span></span><br><span class="line">            title: Text(<span class="string">&quot;Brath&quot;</span>),<span class="comment">//主标题数据</span></span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),<span class="comment">//标题文字颜色</span></span><br><span class="line">            subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 1 &quot;</span>), <span class="comment">//副标题数据</span></span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),<span class="comment">//右边图标</span></span><br><span class="line">          ),</span><br><span class="line">          SizedBox(height: <span class="number">8</span>),</span><br><span class="line">          ListTile(</span><br><span class="line">            tileColor: Color.fromARGB(<span class="number">255</span>, <span class="number">197</span>, <span class="number">124</span>, <span class="number">55</span>),</span><br><span class="line">            leading: Icon(Icons.token_sharp),</span><br><span class="line">            title: Text(<span class="string">&quot;Braht 2&quot;</span>),</span><br><span class="line">            textColor: Color.fromARGB(<span class="number">255</span>, <span class="number">49</span>, <span class="number">54</span>, <span class="number">42</span>),</span><br><span class="line">           subtitle: Text(<span class="string">&quot;Flutter卡片数据演示数据 2 &quot;</span>),</span><br><span class="line">            trailing: Icon(Icons.account_circle_rounded),</span><br><span class="line">          ),        </span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    </span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter性能优化"><a class="markdownIt-Anchor" href="#flutter性能优化">#</a> Flutter 性能优化：</h2>
<p>先看图片：</p>
<p><img src="https://brath.cloud/blogImg/image-20220507114818793.png" alt="image-20220507114818793"></p>
<p>​		我们以看到，这张图片由三个容器构成，并且点击黄色容器，其数字会增加，理论上来说代码并没有任何问题。</p>
<p>​		但是，在我们打开 检测工具后，发现，当点击黄色容器时，所有容器都会重新渲染，这就造成了性能的损耗！</p>
<p>​		如何优化？</p>
<p>​		代码演示：</p>
<h5 id="使用一个单独的-countdemo-来对-黄色的容器进行封装这样就可以做到单独渲染"><a class="markdownIt-Anchor" href="#使用一个单独的-countdemo-来对-黄色的容器进行封装这样就可以做到单独渲染">#</a> 使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</h5>
<h5 id="因为-setstate-会重新绘制当前组件column单独封装后他自己就是一个单独组件countdemo"><a class="markdownIt-Anchor" href="#因为-setstate-会重新绘制当前组件column单独封装后他自己就是一个单独组件countdemo">#</a> 因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">performanceDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;performanceDemo&gt; createState() =&gt; _performanceDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_performanceDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">performanceDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">&quot;性能优化专题&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.red,</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.yellow,</span><br><span class="line">            child: CountDemo(),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">100</span>,</span><br><span class="line">            color: Colors.blue,</span><br><span class="line">          )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 使用一个单独的 CountDemo 来对 黄色的容器进行封装，这样就可以做到单独渲染</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 因为 setState 会重新绘制当前组件（Column），单独封装后，他自己就是一个单独组件（CountDemo）</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="strong">**/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;CountDemo&gt; createState() =&gt; _CountDemoState();</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_CountDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">CountDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">              child: Text(count.toString()),</span><br><span class="line">              onTap: ()&#123;</span><br><span class="line">                setState(() &#123;</span><br><span class="line">                  count ++;</span><br><span class="line">                &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的全局状态管理-provider-非常重要"><a class="markdownIt-Anchor" href="#flutter的全局状态管理-provider-非常重要">#</a> Flutter 的全局状态管理 Provider 非常重要！</h2>
<h5 id="我们分为四个步骤来学习全局状态管理-provider"><a class="markdownIt-Anchor" href="#我们分为四个步骤来学习全局状态管理-provider">#</a> 我们分为四个步骤来学习全局状态管理 Provider</h5>
<h5 id="1-因为全局状态管理是单独的插件所以我们第一步一定是导包"><a class="markdownIt-Anchor" href="#1-因为全局状态管理是单独的插件所以我们第一步一定是导包">#</a> 1、因为全局状态管理是单独的插件，所以我们第一步一定是导包</h5>
<p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者 Brath 的 flutter 版本 2.0 为例，使用 5.0.0 版本<img src="https://brath.cloud/blogImg/image-20220507123010044.png" alt="image-20220507123010044"></p>
<h5 id="2-下载好依赖后我们在-lib-目录创建文件夹provider-并在文件夹内创建一个-count_providerdart作为我们的第一个全局状态类"><a class="markdownIt-Anchor" href="#2-下载好依赖后我们在-lib-目录创建文件夹provider-并在文件夹内创建一个-count_providerdart作为我们的第一个全局状态类">#</a> 2、下载好依赖后，我们在 lib 目录创建文件夹：Provider 并在文件夹内创建一个 Count_provider.dart，作为我们的第一个全局状态类</h5>
<p><img src="https://brath.cloud/blogImg/image-20220507123111058.png" alt="image-20220507123111058"></p>
<p>​		在类中写入代码：</p>
<h5 id="要点notifylisteners-这个方法的作用就是实现局部刷新"><a class="markdownIt-Anchor" href="#要点notifylisteners-这个方法的作用就是实现局部刷新">#</a> 要点：notifyListeners () 这个方法的作用就是实现局部刷新</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CountProvider</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _count = <span class="number">0</span>; <span class="comment">//定义初始数量为0</span></span><br><span class="line">  <span class="keyword">get</span> count =&gt; _count; <span class="comment">//get方法用于外部获取count</span></span><br><span class="line">  <span class="keyword">void</span> add()&#123; <span class="comment">//增加方法</span></span><br><span class="line">    _count ++; <span class="comment">//总数+1</span></span><br><span class="line">    notifyListeners();<span class="comment">//通知监听方法</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-我们写一个新的类用于测试全局状态数据"><a class="markdownIt-Anchor" href="#3-我们写一个新的类用于测试全局状态数据">#</a> 3、我们写一个新的类用于测试全局状态数据</h5>
<p>​		要点：</p>
<p>​			1. 获取全局变量：</p>
<h5 id="通过provider的of方法泛型我们的全局状态类传入上下文对象就可以获取count"><a class="markdownIt-Anchor" href="#通过provider的of方法泛型我们的全局状态类传入上下文对象就可以获取count">#</a> 通过 Provider 的 of 方法（泛型我们的全局状态类）传入上下文对象，就可以获取 count</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Provider.of&lt;CountProvider&gt;(context).count.toString()</span><br></pre></td></tr></table></figure>
<p>​			2. 修改全局变量：</p>
<h5 id="通过上下文对象的read方法泛型我们的全局状态类就可以获取状态类中的方法来操作"><a class="markdownIt-Anchor" href="#通过上下文对象的read方法泛型我们的全局状态类就可以获取状态类中的方法来操作">#</a> 通过上下文对象的 read 方法（泛型我们的全局状态类），就可以获取状态类中的方法，来操作</h5>
<h6 id="tips不是从当前页使用方法修改全局变量而是全局变量提供了方法供外部修改"><a class="markdownIt-Anchor" href="#tips不是从当前页使用方法修改全局变量而是全局变量提供了方法供外部修改">#</a> Tips：不是从当前页使用方法修改全局变量，而是全局变量提供了方法供外部修改！</h6>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">context.read&lt;CountProvider&gt;().add();</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;ProviderDemo&gt; createState() =&gt; _ProviderDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ProviderDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ProviderDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider全局状态管理&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">          onPressed: ()&#123;</span><br><span class="line">            Navigator.of(context).pushNamed(<span class="string">&quot;ProviderDemo2&quot;</span>); <span class="comment">//点击跳转到ProviderDemo2页面</span></span><br><span class="line">          &#125;, </span><br><span class="line">          child: Icon(Icons.add_task_rounded)),</span><br><span class="line">          Text(</span><br><span class="line">          Provider.of&lt;CountProvider&gt;(context).count.toString() <span class="comment">//通过Provider展示count数据</span></span><br><span class="line">        )</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">      floatingActionButton: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet"> *</span> 第二个页面</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"> <span class="emphasis">*/</span></span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProviderDemo2</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">     <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;Provider2&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">     body: FloatingActionButton(</span><br><span class="line">        child: Icon(Icons.sanitizer_sharp),</span><br><span class="line">        onPressed: ()&#123;</span><br><span class="line">          context.read&lt;CountProvider&gt;().add(); <span class="comment">//通过上下文对象获取add方法实现新增</span></span><br><span class="line">        &#125;,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4、在 main.dart 中修改启动方式</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">  runApp(</span><br><span class="line">      <span class="comment">//只用 ChangeNotifierProvider 来包裹就只可以调用一个全局类</span></span><br><span class="line">      <span class="comment">// ChangeNotifierProvider(</span></span><br><span class="line">      <span class="comment">//   create: (context)=&gt;CountProvider(),</span></span><br><span class="line">      <span class="comment">//   child: MyApp(),</span></span><br><span class="line">      <span class="comment">//   ),</span></span><br><span class="line">      <span class="comment">//使用 MultiProvider 多状态管理来包裹，即可实现多个状态类</span></span><br><span class="line">      MultiProvider(</span><br><span class="line">          providers: [</span><br><span class="line">            ChangeNotifierProvider(</span><br><span class="line">            create: (context) =&gt; CountProvider(),</span><br><span class="line">          ), </span><br><span class="line">          <span class="comment">//   ChangeNotifierProvider(</span></span><br><span class="line">          <span class="comment">//   create: (context) =&gt; CountProvider2(),</span></span><br><span class="line">          <span class="comment">// ), </span></span><br><span class="line">          ],</span><br><span class="line">    child: MyApp(),</span><br><span class="line">  ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="flutter的网络请求dio"><a class="markdownIt-Anchor" href="#flutter的网络请求dio">#</a> Flutter 的网络请求（DIO）</h2>
<h5 id="flutter在-pubdev-为我们提供了许多网络请求组件我们选择用dio来做请求组件"><a class="markdownIt-Anchor" href="#flutter在-pubdev-为我们提供了许多网络请求组件我们选择用dio来做请求组件">#</a> Flutter 在 pub.dev 为我们提供了许多网络请求组件，我们选择用 DIO 来做请求组件</h5>
<p>使用方法：</p>
<h5 id="1-因为网络请求是单独的插件所以我们第一步一定是导包"><a class="markdownIt-Anchor" href="#1-因为网络请求是单独的插件所以我们第一步一定是导包">#</a> 1、因为网络请求是单独的插件，所以我们第一步一定是导包</h5>
<p>选择根目录下的 pubspec.yaml 依赖配置文件</p>
<p>以作者 Brath 的 flutter 版本 2.0 为例，使用 4.0.0 版本<img src="https://brath.cloud/blogImg/image-20220507124040380.png" alt="image-20220507124040380"></p>
<h5 id="2-编写代码"><a class="markdownIt-Anchor" href="#2-编写代码">#</a> 2、编写代码：</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DioDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;DioDemo&gt; createState() =&gt; _DioDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DioDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DioDemo</span>&gt; </span>&#123;</span><br><span class="line">  Dio _dio = Dio(); <span class="comment">//定义DIO</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> implement initState</span></span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">//初始化baseUrl基URL</span></span><br><span class="line">    _dio.options.baseUrl = <span class="string">&quot;https://www.XXX.XXX:0000/&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;网络请求演示&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: _<span class="keyword">get</span>,</span><br><span class="line">            child: Text(<span class="string">&quot;getUserinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ]</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> _<span class="keyword">get</span>() <span class="keyword">async</span>&#123;</span><br><span class="line">    <span class="comment">//第一种传参方式：名文传输</span></span><br><span class="line">    <span class="comment">// var res = await _dio.get(&quot;get/getData?id=1&quot;);</span></span><br><span class="line">    <span class="comment">// print(res.toString()); </span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//第二种传参方式：queryParameters包装传输</span></span><br><span class="line">    <span class="keyword">var</span> res2 = <span class="keyword">await</span> _dio.<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;get/getData&quot;</span>,</span><br><span class="line">      queryParameters: &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">//通过Options来添加 headers 请求头</span></span><br><span class="line">      options: Options(</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">&quot;token&quot;</span>: <span class="string">&quot;header-Token&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      )</span><br><span class="line">    );</span><br><span class="line">    <span class="built_in">print</span>(res2.toString()); </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-如果小伙伴们的请求报错有以下原因-参考博客httpsblogcsdnnettxaz6articledetails119168489"><a class="markdownIt-Anchor" href="#3-如果小伙伴们的请求报错有以下原因-参考博客httpsblogcsdnnettxaz6articledetails119168489">#</a> 3、如果小伙伴们的请求报错：有以下原因 （参考博客：<a target="_blank" rel="noopener" href="https://blog.csdn.net/txaz6/article/details/119168489%EF%BC%89">https://blog.csdn.net/txaz6/article/details/119168489）</a></h5>
<h5 id="1请求本地连接ip地址错误"><a class="markdownIt-Anchor" href="#1请求本地连接ip地址错误">#</a> 1. 请求本地连接，ip 地址错误</h5>
<h5 id="2未添加网络请求权限"><a class="markdownIt-Anchor" href="#2未添加网络请求权限">#</a> 2. 未添加网络请求权限</h5>
<h5 id="3请求的地址是http不是https"><a class="markdownIt-Anchor" href="#3请求的地址是http不是https">#</a> 3. 请求的地址是 http，不是 https</h5>
<h5 id="4与服务端的请求参数不同导致无法请求到接口"><a class="markdownIt-Anchor" href="#4与服务端的请求参数不同导致无法请求到接口">#</a> 4. 与服务端的请求参数不同，导致无法请求到接口</h5>
<h3 id=""><a class="markdownIt-Anchor" href="#">#</a> </h3>
<h2 id="flutter的设计模式mvvmmodel-view-viewmodel"><a class="markdownIt-Anchor" href="#flutter的设计模式mvvmmodel-view-viewmodel">#</a> Flutter 的设计模式（MVVM）（Model View ViewModel）</h2>
<h4 id="mvvm就是model-view-viewmodel的简写"><a class="markdownIt-Anchor" href="#mvvm就是model-view-viewmodel的简写">#</a> MVVM 就是 Model View ViewModel 的简写。</h4>
<h5 id="model-处理接口请求数据"><a class="markdownIt-Anchor" href="#model-处理接口请求数据">#</a> Model ：处理接口请求数据</h5>
<h5 id="view-展示页面"><a class="markdownIt-Anchor" href="#view-展示页面">#</a> View ：展示页面</h5>
<h5 id="viewmodel处理业务逻辑相当于model-view的链接层"><a class="markdownIt-Anchor" href="#viewmodel处理业务逻辑相当于model-view的链接层">#</a> ViewModel：处理业务逻辑（相当于 Model、View 的链接层）</h5>
<h6 id="简单流程view通知viewmodel层viewmodel通知model层调用接口viewmodel层接收model的数据响应给view层展示"><a class="markdownIt-Anchor" href="#简单流程view通知viewmodel层viewmodel通知model层调用接口viewmodel层接收model的数据响应给view层展示">#</a> 简单流程：view 通知 viewModel 层，viewModel 通知 Model 层调用接口，viewModel 层接收 Model 的数据，响应给 view 层展示</h6>
<h4 id="我们通过几个步骤来演示-mvvm-模式的请求流程以及他的优缺点"><a class="markdownIt-Anchor" href="#我们通过几个步骤来演示-mvvm-模式的请求流程以及他的优缺点">#</a> 我们通过几个步骤来演示 MVVM 模式的请求流程，以及他的优缺点</h4>
<h5 id="1-首先创建-model-view-viewmodel-三个文件夹image-20220507133147052"><a class="markdownIt-Anchor" href="#1-首先创建-model-view-viewmodel-三个文件夹image-20220507133147052">#</a> 1、首先创建   Model View ViewModel 三个文件夹<img src="https://brath.cloud/blogImg/image-20220507133147052.png" alt="image-20220507133147052"></h5>
<h5 id="2-编写-model-层-请求数据"><a class="markdownIt-Anchor" href="#2-编写-model-层-请求数据">#</a> 2、编写 Model 层 （请求数据）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmModel</span></span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment"><span class="language-markdown">/**</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="bullet">     *</span> 获取用户信息方法</span></span></span><br><span class="line"><span class="language-markdown"><span class="comment"><span class="code">     */</span></span></span></span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;开始调用userinfo接口&quot;</span>);</span><br><span class="line">    <span class="keyword">var</span> res = <span class="keyword">await</span> Dio().<span class="keyword">get</span>(</span><br><span class="line">      <span class="string">&quot;https://xxx:0000/gerUserInfo&quot;</span>,</span><br><span class="line">      queryParameters: &#123; <span class="comment">//设置请求参数</span></span><br><span class="line">        <span class="string">&quot;userId&quot;</span>: id <span class="comment">//id = viewModel传来的ID</span></span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">     <span class="built_in">print</span>(<span class="string">&quot;调用完毕&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span> res;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="3-编写-view-层-接收-展示数据"><a class="markdownIt-Anchor" href="#3-编写-view-层-接收-展示数据">#</a> 3、编写 View 层 （接收、展示数据）</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewDemo</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;MvvmViewDemo&gt; createState() =&gt; _MvvmViewDemoState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MvvmViewDemoState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MvvmViewDemo</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">dynamic</span> res;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">&quot;View展示页面&quot;</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        children: [</span><br><span class="line">          ElevatedButton(</span><br><span class="line">            onPressed: () <span class="keyword">async</span> &#123;</span><br><span class="line">             <span class="comment">//使用上下文对象的read泛型 ViewModel 类来使用get方法传入 id 获取信息</span></span><br><span class="line">             context.read&lt;MvvmViewModel&gt;().<span class="keyword">get</span>(<span class="number">1</span>);</span><br><span class="line">            &#125;,</span><br><span class="line">            child: Text(<span class="string">&quot;调用ViewwModel获取用户userinfo&quot;</span>)</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="4-编写-viewmodel-层-整合view以及modelview调用viewmodel-viewmodel-调用-model-返回结果给view"><a class="markdownIt-Anchor" href="#4-编写-viewmodel-层-整合view以及modelview调用viewmodel-viewmodel-调用-model-返回结果给view">#</a> 4、编写 ViewModel 层 （整合 view 以及 model：view 调用 ViewModel ，ViewModel 调用 model 返回结果给 view）</h5>
<p>tips：在调用完接口后跳转时，因为 Navigator 需要一个上下文对象，但是我们当前没有上下文对象，所以要在 main 入口定义一个对象：</p>
<p>main.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> GlobalKey&lt;NavigatorState&gt; navigatorkey = GlobalKey&lt;NavigatorState&gt;();</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      navigatorKey: navigatorkey, <span class="comment">//在 MaterialApp 中 将 navigatorKey 设置为我们定义的navigatorkey，这也是为什么flutter要求使用 MaterialApp 作为mian根节点的原因</span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>MvvmViewModel.dart👇</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MvvmViewModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span></span>&#123;</span><br><span class="line"> MvvmModel _model = MvvmModel(); <span class="comment">//实例化 model 的对象，因为model是做请求的所以我们调用model</span></span><br><span class="line">  <span class="keyword">void</span> <span class="keyword">get</span>(<span class="built_in">int</span> id) <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="comment">//使用model的get方法传入id来获取数据，注意使用 async 和 await 来做异步调用防止接口错误导致程序等待超时</span></span><br><span class="line">    Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line">    <span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line">    <span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line">    <span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line">    <span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br><span class="line">    <span class="comment">//使用mian中的 navigatorkey 的 currentContext 来获取当前的上下文对象，如果是dart2.0以后需要加一个 ！否则会报错，因为参数必须不能为空</span></span><br><span class="line">    Navigator.of(navigatorkey.currentContext!).pushNamed(<span class="string">&quot;DioDemo&quot;</span>); <span class="comment">//我们在调用完接口后跳转到 DioDemo页面</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="5-dio返回值-response-介绍"><a class="markdownIt-Anchor" href="#5-dio返回值-response-介绍">#</a> 5、DIO 返回值 <strong>Response</strong> 介绍</h5>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Response res = <span class="keyword">await</span> _model.<span class="keyword">get</span>(id); </span><br><span class="line"><span class="built_in">print</span>(res.data); <span class="comment">//获取 Response 的数据</span></span><br><span class="line"><span class="built_in">print</span>(res.headers); <span class="comment">//获取 Response 的请求头</span></span><br><span class="line"><span class="built_in">print</span>(res.statusCode); <span class="comment">//获取 Response 的状态码</span></span><br><span class="line"><span class="built_in">print</span>(res.realUri);     <span class="comment">//获取 Response 的请求地址</span></span><br></pre></td></tr></table></figure>
<p>本篇至此就结束啦！如果你读到了这里，不妨给我点个赞，我叫 Brath，是一个非科班出身的技术狂！</p>
<p>我的博客 brath.top 欢迎访问！</p>
<p>全文共计  15332 词</p>
<p>本文由 Brath 编写，禁止转载，违法必究‘！</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.158Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.590Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">5 分钟读完 (大约750个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/">【Flutter】Flutter生命周期</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h3 id="flutterflutter生命周期"><a class="markdownIt-Anchor" href="#flutterflutter生命周期">#</a> 【Flutter】Flutter 生命周期</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/cf191df81ef144b9bca93e0a385bdd8d.png" alt="img"></p>
<h2 id="一-生命周期阶段"><a class="markdownIt-Anchor" href="#一-生命周期阶段">#</a> 一、<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F&amp;spm=1001.2101.3001.7020">生命周期</a>阶段</h2>
<p>​    <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=flutter&amp;spm=1001.2101.3001.7020">flutter</a> 生命周期大体上可以分为三个阶段：初始化、状态变化、销毁。</p>
<h3 id="1-初始化阶段"><a class="markdownIt-Anchor" href="#1-初始化阶段">#</a> 1、初始化阶段</h3>
<p>对应执行构造方法和 initState 时候</p>
<h3 id="2-状态变化阶段"><a class="markdownIt-Anchor" href="#2-状态变化阶段">#</a> 2、状态变化阶段</h3>
<p>开新的 widget 或者调用<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=setState&amp;spm=1001.2101.3001.7020"> setState</a> 方法的时候</p>
<h3 id="3-销毁阶段"><a class="markdownIt-Anchor" href="#3-销毁阶段">#</a> 3、销毁阶段</h3>
<p>deactivate 和 dispose</p>
<h2 id="二-生命周期阶段执行的函数"><a class="markdownIt-Anchor" href="#二-生命周期阶段执行的函数">#</a> 二、生命周期阶段执行的函数</h2>
<h3 id="1-initstate"><a class="markdownIt-Anchor" href="#1-initstate">#</a> 1、initState</h3>
<p>调用次数：1 次</p>
<p>插入渲染树时调用，只调用一次，widget 创建执行的第一个方法，这里可以做一些初始化工作，比如初始化 State 的变量。</p>
<h3 id="2-didchangedependencies"><a class="markdownIt-Anchor" href="#2-didchangedependencies">#</a> 2、didChangeDependencies</h3>
<p>调用次数：多次</p>
<ul>
<li>初始化时，在 initState () 之后立刻调用</li>
<li>当依赖的 InheritedWidget rebuild, 会触发此接口被调用</li>
<li>实测在组件可见状态变化的时候会调用</li>
</ul>
<h3 id="3-build"><a class="markdownIt-Anchor" href="#3-build">#</a> 3、build</h3>
<p>调用次数：多次</p>
<ul>
<li>初始化之后开始绘制界面</li>
<li>setState 触发的时候会</li>
</ul>
<h3 id="4-didupdatewidget"><a class="markdownIt-Anchor" href="#4-didupdatewidget">#</a> 4、didUpdateWidget</h3>
<p>调用次数：多次</p>
<p>组件状态改变时候调用</p>
<h3 id="5-deactivate"><a class="markdownIt-Anchor" href="#5-deactivate">#</a> 5、deactivate</h3>
<p>当 State 对象从树中被移除时，会调用此回调，会在 dispose 之前调用。</p>
<p>页面销毁的时候会依次执行：deactivate &gt; dispose</p>
<h3 id="6-dispose"><a class="markdownIt-Anchor" href="#6-dispose">#</a> 6、dispose</h3>
<p>调用次数：1 次</p>
<p>当 State 对象从树中被永久移除时调用；通常在此回调中释放资源。</p>
<h3 id="7-reassemble"><a class="markdownIt-Anchor" href="#7-reassemble">#</a> 7、reassemble</h3>
<p>在热重载 (hot reload) 时会被调用，此回调在 Release 模式下永远不会被调用</p>
<h2 id="三-app生命周期"><a class="markdownIt-Anchor" href="#三-app生命周期">#</a> 三、App 生命周期</h2>
<p>​    通过 WidgetsBindingObserver 的 didChangeAppLifecycleState 来获取。通过该接口可以获取是生命周期在 AppLifecycleState 类中。</p>
<h3 id="1-resumed"><a class="markdownIt-Anchor" href="#1-resumed">#</a> 1、resumed</h3>
<p>可见并能响应用户的输入，同安卓的 onResume</p>
<h3 id="2-inactive"><a class="markdownIt-Anchor" href="#2-inactive">#</a> 2、inactive</h3>
<p>处在并不活动状态，无法处理用户响应，同安卓的 onPause</p>
<h3 id="3-paused"><a class="markdownIt-Anchor" href="#3-paused">#</a> 3、paused</h3>
<p>不可见并不能响应用户的输入，但是在后台继续活动中，同安卓的 onStop</p>
<p><strong>下面是生命周期：</strong></p>
<ol>
<li>初次打开 widget 时，不执行 AppLifecycleState 的回调；</li>
<li>按 home 键或 Power 键， AppLifecycleState inactive----&gt;AppLifecycleState pause</li>
<li>从后台到前台：AppLifecycleState inactive—&gt;ApplifecycleState resumed</li>
<li>back 键退出应用： AppLifecycleState inactive—&gt;AppLifecycleState paused</li>
</ol>
<p>参考文章：<a target="_blank" rel="noopener" href="https://www.jianshu.com/p/00ff0c2b8336">https://www.jianshu.com/p/00ff0c2b8336</a></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.155Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.568Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">2 分钟读完 (大约306个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%E5%BC%80%E5%8F%91%E4%B8%AD%E4%BD%BF%E7%94%A8WIFI%E7%9C%9F%E6%9C%BA%E8%B0%83%E8%AF%95/">Flutter开发中使用WIFI真机调试</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutter开发中使用wifi真机调试"><a class="markdownIt-Anchor" href="#flutter开发中使用wifi真机调试">#</a> Flutter 开发中使用 WIFI 真机调试</h1>
<h4 id="使用vscode开发flutter用wifi-或者-手机热点进行-无线调试过程"><a class="markdownIt-Anchor" href="#使用vscode开发flutter用wifi-或者-手机热点进行-无线调试过程">#</a> 使用 vscode 开发 flutter，用 wifi 或者 手机热点进行 无线调试过程</h4>
<h4 id="1手机连接wifi后在设置中找到ip和端口"><a class="markdownIt-Anchor" href="#1手机连接wifi后在设置中找到ip和端口">#</a> 1. 手机连接 wifi 后在设置中找到 ip 和端口</h4>
<h4 id="2在vscode终端输入-adb-connect-手机ip手机端口"><a class="markdownIt-Anchor" href="#2在vscode终端输入-adb-connect-手机ip手机端口">#</a> 2. 在 vscode 终端输入 adb connect 手机 IP: 手机端口</h4>
<h4 id="3作者在csdn这个烂环境中没找到有用的信息全是粘贴的所以希望这篇文章帮助到你你可以把我的地址列出来粘贴可以抄袭可耻"><a class="markdownIt-Anchor" href="#3作者在csdn这个烂环境中没找到有用的信息全是粘贴的所以希望这篇文章帮助到你你可以把我的地址列出来粘贴可以抄袭可耻">#</a> 3. 作者在 CSDN 这个烂环境中没找到有用的信息，全是粘贴的，所以希望这篇文章帮助到你，你可以把我的地址列出来，粘贴可以，抄袭可耻！</h4>
<h4 id="4完成以上步骤手机端应有开启无线调试的提示记得提前打开开发者模式"><a class="markdownIt-Anchor" href="#4完成以上步骤手机端应有开启无线调试的提示记得提前打开开发者模式">#</a> 4. 完成以上步骤，手机端应有开启无线调试的提示，记得提前打开开发者模式。</h4>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.151Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.601Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">12 分钟读完 (大约1778个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%E9%9B%86%E6%88%90%E4%B8%AD%E5%9B%BD%E7%A7%BB%E5%8A%A8%E4%B8%80%E9%94%AE%E7%99%BB%E5%BD%95%E4%B8%9A%E5%8A%A1%EF%BC%8C%E4%BA%B2%E6%B5%8B%E5%8F%AF%E8%A1%8C/">Flutter集成中国移动一键登录业务，亲测可行</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutter集成中国移动一键登录业务"><a class="markdownIt-Anchor" href="#flutter集成中国移动一键登录业务">#</a> Flutter 集成中国移动一键登录业务</h1>
<p>#本文适用于 Flutter 平台开发的小伙伴需要所谓一键登录的业务</p>
<p><img src="https://img.mukewang.com/szimg/5e3fda1b28fe88e205001000.jpg" alt="https://img.mukewang.com/szimg/5e3fda1b08fe88e203600780.jpg"></p>
<p>先贴上链接</p>
<p>中国移动互联网能力开放平台：<a target="_blank" rel="noopener" href="https://dev.10086.cn">https://dev.10086.cn</a></p>
<p>号码认证 Android_5.9.5 接入文档：<a target="_blank" rel="noopener" href="http://dev.10086.cn/dev10086/pub/loadAttach?attachId=9324E5A5EB8E4DF5BC5118221A93D3ED">http://dev.10086.cn/dev10086/pub/loadAttach?attachId=9324E5A5EB8E4DF5BC5118221A93D3ED</a></p>
<p>移动认证服务端接入文档：<a target="_blank" rel="noopener" href="https://dev.10086.cn/dev10086/pub/loadAttach?attachId=6EF75FD09D4F40D1973CB7C36C3DB2E2">https://dev.10086.cn/dev10086/pub/loadAttach?attachId=6EF75FD09D4F40D1973CB7C36C3DB2E2</a></p>
<p>话不多说，直接上正题，本文比某 SDN 的质量高不知道多少倍呢。</p>
<h3 id="1准备工作"><a class="markdownIt-Anchor" href="#1准备工作">#</a> 1. 准备工作</h3>
<h4 id="11注册账号并创建一个应用"><a class="markdownIt-Anchor" href="#11注册账号并创建一个应用">#</a> 1.1 注册账号并创建一个应用</h4>
<p>​	<img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112193829020.png" alt="image-20230112193829020"></p>
<h4 id="12-下载好统一认证sdk这里使用的版本是-quick_login_android_595jar"><a class="markdownIt-Anchor" href="#12-下载好统一认证sdk这里使用的版本是-quick_login_android_595jar">#</a> 1.2 下载好统一认证 SDK，这里使用的版本是 quick_login_android_5.9.5.jar</h4>
<p>请求我的服务器下载：<a target="_blank" rel="noopener" href="http://43.143.40.221:8080/quick_login_android_5.9.5.rar">http://43.143.40.221:8080/quick_login_android_5.9.5.rar</a><br>
 下载好后解压</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194426269.png" alt="image-20230112194426269"></p>
<h4 id="13-在移动开发平台申请好应用拿到appid-appkey"><a class="markdownIt-Anchor" href="#13-在移动开发平台申请好应用拿到appid-appkey">#</a> 1.3 在移动开发平台申请好应用拿到 appid、appkey</h4>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112193937792.png" alt="image-20230112193937792"></p>
<h3 id="2开始接入"><a class="markdownIt-Anchor" href="#2开始接入">#</a> 2. 开始接入</h3>
<h4 id="21-使用as打开你的项目新建lib文件夹导入quick_login_android_595jar-右键aslibirary导入库"><a class="markdownIt-Anchor" href="#21-使用as打开你的项目新建lib文件夹导入quick_login_android_595jar-右键aslibirary导入库">#</a> 2.1 使用 AS 打开你的项目，新建 lib 文件夹，导入 quick_login_android_5.9.5.jar ，右键 asLibirary，导入库</h4>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194530336.png" alt="image-20230112194530336"></p>
<p>打开项目视图</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194611295.png" alt="image-20230112194611295"></p>
<p>点击 APP 栏位，出现 quick_login_android_5.9.5.jar 即可</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194628573.png" alt="image-20230112194628573"></p>
<h4 id="22-在app级别下的-buildgradle-中的-dependencies-栏位导入依赖使用相对路径引入即可"><a class="markdownIt-Anchor" href="#22-在app级别下的-buildgradle-中的-dependencies-栏位导入依赖使用相对路径引入即可">#</a> 2.2 在 app 级别下的 build.gradle 中的 dependencies 栏位导入依赖，使用相对路径引入即可</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    ···</span><br><span class="line">    implementation files(&#x27;..\\lib\\quick_login_android_5.9.5.jar&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194743574.png" alt="image-20230112194743574"></p>
<h4 id="23-打开-androidmanifestxml-在application引入-androidnetworksecurityconfigxmlnetwork_security_config"><a class="markdownIt-Anchor" href="#23-打开-androidmanifestxml-在application引入-androidnetworksecurityconfigxmlnetwork_security_config">#</a> 2.3 打开 AndroidManifest.xml 在 application 引入 android:networkSecurityConfig=&quot;@xml/network_security_config&quot;</h4>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194847830.png" alt="image-20230112194847830"></p>
<p>同时，在 res 目录下新建一个 xml 目录</p>
<p>新建 network_security_config.xml 文件 引入以下代码</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;utf-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">network-security-config</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">base-config</span> <span class="attr">cleartextTrafficPermitted</span>=<span class="string">&quot;true&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">network-security-config</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195214620.png" alt="image-20230112195214620"></p>
<p>下一步、将 SDK 集成的 GenLoginAuthActivity 引入主文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:name</span>=<span class="string">&quot;com.cmic.gen.sdk.view.GenLoginAuthActivity&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:configChanges</span>=<span class="string">&quot;orientation|keyboardHidden|screenSize&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:screenOrientation</span>=<span class="string">&quot;unspecified&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:theme</span>=<span class="string">&quot;@style/AuthPage&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">android:launchMode</span>=<span class="string">&quot;singleTop&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195050430.png" alt="image-20230112195050430"></p>
<p>同时，在 res 目录下的两个 values 文件中的 styles.xml 中引入代码：（两个都需要引入）</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">name</span>=<span class="string">&quot;AuthPage&quot;</span> <span class="attr">parent</span>=<span class="string">&quot;@android:style/Theme.Holo.Light.NoActionBar&quot;</span>&gt;</span><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:background&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:colorBackground&quot;</span>&gt;</span>@null<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">&quot;android:windowIsTranslucent&quot;</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112194947904.png" alt="image-20230112194947904"></p>
<p>下一步、引入权限代码：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.INTERNET&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_WIFI_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.ACCESS_NETWORK_STATE&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">uses-permission</span> <span class="attr">android:name</span>=<span class="string">&quot;android.permission.CHANGE_NETWORK_STATE&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195305682.png" alt="image-20230112195305682"></p>
<p>至此、主文件配置完成！</p>
<h4 id="24-将上面压缩包文件中sdk提供的demo程序中的res-umc文件目录引入到我们的main目录中与res同级"><a class="markdownIt-Anchor" href="#24-将上面压缩包文件中sdk提供的demo程序中的res-umc文件目录引入到我们的main目录中与res同级">#</a> 2.4 将上面压缩包文件中 SDK 提供的 Demo 程序中的 res-umc 文件目录引入到我们的 main 目录中，与 res 同级</h4>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195514010.png" alt="image-20230112195514010"></p>
<p>将 res-umc 目录下的文件复制进入 res</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195543408.png" alt="image-20230112195543408"></p>
<p>最终效果：</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195605424.png" alt="image-20230112195605424"></p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112195619339.png" alt="image-20230112195619339"></p>
<h4 id="25-打开-kotlin-下的-mainactivitykt-将代码全部复制进入如果导不到包可以看看你的jar包有没有成功引入"><a class="markdownIt-Anchor" href="#25-打开-kotlin-下的-mainactivitykt-将代码全部复制进入如果导不到包可以看看你的jar包有没有成功引入">#</a> 2.5 打开 kotlin 下的 MainActivity.kt ，将代码全部复制进入，如果导不到包可以看看你的 Jar 包有没有成功引入</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">package com.example.mobiledemo</span><br><span class="line"></span><br><span class="line">import android.os.Bundle</span><br><span class="line">import android.widget.Toast</span><br><span class="line">import com.cmic.gen.sdk.auth.GenAuthnHelper</span><br><span class="line">import com.cmic.gen.sdk.auth.GenTokenListener</span><br><span class="line">import com.cmic.gen.sdk.view.GenAuthThemeConfig</span><br><span class="line">import io.flutter.Log</span><br><span class="line">import io.flutter.embedding.android.FlutterActivity</span><br><span class="line">import io.flutter.plugin.common.MethodChannel</span><br><span class="line">import io.flutter.plugins.GeneratedPluginRegistrant</span><br><span class="line">import org.json.JSONObject</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class MainActivity : FlutterActivity() &#123;</span><br><span class="line">    private var mHelper: GenAuthnHelper? = null</span><br><span class="line">    override fun onCreate(savedInstanceState: Bundle?) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState)</span><br><span class="line">        MethodChannel(</span><br><span class="line">            getFlutterEngine()?.getDartExecutor()?.getBinaryMessenger(),</span><br><span class="line">            &quot;TYRZ&quot;</span><br><span class="line">        ).setMethodCallHandler &#123; methodCall, result -&gt;</span><br><span class="line">            if (methodCall.method == &quot;loginAuth&quot;) &#123;</span><br><span class="line">                loginAuth(result)</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                Log.e(&quot;TYRZ&quot;, &quot;notImplemented&quot;)</span><br><span class="line">                result.notImplemented()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //创建AuthnHelper实例</span><br><span class="line">        mHelper = GenAuthnHelper.getInstance(this)</span><br><span class="line">        //打开SDK日志打印开关</span><br><span class="line">        GenAuthnHelper.setDebugMode(true)</span><br><span class="line">        //初始化授权页主题</span><br><span class="line">        mHelper?.setAuthThemeConfig(GenAuthThemeConfig.Builder().build())</span><br><span class="line">        getFlutterEngine()?.let &#123; GeneratedPluginRegistrant.registerWith(it) &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * 统一认证SDK授权方法调用</span><br><span class="line">     */</span><br><span class="line">    private fun loginAuth(result: MethodChannel.Result) &#123;</span><br><span class="line">        //调用授权方法，这里要填写的appid、appkey为开发者在移动开发平台申请的appid、appkey</span><br><span class="line">        mHelper?.loginAuth(</span><br><span class="line">            &quot;300012327504&quot;,</span><br><span class="line">            &quot;2FDF3FA644E7476FE6733E123D968A82&quot;,</span><br><span class="line">            object : GenTokenListener &#123;</span><br><span class="line">                override fun onGetTokenComplete(i: Int, jsonObject: JSONObject) &#123;</span><br><span class="line">                    try &#123;</span><br><span class="line">                        val resultCode = jsonObject.optString(&quot;resultCode&quot;, &quot;没有返回码！&quot;)</span><br><span class="line">                        Toast.makeText(this@MainActivity, resultCode, Toast.LENGTH_SHORT).show()</span><br><span class="line">                        //将结果回传给flutter</span><br><span class="line">                        result.success(resultCode)</span><br><span class="line">                    &#125; catch (e: Exception) &#123;</span><br><span class="line">                        e.printStackTrace()</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="3运行调试"><a class="markdownIt-Anchor" href="#3运行调试">#</a> 3. 运行调试</h3>
<p>3.1 demo 代码如下：</p>
<p>核心逻辑：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//调用方法通道 TYRZ，即我们在MainActivity中注册的方法，调用loginAuth登录方法</span><br><span class="line">String result = await const MethodChannel(&quot;TYRZ&quot;).invokeMethod(&quot;loginAuth&quot;);</span><br></pre></td></tr></table></figure>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/services.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(MyApp());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      title: <span class="string">&#x27;Flutter Demo&#x27;</span>,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">      ),</span><br><span class="line">      home: MyHomePage(title: <span class="string">&#x27;Flutter Demo Home Page&#x27;</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyHomePage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  MyHomePage(&#123;Key? key, <span class="keyword">this</span>.title&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String?</span> title;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _MyHomePageState createState() =&gt; _MyHomePageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyHomePageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyHomePage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">//调用java方法</span></span><br><span class="line">  <span class="keyword">void</span> loginAuth() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;按钮点击！&quot;</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="built_in">String</span> result = <span class="keyword">await</span> <span class="keyword">const</span> MethodChannel(<span class="string">&quot;TYRZ&quot;</span>).invokeMethod(<span class="string">&quot;loginAuth&quot;</span>);</span><br><span class="line">      <span class="comment">//打印统一认证回调的响应码</span></span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;resultCode = &quot;</span> + result);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">      <span class="built_in">print</span>(e);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//创建一个按钮，在点击按钮时调用统一认证的loginAuth方法拉起授权页。</span></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(widget.title!),</span><br><span class="line">      ),</span><br><span class="line">      body: Center(</span><br><span class="line">        child: Column(</span><br><span class="line">          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">          children: &lt;Widget&gt;[</span><br><span class="line">            RaisedButton(</span><br><span class="line">              child: <span class="keyword">const</span> Text(<span class="string">&quot;一键登录&quot;</span>),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                loginAuth();</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="结果成功打印"><a class="markdownIt-Anchor" href="#结果成功打印">#</a> 结果：成功打印</h3>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230112200118488.png" alt="image-20230112200118488"></p>
<p>客户端部分就此结束。</p>
<h2 id="服务端接入认证并请求移动接口获取用户手机号"><a class="markdownIt-Anchor" href="#服务端接入认证并请求移动接口获取用户手机号">#</a> 服务端接入认证并请求移动接口获取用户手机号：</h2>
<p>贴上部分代码：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">String mobile;</span><br><span class="line">     HashMap&lt;String, String&gt; res = <span class="literal">null</span>;</span><br><span class="line">     Map&lt;Object, Object&gt; result = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">     <span class="keyword">try</span> &#123;</span><br><span class="line">         <span class="comment">//获取到结果</span></span><br><span class="line">         res = JSONObject.parseObject(post(CHINA_MOBILE_OBTAINS_MOBILE_PHONE_NUMBER, JSONObject.toJSONString(getMD5NoEncryPtionRequestParamMap(token))), HashMap.class);</span><br><span class="line">         <span class="comment">//结果集判断</span></span><br><span class="line">         <span class="keyword">if</span> (AssertUtil.isEmpty(res) || !res.containsKey(<span class="string">&quot;msisdn&quot;</span>)) &#123;</span><br><span class="line">             logger.error(<span class="string">&quot;一键登录异常：&#123;&#125;,&#123;&#125;&quot;</span>, res, ResponseCode.MOBILE_LOGIN_EXCEPTION.desc());<span class="comment">// 一键登录异常</span></span><br><span class="line">             result.put(ResponseCode.MOBILE_LOGIN_EXCEPTION.code(), ResponseCode.MOBILE_LOGIN_EXCEPTION.desc());</span><br><span class="line">             <span class="keyword">return</span> result;</span><br><span class="line">         &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">             <span class="comment">//获取到手机号</span></span><br><span class="line">             mobile = res.get(<span class="string">&quot;msisdn&quot;</span>);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">         logger.error(<span class="string">&quot;一键登录异常：&#123;&#125;,&#123;&#125;&quot;</span>, res, ResponseCode.MOBILE_LOGIN_EXCEPTION.desc());<span class="comment">// 一键登录异常</span></span><br><span class="line">         result.put(ResponseCode.MOBILE_LOGIN_EXCEPTION.code(), ResponseCode.MOBILE_LOGIN_EXCEPTION.desc());</span><br><span class="line">         <span class="keyword">return</span> result;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure>
<p>MD5 加密签名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Calculates the MD5 digest and returns the value as a 32 character hex string.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> data Data to digest</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span> MD5 digest as a hex string</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">md5Hex</span><span class="params">(String data)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> org.apache.commons.codec.digest.DigestUtils.md5Hex(data).toUpperCase();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>获取请求集合：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 获取MD5加密方式的无对称加密的请求集合</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@param</span> token</span></span><br><span class="line"><span class="comment">  * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"> <span class="keyword">private</span> HashMap&lt;String, String&gt; <span class="title function_">getMD5NoEncryPtionRequestParamMap</span><span class="params">(String token)</span> &#123;</span><br><span class="line">     HashMap&lt;String, String&gt; param = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">     <span class="type">String</span> <span class="variable">msgId</span> <span class="operator">=</span> UserUtil.createUUID();</span><br><span class="line">     <span class="type">String</span> <span class="variable">time</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyyMMddHHmmssSSS&quot;</span>).format(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">     param.put(<span class="string">&quot;version&quot;</span>, <span class="string">&quot;2.0&quot;</span>);</span><br><span class="line">     param.put(<span class="string">&quot;msgid&quot;</span>, msgId);</span><br><span class="line">     param.put(<span class="string">&quot;systemtime&quot;</span>, time);</span><br><span class="line">     param.put(<span class="string">&quot;strictcheck&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">     param.put(<span class="string">&quot;appid&quot;</span>, appId);</span><br><span class="line">     param.put(<span class="string">&quot;token&quot;</span>, token);</span><br><span class="line">     param.put(<span class="string">&quot;encryptionalgorithm&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">     param.put(<span class="string">&quot;sign&quot;</span>, md5Hex(appId + <span class="string">&quot;2.0&quot;</span> + msgId + time + <span class="string">&quot;0&quot;</span> + token + APPSecret));</span><br><span class="line">     <span class="keyword">return</span> param;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<p>post 请求方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">post</span><span class="params">(String URL, String json)</span> &#123;</span><br><span class="line">      <span class="type">HttpClient</span> <span class="variable">client</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DefaultHttpClient</span>();</span><br><span class="line">      <span class="type">HttpPost</span> <span class="variable">post</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HttpPost</span>(URL);</span><br><span class="line">      post.setHeader(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>);</span><br><span class="line">      <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">          <span class="type">StringEntity</span> <span class="variable">s</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringEntity</span>(json, <span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">          s.setContentEncoding(<span class="keyword">new</span> <span class="title class_">BasicHeader</span>(HTTP.CONTENT_TYPE,</span><br><span class="line">                  <span class="string">&quot;application/json&quot;</span>));</span><br><span class="line">          post.setEntity(s);</span><br><span class="line">          <span class="comment">// 发送请求</span></span><br><span class="line">          <span class="type">HttpResponse</span> <span class="variable">httpResponse</span> <span class="operator">=</span> client.execute(post);</span><br><span class="line">          <span class="comment">// 获取响应输入流</span></span><br><span class="line">          <span class="type">InputStream</span> <span class="variable">inStream</span> <span class="operator">=</span> httpResponse.getEntity().getContent();</span><br><span class="line">          <span class="type">BufferedReader</span> <span class="variable">reader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BufferedReader</span>(<span class="keyword">new</span> <span class="title class_">InputStreamReader</span>(</span><br><span class="line">                  inStream, <span class="string">&quot;utf-8&quot;</span>));</span><br><span class="line">          <span class="type">StringBuilder</span> <span class="variable">strber</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">          <span class="type">String</span> <span class="variable">line</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">          <span class="keyword">while</span> ((line = reader.readLine()) != <span class="literal">null</span>)</span><br><span class="line">              strber.append(line + <span class="string">&quot;\n&quot;</span>);</span><br><span class="line">          inStream.close();</span><br><span class="line">          result = strber.toString();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> result;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.148Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.563Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">12 分钟读完 (大约1839个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91flutter%E5%8F%91%E5%B1%95%E5%89%8D%E6%99%AF%E5%A6%82%E4%BD%95%EF%BC%9F/">【Flutter】flutter发展前景如何？</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p><img src="https://pic1.zhimg.com/80/v2-184c74e7aa102e484165122bb5cec4bd_720w.webp?source=1940ef5c" alt="img"></p>
<blockquote>
<p>在 <strong>Flutter</strong> 刚刚从 <strong>Google</strong> 刚刚推向 <strong>Android</strong> 市场的时候，我就开始对 <strong>Flutter</strong> 开始了<strong>学习之路</strong>；但由于当时 <strong>Flutter</strong> 许多东西<strong>尚未完善</strong>而没有推出<strong>稳定的版本</strong>，所以也就没有对其进行<strong>深入</strong>的学习，直到如今 <strong>Flutter</strong> 又<strong>重出江湖</strong>，在<strong>市场</strong>上也得到<strong>了蓬勃发展</strong>及许多业内<strong>大佬</strong>的<strong>力推</strong>，我便又再次<strong>入坑 Flutter</strong></p>
</blockquote>
<p><strong>实现 UI 和交互</strong>是<strong>高级开发者</strong>的<strong>必备技能</strong>，也是<strong>掌握 Flutter 开发</strong>的<strong>重点</strong>；同样 <strong>Flutter</strong> <strong>跨平台</strong>的<strong>特性</strong>是<strong>原生</strong>不能比拟的，更何况还有不弱的<strong>性能</strong>表现；而<strong>性能</strong>往往是由<strong>生命周期</strong>来决定的</p>
<h3 id="何为-flutter-的生命周期"><a class="markdownIt-Anchor" href="#何为-flutter-的生命周期">#</a> <strong>何为 Flutter 的生命周期？</strong></h3>
<p>如果你是一名<strong>开发</strong>人员，那么你一定不会对<strong>生命周期</strong>感到陌生；当你在学习 <strong>Flutter</strong> 的时候，<strong>Flutter 也有自己的生命周期</strong>，只有通过了解 <strong>Flutter</strong> 的<strong>生命周期</strong>，才能知道应该在哪里来写<strong>业务逻辑</strong></p>
<h3 id="flutter-生命周期"><a class="markdownIt-Anchor" href="#flutter-生命周期">#</a> <strong>Flutter 生命周期</strong></h3>
<p><img src="https://picx.zhimg.com/80/v2-6ae547ee1a88db89634eb9c6567146d8_720w.webp?source=1940ef5c" alt="img"></p>
<p>如上图所示，<strong>Flutter 生命周期</strong>大体上可以分为<strong>三个阶段：</strong> <strong>初始化、状态变化、销毁</strong>；下面依次说明各个阶段的工作</p>
<p><strong>初始化阶段</strong>（插入<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%B8%B2%E6%9F%93%E6%A0%91&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">渲染树</a>）</p>
<ul>
<li>对应执行构造方法和 initState</li>
</ul>
<p><strong>状态变化阶段</strong>（在渲染树中存在）</p>
<ul>
<li>开新的 widget 或者调用 setState 方法</li>
</ul>
<p><strong>销毁阶段</strong>（从渲染树种移除）</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=deactivate&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">deactivate</a> 和 dispose</li>
</ul>
<p>如果之前你对 <strong>Flutter</strong> 有一点点了解的话，你会发现 <strong>Flutter</strong> 中有<strong>两个</strong>主要的 <strong>Widget：</strong> <strong>StatelessWidget（无状态）</strong> 和 <strong>StatefulWidget（有状态）</strong></p>
<h3 id="statelesswidget"><a class="markdownIt-Anchor" href="#statelesswidget">#</a> <strong>StatelessWidget</strong></h3>
<ul>
<li><strong><a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%97%A0%E7%8A%B6%E6%80%81%E7%BB%84%E4%BB%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">无状态组件</a>] 是不可变的</strong>，这意味着它们的<strong>属性不能变化</strong>，所有的值都是最终的；可以理解为将<strong>外部传入的数据转化为界面展示的内容，只会渲染一次</strong></li>
<li><strong>对于无状态组件生命周期只有 build 这个过程</strong>；无状态组件的构建方法通常只在三种情况下会被调用：<strong>小组件第一次被插入树中，小组件的父组件改变其配置，以及它所依赖的 InheritedWidget 发生变化时</strong></li>
</ul>
<h3 id="statefulwidget"><a class="markdownIt-Anchor" href="#statefulwidget">#</a> <strong>StatefulWidget</strong></h3>
<ul>
<li>有状态组件持有的状态可能在 Widget 生命周期中发生变化，是定义<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E4%BA%A4%E4%BA%92%E9%80%BB%E8%BE%91&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">交互逻辑</a>和业务逻辑；可以理解为具有动态可交互的内容界面，会根据数据的变化进行多次渲染</li>
</ul>
<h3 id="实现一个-statefulwidget-至少需要两个类"><a class="markdownIt-Anchor" href="#实现一个-statefulwidget-至少需要两个类">#</a> <strong>实现一个 StatefulWidget 至少需要两个类：</strong></h3>
<p><strong>一个是 StatefulWidget 类</strong> <strong>另一个是 Sate 类</strong></p>
<ul>
<li><strong>StatefulWidget 类本身是不可变的</strong>，但是 <strong>State 类</strong>在 <strong>Widget 生命周期中始终存在</strong></li>
<li><strong>StatefulWidget</strong> 将其<strong>可变</strong>的<strong>状态存储</strong>在由 <strong>createState</strong> 方法创建的 <strong>State</strong> 对象中，或者存储在该 <strong>State 订阅</strong>的对象中</li>
</ul>
<h3 id="fultter-的优势在哪里"><a class="markdownIt-Anchor" href="#fultter-的优势在哪里">#</a> <strong>Fultter 的优势在哪里？</strong></h3>
<h3 id="快速开发和迭代"><a class="markdownIt-Anchor" href="#快速开发和迭代">#</a> <strong>快速开发和迭代</strong></h3>
<p><strong>Flutter 自身具有热修复（<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E7%83%AD%E9%87%8D%E8%BD%BD&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D">热重载</a>）<strong>的功能，尽管有使用的限制，但是它依然能够为</strong>开发过程</strong>提供<strong>更高的效率</strong>；另外，<strong>Flutter SDK</strong> 还允许我们<strong>修复崩溃</strong>和继续从<strong>应用程序</strong>停止的地方进行<strong>调试</strong></p>
<h3 id="页面流畅-样式美观"><a class="markdownIt-Anchor" href="#页面流畅-样式美观">#</a> <strong>页面流畅、样式美观</strong></h3>
<p><strong>对于不同的平台（Android 和 iOS）</strong>，<strong>Flutter</strong> 提供了<strong>风格不同</strong>的<strong>控件</strong>，以<strong>满足不同平台</strong>的<strong>设计理念</strong></p>
<h3 id="提供原生性能"><a class="markdownIt-Anchor" href="#提供原生性能">#</a> <strong>提供原生性能</strong></h3>
<p><strong>Flutter</strong> 提供了一种 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E5%93%8D%E5%BA%94%E5%BC%8F%E8%A7%86%E5%9B%BE&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 响应式视图</a><strong>，无须 <strong>JavaScript</strong> 做</strong>桥接 **；强大的 <strong>API</strong> 使得<strong>实现复杂的页面效果</strong>成为可能；高性能的 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E6%B8%B2%E6%9F%93%E6%9C%BA%E5%88%B6&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 渲染机制</a> ** 使得 <strong>120 FPS 的高频率</strong> 可以轻而易举的实现；<strong>当界面上的图片数量越来越多时，与 React Native 相比，Flutter 的优势会越来越明显</strong></p>
<h3 id="灵活的跨平台开发"><a class="markdownIt-Anchor" href="#灵活的跨平台开发">#</a> <strong>灵活的跨平台开发</strong></h3>
<p><strong>Flutter</strong> 可以单独作为<strong>开发框架</strong>完成整个 <strong>App 的开发</strong>，也可以与现有<strong>原生代码</strong>相结合实现 <strong>Hybrid 混合模式的开发</strong></p>
<h3 id="那-flutter-需要学吗"><a class="markdownIt-Anchor" href="#那-flutter-需要学吗">#</a> <strong>那 Flutter 需要学吗？</strong></h3>
<p><strong>Flutter</strong> 抛弃了<strong>原生系统控件</strong>和 <strong>Webview</strong>，使用<strong>自研高性能渲染引擎</strong>来绘制 <strong>Widget</strong>，预先 (AOT) 编译，<strong>运行时直接执行 Native (arm) 代码</strong>，<strong>Dart 代码</strong>执行 (在 UI TaskRunner)，<strong>图片下载</strong> (IO TaskRunner)，<strong>真正的渲染</strong> (GPU TaskRunner) ，<strong>同平台的通信</strong>等 (Platform TaskRunner 即 <strong>Native 概念</strong>下的 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E4%B8%BB%E7%BA%BF%E7%A8%8B&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 主线程</a><strong>) 是</strong>互相隔离 ** 的</p>
<p>针对<strong>布局</strong>等的<strong>优</strong>化；<strong>布局</strong>计算时单次树走动即可完成；<strong>Relayout Boundary</strong> 机制：如果 <strong>Child</strong> 的 <strong>size</strong> 是<strong>固定</strong>的，那么不会因为 <strong>Child</strong> 的 <strong>Relayout</strong> 导致 <strong>Parent ReLayout</strong> 等<strong>布局优化</strong>，都让 <strong>Flutter 脱颖而出</strong></p>
<p>如上所述 <strong>Flutter</strong> 于谷歌而言，这是他们重新整理 <strong>跨平台生态环境</strong> 决心的体现，<strong>Flutter</strong> 所展现的内容，也是谷歌想拓展和维护的方向；对于长期苦恼于 <strong>跨平台</strong> 选择的广大 <strong>Android 开发者</strong> 而言，<strong>Flutter</strong> 可谓是谷歌为我们提供的 <strong>指路明灯</strong></p>
<p>以<strong>目前</strong>的<strong>开发速度</strong>，只要不出<strong>大的纰漏</strong>，<strong>按部就班</strong>的<strong>往前推进</strong>，在<strong>不久的将来</strong>， <strong>Google</strong> 一定可以把 <strong>Flutter</strong> 平台打造得非常完美，届时又会改变 **<a target="_blank" rel="noopener" href="https://www.zhihu.com/search?q=%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91%E6%8A%80%E6%9C%AF&amp;search_source=Entity&amp;hybrid_search_source=Entity&amp;hybrid_search_extra=%7B%22sourceType%22%3A%22answer%22%2C%22sourceId%22%3A2734680490%7D"> 移动开发技术</a><strong>的</strong>格局 ** 了</p>
<p>也许，<strong>Flutter</strong> 系列的<strong>部分库</strong>还没成熟到成为你<strong>工作的第一选择</strong>，但是，深入学习 <strong>Flutter</strong> 组件会为你日常的开发带来一些想法</p>
<p><strong>总的来说，Flutter</strong> 对广大开发者而言是 <strong>利远远大于弊的</strong></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.144Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.551Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">19 分钟读完 (大约2775个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter_GetX%E6%96%87%E6%A1%A3/">Flutter GETX框架</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>​		GetX 是 Flutter 上的一个轻量且强大的解决方案：高性能的状态管理、智能的依赖注入和便捷的路由管理。</p>
<p>​		与其说是一个状态管理库，倒不如是是一个简化 Flutter 开发的百宝箱。它提供了很多工具来简化我们的开发，本篇我们先对 GetX 有一个大概的认识，然后接下来的篇章再将 GetX 的具体应用。</p>
<h2 id="getx-工具介绍"><a class="markdownIt-Anchor" href="#getx-工具介绍">#</a> <strong>GetX 工具介绍</strong></h2>
<p>官方文档给出关于 GetX 的介绍如下：</p>
<blockquote>
<p>GetX is an extra-light and powerful solution for Flutter. It combines high-performance state management, intelligent dependency injection, and route management quickly and practically. GetX 是一个超轻量且强大的 Flutter 应用解决方案。它组合了高性能的状态管理、智能的依赖注入以及快速可用的路由管理。</p>
</blockquote>
<p>而实际上，GetX 还有更多的小工具，示例如下：</p>
<h4 id="状态管理"><a class="markdownIt-Anchor" href="#状态管理">#</a> 状态管理</h4>
<ul>
<li>Obx 是配合 Rx 响应式变量使用、GetBuilder 是配合 update 使用：请注意，这完全是俩套定点刷新控件的方案。<br>
区别：前者响应式变量变化，Obx 自动刷新；后者需要使用 update 手动调用刷新</li>
<li>每一个响应式变量，都需要生成对应的 GetStream，占用资源大于基本数据类型，会对内存造成一定压力</li>
<li>GetBuilder 内部实际上是对 StatefulWidget 的封装，所以占用资源极小（推荐使用）</li>
</ul>
<h4 id="控制器的注入"><a class="markdownIt-Anchor" href="#控制器的注入">#</a> 控制器的注入</h4>
<ul>
<li>静态路由绑定</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AsWorkStatisticsBinding</span> <span class="keyword">implements</span> <span class="title class_">Bindings</span> &#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">void</span> <span class="title function_">dependencies</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title class_">Get</span>.<span class="property">lazyPut</span>&lt;<span class="title class_">AsWorkStatisticsController</span>&gt;(<span class="function">() =&gt;</span> <span class="title class_">AsWorkStatisticsController</span>());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> final <span class="title class_">List</span>&lt;<span class="title class_">GetPage</span>&gt; routes = [</span><br><span class="line">    <span class="title class_">GetPage</span>(</span><br><span class="line">      <span class="attr">name</span>: workStatisticsPage,</span><br><span class="line">      <span class="attr">page</span>: <span class="function">() =&gt;</span> <span class="keyword">const</span> <span class="title class_">AsWorkStatisticsPage</span>(),</span><br><span class="line">      <span class="attr">binding</span>: <span class="title class_">AsWorkStatisticsBinding</span>(),</span><br><span class="line">    ),</span><br><span class="line">];</span><br><span class="line"><span class="title class_">Get</span>.<span class="title function_">toNamed</span>(<span class="title class_">ASRouteConfig</span>.<span class="property">workPlanDetailPage</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>动态路由绑定</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get<span class="selector-class">.to</span>(AsWorkStatisticsPage(),binding: <span class="built_in">AsWorkStatisticsBinding</span>());</span><br></pre></td></tr></table></figure>
<ul>
<li>页面注入</li>
</ul>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Get</span>.<span class="property">lazyPut</span>&lt;<span class="title class_">AsWorkStatisticsController</span>&gt;(<span class="function">() =&gt;</span> <span class="title class_">AsWorkStatisticsController</span>());</span><br></pre></td></tr></table></figure>
<h4 id="动态简单路由和静态命名路由"><a class="markdownIt-Anchor" href="#动态简单路由和静态命名路由">#</a> 动态 / 简单路由和静态 / 命名路由</h4>
<p>请注意命名路由，只需要在 api 结尾加上 Named 即可，举例：</p>
<ul>
<li>默认：<a target="_blank" rel="noopener" href="http://Get.to">Get.to</a>(SomePage());</li>
<li>命名路由：Get.toNamed (“/somePage”);</li>
<li>导航到新的页面</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.to(NextScreen());</span><br><span class="line">Get.toNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>关闭 SnackBars、Dialogs、BottomSheets 或任何你通常会用 Navigator.pop (context) 关闭的东西</li>
</ul>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get<span class="selector-class">.back</span>();</span><br></pre></td></tr></table></figure>
<ul>
<li>进入下一个页面，但没有返回上一个页面的选项（用于 SplashScreens，登录页面等）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.off(NextScreen());</span><br><span class="line">Get.offNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>进入下一个界面并取消之前的所有路由（在购物车、投票和测试中很有用）</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.offAll(NextScreen());</span><br><span class="line">Get.offAllNamed(<span class="string">&quot;/NextScreen&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>发送数据到其它页面</li>
</ul>
<p>只要发送你想要的参数即可。Get 在这里接受任何东西，无论是一个字符串，一个 Map，一个 List，甚至一个类的实例。</p>
<figure class="highlight tsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Get</span>.<span class="title function_">to</span>(<span class="title class_">NextScreen</span>(), <span class="attr">arguments</span>: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br><span class="line"><span class="title class_">Get</span>.<span class="title function_">toNamed</span>(<span class="string">&quot;/NextScreen&quot;</span>, <span class="attr">arguments</span>: <span class="string">&#x27;Get is the best&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>在你的类或控制器上。</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(Get.arguments);</span><br><span class="line"><span class="comment">//print out: Get is the best</span></span><br></pre></td></tr></table></figure>
<ul>
<li>要导航到下一条路由，并在返回后立即接收或更新数据</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.to(Payment());</span><br><span class="line"><span class="keyword">var</span> data = <span class="keyword">await</span> Get.toNamed(<span class="string">&quot;/payment&quot;</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>在另一个页面上，发送前一个路由的数据</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.back(result: <span class="string">&#x27;success&#x27;</span>);</span><br><span class="line"><span class="comment">// 并使用它，例：</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">data</span> == <span class="string">&#x27;success&#x27;</span>) madeAnything();</span><br></pre></td></tr></table></figure>
<ul>
<li>跳转重复页面，可以这样写</li>
</ul>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.to(XxxxPage(), preventDuplicates: <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line">Get.toNamed(<span class="string">&#x27;xxx&#x27;</span>,  preventDuplicates: <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>如果你不想使用 GetX 语法，只要把 Navigator（大写）改成 navigator（小写），你就可以拥有标准导航的所有功能，而不需要使用 context，例如：</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 默认的Flutter导航</span></span><br><span class="line">Navigator.of(context).push(</span><br><span class="line">  context,</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (BuildContext context) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用Flutter语法获得，而不需要context。</span></span><br><span class="line">navigator.push(</span><br><span class="line">  MaterialPageRoute(</span><br><span class="line">    builder: (_) &#123;</span><br><span class="line">      <span class="keyword">return</span> HomePage();</span><br><span class="line">    &#125;,</span><br><span class="line">  ),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// get语法</span></span><br><span class="line">Get.to(HomePage());</span><br></pre></td></tr></table></figure>
<h4 id="getview的使用"><a class="markdownIt-Anchor" href="#getview的使用">#</a> GetView 的使用</h4>
<p>GetView 只是对已注册的 Controller 有一个名为 controller 的 getter 的 const Stateless 的 Widget，如果我们只有单个控制器作为依赖项，那我们就可以使用 GetView，而不是使用 StatelessWidget，并且避免了写 Get.Find ()。</p>
<p>GetView 的使用方法非常简单，只是要将你的视图层继承自 GetView 并传入需要注册的控制器并 Get.put () 即可：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">GetViewAndGetWidgetExample</span> <span class="keyword">extends</span> <span class="title class_">GetView</span>&lt;GetViewCountController&gt; &#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget <span class="title function_">build</span><span class="params">(BuildContext context)</span> &#123;</span><br><span class="line"></span><br><span class="line">    Get.put(GetViewCountController());</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> Container();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="路由"><a class="markdownIt-Anchor" href="#路由">#</a> <strong>路由</strong></h3>
<p>路由支持命名路由和匿名路由：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Get.to(() =&gt; Home());</span><br><span class="line">Get.toNamed(&#x27;/home&#x27;);</span><br><span class="line">// 返回上一个页面</span><br><span class="line">Get.back();</span><br><span class="line">// 使用下一个页面替换</span><br><span class="line">Get.off(NextScreen());</span><br><span class="line">// 清空导航堆栈全部页面</span><br><span class="line">Get.offAll(NextScreen());</span><br><span class="line">// 获取命名路由参数</span><br><span class="line">print(Get.parameters[&#x27;id&#x27;]);</span><br><span class="line">print(Get.parameters[&#x27;name&#x27;]);</span><br></pre></td></tr></table></figure>
<p>GetX 的路由好处是不依赖于  <code>context</code> ，十分简洁，更多路由介绍可以参考：<strong><a href="https://link.zhihu.com/?target=https%3A//github.com/jonataslaw/getx/blob/master/documentation/en_US/route_management.md">GetX 路由介绍官方文档</a></strong>。</p>
<h2 id="snackbar"><a class="markdownIt-Anchor" href="#snackbar">#</a> <strong>SnackBar</strong></h2>
<p>Flutter 自身携带的 SnackBar 有很多限制，而 GetX 的非常简单，当然也有更多的样式配置和位置配置参数。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get.snackbar(&#x27;SnackBar&#x27;, &#x27;这是GetX的SnackBar&#x27;);</span><br></pre></td></tr></table></figure>
<h2 id="对话框"><a class="markdownIt-Anchor" href="#对话框">#</a> <strong>对话框</strong></h2>
<p>对话框也一样，默认的对话框开箱即用。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Get.defaultDialog(</span><br><span class="line">  title: &#x27;对话框&#x27;,</span><br><span class="line">  content: Text(&#x27;对话框内容&#x27;),</span><br><span class="line">  onConfirm: () &#123;</span><br><span class="line">    print(&#x27;Confirm&#x27;);</span><br><span class="line">    Get.back();</span><br><span class="line">  &#125;,</span><br><span class="line">  onCancel: () &#123;</span><br><span class="line">    print(&#x27;Cancel&#x27;);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h2 id="内存缓存"><a class="markdownIt-Anchor" href="#内存缓存">#</a> <strong>内存缓存</strong></h2>
<p>GetX 可以缓存内容对象，以便在不同页面共享数据。使用的时候需要注意，需要先  <code>put</code>  操作再  <code>find</code>  操作，否则会抛异常。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Get.put(CacheData(name: &#x27;这是缓存数据&#x27;));</span><br><span class="line">CacheData cache = Get.find();</span><br></pre></td></tr></table></figure>
<h2 id="离线存储"><a class="markdownIt-Anchor" href="#离线存储">#</a> <strong>离线存储</strong></h2>
<p>GetX 提供了一个 <strong><a href="https://link.zhihu.com/?target=https%3A//pub.flutter-io.cn/packages/get_storage">get_storage</a></strong> 插件用于离线存储，与  <code>shared_preferences</code>  相比，其优点是纯 Dart 编写，不依赖于原生，因此可以在安卓、iOS、Web、Linux、Mac 等多个平台使用。 <code>GetStorage</code>  是基于内存和文件存储的，当内存容器中有数据时优先从内存读取。同时在构建 GetStorage 对象到时候指定存储的文件名以及存储数据的容器。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GetStorage storage = GetStorage();</span><br><span class="line">storage.write(&#x27;name&#x27;, &#x27;岛上码农&#x27;);</span><br><span class="line">storage.read(&#x27;name&#x27;);</span><br></pre></td></tr></table></figure>
<h2 id="更改主题"><a class="markdownIt-Anchor" href="#更改主题">#</a> <strong>更改主题</strong></h2>
<p>可以说是一行代码搞定深色和浅色模式，也可以更改为自定义主题 —— <strong>老板让你根据手机壳改主体颜色的需求</strong>已经搞定了一大半了！</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Get.changeTheme(</span><br><span class="line">  Get.isDarkMode ? ThemeData.light() : ThemeData.dark());</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.cloud/blogImg/v2-196c01dbae06a8e68132fcd94e3983a6_b.jpg" alt="img"></p>
<h2 id="多语言支持"><a class="markdownIt-Anchor" href="#多语言支持">#</a> <strong>多语言支持</strong></h2>
<p>多语言支持使用数据字典完成，在  <code>GetMaterialApp</code>  指定字典对象（继承自  <code>Translations</code> ），使用字符串的时候假设 <code>.tr</code>  后缀，就可以在切换语言的时候自动切换字符串对应语言的翻译了。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">class GetXDemo extends StatelessWidget &#123;</span><br><span class="line">  // 省略其他代码</span><br><span class="line">  TextButton(</span><br><span class="line">    onPressed: () &#123;</span><br><span class="line">      var locale = Locale(&#x27;en&#x27;, &#x27;US&#x27;);</span><br><span class="line">      Get.updateLocale(locale);</span><br><span class="line">    &#125;,</span><br><span class="line">    child: Text(&#x27;name&#x27;.tr),</span><br><span class="line">  ),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Messages extends Translations &#123;</span><br><span class="line">  @override</span><br><span class="line">  Map&lt;String, Map&lt;String, String&gt;&gt; get keys =&gt; &#123;</span><br><span class="line">        &#x27;en_US&#x27;: &#123;</span><br><span class="line">          &#x27;name&#x27;: &#x27;Island Coder&#x27;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#x27;zh_CN&#x27;: &#123;</span><br><span class="line">          &#x27;name&#x27;: &#x27;岛上码农&#x27;,</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class MyApp extends StatelessWidget &#123;</span><br><span class="line">  // This widget is the root of your application.</span><br><span class="line">  @override</span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    return GetMaterialApp(</span><br><span class="line">      translations: Messages(),</span><br><span class="line">      locale: Locale(&#x27;zh&#x27;, &#x27;CN&#x27;),</span><br><span class="line">      color: Colors.white,</span><br><span class="line">      navigatorKey: Get.key,</span><br><span class="line">      title: &#x27;Flutter Demo&#x27;,</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primarySwatch: Colors.blue,</span><br><span class="line">        brightness: Brightness.light,</span><br><span class="line">      ),</span><br><span class="line">      home: GetXDemo(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="getx-的理念"><a class="markdownIt-Anchor" href="#getx-的理念">#</a> <strong>GetX 的理念</strong></h2>
<p>GetX 有三个基本的理念，分别是性能、生产力和组织性（Organization）。</p>
<ul>
<li>性能（Performance）：GetX 关注性能并最小化资源消耗。GetX 不使用  <code>Stream</code>  或  <code>ChangeNotifier</code> 。</li>
<li>生产力（Productivity）：GetX 使用简洁愉悦的语法。不管你要做什么，使用 GetX 都会觉得简便。这使得开发的时间大大节省，并且保证应用性能的最大化。通常来说，开发者需要关注从内存中移除控制器。而使用 GetX 的时候，则无需这么做。当控制器不被使用的时候，资源会自动从内存中释放。如果确实需要常住内存，那就需要在依赖中声明  <code>permanent:true</code> 。通过这种方式，可以降低内存中有过多不必要依赖对象的风险。同时，依赖默认也是懒加载。</li>
<li>组织性（Organization）：GetX 可以将视图、展示逻辑、业务逻辑、依赖注入和导航完全解耦。路由之间跳转无需  <code>context</code> ，因此我们的导航不会依赖组件树。也不需要使用通过  <code>InheritedWidget</code>  的  <code>context</code>  访问控制器或 BLOC 对象，因此可以将展示逻辑和业务逻辑从虚拟的组件层分离。我们也不需要像 MultiProvider 那样往组件树中注入 Controller/Model/Bloc 等类对象。因此可以将依赖注入和视图分离。</li>
</ul>
<h2 id="getx-生态"><a class="markdownIt-Anchor" href="#getx-生态">#</a> <strong>GetX 生态</strong></h2>
<p>GetX 有很多特性，使得编码变得容易。每个特性之间是相互独立的，并且只会在使用的时候才启动。例如，如果仅仅是使用状态管理，那么只有状态管理会被编译。而如果只使用路由，那么状态管理的部分就不会编译。</p>
<p>GetX 有一个很大的生态，包括了大型的社区维护，大量的协作者（GitHub 上看有 132 位），并且承诺只要 Flutter 存在就会继续维护下去。而且 GetX 兼容 Android, iOS, Web, Mac, Linux, Windows 多个平台。GetX 甚至还有服务端版本 <strong><a href="https://link.zhihu.com/?target=https%3A//github.com/jonataslaw/get_server">Get_Server</a></strong>（感觉 Flutter 要一统程序员界啊，啥时候支持鸿蒙？）。</p>
<p>为了简化开发，GetX 还提供了脚手架工具 **<a href="https://link.zhihu.com/?target=https%3A//pub.flutter-io.cn/packages/get_cli">GET_CLI</a>** 和 VSCode 插件 <code>GetX Snippets</code> （也有 Android Studio 和 Intellij 插件）。提供了如下快速代码模板：</p>
<ul>
<li>
<p>getmain：GetX 的 main.dart 代码；</p>
</li>
<li>
<p>getmodel：Model 类代码，包括了 fromJson 和 toJson 方法</p>
</li>
<li>
<p>其他，输入 getxxxx 根据提示生成即可，具体参考：<strong><a href="https://link.zhihu.com/?target=https%3A//marketplace.visualstudio.com/items%3FitemName%3Dget-snippets.get-snippets">GetX Snippets 介绍</a></strong>。</p>
</li>
</ul>
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结">#</a> <strong>总结</strong></h2>
<p>本篇对 GetX 插件做了简单的介绍，可以看到 GetX 的生态确实很丰富，感觉是一个集大成者，GetX 基本上涵盖了 Flutter 应用开发的很大一部分，如路由、主题、多语言、弹层、状态管理、依赖注入、网络请求封装等等。GetX 看着像一个框架， 但实际上它的各个模块是独立的，其实是一个工具箱。对于开发的时候，可以用它的全家桶，也可以从中任取所需的模块到我们的应用中使用。</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.141Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.538Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">3 分钟读完 (大约498个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91flutter%20%E5%9C%A8%E7%9C%9F%E6%9C%BA%E4%B8%8A%E8%B0%83%E8%AF%95%E5%8D%B8%E8%BD%BD%E5%AE%89%E8%A3%85%E5%8C%85%E5%90%8E%E5%8D%A1%E4%BD%8F%E6%B2%A1%E5%8F%8D%E5%BA%94%E9%97%AE%E9%A2%98/">【Flutter】flutter 在真机上调试卸载安装包后卡住没反应问题</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="flutterflutter-在真机上调试卸载安装包后卡住没反应问题"><a class="markdownIt-Anchor" href="#flutterflutter-在真机上调试卸载安装包后卡住没反应问题">#</a> 【Flutter】flutter 在真机上调试卸载安装包后卡住没反应问题</h1>
<h1 id="问题描述"><a class="markdownIt-Anchor" href="#问题描述">#</a> 问题描述</h1>
<p>把自己手机插上数据线后，用 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=flutter&amp;spm=1001.2101.3001.7020">flutter</a> 进行真机调试，本来配合 vscode 跑得好好的，不知道是写了 bug 还是咋地，目标效果出不来，以为是热更新失败了，最后只好把安装在手机上的 app 卸载了，想当然地以为运行  <code>flutter run</code>  后在手机上会贴心的提示我重装一遍，哪知给我突然卡住了：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Running Gradle task &#x27;assembleDebug&#x27;...</span><br><span class="line">✓ Built build/app/outputs/flutter-apk/app-debug.apk.</span><br><span class="line">Installing build/app/outputs/flutter-apk/app.apk...</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>一直卡在这个安装环节上，等半天是一点反应都没有，试了各种方法重启应用、改用 <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=Andriod&amp;spm=1001.2101.3001.7020">Andriod</a> Studio 什么的，毛用没有，最后还得是在 <a target="_blank" rel="noopener" href="https://stackoverflow.com/">StackOveFlow</a> 上找到了法子：</p>
<h1 id="解决方法"><a class="markdownIt-Anchor" href="#解决方法">#</a> 解决方法：</h1>
<p>Change the applicationId in <strong>android\app\build.gradle</strong> file like this:</p>
<p>from :</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).</span></span><br><span class="line">	applicationId <span class="string">&quot;com.xxxxxxxxxxx.yyyyyy1&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>to :</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">defaultConfig <span class="punctuation">&#123;</span></span><br><span class="line">	<span class="comment">// <span class="doctag">TODO:</span> Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).</span></span><br><span class="line">	applicationId <span class="string">&quot;com.xxxxxxxxxxx.yyyyyy2&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>改一下 flutter 工程目录下  <code>andriod\app</code>  中  <code>build.gradle</code>  文件中的  <code>applicationId</code>  重新 build 就能重新在手机上安装调试 app 了，我丢！</p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.136Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.544Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">15 分钟读完 (大约2230个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter%E3%80%91Flutter%20%E6%B5%81%E7%95%85%E5%BA%A6%E4%BC%98%E5%8C%96%E7%BB%84%E4%BB%B6%20Keframe/">Flutter 流畅度优化组件 Keframe</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<p>最近在开发一款 APP，核心场景类似于帖子这类的，所以下拉加载页面的流畅度成为最棘手的问题，在掘金上看见了这篇文章： <a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>
<p>Nayuta 的 Keframe 组件正好可以满足帧率优化的问题</p>
<h3 id="项目依赖"><a class="markdownIt-Anchor" href="#项目依赖">#</a> 项目依赖：</h3>
<p>在  <code>pubspec.yaml</code>  中添加  <code>keframe</code>  依赖</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">keframe:</span> <span class="string">version</span></span><br></pre></td></tr></table></figure>
<p>组件仅区分非空安全与空安全版本</p>
<p>非空安全使用：  <code>1.0.2</code></p>
<p>空安全版本使用：  <code>2.0.2</code></p>
<p>github 地址：<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLianjiaTech%2Fkeframe">github.com/LianjiaTech…</a></p>
<p>pub 查看：<a href="https://link.juejin.cn?target=https%3A%2F%2Fpub.dev%2Fpackages%2Fkeframe">pub.dev/packages/ke…</a></p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">#SizeCacheWidget用来包裹最外层的list</span><br><span class="line">#FrameSeparateWidget用来包裹list的子集即可    </span><br><span class="line">example:</span><br><span class="line">SizeCacheWidget(</span><br><span class="line">	child：ListView || CustomScrollView(</span><br><span class="line">    	slivers[</span><br><span class="line">            SliverList(</span><br><span class="line">            	delegate: SliverChildBuilderDelegate</span><br><span class="line">                (BuildContext context, <span class="built_in">int</span> index)&#123;</span><br><span class="line">                    <span class="keyword">return</span> FrameSeparateWidget(</span><br><span class="line">                    	child: ···</span><br><span class="line">                    )</span><br><span class="line">                &#125;</span><br><span class="line">            )</span><br><span class="line">        ]</span><br><span class="line">    )</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="快速上手"><a class="markdownIt-Anchor" href="#快速上手">#</a> 快速上手：</h3>
<p>如下图所示</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/83d16f3b2a3e45b79fc73d7a52774696~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>假如现在页面由 A、B、C、D 四部分组成，每部分耗时 10ms，在页面时构建为 40ms。使用分帧组件   <code>FrameSeparateWidget</code>  嵌套每一个部分。页面构建时会在第一帧渲染简单的占位，在后续四帧内分别渲染 A、B、C、D。</p>
<p>对于列表，在每一个 item 中嵌套  <code>FrameSeparateWidget</code> ，并将  <code>ListView</code>  嵌套在  <code>SizeCacheWidget</code>  内即可。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ffecd49bf9ba4379984a22ef79663104~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<hr>
<h2 id="构造函数说明"><a class="markdownIt-Anchor" href="#构造函数说明">#</a> 构造函数说明</h2>
<p>FrameSeparateWidget ：分帧组件，将嵌套的 widget 单独一帧渲染</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>int</td>
<td>index</td>
<td>否</td>
<td>分帧组件 id，<strong>使用 SizeCacheWidget 的场景必传</strong>，SizeCacheWidget 中维护了 index 对应的 Size 信息</td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>实际需要渲染的 widget</td>
</tr>
<tr>
<td>Widget</td>
<td>placeHolder</td>
<td>否</td>
<td>占位 widget，尽量设置简单的占位，不传默认是 Container ()</td>
</tr>
</tbody>
</table>
<p>SizeCacheWidget：缓存子节点中，分帧组件嵌套的<strong>实际 widget 的尺寸信息</strong></p>
<table>
<thead>
<tr>
<th>类型</th>
<th>参数名</th>
<th>是否必填</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Key</td>
<td>key</td>
<td>否</td>
<td></td>
</tr>
<tr>
<td>Widget</td>
<td>child</td>
<td>是</td>
<td>子节点中如果包含分帧组件，则缓存<strong>实际的 widget 尺寸</strong></td>
</tr>
<tr>
<td>int</td>
<td>estimateCount</td>
<td>否</td>
<td>预估屏幕上子节点的数量，提高快速滚动时的响应速度</td>
</tr>
</tbody>
</table>
<hr>
<h2 id="方案设计与分析"><a class="markdownIt-Anchor" href="#方案设计与分析">#</a> 方案设计与分析：</h2>
<p>卡顿的本质，就是 <strong>单帧的绘制时间过长</strong>。基于此自然衍生出两种思路解决：</p>
<p>1、减少一帧的绘制耗时，因为导致耗时过长的原因有很多，比如不合理的刷新，或者绘制时间过长，都有可能，需要具体问题具体分析，后面我会分享一些我的优化经验。</p>
<p><strong>2、在不对耗时优化下，将一帧的任务拆分到多帧内，保证每一帧都不超时。这也是本组件的设计思路，分帧渲染。</strong></p>
<p>如下图所示:</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eb09c9aadc5d45c9b966661c8d73e4c1~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>原理并不复杂，问题在于如何在 Flutter 中实践这一机制。</p>
<p>因为涉及到帧与系统的调度，自然联想到看  <code>SchedulerBinding</code>  中有无现成的 API。</p>
<p>发现了  <code>scheduleTask</code>  方法，这是系统提供的一个执行任务的方法，但这个方法存在两个问题：</p>
<ul>
<li>1、其中的渲染任务是优先级进行堆排序，而堆排序是<strong>不稳定</strong>排序，这会导致任务的执行顺序并非 FIFO。从效果上来看，就是列表不会按照顺序渲染，而是会出现跳动渲染的情况</li>
<li>2、这个方法本身存在调度问题，我已经提交 issue 与 pr，不过一直卡在单元测试上，如果感兴趣可以以在这里交流谈论。</li>
</ul>
<p><a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fflutter%2Fflutter%2Fpull%2F82781">fix: Tasks scheduled through ‘SchedulerBinding.instance.scheduleTask’… #82781 </a></p>
<p>最终，参考这个设计结合  <code>endOfFrame</code>  方法的使用，完成了分帧队列。整个渲染流程变为下图所示：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cb9d177b4b0847339eaf952a7ef67cca~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p>
<p>对于列表构建场景来说，假设屏幕上能显示五个 item。首先在第一帧的时候，列表会渲染 5 个占位的 Widget，同时添加 5 个高优先级任务到队列中，这里的任务可以是简单的将占位 Widget 和实际 item 进行替换，也可通过渐变等动画提升体验。在后续的五帧中占位 Widget 依次被替换成实际的列表 item。</p>
<p>在  <a target="_blank" rel="noopener" href="https://juejin.cn/post/6940134891606507534">ListView 流畅度翻倍！！Flutter 卡顿分析和通用优化方案</a>  这篇文章中有更加详细的分析。</p>
<h2 id="一些展示效果example-说明请查看-github"><a class="markdownIt-Anchor" href="#一些展示效果example-说明请查看-github">#</a> 一些展示效果（Example 说明请查看 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FLianjiaTech%2Fkeframe%2Fblob%2Fmaster%2FREADME-ZH.md">Github</a>）</h2>
<p>卡顿的页面往往都是由多个复杂 widget 同时渲染导致。通过为复杂的 widget 嵌套分帧组件  <code>FrameSeparateWidget</code> 。渲染时，分帧组件会在第一帧同时渲染多个  <code>palceHolder</code> ，之后连续的多帧内依次渲染复杂子项，以此提升页面流畅度。</p>
<p>例如 example 中的优化前示例：</p>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ListView.builder(</span><br><span class="line">              itemCount: childCount,</span><br><span class="line">              itemBuilder: (c, i) =&gt; CellWidget(</span><br><span class="line">                color: i % <span class="number">2</span> == <span class="number">0</span> ? Colors.red : Colors.blue,</span><br><span class="line">                index: i,</span><br><span class="line">              ),</span><br><span class="line">            )</span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure>
<p>其中  <code>CellWidget</code>  高度为 60，内部嵌套了三个  <code>TextField</code>  的组件（整体构建耗时在 9ms 左右）。</p>
<p>优化仅需为每一个 item 嵌套分帧组件，并为其设置  <code>placeHolder</code> （placeHolder 尽量简单，样式与实际 item 接近即可）。</p>
<p>在列表情况下，给 ListView 嵌套  <code>SizeCacheWidget</code> ，同时建议将预加载范围  <code>cacheExtent</code>  设置大一点，例如 500（该属性默认为 250），提升慢速滑动时候的体验。</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f33ddd7d9de4e369b0e457f84171cc8~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210611_194905.gif"> (占位与实际列表项不一致时，首次渲染抖动，二次渲染正常)</p>
<p>此外，也可以给 item 嵌套透明度 / 位移等动画，优化视觉上的效果。</p>
<p>效果如下图：</p>
<table>
<thead>
<tr>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bb7d1361ae7842df954bb1c559e2ec54~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133310.gif"></th>
<th><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6ee6827f7eed4463a1a8a5b00a58fd6e~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="Screenrecording_20210315_133848.gif"></th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="分帧的成本"><a class="markdownIt-Anchor" href="#分帧的成本">#</a> 分帧的成本</h2>
<p>当然分帧方案也非十全十美，在我看来主要有两点成本：</p>
<p>1、额外的构建开销：整个构建过程的构建消耗由「n * widget 消耗 」变成了「n *（ widget + 占位）消耗 + 系统调度 n 帧消耗」。可以看出，额外的开销主要由占位的复杂度决定。如果占位只是简单的 Container，测试后发现整体构建耗时大概提升在 15 % 左右。这种额外开销对于当下的移动设备而言，成本几乎可以不计。</p>
<p>2、视觉上的变化：如同上面的演示，组件会将 item 分帧渲染，页面在视觉上出现占位变成实际 widget 的过程。但其实由于列表存在缓存区域（建议将缓存区调大），在高端机或正常滑动情况下用户并无感知。而在中低端设备上快速滑动能感觉到切换的过程，但比严重顿挫要好。</p>
<hr>
<h2 id="优化前后对比演示"><a class="markdownIt-Anchor" href="#优化前后对比演示">#</a> 优化前后对比演示</h2>
<p>注：gif 帧率只有 20</p>
<table>
<thead>
<tr>
<th>优化前</th>
<th>优化后</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f20f593cc144b72a1df4bdae57a165c~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化前"></td>
<td><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/05aea6de421545b9bbf868c344a9afe9~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="优化后"></td>
</tr>
</tbody>
</table>
<hr>
<h2 id="最后一点点思考"><a class="markdownIt-Anchor" href="#最后一点点思考">#</a> 最后：一点点思考</h2>
<p>列表优化篇到此告一段落，在整个开源实践过程中，有两点感触较深：</p>
<p>作者：Nayuta<br>
 链接：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6979781997568884766">https://juejin.cn/post/6979781997568884766</a></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-20T06:02:20.133Z" title="2023-4-20 14:02:20">2023-04-20</time>发表</span><span class="level-item"><time dateTime="2023-04-20T06:01:26.532Z" title="2023-4-20 14:01:26">2023-04-20</time>更新</span><span class="level-item">42 分钟读完 (大约6330个字)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/20/%E3%80%90Flutter&amp;SpringBoot%E3%80%91%E5%A6%82%E4%BD%95%E7%94%A8Flutter%E5%92%8CJava%E6%9D%A5%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AA%E6%8A%BD%E5%A5%96APP/">如何使用Flutter+SpringBoot+Mysql开发一个简易的抽奖APP（Android教学</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h2 id="微信公众号搜索interviewcoder回复关键词吃啥获取源码以及开发教程~"><a class="markdownIt-Anchor" href="#微信公众号搜索interviewcoder回复关键词吃啥获取源码以及开发教程~">#</a> 微信公众号搜索 InterviewCoder 回复关键词《吃啥》获取源码以及开发教程～</h2>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/%E4%BA%8C%E7%BB%B4%E7%A0%81mini.png" alt="二维码mini"></p>
<h1 id="前言"><a class="markdownIt-Anchor" href="#前言">#</a> 前言：</h1>
<h3 id="weat-中文译为吃啥"><a class="markdownIt-Anchor" href="#weat-中文译为吃啥">#</a> Weat 中文译为：吃啥</h3>
<h5 id="吃啥来自于女朋友的一个问题问我可不可以做个抽奖的app奖品都是菜抽中那个今天就做那个菜吃我灵机一动使用interviewcoder公众号里面的chatgpt小程序编辑了下面的文案"><a class="markdownIt-Anchor" href="#吃啥来自于女朋友的一个问题问我可不可以做个抽奖的app奖品都是菜抽中那个今天就做那个菜吃我灵机一动使用interviewcoder公众号里面的chatgpt小程序编辑了下面的文案">#</a> 吃啥来自于女朋友的一个问题，问我可不可以做个抽奖的 APP，奖品都是菜，抽中那个今天就做那个菜吃，我灵机一动，使用 InterviewCoder 公众号里面的 chatGPT 小程序编辑了下面的文案：</h5>
<h5 id="吃啥是一款新奇有趣的应用旨在帮助你找到今天吃什么菜-它通过精心的菜谱抽奖模式为你提供多样而有色彩的食物让你的用餐经历变得更加美好-不仅如此它还可以添加朋友和家人的偏好为大家带来更多惊喜-加入吃啥让你的用餐经历变得更加完美"><a class="markdownIt-Anchor" href="#吃啥是一款新奇有趣的应用旨在帮助你找到今天吃什么菜-它通过精心的菜谱抽奖模式为你提供多样而有色彩的食物让你的用餐经历变得更加美好-不仅如此它还可以添加朋友和家人的偏好为大家带来更多惊喜-加入吃啥让你的用餐经历变得更加完美">#</a> 吃啥是一款新奇有趣的应用，旨在帮助你找到今天吃什么菜。它通过精心的菜谱抽奖模式，为你提供多样而有色彩的食物，让你的用餐经历变得更加美好。不仅如此，它还可以添加朋友和家人的偏好，为大家带来更多惊喜。加入吃啥，让你的用餐经历变得更加完美！</h5>
<h3 id="架构方面"><a class="markdownIt-Anchor" href="#架构方面">#</a> 架构方面：</h3>
<p>移动端：Flutter</p>
<p>后台服务：SpringBoot、Mysql</p>
<h3 id="没有安装dart-flutter-android-studio-vscode的同学可以看看以前的教程这里就不-一-一-介绍了"><a class="markdownIt-Anchor" href="#没有安装dart-flutter-android-studio-vscode的同学可以看看以前的教程这里就不-一-一-介绍了">#</a> 没有安装 dart、flutter、Android Studio、vscode 的同学可以看看以前的教程，这里就不 一 一 介绍了</h3>
<p>本文将详细介绍 weatapp 的开发流程，前后端代码编写阶段，以及后台代码部署。</p>
<h2 id="一-app创建"><a class="markdownIt-Anchor" href="#一-app创建">#</a> 一、APP 创建：</h2>
<ol>
<li>
<p>打开项目路径，输入 cmd 进入到命令行，输入 flutter create weat 进行 flutter 项目创建。</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223201656540.png" alt="image-20230223201656540"></p>
</li>
<li>
<p>打开 Android Studio 整理项目，修改仓库配置</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/google&#x27;</span> &#125;</span><br><span class="line">maven &#123; url <span class="string">&#x27;https://maven.aliyun.com/repository/jcenter&#x27;</span> &#125;</span><br><span class="line">maven &#123; url <span class="string">&#x27;http://maven.aliyun.com/nexus/content/groups/public&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223201935306.png" alt="image-20230223201935306"></p>
<p>3. 点击 Open for Editing in Android Studio 进入安卓视图，拉取 gradle 库</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223202038338.png" alt="image-20230223202038338"></p>
<p>4. 当 Android 主文件不暴红，说明配置完毕了，gradle 库已经拉下来了</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223202433131.png" alt="image-20230223202433131"></p>
<h2 id="二-app启动"><a class="markdownIt-Anchor" href="#二-app启动">#</a> 二、APP 启动：</h2>
<p>​	1. 打开一个安卓模拟器，有条件的同学可以直接使用真机，老师这里为了方便就直接用模拟器了</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223202625528.png" alt="image-20230223202625528"></p>
<p>​	2. 使用 vscode 打开项目并启动 flutter 项目</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223203129146.png" alt="image-20230223203129146"></p>
<p>至此，一个 flutter 项目，创建完成，并启动了！</p>
<h2 id="三-app图标配置"><a class="markdownIt-Anchor" href="#三-app图标配置">#</a> 三、APP 图标配置</h2>
<p>需要打开两个网址：</p>
<p><a target="_blank" rel="noopener" href="https://logo.aliyun.com/logo#/name">https://logo.aliyun.com/logo#/name</a>  阿里云 LOGO 服务</p>
<p><a target="_blank" rel="noopener" href="https://icon.wuruihong.com/">https://icon.wuruihong.com/</a> 图标工厂</p>
<p>1. 打开阿里云 LOGO 输入 APP 名字，吃啥</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223203651967.png" alt="image-20230223203651967"></p>
<p>2. 生成图标：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223203733745.png" alt="image-20230223203733745"></p>
<p>购买一个你喜欢的图标，如果不购买的话，自己在网上找一个也行，但是一定要有商业授权！</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223204102921.png" alt="image-20230223204102921"></p>
<p>得到图标后，进入图标工厂，生成一套 ios 和一套 Android 的图标文件：</p>
<p><img src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20230223205448783.png" alt="image-20230223205448783"></p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223205507890.png" alt="image-20230223205507890"></p>
<p>进入安卓文件夹，将该目录的文件复制到你的项目下面 \android\app\src\main\res</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223205604112.png" alt="image-20230223205604112"></p>
<h4 id="成效"><a class="markdownIt-Anchor" href="#成效">#</a> 成效：</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223210003933.png" alt="image-20230223210003933"></p>
<p>至此，APP 图标设置完成！</p>
<h2 id="四-app后台开发springbootmysql"><a class="markdownIt-Anchor" href="#四-app后台开发springbootmysql">#</a> 四、APP 后台开发（SpringBoot+Mysql）</h2>
<h4 id="为什么先开发app部分这个纯属个人习惯我比较喜欢先有数据和接口直接开发app的感觉会更轻松"><a class="markdownIt-Anchor" href="#为什么先开发app部分这个纯属个人习惯我比较喜欢先有数据和接口直接开发app的感觉会更轻松">#</a> 为什么先开发 APP 部分？，这个纯属个人习惯，我比较喜欢先有数据和接口，直接开发 APP 的感觉会更轻松！</h4>
<h4 id="整理需求"><a class="markdownIt-Anchor" href="#整理需求">#</a> 整理需求：</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">每次进入app随机获取食物列表</span><br><span class="line">点击开始抽奖 随机跳转 点击停止 按钮回显食物名称 点击查看菜谱 弹窗提示做法</span><br></pre></td></tr></table></figure>
<p>根据如上需求，我明确了客户到底想要什么</p>
<p>1. 这是一个服务类型的 APP，服务于不知道吃什么的客户</p>
<p>2. 每次进入抽奖页面需要获取不同的菜谱奖品列表</p>
<p>3. 这个页面需要有个按钮，可以来重置奖品，并且要限制次数</p>
<p>4. 点击抽奖按钮，开始抽奖，再次点击，或者超过限制时间，停止选择，并将按钮置为：查看食谱</p>
<p>5. 点击查看食谱，进入食谱详情，展示过程</p>
<p>根据我的聪明思考，画出了如下 UI：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230223210734630.png" alt="image-20230223210734630"></p>
<h3 id="开玩笑画的很烂但是就是这个意思"><a class="markdownIt-Anchor" href="#开玩笑画的很烂但是就是这个意思">#</a> 开玩笑，画的很烂，但是就是这个意思！。</h3>
<p>那么，开始开发后台数据，为我们的 APP 提供一个接口～！</p>
<p>经过一系列操作，得到以下数据：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> NAMES utf8mb4;</span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Table structure for iv_dishes</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `iv_dishes`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `iv_dishes`  (</span><br><span class="line">  `id` <span class="type">int</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;唯一ID&#x27;</span>,</span><br><span class="line">  `dishes_name` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;菜品名字&#x27;</span>,</span><br><span class="line">  `dishes_step` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;菜品做法&#x27;</span>,</span><br><span class="line">  `dishes_url` <span class="type">varchar</span>(<span class="number">255</span>) <span class="type">CHARACTER</span> <span class="keyword">SET</span> utf8 <span class="keyword">COLLATE</span> utf8_general_ci <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;菜品图片地址&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`id`) <span class="keyword">USING</span> BTREE</span><br><span class="line">) ENGINE <span class="operator">=</span> InnoDB AUTO_INCREMENT <span class="operator">=</span> <span class="number">9</span> <span class="type">CHARACTER</span> <span class="keyword">SET</span> <span class="operator">=</span> utf8 <span class="keyword">COLLATE</span> <span class="operator">=</span> utf8_general_ci COMMENT <span class="operator">=</span> <span class="string">&#x27;菜品表&#x27;</span> ROW_FORMAT <span class="operator">=</span> Compact;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Records of iv_dishes</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;凉拌黄瓜虾仁&#x27;</span>, <span class="string">&#x27;1.小米辣 白芝麻蒜未辣椒面 淋上少许热油\r\n2.生抽2勺 油 醋各1代糖半勺搅匀备用\r\n3.虾煮熟去壳 木耳焯水捞出 黄瓜拍块\r\n4.淋上酱汁拌匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224081935481.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;低卡酱油鸡蛋&#x27;</span>, <span class="string">&#x27;1.生抽4勺 醋2香油1勺一把葱花\r\n2.鸡蛋冷水下锅煮8分钟盖盖焖1分钟后泡冷水\r\n3.温开水4勺搅匀\r\n4.鸡蛋剥壳切对半淋上酱汁拌匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082035768.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">3</span>, <span class="string">&#x27;低卡葱香鸡腿&#x27;</span>, <span class="string">&#x27;1.蒜末 葱花 白艺麻小米辣淋上少许热油\r\n2.生抽1勺 许盐搅匀\r\n3.鸡腿熟捞出微凉后撕成小块\r\n4.淋上酱汁拌匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082101091.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">4</span>, <span class="string">&#x27;低卡平菇炒蛋&#x27;</span>, <span class="string">&#x27;1.鸡蛋炒熟盛出\r\n2.油热下从蒜炒香\r\n3.下平菇炒出汁，倒入炒好的鸡蛋\r\n4.生抽 油 辣椒粉各1勺 少许盐炒匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082137439.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">5</span>, <span class="string">&#x27;凉拌虾仁西兰花&#x27;</span>, <span class="string">&#x27;1.蒜未 葱花 辣椒面白芝麻淋上少许热油\r\n2.生抽2勺 醋各1勺搅拌均匀\r\n3.西兰花焯水捞出，虾焯水去壳鸡蛋白切块\r\n4.淋上酱汁拌匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082204322.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">6</span>, <span class="string">&#x27;凉拌黄瓜木耳鸡蛋&#x27;</span>, <span class="string">&#x27;1.木耳鸡蛋各煮熟捞出 黄瓜拍块\r\n2.生抽2勺醋香油各11勺温开水拌匀即可开吃&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082230282.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">7</span>, <span class="string">&#x27;凉拌黄瓜豆腐&#x27;</span>, <span class="string">&#x27;1.白芝麻辣椒面小米辣,蒜未 葱花 淋少许热油\r\n2.生抽2勺 醋油各1勺 少许盐代糖拌匀\r\n3.黄瓜拍块去籽豆腐煮熟捞出\r\n4.撒上香葱淋上酱汁拌匀即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082404878.png&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `iv_dishes` <span class="keyword">VALUES</span> (<span class="number">8</span>, <span class="string">&#x27;木耳炒鸡蛋&#x27;</span>, <span class="string">&#x27;1.鸡蛋炒熟盛出\r\n2.蒜未和胡萝人炒软倒木耳炒熟再倒鸡蛋\r\n3.耗油生抽各1勺少许盐-小半碗淀粉水\r\n4.炒匀下葱段即可&#x27;</span>, <span class="string">&#x27;https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224082512562.png&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> FOREIGN_KEY_CHECKS <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>接下来创建一个 SpringBoot 项目，并写出 entity、 controller、service、impl、mapper、xml 等需要的代码</p>
<p>entity：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * &lt;p&gt;</span><br><span class="line"> * 菜品表</span><br><span class="line"> * &lt;/p&gt;</span><br><span class="line"> *</span><br><span class="line"> * @author Brath</span><br><span class="line"> * @since 2023-02-23</span><br><span class="line"> */</span><br><span class="line">@Data</span><br><span class="line">@EqualsAndHashCode(callSuper = false)</span><br><span class="line">@TableName(&quot;iv_dishes&quot;)</span><br><span class="line">@ApiModel(value=&quot;IvDishes对象&quot;, description=&quot;菜品表&quot;)</span><br><span class="line">public class IvDishes implements Serializable &#123;</span><br><span class="line"></span><br><span class="line">    private static final long serialVersionUID = 1L;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;唯一ID&quot;)</span><br><span class="line">    @TableId(value = &quot;id&quot;, type = IdType.AUTO)</span><br><span class="line">    private Integer id;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;菜品名字&quot;)</span><br><span class="line">    private String dishesName;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;菜品做法&quot;)</span><br><span class="line">    private String dishesStep;</span><br><span class="line"></span><br><span class="line">    @ApiModelProperty(value = &quot;菜品图片地址&quot;)</span><br><span class="line">    private String dishesUrl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>controller：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 菜品表 前端控制器</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02-23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;/dishes&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IvDishesController</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * SLF4J日志</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">Logger</span> <span class="variable">logger</span> <span class="operator">=</span> LoggerFactory.getLogger(IvDishesController.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 菜品服务接口</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> IvDishesService dishesService;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/***</span></span><br><span class="line"><span class="comment">     * 获取菜品列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@GetMapping(&quot;/getDishes&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">getDishes</span><span class="params">(<span class="meta">@RequestParam(value = &quot;page&quot;, defaultValue = &quot;1&quot;)</span> Integer page, <span class="meta">@RequestParam(value = &quot;size&quot;, defaultValue = &quot;8&quot;)</span> Integer size)</span> &#123;</span><br><span class="line">        logger.info(<span class="string">&quot;【用户服务】获取菜品列表,开始&quot;</span>);</span><br><span class="line">        Map&lt;Object, Object&gt; result = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        IPage&lt;IvDishes&gt; prizeRecords = dishesService.getDishes(page, size);</span><br><span class="line">        <span class="keyword">if</span> (CollectionUtils.isEmpty(prizeRecords.getRecords())) &#123;</span><br><span class="line">            result.put(<span class="string">&quot;fail&quot;</span>, ResponseCode.DATA_DOES_NOT_EXIST);</span><br><span class="line">            logger.error(<span class="string">&quot;【用户服务】获取菜品列表,服务错误:&#123;&#125;&quot;</span>, ResponseCode.DATA_DOES_NOT_EXIST);</span><br><span class="line">        &#125;</span><br><span class="line">        result.put(<span class="string">&quot;prizeRecords&quot;</span>, prizeRecords.getRecords());</span><br><span class="line">        logger.info(<span class="string">&quot;【用户服务】获取菜品列表,完毕&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ResponseUtil.ok(result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>service：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 菜品表 服务类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02-23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IvDishesService</span> <span class="keyword">extends</span> <span class="title class_">IService</span>&lt;IvDishes&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取菜品列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    IPage&lt;IvDishes&gt; <span class="title function_">getDishes</span><span class="params">(Integer page, Integer size)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>impl：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 菜品表 服务实现类</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02-23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">IvDishesServiceImpl</span> <span class="keyword">extends</span> <span class="title class_">ServiceImpl</span>&lt;IvDishesMapper, IvDishes&gt; <span class="keyword">implements</span> <span class="title class_">IvDishesService</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取菜品列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> page</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> size</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> IPage&lt;IvDishes&gt; <span class="title function_">getDishes</span><span class="params">(Integer page, Integer size)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> baseMapper.getDishes(<span class="keyword">new</span> <span class="title class_">Page</span>&lt;&gt;(page, size), <span class="keyword">new</span> <span class="title class_">QueryWrapper</span>&lt;&gt;());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mapper：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * &lt;p&gt;</span></span><br><span class="line"><span class="comment"> * 菜品表 Mapper 接口</span></span><br><span class="line"><span class="comment"> * &lt;/p&gt;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@author</span> Brath</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@since</span> 2023-02-23</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IvDishesMapper</span> <span class="keyword">extends</span> <span class="title class_">BaseMapper</span>&lt;IvDishes&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取菜品列表</span></span><br><span class="line"><span class="comment">     *</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectPage</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> objectQueryWrapper</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    IPage&lt;IvDishes&gt; <span class="title function_">getDishes</span><span class="params">(Page&lt;Object&gt; objectPage, QueryWrapper&lt;Object&gt; objectQueryWrapper)</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>xml：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span> <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span> <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.brath.mapper.IvDishesMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 通用查询映射结果 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">resultMap</span> <span class="attr">id</span>=<span class="string">&quot;DishesMap&quot;</span> <span class="attr">type</span>=<span class="string">&quot;cn.brath.entity.IvDishes&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">id</span> <span class="attr">column</span>=<span class="string">&quot;id&quot;</span> <span class="attr">property</span>=<span class="string">&quot;id&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dishes_name&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dishesName&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dishes_step&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dishesStep&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">result</span> <span class="attr">column</span>=<span class="string">&quot;dishes_url&quot;</span> <span class="attr">property</span>=<span class="string">&quot;dishesUrl&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">resultMap</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;getDishes&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.brath.entity.IvDishes&quot;</span>&gt;</span></span><br><span class="line">        select d.*</span><br><span class="line">        from iv_dishes d</span><br><span class="line">        ORDER BY RAND()</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>application.yaml 配置：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">9999</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">druid:</span></span><br><span class="line">      <span class="attr">driver-class-name:</span> <span class="string">com.mysql.jdbc.Driver</span></span><br><span class="line">      <span class="attr">url:</span> <span class="string">jdbc:mysql://127.0.0.1:3306/iv-user-services?createDatabaseIfNotExist=true&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-8&amp;serverTimezone=Asia/Shanghai&amp;nullCatalogMeansCurrent=true</span></span><br><span class="line">      <span class="attr">username:</span> <span class="string">&#x27;root&#x27;</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">&#x27;root&#x27;</span></span><br><span class="line">      <span class="attr">initial-size:</span> <span class="number">10</span></span><br><span class="line">      <span class="attr">max-active:</span> <span class="number">100</span></span><br><span class="line">      <span class="attr">min-idle:</span> <span class="number">10</span></span><br><span class="line">      <span class="attr">max-wait:</span> <span class="number">6000</span></span><br><span class="line">      <span class="attr">pool-prepared-statements:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">max-pool-prepared-statement-per-connection-size:</span> <span class="number">20</span></span><br><span class="line">      <span class="attr">time-between-eviction-runs-millis:</span> <span class="number">60000</span></span><br><span class="line">      <span class="attr">min-evictable-idle-time-millis:</span> <span class="number">300000</span></span><br><span class="line">      <span class="comment">#Oracle需要打开注释</span></span><br><span class="line">      <span class="comment">#      validation-query: SELECT 1 FROM DUAL</span></span><br><span class="line">      <span class="attr">test-while-idle:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">test-on-borrow:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">test-on-return:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">stat-view-servlet:</span></span><br><span class="line">        <span class="attr">enabled:</span> <span class="literal">true</span></span><br><span class="line">        <span class="attr">url-pattern:</span> <span class="string">/druid/*</span></span><br><span class="line">        <span class="comment">#login-username: admin</span></span><br><span class="line">        <span class="comment">#login-password: admin</span></span><br><span class="line">        <span class="comment">#达梦数据库，需要注释掉，其他数据库可以打开</span></span><br><span class="line">      <span class="attr">filter:</span></span><br><span class="line">        <span class="attr">stat:</span></span><br><span class="line">          <span class="attr">log-slow-sql:</span> <span class="literal">true</span></span><br><span class="line">          <span class="attr">slow-sql-millis:</span> <span class="number">1000</span></span><br><span class="line">          <span class="attr">merge-sql:</span> <span class="literal">false</span></span><br><span class="line">        <span class="attr">wall:</span></span><br><span class="line">          <span class="attr">config:</span></span><br><span class="line">            <span class="attr">multi-statement-allow:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>经过如上一系列配置，我们项目启动成功并可以访问到接口：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224124319493.png" alt="image-20230224124319493"></p>
<p>接下来只要把程序部署上线就搞定了！</p>
<p>部署后台程序：</p>
<p>将我们的 Dockerfile、运行脚本、jar 包传入服务器</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224124656682.png" alt="image-20230224124656682"></p>
<p>Dockerfile:</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#java8环境</span></span><br><span class="line"><span class="keyword">FROM</span> openkbs/jdk11-mvn-py3</span><br><span class="line"></span><br><span class="line"><span class="comment">#root用户</span></span><br><span class="line"><span class="keyword">USER</span> root</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置时区</span></span><br><span class="line"><span class="keyword">ENV</span> TZ=Asia/Shanghai</span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">ln</span> -snf /usr/share/zoneinfo/<span class="variable">$TZ</span> /etc/localtime &amp;&amp; <span class="built_in">echo</span> <span class="variable">$TZ</span> &gt; /etc/timezone</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Auth</span></span><br><span class="line"><span class="keyword">MAINTAINER</span> Brath</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置工作目录集</span></span><br><span class="line"><span class="keyword">WORKDIR</span><span class="language-bash"> /root/weatWork</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#复制jars和命令</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> *.jar /root/weatWork/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="language-bash"> run.sh /root/weatWork/run.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#脚本权限设置</span></span><br><span class="line"><span class="keyword">RUN</span><span class="language-bash"> <span class="built_in">chmod</span> +x /root/weatWork/run.sh</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">9999</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="1dockerfile打包镜像"><a class="markdownIt-Anchor" href="#1dockerfile打包镜像">#</a> 1.Dockerfile 打包镜像</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.进入工作目录</span><br><span class="line">2.docker build -t weat .</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224124821870.png" alt="image-20230224124821870"></p>
<h3 id="2运行容器"><a class="markdownIt-Anchor" href="#2运行容器">#</a> 2. 运行容器</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -dit -p 9999:9999 --privileged=true -P  --name  weat weat /bin/bash -c &quot;tail -f /dev/null&quot; -g &quot;daemon off;&quot;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224124959281.png" alt="image-20230224124959281"></p>
<h3 id="3启动jar包"><a class="markdownIt-Anchor" href="#3启动jar包">#</a> 3. 启动 Jar 包</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">进入容器</span></span><br><span class="line">docker exec -it weat bash</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">运行脚本</span></span><br><span class="line">sh run.sh</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看日志</span></span><br><span class="line">tail -100f weatlog.log</span><br></pre></td></tr></table></figure>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224125037992.png" alt="image-20230224125037992"></p>
<h3 id="4联调接口"><a class="markdownIt-Anchor" href="#4联调接口">#</a> 4. 联调接口</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224125210437.png" alt="image-20230224125210437"></p>
<h2 id="五-app移动端开发flutter"><a class="markdownIt-Anchor" href="#五-app移动端开发flutter">#</a> 五、APP 移动端开发（Flutter）</h2>
<h4 id="weatapp架构设计大概如下"><a class="markdownIt-Anchor" href="#weatapp架构设计大概如下">#</a> weatApp 架构设计大概如下：</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">lib:</span><br><span class="line"></span><br><span class="line">​	common 通用层</span><br><span class="line"></span><br><span class="line">​	core 核心层</span><br><span class="line"></span><br><span class="line">​	routers 路由曾</span><br><span class="line"></span><br><span class="line">​	utils 工具层</span><br><span class="line"></span><br><span class="line">​	viewmodel 视图模型层</span><br><span class="line"></span><br><span class="line">​	views 视图层</span><br></pre></td></tr></table></figure>
<p>需要安装的依赖：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#网络请求</span></span><br><span class="line"><span class="attr">dio:</span> <span class="string">^4.0.6</span></span><br><span class="line"><span class="comment">#getx </span></span><br><span class="line"><span class="attr">get:</span> <span class="string">^4.6.5</span></span><br><span class="line"><span class="comment">#透明弹出框</span></span><br><span class="line"><span class="attr">fluttertoast:</span> <span class="string">^8.0.8</span></span><br><span class="line"><span class="comment">#屏幕适配</span></span><br><span class="line"><span class="attr">flutter_screenutil:</span> <span class="string">^5.5.3+2</span></span><br><span class="line"><span class="comment">#全局状态管理</span></span><br><span class="line"><span class="attr">provider:</span> <span class="string">^6.0.1</span></span><br><span class="line"><span class="comment">#轮播图</span></span><br><span class="line"><span class="attr">flutter_swiper_plus:</span> <span class="string">^2.0.4</span></span><br><span class="line"><span class="comment"># GET WIDGET UI库</span></span><br><span class="line"><span class="attr">getwidget:</span> <span class="string">^2.0.5</span></span><br><span class="line"><span class="comment">#图片缓存</span></span><br><span class="line"><span class="attr">cached_network_image:</span> <span class="string">^3.2.0</span></span><br><span class="line"><span class="comment">#图片放大缩小</span></span><br><span class="line"><span class="attr">photo_view:</span> <span class="string">^0.13.0</span></span><br><span class="line"><span class="comment">#权限申请</span></span><br><span class="line"><span class="attr">permission_handler:</span> <span class="string">^9.2.0</span></span><br><span class="line"><span class="comment">#贝壳组件库</span></span><br><span class="line"><span class="attr">bruno:</span> <span class="string">^2.2.0</span></span><br><span class="line"><span class="comment">#easyloading</span></span><br><span class="line"><span class="attr">flutter_easyloading:</span> <span class="string">^3.0.3</span></span><br></pre></td></tr></table></figure>
<h3 id="代码如下"><a class="markdownIt-Anchor" href="#代码如下">#</a> 代码如下：</h3>
<h4 id="commondart"><a class="markdownIt-Anchor" href="#commondart">#</a> common.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:bruno/bruno.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:getwidget/getwidget.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/main.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * Common组件库</span></span><br><span class="line"><span class="comment"> * @Auth: Brath</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 获取title的AppBar</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">AppBar getAppBar(<span class="built_in">String</span> title, &#123;<span class="keyword">required</span> context&#125;) &#123;</span><br><span class="line">  <span class="keyword">return</span> AppBar(</span><br><span class="line">      toolbarHeight: <span class="number">40.0</span>.h,</span><br><span class="line">      centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      shadowColor: Color.fromARGB(<span class="number">255</span>, <span class="number">59</span>, <span class="number">82</span>, <span class="number">76</span>),</span><br><span class="line">      backgroundColor: Colors.transparent,</span><br><span class="line">      leading: <span class="keyword">null</span>,</span><br><span class="line">      leadingWidth: <span class="number">30.</span>w,</span><br><span class="line">      elevation: <span class="number">0.0</span>,</span><br><span class="line">      actions: [],</span><br><span class="line">      title: (Text(</span><br><span class="line">        title,</span><br><span class="line">        style: TextStyle(</span><br><span class="line">            fontSize: <span class="number">16.</span>sp,</span><br><span class="line">            color: Colors.black,</span><br><span class="line">            fontFamily: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            fontWeight: FontWeight.bold),</span><br><span class="line">      )));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 获取卡片圆形背景容器</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">getCardContainer</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  getCardContainer(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">this</span>.isBorder,</span><br><span class="line">    <span class="keyword">this</span>.BorderCircular,</span><br><span class="line">    <span class="keyword">this</span>.width,</span><br><span class="line">    <span class="keyword">this</span>.height,</span><br><span class="line">    <span class="keyword">this</span>.widget,</span><br><span class="line">    <span class="keyword">this</span>.margin,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool?</span> isBorder;</span><br><span class="line">  <span class="built_in">double?</span> BorderCircular;</span><br><span class="line">  <span class="built_in">double?</span> height;</span><br><span class="line">  <span class="built_in">double?</span> width;</span><br><span class="line">  Widget? widget;</span><br><span class="line">  EdgeInsetsGeometry? margin;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: margin,</span><br><span class="line">      decoration: isBorder == <span class="keyword">true</span></span><br><span class="line">          ? BoxDecoration(</span><br><span class="line">              color: Colors.white,</span><br><span class="line">              shape: BoxShape.rectangle,</span><br><span class="line">              boxShadow: [</span><br><span class="line">                BoxShadow(</span><br><span class="line">                  color: Colors.grey[<span class="number">200</span>]!,</span><br><span class="line">                  offset: Offset(<span class="number">1.</span>w, <span class="number">1.</span>h),</span><br><span class="line">                  blurRadius: <span class="number">1.</span>r,</span><br><span class="line">                  spreadRadius: <span class="number">1.</span>r,</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">              border: Border.all(color: Colors.white, width: <span class="number">1.</span>w), <span class="comment">// border</span></span><br><span class="line">              borderRadius:</span><br><span class="line">                  BorderRadius.circular((BorderCircular ?? <span class="number">15.</span>r)), <span class="comment">// 圆角</span></span><br><span class="line">            )</span><br><span class="line">          : <span class="keyword">null</span>,</span><br><span class="line">      width: width,</span><br><span class="line">      height: height,</span><br><span class="line">      child: widget,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="zoomimagedart"><a class="markdownIt-Anchor" href="#zoomimagedart">#</a> ZoomImage.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:ui&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/services.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ZoomImage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  ZoomImage(&#123;Key? key, <span class="keyword">this</span>.url&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="built_in">String?</span> url;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;StatefulWidget&gt; createState() &#123;</span><br><span class="line">    <span class="keyword">return</span> _ZoomImage();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_ZoomImage</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">ZoomImage</span>&gt; <span class="title">with</span> <span class="title">SingleTickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  AnimationController? _controller;</span><br><span class="line">  Animation&lt;Offset&gt;? _animation;</span><br><span class="line">  Offset _offset = Offset.zero;</span><br><span class="line">  <span class="built_in">double</span> _scale = <span class="number">1.0</span>;</span><br><span class="line">  Offset? _normalizedOffset;</span><br><span class="line">  <span class="built_in">double?</span> _previousScale;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">double</span> _kMinFlingVelocity = <span class="number">600.0</span>;</span><br><span class="line">  <span class="built_in">bool</span> _isEnlarge = <span class="keyword">false</span>;</span><br><span class="line">  <span class="built_in">bool</span> _isHideTitleBar = <span class="keyword">false</span>;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _controller = AnimationController(vsync: <span class="keyword">this</span>);</span><br><span class="line">    _controller?.addListener(() &#123;</span><br><span class="line">      setState(() &#123;</span><br><span class="line">        _offset = _animation!.value;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">    _controller!.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Offset _clampOffset(Offset offset) &#123;</span><br><span class="line">    <span class="keyword">final</span> Size size = context.size!;</span><br><span class="line">    <span class="comment">// widget的屏幕宽度</span></span><br><span class="line">    <span class="keyword">final</span> Offset minOffset = Offset(size.width, size.height) * (<span class="number">1.0</span> - _scale);</span><br><span class="line">    <span class="comment">// 限制他的最小尺寸</span></span><br><span class="line">    <span class="keyword">return</span> Offset(</span><br><span class="line">        offset.dx.clamp(minOffset.dx, <span class="number">0.0</span>), offset.dy.clamp(minOffset.dy, <span class="number">0.0</span>));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _handleOnScaleStart(ScaleStartDetails details) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _isHideTitleBar = <span class="keyword">true</span>;</span><br><span class="line">      _previousScale = _scale;</span><br><span class="line">      _normalizedOffset = (details.focalPoint - _offset) / _scale;</span><br><span class="line">      <span class="comment">// 计算图片放大后的位置</span></span><br><span class="line">      _controller!.stop();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _handleOnScaleUpdate(ScaleUpdateDetails details) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _scale = (_previousScale! * details.scale).clamp(<span class="number">1.0</span>, <span class="number">3.0</span>);</span><br><span class="line">      <span class="comment">// 限制放大倍数 1~3倍</span></span><br><span class="line">      _offset = _clampOffset(details.focalPoint - _normalizedOffset! * _scale);</span><br><span class="line">      <span class="comment">// 更新当前位置</span></span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _handleOnScaleEnd(ScaleEndDetails details) &#123;</span><br><span class="line">    _setSystemUi();</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> magnitude = details.velocity.pixelsPerSecond.distanceSquared;</span><br><span class="line">    <span class="keyword">if</span> (magnitude &lt; _kMinFlingVelocity) <span class="keyword">return</span>;</span><br><span class="line">    <span class="keyword">final</span> Offset direction = details.velocity.pixelsPerSecond / magnitude;</span><br><span class="line">    <span class="comment">// 计算当前的方向</span></span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">double</span> distance = (Offset.zero &amp; context.size!).shortestSide;</span><br><span class="line">    <span class="comment">// 计算放大倍速，并相应的放大宽和高，比如原来是600*480的图片，放大后倍数为1.25倍时，宽和高是同时变化的</span></span><br><span class="line">    _animation = _controller!.drive(Tween&lt;Offset&gt;(</span><br><span class="line">        begin: _offset, end: _clampOffset(_offset + direction * distance)));</span><br><span class="line">    _controller!</span><br><span class="line">      ..value = <span class="number">0.0</span></span><br><span class="line">      ..fling(velocity: magnitude / <span class="number">1000.0</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _onDoubleTap() &#123;</span><br><span class="line">    _isHideTitleBar = <span class="keyword">true</span>;</span><br><span class="line">    _setSystemUi();</span><br><span class="line">    Size size = context.size!;</span><br><span class="line">    _isEnlarge = !_isEnlarge;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      <span class="keyword">if</span> (!_isEnlarge) &#123;</span><br><span class="line">        _scale = <span class="number">2.0</span>;</span><br><span class="line">        _offset = Offset(-(size.width / <span class="number">2</span>), -(size.height / <span class="number">2</span>));</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        _scale = <span class="number">1.0</span>;</span><br><span class="line">        _offset = Offset.zero;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _onTap() &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      _isHideTitleBar = !_isHideTitleBar;</span><br><span class="line">    &#125;);</span><br><span class="line">    _setSystemUi();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Stack(</span><br><span class="line">      children: [_bodyView(), _titleBar()],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _bodyView() &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onScaleStart: _handleOnScaleStart,</span><br><span class="line">      onScaleUpdate: _handleOnScaleUpdate,</span><br><span class="line">      onScaleEnd: _handleOnScaleEnd,</span><br><span class="line">      onDoubleTap: _onDoubleTap,</span><br><span class="line">      onTap: _onTap,</span><br><span class="line">      child: Container(</span><br><span class="line">        color: _isHideTitleBar ? Colors.black : Colors.white,</span><br><span class="line">        child: SizedBox.expand(</span><br><span class="line">          child: ClipRect(</span><br><span class="line">            child: Transform(</span><br><span class="line">              transform: Matrix4.identity()</span><br><span class="line">                ..translate(_offset.dx, _offset.dy)</span><br><span class="line">                ..scale(_scale),</span><br><span class="line">              child: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                children: [</span><br><span class="line">                  SizedBox(</span><br><span class="line">                      width: <span class="number">700.0</span>.w,</span><br><span class="line">                      height: <span class="number">600.0</span>.h,</span><br><span class="line">                      child: Image.network(widget.url!)),</span><br><span class="line">                  Container()</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _titleBar() &#123;</span><br><span class="line">    <span class="keyword">return</span> Offstage(</span><br><span class="line">      child: Container(</span><br><span class="line">        alignment: Alignment.centerLeft,</span><br><span class="line">        padding: EdgeInsets.only(</span><br><span class="line">            top: MediaQueryData.fromWindow(<span class="built_in">window</span>).padding.top,</span><br><span class="line">            left: ScreenUtil().setWidth(<span class="number">24</span>)),</span><br><span class="line">        color: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">32</span>, <span class="number">32</span>, <span class="number">32</span>),</span><br><span class="line">        height: MediaQuery.of(context).size.height * <span class="number">0.1</span>,</span><br><span class="line">        width: MediaQuery.of(context).size.width,</span><br><span class="line">        child: GestureDetector(</span><br><span class="line">          child: Icon(</span><br><span class="line">            Icons.arrow_back,</span><br><span class="line">            size: <span class="number">30.0</span>.w,</span><br><span class="line">            color: Colors.white,</span><br><span class="line">          ),</span><br><span class="line">          onTap: () &#123;</span><br><span class="line">            Navigator.pop(context);</span><br><span class="line">          &#125;,</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      offstage: _isHideTitleBar,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  _setSystemUi() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_isHideTitleBar) &#123;</span><br><span class="line">      SystemChrome.setEnabledSystemUIMode(SystemUiMode.edgeToEdge);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      SystemChrome.setEnabledSystemUIMode(SystemUiMode.manual);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="globaldart"><a class="markdownIt-Anchor" href="#globaldart">#</a> Global.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Global</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> <span class="built_in">String</span> BaseUrl = <span class="string">&#x27;http://127.0.0.1:9999/&#x27;</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*请求dio对象 */</span></span><br><span class="line">  <span class="keyword">late</span> Dio dio;</span><br><span class="line">  <span class="comment">/*通用超时 */</span></span><br><span class="line">  <span class="built_in">int</span> timeOut = <span class="number">50000</span>;</span><br><span class="line">  <span class="comment">/*请求单例 */</span></span><br><span class="line">  <span class="keyword">static</span> Global? _instance;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*获取实例 */</span></span><br><span class="line">  <span class="keyword">static</span> Global? getInstance() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_instance == <span class="keyword">null</span>) _instance = Global();</span><br><span class="line">    <span class="keyword">return</span> _instance;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Global() &#123;</span><br><span class="line">    dio = Dio();</span><br><span class="line">    dio.options = BaseOptions(</span><br><span class="line">        baseUrl: BaseUrl,</span><br><span class="line">        connectTimeout: timeOut,</span><br><span class="line">        sendTimeout: timeOut,</span><br><span class="line">        receiveTimeout: timeOut,</span><br><span class="line">        contentType: Headers.jsonContentType,</span><br><span class="line">        headers: &#123;</span><br><span class="line">          <span class="string">&quot;Access-Control-Allow-Origin&quot;</span>: <span class="string">&quot;*&quot;</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    <span class="comment">// 请求拦截器 and 响应拦截机 and 错误处理</span></span><br><span class="line">    dio.interceptors.add(InterceptorsWrapper(onRequest: (options, handler) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 请求数据 ==========================&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;url = <span class="subst">$&#123;options.uri.toString()&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;headers = <span class="subst">$&#123;options.headers&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;params = <span class="subst">$&#123;options.data&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 请求数据 ==========================&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> handler.next(options);</span><br><span class="line">    &#125;, onResponse: (response, handler) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 响应数据 ==========================&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;code = <span class="subst">$&#123;response.statusCode&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;data = <span class="subst">$&#123;response.data&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 响应数据 ==========================&quot;</span>);</span><br><span class="line">      handler.next(response);</span><br><span class="line">    &#125;, onError: (DioError e, handler) &#123;</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 错误响应数据 ======================&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;type = <span class="subst">$&#123;e.type&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;message = <span class="subst">$&#123;e.message&#125;</span>&quot;</span>);</span><br><span class="line">      <span class="built_in">print</span>(<span class="string">&quot;\n================== 错误响应数据 ======================&quot;</span>);</span><br><span class="line">      <span class="keyword">return</span> handler.next(e);</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="routesdart"><a class="markdownIt-Anchor" href="#routesdart">#</a> routes.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: prefer_const_constructors</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/cupertino.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/views/index/IndexView.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, WidgetBuilder&gt; routes = &#123;</span><br><span class="line">  <span class="string">&quot;/&quot;</span>: (context) =&gt; IndexView(),</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 渐隐跳转路由</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> opcityPush(BuildContext context, Widget view, &#123;<span class="built_in">int?</span> milliseconds&#125;) &#123;</span><br><span class="line">  Navigator.push(</span><br><span class="line">    context,</span><br><span class="line">    PageRouteBuilder(</span><br><span class="line">      transitionDuration:</span><br><span class="line">          <span class="built_in">Duration</span>(milliseconds: milliseconds ?? <span class="number">300</span>), <span class="comment">//动画时间为300毫秒</span></span><br><span class="line">      pageBuilder: (BuildContext context, Animation&lt;<span class="built_in">double</span>&gt; animation,</span><br><span class="line">          Animation secondaryAnimation) &#123;</span><br><span class="line">        <span class="keyword">return</span> FadeTransition(</span><br><span class="line">          <span class="comment">//使用渐隐渐入过渡,</span></span><br><span class="line">          opacity: animation,</span><br><span class="line">          child: view, <span class="comment">//路由B</span></span><br><span class="line">        );</span><br><span class="line">      &#125;,</span><br><span class="line">    ),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 带路由树跳转</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> Push(BuildContext context, Widget view) &#123;</span><br><span class="line">  Navigator.push(</span><br><span class="line">      context,</span><br><span class="line">      CupertinoPageRoute(</span><br><span class="line">        builder: (context) =&gt; view,</span><br><span class="line">      ));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> NavigatorPop(BuildContext context) &#123;</span><br><span class="line">  Navigator.of(context).pop();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 返回上一级路由树，没有上级会黑屏</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> Pop(BuildContext context, Widget view) &#123;</span><br><span class="line">  Navigator.pop(</span><br><span class="line">      context,</span><br><span class="line">      CupertinoPageRoute(</span><br><span class="line">        builder: (context) =&gt; view,</span><br><span class="line">      ));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="showmessage_utildart"><a class="markdownIt-Anchor" href="#showmessage_utildart">#</a> showmessage_util.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ignore_for_file: prefer_equal_for_default_values, sized_box_for_whitespace</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:fluttertoast/fluttertoast.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/// <span class="language-markdown">@author brath</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">@创建时间：2022/5/10</span></span></span><br><span class="line"><span class="comment">/// <span class="language-markdown">封装自定义弹框</span></span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DialogUtils</span> </span>&#123;</span><br><span class="line">  <span class="comment">/// <span class="language-markdown">显示普通消息</span></span></span><br><span class="line">  <span class="keyword">static</span> showMessage(<span class="built_in">String</span> msg,</span><br><span class="line">      &#123;toastLength: Toast.LENGTH_LONG,</span><br><span class="line">      gravity: ToastGravity.CENTER,</span><br><span class="line">      timeInSecForIosWeb: <span class="number">2</span>,</span><br><span class="line">      textColor: Colors.black,</span><br><span class="line">      backgroundColor: Colors.grey,</span><br><span class="line">      fontSize: <span class="number">16.0</span>&#125;) &#123;</span><br><span class="line">    <span class="comment">// 先关闭弹框再显示对应弹框</span></span><br><span class="line">    Fluttertoast.cancel();</span><br><span class="line">    Fluttertoast.showToast(</span><br><span class="line">      msg: msg,</span><br><span class="line">      toastLength: toastLength,</span><br><span class="line">      webShowClose: <span class="keyword">true</span>,</span><br><span class="line">      gravity: gravity,</span><br><span class="line">      textColor: textColor,</span><br><span class="line">      timeInSecForIosWeb: timeInSecForIosWeb,</span><br><span class="line">      backgroundColor: Colors.grey[<span class="number">50</span>],</span><br><span class="line">      fontSize: <span class="number">13.0</span>.sp,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="index_viewmodeldart"><a class="markdownIt-Anchor" href="#index_viewmodeldart">#</a> index_viewmodel.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:dio/dio.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexViewModel</span> <span class="keyword">extends</span> <span class="title">ChangeNotifier</span> </span>&#123;</span><br><span class="line">  <span class="built_in">bool?</span> isLotte = <span class="keyword">false</span>;</span><br><span class="line">  <span class="built_in">Map?</span> currentDishes = &#123;&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool?</span> <span class="keyword">get</span> getIsLotte &#123;</span><br><span class="line">    <span class="keyword">return</span> isLotte;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> setIsLotte(<span class="built_in">bool</span> isLotte) &#123;</span><br><span class="line">    <span class="keyword">this</span>.isLotte = isLotte;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Map?</span> <span class="keyword">get</span> getCurrentDishes &#123;</span><br><span class="line">    <span class="keyword">return</span> currentDishes;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> setCurrentDishes(<span class="built_in">Map</span> currentDishes) &#123;</span><br><span class="line">    <span class="keyword">this</span>.currentDishes = currentDishes;</span><br><span class="line">    notifyListeners();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h4 id="indexviewdart"><a class="markdownIt-Anchor" href="#indexviewdart">#</a> IndexView.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:getwidget/getwidget.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/common/ZoomImage.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/core/Global.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/routers/routes.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/utils/showmessage_util.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/viewmodel/index_viewmodel.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/views/index/DishesDetail.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 首页视图</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IndexView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> IndexView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;IndexView&gt; createState() =&gt; _IndexViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_IndexViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">IndexView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">const</span> LotterView();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 轮播抽奖页面</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LotterView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> LotterView(&#123;Key? key&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;LotterView&gt; createState() =&gt; _LotterViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_LotterViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">LotterView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="comment">//抽奖控制器</span></span><br><span class="line">  <span class="keyword">final</span> SimpleLotteryController _simpleLotteryController =</span><br><span class="line">      SimpleLotteryController();</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> page = <span class="number">1</span>;</span><br><span class="line">  <span class="built_in">int</span> size = <span class="number">8</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//奖品列表</span></span><br><span class="line">  <span class="built_in">List</span> dishesList = [];</span><br><span class="line"></span><br><span class="line">  <span class="comment">//奖品loding</span></span><br><span class="line">  <span class="built_in">bool</span> load = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化奖品列表</span></span><br><span class="line">  _initPrizeList() <span class="keyword">async</span> &#123;</span><br><span class="line">    Global.getInstance()!.dio.<span class="keyword">get</span>(<span class="string">&quot;dishes/getDishes&quot;</span>, queryParameters: &#123;</span><br><span class="line">      <span class="string">&#x27;page&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">      <span class="string">&#x27;size&#x27;</span>: <span class="number">8</span>,</span><br><span class="line">    &#125;).then((value) =&gt; &#123;</span><br><span class="line">          dishesList = value.data[<span class="string">&#x27;data&#x27;</span>][<span class="string">&#x27;prizeRecords&#x27;</span>],</span><br><span class="line">          load = <span class="keyword">true</span>,</span><br><span class="line">          setState(() &#123;&#125;)</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _initPrizeList();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _simpleLotteryController.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      body: MediaQuery.removePadding(</span><br><span class="line">        removeTop: <span class="keyword">true</span>,</span><br><span class="line">        context: context,</span><br><span class="line">        child: ListView(</span><br><span class="line">          children: [</span><br><span class="line">            Container(</span><br><span class="line">              width: MediaQuery.of(context).size.width,</span><br><span class="line">              height: MediaQuery.of(context).size.height,</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                gradient: LinearGradient(</span><br><span class="line">                    begin: Alignment.topLeft, <span class="comment">//左中</span></span><br><span class="line">                    end: Alignment.bottomRight, <span class="comment">//右中</span></span><br><span class="line">                    colors: [</span><br><span class="line">                      Theme.of(context).primaryColor,</span><br><span class="line">                      <span class="keyword">const</span> Color.fromRGBO(<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>),</span><br><span class="line">                      <span class="keyword">const</span> Color.fromRGBO(<span class="number">187</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>),</span><br><span class="line">                      Theme.of(context).primaryColor</span><br><span class="line">                    ]),</span><br><span class="line">              ),</span><br><span class="line">              child: Column(</span><br><span class="line">                children: [</span><br><span class="line">                  Container(</span><br><span class="line">                    padding: EdgeInsets.only(top: <span class="number">50.</span>h),</span><br><span class="line">                    child: Wrap(</span><br><span class="line">                      children: [</span><br><span class="line">                        Text(<span class="string">&#x27;今日菜品&#x27;</span>,</span><br><span class="line">                            style: TextStyle(</span><br><span class="line">                              fontSize: <span class="number">32.</span>sp,</span><br><span class="line">                              fontWeight: FontWeight.w600,</span><br><span class="line">                              fontFamily: <span class="string">&#x27;jinbu&#x27;</span>,</span><br><span class="line">                              color: Colors.white,</span><br><span class="line">                            )),</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">&#x27;大放送&#x27;</span>,</span><br><span class="line">                          style: TextStyle(</span><br><span class="line">                              fontSize: <span class="number">32.</span>sp,</span><br><span class="line">                              fontWeight: FontWeight.w600,</span><br><span class="line">                              fontFamily: <span class="string">&#x27;jinbu&#x27;</span>,</span><br><span class="line">                              color: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">252</span>, <span class="number">217</span>, <span class="number">61</span>)),</span><br><span class="line">                        )</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  Container(</span><br><span class="line">                    margin: EdgeInsets.only(top: <span class="number">10.</span>h),</span><br><span class="line">                    alignment: Alignment.center,</span><br><span class="line">                    child: Text(</span><br><span class="line">                      <span class="string">&#x27;猜猜今天是什么菜系？&#x27;</span>,</span><br><span class="line">                      style: TextStyle(</span><br><span class="line">                        fontSize: <span class="number">12.</span>sp,</span><br><span class="line">                        color: Colors.white,</span><br><span class="line">                        fontFamily: <span class="string">&#x27;jinbu&#x27;</span>,</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                  SizedBox(</span><br><span class="line">                    height: <span class="number">10.</span>h,</span><br><span class="line">                  ),</span><br><span class="line">                  Padding(</span><br><span class="line">                    padding: EdgeInsets.all(<span class="number">12.0</span>.sp),</span><br><span class="line">                    child: Container(</span><br><span class="line">                      height: <span class="number">400.</span>h,</span><br><span class="line">                      padding: EdgeInsets.all(<span class="number">14.</span>sp),</span><br><span class="line">                      decoration: BoxDecoration(</span><br><span class="line">                          gradient: LinearGradient(</span><br><span class="line">                              begin: Alignment.topLeft, <span class="comment">//左中</span></span><br><span class="line">                              end: Alignment.bottomRight, <span class="comment">//右中</span></span><br><span class="line">                              colors: [</span><br><span class="line">                                Theme.of(context).primaryColor,</span><br><span class="line">                                <span class="keyword">const</span> Color.fromRGBO(<span class="number">180</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>),</span><br><span class="line">                                <span class="keyword">const</span> Color.fromRGBO(<span class="number">187</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>),</span><br><span class="line">                                Theme.of(context).primaryColor</span><br><span class="line">                              ]),</span><br><span class="line">                          <span class="comment">// color: const Color.fromARGB(255, 205, 221, 235),</span></span><br><span class="line">                          border: Border.all(</span><br><span class="line">                              color: Colors.transparent, width: <span class="number">14.</span>w),</span><br><span class="line">                          borderRadius:</span><br><span class="line">                              BorderRadius.all(Radius.elliptical(<span class="number">20.</span>r, <span class="number">20.</span>r))),</span><br><span class="line">                      child: Column(</span><br><span class="line">                        mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                        children: [</span><br><span class="line">                          load</span><br><span class="line">                              ? SimpleLotteryWidget(</span><br><span class="line">                                  dishesList: dishesList,</span><br><span class="line">                                  simpleLotteryController:</span><br><span class="line">                                      _simpleLotteryController)</span><br><span class="line">                              : SizedBox(</span><br><span class="line">                                  width: <span class="built_in">double</span>.infinity,</span><br><span class="line">                                  height: <span class="number">260.</span>h,</span><br><span class="line">                                  child: <span class="keyword">const</span> GFLoader(</span><br><span class="line">                                      type: GFLoaderType.ios,</span><br><span class="line">                                      loaderColorOne: Colors.blue,</span><br><span class="line">                                      loaderColorTwo: Colors.blue,</span><br><span class="line">                                      loaderColorThree: Colors.blue,</span><br><span class="line">                                      duration: <span class="built_in">Duration</span>(milliseconds: <span class="number">300</span>)),</span><br><span class="line">                                ),</span><br><span class="line">                          <span class="comment">//抽奖按钮</span></span><br><span class="line">                          AnimatedSwitcher(</span><br><span class="line">                            duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">400</span>),</span><br><span class="line">                            child: Provider.of&lt;IndexViewModel&gt;(context,</span><br><span class="line">                                        listen: <span class="keyword">true</span>)</span><br><span class="line">                                    .getIsLotte!</span><br><span class="line">                                ? SizedBox(</span><br><span class="line">                                    height: <span class="number">34.</span>h,</span><br><span class="line">                                    width: MediaQuery.of(context).size.width -</span><br><span class="line">                                        <span class="number">120.</span>w,</span><br><span class="line">                                    child: ElevatedButton(</span><br><span class="line">                                      style: ElevatedButton.styleFrom(</span><br><span class="line">                                        primary: Colors.red[<span class="number">200</span>], <span class="comment">//chan</span></span><br><span class="line">                                        onPrimary: Colors</span><br><span class="line">                                            .white, <span class="comment">//change text color of button</span></span><br><span class="line">                                        shape: RoundedRectangleBorder(</span><br><span class="line">                                          borderRadius:</span><br><span class="line">                                              BorderRadius.circular(<span class="number">30.</span>r),</span><br><span class="line">                                        ),</span><br><span class="line">                                        elevation: <span class="number">3.0</span>.h,</span><br><span class="line">                                      ),</span><br><span class="line">                                      onPressed: () &#123;</span><br><span class="line">                                        <span class="comment">//跳转详情页面</span></span><br><span class="line">                                        Push(</span><br><span class="line">                                            context,</span><br><span class="line">                                            DishesDetailView(</span><br><span class="line">                                                dishes:</span><br><span class="line">                                                    Provider.of&lt;IndexViewModel&gt;(</span><br><span class="line">                                                            context,</span><br><span class="line">                                                            listen: <span class="keyword">false</span>)</span><br><span class="line">                                                        .getCurrentDishes));</span><br><span class="line">                                        <span class="comment">//设置状态</span></span><br><span class="line">                                        Provider.of&lt;IndexViewModel&gt;(context,</span><br><span class="line">                                                listen: <span class="keyword">false</span>)</span><br><span class="line">                                            .setIsLotte(<span class="keyword">false</span>);</span><br><span class="line">                                      &#125;,</span><br><span class="line">                                      child: Row(</span><br><span class="line">                                        mainAxisAlignment:</span><br><span class="line">                                            MainAxisAlignment.center,</span><br><span class="line">                                        children: [</span><br><span class="line">                                          SizedBox(</span><br><span class="line">                                            width: <span class="number">4.</span>w,</span><br><span class="line">                                          ),</span><br><span class="line">                                          Text(</span><br><span class="line">                                            <span class="string">&#x27;点击查看：<span class="subst">$&#123;Provider.of&lt;IndexViewModel&gt;(context, listen: <span class="keyword">false</span>).getCurrentDishes![<span class="string">&#x27;dishesName&#x27;</span>]&#125;</span>&#x27;</span>,</span><br><span class="line">                                            style: TextStyle(</span><br><span class="line">                                                fontWeight: FontWeight.w500,</span><br><span class="line">                                                fontFamily: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                                                color: Colors.white,</span><br><span class="line">                                                fontSize: <span class="number">14.0</span>.sp),</span><br><span class="line">                                          ),</span><br><span class="line">                                        ],</span><br><span class="line">                                      ),</span><br><span class="line">                                    ))</span><br><span class="line">                                : SizedBox(</span><br><span class="line">                                    height: <span class="number">34.</span>h,</span><br><span class="line">                                    width: MediaQuery.of(context).size.width -</span><br><span class="line">                                        <span class="number">220.</span>w,</span><br><span class="line">                                    child: ElevatedButton(</span><br><span class="line">                                      style: ElevatedButton.styleFrom(</span><br><span class="line">                                        primary: Colors.red[<span class="number">200</span>], <span class="comment">//chan</span></span><br><span class="line">                                        onPrimary: Colors</span><br><span class="line">                                            .white, <span class="comment">//change text color of button</span></span><br><span class="line">                                        shape: RoundedRectangleBorder(</span><br><span class="line">                                          borderRadius:</span><br><span class="line">                                              BorderRadius.circular(<span class="number">30.</span>r),</span><br><span class="line">                                        ),</span><br><span class="line">                                        elevation: <span class="number">3.0</span>.h,</span><br><span class="line">                                      ),</span><br><span class="line">                                      onPressed: () &#123;</span><br><span class="line">                                        <span class="comment">//开始抽奖</span></span><br><span class="line">                                        _simpleLotteryController.start(</span><br><span class="line">                                            Random.secure().nextInt(<span class="number">2</span>)); <span class="comment">//开启</span></span><br><span class="line">                                        setState(() &#123;&#125;);</span><br><span class="line">                                      &#125;,</span><br><span class="line">                                      child: Row(</span><br><span class="line">                                        mainAxisAlignment:</span><br><span class="line">                                            MainAxisAlignment.center,</span><br><span class="line">                                        children: [</span><br><span class="line">                                          SizedBox(</span><br><span class="line">                                            width: <span class="number">4.</span>w,</span><br><span class="line">                                          ),</span><br><span class="line">                                          Text(</span><br><span class="line">                                            <span class="string">&#x27;吃啥&#x27;</span>,</span><br><span class="line">                                            style: TextStyle(</span><br><span class="line">                                                fontWeight: FontWeight.w500,</span><br><span class="line">                                                fontFamily: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">                                                color: Colors.white,</span><br><span class="line">                                                fontSize: <span class="number">14.0</span>.sp),</span><br><span class="line">                                          ),</span><br><span class="line">                                        ],</span><br><span class="line">                                      ),</span><br><span class="line">                                    )),</span><br><span class="line">                          )</span><br><span class="line">                        ],</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ],</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//奖品参数</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleLotteryValue</span> </span>&#123;</span><br><span class="line">  SimpleLotteryValue(</span><br><span class="line">      &#123;<span class="keyword">this</span>.target = <span class="number">0</span>, <span class="keyword">this</span>.isFinish = <span class="keyword">false</span>, <span class="keyword">this</span>.isPlaying = <span class="keyword">false</span>&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">中奖目标</span></span></span><br><span class="line">  <span class="built_in">int</span> target = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> isPlaying = <span class="keyword">false</span>;</span><br><span class="line">  <span class="built_in">bool</span> isFinish = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">  SimpleLotteryValue copyWith(&#123;</span><br><span class="line">    <span class="built_in">int</span> target = <span class="number">0</span>,</span><br><span class="line">    <span class="built_in">bool</span> isPlaying = <span class="keyword">false</span>,</span><br><span class="line">    <span class="built_in">bool</span> isFinish = <span class="keyword">false</span>,</span><br><span class="line">  &#125;) &#123;</span><br><span class="line">    <span class="keyword">return</span> SimpleLotteryValue(</span><br><span class="line">        target: target, isFinish: isFinish, isPlaying: isPlaying);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="built_in">String</span> toString() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;target : <span class="subst">$target</span> , isPlaying : <span class="subst">$isPlaying</span> , isFinish : <span class="subst">$isFinish</span>&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//抽奖控制器</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleLotteryController</span> <span class="keyword">extends</span> <span class="title">ValueNotifier</span> </span>&#123;</span><br><span class="line">  SimpleLotteryController() : <span class="keyword">super</span>(SimpleLotteryValue());</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">开启抽奖</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">[target] 中奖目标</span></span></span><br><span class="line">  <span class="keyword">void</span> start(<span class="built_in">int</span> target) &#123;</span><br><span class="line">    <span class="comment">// 九宫格抽奖里范围为0~8</span></span><br><span class="line">    <span class="keyword">assert</span>(target &gt;= <span class="number">0</span> &amp;&amp; target &lt;= <span class="number">8</span>);</span><br><span class="line">    <span class="keyword">if</span> (value.isPlaying) &#123;</span><br><span class="line">      <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    value = value.copyWith(target: target, isPlaying: <span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> finish() &#123;</span><br><span class="line">    value = value.copyWith(isFinish: <span class="keyword">true</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 奖品列表容器 </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SimpleLotteryWidget</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="keyword">final</span> SimpleLotteryController simpleLotteryController;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">List</span> dishesList;</span><br><span class="line">  <span class="keyword">const</span> SimpleLotteryWidget(</span><br><span class="line">      &#123;Key? key,</span><br><span class="line">      <span class="keyword">required</span> <span class="keyword">this</span>.dishesList,</span><br><span class="line">      <span class="keyword">required</span> <span class="keyword">this</span>.simpleLotteryController&#125;)</span><br><span class="line">      : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;SimpleLotteryWidget&gt; createState() =&gt; _SimpleLotteryWidgetState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_SimpleLotteryWidgetState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">SimpleLotteryWidget</span>&gt;</span></span><br><span class="line"><span class="class">    <span class="title">with</span> <span class="title">TickerProviderStateMixin</span> </span>&#123;</span><br><span class="line">  Future&lt;<span class="built_in">int</span>&gt;? future; <span class="comment">// 标识</span></span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> FutureBuilder(</span><br><span class="line">      future: future,</span><br><span class="line">      builder: (context, snapshot) &#123;</span><br><span class="line">        <span class="keyword">return</span> Container(</span><br><span class="line">            margin: EdgeInsets.all(<span class="number">5.</span>h),</span><br><span class="line">            width: <span class="built_in">double</span>.infinity,</span><br><span class="line">            height: <span class="number">280.</span>h,</span><br><span class="line">            child: GridView.builder(</span><br><span class="line">                physics: <span class="keyword">const</span> NeverScrollableScrollPhysics(),</span><br><span class="line">                itemCount: <span class="number">9</span>,</span><br><span class="line">                gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(</span><br><span class="line">                    crossAxisCount: <span class="number">3</span>,</span><br><span class="line">                    crossAxisSpacing: <span class="number">8.</span>w,</span><br><span class="line">                    mainAxisSpacing: <span class="number">8.</span>h),</span><br><span class="line">                itemBuilder: (context, index) &#123;</span><br><span class="line">                  <span class="keyword">if</span> (index != <span class="number">4</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> commodity(index);</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="keyword">return</span> Image.network(</span><br><span class="line">                    <span class="string">&#x27;https://brath.cloud/app_log.png&#x27;</span>,</span><br><span class="line">                    fit: BoxFit.cover,</span><br><span class="line">                  );</span><br><span class="line">                &#125;));</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 奖品列表</span></span><br><span class="line">  Widget commodity(<span class="built_in">int</span> index) &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="built_in">int</span> toIndex;</span><br><span class="line">    toIndex = _deserializeMap[index];</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onTap: () &#123;</span><br><span class="line">        opcityPush(context,</span><br><span class="line">            ZoomImage(url: <span class="string">&#x27;<span class="subst">$&#123;widget.dishesList[toIndex][<span class="string">&#x27;dishesUrl&#x27;</span>]&#125;</span>&#x27;</span>));</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Stack(</span><br><span class="line">        children: [</span><br><span class="line">          Container(</span><br><span class="line">            decoration: BoxDecoration(</span><br><span class="line">              borderRadius: BorderRadius.all(Radius.circular(<span class="number">10.</span>r)),</span><br><span class="line">              color: widget.dishesList[toIndex][<span class="string">&#x27;id&#x27;</span>]! &gt; <span class="number">5</span></span><br><span class="line">                  ? Colors.red[<span class="number">300</span>]!.withAlpha(<span class="number">32</span>)</span><br><span class="line">                  : widget.dishesList[toIndex][<span class="string">&#x27;id&#x27;</span>]! &gt;= <span class="number">4</span> &amp;&amp;</span><br><span class="line">                          widget.dishesList[toIndex][<span class="string">&#x27;id&#x27;</span>] &lt;= <span class="number">5</span></span><br><span class="line">                      ? Colors.amber[<span class="number">300</span>]!.withAlpha(<span class="number">32</span>)</span><br><span class="line">                      : Colors.blue[<span class="number">300</span>]!.withAlpha(<span class="number">32</span>),</span><br><span class="line">            ),</span><br><span class="line">            child: SizedBox(</span><br><span class="line">              width: <span class="built_in">double</span>.infinity,</span><br><span class="line">              height: <span class="built_in">double</span>.infinity,</span><br><span class="line">              child: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                children: [</span><br><span class="line">                  Image.network(</span><br><span class="line">                    <span class="string">&#x27;<span class="subst">$&#123;widget.dishesList[toIndex][<span class="string">&#x27;dishesUrl&#x27;</span>]&#125;</span>&#x27;</span>,</span><br><span class="line">                    fit: BoxFit.cover,</span><br><span class="line">                    width: <span class="number">60.</span>w,</span><br><span class="line">                    height: <span class="number">60.</span>w,</span><br><span class="line">                  ),</span><br><span class="line">                  SizedBox(</span><br><span class="line">                    height: <span class="number">5.</span>h,</span><br><span class="line">                  ),</span><br><span class="line">                  Text(</span><br><span class="line">                    <span class="string">&#x27;<span class="subst">$&#123;widget.dishesList[toIndex][<span class="string">&#x27;dishesName&#x27;</span>]&#125;</span>&#x27;</span>,</span><br><span class="line">                    maxLines: <span class="number">1</span>,</span><br><span class="line">                    overflow: TextOverflow.ellipsis,</span><br><span class="line">                    style: TextStyle(</span><br><span class="line">                      fontFamily: <span class="string">&#x27;jinbu&#x27;</span>,</span><br><span class="line">                      fontSize: <span class="number">9.</span>sp,</span><br><span class="line">                      color: Theme.of(context).primaryColor,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Container(</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">            color: index == _currentSelect</span><br><span class="line">                ? Colors.yellow.withOpacity(<span class="number">0.5</span>)</span><br><span class="line">                : Colors.transparent,</span><br><span class="line">            borderRadius: BorderRadius.all(Radius.circular(<span class="number">10.</span>r)),</span><br><span class="line">          )),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  Animation? _selectedIndexTween;</span><br><span class="line">  AnimationController? _startAnimateController;</span><br><span class="line">  <span class="built_in">int</span> _currentSelect = <span class="number">-1</span>;</span><br><span class="line">  <span class="built_in">int</span> _target = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">旋转的圈数</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> repeatRound = <span class="number">4</span>;</span><br><span class="line">  VoidCallback? _listener;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">选中下标的映射</span></span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Map</span> _selectMap = &#123;<span class="number">0</span>: <span class="number">0</span>, <span class="number">1</span>: <span class="number">3</span>, <span class="number">2</span>: <span class="number">6</span>, <span class="number">3</span>: <span class="number">7</span>, <span class="number">4</span>: <span class="number">8</span>, <span class="number">5</span>: <span class="number">5</span>, <span class="number">6</span>: <span class="number">2</span>, <span class="number">7</span>: <span class="number">1</span>&#125;;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//反下标的映射</span></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Map</span> _deserializeMap = &#123;</span><br><span class="line">    <span class="number">0</span>: <span class="number">0</span>,</span><br><span class="line">    <span class="number">3</span>: <span class="number">1</span>,</span><br><span class="line">    <span class="number">4</span>: <span class="number">8</span>,</span><br><span class="line">    <span class="number">6</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="number">7</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="number">8</span>: <span class="number">4</span>,</span><br><span class="line">    <span class="number">5</span>: <span class="number">5</span>,</span><br><span class="line">    <span class="number">2</span>: <span class="number">6</span>,</span><br><span class="line">    <span class="number">1</span>: <span class="number">7</span></span><br><span class="line">  &#125;;</span><br><span class="line">  simpleLotteryWidgetState() &#123;</span><br><span class="line">    _listener = () &#123;</span><br><span class="line">      <span class="comment">// 开启抽奖动画</span></span><br><span class="line">      <span class="keyword">if</span> (widget.simpleLotteryController.value.isPlaying) &#123;</span><br><span class="line">        _startAnimateController?.reset();</span><br><span class="line">        _target = widget.simpleLotteryController.value.target;</span><br><span class="line">        _selectedIndexTween = _initSelectIndexTween(_target);</span><br><span class="line"></span><br><span class="line">        _startAnimateController?.forward();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">初始化tween</span></span></span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">[target] 中奖的目标</span></span></span><br><span class="line">  Animation _initSelectIndexTween(<span class="built_in">int</span> target) =&gt;</span><br><span class="line">      StepTween(begin: <span class="number">0</span>, end: repeatRound * <span class="number">8</span> + target).animate(</span><br><span class="line">          CurvedAnimation(</span><br><span class="line">              parent: _startAnimateController!, curve: Curves.easeOutQuart));</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line"></span><br><span class="line">    future = Future.value(<span class="number">42</span>);</span><br><span class="line"></span><br><span class="line">    _startAnimateController =</span><br><span class="line">        AnimationController(vsync: <span class="keyword">this</span>, duration: <span class="keyword">const</span> <span class="built_in">Duration</span>(seconds: <span class="number">5</span>));</span><br><span class="line">    _selectedIndexTween = _initSelectIndexTween(_target);</span><br><span class="line"></span><br><span class="line">    <span class="comment">//开启动画</span></span><br><span class="line">    simpleLotteryWidgetState();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 控制监听</span></span><br><span class="line">    widget.simpleLotteryController.addListener(_listener!);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 动画监听</span></span><br><span class="line">    _startAnimateController?.addListener(() &#123;</span><br><span class="line">      <span class="comment">// 更新选中的下标</span></span><br><span class="line">      _currentSelect = _selectMap[_selectedIndexTween?.value % <span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (_startAnimateController!.isCompleted) &#123;</span><br><span class="line">        widget.simpleLotteryController.finish();</span><br><span class="line">        _currentSelect = <span class="number">-1</span>;</span><br><span class="line">        <span class="built_in">dynamic</span> dishes = widget.dishesList[_target];</span><br><span class="line"></span><br><span class="line">        Provider.of&lt;IndexViewModel&gt;(context, listen: <span class="keyword">false</span>).setIsLotte(<span class="keyword">true</span>);</span><br><span class="line">        Provider.of&lt;IndexViewModel&gt;(context, listen: <span class="keyword">false</span>)</span><br><span class="line">            .setCurrentDishes(dishes);</span><br><span class="line">        DialogUtils.showMessage(<span class="string">&#x27;恭喜你，今天做：<span class="subst">$&#123;dishes[<span class="string">&#x27;dishesName&#x27;</span>]&#125;</span>，点击按钮查看菜品做法！&#x27;</span>);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      setState(() &#123;&#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> deactivate() &#123;</span><br><span class="line">    widget.simpleLotteryController.removeListener(_listener!);</span><br><span class="line">    <span class="keyword">super</span>.deactivate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> dispose() &#123;</span><br><span class="line">    _startAnimateController?.dispose();</span><br><span class="line">    <span class="keyword">super</span>.dispose();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取当前奖品出现的次数</span></span><br><span class="line">getNumberTimesCurrentPrizeAppears(<span class="built_in">String?</span> id, <span class="built_in">List</span>&lt;<span class="built_in">dynamic</span>&gt; arr) &#123;</span><br><span class="line">  <span class="comment">//定义集合</span></span><br><span class="line">  <span class="built_in">Map</span> obj = &#123;&#125;;</span><br><span class="line">  <span class="built_in">List</span> idList = [];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    idList.add(arr[i][<span class="string">&#x27;id&#x27;</span>]);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; idList.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (obj.containsValue([idList[i]])) &#123;</span><br><span class="line">      obj[idList[i]]++;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      obj[idList[i]] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> obj[<span class="built_in">int</span>.parse(id!)];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">int</span> next(<span class="built_in">int</span> min, <span class="built_in">int</span> max) &#123;</span><br><span class="line">  <span class="built_in">int</span> res = min + Random().nextInt(max - min + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> res;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="dishesdetaildart"><a class="markdownIt-Anchor" href="#dishesdetaildart">#</a> DishesDetail.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:bruno/bruno.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_swiper_plus/flutter_swiper_plus.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/common/common.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DishesDetailView</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  DishesDetailView(&#123;Key? key,<span class="keyword">required</span> <span class="keyword">this</span>.dishes&#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line">  <span class="keyword">var</span> dishes;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;DishesDetailView&gt; createState() =&gt; _DishesDetailViewState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_DishesDetailViewState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">DishesDetailView</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span> steplist = [];</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    <span class="comment">//分割步骤</span></span><br><span class="line">    steplist = widget.dishes[<span class="string">&#x27;dishesStep&#x27;</span>].toString().split(<span class="string">&#x27;\r\n&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> WillPopScope(</span><br><span class="line">      onWillPop: () &#123;</span><br><span class="line">        BrnDialogManager.showConfirmDialog(context,</span><br><span class="line">            showIcon: <span class="keyword">false</span>,</span><br><span class="line">            barrierDismissible: <span class="keyword">false</span>,</span><br><span class="line">            title: <span class="string">&quot;你正在做菜，要退出吗~&quot;</span>,</span><br><span class="line">            confirm: <span class="string">&quot;退出&quot;</span>,</span><br><span class="line">            cancel: <span class="string">&quot;不&quot;</span>, onConfirm: () &#123;</span><br><span class="line">          Navigator.of(context).pop();</span><br><span class="line">          Navigator.of(context).pop();</span><br><span class="line">        &#125;, onCancel: () &#123;</span><br><span class="line">          Navigator.of(context).pop();</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> Future.value(<span class="keyword">false</span>);</span><br><span class="line">      &#125;,</span><br><span class="line">      child: Scaffold(</span><br><span class="line">          appBar: getAppBar(widget.dishes[<span class="string">&#x27;dishesName&#x27;</span>], context: context),</span><br><span class="line">          body: ListView(</span><br><span class="line">            children: [</span><br><span class="line">              Padding(</span><br><span class="line">                padding: <span class="keyword">const</span> EdgeInsets.all(<span class="number">8.0</span>),</span><br><span class="line">                child: ImageFulWidget(imageList: [widget.dishes[<span class="string">&#x27;dishesUrl&#x27;</span>]]),</span><br><span class="line">              ),</span><br><span class="line">              getCardContainer(</span><br><span class="line">                margin: EdgeInsets.only(</span><br><span class="line">                    top: <span class="number">10.</span>h, bottom: <span class="number">10.</span>h, left: <span class="number">10.</span>w, right: <span class="number">10.</span>w),</span><br><span class="line">                height: <span class="number">220.0</span>.h,</span><br><span class="line">                isBorder: <span class="keyword">true</span>,</span><br><span class="line">                BorderCircular: <span class="number">5.</span>r,</span><br><span class="line">                width: <span class="built_in">double</span>.infinity,</span><br><span class="line">                widget: Column(</span><br><span class="line">                  crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">                  children: [</span><br><span class="line">                    Padding(</span><br><span class="line">                      padding: EdgeInsets.only(left: <span class="number">10.</span>w, top: <span class="number">10.</span>h),</span><br><span class="line">                      child: BrnCSS2Text.toTextView(</span><br><span class="line">                        <span class="string">&#x27;步骤：&#x27;</span>,</span><br><span class="line">                        maxLines: <span class="number">1</span>,</span><br><span class="line">                        textOverflow: TextOverflow.ellipsis,</span><br><span class="line">                        defaultStyle:</span><br><span class="line">                            TextStyle(fontSize: <span class="number">20.</span>sp, fontFamily: <span class="string">&#x27;jinbu&#x27;</span>),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                    Padding(</span><br><span class="line">                      padding: EdgeInsets.only(left: <span class="number">10.</span>w, top: <span class="number">10.</span>h),</span><br><span class="line">                      child: Column(</span><br><span class="line">                        crossAxisAlignment: CrossAxisAlignment.start,</span><br><span class="line">                        children: steplist.map((e) &#123;</span><br><span class="line">                          <span class="keyword">return</span> Container(</span><br><span class="line">                            margin: EdgeInsets.only(top: <span class="number">5.</span>h),</span><br><span class="line">                            child: BrnCSS2Text.toTextView(</span><br><span class="line">                              <span class="string">&#x27;<span class="subst">$e</span>&#x27;</span>,</span><br><span class="line">                              maxLines: <span class="number">1</span>,</span><br><span class="line">                              textOverflow: TextOverflow.ellipsis,</span><br><span class="line">                              defaultStyle: TextStyle(</span><br><span class="line">                                  fontSize: <span class="number">13.</span>sp, fontFamily: <span class="string">&#x27;jinbu&#x27;</span>),</span><br><span class="line">                            ),</span><br><span class="line">                          );</span><br><span class="line">                        &#125;).toList(),</span><br><span class="line">                      ),</span><br><span class="line">                    ),</span><br><span class="line">                  ],</span><br><span class="line">                ),</span><br><span class="line">              )</span><br><span class="line">            ],</span><br><span class="line">          )),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 顶部轮播图Widget</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ImageFulWidget</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  ImageFulWidget(&#123;</span><br><span class="line">    Key? key,</span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">this</span>.imageList,</span><br><span class="line">  &#125;) : <span class="keyword">super</span>(key: key);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt;? imageList;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ClipRRect(</span><br><span class="line">      borderRadius: BorderRadius.vertical(</span><br><span class="line">          top: Radius.circular(<span class="number">20.</span>h), bottom: Radius.circular(<span class="number">20.</span>h)),</span><br><span class="line">      child: SizedBox(</span><br><span class="line">        height: MediaQuery.of(context).size.height * <span class="number">0.25</span>,</span><br><span class="line">        width: MediaQuery.of(context).size.width - <span class="number">60.0</span>.w,</span><br><span class="line">        child: Swiper(</span><br><span class="line">          autoplay: <span class="keyword">false</span>,</span><br><span class="line">          duration: <span class="number">2000</span>,</span><br><span class="line">          curve: Curves.linearToEaseOut,</span><br><span class="line">          itemBuilder: (BuildContext context, <span class="built_in">int</span> index) &#123;</span><br><span class="line">            <span class="keyword">return</span> Image.network(</span><br><span class="line">              imageList![index],</span><br><span class="line">              height: MediaQuery.of(context).size.height * <span class="number">0.25</span>,</span><br><span class="line">              width: MediaQuery.of(context).size.width - <span class="number">60.0</span>.w,</span><br><span class="line">              fit: BoxFit.cover,</span><br><span class="line">            );</span><br><span class="line">          &#125;,</span><br><span class="line">          itemCount: imageList!.length,</span><br><span class="line">          pagination: SwiperPagination(</span><br><span class="line">            builder: DotSwiperPaginationBuilder(</span><br><span class="line">              size: <span class="number">8.</span>sp, <span class="comment">// 设置未选中的小点大小</span></span><br><span class="line">              activeSize: <span class="number">10.</span>sp, <span class="comment">// 设置选中的小点大小</span></span><br><span class="line">              color: <span class="keyword">const</span> Color.fromARGB(<span class="number">255</span>, <span class="number">219</span>, <span class="number">219</span>, <span class="number">219</span>), <span class="comment">// 设置为未选中的小点颜色</span></span><br><span class="line">              activeColor: Colors.blue, <span class="comment">// 设置选中的小点颜色</span></span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          control: <span class="keyword">const</span> SwiperControl(color: Colors.transparent),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="maindart"><a class="markdownIt-Anchor" href="#maindart">#</a> main.dart</h4>
<figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:async&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:io&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dart:math&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/material.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/physics.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter/services.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_easyloading/flutter_easyloading.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:flutter_screenutil/flutter_screenutil.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:get/get_navigation/src/root/get_material_app.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:intl/date_symbol_data_local.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:provider/provider.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/routers/routes.dart&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;package:weat/viewmodel/index_viewmodel.dart&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局路由key</span></span><br><span class="line"><span class="keyword">final</span> GlobalKey&lt;NavigatorState&gt; navigatorKey = GlobalKey&lt;NavigatorState&gt;();</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 主函数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">void</span> main() <span class="keyword">async</span> &#123;</span><br><span class="line">  initializeDateFormatting().then((_) =&gt; runApp(MultiProvider(</span><br><span class="line">        providers: [</span><br><span class="line">          ChangeNotifierProvider(create: (context) =&gt; IndexViewModel()),</span><br><span class="line">        ],</span><br><span class="line">        child: MyApp(),</span><br><span class="line">      )));</span><br><span class="line"></span><br><span class="line">  <span class="comment">//安卓屏蔽顶部阴影</span></span><br><span class="line">  <span class="keyword">if</span> (Platform.isAndroid) &#123;</span><br><span class="line">    SystemUiOverlayStyle systemUiOverlayStyle =</span><br><span class="line">        SystemUiOverlayStyle(statusBarColor: Colors.transparent);</span><br><span class="line">    SystemChrome.setSystemUIOverlayStyle(systemUiOverlayStyle);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//根节点</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  State&lt;MyApp&gt; createState() =&gt; _MyAppState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_MyAppState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">MyApp</span>&gt; </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> initState() &#123;</span><br><span class="line">    <span class="keyword">super</span>.initState();</span><br><span class="line">    _init();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//全局路由key</span></span><br><span class="line">  <span class="keyword">final</span> GlobalKey&lt;NavigatorState&gt; navigatorKey = GlobalKey&lt;NavigatorState&gt;();</span><br><span class="line"></span><br><span class="line">  <span class="comment">/// <span class="language-markdown">程序初始化</span></span></span><br><span class="line">  _init() <span class="keyword">async</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> EasyLoading.init();</span><br><span class="line">    EasyLoading.instance</span><br><span class="line">      ..displayDuration = <span class="keyword">const</span> <span class="built_in">Duration</span>(milliseconds: <span class="number">2000</span>)</span><br><span class="line">      ..indicatorType = EasyLoadingIndicatorType.fadingCircle</span><br><span class="line">      ..loadingStyle = EasyLoadingStyle.dark</span><br><span class="line">      ..indicatorSize = <span class="number">45.0</span></span><br><span class="line">      ..radius = <span class="number">10.0</span></span><br><span class="line">      ..progressColor = Colors.yellow</span><br><span class="line">      ..backgroundColor = Colors.green</span><br><span class="line">      ..indicatorColor = Colors.yellow</span><br><span class="line">      ..textColor = Colors.yellow</span><br><span class="line">      ..maskColor = Colors.blue.withOpacity(<span class="number">0.5</span>)</span><br><span class="line">      ..userInteractions = <span class="keyword">true</span></span><br><span class="line">      ..dismissOnTap = <span class="keyword">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">await</span> WidgetsFlutterBinding.ensureInitialized();</span><br><span class="line">    <span class="keyword">await</span> SystemChrome.setPreferredOrientations(</span><br><span class="line">      [</span><br><span class="line">        <span class="comment">// 竖屏 Portrait 模式</span></span><br><span class="line">        DeviceOrientation.portraitUp,</span><br><span class="line">        DeviceOrientation.portraitDown,</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> ScreenUtilInit(</span><br><span class="line">        designSize: Size(<span class="number">375</span>, <span class="number">667</span>),</span><br><span class="line">        minTextAdapt: <span class="keyword">true</span>,</span><br><span class="line">        splitScreenMode: <span class="keyword">true</span>,</span><br><span class="line">        builder: (context, child) &#123;</span><br><span class="line">          <span class="keyword">return</span> GetMaterialApp(</span><br><span class="line">            theme: ThemeData(</span><br><span class="line">              primarySwatch: Colors.blueGrey, <span class="comment">//全局主题颜色</span></span><br><span class="line">              splashColor: Colors.transparent, <span class="comment">// 点击时的高亮效果设置为透明</span></span><br><span class="line">              <span class="comment">// backgroundColor: Color.fromARGB(255, 255, 255, 255), //系统背景主题颜色</span></span><br><span class="line">              backgroundColor: Color(<span class="number">0xFFF3F4F6</span>), <span class="comment">//系统背景主题颜色</span></span><br><span class="line">              highlightColor: Colors.transparent, <span class="comment">// 长按时的扩散效果设置为透明</span></span><br><span class="line">              primaryColor: Color.fromARGB(<span class="number">188</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">97</span>), <span class="comment">//系统原色</span></span><br><span class="line">              focusColor: Color.fromARGB(<span class="number">235</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">116</span>), <span class="comment">//焦点主题颜色</span></span><br><span class="line">              hoverColor: Color.fromARGB(<span class="number">235</span>, <span class="number">103</span>, <span class="number">104</span>, <span class="number">172</span>), <span class="comment">//悬停主题颜色</span></span><br><span class="line">              disabledColor: Color.fromARGB(<span class="number">235</span>, <span class="number">105</span>, <span class="number">106</span>, <span class="number">133</span>), <span class="comment">//禁用主题颜色</span></span><br><span class="line">              primaryColorLight: Colors.white, <span class="comment">// 白色主题颜色</span></span><br><span class="line">              primaryColorDark: Color.fromARGB(<span class="number">235</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">116</span>), <span class="comment">//黑色主题颜色</span></span><br><span class="line">              selectedRowColor: Color.fromARGB(<span class="number">255</span>, <span class="number">104</span>, <span class="number">80</span>, <span class="number">145</span>), <span class="comment">//选中效果颜色</span></span><br><span class="line">              appBarTheme: AppBarTheme(backgroundColor: Colors.white),</span><br><span class="line">              buttonTheme: ButtonThemeData(</span><br><span class="line">                focusColor: Color.fromARGB(<span class="number">235</span>, <span class="number">73</span>, <span class="number">74</span>, <span class="number">116</span>),</span><br><span class="line">                hoverColor: Color.fromARGB(<span class="number">235</span>, <span class="number">103</span>, <span class="number">104</span>, <span class="number">172</span>),</span><br><span class="line">              ),</span><br><span class="line">              tabBarTheme: TabBarTheme(</span><br><span class="line">                labelColor: Color.fromARGB(<span class="number">235</span>, <span class="number">103</span>, <span class="number">104</span>, <span class="number">172</span>),</span><br><span class="line">              ),</span><br><span class="line">              progressIndicatorTheme: ProgressIndicatorThemeData(</span><br><span class="line">                color: Color.fromARGB(<span class="number">235</span>, <span class="number">101</span>, <span class="number">102</span>, <span class="number">158</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">            navigatorKey: navigatorKey,</span><br><span class="line">            routes: routes,</span><br><span class="line">            debugShowCheckedModeBanner: <span class="keyword">false</span>,</span><br><span class="line">            initialRoute: <span class="string">&quot;/&quot;</span>, <span class="comment">//初始化进入加载页面</span></span><br><span class="line">            builder: (context, widget) &#123;</span><br><span class="line">              <span class="keyword">return</span> MediaQuery(</span><br><span class="line">                data: MediaQuery.of(context).copyWith(textScaleFactor: <span class="number">1.0</span>),</span><br><span class="line">                child: widget!,</span><br><span class="line">              );</span><br><span class="line">            &#125;,</span><br><span class="line">          );</span><br><span class="line">        &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="代码编写完毕后-flutter-build-apk-打包到真机运行"><a class="markdownIt-Anchor" href="#代码编写完毕后-flutter-build-apk-打包到真机运行">#</a> 代码编写完毕后 flutter build apk 打包到真机运行</h3>
<h1 id="最终呈现出我们想要的效果"><a class="markdownIt-Anchor" href="#最终呈现出我们想要的效果">#</a> 最终呈现出我们想要的效果：</h1>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224132323576.png" alt="image-20230224132323576"></p>
<p>抽奖中：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224132344126.png" alt="image-20230224132344126"></p>
<p>中奖：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224132344126.png" alt=""></p>
<p>详情：</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20230224132350748.png" alt="image-20230224132350748"></p>
<h3 id="本期教程到此结束欢迎你的观看~"><a class="markdownIt-Anchor" href="#本期教程到此结束欢迎你的观看~">#</a> 本期教程到此结束，欢迎你的观看～</h3>
<h2 id="微信公众号搜索interviewcoder回复关键词吃啥获取源码以及开发教程~-2"><a class="markdownIt-Anchor" href="#微信公众号搜索interviewcoder回复关键词吃啥获取源码以及开发教程~-2">#</a> 微信公众号搜索 InterviewCoder 回复关键词《吃啥》获取源码以及开发教程～</h2>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/%E4%BA%8C%E7%BB%B4%E7%A0%81mini.png" alt="二维码mini"></p>
<h2 id="关于我"><a class="markdownIt-Anchor" href="#关于我">#</a> 关于我</h2>
<p>Brath 是一个热爱技术的 Java 程序猿，公众号「InterviewCoder」定期分享有趣有料的精品原创文章！</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>非常感谢各位人才能看到这里，原创不易，文章如果有帮助可以关注、点赞、分享或评论，这都是对我的莫大支持！</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/9/">上一页</a></div><div class="pagination-next"><a href="/page/11/">下一页</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/9/">9</a></li><li><a class="pagination-link is-current" href="/page/10/">10</a></li><li><a class="pagination-link" href="/page/11/">11</a></li><li><a class="pagination-link" href="/page/12/">12</a></li><li><a class="pagination-link" href="/page/13/">13</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-26T00:59:24.590Z">2023-04-26</time></p><p class="title"><a href="/2023/04/26/%E3%80%90DDD%E3%80%91DDD%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84%E4%B8%8E%E4%BC%A0%E7%BB%9F%E4%B8%89%E5%B1%82%E6%9E%B6%E6%9E%84%E7%9A%84%E5%8C%BA%E5%88%AB/">【DDD】DDD分层架构与传统三层架构的区别</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-21T01:04:21.063Z">2023-04-21</time></p><p class="title"><a href="/2023/04/21/%E3%80%90NodeJS%E3%80%91Windows%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%A6%82%E4%BD%95%E5%81%9ANode%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%EF%BC%9F/">【NodeJS】Windows环境下如何做Node多版本管理？</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T06:52:53.490Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90HEXO%E3%80%91%E4%BD%BF%E7%94%A8Hexo%E6%90%AD%E5%BB%BA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2/">【HEXO】使用Hexo搭建属于自己的博客</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T06:02:20.463Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90%E5%9F%9F%E5%90%8D%E6%9C%8D%E5%8A%A1%E3%80%91%E8%85%BE%E8%AE%AF%E4%BA%91%E7%94%B3%E8%AF%B7%E7%9A%84%E5%85%8D%E8%B4%B9%E8%AF%81%E4%B9%A6%E9%83%A8%E7%BD%B2%E5%88%B0%E9%98%BF%E9%87%8C%E4%BA%91CDN%E5%92%8C%E4%BA%91%E7%9B%BE%E8%AF%81%E4%B9%A6%E4%B8%AD%E5%BF%83/">腾讯云申请的免费证书部署到阿里云CDN和云盾证书中心</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T06:02:20.459Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90%E5%A4%96%E8%AE%BE%E3%80%91%E6%9C%BA%E6%A2%B0%E9%94%AE%E7%9B%98%E8%BD%B4%E4%BD%93%E6%80%8E%E4%B9%88%E9%80%89%EF%BC%9F%E4%B8%89%E6%A8%A1%E7%83%AD%E6%8F%92%E6%8B%94%E5%8E%9F%E6%9D%A5%E6%98%AF%E8%BF%99%E4%B9%88%E5%9B%9E%E4%BA%8B/">【外设】机械键盘轴体怎么选？三模热插拔原来是这么回事</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">121</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">InterviewCoder</p><p class="is-size-6 is-block">面试记官方公众号</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">121</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s/jWs6lLHl5L-atXJhHc4YvA" target="_blank" rel="noopener">关注我</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/me.png" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">技能改变人生，知识改变命运。</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国·江苏·无锡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">121</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">泠灵(特别呜谢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(码云)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">掘金</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(阿里云)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(腾讯云)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(B站)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p><p class="is-size-7">© 2029</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>