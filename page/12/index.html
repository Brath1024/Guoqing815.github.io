<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/me.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/me.png"}},"description":""}</script><link rel="icon" href="https://brath.cloud/me.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">ä¸»é¡µ</a><a class="navbar-item" href="/archives">æ–‡ç« åˆ—è¡¨</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">æ›´å¤š</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-27T08:18:48.548Z" title="2022-12-27 16:18:48">2022-12-27</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:35.948Z" title="2023-4-20 9:23:35">2023-04-20</time>æ›´æ–°</span><span class="level-item">2 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦262ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/27/%E3%80%90Docker%E3%80%91Docker%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85vim/">Dockerç¯å¢ƒä¸‹å®‰è£…vim</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<h2 id="dockerç¯å¢ƒä¸‹å®‰è£…vim"><a class="markdownIt-Anchor" href="#dockerç¯å¢ƒä¸‹å®‰è£…vim">#</a> Docker ç¯å¢ƒä¸‹å®‰è£… vim</h2>
<p>åœ¨ä½¿ç”¨ docker å®¹å™¨æ—¶ï¼Œå®¹å™¨ä¸€èˆ¬æ²¡æœ‰å®‰è£… vimï¼Œå°±éœ€è¦å®‰è£… vim<br>
apt-get install vim å‘½ä»¤ç”¨äºå®‰è£… vimï¼Œä½†æ˜¯ä¸‹è½½è¿‡æ…¢ã€‚<br>
ç¬¬ä¸€æ­¥ é…ç½®å›½å†…é•œåƒæº<br>
è¿›å…¥æŸä¸ªå®¹å™¨</p>
<p>ä¾‹å¦‚è¿›å…¥ mysql</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it mysql /bin/bash</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼šæ›´æ–°æº</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥å®‰è£… vim</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install vim</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-27T08:18:48.546Z" title="2022-12-27 16:18:48">2022-12-27</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:36.177Z" title="2023-4-20 9:23:36">2023-04-20</time>æ›´æ–°</span><span class="level-item">12 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1742ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/27/%E3%80%90Java%E3%80%91CompletableFuture%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/">CompletableFutureä½¿ç”¨æ–‡æ¡£</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<p>èƒŒæ™¯ï¼š<br>
CompletableFuture å­—é¢ç¿»è¯‘è¿‡æ¥ï¼Œå°±æ˜¯ â€œå¯å®Œæˆçš„ Futureâ€ã€‚åŒä¼ ç»Ÿçš„ Future ç›¸æ¯”è¾ƒï¼ŒCompletableFuture èƒ½å¤Ÿä¸»åŠ¨è®¾ç½®è®¡ç®—çš„ç»“æœå€¼ï¼ˆä¸»åŠ¨ç»ˆç»“è®¡ç®—è¿‡ç¨‹ï¼Œå³ completableï¼‰ï¼Œä»è€Œåœ¨æŸäº›åœºæ™¯ä¸‹ä¸»åŠ¨ç»“æŸé˜»å¡ç­‰å¾…ã€‚è€Œ Future ç”±äºä¸èƒ½ä¸»åŠ¨è®¾ç½®è®¡ç®—ç»“æœå€¼ï¼Œä¸€æ—¦è°ƒç”¨ get () è¿›è¡Œé˜»å¡ç­‰å¾…ï¼Œè¦ä¹ˆå½“è®¡ç®—ç»“æœäº§ç”Ÿï¼Œè¦ä¹ˆè¶…æ—¶ï¼Œæ‰ä¼šè¿”å›ã€‚</p>
<p>CompletableFuture è¯´ç™½äº†å…¶å®å°±æ˜¯ä¸ºäº†è§£å†³ Future çš„é—®é¢˜ï¼ˆé˜»å¡ï¼‰ï¼Œè€Œç”Ÿï¼ï¼ï¼</p>
<p>ä¸‹é¢æ€»ç»“ CompletableFuture çš„å¸¸ç”¨ api</p>
<ol>
<li>
<p>åˆ›å»º CompletableFuture<br>
 å®ä¾‹æ–¹æ³•ï¼š</p>
<pre><code>//å®ä¾‹æ–¹æ³•
CompletableFuture&lt;String&gt; completableFutureOne = new CompletableFuture&lt;&gt;();
Supplier&lt;?&gt; task=new Supplier&lt;Object&gt;() &#123;
    @Override
    public Object get() &#123;
        return null;
    &#125;
&#125;;
CompletableFuture&lt;?&gt; completableFuture = completableFutureOne.supplyAsync(task);
</code></pre>
</li>
</ol>
<p>é™æ€æ–¹æ³•ï¼š</p>
<p>public static void main(String[] args) throws ExecutionException, InterruptedException {<br>
Runnable runnable = () -&gt;<br>
System.out.println (â€œæ‰§è¡Œæ— è¿”å›ç»“æœçš„å¼‚æ­¥ä»»åŠ¡â€);<br>
System.out.println(CompletableFuture.runAsync(runnable).get());</p>
<pre><code>      CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;
          System.out.println(&quot;æ‰§è¡Œæœ‰è¿”å›å€¼çš„å¼‚æ­¥ä»»åŠ¡&quot;);
          return &quot;Hello World&quot;;
      &#125;);
      String result = future.get();
      System.out.println(result);
  &#125;
</code></pre>
<h2 id="2-whencomplete-ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸå¯¹å…¶ç»“æœå¤„ç†handlyçš„ä½œç”¨ä¸€æ ·"><a class="markdownIt-Anchor" href="#2-whencomplete-ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸå¯¹å…¶ç»“æœå¤„ç†handlyçš„ä½œç”¨ä¸€æ ·">#</a> 2ã€whenComplete - ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œå¯¹å…¶ç»“æœå¤„ç† (handly çš„ä½œç”¨ä¸€æ ·)</h2>
<p>ç»“æœå¤„ç†å°±æ˜¯å½“ future ä»»åŠ¡å®Œæˆæ—¶ï¼Œå¯¹ä»»åŠ¡çš„ç»“æœåšå¤„ç†å·¥ä½œï¼æˆ–å¼‚å¸¸æƒ…å†µå¤„ç†ï¼</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            try &#123;</span><br><span class="line">                TimeUnit.SECONDS.sleep(1);</span><br><span class="line">            &#125; catch (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(&quot;æ‰§è¡Œç»“æŸ1ï¼&quot;);</span><br><span class="line">            return 5;</span><br><span class="line">        &#125;);</span><br><span class="line">        future.whenComplete(new BiConsumer&lt;Integer, Throwable&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void accept(Integer t, Throwable action) &#123;</span><br><span class="line">                t=t+1;</span><br><span class="line">//                int i = 12 / 0;</span><br><span class="line">                System.out.println(&quot;æ‰§è¡Œå®Œæˆ2ï¼&quot;+action.getMessage());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">        .exceptionally(new Function&lt;Throwable, Integer&gt;() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public Integer apply(Throwable t) &#123;</span><br><span class="line">                System.out.println(&quot;æ‰§è¡Œå¤±è´¥3ï¼š&quot; + t.getMessage());</span><br><span class="line">                return null;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;).join();</span><br><span class="line">        Integer integer = future.get();</span><br><span class="line">        System.out.println(&quot;=&gt;integer&quot;+integer);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>1ã€whenComplete åªæ˜¯å¯¹ä»»åŠ¡è¿è¡Œç»“æŸåï¼Œæ‹¿åˆ°ä»»åŠ¡ç»“æœï¼Œåšä¸ªå¤„ç†ï¼Œå¹¶ä¸”å¦‚æœä»»åŠ¡æ‰§è¡Œæœ‰å¼‚å¸¸ï¼Œä¼šç›‘å¬åˆ°å¼‚å¸¸ï¼<br>
2ã€å¦‚æœ whenComplete æœ¬èº«æœ‰å¼‚å¸¸ï¼Œé‚£ä¹ˆéœ€è¦å•ç‹¬åŠ  exceptionally æ¥ç›‘å¬å¼‚å¸¸ï¼<br>
3ã€æœ€ç»ˆ future.get () æ‹¿åˆ°çš„è¿˜æ˜¯ä»»åŠ¡ 1 çš„ç»“æœ<br>
 4ã€å¦‚æœä»»åŠ¡æœ‰å¼‚å¸¸ï¼Œfuture.get () æ‹¿åˆ°ä¼šæŠ›å‡ºå¼‚å¸¸ï¼</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">æ‰§è¡Œç»“æŸ1ï¼</span><br><span class="line">æ‰§è¡Œå¤±è´¥3ï¼šjava.lang.ArithmeticException: / by zero</span><br><span class="line">Exception in thread &quot;main&quot; java.util.concurrent.ExecutionException: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at java.util.concurrent.CompletableFuture.reportGet(CompletableFuture.java:357)</span><br><span class="line">	at java.util.concurrent.CompletableFuture.get(CompletableFuture.java:1895)</span><br><span class="line">	at top.lisicheng.wmd.CompleableFutureTest2.main(CompleableFutureTest2.java:83)</span><br><span class="line">Caused by: java.lang.ArithmeticException: / by zero</span><br><span class="line">	at top.lisicheng.wmd.CompleableFutureTest2.lambda$main$0(CompleableFutureTest2.java:65)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1590)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)</span><br><span class="line">	at java.util.concurrent.CompletableFuture$AsyncSupply.exec(CompletableFuture.java:1582)</span><br><span class="line">	at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)</span><br><span class="line">	at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:1056)</span><br><span class="line">	at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1692)</span><br><span class="line">	at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3-thenapply-ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸå¯èƒ½è¿˜æœ‰ç¬¬äºŒ-ç¬¬ä¸‰ä¸ªä»»åŠ¡ä¸”åé¢ä¸€ä¸ªä»»åŠ¡éœ€è¦ç”¨åˆ°å‰é¢ä»»åŠ¡çš„è¿”å›å€¼"><a class="markdownIt-Anchor" href="#3-thenapply-ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸå¯èƒ½è¿˜æœ‰ç¬¬äºŒ-ç¬¬ä¸‰ä¸ªä»»åŠ¡ä¸”åé¢ä¸€ä¸ªä»»åŠ¡éœ€è¦ç”¨åˆ°å‰é¢ä»»åŠ¡çš„è¿”å›å€¼">#</a> 3ã€thenApply - ç¬¬ä¸€ä¸ªä»»åŠ¡ç»“æŸï¼Œå¯èƒ½è¿˜æœ‰ç¬¬äºŒã€ç¬¬ä¸‰ä¸ªä»»åŠ¡ï¼Œä¸”åé¢ä¸€ä¸ªä»»åŠ¡ï¼Œéœ€è¦ç”¨åˆ°å‰é¢ä»»åŠ¡çš„è¿”å›å€¼</h2>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public static void test4(String[] args) throws ExecutionException, InterruptedException &#123;</span><br><span class="line">        /**</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApply(Function&lt;? super T,? extends U&gt; fn)</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn)</span><br><span class="line">         * public &lt;U&gt; CompletableFuture&lt;U&gt; thenApplyAsync(Function&lt;? super T,? extends U&gt; fn, Executor executor)</span><br><span class="line">         *  æ€»ç»“ï¼šthenApply æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä½¿ç”¨è¯¥å‡½æ•°å¤„ç†ä¸Šä¸€ä¸ªCompletableFuture è°ƒç”¨çš„ç»“æœï¼Œ</span><br><span class="line">         *  å¹¶è¿”å›ä¸€ä¸ªå…·æœ‰å¤„ç†ç»“æœçš„Futureå¯¹è±¡ã€‚</span><br><span class="line">         *</span><br><span class="line">         */</span><br><span class="line">        CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(() -&gt; &#123;</span><br><span class="line">            int result = 100;</span><br><span class="line">            System.out.println(&quot;ä¸€é˜¶æ®µï¼š&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;).thenApply(number -&gt; &#123;</span><br><span class="line">            int result = number * 3;</span><br><span class="line">            System.out.println(&quot;äºŒé˜¶æ®µï¼š&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;).thenApply(number -&gt; &#123;</span><br><span class="line">            int result = number * 3;</span><br><span class="line">            System.out.println(&quot;ä¸‰é˜¶æ®µï¼š&quot; + result);</span><br><span class="line">            return result;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;æœ€ç»ˆç»“æœï¼š&quot; + future.get());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-thencompose-è·Ÿä¸Šé¢ä¸€æ ·çš„ä½œç”¨"><a class="markdownIt-Anchor" href="#4-thencompose-è·Ÿä¸Šé¢ä¸€æ ·çš„ä½œç”¨">#</a> 4ã€thenCompose - è·Ÿä¸Šé¢ä¸€æ ·çš„ä½œç”¨ï¼š</h2>
<p>thenCompose çš„å‚æ•°ä¸ºä¸€ä¸ªè¿”å› CompletableFuture å®ä¾‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°çš„å‚æ•°æ˜¯å…ˆå‰è®¡ç®—æ­¥éª¤çš„ç»“æœã€‚</p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenCompose(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn);</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn) ;</span><br><span class="line">public &lt;U&gt; CompletableFuture&lt;U&gt; thenComposeAsync(Function&lt;? super T, ? extends CompletionStage&lt;U&gt;&gt; fn, Executor executor) ;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">public static void main(String[] args) throws InterruptedException, ExecutionException &#123;</span><br><span class="line">    CompletableFuture&lt;Integer&gt; future = CompletableFuture.supplyAsync(new Supplier&lt;Integer&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public Integer get() &#123;</span><br><span class="line">            int number = new Random().nextInt(3);</span><br><span class="line">            System.out.println(&quot;ç¬¬ä¸€é˜¶æ®µï¼š&quot; + number);</span><br><span class="line">            return number;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;).thenCompose(new Function&lt;Integer, CompletionStage&lt;Integer&gt;&gt;() &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public CompletionStage&lt;Integer&gt; apply(Integer param) &#123;</span><br><span class="line">            return CompletableFuture.supplyAsync(new Supplier&lt;Integer&gt;() &#123;</span><br><span class="line">                @Override</span><br><span class="line">                public Integer get() &#123;</span><br><span class="line">                    int number = param * 2;</span><br><span class="line">                    System.out.println(&quot;ç¬¬äºŒé˜¶æ®µï¼š&quot; + number);</span><br><span class="line">                    return number;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    System.out.println(&quot;æœ€ç»ˆç»“æœ: &quot; + future.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">é‚£ä¹ˆ thenApply å’Œ thenCompose æœ‰ä½•åŒºåˆ«å‘¢ï¼š</span><br><span class="line"></span><br><span class="line">thenApply è½¬æ¢çš„æ˜¯æ³›å‹ä¸­çš„ç±»å‹ï¼Œè¿”å›çš„æ˜¯åŒä¸€ä¸ªCompletableFutureï¼›</span><br><span class="line">thenCompose å°†å†…éƒ¨çš„ CompletableFuture è°ƒç”¨å±•å¼€æ¥å¹¶ä½¿ç”¨ä¸Šä¸€ä¸ªCompletableFutre è°ƒç”¨çš„ç»“æœåœ¨ä¸‹ä¸€æ­¥çš„ CompletableFuture è°ƒç”¨ä¸­è¿›è¡Œè¿ç®—ï¼Œ</span><br><span class="line">æ˜¯ç”Ÿæˆä¸€ä¸ªæ–°çš„CompletableFutureã€‚</span><br></pre></td></tr></table></figure>
<p><strong>ä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­å¯¹å¯¹æ¯”ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) throws InterruptedException, ExecutionException &#123;</span><br><span class="line">    CompletableFuture&lt;String&gt; future = CompletableFuture.supplyAsync(() -&gt; &quot;Hello&quot;);</span><br><span class="line"></span><br><span class="line">    CompletableFuture&lt;String&gt; result1 = future.thenApply(param -&gt; param + &quot; World&quot;);</span><br><span class="line">    CompletableFuture&lt;String&gt; result2 = future.thenCompose(param -&gt; CompletableFuture.supplyAsync(() -&gt; param + &quot; World&quot;));</span><br><span class="line"></span><br><span class="line">    System.out.println(result1.get());</span><br><span class="line">    System.out.println(result2.get());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="5-ç»“æœæ¶ˆè´¹"><a class="markdownIt-Anchor" href="#5-ç»“æœæ¶ˆè´¹">#</a> 5ã€ç»“æœæ¶ˆè´¹</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">thenAcceptç³»åˆ—ï¼šå¯¹å•ä¸ªç»“æœè¿›è¡Œæ¶ˆè´¹</span><br><span class="line">thenAcceptBothç³»åˆ—ï¼šå¯¹ä¸¤ä¸ªç»“æœè¿›è¡Œæ¶ˆè´¹</span><br><span class="line">thenRunç³»åˆ—ï¼šä¸å…³å¿ƒç»“æœï¼Œåªå¯¹ç»“æœæ‰§è¡ŒAction</span><br></pre></td></tr></table></figure>
<p>åªä¼šæ‹¿åˆ°ä¸Šä¸ªä»»åŠ¡çš„å€¼ï¼Œç„¶åå¯¹å€¼è¿›è¡Œæ¶ˆè´¹ï¼Œä½†æ˜¯ç»å¯¹ä¸ä¼šäº§ç”Ÿæ–°çš„å€¼<br>
è¿™æ˜¯è·Ÿä¸Šé¢ä»»åŠ¡ä¸­é—´ è½¬æ¢çš„ï¼Œæœ€å¤§çš„åŒºåˆ«</p>
<p>æ¶ˆè´¹ç»“æœè¿˜åŒ…æ‹¬ thenRun<br>
thenRun è·Ÿ thenAccept çš„åŒºåˆ«æ˜¯ï¼Œå®ƒä¸ä»…ä¸äº§ç”Ÿæ–°çš„å€¼ï¼Œè¿˜ä¸æ¶ˆè´¹ä¸Šä¸ªä»»åŠ¡çš„å€¼ï¼Œåªæ˜¯è‡ªå·±åšä¸€ä¸ªä¸šåŠ¡å¤„ç†ã€‚</p>
<p>6ã€ç»“æœç»„åˆ<br>
 thenCombine - åˆå¹¶ä¸¤ä¸ªçº¿ç¨‹ä»»åŠ¡çš„ç»“æœï¼Œå¹¶è¿›ä¸€æ­¥å¤„ç†ã€‚<br>
applyToEither - ä¸¤ä¸ªçº¿ç¨‹ä»»åŠ¡ç›¸æ¯”è¾ƒï¼Œå…ˆè·å¾—æ‰§è¡Œç»“æœçš„ï¼Œå°±å¯¹è¯¥ç»“æœè¿›è¡Œä¸‹ä¸€æ­¥çš„è½¬åŒ–æ“ä½œã€‚<br>
acceptEither - ä¸¤ä¸ªçº¿ç¨‹ä»»åŠ¡ç›¸æ¯”è¾ƒï¼Œå…ˆè·å¾—æ‰§è¡Œç»“æœçš„ï¼Œå°±å¯¹è¯¥ç»“æœè¿›è¡Œä¸‹ä¸€æ­¥çš„æ¶ˆè´¹æ“ä½œã€‚<br>
runAfterEither - ä¸¤ä¸ªçº¿ç¨‹ä»»åŠ¡ç›¸æ¯”è¾ƒï¼Œæœ‰ä»»ä½•ä¸€ä¸ªæ‰§è¡Œå®Œæˆï¼Œå°±è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œä¸å…³å¿ƒè¿è¡Œç»“æœã€‚<br>
runAfterBoth - ä¸¤ä¸ªçº¿ç¨‹ä»»åŠ¡ç›¸æ¯”è¾ƒï¼Œä¸¤ä¸ªå…¨éƒ¨æ‰§è¡Œå®Œæˆï¼Œæ‰è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œä¸å…³å¿ƒè¿è¡Œç»“æœã€‚<br>
anyOf-anyOf æ–¹æ³•çš„å‚æ•°æ˜¯å¤šä¸ªç»™å®šçš„ CompletableFutureï¼Œå½“å…¶ä¸­çš„ä»»ä½•ä¸€ä¸ªå®Œæˆæ—¶ï¼Œæ–¹æ³•è¿”å›è¿™ä¸ª CompletableFutureã€‚<br>
allOf-allOf æ–¹æ³•ç”¨æ¥å®ç°å¤š CompletableFuture çš„åŒæ—¶è¿”å›ã€‚</p>
<p>ä»£ç å®ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">@RestController</span><br><span class="line">@RequestMapping(&quot;/test&quot;)</span><br><span class="line">public class TestController &#123;</span><br><span class="line"></span><br><span class="line">    public static ExecutorService threadPool =</span><br><span class="line">            new ThreadPoolExecutor(</span><br><span class="line">                    10,</span><br><span class="line">                    40,</span><br><span class="line">                    20,</span><br><span class="line">                    TimeUnit.SECONDS,</span><br><span class="line">                    new ArrayBlockingQueue&lt;Runnable&gt;(</span><br><span class="line">                            16</span><br><span class="line">                    ));</span><br><span class="line"></span><br><span class="line">    /**</span><br><span class="line">     * CompletableFuture æµ‹è¯•</span><br><span class="line">     *</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @ApiOperation(&quot;CompletableFuture æµ‹è¯•&quot;)</span><br><span class="line">    @PostMapping(&quot;test&quot;)</span><br><span class="line">    public Object test() &#123;</span><br><span class="line">        Map&lt;Object, Object&gt; result = new HashMap&lt;&gt;();</span><br><span class="line">        CompletableFuture.allOf(</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;æ‰§è¡Œ1&quot;);</span><br><span class="line">                    result.put(&quot;key1&quot;, seslectData1());</span><br><span class="line">                &#125;, threadPool),</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;æ‰§è¡Œ2&quot;);</span><br><span class="line">                    result.put(&quot;key2&quot;, seslectData2());</span><br><span class="line">                &#125;, threadPool),</span><br><span class="line">                CompletableFuture.runAsync(() -&gt; &#123;</span><br><span class="line">                    System.out.println(&quot;æ‰§è¡Œ3&quot;);</span><br><span class="line">                    result.put(&quot;key3&quot;, seslectData3());</span><br><span class="line">                &#125;, threadPool)</span><br><span class="line">        ).join();</span><br><span class="line"></span><br><span class="line">        return ResponseUtil.ok(result);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData1() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key1&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData2() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(500);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key2&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String seslectData3() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            Thread.sleep(300);</span><br><span class="line">        &#125; catch (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        return &quot;key3&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-27T08:18:48.544Z" title="2022-12-27 16:18:48">2022-12-27</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:36.172Z" title="2023-4-20 9:23:36">2023-04-20</time>æ›´æ–°</span><span class="level-item">22 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3358ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/27/%E3%80%90Java%E3%80%91CAS%E6%9C%BA%E5%88%B6/">CASæœºåˆ¶</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<h1 id="casæœºåˆ¶"><a class="markdownIt-Anchor" href="#casæœºåˆ¶">#</a> CAS æœºåˆ¶</h1>
<h3 id="æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç "><a class="markdownIt-Anchor" href="#æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ">#</a> æˆ‘ä»¬å…ˆçœ‹ä¸€æ®µä»£ç ï¼š</h3>
<p>å¯åŠ¨ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­è®©é™æ€å˜é‡ count å¾ªç¯ç´¯åŠ  100 æ¬¡ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312170840546?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>æœ€ç»ˆè¾“å‡ºçš„ count ç»“æœä¸€å®šæ˜¯ 200 å—ï¼Ÿå› ä¸ºè¿™æ®µä»£ç æ˜¯é<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%BA%BF%E7%A8%8B%E5%AE%89%E5%85%A8&amp;spm=1001.2101.3001.7020">çº¿ç¨‹å®‰å…¨</a>çš„ï¼Œæ‰€ä»¥æœ€ç»ˆçš„è‡ªå¢ç»“æœå¾ˆå¯èƒ½ä¼šå°äº 200ã€‚æˆ‘ä»¬å†åŠ ä¸Š synchronized åŒæ­¥é”ï¼Œå†æ¥çœ‹ä¸€ä¸‹ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312170827236?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>åŠ äº†åŒæ­¥é”ä¹‹åï¼Œcount è‡ªå¢çš„æ“ä½œå˜æˆäº†åŸå­æ€§æ“ä½œï¼Œæ‰€ä»¥æœ€ç»ˆè¾“å‡ºä¸€å®šæ˜¯ count=200ï¼Œä»£ç å®ç°äº†çº¿ç¨‹å®‰å…¨ã€‚è™½ç„¶ synchronized ç¡®ä¿äº†çº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæœ€æœ‰çš„é€‰æ‹©ã€‚</p>
<p>å…³é”®åœ¨äºæ€§èƒ½é—®é¢˜ã€‚</p>
<p>synchronized å…³é”®å­—ä¼šè®©æ²¡æœ‰å¾—åˆ°é”èµ„æºçš„çº¿ç¨‹è¿›å…¥ BLOCKED çŠ¶æ€ï¼Œè€Œååœ¨äº‰å¤ºåˆ°é”èµ„æºåæ¢å¤ä¸º RUNNABLE çŠ¶æ€ï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­æ¶‰åŠåˆ°æ“ä½œç³»ç»Ÿç”¨æˆ·æ¨¡å¼å’Œå†…æ ¸æ¨¡å¼çš„è½¬æ¢ï¼Œä»£ä»·æ¯”è¾ƒé«˜ã€‚</p>
<p>å°½ç®¡ JAVA 1.6 ä¸º synchronized åšäº†ä¼˜åŒ–ï¼Œå¢åŠ äº†ä»åå‘é”åˆ°è½»é‡çº§é”å†åˆ°é‡é‡çº§é”çš„è¿‡è¿‡åº¦ï¼Œä½†æ˜¯åœ¨æœ€ç»ˆè½¬å˜ä¸ºé‡é‡çº§é”ä¹‹åï¼Œæ€§èƒ½ä»ç„¶æ¯”è¾ƒä½ã€‚æ‰€ä»¥é¢å¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ java ä¸­çš„ â€œåŸå­æ“ä½œç±»â€ã€‚</p>
<p>æ‰€è°“åŸå­æ“ä½œç±»ï¼ŒæŒ‡çš„æ˜¯ java.util.concurrent.atomic åŒ…ä¸‹ï¼Œä¸€ç³»åˆ—ä»¥ Atomic å¼€å¤´çš„åŒ…è£…ç±»ã€‚å¦‚ AtomicBooleanï¼ŒAtomicUIntegerï¼ŒAtomicLongã€‚å®ƒä»¬åˆ†åˆ«ç”¨äº Booleanï¼ŒIntegerï¼ŒLong ç±»å‹çš„åŸå­æ€§æ“ä½œã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å°è¯•ä½¿ç”¨ AtomicInteger ç±»ï¼š</p>
<p><img src="https://img-blog.csdn.net/20180312172106130?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>ä½¿ç”¨ AtomicInteger ä¹‹åï¼Œæœ€ç»ˆçš„è¾“å‡ºç»“æœåŒæ ·å¯ä»¥ä¿è¯æ˜¯ 200ã€‚å¹¶ä¸”åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä»£ç çš„æ€§èƒ½ä¼šæ¯” synchronized æ›´å¥½ã€‚</p>
<p>è€Œ Atomic æ“ä½œç±»çš„åº•å±‚æ­£æ˜¯ç”¨åˆ°äº† â€œCAS æœºåˆ¶â€ã€‚</p>
<p>CAS æ˜¯è‹±æ–‡å•è¯ Compare and Swap çš„ç¼©å†™ï¼Œç¿»è¯‘è¿‡æ¥å°±æ˜¯æ¯”è¾ƒå¹¶æ›¿æ¢ã€‚</p>
<p>CAS æœºåˆ¶ä¸­ä½¿ç”¨äº† 3 ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€ Vï¼Œæ—§çš„é¢„æœŸå€¼ Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼ Bã€‚</p>
<p>æ›´æ–°ä¸€ä¸ªå˜é‡çš„æ—¶å€™ï¼Œåªæœ‰å½“å˜é‡çš„é¢„æœŸå€¼ A å’Œå†…å­˜åœ°å€ V å½“ä¸­çš„å®é™…å€¼ç›¸åŒæ—¶ï¼Œæ‰ä¼šå°†å†…å­˜åœ°å€ V å¯¹åº”çš„å€¼ä¿®æ”¹ä¸º Bã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼š</p>
<p>\1. åœ¨å†…å­˜åœ°å€ V å½“ä¸­ï¼Œå­˜å‚¨ç€å€¼ä¸º 10 çš„å˜é‡ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312172707148?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\2. æ­¤æ—¶çº¿ç¨‹ 1 æƒ³æŠŠå˜é‡çš„å€¼å¢åŠ  1. å¯¹çº¿ç¨‹ 1 æ¥è¯´ï¼Œæ—§çš„é¢„æœŸå€¼ A=10ï¼Œè¦ä¿®æ”¹çš„æ–°å€¼ B=11.</p>
<p><img src="https://img-blog.csdn.net/20180312172814864?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\3. åœ¨çº¿ç¨‹ 1 è¦æäº¤æ›´æ–°ä¹‹å‰ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹ 2 æŠ¢å…ˆä¸€æ­¥ï¼ŒæŠŠå†…å­˜åœ°å€ V ä¸­çš„å˜é‡å€¼ç‡å…ˆæ›´æ–°æˆäº† 11ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312172943800?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\4. çº¿ç¨‹ 1 å¼€å§‹æäº¤æ›´æ–°ï¼Œé¦–å…ˆè¿›è¡Œ A å’Œåœ°å€ V çš„å®é™…å€¼æ¯”è¾ƒï¼Œå‘ç° A ä¸ç­‰äº V çš„å®é™…å€¼ï¼Œæäº¤å¤±è´¥ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312173045349?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\5. çº¿ç¨‹ 1 é‡æ–°è·å–å†…å­˜åœ°å€ V çš„å½“å‰å€¼ï¼Œå¹¶é‡æ–°è®¡ç®—æƒ³è¦ä¿®æ”¹çš„å€¼ã€‚æ­¤æ—¶å¯¹çº¿ç¨‹ 1 æ¥è¯´ï¼ŒA=11ï¼ŒB=12ã€‚è¿™ä¸ªé‡æ–°å°è¯•çš„è¿‡ç¨‹è¢«ç§°ä¸ºè‡ªæ—‹ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312173220371?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\6. è¿™ä¸€æ¬¡æ¯”è¾ƒå¹¸è¿ï¼Œæ²¡æœ‰å…¶ä»–çº¿ç¨‹æ”¹å˜åœ°å€ V çš„å€¼ã€‚çº¿ç¨‹ 1 è¿›è¡Œæ¯”è¾ƒï¼Œå‘ç° A å’Œåœ°å€ V çš„å®é™…å€¼æ˜¯ç›¸ç­‰çš„ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312173331761?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>\7. çº¿ç¨‹ 1 è¿›è¡Œäº¤æ¢ï¼ŒæŠŠåœ°å€ V çš„å€¼æ›¿æ¢ä¸º Bï¼Œä¹Ÿå°±æ˜¯ 12.</p>
<p><img src="https://img-blog.csdn.net/20180312173421205?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>ä»æ€æƒ³ä¸Šæ¥è¯´ï¼Œsynchronized å±äºæ‚²è§‚é”ï¼Œæ‚²è§‚çš„è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸¥é‡ï¼Œæ‰€ä»¥ä¸¥é˜²æ­»å®ˆï¼ŒCAS å±äºä¹è§‚é”ï¼Œä¹è§‚åœ°è®¤ä¸ºç¨‹åºä¸­çš„å¹¶å‘æƒ…å†µä¸é‚£ä¹ˆä¸¥é‡ï¼Œæ‰€ä»¥è®©çº¿ç¨‹ä¸æ–­å»é‡è¯•æ›´æ–°ã€‚</p>
<p>åœ¨ java ä¸­é™¤äº†ä¸Šé¢æåˆ°çš„ Atomic ç³»åˆ—ç±»ï¼Œä»¥åŠ Lock ç³»åˆ—ç±»å¤ºå¾—åº•å±‚å®ç°ï¼Œç”šè‡³åœ¨ JAVA1.6 ä»¥ä¸Šç‰ˆæœ¬ï¼Œsynchronized è½¬å˜ä¸ºé‡é‡çº§é”ä¹‹å‰ï¼Œä¹Ÿä¼šé‡‡ç”¨ CAS æœºåˆ¶ã€‚</p>
<p><strong>CAS çš„ç¼ºç‚¹ï¼š</strong></p>
<p>1ï¼‰ CPU å¼€é”€è¿‡å¤§</p>
<p>åœ¨å¹¶å‘é‡æ¯”è¾ƒé«˜çš„æƒ…å†µä¸‹ï¼Œå¦‚æœè®¸å¤šçº¿ç¨‹åå¤å°è¯•æ›´æ–°æŸä¸€ä¸ªå˜é‡ï¼Œå´åˆä¸€ç›´æ›´æ–°ä¸æˆåŠŸï¼Œå¾ªç¯å¾€å¤ï¼Œä¼šç»™ CPU å¸¦æ¥å¾ˆåˆ°çš„å‹åŠ›ã€‚</p>
<p>2ï¼‰ ä¸èƒ½ä¿è¯ä»£ç å—çš„åŸå­æ€§</p>
<p>CAS æœºåˆ¶æ‰€ä¿è¯çš„çŸ¥è¯†ä¸€ä¸ªå˜é‡çš„åŸå­æ€§æ“ä½œï¼Œè€Œä¸èƒ½ä¿è¯æ•´ä¸ªä»£ç å—çš„åŸå­æ€§ã€‚æ¯”å¦‚éœ€è¦ä¿è¯ 3 ä¸ªå˜é‡å…±åŒè¿›è¡ŒåŸå­æ€§çš„æ›´æ–°ï¼Œå°±ä¸å¾—ä¸ä½¿ç”¨ synchronized äº†ã€‚</p>
<p>3ï¼‰ ABA é—®é¢˜</p>
<p>è¿™æ˜¯ CAS æœºåˆ¶æœ€å¤§çš„é—®é¢˜æ‰€åœ¨ã€‚ï¼ˆåé¢æœ‰ä»‹ç»ï¼‰</p>
<p>æˆ‘ä»¬ä¸‹é¢æ¥ä»‹ç»ä¸€ä¸‹ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<p><em><strong>*1. JAVA ä¸­ CAS çš„åº•å±‚å®ç° *</strong></em></p>
<p><em><strong>*2. CAS çš„ ABA é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚*</strong></em></p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹ AtomicInteger å½“ä¸­å¸¸ç”¨çš„è‡ªå¢æ–¹æ³• incrementAndGetï¼š</p>
<p>public final int incrementAndGet() {</p>
<p>for (;ğŸ˜‰ {</p>
<p>â€‹    int current = get();</p>
<p>â€‹    int next = current + 1;</p>
<p>â€‹    if (compareAndSet(current, next))</p>
<p>â€‹      return next;</p>
<p>}</p>
<p>}</p>
<p>private volatile int value;</p>
<p>public final int get() {</p>
<p>return value;</p>
<p>}</p>
<p>è¿™æ®µä»£ç æ˜¯ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œä¹Ÿå°±æ˜¯ CAS çš„è‡ªæ—‹ï¼Œå¾ªç¯ä½“ä¸­åšäº†ä¸‰ä»¶äº‹ï¼š</p>
<p>\1. è·å–å½“å‰å€¼</p>
<p>\2. å½“å‰å€¼ + 1ï¼Œè®¡ç®—å‡ºç›®æ ‡å€¼</p>
<p>\3. è¿›è¡Œ CAS æ“ä½œï¼Œå¦‚æœæˆåŠŸåˆ™è·³å‡ºå¾ªç¯ï¼Œå¦‚æœå¤±è´¥åˆ™é‡å¤ä¸Šè¿°æ­¥éª¤</p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„é‡ç‚¹æ˜¯ get æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯è·å–å˜é‡çš„å½“å‰å€¼ã€‚</p>
<p>å¦‚ä½•ä¿è¯è·å–çš„å½“å‰å€¼æ˜¯å†…å­˜ä¸­çš„æœ€æ–°å€¼ï¼Ÿå¾ˆç®€å•ï¼Œç”¨ volatile å…³é”®å­—æ¥ä¿è¯ï¼ˆä¿è¯çº¿ç¨‹é—´çš„å¯è§æ€§ï¼‰ã€‚æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹ä¸€ä¸‹ compareAndSet æ–¹æ³•çš„å®ç°ï¼š</p>
<p><img src="https://img-blog.csdn.net/2018031217514825?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>compareAndSet æ–¹æ³•çš„å®ç°å¾ˆç®€å•ï¼Œåªæœ‰ä¸€è¡Œä»£ç ã€‚è¿™é‡Œæ¶‰åŠåˆ°ä¸¤ä¸ªé‡è¦çš„å¯¹è±¡ï¼Œä¸€ä¸ªæ˜¯ unsafeï¼Œä¸€ä¸ªæ˜¯ valueOffsetã€‚</p>
<p>ä»€ä¹ˆæ˜¯ unsafe å‘¢ï¼ŸJava è¯­è¨€ä¸åƒ Cï¼ŒC++ é‚£æ ·å¯ä»¥ç›´æ¥è®¿é—®åº•å±‚æ“ä½œç³»ç»Ÿï¼Œä½†æ˜¯ JVM ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªåé—¨ï¼Œè¿™ä¸ªåé—¨å°±æ˜¯ unsafeã€‚unsafe ä¸ºæˆ‘ä»¬æä¾›äº†ç¡¬ä»¶çº§åˆ«çš„åŸå­æ“ä½œã€‚</p>
<p>è‡³äº valueOffset å¯¹è±¡ï¼Œæ˜¯é€šè¿‡ unsafe.objectFiledOffset æ–¹æ³•å¾—åˆ°ï¼Œæ‰€ä»£è¡¨çš„æ˜¯ AtomicInteger å¯¹è±¡ value æˆå‘˜å˜é‡åœ¨å†…å­˜ä¸­çš„åç§»é‡ã€‚æˆ‘ä»¬å¯ä»¥ç®€å•çš„æŠŠ valueOffset ç†è§£ä¸º value å˜é‡çš„å†…å­˜åœ°å€ã€‚</p>
<p>æˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼ŒCAS æœºåˆ¶ä¸­ä½¿ç”¨äº† 3 ä¸ªåŸºæœ¬æ“ä½œæ•°ï¼šå†…å­˜åœ°å€ Vï¼Œæ—§çš„é¢„æœŸå€¼ Aï¼Œè¦ä¿®æ”¹çš„æ–°å€¼ Bã€‚</p>
<p>è€Œ unsafe çš„ compareAndSwapInt æ–¹æ³•çš„å‚æ•°åŒ…æ‹¬äº†è¿™ä¸‰ä¸ªåŸºæœ¬å…ƒç´ ï¼švalueOffset å‚æ•°ä»£è¡¨äº† Vï¼Œexpect å‚æ•°ä»£è¡¨äº† Aï¼Œupdate å‚æ•°ä»£è¡¨äº† Bã€‚</p>
<p>æ­£æ˜¯ unsafe çš„ compareAndSwapInt æ–¹æ³•ä¿è¯äº† Compare å’Œ Swap æ“ä½œä¹‹é—´çš„åŸå­æ€§æ“ä½œã€‚</p>
<p>æˆ‘ä»¬ç°åœ¨æ¥è¯´ä»€ä¹ˆæ˜¯ ABA é—®é¢˜ã€‚å‡è®¾å†…å­˜ä¸­æœ‰ä¸€ä¸ªå€¼ä¸º A çš„å˜é‡ï¼Œå­˜å‚¨åœ¨åœ°å€ V ä¸­ã€‚</p>
<p><img src="https://img-blog.csdn.net/2018031218013467?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>æ­¤æ—¶æœ‰ä¸‰ä¸ªçº¿ç¨‹æƒ³ä½¿ç”¨ CAS çš„æ–¹å¼æ›´æ–°è¿™ä¸ªå˜é‡çš„å€¼ï¼Œæ¯ä¸ªçº¿ç¨‹çš„æ‰§è¡Œæ—¶é—´æœ‰ç•¥å¾®åå·®ã€‚çº¿ç¨‹ 1 å’Œçº¿ç¨‹ 2 å·²ç»è·å–å½“å‰å€¼ï¼Œçº¿ç¨‹ 3 è¿˜æœªè·å–å½“å‰å€¼ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312180247202?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>æ¥ä¸‹æ¥ï¼Œçº¿ç¨‹ 1 å…ˆä¸€æ­¥æ‰§è¡ŒæˆåŠŸï¼ŒæŠŠå½“å‰å€¼æˆåŠŸä» A æ›´æ–°ä¸º Bï¼›åŒæ—¶çº¿ç¨‹ 2 å› ä¸ºæŸç§åŸå› è¢«é˜»å¡ä½ï¼Œæ²¡æœ‰åšæ›´æ–°æ“ä½œï¼›çº¿ç¨‹ 3 åœ¨çº¿ç¨‹ 1 æ›´æ–°ä¹‹åï¼Œè·å–äº†å½“å‰å€¼ Bã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312180432152?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>åœ¨ä¹‹åï¼Œçº¿ç¨‹ 2 ä»ç„¶å¤„äºé˜»å¡çŠ¶æ€ï¼Œçº¿ç¨‹ 3 ç»§ç»­æ‰§è¡Œï¼ŒæˆåŠŸæŠŠå½“å‰å€¼ä» B æ›´æ–°æˆäº† Aã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312180546889?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>æœ€åï¼Œçº¿ç¨‹ 2 ç»ˆäºæ¢å¤äº†è¿è¡ŒçŠ¶æ€ï¼Œç”±äºé˜»å¡ä¹‹å‰å·²ç»è·å¾—äº† â€œå½“å‰å€¼ Aâ€ï¼Œå¹¶ä¸”ç»è¿‡ compare æ£€æµ‹ï¼Œå†…å­˜åœ°å€ V ä¸­çš„å®é™…å€¼ä¹Ÿæ˜¯ Aï¼Œæ‰€ä»¥æˆåŠŸæŠŠå˜é‡å€¼ A æ›´æ–°æˆäº† Bã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312180729792?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>çœ‹èµ·æ¥è¿™ä¸ªä¾‹å­æ²¡å•¥é—®é¢˜ï¼Œä½†å¦‚æœç»“åˆå®é™…ï¼Œå°±å¯ä»¥å‘ç°å®ƒçš„é—®é¢˜æ‰€åœ¨ã€‚</p>
<p>æˆ‘ä»¬å‡è®¾ä¸€ä¸ªææ¬¾æœºçš„ä¾‹å­ã€‚å‡è®¾æœ‰ä¸€ä¸ªéµå¾ª CAS åŸç†çš„ææ¬¾æœºï¼Œå°ç°æœ‰ 100 å…ƒå­˜æ¬¾ï¼Œè¦ç”¨è¿™ä¸ªææ¬¾æœºæ¥ææ¬¾ 50 å…ƒã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312181342879?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>ç”±äºææ¬¾æœºç¡¬ä»¶å‡ºäº†ç‚¹é—®é¢˜ï¼Œå°ç°çš„ææ¬¾æ“ä½œè¢«åŒæ—¶æäº¤äº†ä¸¤æ¬¡ï¼Œå¼€å¯äº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œä¸¤ä¸ªçº¿ç¨‹éƒ½æ˜¯è·å–å½“å‰å€¼ 100 å…ƒï¼Œè¦æ›´æ–°æˆ 50 å…ƒã€‚</p>
<p>ç†æƒ³æƒ…å†µä¸‹ï¼Œåº”è¯¥ä¸€ä¸ªçº¿ç¨‹æ›´æ–°æˆåŠŸï¼Œä¸€ä¸ªçº¿ç¨‹æ›´æ–°å¤±è´¥ï¼Œå°ç°çš„å­˜æ¬¾å€¼è¢«æ‰£ä¸€æ¬¡ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312181404403?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>çº¿ç¨‹ 1 é¦–å…ˆæ‰§è¡ŒæˆåŠŸï¼ŒæŠŠä½™é¢ä» 100 æ”¹æˆ 50. çº¿ç¨‹ 2 å› ä¸ºæŸç§åŸå› é˜»å¡ã€‚è¿™æ—¶ï¼Œå°ç°çš„å¦ˆå¦ˆåˆšå¥½ç»™å°ç°æ±‡æ¬¾ 50 å…ƒã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312181531202?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>çº¿ç¨‹ 2 ä»ç„¶æ˜¯é˜»å¡çŠ¶æ€ï¼Œçº¿ç¨‹ 3 æ‰§è¡ŒæˆåŠŸï¼ŒæŠŠä½™é¢ä» 50 æ”¹æˆäº† 100ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312181635868?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>çº¿ç¨‹ 2 æ¢å¤è¿è¡Œï¼Œç”±äºé˜»å¡ä¹‹å‰è·å¾—äº† â€œå½“å‰å€¼â€ 100ï¼Œå¹¶ä¸”ç»è¿‡ compare æ£€æµ‹ï¼Œæ­¤æ—¶å­˜æ¬¾å®é™…å€¼ä¹Ÿæ˜¯ 100ï¼Œæ‰€ä»¥ä¼šæˆåŠŸæŠŠå˜é‡å€¼ 100 æ›´æ–°æˆ 50ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312181813320?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>åŸæœ¬çº¿ç¨‹ 2 åº”å½“æäº¤å¤±è´¥ï¼Œå°ç°çš„æ­£ç¡®ä½™é¢åº”è¯¥ä¿æŒ 100 å…ƒï¼Œç»“æœç”±äº ABA é—®é¢˜æäº¤æˆåŠŸäº†ã€‚</p>
<p>æ€ä¹ˆè§£å†³å‘¢ï¼ŸåŠ ä¸ªç‰ˆæœ¬å·å°±å¯ä»¥äº†ã€‚</p>
<p>çœŸæ­£è¦åšåˆ°ä¸¥è°¨çš„ CAS æœºåˆ¶ï¼Œæˆ‘ä»¬åœ¨ compare é˜¶æ®µä¸ä»…è¦æ¯”è¾ƒæœŸæœ›å€¼ A å’Œåœ°å€ V ä¸­çš„å®é™…å€¼ï¼Œè¿˜è¦æ¯”è¾ƒå˜é‡çš„ç‰ˆæœ¬å·æ˜¯å¦ä¸€è‡´ã€‚</p>
<p>æˆ‘ä»¬ä»ç„¶ä»¥åˆšæ‰çš„ä¾‹å­æ¥è¯´æ˜ï¼Œå‡è®¾åœ°å€ V ä¸­å­˜å‚¨ç€å˜é‡å€¼ Aï¼Œå½“å‰ç‰ˆæœ¬å·æ˜¯ 01ã€‚çº¿ç¨‹ 1 è·å–äº†å½“å‰å€¼ A å’Œç‰ˆæœ¬å· 01ï¼Œæƒ³è¦æ›´æ–°ä¸º Bï¼Œä½†æ˜¯è¢«é˜»å¡äº†ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312182255181?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>è¿™æ—¶å€™ï¼Œå†…å­˜åœ°å€ V ä¸­å˜é‡å‘ç”Ÿäº†å¤šæ¬¡æ”¹å˜ï¼Œç‰ˆæœ¬å·æå‡ä¸º 03ï¼Œä½†æ˜¯å˜é‡å€¼ä»ç„¶æ˜¯ Aã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312182346458?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>éšåçº¿ç¨‹ 1 æ¢å¤è¿è¡Œï¼Œè¿›è¡Œ compare æ“ä½œã€‚ç»è¿‡æ¯”è¾ƒï¼Œçº¿ç¨‹ 1 æ‰€è·å¾—çš„å€¼å’Œåœ°å€çš„å®é™…å€¼éƒ½æ˜¯ Aï¼Œä½†æ˜¯ç‰ˆæœ¬å·ä¸ç›¸ç­‰ï¼Œæ‰€ä»¥è¿™ä¸€æ¬¡æ›´æ–°å¤±è´¥ã€‚</p>
<p><img src="https://img-blog.csdn.net/20180312182506360?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzI5OTgxNTM=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p>
<p>åœ¨ Java ä¸­ï¼ŒAtomicStampedReference ç±»å°±å®ç°äº†ç”¨ç‰ˆæœ¬å·ä½œæ¯”è¾ƒé¢ CAS æœºåˆ¶ã€‚</p>
<p><em><strong>*1. java è¯­è¨€ CAS åº•å±‚å¦‚ä½•å®ç°ï¼Ÿ*</strong></em></p>
<p><em><strong>* åˆ©ç”¨ unsafe æä¾›çš„åŸå­æ€§æ“ä½œæ–¹æ³•ã€‚*</strong></em></p>
<p><em><strong>*2. ä»€ä¹ˆäº‹ ABA é—®é¢˜ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ*</strong></em></p>
<p><em><strong>* å½“ä¸€ä¸ªå€¼ä» A å˜æˆ Bï¼Œåˆæ›´æ–°å› Aï¼Œæ™®é€š CAS æœºåˆ¶ä¼šè¯¯åˆ¤é€šè¿‡æ£€æµ‹ã€‚*</strong></em></p>
<p><em><strong>* åˆ©ç”¨ç‰ˆæœ¬å·æ¯”è¾ƒå¯ä»¥æœ‰æ•ˆè§£å†³ ABA é—®é¢˜ã€‚*</strong></em></p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-27T08:18:48.542Z" title="2022-12-27 16:18:48">2022-12-27</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:36.166Z" title="2023-4-20 9:23:36">2023-04-20</time>æ›´æ–°</span><span class="level-item">8 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1252ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/27/%E3%80%90Java%E3%80%91CAS-ABA%E9%97%AE%E9%A2%98/">CAS-ABAé—®é¢˜</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<h1 id="cas-abaé—®é¢˜"><a class="markdownIt-Anchor" href="#cas-abaé—®é¢˜">#</a> CAS-ABA é—®é¢˜</h1>
<h2 id="ä¸€æ¦‚è¿°"><a class="markdownIt-Anchor" href="#ä¸€æ¦‚è¿°">#</a> ä¸€ã€‚æ¦‚è¿°ï¼š</h2>
<p>â€‹		ABA é—®é¢˜æ˜¯åœ¨å¤šçº¿ç¨‹å¹¶å‘çš„æƒ…å†µä¸‹ï¼Œå‘ç”Ÿçš„ä¸€ç§ç°è±¡ã€‚ä¸Šä¸€æ¬¡è®°å½•äº†æœ‰å…³ CAS æ“ä½œçš„ä¸€äº›çŸ¥è¯†ï¼ŒCAS é€šè¿‡æ¯”è¾ƒå†…å­˜ä¸­çš„ä¸€ä¸ªæ•°æ®æ˜¯å¦æ˜¯é¢„æœŸå€¼ï¼Œå¦‚æœæ˜¯å°±å°†å®ƒä¿®æ”¹æˆæ–°å€¼ï¼Œå¦‚æœä¸æ˜¯åˆ™è¿›è¡Œè‡ªæ—‹ï¼Œé‡å¤æ¯”è¾ƒçš„æ“ä½œï¼Œç›´åˆ°æŸä¸€åˆ»å†…å­˜å€¼ç­‰äºé¢„æœŸå€¼å†è¿›è¡Œä¿®æ”¹ã€‚è€Œ ABA é—®é¢˜åˆ™æ˜¯åœ¨ CAS æ“ä½œä¸­å­˜åœ¨çš„ä¸€ä¸ªç»å…¸é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜æŸäº›æ—¶å€™ä¸ä¼šå¸¦æ¥ä»»ä½•å½±å“ï¼ŒæŸäº›æ—¶å€™å´æ˜¯å½±å“å¾ˆå¤§çš„ã€‚</p>
<h2 id="äºŒä»€ä¹ˆæ˜¯abaé—®é¢˜"><a class="markdownIt-Anchor" href="#äºŒä»€ä¹ˆæ˜¯abaé—®é¢˜">#</a> äºŒã€‚ä»€ä¹ˆæ˜¯ ABA é—®é¢˜ï¼Ÿ</h2>
<h4 id="ç†è§£ä¸€"><a class="markdownIt-Anchor" href="#ç†è§£ä¸€">#</a> ç†è§£ä¸€ï¼š</h4>
<p>â€‹		å½“æ‰§è¡Œ campare and swap ä¼šå‡ºç°å¤±è´¥çš„æƒ…å†µã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªçº¿ç¨‹å…ˆè¯»å–å…±äº«å†…å­˜æ•°æ®å€¼ Aï¼Œéšåå› æŸç§åŸå› ï¼Œçº¿ç¨‹æš‚æ—¶æŒ‚èµ·ï¼ŒåŒæ—¶å¦ä¸€ä¸ªçº¿ç¨‹ä¸´æ—¶å°†å…±äº«å†…å­˜æ•°æ®å€¼å…ˆæ”¹ä¸º Bï¼Œéšååˆæ”¹å›ä¸º Aã€‚éšåæŒ‚èµ·çº¿ç¨‹æ¢å¤ï¼Œå¹¶é€šè¿‡ CAS æ¯”è¾ƒï¼Œæœ€ç»ˆæ¯”è¾ƒç»“æœå°†ä¼šæ— å˜åŒ–ã€‚è¿™æ ·ä¼šé€šè¿‡æ£€æŸ¥ï¼Œè¿™å°±æ˜¯ ABA é—®é¢˜ã€‚ åœ¨ CAS æ¯”è¾ƒå‰ä¼šè¯»å–åŸå§‹æ•°æ®ï¼Œéšåè¿›è¡ŒåŸå­ CAS æ“ä½œã€‚è¿™ä¸ªé—´éš™ä¹‹é—´ç”±äºå¹¶å‘æ“ä½œï¼Œæœ€ç»ˆå¯èƒ½ä¼šå¸¦æ¥é—®é¢˜ã€‚</p>
<h4 id="ç†è§£äºŒ"><a class="markdownIt-Anchor" href="#ç†è§£äºŒ">#</a> <strong>ç†è§£äºŒ:</strong></h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20181231131658183.png" alt=""></p>
<p>â€œABAâ€ é—®é¢˜ï¼šå‡è®¾ t1 çº¿ç¨‹å·¥ä½œæ—¶é—´ä¸º 10 ç§’ï¼Œt2 çº¿ç¨‹å·¥ä½œæ—¶é—´ä¸º 2 ç§’ï¼Œé‚£ä¹ˆå¯èƒ½åœ¨ A çš„å·¥ä½œæœŸé—´ï¼Œä¸»å†…å­˜ä¸­çš„å…±äº«å˜é‡ A å·²ç»è¢« t2 çº¿ç¨‹ä¿®æ”¹äº†å¤šæ¬¡ï¼Œåªæ˜¯æ°å¥½æœ€åä¸€æ¬¡ä¿®æ”¹çš„å€¼æ˜¯è¯¥å˜é‡çš„åˆå§‹å€¼ï¼Œè™½ç„¶ç”¨ CAS åˆ¤å®šå‡ºæ¥çš„ç»“æœæ˜¯æœŸæœ›å€¼ï¼Œä½†æ˜¯å´ä¸æ˜¯åŸæ¥é‚£ä¸ªäº† =======ã€‹â€œç‹¸çŒ«æ¢å¤ªå­â€<br>
 ç›¸å½“äºæ˜¯åªå…³å¿ƒå…±äº«å˜é‡çš„èµ·å§‹å€¼å’Œç»“æŸå€¼ï¼Œè€Œä¸å…³å¿ƒè¿‡ç¨‹ä¸­å…±äº«å˜é‡æ˜¯å¦è¢«å…¶ä»–çº¿ç¨‹åŠ¨è¿‡ã€‚<br>
æœ‰äº›ä¸šåŠ¡å¯èƒ½ä¸éœ€è¦å…³å¿ƒä¸­é—´è¿‡ç¨‹ï¼Œåªè¦å‰åå€¼ä¸€æ ·å°±è¡Œï¼Œä½†æ˜¯æœ‰äº›ä¸šåŠ¡éœ€æ±‚è¦æ±‚å˜é‡åœ¨ä¸­é—´è¿‡ç¨‹ä¸èƒ½è¢«ä¿®æ”¹ã€‚</p>
<p>åªé  CAS æ— æ³•ä¿è¯ ABA é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ â€œåŸå­å¼•ç”¨â€ æ‰èƒ½è§£å†³ï¼ï¼ï¼ï¼</p>
<h1 id="ä¸‰abaé—®é¢˜çš„è§£å†³"><a class="markdownIt-Anchor" href="#ä¸‰abaé—®é¢˜çš„è§£å†³">#</a> ä¸‰.ABA é—®é¢˜çš„è§£å†³ï¼š</h1>
<h2 id="åŸå­å¼•ç”¨å­˜åœ¨abaé—®é¢˜"><a class="markdownIt-Anchor" href="#åŸå­å¼•ç”¨å­˜åœ¨abaé—®é¢˜">#</a> åŸå­å¼•ç”¨ï¼šï¼ˆå­˜åœ¨ ABA é—®é¢˜ï¼‰</h2>
<p>æ¡ˆä¾‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">package</span> InterviewTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">	 String name;</span><br><span class="line">	 <span class="type">int</span> age;</span><br><span class="line">	 </span><br><span class="line">	 <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String name,<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		 <span class="built_in">this</span>.name=name;</span><br><span class="line">		 <span class="built_in">this</span>.age=age;</span><br><span class="line">	 &#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="string">&quot;User [name=&quot;</span> + name + <span class="string">&quot;, age=&quot;</span> + age + <span class="string">&quot;]&quot;</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> name;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getAge</span><span class="params">()</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> age;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setAge</span><span class="params">(<span class="type">int</span> age)</span> &#123;</span><br><span class="line">		<span class="built_in">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AtomicReferenceDemo</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		<span class="type">User</span> <span class="variable">z3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;z3&quot;</span>,<span class="number">25</span>);</span><br><span class="line">		<span class="type">User</span> <span class="variable">li4</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;li4&quot;</span>,<span class="number">25</span>);</span><br><span class="line">		AtomicReference&lt;User&gt; atomicReference  = <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;();</span><br><span class="line">		atomicReference.set(z3);</span><br><span class="line">		System.out.println(atomicReference);</span><br><span class="line">		System.out.println(atomicReference.compareAndSet(z3, li4)+</span><br><span class="line">							<span class="string">&quot;       &quot;</span>+atomicReference.get().toString());</span><br><span class="line">		System.out.println(atomicReference.compareAndSet(li4, z3)+</span><br><span class="line">				<span class="string">&quot;       &quot;</span>+atomicReference.get().toString());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¸¦ç‰ˆæœ¬å·çš„åŸå­å¼•ç”¨è§£å†³abaé—®é¢˜"><a class="markdownIt-Anchor" href="#å¸¦ç‰ˆæœ¬å·çš„åŸå­å¼•ç”¨è§£å†³abaé—®é¢˜">#</a> å¸¦ç‰ˆæœ¬å·çš„åŸå­å¼•ç”¨ï¼ˆè§£å†³ ABA é—®é¢˜ï¼‰</h2>
<p><strong>AtomicStampedReference ç‰ˆæœ¬å·åŸå­å¼•ç”¨ï¼š</strong><br>
<strong>æ¡ˆä¾‹ï¼šä¸¤ç§åŸå­å¼•ç”¨çš„å¯¹æ¯”</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">package</span> InterviewTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicReference;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicStampedReference;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ABADemo</span> &#123;</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">static</span> AtomicReference&lt;Integer&gt; atomicReference </span><br><span class="line">									= <span class="keyword">new</span> <span class="title class_">AtomicReference</span>&lt;&gt;(<span class="number">100</span>);</span><br><span class="line">	<span class="keyword">static</span> AtomicStampedReference&lt;Integer&gt;  atomicStampedReference </span><br><span class="line">									= <span class="keyword">new</span> <span class="title class_">AtomicStampedReference</span>&lt;&gt;(<span class="number">100</span>,<span class="number">1</span>);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;************ä»¥ä¸‹æ˜¯ABAé—®é¢˜çš„äº§ç”Ÿ**************&quot;</span>);</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">101</span>);</span><br><span class="line">			atomicReference.compareAndSet(<span class="number">101</span>, <span class="number">100</span>);</span><br><span class="line">		&#125;,<span class="string">&quot;t1&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			System.out.println(atomicReference.compareAndSet(<span class="number">100</span>, <span class="number">2019</span>)</span><br><span class="line">					+<span class="string">&quot;   &quot;</span>+atomicReference.get());</span><br><span class="line">		&#125;,<span class="string">&quot;t2&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">try</span> &#123;</span><br><span class="line">			Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">		&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		</span><br><span class="line">		System.out.println(<span class="string">&quot;************ä»¥ä¸‹æ˜¯ABAé—®é¢˜çš„è§£å†³**************&quot;</span>);</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicStampedReference.getStamp();</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   ç¬¬ä¸€æ¬¡ç‰ˆæœ¬å·ï¼š&quot;</span>+stamp);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			atomicStampedReference.compareAndSet(<span class="number">100</span>, </span><br><span class="line">										<span class="number">101</span>, </span><br><span class="line">										atomicStampedReference.getStamp(),</span><br><span class="line">										atomicStampedReference.getStamp()+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   ç¬¬2æ¬¡ç‰ˆæœ¬å·ï¼š&quot;</span>+atomicStampedReference.getStamp());</span><br><span class="line">			atomicStampedReference.compareAndSet(<span class="number">101</span>, </span><br><span class="line">					<span class="number">100</span>, </span><br><span class="line">					atomicStampedReference.getStamp(),</span><br><span class="line">					atomicStampedReference.getStamp()+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   ç¬¬3æ¬¡ç‰ˆæœ¬å·ï¼š&quot;</span>+atomicStampedReference.getStamp());</span><br><span class="line">			</span><br><span class="line">		&#125;,<span class="string">&quot;t3&quot;</span>).start();</span><br><span class="line">		</span><br><span class="line">		<span class="keyword">new</span> <span class="title class_">Thread</span>(()-&gt;&#123;</span><br><span class="line">			<span class="type">int</span> <span class="variable">stamp</span> <span class="operator">=</span> atomicStampedReference.getStamp();</span><br><span class="line">			System.out.println(Thread.currentThread().getName()</span><br><span class="line">					+<span class="string">&quot;  &quot;</span>+<span class="string">&quot;   ç¬¬ä¸€æ¬¡ç‰ˆæœ¬å·ï¼š&quot;</span>+stamp);</span><br><span class="line">			<span class="keyword">try</span> &#123;</span><br><span class="line">				Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">			&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			<span class="type">boolean</span> <span class="variable">result</span> <span class="operator">=</span>  atomicStampedReference.compareAndSet(</span><br><span class="line">					<span class="number">100</span>, </span><br><span class="line">					<span class="number">2019</span>, </span><br><span class="line">					stamp, </span><br><span class="line">					stamp+<span class="number">1</span>);</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+</span><br><span class="line">					<span class="string">&quot;  ä¿®æ”¹æˆåŠŸå¦ï¼š&quot;</span>+result+<span class="string">&quot;  å½“å‰æœ€æ–°å®é™…ç‰ˆæœ¬å·ï¼š&quot;</span></span><br><span class="line">					+atomicStampedReference.getStamp());</span><br><span class="line">			System.out.println(Thread.currentThread().getName()+</span><br><span class="line">					<span class="string">&quot;  å½“å‰å®é™…æœ€æ–°å€¼ï¼š&quot;</span></span><br><span class="line">					+atomicStampedReference.getReference());</span><br><span class="line">			</span><br><span class="line">		&#125;,<span class="string">&quot;t4&quot;</span>).start();</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">è¾“å‡º:</span><br><span class="line">************ä»¥ä¸‹æ˜¯ABAé—®é¢˜çš„äº§ç”Ÿ**************</span><br><span class="line"><span class="literal">true</span>   <span class="number">2019</span></span><br><span class="line">************ä»¥ä¸‹æ˜¯ABAé—®é¢˜çš„è§£å†³**************</span><br><span class="line">t3     ç¬¬ä¸€æ¬¡ç‰ˆæœ¬å·ï¼š<span class="number">1</span></span><br><span class="line">t4     ç¬¬ä¸€æ¬¡ç‰ˆæœ¬å·ï¼š<span class="number">1</span></span><br><span class="line">t3     ç¬¬<span class="number">2</span>æ¬¡ç‰ˆæœ¬å·ï¼š<span class="number">2</span></span><br><span class="line">t3     ç¬¬<span class="number">3</span>æ¬¡ç‰ˆæœ¬å·ï¼š<span class="number">3</span></span><br><span class="line">t4  ä¿®æ”¹æˆåŠŸå¦ï¼š<span class="literal">false</span>  å½“å‰æœ€æ–°å®é™…ç‰ˆæœ¬å·ï¼š<span class="number">3</span></span><br><span class="line">t4  å½“å‰å®é™…æœ€æ–°å€¼ï¼š<span class="number">100</span></span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-12-27T08:18:48.539Z" title="2022-12-27 16:18:48">2022-12-27</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:36.154Z" title="2023-4-20 9:23:36">2023-04-20</time>æ›´æ–°</span><span class="level-item">3 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦486ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/12/27/%E3%80%90Java%E3%80%91Alibaba%E5%88%86%E5%B1%82%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B%E8%A7%84%E7%BA%A6/">é˜¿é‡Œå·´å·´Javaå¼€å‘æ‰‹å†Œä¸­çš„DOã€DTOã€BOã€AOã€VOã€POJOå®šä¹‰</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<p>åˆ†å±‚é¢†åŸŸæ¨¡å‹è§„çº¦ï¼š</p>
<p>DOï¼ˆ Data Objectï¼‰ï¼šä¸æ•°æ®åº“è¡¨ç»“æ„ä¸€ä¸€å¯¹åº”ï¼Œé€šè¿‡ DAO å±‚å‘ä¸Šä¼ è¾“æ•°æ®æºå¯¹è±¡ã€‚<br>
DTOï¼ˆ Data Transfer Objectï¼‰ï¼šæ•°æ®ä¼ è¾“å¯¹è±¡ï¼ŒService æˆ– Manager å‘å¤–ä¼ è¾“çš„å¯¹è±¡ã€‚<br>
BOï¼ˆ Business Objectï¼‰ï¼šä¸šåŠ¡å¯¹è±¡ã€‚ ç”± Service å±‚è¾“å‡ºçš„å°è£…ä¸šåŠ¡é€»è¾‘çš„å¯¹è±¡ã€‚<br>
AOï¼ˆ Application Objectï¼‰ï¼šåº”ç”¨å¯¹è±¡ã€‚ åœ¨ Web å±‚ä¸ Service å±‚ä¹‹é—´æŠ½è±¡çš„å¤ç”¨å¯¹è±¡æ¨¡å‹ï¼Œæä¸ºè´´è¿‘å±•ç¤ºå±‚ï¼Œå¤ç”¨åº¦ä¸é«˜ã€‚<br>
VOï¼ˆ View Objectï¼‰ï¼šæ˜¾ç¤ºå±‚å¯¹è±¡ï¼Œé€šå¸¸æ˜¯ Web å‘æ¨¡æ¿æ¸²æŸ“å¼•æ“å±‚ä¼ è¾“çš„å¯¹è±¡ã€‚<br>
POJOï¼ˆ Plain Ordinary Java Objectï¼‰ï¼šåœ¨æœ¬æ‰‹å†Œä¸­ï¼Œ POJO ä¸“æŒ‡åªæœ‰ setter/getter/toString çš„ç®€å•ç±»ï¼ŒåŒ…æ‹¬ DO/DTO/BO/VO ç­‰ã€‚<br>
Queryï¼šæ•°æ®æŸ¥è¯¢å¯¹è±¡ï¼Œå„å±‚æ¥æ”¶ä¸Šå±‚çš„æŸ¥è¯¢è¯·æ±‚ã€‚ æ³¨æ„è¶…è¿‡ 2 ä¸ªå‚æ•°çš„æŸ¥è¯¢å°è£…ï¼Œç¦æ­¢ä½¿ç”¨ Map ç±»æ¥ä¼ è¾“ã€‚<br>
é¢†åŸŸæ¨¡å‹å‘½åè§„çº¦ï¼š</p>
<p>æ•°æ®å¯¹è±¡ï¼šxxxDOï¼Œxxx å³ä¸ºæ•°æ®è¡¨åã€‚<br>
æ•°æ®ä¼ è¾“å¯¹è±¡ï¼šxxxDTOï¼Œxxx ä¸ºä¸šåŠ¡é¢†åŸŸç›¸å…³çš„åç§°ã€‚<br>
å±•ç¤ºå¯¹è±¡ï¼šxxxVOï¼Œxxx ä¸€èˆ¬ä¸ºç½‘é¡µåç§°ã€‚<br>
POJO æ˜¯ DO/DTO/BO/VO çš„ç»Ÿç§°ï¼Œç¦æ­¢å‘½åæˆ xxxPOJOã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-11-24T05:13:10.754Z" title="2022-11-24 13:13:10">2022-11-24</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:35.959Z" title="2023-4-20 9:23:35">2023-04-20</time>æ›´æ–°</span><span class="level-item">19 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2856ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/11/24/%E3%80%90Docker%E3%80%91Docker%E7%94%A8%E6%B3%95%E5%91%BD%E4%BB%A4%E5%A4%A7%E5%85%A8/">Dockerçš„åŸºç¡€ç”¨æ³•</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<h1 id="1-dockeræ¶æ„"><a class="markdownIt-Anchor" href="#1-dockeræ¶æ„">#</a> 1 Docker æ¶æ„</h1>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/60e8fc2bc92e48d0b96c0eaf079483c6.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é•œåƒ (Image)ï¼šDocker é•œåƒ (Image)ï¼Œå°±ç›¸å½“äºæ˜¯ ä¸€ä¸ª root æ–‡ä»¶ç³»ç»Ÿã€‚æ¯”å¦‚å®˜æ–¹é•œåƒ ubuntu:16.04 å°±åŒ… å«äº†å®Œæ•´çš„ä¸€å¥— Ubuntu16.04 æœ€å°ç³»ç»Ÿçš„ root æ–‡ä»¶ç³»ç»Ÿã€‚<br>
å®¹å™¨ (Container)ï¼šé•œåƒ (Image) å’Œå®¹å™¨ (Contain er) çš„å…³ç³»ï¼Œå°±åƒæ˜¯é¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ä¸­çš„ç±»å’Œå¯¹è±¡ä¸€ æ ·ï¼Œé•œåƒæ˜¯é™æ€çš„å®šä¹‰ï¼Œå®¹å™¨æ˜¯é•œåƒè¿è¡Œæ—¶çš„å®ä½“ã€‚å®¹ å™¨å¯ä»¥è¢«åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€åˆ é™¤ã€æš‚åœç­‰ã€‚<br>
ä»“åº“ (Repository)ï¼šä»“åº“å¯çœ‹æˆä¸€ä¸ªä»£ç æ§åˆ¶ä¸­å¿ƒï¼Œ ç”¨æ¥ä¿å­˜é•œåƒ</p>
<h1 id="2-dockeré•œåƒä¸é•œåƒä»“åº“"><a class="markdownIt-Anchor" href="#2-dockeré•œåƒä¸é•œåƒä»“åº“">#</a> 2 Docker é•œåƒä¸é•œåƒä»“åº“</h1>
<p>åœ¨ docker ä¸­ä»“åº“çš„åå­—æ˜¯ä»¥åº”ç”¨çš„åç§°å–åçš„ã€‚</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/20210104183520743.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>é•œåƒæ˜¯é™æ€çš„ï¼Œè€Œå®¹å™¨æ˜¯åŠ¨æ€çš„ï¼Œå®¹å™¨æœ‰å…¶ç”Ÿå‘½å‘¨æœŸï¼Œé•œåƒä¸å®¹å™¨çš„å…³ç³»ç±»ä¼¼äºç¨‹åºä¸è¿›ç¨‹çš„å…³ç³»ã€‚é•œåƒç±»ä¼¼äºæ–‡ä»¶ç³»ç»Ÿä¸­çš„ç¨‹åºæ–‡ä»¶ï¼Œè€Œå®¹å™¨åˆ™ç±»ä¼¼äºå°†ä¸€ä¸ªç¨‹åºè¿è¡Œèµ·æ¥çš„çŠ¶æ€ï¼Œä¹Ÿå³è¿›ç¨‹ã€‚æ‰€ä»¥å®¹å™¨æ˜¯å¯ä»¥åˆ é™¤çš„ï¼Œå®¹å™¨è¢«åˆ é™¤åå…¶é•œåƒæ˜¯ä¸ä¼šè¢«åˆ é™¤çš„ã€‚</p>
<h1 id="3-dockerå¯¹è±¡"><a class="markdownIt-Anchor" href="#3-dockerå¯¹è±¡">#</a> 3 Docker å¯¹è±¡</h1>
<p>When you use docker, you are creating and using images, containers, networks, volumes, pluginns, and other objects.(å½“ä½ ä½¿ç”¨ docker æ—¶ï¼Œä½ æ­£åœ¨åˆ›å»ºå’Œä½¿ç”¨é•œåƒã€å®¹å™¨ã€ç½‘ç»œã€å·ã€æ’ä»¶å’Œå…¶ä»–å¯¹è±¡)</p>
<p>IMAGES (é•œåƒ)</p>
<p>An image is a read-only template with instructions for creating a docker container.(é•œåƒæ˜¯ä¸€ä¸ªåªè¯»æ¨¡æ¿ï¼Œå®ƒå¸¦æœ‰åˆ›å»º docker å®¹å™¨çš„æŒ‡ä»¤ã€‚)<br>
 Often, an image is based on another image, with some additional customization.(é€šå¸¸ï¼Œä¸€ä¸ªé•œåƒåŸºäºå¦ä¸€ä¸ªé•œåƒï¼Œå¹¶å¸¦æœ‰ä¸€äº›é¢å¤–çš„è‡ªå®šä¹‰ã€‚)<br>
 You might create your own images or you might only use those created by others and published in a registry.(æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„é•œåƒï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–äººåˆ›å»ºå¹¶åœ¨ä»“åº“ä¸­å‘å¸ƒçš„é•œåƒã€‚)<br>
 CONTAINERS (å®¹å™¨)</p>
<p>A conntainer is a runnable instance of an image.(å®¹å™¨æ˜¯é•œåƒçš„å¯è¿è¡Œå®ä¾‹ã€‚)<br>
 You can create, run, stop, move, or delete a container using the docker API or CLI.(æ‚¨å¯ä»¥é€šè¿‡ docker API æˆ– CLI åˆ›å»ºã€è¿è¡Œã€åœæ­¢ã€ç§»åŠ¨æˆ–åˆ é™¤å®¹å™¨ã€‚)<br>
 You can connect a container to one or more networks, attach storage to it, or even create a new image based on its current state.(æ‚¨å¯ä»¥å°†å®¹å™¨è¿æ¥åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªç½‘ç»œï¼Œä¸ºå…¶é™„åŠ å­˜å‚¨ï¼Œç”šè‡³å¯ä»¥æ ¹æ®å…¶å½“å‰çŠ¶æ€åˆ›å»ºæ–°é•œåƒã€‚)</p>
<h1 id="4-dockerå®‰è£…åŠä½¿ç”¨"><a class="markdownIt-Anchor" href="#4-dockerå®‰è£…åŠä½¿ç”¨">#</a> 4 Docker å®‰è£…åŠä½¿ç”¨</h1>
<p>4.1 Docker å®‰è£…</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">[root@Docker ~]# sed -i &#x27;s@https://download.docker.com@https://mirrors.tuna.tsinghua.edu.cn/docker-ce@g&#x27; /etc/yum.repos.d/docker-ce.repo</span><br><span class="line">[root@Docker ~]# yum clean all</span><br><span class="line">21 æ–‡ä»¶å·²åˆ é™¤</span><br><span class="line">[root@Docker ~]# yum -y install docker-ce</span><br></pre></td></tr></table></figure>
<h1 id="42-dockeråŠ é€Ÿ"><a class="markdownIt-Anchor" href="#42-dockeråŠ é€Ÿ">#</a> 4.2 Docker åŠ é€Ÿ</h1>
<p>ä¸ºä»€ä¹ˆéœ€è¦åŠ é€Ÿå™¨ï¼Ÿå› ä¸º docker åœ¨æ‹‰å–é•œåƒæ—¶ï¼Œæ˜¯å»å›½å¤–æ‹‰å–çš„æ‰€ä»¥ä¼šæ¯”è¾ƒæ…¢ï¼Œä½¿ç”¨åŠ é€Ÿå™¨å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜</p>
<p>docker-ce çš„é…ç½®æ–‡ä»¶æ˜¯ /etc/docker/daemon.jsonï¼Œæ­¤æ–‡ä»¶é»˜è®¤ä¸å­˜åœ¨ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨åˆ›å»ºå¹¶è¿›è¡Œé…ç½®ï¼Œè€Œ docker çš„åŠ é€Ÿå°±æ˜¯é€šè¿‡é…ç½®æ­¤æ–‡ä»¶æ¥å®ç°çš„</p>
<h4 id="dockerçš„åŠ é€Ÿæœ‰å¤šç§æ–¹å¼"><a class="markdownIt-Anchor" href="#dockerçš„åŠ é€Ÿæœ‰å¤šç§æ–¹å¼">#</a> docker çš„åŠ é€Ÿæœ‰å¤šç§æ–¹å¼</h4>
<ul>
<li>docker cn</li>
<li>ä¸­å›½ç§‘æŠ€å¤§å­¦åŠ é€Ÿå™¨</li>
<li>é˜¿é‡Œäº‘åŠ é€Ÿå™¨ï¼ˆéœ€è¦é€šè¿‡é˜¿é‡Œäº‘å¼€å‘è€…å¹³å°æ³¨å†Œå¸å·ï¼Œå…è´¹ä½¿ç”¨ä¸ªäººç§æœ‰çš„åŠ é€Ÿå™¨ï¼‰</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# systemctl enable --now docker    //å¯åŠ¨dockeræœåŠ¡</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/docker.service â†’ /usr/lib/systemd/system/docker.service.</span><br><span class="line">[root@Docker ~]# cat &gt; /etc/docker/daemon.json &lt;&lt;EOF</span><br><span class="line">&#123;</span><br><span class="line">     &quot;registry-mirrors&quot;: [&quot;https://xj3hc284.mirror.aliyuncs.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">[root@Docker ~]# systemctl daemon-reload</span><br><span class="line">[root@Docker ~]# systemctl restart docker    //é‡å¯dockeræœåŠ¡</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="43-dockerå¸¸ç”¨æ“ä½œ"><a class="markdownIt-Anchor" href="#43-dockerå¸¸ç”¨æ“ä½œ">#</a> 4.3 Docker å¸¸ç”¨æ“ä½œ</h2>
<h3 id="431-docker-versionæŸ¥çœ‹ç‰ˆæœ¬å·"><a class="markdownIt-Anchor" href="#431-docker-versionæŸ¥çœ‹ç‰ˆæœ¬å·">#</a> 4.3.1 docker version (æŸ¥çœ‹ç‰ˆæœ¬å·)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker version</span><br><span class="line">Client: Docker Engine - Community    //dockerå®¢æˆ·ç«¯ç‰ˆæœ¬</span><br><span class="line"> Version:           20.10.11</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.16.9</span><br><span class="line"> Git commit:        dea9396</span><br><span class="line"> Built:             Thu Nov 18 00:36:58 2021</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community    //dockeræœåŠ¡ç«¯ç‰ˆæœ¬</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.11</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.16.9</span><br><span class="line">  Git commit:       847da18</span><br><span class="line">  Built:            Thu Nov 18 00:35:20 2021</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:    //å®¹å™¨ç‰ˆæœ¬</span><br><span class="line">  Version:          1.4.12</span><br><span class="line">  GitCommit:        7b11cfaabd73bb80907dd23182b9347b4245eb5d</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.2</span><br><span class="line">  GitCommit:        v1.0.2-0-g52b36a2</span><br><span class="line"> docker-init:    //dockeråˆå§‹åŒ–ç‰ˆæœ¬</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br></pre></td></tr></table></figure>
<h3 id="432-docker-infoæ˜¾ç¤ºæ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯"><a class="markdownIt-Anchor" href="#432-docker-infoæ˜¾ç¤ºæ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯">#</a> 4.3.2 docker info (æ˜¾ç¤ºæ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker info</span><br><span class="line">Client:        #dockerå®¢æˆ·ç«¯ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"> Context:    default        #ä¸Šä¸‹æ–‡</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Plugins:        #æ’ä»¶</span><br><span class="line">  app: Docker App (Docker Inc., v0.9.1-beta3)</span><br><span class="line">  buildx: Build with BuildKit (Docker Inc., v0.6.3-docker)</span><br><span class="line">  scan: Docker Scan (Docker Inc., v0.9.0)</span><br><span class="line"></span><br><span class="line">Server:        #dockeræœåŠ¡ç«¯ç‰ˆæœ¬ä¿¡æ¯</span><br><span class="line"> Containers: 0        #å®¹å™¨ä¸ªæ•°</span><br><span class="line">  Running: 0        #è¿è¡Œä¸ªæ•°</span><br><span class="line">  Paused: 0        #æš‚åœçŠ¶æ€ä¸ªæ•°</span><br><span class="line">  Stopped: 0        #åœæ­¢çŠ¶æ€ä¸ªæ•°</span><br><span class="line"> Images: 0        #é•œåƒä¸ªæ•°</span><br><span class="line"> Server Version: 20.10.11        #æœåŠ¡ç‰ˆæœ¬å·</span><br><span class="line"> Storage Driver: overlay2        #å­˜å‚¨é©±åŠ¨</span><br><span class="line">  Backing Filesystem: xfs        #åç«¯æ–‡ä»¶ç³»ç»Ÿ</span><br><span class="line">  Supports d_type: true</span><br><span class="line">  Native Overlay Diff: true</span><br><span class="line">  userxattr: false</span><br><span class="line"> Logging Driver: json-file        # æ—¥å¿—é©±åŠ¨</span><br><span class="line"> Cgroup Driver: cgroupfs</span><br><span class="line"> Cgroup Version: 1</span><br><span class="line"> Plugins:        # æ’ä»¶</span><br><span class="line">  Volume: local</span><br><span class="line">  Network: bridge host ipvlan macvlan null overlay</span><br><span class="line">  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog</span><br><span class="line"> Swarm: inactive</span><br><span class="line"> Runtimes: io.containerd.runc.v2 io.containerd.runtime.v1.linux runc</span><br><span class="line"> Default Runtime: runc</span><br><span class="line"> Init Binary: docker-init</span><br><span class="line"> containerd version: 7b11cfaabd73bb80907dd23182b9347b4245eb5d</span><br><span class="line"> runc version: v1.0.2-0-g52b36a2</span><br><span class="line"> init version: de40ad0</span><br><span class="line"> Security Options:        # å®‰å…¨é€‰é¡¹</span><br><span class="line">  seccomp</span><br><span class="line">   Profile: default</span><br><span class="line"> Kernel Version: 4.18.0-257.el8.x86_64        # å†…æ ¸ç‰ˆæœ¬å·</span><br><span class="line"> Operating System: CentOS Stream 8        # æ“ä½œç³»ç»Ÿ</span><br><span class="line"> OSType: linux        #æ“ä½œç³»ç»Ÿ ç±»å‹</span><br><span class="line"> Architecture: x86_64        #æ¶æ„</span><br><span class="line"> CPUs: 4        # CPUæ ¸å¿ƒæ•°</span><br><span class="line"> Total Memory: 7.559GiB        #æ€»å†…å­˜ </span><br><span class="line"> Name: Docker</span><br><span class="line"> ID: 4MEZ:OEWB:CPHP:3PYE:54J3:46XO:B5CX:JHYB:OW5Q:TWJP:PWHO:JJSM           </span><br><span class="line"> Docker Root Dir: /var/lib/docker        #dockeré»˜è®¤ç›®å½•</span><br><span class="line"> Debug Mode: false</span><br><span class="line"> Registry: https://index.docker.io/v1/        # ä»“åº“åœ°å€</span><br><span class="line"> Labels:        #æ ‡ç­¾</span><br><span class="line"> Experimental: false</span><br><span class="line"> Insecure Registries:</span><br><span class="line">  127.0.0.0/8</span><br><span class="line"> Registry Mirrors:        #åŠ é€Ÿå™¨</span><br><span class="line">  https://xj3hc284.mirror.aliyuncs.com/</span><br><span class="line"> Live Restore Enabled: false</span><br></pre></td></tr></table></figure>
<h3 id="433-docker-searchåœ¨docker-hubä¸­æœç´¢é•œåƒ"><a class="markdownIt-Anchor" href="#433-docker-searchåœ¨docker-hubä¸­æœç´¢é•œåƒ">#</a> 4.3.3 docker search (åœ¨ docker hub ä¸­æœç´¢é•œåƒ)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker search nginx</span><br><span class="line">NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">nginx                             Official build of Nginx.                        15893     [OK]       </span><br><span class="line">jwilder/nginx-proxy               Automated Nginx reverse proxy for docker conâ€¦   2098                 [OK]</span><br><span class="line">richarvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable ofâ€¦   819                  [OK]</span><br><span class="line">jc21/nginx-proxy-manager          Docker container for managing Nginx proxy hoâ€¦   285                  </span><br><span class="line">linuxserver/nginx                 An Nginx container, brought to you by LinuxSâ€¦   160                  </span><br><span class="line">tiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmpâ€¦   146                  [OK]</span><br><span class="line">jlesage/nginx-proxy-manager       Docker container for Nginx Proxy Manager        144                  [OK]</span><br><span class="line">alfg/nginx-rtmp                   NGINX, nginx-rtmp-module and FFmpeg from souâ€¦   110                  [OK]</span><br><span class="line">nginxdemos/hello                  NGINX webserver that serves a simple page coâ€¦   79                   [OK]</span><br><span class="line">privatebin/nginx-fpm-alpine       PrivateBin running on an Nginx, php-fpm &amp; Alâ€¦   60                   [OK]</span><br><span class="line">nginx/nginx-ingress               NGINX and  NGINX Plus Ingress Controllers foâ€¦   57                   </span><br><span class="line">nginxinc/nginx-unprivileged       Unprivileged NGINX Dockerfiles                  54                   </span><br><span class="line">nginxproxy/nginx-proxy            Automated Nginx reverse proxy for docker conâ€¦   28                   </span><br><span class="line">staticfloat/nginx-certbot         Opinionated setup for automatic TLS certs loâ€¦   25                   [OK]</span><br><span class="line">nginx/nginx-prometheus-exporter   NGINX Prometheus Exporter for NGINX and NGINâ€¦   22                   </span><br><span class="line">schmunk42/nginx-redirect          A very simple container to redirect HTTP traâ€¦   19                   [OK]</span><br><span class="line">centos/nginx-112-centos7          Platform for running nginx 1.12 or building â€¦   16                   </span><br><span class="line">centos/nginx-18-centos7           Platform for running nginx 1.8 or building nâ€¦   13                   </span><br><span class="line">flashspys/nginx-static            Super Lightweight Nginx Image                   11                   [OK]</span><br><span class="line">bitwarden/nginx                   The Bitwarden nginx web server acting as a râ€¦   11                   </span><br><span class="line">mailu/nginx                       Mailu nginx frontend                            9                    [OK]</span><br><span class="line">sophos/nginx-vts-exporter         Simple server that scrapes Nginx vts stats aâ€¦   7                    [OK]</span><br><span class="line">ansibleplaybookbundle/nginx-apb   An APB to deploy NGINX                          3                    [OK]</span><br><span class="line">arnau/nginx-gate                  Docker image with Nginx with Lua enabled on â€¦   1                    [OK]</span><br><span class="line">wodby/nginx                       Generic nginx                                   1                    [OK]</span><br></pre></td></tr></table></figure>
<h3 id="434-docker-pullæ‹‰å–é•œåƒ"><a class="markdownIt-Anchor" href="#434-docker-pullæ‹‰å–é•œåƒ">#</a> 4.3.4 docker pull (æ‹‰å–é•œåƒ)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker pull nginx</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/nginx</span><br><span class="line">eff15d958d66: Pull complete </span><br><span class="line">1e5351450a59: Pull complete </span><br><span class="line">2df63e6ce2be: Pull complete </span><br><span class="line">9171c7ae368c: Pull complete </span><br><span class="line">020f975acd28: Pull complete </span><br><span class="line">266f639b35ad: Pull complete </span><br><span class="line">Digest: sha256:097c3a0913d7e3a5b01b6c685a60c03632fc7a2b50bc8e35bcaa3691d788226e</span><br><span class="line">Status: Downloaded newer image for nginx:latest</span><br><span class="line">docker.io/library/nginx:latest</span><br></pre></td></tr></table></figure>
<h3 id="435-docker-imagesåˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ"><a class="markdownIt-Anchor" href="#435-docker-imagesåˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ">#</a> 4.3.5 docker images (åˆ—å‡ºç³»ç»Ÿå½“å‰é•œåƒ)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    ea335eea17ab   13 days ago   141MB</span><br></pre></td></tr></table></figure>
<h3 id="436-docker-image-historyæŸ¥çœ‹æŒ‡å®šé•œåƒçš„å†å²"><a class="markdownIt-Anchor" href="#436-docker-image-historyæŸ¥çœ‹æŒ‡å®šé•œåƒçš„å†å²">#</a> 4.3.6 docker image history (æŸ¥çœ‹æŒ‡å®šé•œåƒçš„å†å²)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker image history nginx</span><br><span class="line">IMAGE          CREATED       CREATED BY                                      SIZE      COMMENT</span><br><span class="line">ea335eea17ab   13 days ago   /bin/sh -c #(nop)  CMD [&quot;nginx&quot; &quot;-g&quot; &quot;daemonâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  STOPSIGNAL SIGQUIT           0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  EXPOSE 80                    0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  ENTRYPOINT [&quot;/docker-entrâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop) COPY file:09a214a3e07c919aâ€¦   4.61kB    </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop) COPY file:0fd5fca330dcd6a7â€¦   1.04kB    </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop) COPY file:0b866ff3fc1ef5b0â€¦   1.96kB    </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop) COPY file:65504f71f5855ca0â€¦   1.2kB     </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c set -x     &amp;&amp; addgroup --system -â€¦   61.1MB    </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  ENV PKG_RELEASE=1~bullseye   0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  ENV NJS_VERSION=0.7.0        0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  ENV NGINX_VERSION=1.21.4     0B        </span><br><span class="line">&lt;missing&gt;      13 days ago   /bin/sh -c #(nop)  LABEL maintainer=NGINX Doâ€¦   0B        </span><br><span class="line">&lt;missing&gt;      2 weeks ago   /bin/sh -c #(nop)  CMD [&quot;bash&quot;]                 0B        </span><br><span class="line">&lt;missing&gt;      2 weeks ago   /bin/sh -c #(nop) ADD file:a2405ebb9892d98beâ€¦   80.4MB    </span><br></pre></td></tr></table></figure>
<h3 id="437-docker-image-inspectæŸ¥çœ‹æŒ‡å®šé•œåƒçš„è¯¦ç»†ä¿¡æ¯"><a class="markdownIt-Anchor" href="#437-docker-image-inspectæŸ¥çœ‹æŒ‡å®šé•œåƒçš„è¯¦ç»†ä¿¡æ¯">#</a> 4.3.7 docker image inspect (æŸ¥çœ‹æŒ‡å®šé•œåƒçš„è¯¦ç»†ä¿¡æ¯)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker image inspect nginx</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;sha256:ea335eea17ab984571cd4a3bcf90a0413773b559c75ef4cda07d0ce952b00291&quot;,</span><br><span class="line">        &quot;RepoTags&quot;: [</span><br><span class="line">            &quot;nginx:latest&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;RepoDigests&quot;: [</span><br><span class="line">            &quot;nginx@sha256:097c3a0913d7e3a5b01b6c685a60c03632fc7a2b50bc8e35bcaa3691d788226e&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;Parent&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Comment&quot;: &quot;&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-11-17T10:38:14.652464384Z&quot;,</span><br><span class="line">        &quot;Container&quot;: &quot;8a038ff17987cf87d4b7d7e2c80cb83bd2474d66e2dd0719e2b4f7de2ad6d853&quot;,</span><br><span class="line">        &quot;ContainerConfig&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;8a038ff17987&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;ExposedPorts&quot;: &#123;</span><br><span class="line">                &quot;80/tcp&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br></pre></td></tr></table></figure>
<h3 id="438-åˆ é™¤é•œåƒ"><a class="markdownIt-Anchor" href="#438-åˆ é™¤é•œåƒ">#</a> 4.3.8 åˆ é™¤é•œåƒ</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                     PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   57 minutes ago   Exited (0) 6 minutes ago             youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">httpd        latest    ad17c88403e2   12 days ago   143MB</span><br><span class="line">nginx        latest    ea335eea17ab   13 days ago   141MB</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker rmi ad17c88403e2</span><br><span class="line">Untagged: httpd:latest</span><br><span class="line">Untagged: httpd@sha256:1d71eef54c08435c0be99877c408637f03112dc9f929fba3cccdd15896099b02</span><br><span class="line">Deleted: sha256:ad17c88403e2cedd27963b98be7f04bd3f903dfa7490586de397d0404424936d</span><br><span class="line">Deleted: sha256:a59e7dfeeb485a8a45b1fcce812b10fbd955d304fa2e9ca43b10b16a8ee1afb8</span><br><span class="line">Deleted: sha256:9592080464aa1890ed187c42a13ecc9f175e975a96a3fad28df0559ad0c08b9d</span><br><span class="line">Deleted: sha256:42d2debfa0c419f7f89affa3e9b62d1b7e54dc6654dbd186d4654ee3661c44c8</span><br><span class="line">Deleted: sha256:136822c50a75392f4ce06461fa4894aa7d1e060ec0dd4782e13e2d9829df50a3</span><br><span class="line">[root@Docker ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED       SIZE</span><br><span class="line">nginx        latest    ea335eea17ab   13 days ago   141MB</span><br></pre></td></tr></table></figure>
<h3 id="439-docker-createåˆ›å»ºå®¹å™¨"><a class="markdownIt-Anchor" href="#439-docker-createåˆ›å»ºå®¹å™¨">#</a> 4.3.9 docker create (åˆ›å»ºå®¹å™¨)</h3>
<p>æ­¤å‘½ä»¤åªä¼šåˆ›å»ºå®¹å™¨ï¼Œè€Œä¸ä¼šè¿è¡Œå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker create nginx</span><br><span class="line">8442117bc0c7b85609a77229433413a85ac0fa951fe9c0efc3c340b1299fbd74</span><br></pre></td></tr></table></figure>
<h3 id="4310-docker-psåˆ—å‡ºå®¹å™¨"><a class="markdownIt-Anchor" href="#4310-docker-psåˆ—å‡ºå®¹å™¨">#</a> 4.3.10 docker ps (åˆ—å‡ºå®¹å™¨)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps         //æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps -a        //æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS    PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   3 minutes ago   Created             youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4311-docker-startå¯åŠ¨å®¹å™¨"><a class="markdownIt-Anchor" href="#4311-docker-startå¯åŠ¨å®¹å™¨">#</a> 4.3.11 docker start (å¯åŠ¨å®¹å™¨)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker start 8442117bc0c7        #å¯åŠ¨å®¹å™¨ï¼Œåé¢æ¥å®¹å™¨çš„IDå·ï¼ŒIDå·å¯ä»¥ç®€å†™</span><br><span class="line">8442117bc0c7</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS          PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   8 minutes ago   Up 14 seconds   80/tcp    youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4312-docker-attachè¿›å…¥å®¹å™¨"><a class="markdownIt-Anchor" href="#4312-docker-attachè¿›å…¥å®¹å™¨">#</a> 4.3.12 docker attach (è¿›å…¥å®¹å™¨)</h3>
<p>åœ¨å½“å‰ shell ä¸‹ attach è¿æ¥æŒ‡å®šè¿è¡Œé•œåƒï¼Œä»¥è¿™ç§æ–¹å¼è¿›å…¥å®¹å™¨ï¼Œæ­¤æ—¶å®¹å™¨ä¼šä¸€ç›´å ç”¨å‰å°ï¼Œå¦‚æœé€€å‡ºå®¹å™¨ï¼Œå®¹å™¨å°±ä¼šåœæ­¢</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   50 minutes ago   Up 30 seconds   80/tcp    youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker attach 8442117bc0c7</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br></pre></td></tr></table></figure>
<h3 id="4313-docker-execè¿›å…¥å®¹å™¨"><a class="markdownIt-Anchor" href="#4313-docker-execè¿›å…¥å®¹å™¨">#</a> 4.3.13 docker exec (è¿›å…¥å®¹å™¨)</h3>
<p>ç”¨è¿™ä¸ªå‘½ä»¤è¿›å…¥å®¹å™¨åå°è¿è¡Œå°±ç®—æ˜¯é€€å‡ºäº†å®¹å™¨ï¼Œå®¹å™¨ä¹Ÿä¸ä¼šåœæ­¢è¿è¡Œ</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   26 minutes ago   Up 3 seconds   80/tcp    youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker exec -it 8442117bc0c7 /bin/bash</span><br><span class="line">root@8442117bc0c7:/# ls</span><br><span class="line">bin  boot  dev	docker-entrypoint.d  docker-entrypoint.sh  etc	home  lib  lib64  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">root@8442117bc0c7:/# exit</span><br><span class="line">exit</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   27 minutes ago   Up 23 seconds   80/tcp    youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4314-docker-inspectæŸ¥çœ‹å®¹å™¨çš„ä¿¡æ¯è¯¦ç»†"><a class="markdownIt-Anchor" href="#4314-docker-inspectæŸ¥çœ‹å®¹å™¨çš„ä¿¡æ¯è¯¦ç»†">#</a> 4.3.14 docker inspect (æŸ¥çœ‹å®¹å™¨çš„ä¿¡æ¯è¯¦ç»†)</h3>
<p>é€šè¿‡æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯å¯ä»¥æŸ¥çœ‹å…¶å®¹å™¨çš„ IP åœ°å€</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker inspect 8442117bc0c7</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;8442117bc0c7b85609a77229433413a85ac0fa951fe9c0efc3c340b1299fbd74&quot;,</span><br><span class="line">        &quot;Created&quot;: &quot;2021-12-01T07:28:48.929261547Z&quot;,</span><br><span class="line">        &quot;Path&quot;: &quot;/docker-entrypoint.sh&quot;,</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;nginx&quot;,</span><br><span class="line">            &quot;-g&quot;,</span><br><span class="line">            &quot;daemon off;&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 5390,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2021-12-01T07:36:41.636489391Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">......</span><br></pre></td></tr></table></figure>
<h3 id="4315-docker-logsæŸ¥çœ‹å®¹å™¨æ—¥å¿—"><a class="markdownIt-Anchor" href="#4315-docker-logsæŸ¥çœ‹å®¹å™¨æ—¥å¿—">#</a> 4.3.15 docker logs (æŸ¥çœ‹å®¹å™¨æ—¥å¿—)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker logs 8442117bc0c7</span><br><span class="line">/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration</span><br><span class="line">/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf</span><br><span class="line">10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh</span><br><span class="line">/docker-entrypoint.sh: Launching /docker-entrypoint.d/30-tune-worker-processes.sh</span><br><span class="line">/docker-entrypoint.sh: Configuration complete; ready for start up</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: using the &quot;epoll&quot; event method</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: nginx/1.21.4</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) </span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: OS: Linux 4.18.0-257.el8.x86_64</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1048576:1048576</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: start worker processes</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: start worker process 31</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: start worker process 32</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: start worker process 33</span><br><span class="line">2021/12/01 07:36:41 [notice] 1#1: start worker process 34</span><br><span class="line">172.17.0.1 - - [01/Dec/2021:07:43:23 +0000] &quot;GET / HTTP/1.1&quot; 200 615 &quot;-&quot; &quot;curl/7.61.1&quot; &quot;-&quot;</span><br><span class="line">172.17.0.1 - - [01/Dec/2021:07:43:44 +0000] &quot;GET / HTTP/1.1&quot; 200 615 &quot;-&quot; &quot;curl/7.61.1&quot; &quot;-&quot;</span><br><span class="line">172.17.0.1 - - [01/Dec/2021:07:43:45 +0000] &quot;GET / HTTP/1.1&quot; 200 615 &quot;-&quot; &quot;curl/7.61.1&quot; &quot;-&quot;</span><br><span class="line">172.17.0.1 - - [01/Dec/2021:07:43:46 +0000] &quot;GET / HTTP/1.1&quot; 200 615 &quot;-&quot; &quot;curl/7.61.1&quot; &quot;-&quot;</span><br><span class="line">172.17.0.1 - - [01/Dec/2021:07:43:46 +0000] &quot;GET / HTTP/1.1&quot; 200 615 &quot;-&quot; &quot;curl/7.61.1&quot; &quot;-&quot;</span><br></pre></td></tr></table></figure>
<h3 id="4316-docker-stopåœæ­¢å®¹å™¨"><a class="markdownIt-Anchor" href="#4316-docker-stopåœæ­¢å®¹å™¨">#</a> 4.3.16 docker stop (åœæ­¢å®¹å™¨)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   16 minutes ago   Up 8 minutes   80/tcp    youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker stop 8442117bc0c7</span><br><span class="line">8442117bc0c7</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps -a </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                     PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   16 minutes ago   Exited (0) 5 seconds ago             youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4317-docker-restarté‡å¯å®¹å™¨"><a class="markdownIt-Anchor" href="#4317-docker-restarté‡å¯å®¹å™¨">#</a> 4.3.17 docker restart (é‡å¯å®¹å™¨)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps -a </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   17 minutes ago   Exited (0) 46 seconds ago             youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker restart 8442117bc0c7</span><br><span class="line">8442117bc0c7</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   17 minutes ago   Up 3 seconds   80/tcp    youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4318-docker-killæ€æ­»æ­£åœ¨è¿è¡Œçš„å®¹å™¨"><a class="markdownIt-Anchor" href="#4318-docker-killæ€æ­»æ­£åœ¨è¿è¡Œçš„å®¹å™¨">#</a> 4.3.18 docker kill (æ€æ­»æ­£åœ¨è¿è¡Œçš„å®¹å™¨)</h3>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS         PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   20 minutes ago   Up 2 minutes   80/tcp    youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker kill 8442117bc0c7 </span><br><span class="line">8442117bc0c7</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                       PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   20 minutes ago   Exited (137) 4 seconds ago             youthful_euclid</span><br></pre></td></tr></table></figure>
<h3 id="4319-docker-runåˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨"><a class="markdownIt-Anchor" href="#4319-docker-runåˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨">#</a> 4.3.19 docker run (åˆ›å»ºå¹¶å¯åŠ¨å®¹å™¨)</h3>
<p>æ­¤å‘½ä»¤ä¼šåšä¸‰ä»¶äº‹æƒ…ï¼Œé¦–å…ˆå…ˆæŸ¥çœ‹æœ¬åœ°æ˜¯å¦éƒ½å¯¹åº”çš„é•œåƒï¼Œå¦‚æœæ²¡æœ‰å°±æ‹‰å–ï¼Œç„¶ååˆ›å»ºå®¹å™¨ï¼Œç„¶åè¿è¡Œå®¹å™¨</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                     PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   35 minutes ago   Exited (0) 5 minutes ago             youthful_euclid</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker run -it httpd /bin/bash        #æ­¤å‘½ä»¤çš„ä½œç”¨æ˜¯ï¼Œæ‹‰å–ä¸€ä¸ªhttpdçš„é•œåƒï¼Œç„¶ååˆ›å»ºå®¹å™¨å¹¶è¿è¡Œï¼Œ-itè¡¨ç¤ºä»¥äº¤äº’çš„æ–¹å¼è¿›å…¥ç»ˆç«¯ï¼Œ/bin/bashè¡¨ç¤ºç»ˆç«¯çš„ç¯å¢ƒ</span><br><span class="line">Unable to find image &#x27;httpd:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/httpd</span><br><span class="line">eff15d958d66: Already exists </span><br><span class="line">ba1caf8ba86c: Pull complete </span><br><span class="line">ab86dc02235d: Pull complete </span><br><span class="line">0d58b11d2867: Pull complete </span><br><span class="line">e88da7cb925c: Pull complete </span><br><span class="line">Digest: sha256:1d71eef54c08435c0be99877c408637f03112dc9f929fba3cccdd15896099b02</span><br><span class="line">Status: Downloaded newer image for httpd:latest</span><br><span class="line">root@a01b8d80a160:/usr/local/apache2# ls</span><br><span class="line">bin  build  cgi-bin  conf  error  htdocs  icons  include  logs	modules</span><br></pre></td></tr></table></figure>
<h3 id="4320-docker-rmåˆ é™¤å®¹å™¨"><a class="markdownIt-Anchor" href="#4320-docker-rmåˆ é™¤å®¹å™¨">#</a> 4.3.20 docker rm (åˆ é™¤å®¹å™¨)</h3>
<p>åˆ é™¤ä¸€ä¸ªæˆ–è€…å¤šä¸ªå®¹å™¨ï¼Œåªèƒ½åˆ é™¤åœæ­¢çŠ¶æ€çš„å®¹å™¨æˆ–è€… - f å¼ºåˆ¶åˆ é™¤</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS         PORTS     NAMES</span><br><span class="line">a01b8d80a160   httpd     &quot;/bin/bash&quot;   10 minutes ago   Up 3 seconds   80/tcp    hardcore_varahamihira</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker rm a01b8d80a160</span><br><span class="line">Error response from daemon: You cannot remove a running container a01b8d80a1609e81d8d8121b3fc3c0f53a676340b3b093b353a7f9bb498fe0e6. Stop the container before attempting removal or force remove</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker rm -f a01b8d80a160</span><br><span class="line">a01b8d80a160</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps </span><br><span class="line">CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES</span><br><span class="line"></span><br><span class="line">[root@Docker ~]# docker ps -a</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">8442117bc0c7   nginx     &quot;/docker-entrypoint.â€¦&quot;   48 minutes ago   Exited (0) 18 minutes ago             youthful_euclid</span><br></pre></td></tr></table></figure>
<h1 id="5-docker-event-state"><a class="markdownIt-Anchor" href="#5-docker-event-state">#</a> 5 Docker event state</h1>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/20210104183609729.jpg" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>æœ¬æ–‡æ¥è‡ª CSDN</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46727129/article/details/121665668">https://blog.csdn.net/weixin_46727129/article/details/121665668</a></p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2022-11-22T02:19:35.591Z" title="2022-11-22 10:19:35">2022-11-22</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-20T01:23:36.263Z" title="2023-4-20 9:23:36">2023-04-20</time>æ›´æ–°</span><span class="level-item">6 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦932ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2022/11/22/%E3%80%90Jenkins%E3%80%91Linux%E7%8E%AF%E5%A2%83%E4%B8%8B%E5%AE%89%E8%A3%85jenkins/">Linuxç¯å¢ƒä¸‹å®‰è£…jenkins</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="æ‰«ç _æœç´¢è”åˆä¼ æ’­æ ·å¼-æ ‡å‡†è‰²ç‰ˆ"></p>
<h1 id="linuxç¯å¢ƒä¸‹å®‰è£…jenkins"><a class="markdownIt-Anchor" href="#linuxç¯å¢ƒä¸‹å®‰è£…jenkins">#</a> Linux ç¯å¢ƒä¸‹å®‰è£… jenkins</h1>
<h3 id="1-æ·»åŠ å­˜å‚¨åº“"><a class="markdownIt-Anchor" href="#1-æ·»åŠ å­˜å‚¨åº“">#</a> 1ã€æ·»åŠ å­˜å‚¨åº“</h3>
<p>yum çš„ repo ä¸­é»˜è®¤æ²¡æœ‰ Jenkinsï¼Œéœ€è¦å…ˆå°† Jenkins å­˜å‚¨åº“æ·»åŠ åˆ° yum reposï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo</span><br></pre></td></tr></table></figure>
<p>å®Œæˆç•Œé¢ï¼š</p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/20201231171035460.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<p>ç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key</span><br></pre></td></tr></table></figure>
<h3 id="2-å®‰è£…jenkins"><a class="markdownIt-Anchor" href="#2-å®‰è£…jenkins">#</a> 2ã€å®‰è£… jenkins</h3>
<p>æ‰§è¡Œå®‰è£…å‘½ä»¤ï¼š yum install jenkins<br>
 å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå‡ºç°è¯¢é—®æ˜¯å¦ä¸‹è½½æ—¶ï¼Œè¾“å…¥ yï¼Œç„¶åç‚¹å‡»å›è½¦ï¼Œç­‰å¾…å®‰è£…å®Œæˆï¼š<br>
<img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/20201231171215646.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="3-ä¿®æ”¹é…ç½®"><a class="markdownIt-Anchor" href="#3-ä¿®æ”¹é…ç½®">#</a> <strong>3ã€ä¿®æ”¹é…ç½®</strong></h3>
<p><a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=jenkins&amp;spm=1001.2101.3001.7020">jenkins</a> å®‰è£…æˆåŠŸåï¼Œé»˜è®¤çš„ç”¨æˆ·æ˜¯ jenkinsï¼Œç«¯å£æ˜¯ 8080ï¼Œä¸ºäº†é˜²æ­¢å†²çªï¼Œå¹¶ä¸”ç»™ç”¨æˆ·èµ‹æƒé™ï¼Œæˆ‘ä»¬ä¿®æ”¹ç”¨æˆ·åå’Œç«¯å£ã€‚<br>
è¾“å…¥å‘½ä»¤ï¼Œè¿›å…¥ jenkins é…ç½®æ–‡ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/jenkins</span><br></pre></td></tr></table></figure>
<p>æ‰¾åˆ°å¦‚ä¸‹é…ç½®ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">JENKINS_USER=&quot;jenkins&quot;</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Type:        string</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># Default: &quot;false&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="comment"># ServiceRestart: jenkins</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"></span></span><br><span class="line"><span class="language-bash"><span class="comment"># Whether to skip potentially long-running chown at the</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="variable">$JENKINS_HOME</span> location. Do not <span class="built_in">enable</span> this, <span class="string">&quot;true&quot;</span>, unless</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">you know what you<span class="string">&#x27;re doing. See JENKINS-23273.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash">#JENKINS_INSTALL_SKIP_CHOWN=&quot;false&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Type: string</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Default:     &quot;-Djava.awt.headless=true&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># ServiceRestart: jenkins</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"># Options to pass to java when running Jenkins.</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash">JENKINS_JAVA_OPTIONS=&quot;-Djava.awt.headless=true&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Type:        integer(0:65535)</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Default:     8080</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># ServiceRestart: jenkins</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"># Port Jenkins is listening on.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Set to -1 to disable</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash">JENKINS_PORT=&quot;8080&quot;</span></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Type:        string</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># Default:     &quot;&quot;</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"># ServiceRestart: jenkins</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"># IP address Jenkins listens on for HTTP requests.</span></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash"><span class="string">Default is all interfaces (0.0.0.0).</span></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="string"></span></span></span><br><span class="line"><span class="string"><span class="language-bash"></span></span></span><br></pre></td></tr></table></figure>
<h4 id="ä¿®æ”¹ç”¨æˆ·åç«¯å£"><a class="markdownIt-Anchor" href="#ä¿®æ”¹ç”¨æˆ·åç«¯å£">#</a> ä¿®æ”¹ç”¨æˆ·åï¼Œç«¯å£ï¼š</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/20201231171521366.png" alt="åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°"></p>
<h3 id="è‹¥ä¸ºäº‘æœåŠ¡å™¨éœ€é…ç½®å®‰å…¨ç»„å¹¶å¼€æ”¾ç«¯å£æ‰å¯ä»¥æ­£å¸¸è®¿é—®"><a class="markdownIt-Anchor" href="#è‹¥ä¸ºäº‘æœåŠ¡å™¨éœ€é…ç½®å®‰å…¨ç»„å¹¶å¼€æ”¾ç«¯å£æ‰å¯ä»¥æ­£å¸¸è®¿é—®">#</a> è‹¥ä¸ºäº‘æœåŠ¡å™¨ï¼Œéœ€é…ç½®å®‰å…¨ç»„å¹¶å¼€æ”¾ç«¯å£æ‰å¯ä»¥æ­£å¸¸è®¿é—®</h3>
<h1 id="å¯åŠ¨jenkins"><a class="markdownIt-Anchor" href="#å¯åŠ¨jenkins">#</a> å¯åŠ¨ jenkins</h1>
<h4 id="1å¦‚æœæ˜¯2022å¹´7æœˆä»¥åå®‰è£…çš„jekinséœ€è¦ä¸‹è½½jdk11æˆ–è€…jdk17ç‰ˆæœ¬çš„jdkç¯å¢ƒ"><a class="markdownIt-Anchor" href="#1å¦‚æœæ˜¯2022å¹´7æœˆä»¥åå®‰è£…çš„jekinséœ€è¦ä¸‹è½½jdk11æˆ–è€…jdk17ç‰ˆæœ¬çš„jdkç¯å¢ƒ">#</a> 1. å¦‚æœæ˜¯ 2022 å¹´ 7 æœˆä»¥åå®‰è£…çš„ jekinsï¼Œéœ€è¦ä¸‹è½½ jdk11 æˆ–è€… jdk17 ç‰ˆæœ¬çš„ jdk ç¯å¢ƒ</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install fontconfig java-11-openjdk</span><br></pre></td></tr></table></figure>
<h3 id="è®¾ç½®è‡ªå¯åå¯åŠ¨jenkinsæœåŠ¡systemctl-enable-now-jenkins"><a class="markdownIt-Anchor" href="#è®¾ç½®è‡ªå¯åå¯åŠ¨jenkinsæœåŠ¡systemctl-enable-now-jenkins">#</a> è®¾ç½®è‡ªå¯åå¯åŠ¨ jenkins æœåŠ¡ï¼šsystemctl enable --now jenkins</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/01013406_6337288ebae0938355.png" alt="jenkinsåœ¨linuxä¸‹å®‰è£…ï¼ˆrpmåŒ…ï¼‰_javascript_07"></p>
<h3 id="æŸ¥çœ‹æ˜¯å¦è‡ªå¯åŠ¨systemctl-is-enabled-jenkins"><a class="markdownIt-Anchor" href="#æŸ¥çœ‹æ˜¯å¦è‡ªå¯åŠ¨systemctl-is-enabled-jenkins">#</a> æŸ¥çœ‹æ˜¯å¦è‡ªå¯åŠ¨ï¼šsystemctl is-enabled jenkins</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/01013406_6337288ecdddd6790.png" alt="jenkinsåœ¨linuxä¸‹å®‰è£…ï¼ˆrpmåŒ…ï¼‰_java_08"></p>
<h3 id="æŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl-status-jenkinsservice"><a class="markdownIt-Anchor" href="#æŸ¥çœ‹æœåŠ¡çŠ¶æ€systemctl-status-jenkinsservice">#</a> æŸ¥çœ‹æœåŠ¡çŠ¶æ€ï¼šsystemctl status jenkins.service</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/01013406_6337288ee068451100.png" alt="jenkinsåœ¨linuxä¸‹å®‰è£…ï¼ˆrpmåŒ…ï¼‰_java_09"></p>
<h3 id="jenkins-failed-to-find-a-valid-java-installation"><a class="markdownIt-Anchor" href="#jenkins-failed-to-find-a-valid-java-installation">#</a> jenkins: failed to find a valid Java installation</h3>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/01013406_6337288eeec5c74170.png" alt="jenkinsåœ¨linuxä¸‹å®‰è£…ï¼ˆrpmåŒ…ï¼‰_javascript_10"></p>
<h3 id="ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¯åŠ¨jenkins"><a class="markdownIt-Anchor" href="#ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¯åŠ¨jenkins">#</a> ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¯åŠ¨ jenkins</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/init.d</span><br><span class="line"></span><br><span class="line"># å¯åŠ¨</span><br><span class="line">./jenkins start</span><br><span class="line"># åœæ­¢</span><br><span class="line">./jenkins stop</span><br><span class="line"># çŠ¶æ€</span><br><span class="line">./jenkins status</span><br></pre></td></tr></table></figure>
<h3 id="æç¤ºjdkç‰ˆæœ¬ä¸æ»¡è¶³-å¯èƒ½æ˜¯jdk11æ²¡æœ‰é…ç½®åˆ°jekninsä¸Š"><a class="markdownIt-Anchor" href="#æç¤ºjdkç‰ˆæœ¬ä¸æ»¡è¶³-å¯èƒ½æ˜¯jdk11æ²¡æœ‰é…ç½®åˆ°jekninsä¸Š">#</a> æç¤º jdk ç‰ˆæœ¬ä¸æ»¡è¶³ï¼Œå¯èƒ½æ˜¯ jdk11 æ²¡æœ‰é…ç½®åˆ° jeknins ä¸Š</h3>
<h4 id="jenkins-requires-java-versions-17-11-but-you-are-running-with-java-18-from-usrlocaljdk180_211jre"><a class="markdownIt-Anchor" href="#jenkins-requires-java-versions-17-11-but-you-are-running-with-java-18-from-usrlocaljdk180_211jre">#</a> Jenkins requires Java versions [17, 11] but you are running with Java 1.8 from /usr/local/jdk1.8.0_211/jre</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/01013407_6337288f30b9997576.png" alt="jenkinsåœ¨linuxä¸‹å®‰è£…ï¼ˆrpmåŒ…ï¼‰_json_13"></p>
<h4 id="å°†jdk11çš„ç¯å¢ƒé…ç½®åˆ°-etcrcdinitdjenkins-çš„candidatesä¸­"><a class="markdownIt-Anchor" href="#å°†jdk11çš„ç¯å¢ƒé…ç½®åˆ°-etcrcdinitdjenkins-çš„candidatesä¸­">#</a> å°† jdk11 çš„ç¯å¢ƒé…ç½®åˆ° /etc/rc.d/init.d/jenkins çš„ candidates ä¸­</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20221122105322847.png" alt="image-20221122105322847"></p>
<h4 id="é‡æ–°å¯åŠ¨æœåŠ¡æ²¡æœ‰æŠ¥é”™"><a class="markdownIt-Anchor" href="#é‡æ–°å¯åŠ¨æœåŠ¡æ²¡æœ‰æŠ¥é”™">#</a> é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œæ²¡æœ‰æŠ¥é”™</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20221122105452465.png" alt="image-20221122105452465"></p>
<h4 id="è®¿é—®-jenkinsç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥ç”Ÿæˆçš„å¯†ç åœ¨-varlibjenkinssecrets-ç›®å½•ä¸‹çš„initialadminpasswordæ–‡ä»¶ä¸­"><a class="markdownIt-Anchor" href="#è®¿é—®-jenkinsç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥ç”Ÿæˆçš„å¯†ç åœ¨-varlibjenkinssecrets-ç›®å½•ä¸‹çš„initialadminpasswordæ–‡ä»¶ä¸­">#</a> è®¿é—® Jenkinsï¼Œç¬¬ä¸€æ¬¡éœ€è¦è¾“å…¥ç”Ÿæˆçš„å¯†ç ï¼Œåœ¨ /var/lib/jenkins/secrets ç›®å½•ä¸‹çš„ initialAdminPassword æ–‡ä»¶ä¸­</h4>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20221122104907426.png" alt="image-20221122104907426"></p>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20221122104919096.png" alt="image-20221122104919096"></p>
<h2 id="æˆåŠŸ"><a class="markdownIt-Anchor" href="#æˆåŠŸ">#</a> æˆåŠŸ</h2>
<p><img src="https://brath.oss-cn-shanghai.aliyuncs.com/pigo/image-20221122105607288.png" alt="image-20221122105607288"></p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="äºŒç»´ç plus"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/page/11/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next is-invisible is-hidden-mobile"><a href="/page/13/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/11/">11</a></li><li><a class="pagination-link is-current" href="/page/12/">12</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T02:17:03.092Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90Activiti%E3%80%91%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E%20Activiti%20%E6%95%99%E7%A8%8B%EF%BC%88%E9%9D%9E%E5%B8%B8%E8%AF%A6%E7%BB%86%EF%BC%89/">ã€Activitiã€‘å·¥ä½œæµå¼•æ“ Activiti æ•™ç¨‹(éå¸¸è¯¦ç»†)</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T02:13:14.076Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90Activiti%E3%80%91Java%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E%20Activiti%20%E4%B8%87%E5%AD%97%E8%AF%A6%E7%BB%86%E5%85%A5%E9%97%A8/">ã€Activitiã€‘Javaå·¥ä½œæµå¼•æ“ Activiti ä¸‡å­—è¯¦ç»†å…¥é—¨</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T02:06:08.048Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90Java%E3%80%91Java%E5%AD%97%E7%AC%A6%E4%B8%8EASCII%E7%A0%81%E4%BA%92%E8%BD%AC/">ã€Javaã€‘Javaå­—ç¬¦ä¸ASCIIç äº’è½¬</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T02:03:55.027Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90Flutter%E3%80%91%E8%A7%A3%E5%86%B3%E5%8D%87%E7%BA%A7Flutter3.0%E5%90%8E%E5%87%BA%E7%8E%B0%E8%AD%A6%E5%91%8AOperand%20of%20null-aware%20operation%20%E2%80%98!%E2%80%98%20has%20type%20%E2%80%98WidgetsBinding%E2%80%98%20which%20excludes%20null/">ã€Flutterã€‘è§£å†³å‡çº§Flutter3.0åå‡ºç°è­¦å‘ŠOperand of null-aware operation â€˜!â€˜ has type â€˜WidgetsBindingâ€˜ which excludes null</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-04-20T02:01:31.057Z">2023-04-20</time></p><p class="title"><a href="/2023/04/20/%E3%80%90SqlServer%E3%80%91SqlServer%E6%9F%A5%E8%AF%A2%E4%BB%8A%E6%97%A5%E5%92%8C%E6%98%A8%E6%97%A5%E6%95%B0%E6%8D%AE/">ã€SqlServerã€‘SqlServeræŸ¥è¯¢ä»Šæ—¥å’Œæ˜¨æ—¥æ•°æ®</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">61</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">56</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">è®¢é˜…æ›´æ–°</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="è®¢é˜…"></div></div></form></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="è®¢é˜…"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/7f71f67568cbf455bf7b2c32345f71e3.jpg" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">ä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œã€‚</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ä¸­å›½Â·æ±Ÿè‹Â·æ— é”¡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">117</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ³ çµ(ç‰¹åˆ«å‘œè°¢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(ç äº‘)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(é˜¿é‡Œäº‘)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(è…¾è®¯äº‘)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(Bç«™)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">Â© 2029</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>