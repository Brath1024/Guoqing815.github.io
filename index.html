<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/avatar.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/avatar.png"}},"description":""}</script><link rel="icon" href="https://brath.cloud/avatar.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">ä¸»é¡µ</a><a class="navbar-item" href="/archives">æ–‡ç« åˆ—è¡¨</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">æ›´å¤š</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-17T05:23:03.000Z" title="2023-5-17 13:23:03">2023-05-17</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-17T05:46:59.092Z" title="2023-5-17 13:46:59">2023-05-17</time>æ›´æ–°</span><span class="level-item">12 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1807ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/17/%E3%80%90Java%E3%80%91%E4%BD%BF%E7%94%A8%20Java%208%20%E4%B8%AD%E7%9A%84%20Stream%20%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AE%A9%E4%BD%A0%E5%86%99%E4%BB%A3%E7%A0%81%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D/">ã€Javaã€‘ä½¿ç”¨ Java 8 ä¸­çš„ Stream ï¼Œå¯ä»¥è®©ä½ å†™ä»£ç äº‹åŠåŠŸå€</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javaä½¿ç”¨-java-8-ä¸­çš„-stream-å¯ä»¥è®©ä½ å†™ä»£ç äº‹åŠåŠŸå€"><a class="markdownIt-Anchor" href="#javaä½¿ç”¨-java-8-ä¸­çš„-stream-å¯ä»¥è®©ä½ å†™ä»£ç äº‹åŠåŠŸå€">#</a> ã€Javaã€‘ä½¿ç”¨ Java 8 ä¸­çš„ Stream ï¼Œå¯ä»¥è®©ä½ å†™ä»£ç äº‹åŠåŠŸå€</h1>
<h1 id="stream"><a class="markdownIt-Anchor" href="#stream">#</a> Stream</h1>
<p>Java 8 ä¸­ä¸€ä¸ªä¸»è¦çš„æ–°åŠŸèƒ½æ˜¯å¼•å…¥äº†æµï¼ˆStreamï¼‰åŠŸèƒ½ã€‚åœ¨ <code>java.util.stream</code>  ä¸­åŒ…å«ç”¨äºå¤„ç†å…ƒç´ åºåˆ—çš„ç±»ã€‚å…¶ä¸­ï¼Œæœ€é‡è¦çš„ç±»æ˜¯ <code>Stream&lt;T&gt;</code> ã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹çœ‹å¦‚ä½•ä½¿ç”¨ç°æœ‰çš„æ•°æ®æºåˆ›å»ºæµã€‚</p>
<h2 id="åˆ›å»ºstream"><a class="markdownIt-Anchor" href="#åˆ›å»ºstream">#</a> åˆ›å»º Stream</h2>
<p>å¯ä»¥ä½¿ç”¨  <code>stream()</code>  å’Œ  <code>of()</code>  æ–¹æ³•ä»ä¸åŒçš„æ•°æ®æºï¼ˆä¾‹å¦‚ï¼šé›†åˆã€æ•°ç»„ï¼‰åˆ›å»ºæµï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String[] arr = <span class="keyword">new</span> <span class="title class_">String</span>[]&#123;<span class="string">&quot;ä¸‡&quot;</span>, <span class="string">&quot;çŒ«&quot;</span>, <span class="string">&quot;å­¦&quot;</span>, <span class="string">&quot;ç¤¾&quot;</span>&#125;;</span><br><span class="line">Stream&lt;String&gt; stream = Arrays.stream(arr);</span><br><span class="line">stream = Stream.of(<span class="string">&quot;ä¸‡&quot;</span>, <span class="string">&quot;çŒ«&quot;</span>, <span class="string">&quot;å­¦&quot;</span>, <span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p><code>Collection</code>  æ¥å£æ–°å¢äº†ä¸€ä¸ª  <code>stream()</code>  é»˜è®¤æ–¹æ³•ï¼Œå…è®¸ä½¿ç”¨ä»»ä½•é›†åˆä½œä¸ºæ•°æ®æºæ¥åˆ›å»º  <code>Stream&lt;T&gt;</code> ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;ä¸‡&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å­¦&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; stream = list.stream();</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<h2 id="åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨stream"><a class="markdownIt-Anchor" href="#åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨stream">#</a> åœ¨å¤šçº¿ç¨‹ä¸­ä½¿ç”¨ Stream</h2>
<p>Stream è¿˜é€šè¿‡æä¾›  <code>parallelStream()</code>  æ–¹æ³•æ¥ç®€åŒ–å¤šçº¿ç¨‹æ“ä½œï¼Œè¯¥æ–¹æ³•ä»¥å¹¶è¡Œæ¨¡å¼è¿è¡Œå¯¹æµå…ƒç´ çš„æ“ä½œã€‚</p>
<p>ä¸‹é¢çš„ä»£ç å¯ä»¥å¯¹æµçš„æ¯ä¸ªå…ƒç´ å¹¶è¡Œè¿è¡Œ  <code>doWork()</code>  æ–¹æ³•ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;ä¸‡&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å­¦&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line">list.parallelStream().forEach(element -&gt; doWork(element));</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†ä»‹ç»ä¸€äº›åŸºæœ¬çš„ Stream æ“ä½œã€‚</p>
<h1 id="stream-æ“ä½œ"><a class="markdownIt-Anchor" href="#stream-æ“ä½œ">#</a> Stream æ“ä½œ</h1>
<p>åœ¨æµä¸Šå¯ä»¥æ‰§è¡Œè®¸å¤šæœ‰ç”¨çš„æ“ä½œã€‚å®ƒä»¬è¢«åˆ†ä¸ºä¸­é—´æ“ä½œï¼ˆè¿”å›  <code>Stream&lt;T&gt;</code> ï¼‰å’Œç»ˆç«¯æ“ä½œï¼ˆè¿”å›æ˜ç¡®å®šä¹‰ç±»å‹çš„ç»“æœï¼‰ï¼Œä¸­é—´æ“ä½œå…è®¸é“¾æ¥ã€‚</p>
<p>æˆ‘éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæµä¸Šçš„æ“ä½œä¸ä¼šæ”¹å˜æ•°æ®æºã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;ä¸‡&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å­¦&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line"><span class="type">long</span> <span class="variable">count</span> <span class="operator">=</span> list.stream().distinct().count();</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œ <code>distinct()</code>  æ–¹æ³•è¡¨ç¤ºä¸€ä¸ªä¸­é—´æ“ä½œï¼Œå®ƒåˆ›å»ºäº†å‰ä¸€ä¸ªæµçš„å”¯ä¸€å…ƒç´ çš„æ–°æµã€‚è€Œ  <code>count()</code>  æ–¹æ³•æ˜¯ä¸€ä¸ªç»ˆç«¯æ“ä½œï¼Œå®ƒè¿”å›æµçš„å¤§å°ã€‚</p>
<h2 id="è¿­ä»£"><a class="markdownIt-Anchor" href="#è¿­ä»£">#</a> è¿­ä»£</h2>
<p>Stream å¸®åŠ©æˆ‘ä»¬æ›¿ä»£äº† forã€for-each å’Œ while å¾ªç¯ã€‚å®ƒå¯ä»¥è®©æˆ‘ä»¬æŠŠç²¾åŠ›é›†ä¸­åœ¨æ“ä½œçš„é€»è¾‘ä¸Šï¼Œè€Œä¸æ˜¯åœ¨è¿­ä»£å…ƒç´ åºåˆ—ä¸Šã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (String string : list) &#123;</span><br><span class="line">    <span class="keyword">if</span> (string.contains(<span class="string">&quot;çŒ«&quot;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç åªéœ€è¦ä¸€è¡Œ Stream ä»£ç å°±å¯ä»¥å®ç°:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">boolean</span> <span class="variable">isExist</span> <span class="operator">=</span> list.stream().anyMatch(element -&gt; element.contains(<span class="string">&quot;çŒ«&quot;</span>));</span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<h2 id="è¿‡æ»¤"><a class="markdownIt-Anchor" href="#è¿‡æ»¤">#</a> è¿‡æ»¤</h2>
<p><code>filter()</code>  æ–¹æ³•å¯ä»¥è®©æˆ‘ä»¬é€‰æ‹©æ»¡è¶³è°“è¯æ¡ä»¶çš„å…ƒç´ æµã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;ä¸‡&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å­¦&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line">Stream&lt;String&gt; stream = list.stream().filter(element -&gt; element.contains(<span class="string">&quot;çŒ«&quot;</span>));</span><br><span class="line"><span class="number">123456</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆ›å»ºäº†ä¸€ä¸ª  <code>List&lt;String&gt;</code>  çš„  <code>Stream&lt;String&gt;</code> ï¼ŒæŸ¥æ‰¾è¯¥æµä¸­æ‰€æœ‰åŒ…å«å­—ç¬¦ â€œçŒ«â€ çš„å…ƒç´ ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªåªåŒ…å«ç­›é€‰åå…ƒç´ çš„æ–°æµã€‚</p>
<h2 id="æ˜ å°„"><a class="markdownIt-Anchor" href="#æ˜ å°„">#</a> æ˜ å°„</h2>
<p>ä¸ºäº†é€šè¿‡å°†ç‰¹æ®Šå‡½æ•°åº”ç”¨äºæµå…ƒç´ æ¥è½¬æ¢å®ƒä»¬ï¼Œå¹¶å°†è¿™äº›æ–°å…ƒç´ æ”¶é›†åˆ°æµä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨  <code>map()</code>  æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;3&quot;</span>);</span><br><span class="line">Stream&lt;Integer&gt; stream = list.stream().map(str -&gt; Integer.valueOf(str));</span><br><span class="line"><span class="number">12345</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œé€šè¿‡å¯¹åˆå§‹æµçš„æ¯ä¸ªå…ƒç´ åº”ç”¨ç‰¹å®šçš„ lambda è¡¨è¾¾å¼å°†  <code>Stream&lt;String&gt;</code>  è½¬æ¢ä¸º  <code>Stream&lt;Integer&gt;</code> ã€‚</p>
<p>å¦‚æœæ‚¨æœ‰ä¸€ä¸ªæµï¼Œå…¶ä¸­æ¯ä¸ªå…ƒç´ éƒ½åŒ…å«å…¶è‡ªå·±çš„å…ƒç´ åºåˆ—ï¼Œå¹¶ä¸”æ‚¨æƒ³åˆ›å»ºè¿™äº›å†…éƒ¨å…ƒç´ çš„æµï¼Œåˆ™åº”ä½¿ç”¨  <code>flatMap()</code>  æ–¹æ³•ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Writer</span> &#123;</span><br><span class="line">	<span class="keyword">private</span> String name;</span><br><span class="line">	<span class="keyword">private</span> List&lt;String&gt; books;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">1234</span></span><br><span class="line">List&lt;Writer&gt; writers = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">writers.add(<span class="keyword">new</span> <span class="title class_">Writer</span>());</span><br><span class="line">Stream&lt;String&gt; stream = writers.stream().flatMap(writer -&gt; writer.getBooks().stream());</span><br><span class="line"><span class="number">123</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªç±»å‹ä¸º  <code>Writer</code>  çš„å…ƒç´ åˆ—è¡¨ã€‚ <code>Writer</code>  ç±»åŒ…å«ä¸€ä¸ªç±»å‹ä¸º  <code>List&lt;String&gt;</code>  çš„å­—æ®µ  <code>books</code> ã€‚ä½¿ç”¨ <a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=flatMap&amp;spm=1001.2101.3001.7020">flatMap</a> () æ–¹æ³•ï¼Œå­—æ®µ  <code>books</code>  ä¸­çš„æ¯ä¸ªå…ƒç´ å°†è¢«æå–å¹¶æ·»åŠ åˆ°æ–°çš„ç»“æœæµä¸­ã€‚ä¹‹åï¼Œæœ€å¼€å§‹çš„ Stream å°†ä¼šä¸¢å¤±ã€‚</p>
<h2 id="åŒ¹é…"><a class="markdownIt-Anchor" href="#åŒ¹é…">#</a> åŒ¹é…</h2>
<p>Stream æä¾›äº†ä¸€ç»„æ–¹ä¾¿çš„å·¥å…·ï¼Œæ ¹æ®ä¸€äº›è°“è¯éªŒè¯ä¸€ä¸ªåºåˆ—çš„å…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ä¹‹ä¸€ï¼š</p>
<ul>
<li><code>anyMatch()</code> ï¼šåªè¦æœ‰ä¸€ä¸ªæ¡ä»¶æ»¡è¶³å³è¿”å› true</li>
<li><code>allMatch()</code> ï¼šå¿…é¡»å…¨éƒ¨éƒ½æ»¡è¶³æ‰ä¼šè¿”å› true</li>
<li><code>noneMatch()</code> ï¼šå…¨éƒ½ä¸æ»¡è¶³æ‰ä¼šè¿”å› true</li>
</ul>
<p>å®ƒä»¬éƒ½è¿”å› boolean çš„ç»ˆç«¯æ“ä½œã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">list.add(<span class="string">&quot;ä¸‡&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;çŒ«&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å­¦&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;ç¤¾&quot;</span>);</span><br><span class="line">list.stream().anyMatch(element -&gt; element.contains(<span class="string">&quot;ä¸‡&quot;</span>)); <span class="comment">// true</span></span><br><span class="line">list.stream().allMatch(element -&gt; element.contains(<span class="string">&quot;ä¸‡&quot;</span>)); <span class="comment">// false</span></span><br><span class="line">list.stream().noneMatch(element -&gt; element.contains(<span class="string">&quot;ä¸‡&quot;</span>)); <span class="comment">// false</span></span><br><span class="line"><span class="number">12345678</span></span><br></pre></td></tr></table></figure>
<p>å¯¹äºç©ºçš„ Streamï¼Œæ— è®ºç»™å®šçš„è°“è¯æ˜¯ä»€ä¹ˆï¼ŒallMatch () æ–¹æ³•éƒ½å°†è¿”å› trueï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream.empty().anyMatch(Objects::nonNull); <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>è¿™æ˜¯ä¸€ä¸ªåˆç†çš„å€¼ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾ä¸åˆ°ä¸æ»¡è¶³è°“è¯çš„ä»»ä½•å…ƒç´ ã€‚</p>
<p>åŒæ ·åœ°ï¼Œå¯¹äºç©ºçš„ Streamï¼Œ<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=anyMatch&amp;spm=1001.2101.3001.7020">anyMatch</a> () æ–¹æ³•æ€»æ˜¯è¿”å› falseï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Stream.empty().anyMatch(Objects::nonNull); <span class="comment">// false</span></span><br><span class="line"><span class="number">1</span></span><br></pre></td></tr></table></figure>
<p>åŒæ ·åœ°ï¼Œè¿™ä¹Ÿæ˜¯åˆç†çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ‰¾ä¸åˆ°æ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„å…ƒç´ ã€‚</p>
<h2 id="åˆå¹¶"><a class="markdownIt-Anchor" href="#åˆå¹¶">#</a> åˆå¹¶</h2>
<p>æˆ‘å¯ä»¥ä½¿ç”¨ç±»å‹ä¸º Stream çš„  <code>reduce()</code>  æ–¹æ³•ï¼Œæ ¹æ®æŒ‡å®šçš„å‡½æ•°å°†ä¸€ç³»åˆ—å…ƒç´ åˆå¹¶ä¸ºæŸä¸ªå€¼ã€‚è¿™ä¸ªæ–¹æ³•æœ‰ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªæ˜¯èµ·å§‹å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%B4%AF%E5%8A%A0%E5%99%A8&amp;spm=1001.2101.3001.7020">ç´¯åŠ å™¨</a>å‡½æ•°ã€‚</p>
<p>æ¯”å¦‚ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; integers = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="type">Integer</span> <span class="variable">reduced</span> <span class="operator">=</span> integers.stream().reduce(<span class="number">4</span>, (a, b) -&gt; a + b);</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<p>åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæœ‰ä¸€ä¸ª  <code>List&lt;Integer&gt;</code> ï¼Œæˆ‘ä»¬å°†è¿™äº›å…ƒç´ åŠ èµ·æ¥ï¼Œå¹¶åŠ ä¸Šä¸€ä¸ªåˆå§‹çš„æ•´æ•°ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ 4ï¼‰ã€‚é‚£ä¹ˆï¼Œè¿è¡Œä»¥ä¸‹ä»£ç çš„ç»“æœæ˜¯ 10ï¼ˆ4 + 1 + 2 + 3ï¼‰ã€‚</p>
<h2 id="æ”¶é›†"><a class="markdownIt-Anchor" href="#æ”¶é›†">#</a> æ”¶é›†</h2>
<p>åœ¨ Stream ç±»å‹ä¸­ï¼Œä¹Ÿå¯ä»¥é€šè¿‡  <code>collect()</code>  æ–¹æ³•æ¥è¿›è¡Œæ”¶é›†ã€‚è¿™ä¸ªæ“ä½œéå¸¸æ–¹ä¾¿ï¼Œå¯ä»¥å°†ä¸€ä¸ªæµè½¬æ¢ä¸º  <code>Collection</code>  æˆ–  <code>Map</code> ï¼Œä¹Ÿå¯ä»¥å°†ä¸€ä¸ªæµè¡¨ç¤ºä¸ºå•ä¸ªå­—ç¬¦ä¸²ã€‚ <code>Collectors</code>  æ˜¯ä¸€ä¸ªå®ç”¨ç±»ï¼Œæä¾›äº†å‡ ä¹æ‰€æœ‰å…¸å‹çš„æ”¶é›†æ“ä½œçš„è§£å†³æ–¹æ¡ˆã€‚å¯¹äºä¸€äº›ä¸å¤ªå¸¸è§çš„ä»»åŠ¡ï¼Œå¯ä»¥åˆ›å»ºè‡ªå®šä¹‰çš„æ”¶é›†å™¨ã€‚</p>
<p>ä¸‹é¢çš„ä»£ç ä½¿ç”¨ç»ˆç«¯æ“ä½œ  <code>collect()</code>  å°†  <code>Stream&lt;String&gt;</code>  è½¬æ¢ä¸º  <code>List&lt;String&gt;</code> ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; resultList </span><br><span class="line">  = list.stream().map(element -&gt; element.toUpperCase()).collect(Collectors.toList());</span><br><span class="line"><span class="number">12</span></span><br></pre></td></tr></table></figure>
<h1 id="æœ€å"><a class="markdownIt-Anchor" href="#æœ€å">#</a> æœ€å</h1>
<p>Stream çš„é«˜çº§ç¤ºä¾‹éå¸¸ä¸°å¯Œï¼Œæœ¬æ–‡çš„ç›®çš„æ˜¯ä¸ºäº†è®©æˆ‘ä»¬å¿«é€Ÿäº†è§£ Stream åŠŸèƒ½çš„ç”¨æ³•ï¼Œå¹¶å¯å‘æˆ‘ä»¬ç»§ç»­æ¢ç´¢å’Œæ·±å…¥å­¦ä¹ ã€‚</p>
<p>Stream æ˜¯ Java 8 ä¸­éå¸¸å¼ºå¤§å’Œå®ç”¨çš„ APIï¼Œå®ƒä¸ºå¼€å‘äººå‘˜æä¾›äº†ä¸€ç§æ›´åŠ ç®€ä¾¿çš„æ–¹å¼æ¥å¤„ç†æ•°æ®ã€‚å¸Œæœ›æˆ‘ä»¬é€šè¿‡æœ¬æ–‡çš„ä»‹ç»å’Œç¤ºä¾‹ï¼Œå¯ä»¥å¿«é€Ÿä¸Šæ‰‹ä½¿ç”¨ Streamï¼Œå¹¶ç»§ç»­æ·±å…¥å­¦ä¹ å’Œæ¢ç´¢ã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:20:55.000Z" title="2023-5-8 22:20:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:32:20.864Z" title="2023-5-9 8:32:20">2023-05-09</time>æ›´æ–°</span><span class="level-item">14 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2091ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91volatile%E5%85%B3%E9%94%AE%E5%AD%97/">ã€Javaã€‘volatileå…³é”®å­—</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javavolatileå…³é”®å­—"><a class="markdownIt-Anchor" href="#javavolatileå…³é”®å­—">#</a> ã€Javaã€‘volatile å…³é”®å­—</h1>
<h1 id="volatile"><a class="markdownIt-Anchor" href="#volatile">#</a> volatile</h1>
<h3 id="1-å¯è§æ€§æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#1-å¯è§æ€§æ¡ˆä¾‹">#</a> 1. å¯è§æ€§æ¡ˆä¾‹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">VT</span> <span class="variable">vt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VT</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">Thread01</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(vt);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">Thread02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ignore) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">                vt.sign = <span class="literal">true</span>;</span><br><span class="line">                System.out.println(<span class="string">&quot;vt.sign = true é€šçŸ¥ while (!sign) ç»“æŸï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread01.start();</span><br><span class="line">        Thread02.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™æ®µä»£ç </strong>ï¼Œæ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå˜é‡ï¼Œç¨‹åºæœŸæœ›å½“  <code>sign</code>  åœ¨çº¿ç¨‹ Thread01 è¢«æ“ä½œ  <code>vt.sign = true</code>  æ—¶ï¼ŒThread02 è¾“å‡º <em>ä½ å</em>ã€‚</p>
<p>ä½†å®é™…ä¸Šè¿™æ®µä»£ç æ°¸è¿œä¸ä¼šè¾“å‡º <em>ä½ å</em>ï¼Œè€Œæ˜¯ä¸€ç›´å¤„äºæ­»å¾ªç¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥æ­¥è®²è§£å’ŒéªŒè¯ã€‚</p>
<h3 id="2-åŠ ä¸Švolatileå…³é”®å­—"><a class="markdownIt-Anchor" href="#2-åŠ ä¸Švolatileå…³é”®å­—">#</a> 2. åŠ ä¸Š volatile å…³é”®å­—</h3>
<p>æˆ‘ä»¬æŠŠ sign å…³é”®å­—åŠ ä¸Š volatitle æè¿°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vt.sign = <span class="literal">true</span> é€šçŸ¥ <span class="keyword">while</span> (!sign) ç»“æŸï¼</span><br><span class="line">ä½ å</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span> </span><br></pre></td></tr></table></figure>
<p>volatile å…³é”®å­—æ˜¯ Java è™šæ‹Ÿæœºæä¾›çš„çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¿®é¥°ç¬¦å‡ºç°ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å“¦</p>
<p>åœ¨æ·»åŠ  volatile å…³é”®å­—åï¼Œç¨‹åºå°±ç¬¦åˆé¢„æœŸçš„è¾“å‡ºäº† <em>ä½ å</em>ã€‚ä»æˆ‘ä»¬å¯¹ volatile çš„å­¦ä¹ è®¤çŸ¥å¯ä»¥çŸ¥é“ã€‚volatile å…³é”®å­—æ˜¯ JVM æä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œç”¨æ¥ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§ã€‚</p>
<p>æ­£åœ¨ä¿®é¥°åå¯ä»¥è®©å­—æ®µåœ¨çº¿ç¨‹è§å¯è§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§è¢«ä¿®æ”¹å€¼åï¼Œå¯ä»¥åŠæ—¶çš„åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­åšå‡ºç›¸åº”çš„ååº”ã€‚</p>
<h3 id="3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§"><a class="markdownIt-Anchor" href="#3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§">#</a> 3. volatile æ€ä¹ˆä¿è¯çš„å¯è§æ€§</h3>
<h4 id="31-æ— volatileæ—¶å†…å­˜å˜åŒ–"><a class="markdownIt-Anchor" href="#31-æ— volatileæ—¶å†…å­˜å˜åŒ–">#</a> 3.1 æ—  volatile æ—¶ï¼Œå†…å­˜å˜åŒ–</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-03.png" alt="æ— volatileæ—¶ï¼Œå†…å­˜å˜åŒ–"></p>
<p>é¦–å…ˆæ˜¯å½“ sign æ²¡æœ‰ volatitle ä¿®é¥°æ—¶  <code>public boolean sign = false;</code> ï¼Œçº¿ç¨‹ 01 å¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œçº¿ç¨‹ 02 å¹¶ä¸ä¼šæ‹¿åˆ°å˜åŒ–çš„å€¼ã€‚æ‰€ä»¥ç¨‹åºä¹Ÿå°±ä¸ä¼šè¾“å‡ºç»“æœ â€œä½ åâ€</p>
<h4 id="32-æœ‰volatileæ—¶å†…å­˜å˜åŒ–"><a class="markdownIt-Anchor" href="#32-æœ‰volatileæ—¶å†…å­˜å˜åŒ–">#</a> 3.2 æœ‰ volatile æ—¶ï¼Œå†…å­˜å˜åŒ–</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-04.png" alt="æœ‰volatileæ—¶ï¼Œå†…å­˜å˜åŒ–"></p>
<p>å½“æˆ‘ä»¬æŠŠå˜é‡ä½¿ç”¨ volatile ä¿®é¥°æ—¶  <code>public volatile boolean sign = false;</code> ï¼Œçº¿ç¨‹ 01 å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šæŠŠå˜é‡å˜åŒ–çš„å€¼å¼ºåˆ¶åˆ·æ–°çš„åˆ°ä¸»å†…å­˜ã€‚å½“çº¿ç¨‹ 02 è·å–å€¼æ—¶ï¼Œä¼šæŠŠè‡ªå·±çš„å†…å­˜é‡Œçš„ sign å€¼è¿‡æœŸæ‰ï¼Œä¹‹åä»ä¸»å†…å­˜ä¸­è¯»å–ã€‚æ‰€ä»¥æ·»åŠ å…³é”®å­—åç¨‹åºå¦‚é¢„æœŸè¾“å‡ºç»“æœã€‚</p>
<h3 id="4-åç¼–è¯‘è§£æ¯’å¯è§æ€§"><a class="markdownIt-Anchor" href="#4-åç¼–è¯‘è§£æ¯’å¯è§æ€§">#</a> 4. åç¼–è¯‘è§£æ¯’å¯è§æ€§</h3>
<p>ç±»ä¼¼è¿™æ ·æœ‰æ·±åº¦çš„æŠ€æœ¯çŸ¥è¯†ï¼Œæœ€ä½³çš„æ–¹å¼å°±æ˜¯æ·±å…¥ç†è§£åŸç†ï¼Œçœ‹çœ‹å®ƒåˆ°åº•åšäº†ä»€ä¹ˆæ‰ä¿è¯çš„å†…å­˜å¯è§æ€§æ“ä½œã€‚</p>
<h4 id="41-æŸ¥çœ‹jvmæŒ‡ä»¤"><a class="markdownIt-Anchor" href="#41-æŸ¥çœ‹jvmæŒ‡ä»¤">#</a> 4.1 æŸ¥çœ‹ JVM æŒ‡ä»¤</h4>
<p><strong>æŒ‡ä»¤</strong>ï¼š <code>javap -v -p VT</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">boolean</span> sign;</span><br><span class="line">    descriptor: Z</span><br><span class="line">    flags: ACC_PUBLIC, ACC_VOLATILE</span><br><span class="line"></span><br><span class="line">  org.itstack.interview.test.VT();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags:</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: aload_0</span><br><span class="line">         <span class="number">5</span>: iconst_0</span><br><span class="line">         <span class="number">6</span>: putfield      #<span class="number">2</span>                  <span class="comment">// Field sign:Z</span></span><br><span class="line">         <span class="number">9</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">35</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">37</span>: <span class="number">4</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">10</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lorg/itstack/interview/test/VT;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: getfield      #<span class="number">2</span>                  <span class="comment">// Field sign:Z</span></span><br><span class="line">         <span class="number">4</span>: ifne          <span class="number">10</span></span><br><span class="line">         <span class="number">7</span>: goto          <span class="number">0</span></span><br><span class="line">        <span class="number">10</span>: getstatic     #<span class="number">3</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">13</span>: ldc           #<span class="number">4</span>                  <span class="comment">// String ä½ å</span></span><br><span class="line">        <span class="number">15</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">        <span class="number">18</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">40</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">42</span>: <span class="number">10</span></span><br><span class="line">        line <span class="number">43</span>: <span class="number">18</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">19</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lorg/itstack/interview/test/VT;</span><br><span class="line">      StackMapTable: number_of_entries = <span class="number">2</span></span><br><span class="line">        frame_type = <span class="number">0</span> <span class="comment">/* same */</span></span><br><span class="line">        frame_type = <span class="number">9</span> <span class="comment">/* same */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä» JVM æŒ‡ä»¤ç ä¸­åªä¼šå‘ç°å¤šäº†ï¼Œ <code>ACC_VOLATILE</code> ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç‚¹ã€‚æ‰€ä»¥ï¼Œä¹Ÿä¸èƒ½çœ‹å‡ºæ˜¯æ€ä¹ˆå®ç°çš„å¯è§æ€§ã€‚</p>
<h4 id="42-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#42-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤">#</a> 4.2 æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤</h4>
<p>é€šè¿‡ Class æ–‡ä»¶æŸ¥çœ‹æ±‡ç¼–ï¼Œéœ€è¦ä¸‹è½½ hsdis-amd64.dll æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°  <code>JAVA_HOME\jre\bin\serverç›®å½•ä¸‹</code> ã€‚ä¸‹è½½èµ„æºå¦‚ä¸‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip">http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip">http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip(opens new window)</a></li>
</ul>
<p>å¦å¤–æ˜¯æ‰§è¡Œå‘½ä»¤ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>åŸºç¡€æŒ‡ä»¤ï¼š <code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly</code></li>
<li>æŒ‡å®šæ‰“å°ï¼š <code>-XX:CompileCommand=dontinline,ç±»å.æ–¹æ³•å</code></li>
<li>æŒ‡å®šæ‰“å°ï¼š <code>-XX:CompileCommand=compileonly,ç±»å.æ–¹æ³•å</code></li>
<li>è¾“å‡ºä½ç½®ï¼š <code>&gt; xxx</code></li>
</ol>
<p>æœ€ç»ˆä½¿ç”¨ï¼š <code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:CompileCommand=dontinline,ApiTest.main -XX:CompileCommand=compileonly,ApiTest.mian</code></p>
<p><em>æŒ‡ä»¤å¯ä»¥åœ¨ IDEA ä¸­çš„ Terminal é‡Œä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ° DOS é»‘çª—å£ä¸­ä½¿ç”¨</em></p>
<p><strong>å¦å¤–</strong>ï¼Œä¸ºäº†æ›´ç®€å•çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠæŒ‡ä»¤å¯ä»¥é…ç½®åˆ° idea çš„ VM options é‡Œï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-05.png" alt="Idea VM options é…ç½®ç¼–è¯‘æŒ‡ä»¤"></p>
<p>é…ç½®å®Œæˆåï¼Œä¸å‡ºæ„å¤–çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Loaded disassembler from C:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_161</span>\jre\bin\server\hsdis-amd64.dll</span><br><span class="line">Decoding compiled method <span class="number">0x0000000003744990</span>:</span><br><span class="line">Code:</span><br><span class="line">Argument <span class="number">0</span> is unknown.RIP: <span class="number">0x3744ae0</span> Code size: <span class="number">0x00000110</span></span><br><span class="line">[Disassembling <span class="keyword">for</span> mach=<span class="string">&#x27;amd64&#x27;</span>]</span><br><span class="line">[Entry Point]</span><br><span class="line">[Constants]</span><br><span class="line">  # &#123;method&#125; &#123;<span class="number">0x000000001c853d18</span>&#125; <span class="string">&#x27;getSnapshotTransformerList&#x27;</span> <span class="string">&#x27;()[Lsun/instrument/TransformerManager$TransformerInfo;&#x27;</span> in <span class="string">&#x27;sun/instrument/TransformerManager&#x27;</span></span><br><span class="line">  #           [sp+<span class="number">0x40</span>]  (sp of caller)</span><br><span class="line">  <span class="number">0x0000000003744ae0</span>: mov     r10d,dword ptr [rdx+8h]</span><br><span class="line">  <span class="number">0x0000000003744ae4</span>: shl     r10,3h</span><br><span class="line">  <span class="number">0x0000000003744ae8</span>: cmp     r10,rax</span><br><span class="line">  <span class="number">0x0000000003744aeb</span>: jne     3685f60h          ;   &#123;runtime_call&#125;</span><br><span class="line">  <span class="number">0x0000000003744af1</span>: nop     word ptr [rax+rax+0h]</span><br><span class="line">  <span class="number">0x0000000003744afc</span>: nop</span><br><span class="line">[Verified Entry Point]</span><br><span class="line">  <span class="number">0x0000000003744b00</span>: mov     dword ptr [rsp+0ffffffffffffa000h],eax</span><br><span class="line">  <span class="number">0x0000000003744b07</span>: push    rbp</span><br><span class="line">  <span class="number">0x0000000003744b08</span>: sub     rsp,30h           ;*aload_0</span><br><span class="line">                                                ; - sun.instrument.TransformerManager::getSnapshotTransformerList@<span class="number">0</span> (line <span class="number">166</span>)</span><br><span class="line"></span><br><span class="line">  <span class="number">0x0000000003744b0c</span>: mov     eax,dword ptr [rdx+10h]</span><br><span class="line">  <span class="number">0x0000000003744b0f</span>: shl     rax,3h            ;*getfield mTransformerList</span><br><span class="line">                                                ; - sun.instrument.TransformerManager::getSnapshotTransformerList@<span class="number">1</span> (line <span class="number">166</span>)</span><br><span class="line"></span><br><span class="line">  <span class="number">0x0000000003744b13</span>: add     rsp,30h</span><br><span class="line">...   </span><br></pre></td></tr></table></figure>
<p><strong>è¿è¡Œç»“æœå°±æ˜¯æ±‡ç¼–æŒ‡ä»¤</strong>ï¼Œæ¯”è¾ƒå¤šè¿™é‡Œå°±ä¸éƒ½æ”¾äº†ã€‚æˆ‘ä»¬åªè§‚å¯ŸğŸ•µé‡ç‚¹éƒ¨åˆ†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x0000000003324cda</span>: mov    <span class="number">0x74</span>(%r8),%edx     ;*getstatic state</span><br><span class="line">                                              ; - VT::run@<span class="number">28</span> (line <span class="number">27</span>)</span><br><span class="line"> </span><br><span class="line"><span class="number">0x0000000003324cde</span>: inc    %edx</span><br><span class="line"><span class="number">0x0000000003324ce0</span>: mov    %edx,<span class="number">0x74</span>(%r8)</span><br><span class="line"><span class="number">0x0000000003324ce4</span>: lock addl $<span class="number">0x0</span>,(%rsp)     ;*putstatic state</span><br><span class="line">                                              ; - VT::run@<span class="number">33</span> (line <span class="number">27</span>)</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘åçš„æ±‡ç¼–æŒ‡ä»¤ä¸­ï¼Œæœ‰ volatile å…³é”®å­—å’Œæ²¡æœ‰ volatile å…³é”®å­—ï¼Œä¸»è¦å·®åˆ«åœ¨äºå¤šäº†ä¸€ä¸ª  <code>lock addl $0x0,(%rsp)</code> ï¼Œä¹Ÿå°±æ˜¯ lock çš„å‰ç¼€æŒ‡ä»¤ã€‚</p>
<p><strong>lock æŒ‡ä»¤</strong>ç›¸å½“äºä¸€ä¸ª<em>å†…å­˜å±éšœ</em>ï¼Œå®ƒä¿è¯å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å°†æœ¬å¤„ç†å™¨çš„ç¼“å­˜å†™å…¥å†…å­˜ã€‚</li>
<li>é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li>
<li>å¦‚æœæ˜¯å†™å…¥åŠ¨ä½œä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨ä¸­å¯¹åº”çš„å†…å­˜æ— æ•ˆã€‚</li>
</ol>
<p>é‚£ä¹ˆï¼Œè¿™é‡Œçš„ 1ã€3 å°±æ˜¯ç”¨æ¥ä¿è¯è¢«ä¿®é¥°çš„å˜é‡ï¼Œä¿è¯å†…å­˜å¯è§æ€§ã€‚</p>
<h3 id="5-ä¸åŠ volatileä¹Ÿå¯è§å—"><a class="markdownIt-Anchor" href="#5-ä¸åŠ volatileä¹Ÿå¯è§å—">#</a> 5. ä¸åŠ  volatile ä¹Ÿå¯è§å—</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ‰è´¨ç–‘å°±è¦æœ‰éªŒè¯</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨å†æŠŠä¾‹å­ä¿®æ”¹ä¸‹ï¼Œåœ¨  <code>while (!sign)</code>  å¾ªç¯ä½“ä¸­æ·»åŠ ä¸€æ®µæ‰§è¡Œä»£ç ï¼Œå¦‚ä¸‹ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åå»æ‰äº†  <code>volatile</code>  å…³é”®å­—ï¼Œå¹¶åœ¨ while å¾ªç¯ä¸­æ·»åŠ ä¸€æ®µä»£ç ã€‚ç°åœ¨çš„è¿è¡Œç»“æœæ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">ä½ å¥½</span><br><span class="line">ä½ å¥½</span><br><span class="line">ä½ å¥½</span><br><span class="line">vt.sign = <span class="literal">true</span> é€šçŸ¥ <span class="keyword">while</span> (!sign) ç»“æŸï¼</span><br><span class="line">ä½ å</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p><strong>å’‹æ ·</strong>ï¼Œåˆå¯è§äº†å§ï¼</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨æ²¡ volatile ä¿®é¥°æ—¶ï¼Œjvm ä¹Ÿä¼šå°½é‡ä¿è¯å¯è§æ€§ã€‚æœ‰ volatile ä¿®é¥°çš„æ—¶å€™ï¼Œä¸€å®šä¿è¯å¯è§æ€§ã€‚</p>
<h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“">#</a> æ€»ç»“</h2>
<ul>
<li>volatile ä¼šæ§åˆ¶è¢«ä¿®é¥°çš„å˜é‡åœ¨å†…å­˜æ“ä½œä¸Šä¸»åŠ¨æŠŠå€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„ CPU å†…å­˜è®¾ç½®è¿‡æœŸï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–æœ€æ–°å€¼ã€‚</li>
<li>é‚£ä¹ˆï¼Œvolatile å¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’ä¹Ÿæ˜¯å†…å­˜å±éšœï¼Œvolatile çš„å†…å­˜å±æ•…éšœæ˜¯åœ¨è¯»å†™æ“ä½œçš„å‰åå„æ·»åŠ ä¸€ä¸ª StoreStore å±éšœï¼Œä¹Ÿå°±æ˜¯å››ä¸ªä½ç½®ï¼Œæ¥ä¿è¯é‡æ’åºæ—¶ä¸èƒ½æŠŠå†…å­˜å±éšœåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li>
<li>å¦å¤– volatile å¹¶ä¸èƒ½è§£å†³åŸå­æ€§é—®é¢˜ï¼Œå³å¯¹äºå¤åˆæ“ä½œï¼ˆæ¯”å¦‚ i++ ç­‰ï¼‰æ— æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœéœ€è¦è§£å†³åŸå­æ€§é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ synchronzied æˆ–è€… lockã€‚</li>
<li>ä½¿ç”¨ volatile è™½ç„¶å¯ä»¥æä¾›æ¯”è¾ƒé«˜çš„å¯è§æ€§å’Œé¡ºåºæ€§çš„ä¿éšœï¼Œä½†å¹¶ä¸æ˜¯ç»å¯¹å¯é çš„ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å’Œä»£ç éœ€æ±‚æ¥è¿›è¡Œç»¼åˆè€ƒè™‘å’Œè¯„ä¼°ã€‚</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:14:55.000Z" title="2023-5-8 22:14:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:33:01.455Z" title="2023-5-9 8:33:01">2023-05-09</time>æ›´æ–°</span><span class="level-item">15 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2300ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91%E5%A4%9A%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt=""></p>
<h1 id="javaå¤šç§ä»£ç†çš„å®ç°æ–¹å¼"><a class="markdownIt-Anchor" href="#javaå¤šç§ä»£ç†çš„å®ç°æ–¹å¼">#</a> ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</h1>
<h2 id="äº”ç§ç±»ä»£ç†çš„æ–¹å¼"><a class="markdownIt-Anchor" href="#äº”ç§ç±»ä»£ç†çš„æ–¹å¼">#</a> äº”ç§ç±»ä»£ç†çš„æ–¹å¼</h2>
<p><code>ä¸å‡ºæ„å¤–</code> ï¼Œä½ å¯èƒ½åªçŸ¥é“ä¸¤ç§ç±»ä»£ç†çš„æ–¹å¼ã€‚ä¸€ç§æ˜¯ JDK è‡ªå¸¦çš„ï¼Œå¦å¤–ä¸€ç§æ˜¯ CGLIBã€‚</p>
<p>æˆ‘ä»¬å…ˆå®šä¹‰å‡ºä¸€ä¸ªæ¥å£å’Œç›¸åº”çš„å®ç°ç±»ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ä»£ç†ç±»åœ¨æ–¹æ³•ä¸­æ·»åŠ è¾“å‡ºä¿¡æ¯ã€‚</p>
<p><strong>å®šä¹‰æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">queryUserInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å®ç°æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserApi</span> <span class="keyword">implements</span> <span class="title class_">IUserApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">queryUserInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½ï¼æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç»™è¿™ä¸ªç±»æ–¹æ³•ä½¿ç”¨ä»£ç†åŠ å…¥ä¸€è¡Œé¢å¤–è¾“å‡ºçš„ä¿¡æ¯ã€‚</p>
<h3 id="0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†"><a class="markdownIt-Anchor" href="#0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†">#</a> 0. å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_reflect</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class&lt;UserApi&gt; clazz = UserApi.class;</span><br><span class="line">    <span class="type">Method</span> <span class="variable">queryUserInfo</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;queryUserInfo&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">invoke</span> <span class="operator">=</span> queryUserInfo.invoke(clazz.newInstance());</span><br><span class="line">    System.out.println(invoke);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­</li>
<li>ç‚¹è¯„ï¼šæœ‰ä»£ç†åœ°æ–¹å‡ ä¹å°±ä¼šæœ‰åå°„ï¼Œä»–ä»¬æ˜¯ä¸€å¥—äº’ç›¸é…åˆä½¿ç”¨çš„åŠŸèƒ½ç±»ã€‚åœ¨åå°„ä¸­å¯ä»¥è°ƒç”¨æ–¹æ³•ã€è·å–å±æ€§ã€æ‹¿åˆ°æ³¨è§£ç­‰ç›¸å…³å†…å®¹ã€‚è¿™äº›éƒ½å¯ä»¥ä¸æ¥ä¸‹æ¥çš„ç±»ä»£ç†ç»„åˆä½¿ç”¨ï¼Œå®Œæˆå„ç§æ¡†æ¶ä¸­çš„æŠ€æœ¯åœºæ™¯ã€‚</li>
</ul>
<h3 id="1-jdkä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#1-jdkä»£ç†æ–¹å¼">#</a> 1. JDK ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> Thread.currentThread().getContextClassLoader();</span><br><span class="line">        <span class="keyword">return</span> (T) Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;clazz&#125;, <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                System.out.println(method.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy JDKProxyï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;é¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_JDKProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> JDKProxy.getProxy(IUserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy JDKProxyï¼</span></span><br><span class="line"><span class="comment"> * 19:55:47.319 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span>  </span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­</li>
<li>åœºæ™¯ï¼šä¸­é—´ä»¶å¼€å‘ã€è®¾è®¡æ¨¡å¼ä¸­ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼åº”ç”¨</li>
<li>ç‚¹è¯„ï¼šè¿™ç§ JDK è‡ªå¸¦çš„ç±»ä»£ç†æ–¹å¼æ˜¯éå¸¸å¸¸ç”¨çš„ä¸€ç§ï¼Œä¹Ÿæ˜¯éå¸¸ç®€å•çš„ä¸€ç§ã€‚åŸºæœ¬ä¼šåœ¨ä¸€äº›ä¸­é—´ä»¶ä»£ç é‡Œçœ‹åˆ°ä¾‹å¦‚ï¼šæ•°æ®åº“è·¯ç”±ç»„ä»¶ã€Redis ç»„ä»¶ç­‰ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼åº”ç”¨åˆ°è®¾è®¡æ¨¡å¼ä¸­ã€‚</li>
</ul>
<h3 id="2-cglibä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#2-cglibä»£ç†æ–¹å¼">#</a> 2. CGLIB ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CglibProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">newInstall</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Enhancer.create(object.getClass(), <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘è¢«CglibProxyä»£ç†äº†&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> methodProxy.invokeSuper(o, objects);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_CglibProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">CglibProxy</span> <span class="variable">cglibProxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CglibProxy</span>();</span><br><span class="line">    <span class="type">UserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> (UserApi) cglibProxy.newInstall(<span class="keyword">new</span> <span class="title class_">UserApi</span>());</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy CglibProxyï¼</span></span><br><span class="line"><span class="comment"> * 19:55:47.319 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­</li>
<li>åœºæ™¯ï¼šSpringã€AOP åˆ‡é¢ã€é‰´æƒæœåŠ¡ã€ä¸­é—´ä»¶å¼€å‘ã€RPC æ¡†æ¶ç­‰</li>
<li>ç‚¹è¯„ï¼šCGLIB ä¸åŒäº JDKï¼Œå®ƒçš„åº•å±‚ä½¿ç”¨ ASM å­—èŠ‚ç æ¡†æ¶åœ¨ç±»ä¸­ä¿®æ”¹æŒ‡ä»¤ç å®ç°ä»£ç†ï¼Œæ‰€ä»¥è¿™ç§ä»£ç†æ–¹å¼ä¹Ÿå°±ä¸éœ€è¦åƒ JDK é‚£æ ·éœ€è¦æ¥å£æ‰èƒ½ä»£ç†ã€‚åŒæ—¶å¾—ç›Šäºå­—èŠ‚ç æ¡†æ¶çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™ç§ä»£ç†æ–¹å¼ä¹Ÿä¼šæ¯”ä½¿ç”¨ JDK ä»£ç†çš„æ–¹å¼å¿« 1.5~2.0 å€ã€‚</li>
</ul>
<h3 id="3-asmä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#3-asmä»£ç†æ–¹å¼">#</a> 3. ASM ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ASMProxy</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassReader</span> <span class="variable">classReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassReader</span>(clazz.getName());</span><br><span class="line">        <span class="type">ClassWriter</span> <span class="variable">classWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassWriter</span>(classReader, ClassWriter.COMPUTE_MAXS);</span><br><span class="line"></span><br><span class="line">        classReader.accept(<span class="keyword">new</span> <span class="title class_">ClassVisitor</span>(ASM5, classWriter) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> MethodVisitor <span class="title function_">visitMethod</span><span class="params">(<span class="type">int</span> access, <span class="keyword">final</span> String name, String descriptor, String signature, String[] exceptions)</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ–¹æ³•è¿‡æ»¤</span></span><br><span class="line">                <span class="keyword">if</span> (!<span class="string">&quot;queryUserInfo&quot;</span>.equals(name))</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">super</span>.visitMethod(access, name, descriptor, signature, exceptions);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">final</span> <span class="type">MethodVisitor</span> <span class="variable">methodVisitor</span> <span class="operator">=</span> <span class="built_in">super</span>.visitMethod(access, name, descriptor, signature, exceptions);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AdviceAdapter</span>(ASM5, methodVisitor, access, name, descriptor) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMethodEnter</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="comment">// æ‰§è¡ŒæŒ‡ä»¤ï¼›è·å–é™æ€å±æ€§</span></span><br><span class="line">                        methodVisitor.visitFieldInsn(Opcodes.GETSTATIC, <span class="string">&quot;java/lang/System&quot;</span>, <span class="string">&quot;out&quot;</span>, <span class="string">&quot;Ljava/io/PrintStream;&quot;</span>);</span><br><span class="line">                        <span class="comment">// åŠ è½½å¸¸é‡ load constant</span></span><br><span class="line">                        methodVisitor.visitLdcInsn(name + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy ASMï¼&quot;</span>);</span><br><span class="line">                        <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">                        methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL, <span class="string">&quot;java/io/PrintStream&quot;</span>, <span class="string">&quot;println&quot;</span>, <span class="string">&quot;(Ljava/lang/String;)V&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                        <span class="built_in">super</span>.onMethodEnter();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, ClassReader.EXPAND_FRAMES);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = classWriter.toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) <span class="keyword">new</span> <span class="title class_">ASMProxy</span>().defineClass(clazz.getName(), bytes, <span class="number">0</span>, bytes.length).newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_ASMProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> ASMProxy.getProxy(UserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy ASMï¼</span></span><br><span class="line"><span class="comment"> * 20:12:26.791 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­â­</li>
<li>åœºæ™¯ï¼šå…¨é“¾è·¯ç›‘æ§ã€ç ´è§£å·¥å…·åŒ…ã€CGLIBã€Spring è·å–ç±»å…ƒæ•°æ®ç­‰</li>
<li>ç‚¹è¯„ï¼šè¿™ç§ä»£ç†å°±æ˜¯ä½¿ç”¨å­—èŠ‚ç ç¼–ç¨‹çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå®ƒçš„å®ç°æ–¹å¼ç›¸å¯¹å¤æ‚ï¼Œè€Œä¸”éœ€è¦äº†è§£ Java è™šæ‹Ÿæœºè§„èŒƒç›¸å…³çš„çŸ¥è¯†ã€‚å› ä¸ºä½ çš„æ¯ä¸€æ­¥ä»£ç†æ“ä½œï¼Œéƒ½æ˜¯åœ¨æ“ä½œå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š <code>Opcodes.GETSTATIC</code> ã€ <code>Opcodes.INVOKEVIRTUAL</code> ï¼Œé™¤äº†è¿™äº›è¿˜æœ‰å° 200 ä¸ªå¸¸ç”¨çš„æŒ‡ä»¤ã€‚ä½†è¿™ç§æœ€æ¥è¿‘åº•å±‚çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ€å¿«çš„æ–¹å¼ã€‚æ‰€ä»¥åœ¨ä¸€äº›ä½¿ç”¨å­—èŠ‚ç æ’è£…çš„å…¨é“¾è·¯ç›‘æ§ä¸­ï¼Œä¼šéå¸¸å¸¸è§ã€‚</li>
</ul>
<h3 id="4-byte-buddyä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#4-byte-buddyä»£ç†æ–¹å¼">#</a> 4. Byte-Buddy ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ByteBuddyProxy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        DynamicType.Unloaded&lt;?&gt; dynamicType = <span class="keyword">new</span> <span class="title class_">ByteBuddy</span>()</span><br><span class="line">                .subclass(clazz)</span><br><span class="line">                .method(ElementMatchers.&lt;MethodDescription&gt;named(<span class="string">&quot;queryUserInfo&quot;</span>))</span><br><span class="line">                .intercept(MethodDelegation.to(InvocationHandler.class))</span><br><span class="line">                .make();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) dynamicType.load(Thread.currentThread().getContextClassLoader()).getLoaded().newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RuntimeType</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">intercept</span><span class="params">(<span class="meta">@Origin</span> Method method, <span class="meta">@AllArguments</span> Object[] args, <span class="meta">@SuperCall</span> Callable&lt;?&gt; callable)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(method.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy Byte-Buddyï¼&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> callable.call();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_ByteBuddyProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> ByteBuddyProxy.getProxy(UserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy Byte-Buddyï¼</span></span><br><span class="line"><span class="comment"> * 20:19:44.498 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span>  </span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­</li>
<li>åœºæ™¯ï¼šAOP åˆ‡é¢ã€ç±»ä»£ç†ã€ç»„ä»¶ã€ç›‘æ§ã€æ—¥å¿—</li>
<li>ç‚¹è¯„ï¼š <code>Byte Buddy</code>  ä¹Ÿæ˜¯ä¸€ä¸ªå­—èŠ‚ç æ“ä½œçš„ç±»åº“ï¼Œä½†  <code>Byte Buddy</code>  çš„ä½¿ç”¨æ–¹å¼æ›´åŠ ç®€å•ã€‚æ— éœ€ç†è§£å­—èŠ‚ç æŒ‡ä»¤ï¼Œå³å¯ä½¿ç”¨ç®€å•çš„ API å°±èƒ½å¾ˆå®¹æ˜“æ“ä½œå­—èŠ‚ç ï¼Œæ§åˆ¶ç±»å’Œæ–¹æ³•ã€‚æ¯”èµ· JDK åŠ¨æ€ä»£ç†ã€cglibï¼ŒByte Buddy åœ¨æ€§èƒ½ä¸Šå…·æœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚<strong>å¦å¤–</strong>ï¼Œ2015 å¹´ 10 æœˆï¼ŒByte Buddy è¢« Oracle æˆäºˆäº† Dukeâ€™s Choice å¤§å¥–ã€‚è¯¥å¥–é¡¹å¯¹ Byte Buddy çš„ â€œJava æŠ€æœ¯æ–¹é¢çš„å·¨å¤§åˆ›æ–°â€ è¡¨ç¤ºèµèµã€‚</li>
</ul>
<h3 id="5-javassistä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#5-javassistä»£ç†æ–¹å¼">#</a> 5. Javassist ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavassistProxy</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassPool</span> <span class="variable">pool</span> <span class="operator">=</span> ClassPool.getDefault();</span><br><span class="line">        <span class="comment">// è·å–ç±»</span></span><br><span class="line">        <span class="type">CtClass</span> <span class="variable">ctClass</span> <span class="operator">=</span> pool.get(clazz.getName());</span><br><span class="line">        <span class="comment">// è·å–æ–¹æ³•</span></span><br><span class="line">        <span class="type">CtMethod</span> <span class="variable">ctMethod</span> <span class="operator">=</span> ctClass.getDeclaredMethod(<span class="string">&quot;queryUserInfo&quot;</span>);</span><br><span class="line">        <span class="comment">// æ–¹æ³•å‰åŠ å¼º</span></span><br><span class="line">        ctMethod.insertBefore(<span class="string">&quot;&#123;System.out.println(\&quot;&quot;</span> + ctMethod.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy Javassist\&quot;);&#125;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = ctClass.toBytecode();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) <span class="keyword">new</span> <span class="title class_">JavassistProxy</span>().defineClass(clazz.getName(), bytes, <span class="number">0</span>, bytes.length).newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_JavassistProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> JavassistProxy.getProxy(UserApi.class)</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy Javassist</span></span><br><span class="line"><span class="comment"> * 20:23:39.139 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­</li>
<li>åœºæ™¯ï¼šå…¨é“¾è·¯ç›‘æ§ã€ç±»ä»£ç†ã€AOP</li>
<li>ç‚¹è¯„ï¼š <code>Javassist</code>  æ˜¯ä¸€ä¸ªä½¿ç”¨éå¸¸å¹¿çš„å­—èŠ‚ç æ’è£…æ¡†æ¶ï¼Œå‡ ä¹ä¸€å¤§éƒ¨åˆ†éå…¥ä¾µçš„å…¨é“¾è·¯ç›‘æ§éƒ½æ˜¯ä¼šé€‰æ‹©ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ã€‚å› ä¸ºå®ƒä¸æƒ³ ASM é‚£æ ·æ“ä½œå­—èŠ‚ç å¯¼è‡´é£é™©ï¼ŒåŒæ—¶å®ƒçš„åŠŸèƒ½ä¹Ÿéå¸¸é½å…¨ã€‚å¦å¤–ï¼Œè¿™ä¸ªæ¡†æ¶å³å¯ä½¿ç”¨å®ƒæ‰€æä¾›çš„æ–¹å¼ç›´æ¥ç¼–å†™æ’è£…ä»£ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—èŠ‚ç æŒ‡ä»¤è¿›è¡Œæ§åˆ¶ç”Ÿæˆä»£ç ï¼Œæ‰€ä»¥ç»¼åˆæ¥çœ‹ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„å­—èŠ‚ç æ¡†æ¶ã€‚</li>
</ul>
<h2 id="å››-æ€»ç»“"><a class="markdownIt-Anchor" href="#å››-æ€»ç»“">#</a> å››ã€æ€»ç»“</h2>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-01.png" alt="img"></p>
<ul>
<li>ä»£ç†çš„å®é™…ç›®çš„å°±æ˜¯é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µï¼Œæ›¿æ¢æ‰åŸæœ‰çš„å®ç°ç±»æˆ–è€…ç»™åŸæœ‰çš„å®ç°ç±»æ³¨å…¥æ–°çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚è€Œè¿™äº›æŠ€æœ¯æœ€ç»ˆéƒ½ä¼šç”¨åˆ°ä¸€äº›æ¡†æ¶åº”ç”¨ã€ä¸­é—´ä»¶å¼€å‘ä»¥åŠç±»ä¼¼éå…¥ä¾µçš„å…¨é“¾è·¯ç›‘æ§ä¸­ã€‚</li>
<li>ä¸€ä¸ªæŠ€æœ¯æ ˆæ·±åº¦çš„å­¦ä¹ èƒ½è®©ä½ é€å½»çš„äº†è§£åˆ°ä¸€äº›åŸºæœ¬çš„æ ¹æœ¬åŸç†ï¼Œé€šè¿‡è¿™æ ·çš„å­¦ä¹ å¯ä»¥è§£æƒ‘æ‰ä¸€äº›ä¼¼æ‡‚éæ‡‚çš„ç–‘é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™æ ·æŠ€æœ¯çš„æ‹“å±•è®©è‡ªå·±æœ‰æ›´å¥½çš„å·¥ä½œæœºä¼šå’Œè–ªèµ„å¾…é‡ã€‚</li>
<li>è¿™äº›æŠ€æœ¯å­¦èµ·æ¥å¹¶ä¸ä¼šå¾ˆå®¹æ˜“ï¼Œç”šè‡³å¯èƒ½è¿˜æœ‰ä¸€äº›çƒ§è„‘ã€‚ä½†æ¯ä¸€æ®µå€¼å¾—æ·±å…¥å­¦ä¹ çš„æŠ€æœ¯éƒ½èƒ½å¸®åŠ©ä½ çªç ´ä¸€å®šé˜¶æ®µçš„æŠ€æœ¯ç“¶é¢ˆã€‚</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:04:55.000Z" title="2023-5-8 22:04:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:27:14.814Z" title="2023-5-9 8:27:14">2023-05-09</time>æ›´æ–°</span><span class="level-item">1 å°æ—¶è¯»å®Œ (å¤§çº¦9856ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91HashMap%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E8%AF%BB/">ã€Javaã€‘HashMapæ ¸å¿ƒåŸç†è§£è¯»</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javahashmapæ ¸å¿ƒåŸç†è§£è¯»"><a class="markdownIt-Anchor" href="#javahashmapæ ¸å¿ƒåŸç†è§£è¯»">#</a> ã€Javaã€‘HashMap æ ¸å¿ƒåŸç†è§£è¯»</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<p>å¾—ç›Šäº <code>Doug Lea</code>  è€çˆ·å­çš„æ“åˆ€ï¼Œè®© <code>HashMap</code>  æˆä¸ºä½¿ç”¨å’Œé¢è¯•æœ€é¢‘ç¹çš„ APIï¼Œæ²¡åŠæ³•è®¾è®¡çš„å¤ªä¼˜ç§€äº†ï¼</p>
<p>HashMap æœ€æ—©å‡ºç°åœ¨ JDK 1.2 ä¸­ï¼Œåº•å±‚åŸºäºæ•£åˆ—ç®—æ³•å®ç°ã€‚HashMap å…è®¸ null é”®å’Œ null å€¼ï¼Œåœ¨è®¡ç®—å“ˆé”®çš„å“ˆå¸Œå€¼æ—¶ï¼Œnull é”®å“ˆå¸Œå€¼ä¸º 0ã€‚HashMap å¹¶ä¸ä¿è¯é”®å€¼å¯¹çš„é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨è¿›è¡ŒæŸäº›æ“ä½œåï¼Œé”®å€¼å¯¹çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap æ˜¯éçº¿ç¨‹å®‰å…¨ç±»ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚</p>
<h2 id="äºŒ-æºç åˆ†æ"><a class="markdownIt-Anchor" href="#äºŒ-æºç åˆ†æ">#</a> äºŒã€æºç åˆ†æ</h2>
<h3 id="1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap"><a class="markdownIt-Anchor" href="#1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap">#</a> 1. å†™ä¸€ä¸ªæœ€ç®€å•çš„ HashMap</h3>
<p>å­¦ä¹  HashMap å‰ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯å…ˆäº†è§£è¿™æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„æ•°æ®ç»“æ„æ¥å­˜æ”¾æ•°æ®ã€‚è€Œ HashMap ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£åï¼Œä¹ä¸€çœ‹ä»£ç è¿˜æ˜¯å¾ˆå¤æ‚çš„ã€‚å°±åƒä½ åŸæ¥åªç©¿ä¸ªè£¤è¡©ï¼Œç°åœ¨è¿˜æœ‰ç§‹è£¤å’Œé£è¡£ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€æ ¹æœ¬çš„ HashMap æ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯åªç©¿è£¤è¡©æ˜¯ä»€ä¹ˆæ•ˆæœï¼Œä¹‹åå†å»åˆ†æå®ƒçš„æºç ã€‚</p>
<p><strong>é—®é¢˜ï¼š</strong> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„ 7 ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œä½†è¦æ±‚åœ¨è·å–æ¯ä¸ªå…ƒç´ çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯ O (1)ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½é€šè¿‡å¾ªç¯éå†çš„æ–¹å¼è¿›è¡Œè·å–ï¼Œè€Œæ˜¯è¦å®šä½åˆ°æ•°ç»„ ID ç›´æ¥è·å–ç›¸åº”çš„å…ƒç´ ã€‚</p>
<p><strong>æ–¹æ¡ˆï¼š</strong> å¦‚æœè¯´æˆ‘ä»¬éœ€è¦é€šè¿‡ ID ä»æ•°ç»„ä¸­è·å–å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ¯ä¸ªå­—ç¬¦ä¸²éƒ½è®¡ç®—å‡ºä¸€ä¸ªåœ¨æ•°ç»„ä¸­çš„ä½ç½® IDã€‚<em>å­—ç¬¦ä¸²è·å– ID ä½ èƒ½æƒ³åˆ°ä»€ä¹ˆæ–¹å¼ï¼Ÿ</em> ä¸€ä¸ªå­—ç¬¦ä¸²æœ€ç›´æ¥çš„è·å–è·Ÿæ•°å­—ç›¸å…³çš„ä¿¡æ¯å°±æ˜¯ HashCodeï¼Œå¯ HashCode çš„å–å€¼èŒƒå›´å¤ªå¤§äº† <code>[-2147483648, 2147483647]</code> ï¼Œä¸å¯èƒ½ç›´æ¥ä½¿ç”¨ã€‚é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ HashCode ä¸æ•°ç»„é•¿åº¦åšä¸è¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®ã€‚å¦‚æœè¯´æœ‰ä¸¤ä¸ªå…ƒç´ å¾—åˆ°åŒæ ·çš„ IDï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„ ID ä¸‹å°±å­˜æ”¾ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>ä»¥ä¸Šå‘¢å…¶å®å°±æ˜¯æˆ‘ä»¬è¦æŠŠå­—ç¬¦ä¸²æ•£åˆ—åˆ°æ•°ç»„ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ€è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æŠŠè¿™ä¸ªæ€è·¯ç”¨ä»£ç å®ç°å‡ºæ¥ã€‚</p>
<h4 id="11-ä»£ç å®ç°"><a class="markdownIt-Anchor" href="#11-ä»£ç å®ç°">#</a> 1.1 ä»£ç å®ç°</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;jlkk&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;lopi&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å°å‚…å“¥&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;e4we&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;alpo&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;yhjk&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;plop&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¦å­˜æ”¾çš„æ•°ç»„</span></span><br><span class="line">String[] tab = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾ªç¯å­˜æ”¾</span></span><br><span class="line"><span class="keyword">for</span> (String key : list) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);  <span class="comment">// è®¡ç®—ç´¢å¼•ä½ç½®</span></span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;keyå€¼=%s Idx=%d&quot;</span>, key, idx));</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> == tab[idx]) &#123;</span><br><span class="line">        tab[idx] = key;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    tab[idx] = tab[idx] + <span class="string">&quot;-&gt;&quot;</span> + key;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºæµ‹è¯•ç»“æœ</span></span><br><span class="line">System.out.println(JSON.toJSONString(tab));</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ•´ä½“çœ‹èµ·æ¥ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå¤æ‚åº¦ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼›</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²é›†åˆï¼Œè¿™é‡Œåˆå§‹åŒ–äº† 7 ä¸ªã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²ï¼Œæ³¨æ„è¿™é‡Œçš„é•¿åº¦æ˜¯ 8ï¼Œä¹Ÿå°±æ˜¯ 2 çš„ 3 æ¬¡å¹‚ã€‚è¿™æ ·çš„æ•°ç»„é•¿åº¦æ‰ä¼šå‡ºç°ä¸€ä¸ª  <code>0111</code>  é™¤é«˜ä½ä»¥å¤–éƒ½æ˜¯ 1 çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ•£åˆ—ã€‚</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯å¾ªç¯å­˜æ”¾æ•°æ®ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå­—ç¬¦ä¸²åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚ <code>key.hashCode() &amp; (tab.length - 1)</code> ã€‚</li>
<li>åœ¨å­—ç¬¦ä¸²å­˜æ”¾åˆ°æ•°ç»„çš„è¿‡ç¨‹ï¼Œå¦‚æœé‡åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œè¿›è¡Œè¿æ¥æ“ä½œ <code>æ¨¡æ‹Ÿé“¾è¡¨çš„è¿‡ç¨‹</code> ã€‚</li>
<li>æœ€åè¾“å‡ºå­˜æ”¾ç»“æœã€‚</li>
</ol>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">keyå€¼=jlkk Idx=<span class="number">2</span></span><br><span class="line">keyå€¼=lopi Idx=<span class="number">4</span></span><br><span class="line">keyå€¼=å°å‚…å“¥ Idx=<span class="number">7</span></span><br><span class="line">keyå€¼=e4we Idx=<span class="number">5</span></span><br><span class="line">keyå€¼=alpo Idx=<span class="number">2</span></span><br><span class="line">keyå€¼=yhjk Idx=<span class="number">0</span></span><br><span class="line">keyå€¼=plop Idx=<span class="number">5</span></span><br><span class="line">æµ‹è¯•ç»“æœï¼š[<span class="string">&quot;yhjk&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;jlkk-&gt;alpo&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;lopi&quot;</span>,<span class="string">&quot;e4we-&gt;plop&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;å°å‚…å“¥&quot;</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨æµ‹è¯•ç»“æœé¦–å…ˆæ˜¯è®¡ç®—å‡ºæ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„çš„ Idxï¼Œä¹Ÿæœ‰å‡ºç°é‡å¤çš„ä½ç½®ã€‚</li>
<li>æœ€åæ˜¯æµ‹è¯•ç»“æœçš„è¾“å‡ºï¼Œ1ã€3ã€6ï¼Œä½ç½®æ˜¯ç©ºçš„ï¼Œ2ã€5ï¼Œä½ç½®æœ‰ä¸¤ä¸ªå…ƒç´ è¢«é“¾æ¥èµ·æ¥ <code>e4we-&gt;plop</code> ã€‚</li>
<li>è¿™å°±è¾¾åˆ°äº†æˆ‘ä»¬ä¸€ä¸ªæœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå°†ä¸²å…ƒç´ æ•£åˆ—å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œæœ€åé€šè¿‡å­—ç¬¦ä¸²å…ƒç´ çš„ç´¢å¼• ID è¿›è¡Œè·å–å¯¹åº”å­—ç¬¦ä¸²ã€‚è¿™æ ·æ˜¯ HashMap çš„ä¸€ä¸ªæœ€åŸºæœ¬åŸç†ï¼Œæœ‰äº†è¿™ä¸ªåŸºç¡€åé¢å°±ä¼šæ›´å®¹æ˜“ç†è§£ HashMap çš„æºç å®ç°ã€‚</li>
</ul>
<h4 id="12-hashæ•£åˆ—ç¤ºæ„å›¾"><a class="markdownIt-Anchor" href="#12-hashæ•£åˆ—ç¤ºæ„å›¾">#</a> 1.2 Hash æ•£åˆ—ç¤ºæ„å›¾</h4>
<p>å¦‚æœä¸Šé¢çš„æµ‹è¯•ç»“æœä¸èƒ½åœ¨ä½ çš„å¤´è„‘ä¸­å¾ˆå¥½çš„å»ºç«‹å‡ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹ä»¥ä¸‹è¿™å¼ æ•£åˆ—ç¤ºæ„å›¾ï¼Œæ–¹ä¾¿ç†è§£ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-01.png" alt="bugstack.cn Hashæ•£åˆ—ç¤ºæ„å›¾"></p>
<ul>
<li>è¿™å¼ å›¾å°±æ˜¯ä¸Šé¢ä»£ç å®ç°çš„å…¨è¿‡ç¨‹ï¼Œå°†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ é€šè¿‡ Hash è®¡ç®—ç´¢å¼•ä½ç½®ï¼Œå­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚</li>
<li>é»„è‰²çš„ç´¢å¼• ID æ˜¯æ²¡æœ‰å…ƒç´ å­˜æ”¾ã€ç»¿è‰²çš„ç´¢å¼• ID å­˜æ”¾äº†ä¸€ä¸ªå…ƒç´ ã€çº¢è‰²çš„ç´¢å¼• ID å­˜æ”¾äº†ä¸¤ä¸ªå…ƒç´ ã€‚</li>
</ul>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-3-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜13-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-3-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜13-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_1-3 - è¿™ä¸ªç®€å•çš„ hashmap æœ‰å“ªäº›é—®é¢˜) 1.3 è¿™ä¸ªç®€å•çš„ HashMap æœ‰å“ªäº›é—®é¢˜</h4>
<p>ä»¥ä¸Šæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„ HashMapï¼Œæˆ–è€…è¯´è¿˜ç®—ä¸ä¸Š HashMapï¼Œåªèƒ½ç®—åšä¸€ä¸ªæ•£åˆ—æ•°æ®å­˜æ”¾çš„é›å½¢ã€‚ä½†è¿™æ ·çš„ä¸€ä¸ªæ•°æ®ç»“æ„æ”¾åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¼šæœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ</p>
<ol>
<li>è¿™é‡Œæ‰€æœ‰çš„å…ƒç´ å­˜æ”¾éƒ½éœ€è¦è·å–ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼Œè€Œå¦‚æœå…ƒç´ çš„ä½ç½®ä¸å¤Ÿæ•£åˆ—ç¢°æ’ä¸¥é‡ï¼Œé‚£ä¹ˆå°±å¤±å»äº†æ•£åˆ—è¡¨å­˜æ”¾çš„æ„ä¹‰ï¼Œæ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„æ€§èƒ½ã€‚</li>
<li>åœ¨è·å–ç´¢å¼• ID çš„è®¡ç®—å…¬å¼ä¸­ï¼Œéœ€è¦æ•°ç»„é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Œé‚£ä¹ˆæ€ä¹ˆè¿›è¡Œåˆå§‹åŒ–è¿™ä¸ªæ•°ç»„å¤§å°ã€‚</li>
<li>æ•°ç»„è¶Šå°ç¢°æ’çš„è¶Šå¤§ï¼Œæ•°ç»„è¶Šå¤§ç¢°æ’çš„è¶Šå°ï¼Œæ—¶é—´ä¸ç©ºé—´å¦‚ä½•å–èˆã€‚</li>
<li>ç›®å‰å­˜æ”¾ 7 ä¸ªå…ƒç´ ï¼Œå·²ç»æœ‰ä¸¤ä¸ªä½ç½®éƒ½å­˜æ”¾äº† 2 ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆé“¾è¡¨è¶Šæ¥è¶Šé•¿æ€ä¹ˆä¼˜åŒ–ã€‚</li>
<li>éšç€å…ƒç´ çš„ä¸æ–­æ·»åŠ ï¼Œæ•°ç»„é•¿åº¦ä¸è¶³æ‰©å®¹æ—¶ï¼Œæ€ä¹ˆæŠŠåŸæœ‰çš„å…ƒç´ ï¼Œæ‹†åˆ†åˆ°æ–°çš„ä½ç½®ä¸Šå»ã€‚</li>
</ol>
<p>ä»¥ä¸Šè¿™äº›é—®é¢˜å¯ä»¥å½’çº³ä¸ºï¼› <code>æ‰°åŠ¨å‡½æ•°</code> ã€ <code>åˆå§‹åŒ–å®¹é‡</code> ã€ <code>è´Ÿè½½å› å­</code> ã€ <code>æ‰©å®¹æ–¹æ³•</code> ä»¥åŠ <code>é“¾è¡¨å’Œçº¢é»‘æ ‘</code> è½¬æ¢çš„ä½¿ç”¨ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€ä¸ªé—®é¢˜è¿›è¡Œåˆ†æã€‚</p>
<h3 id="2-æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#2-æ‰°åŠ¨å‡½æ•°">#</a> 2. æ‰°åŠ¨å‡½æ•°</h3>
<p>åœ¨ HashMap å­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯ <code>java 8</code>  çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ï¼Œç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="21-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#21-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°">#</a> 2.1 ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°</h4>
<p>ç†è®ºä¸Šæ¥è¯´å­—ç¬¦ä¸²çš„ <code>hashCode</code>  æ˜¯ä¸€ä¸ª int ç±»å‹å€¼ï¼Œé‚£å¯ä»¥ç›´æ¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡äº†ï¼Œä¸”ä¸ä¼šå‡ºç°ç¢°æ’ã€‚ä½†æ˜¯è¿™ä¸ª <code>hashCode</code>  çš„å–å€¼èŒƒå›´æ˜¯ [-2147483648, 2147483647]ï¼Œæœ‰å°†è¿‘ 40 äº¿çš„é•¿åº¦ï¼Œè°ä¹Ÿä¸èƒ½æŠŠæ•°ç»„åˆå§‹åŒ–çš„è¿™ä¹ˆå¤§ï¼Œå†…å­˜ä¹Ÿæ˜¯æ”¾ä¸ä¸‹çš„ã€‚</p>
<p>æˆ‘ä»¬é»˜è®¤åˆå§‹åŒ–çš„ Map å¤§å°æ˜¯ 16 ä¸ªé•¿åº¦  <code>DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4</code> ï¼Œæ‰€ä»¥è·å–çš„ Hash å€¼å¹¶ä¸èƒ½ç›´æ¥ä½œä¸ºä¸‹æ ‡ä½¿ç”¨ï¼Œéœ€è¦ä¸æ•°ç»„é•¿åº¦è¿›è¡Œå–æ¨¡è¿ç®—å¾—åˆ°ä¸€ä¸ªä¸‹æ ‡å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢åšçš„æ•£åˆ—åˆ—å­ã€‚</p>
<p>é‚£ä¹ˆï¼ŒhashMap æºç è¿™é‡Œä¸åªæ˜¯ç›´æ¥è·å–å“ˆå¸Œå€¼ï¼Œè¿˜è¿›è¡Œäº†ä¸€æ¬¡æ‰°åŠ¨è®¡ç®—ï¼Œ <code>(h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</code> ã€‚æŠŠå“ˆå¸Œå€¼å³ç§» 16 ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜¯è‡ªå·±é•¿åº¦çš„ä¸€åŠï¼Œä¹‹åä¸åŸå“ˆå¸Œå€¼åšå¼‚æˆ–è¿ç®—ï¼Œè¿™æ ·å°±æ··åˆäº†åŸå“ˆå¸Œå€¼ä¸­çš„é«˜ä½å’Œä½ä½ï¼Œå¢å¤§äº†<strong>éšæœºæ€§</strong>ã€‚è®¡ç®—æ–¹å¼å¦‚ä¸‹å›¾ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-02.png" alt="bugstack.cn æ‰°åŠ¨å‡½æ•°"></p>
<ul>
<li>è¯´ç™½äº†ï¼Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°å°±æ˜¯ä¸ºäº†å¢åŠ éšæœºæ€§ï¼Œè®©æ•°æ®å…ƒç´ æ›´åŠ å‡è¡¡çš„æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’ã€‚</li>
</ul>
<h4 id="22-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#22-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°">#</a> 2.2 å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°</h4>
<p>ä»ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼Œæ‰°åŠ¨å‡½æ•°ä½¿ç”¨äº†å“ˆå¸Œå€¼çš„é«˜åŠåŒºå’Œä½åŠåŒºåšå¼‚æˆ–ï¼Œæ··åˆåŸå§‹å“ˆå¸Œç çš„é«˜ä½å’Œä½ä½ï¼Œä»¥æ­¤æ¥åŠ å¤§ä½ä½åŒºçš„éšæœºæ€§ã€‚</p>
<p>ä½†çœ‹ä¸åˆ°å®éªŒæ•°æ®çš„è¯ï¼Œè¿™ç»ˆç©¶æ˜¯ä¸€æ®µç†è®ºï¼Œå…·ä½“è¿™æ®µå“ˆå¸Œå€¼çœŸçš„è¢«å¢åŠ äº†éšæœºæ€§æ²¡æœ‰ï¼Œå¹¶ä¸çŸ¥é“ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åšä¸€ä¸ªå®éªŒï¼Œè¿™ä¸ªå®éªŒæ˜¯è¿™æ ·åšï¼›</p>
<ol>
<li>é€‰å– 10 ä¸‡ä¸ªå•è¯è¯åº“</li>
<li>å®šä¹‰ 128 ä½é•¿åº¦çš„æ•°ç»„æ ¼å­</li>
<li>åˆ†åˆ«è®¡ç®—åœ¨æ‰°åŠ¨å’Œä¸æ‰°åŠ¨ä¸‹ï¼Œ10 ä¸‡å•è¯çš„ä¸‹æ ‡åˆ†é…åˆ° 128 ä¸ªæ ¼å­çš„æ•°é‡</li>
<li>ç»Ÿè®¡å„ä¸ªæ ¼å­æ•°é‡ï¼Œç”Ÿæˆæ³¢åŠ¨æ›²çº¿ã€‚å¦‚æœæ‰°åŠ¨å‡½æ•°ä¸‹çš„æ³¢åŠ¨æ›²çº¿ç›¸å¯¹æ›´å¹³ç¨³ï¼Œé‚£ä¹ˆè¯æ˜æ‰°åŠ¨å‡½æ•°æœ‰æ•ˆæœã€‚</li>
</ol>
<h5 id="221-æ‰°åŠ¨ä»£ç æµ‹è¯•"><a class="markdownIt-Anchor" href="#221-æ‰°åŠ¨ä»£ç æµ‹è¯•">#</a> 2.2.1 æ‰°åŠ¨ä»£ç æµ‹è¯•</h5>
<p><strong>æ‰°åŠ¨å‡½æ•°å¯¹æ¯”æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Disturb</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">disturbHashIdx</span><span class="params">(String key, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (size - <span class="number">1</span>) &amp; (key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hashIdx</span><span class="params">(String key, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (size - <span class="number">1</span>) &amp; key.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>disturbHashIdx</code>  æ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—</li>
<li><code>hashIdx</code>  éæ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—</li>
</ul>
<p><strong>å•å…ƒæµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10ä¸‡å•è¯å·²ç»åˆå§‹åŒ–åˆ°wordsä¸­</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_disturb</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> Disturb.disturbHashIdx(word, <span class="number">128</span>);</span><br><span class="line">        <span class="comment">// ä¸ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line">        <span class="comment">// int idx = Disturb.hashIdx(word, 128);</span></span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(idx)) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> map.get(idx);</span><br><span class="line">            map.put(idx, ++integer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(idx, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(map.values());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šåˆ†åˆ«ç»Ÿè®¡ä¸¤ç§å‡½æ•°ä¸‹çš„ä¸‹æ ‡å€¼åˆ†é…ï¼Œæœ€ç»ˆå°†ç»Ÿè®¡ç»“æœæ”¾åˆ° excel ä¸­ç”Ÿæˆå›¾è¡¨ã€‚</p>
<h5 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-2-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨222-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-2-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨222-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2-2-2 - æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨) 2.2.2 æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨</h5>
<p>ä»¥ä¸Šçš„ä¸¤å¼ å›¾ï¼Œåˆ†åˆ«æ˜¯æ²¡æœ‰ä½¿ç”¨æ‰°åŠ¨å‡½æ•°å’Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°çš„ï¼Œä¸‹æ ‡åˆ†é…ã€‚å®éªŒæ•°æ®ï¼›</p>
<ol>
<li>10 ä¸‡ä¸ªä¸é‡å¤çš„å•è¯</li>
<li>128 ä¸ªæ ¼å­ï¼Œç›¸å½“äº 128 é•¿åº¦çš„æ•°ç»„</li>
</ol>
<p><strong>æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-03.png" alt="bugstack.cn æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°"></p>
<p><strong>ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-04.png" alt="bugstack.cn ä½¿ç”¨æ‰°åŠ¨å‡½æ•°"></p>
<ul>
<li>ä»è¿™ä¸¤ç§çš„å¯¹æ¯”å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°åï¼Œæ•°æ®åˆ†é…çš„æ›´åŠ å‡åŒ€äº†ã€‚</li>
<li>æ•°æ®åˆ†é…å‡åŒ€ï¼Œä¹Ÿå°±æ˜¯æ•£åˆ—çš„æ•ˆæœæ›´å¥½ï¼Œå‡å°‘äº† hash çš„ç¢°æ’ï¼Œè®©æ•°æ®å­˜æ”¾å’Œè·å–çš„æ•ˆç‡æ›´ä½³ã€‚</li>
</ul>
<h3 id="3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­">#</a> 3. åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¨è®ºä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œä»æˆ‘ä»¬æ¨¡ä»¿ HashMap çš„ä¾‹å­ä¸­ä»¥åŠ HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°é‡Œï¼Œéƒ½å¯ä»¥çŸ¥é“ï¼Œæ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª 2 çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰ 2 çš„å¹‚æ¬¡æ–¹åœ¨å‡ 1 çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç° <code>01111</code>  è¿™æ ·çš„å€¼ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ– HashMap çš„æ—¶å€™ï¼Œå¦‚æœä¼ ä¸€ä¸ª 17 ä¸ªçš„å€¼ <code>new HashMap&lt;&gt;(17);</code> ï¼Œå®ƒä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<h4 id="31-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼"><a class="markdownIt-Anchor" href="#31-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼">#</a> 3.1 å¯»æ‰¾ 2 çš„å¹‚æ¬¡æ–¹æœ€å°å€¼</h4>
<p>åœ¨ HashMap çš„åˆå§‹åŒ–ä¸­ï¼Œæœ‰è¿™æ ·ä¸€æ®µæ–¹æ³•ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="built_in">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é˜ˆå€¼ <code>threshold</code> ï¼Œé€šè¿‡æ–¹æ³• <code>tableSizeFor</code>  è¿›è¡Œè®¡ç®—ï¼Œæ˜¯æ ¹æ®åˆå§‹åŒ–æ¥è®¡ç®—çš„ã€‚</li>
<li>è¿™ä¸ªæ–¹æ³•ä¹Ÿå°±æ˜¯è¦å¯»æ‰¾æ¯”åˆå§‹å€¼å¤§çš„ï¼Œæœ€å°çš„é‚£ä¸ª 2 è¿›åˆ¶æ•°å€¼ã€‚æ¯”å¦‚ä¼ äº† 17ï¼Œæˆ‘åº”è¯¥æ‰¾åˆ°çš„æ˜¯ 32ï¼ˆ2 çš„ 4 æ¬¡å¹‚æ˜¯ 16&lt;17, æ‰€ä»¥æ‰¾åˆ° 2 çš„ 5 æ¬¡å¹‚ 32ï¼‰ã€‚</li>
</ul>
<p>è®¡ç®—é˜ˆå€¼å¤§å°çš„æ–¹æ³•ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>MAXIMUM_CAPACITY = 1 &lt;&lt; 30ï¼Œè¿™ä¸ªæ˜¯ä¸´ç•ŒèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„ Map é›†åˆã€‚</li>
<li>ä¹ä¸€çœ‹å¯èƒ½æœ‰ç‚¹æ™•ğŸ˜µæ€ä¹ˆéƒ½åœ¨å‘å³ç§»ä½ 1ã€2ã€4ã€8ã€16ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†æŠŠäºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½å¡«ä¸Š 1ï¼Œå½“äºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½æ˜¯ 1 ä»¥åï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ 2 çš„å¹‚æ¬¡æ–¹å‡ 1 äº†ï¼Œæœ€åæŠŠç»“æœåŠ  1 å†è¿”å›å³å¯ã€‚</li>
</ul>
<p>é‚£è¿™é‡Œæˆ‘ä»¬æŠŠ 17 è¿™æ ·ä¸€ä¸ªåˆå§‹åŒ–è®¡ç®—é˜ˆå€¼çš„è¿‡ç¨‹ï¼Œç”¨å›¾å±•ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿ç†è§£ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-05.png" alt="bugstack.cn è®¡ç®—é˜ˆå€¼"></p>
<h4 id="32-è´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#32-è´Ÿè½½å› å­">#</a> 3.2 è´Ÿè½½å› å­</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;  </span><br></pre></td></tr></table></figure>
<p><strong>è´Ÿè½½å› å­æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong></p>
<p>è´Ÿè½½å› å­ï¼Œå¯ä»¥ç†è§£æˆä¸€è¾†è½¦å¯æ‰¿é‡é‡é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼ŒæŠŠè´§æ”¾åˆ°æ–°çš„è½¦ä¸Šã€‚</p>
<p>é‚£ä¹ˆåœ¨ HashMap ä¸­ï¼Œè´Ÿè½½å› å­å†³å®šäº†æ•°æ®é‡å¤šå°‘äº†ä»¥åè¿›è¡Œæ‰©å®¹ã€‚<em>è¿™é‡Œè¦æåˆ°ä¸Šé¢åšçš„ HashMap ä¾‹å­ï¼Œæˆ‘ä»¬å‡†å¤‡äº† 7 ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æœ€åè¿˜æœ‰ 3 ä¸ªä½ç½®ç©ºä½™ï¼Œ2 ä¸ªä½ç½®å­˜æ”¾äº† 2 ä¸ªå…ƒç´ ã€‚</em> æ‰€ä»¥å¯èƒ½å³ä½¿ä½ æ•°æ®æ¯”æ•°ç»„å®¹é‡å¤§æ—¶ä¹Ÿæ˜¯ä¸ä¸€å®šèƒ½æ­£æ­£å¥½å¥½çš„æŠŠæ•°ç»„å æ»¡çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›å°æ ‡ä½ç½®å‡ºç°äº†å¤§é‡çš„ç¢°æ’ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”¨é“¾è¡¨å­˜æ”¾ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¤±å»äº† Map æ•°ç»„çš„æ€§èƒ½ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆç†çš„å¤§å°ä¸‹è¿›è¡Œæ‰©å®¹ï¼Œé»˜è®¤å€¼ 0.75 å°±æ˜¯è¯´å½“é˜ˆå€¼å®¹é‡å äº† 3/4 æ—¶èµ¶ç´§æ‰©å®¹ï¼Œå‡å°‘ Hash ç¢°æ’ã€‚</p>
<p>åŒæ—¶ 0.75 æ˜¯ä¸€ä¸ªé»˜è®¤æ„é€ å€¼ï¼Œåœ¨åˆ›å»º HashMap ä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨æ›´å¤šçš„ç©ºé—´æ¢å–æ—¶é—´ï¼Œå¯ä»¥æŠŠè´Ÿè½½å› å­è°ƒçš„æ›´å°ä¸€äº›ï¼Œå‡å°‘ç¢°æ’ã€‚</p>
<h3 id="4-æ‰©å®¹å…ƒç´ æ‹†åˆ†"><a class="markdownIt-Anchor" href="#4-æ‰©å®¹å…ƒç´ æ‹†åˆ†">#</a> 4. æ‰©å®¹å…ƒç´ æ‹†åˆ†</h3>
<p>ä¸ºä»€ä¹ˆæ‰©å®¹ï¼Œå› ä¸ºæ•°ç»„é•¿åº¦ä¸è¶³äº†ã€‚é‚£æ‰©å®¹æœ€ç›´æ¥çš„é—®é¢˜ï¼Œå°±æ˜¯éœ€è¦æŠŠå…ƒç´ æ‹†åˆ†åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚æ‹†åˆ†å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼ŒåŸ jdk1.7 ä¸­ä¼šéœ€è¦é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œä½†æ˜¯åˆ° jdk1.8 ä¸­å·²ç»è¿›è¡Œä¼˜åŒ–ï¼Œä¸å†éœ€è¦é‡æ–°è®¡ç®—ï¼Œæå‡äº†æ‹†åˆ†çš„æ€§èƒ½ï¼Œè®¾è®¡çš„è¿˜æ˜¯éå¸¸å·§å¦™çš„ã€‚</p>
<h4 id="41-æµ‹è¯•æ•°æ®"><a class="markdownIt-Anchor" href="#41-æµ‹è¯•æ•°æ®">#</a> 4.1 æµ‹è¯•æ•°æ®</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    list.add(<span class="string">&quot;jlkk&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;lopi&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;jmdw&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;e4we&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;io98&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;nmhg&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;vfg6&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;gfrt&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;alpo&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;vfbh&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;bnhj&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;zuio&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;iu8e&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;yhjk&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;plop&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;dd0p&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String key : list) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å­—ç¬¦ä¸²ï¼š&quot;</span> + key + <span class="string">&quot; \tIdx(16)ï¼š&quot;</span> + ((<span class="number">16</span> - <span class="number">1</span>) &amp; hash) + <span class="string">&quot; \tBitå€¼ï¼š&quot;</span> + Integer.toBinaryString(hash) + <span class="string">&quot; - &quot;</span> + Integer.toBinaryString(hash &amp; <span class="number">16</span>) + <span class="string">&quot; \t\tIdx(32)ï¼š&quot;</span> + ((</span><br><span class="line">        System.out.println(Integer.toBinaryString(key.hashCode()) +<span class="string">&quot; &quot;</span>+ Integer.toBinaryString(hash) + <span class="string">&quot; &quot;</span> + Integer.toBinaryString((<span class="number">32</span> - <span class="number">1</span>) &amp; hash));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ä¸²ï¼šjlkk 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">3</span> 	Bitå€¼ï¼š<span class="number">1100011101001000010011</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">19</span></span><br><span class="line"><span class="number">1100011101001000100010</span> <span class="number">1100011101001000010011</span> <span class="number">10011</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šlopi 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">14</span> 	Bitå€¼ï¼š<span class="number">1100101100011010001110</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">14</span></span><br><span class="line"><span class="number">1100101100011010111100</span> <span class="number">1100101100011010001110</span> <span class="number">1110</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šjmdw 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">7</span> 	Bitå€¼ï¼š<span class="number">1100011101010100100111</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">7</span></span><br><span class="line"><span class="number">1100011101010100010110</span> <span class="number">1100011101010100100111</span> <span class="number">111</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼še4we 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">3</span> 	Bitå€¼ï¼š<span class="number">1011101011101101010011</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">19</span></span><br><span class="line"><span class="number">1011101011101101111101</span> <span class="number">1011101011101101010011</span> <span class="number">10011</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šio98 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">4</span> 	Bitå€¼ï¼š<span class="number">1100010110001011110100</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">20</span></span><br><span class="line"><span class="number">1100010110001011000101</span> <span class="number">1100010110001011110100</span> <span class="number">10100</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šnmhg 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">13</span> 	Bitå€¼ï¼š<span class="number">1100111010011011001101</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">13</span></span><br><span class="line"><span class="number">1100111010011011111110</span> <span class="number">1100111010011011001101</span> <span class="number">1101</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼švfg6 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1101110010111101101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1101110010111101011111</span> <span class="number">1101110010111101101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šgfrt 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">1</span> 	Bitå€¼ï¼š<span class="number">1100000101111101010001</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">17</span></span><br><span class="line"><span class="number">1100000101111101100001</span> <span class="number">1100000101111101010001</span> <span class="number">10001</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šalpo 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">7</span> 	Bitå€¼ï¼š<span class="number">1011011011101101000111</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">7</span></span><br><span class="line"><span class="number">1011011011101101101010</span> <span class="number">1011011011101101000111</span> <span class="number">111</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼švfbh 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">1</span> 	Bitå€¼ï¼š<span class="number">1101110010111011000001</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">1</span></span><br><span class="line"><span class="number">1101110010111011110110</span> <span class="number">1101110010111011000001</span> <span class="number">1</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šbnhj 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">0</span> 	Bitå€¼ï¼š<span class="number">1011100011011001100000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">0</span></span><br><span class="line"><span class="number">1011100011011001001110</span> <span class="number">1011100011011001100000</span> <span class="number">0</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šzuio 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1110010011100110011000</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">24</span></span><br><span class="line"><span class="number">1110010011100110100001</span> <span class="number">1110010011100110011000</span> <span class="number">11000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šiu8e 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1100010111100101101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1100010111100101011001</span> <span class="number">1100010111100101101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šyhjk 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1110001001010010101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1110001001010010010000</span> <span class="number">1110001001010010101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šplop 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">9</span> 	Bitå€¼ï¼š<span class="number">1101001000110011101001</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">9</span></span><br><span class="line"><span class="number">1101001000110011011101</span> <span class="number">1101001000110011101001</span> <span class="number">1001</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šdd0p 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">14</span> 	Bitå€¼ï¼š<span class="number">1011101111001011101110</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">14</span></span><br><span class="line"><span class="number">1011101111001011000000</span> <span class="number">1011101111001011101110</span> <span class="number">1110</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™é‡Œæˆ‘ä»¬éšæœºä½¿ç”¨ä¸€äº›å­—ç¬¦ä¸²è®¡ç®—ä»–ä»¬åˆ†åˆ«åœ¨ 16 ä½é•¿åº¦å’Œ 32 ä½é•¿åº¦æ•°ç»„ä¸‹çš„ç´¢å¼•åˆ†é…æƒ…å†µï¼Œçœ‹å“ªäº›æ•°æ®è¢«é‡æ–°è·¯ç”±åˆ°äº†æ–°çš„åœ°å€ã€‚</li>
<li>åŒæ—¶ï¼Œè¿™é‡Œè¿˜å¯ä»¥è§‚å¯ŸğŸ•µå‡ºä¸€ä¸ªéå¸¸é‡è¦çš„ä¿¡æ¯ï¼ŒåŸå“ˆå¸Œå€¼ä¸æ‰©å®¹æ–°å¢å‡ºæ¥çš„é•¿åº¦ 16ï¼Œè¿›è¡Œ &amp; è¿ç®—ï¼Œå¦‚æœå€¼ç­‰äº 0ï¼Œåˆ™ä¸‹æ ‡ä½ç½®ä¸å˜ã€‚å¦‚æœä¸ä¸º 0ï¼Œé‚£ä¹ˆæ–°çš„ä½ç½®åˆ™æ˜¯åŸæ¥ä½ç½®ä¸ŠåŠ  16ã€‚ï½›è¿™ä¸ªåœ°æ–¹éœ€è¦å¥½å¥½ç†è§£ä¸‹ï¼Œå¹¶çœ‹å®éªŒæ•°æ®ï½</li>
<li>è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸éœ€è¦åœ¨é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„å“ˆå¸Œå€¼äº†ã€‚</li>
</ul>
<p>4.2 æ•°æ®è¿ç§»</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-06.png" alt="bugstack.cn æ•°æ®è¿ç§»"></p>
<ul>
<li>è¿™å¼ å›¾å°±æ˜¯åŸ 16 ä½é•¿åº¦æ•°ç»„å…ƒç´ ï¼Œå‘ 32 ä½æ‰©å®¹åæ•°ç»„è½¬ç§»çš„è¿‡ç¨‹ã€‚</li>
<li>å¯¹ 31 å–æ¨¡ä¿ç•™ä½ 5 ä½ï¼Œå¯¹ 15 å–æ¨¡ä¿ç•™ä½ 4 ä½ï¼Œä¸¤è€…çš„å·®å¼‚å°±åœ¨äºç¬¬ 5 ä½æ˜¯å¦ä¸º 1ï¼Œæ˜¯çš„è¯åˆ™éœ€è¦åŠ ä¸Šå¢é‡ï¼Œä¸º 0 çš„è¯åˆ™ä¸éœ€è¦æ”¹å˜</li>
<li>å…¶ä¸­é»„è‰²åŒºåŸŸå…ƒç´  <code>zuio</code>  å› è®¡ç®—ç»“æœ  <code>hash &amp; oldCap</code>  ä½ä½ç¬¬ 5 ä½ä¸º 1ï¼Œåˆ™è¢«è¿ç§»åˆ°ä¸‹æ ‡ä½ç½® 24ã€‚</li>
<li>åŒæ—¶è¿˜æ˜¯ç”¨é‡æ–°è®¡ç®—å“ˆå¸Œå€¼çš„æ–¹å¼éªŒè¯äº†ï¼Œç¡®å®åˆ†é…åˆ° 24 çš„ä½ç½®ï¼Œå› ä¸ºè¿™æ˜¯åœ¨äºŒè¿›åˆ¶è®¡ç®—ä¸­è¡¥ 1 çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸Šé¢ç®€åŒ–çš„æ–¹å¼ç¡®å®šå“ˆå¸Œå€¼çš„ä½ç½®ã€‚</li>
</ul>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆ e.hash &amp; oldCap == 0 ä¸ºä»€ä¹ˆå¯ä»¥åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦éœ€è¦ç§»ä½ï¼Œè€Œä¸æ˜¯å†æ¬¡è®¡ç®— hash;</p>
<p>ä»ç„¶æ˜¯åŸå§‹é•¿åº¦ä¸º 16 ä¸¾ä¾‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">old:</span><br><span class="line"><span class="number">10</span>: <span class="number">0000</span> <span class="number">1010</span></span><br><span class="line"><span class="number">15</span>: <span class="number">0000</span> <span class="number">1111</span></span><br><span class="line">&amp;: <span class="number">0000</span> <span class="number">1010</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span>:</span><br><span class="line"><span class="number">10</span>: <span class="number">0000</span> <span class="number">1010</span></span><br><span class="line"><span class="number">31</span>: <span class="number">0001</span> <span class="number">1111</span></span><br><span class="line">&amp;: <span class="number">0000</span> <span class="number">1010</span> </span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥å¾ˆè½»æ˜“çš„çœ‹å‡ºï¼Œä¸¤æ¬¡ indexFor () çš„å·®åˆ«åªæ˜¯ç¬¬äºŒæ¬¡å‚ä¸ä½äºæ¯”ç¬¬ä¸€æ¬¡å·¦è¾¹æœ‰ä¸€ä½ä» 0 å˜ä¸º 1, è€Œè¿™ä¸ªå˜åŒ–çš„ 1 åˆšå¥½æ˜¯ oldCap, é‚£ä¹ˆåªéœ€è¦åˆ¤æ–­åŸ key çš„ hash è¿™ä¸ªä½ä¸Šæ˜¯å¦ä¸º 1: è‹¥æ˜¯ 1, åˆ™éœ€è¦ç§»åŠ¨è‡³ oldCap + i çš„æ§½ä½ï¼Œè‹¥ä¸º 0, åˆ™ä¸éœ€è¦ç§»åŠ¨ï¼›</p>
<p>è¿™ä¹Ÿæ˜¯ HashMap çš„é•¿åº¦å¿…é¡»ä¿è¯æ˜¯ 2 çš„å¹‚æ¬¡æ–¹çš„åŸå› ï¼Œæ­£å› ä¸ºè¿™ç§ç¯ç¯ç›¸æ‰£çš„è®¾è®¡ï¼ŒHashMap.loadFactor çš„é€‰å€¼æ˜¯ 3/4 å°±èƒ½ç†è§£äº†ï¼Œtable.length * 3/4 å¯ä»¥è¢«ä¼˜åŒ–ä¸º ((table.length&gt;&gt; 2) &lt;&lt; 2) - (table.length &gt;&gt; 2) == table.length - (table.length &gt;&gt; 2), JAVA çš„ä½è¿ç®—æ¯”ä¹˜é™¤çš„æ•ˆç‡æ›´é«˜ï¼Œæ‰€ä»¥å– 3/4 åœ¨ä¿è¯ hash å†²çªå°çš„æƒ…å†µä¸‹å…¼é¡¾äº†æ•ˆç‡ï¼›</p>
<h1 id="é¢è¯•é¢˜æ€»ç»“"><a class="markdownIt-Anchor" href="#é¢è¯•é¢˜æ€»ç»“">#</a> é¢è¯•é¢˜æ€»ç»“</h1>
<h1 id="question"><a class="markdownIt-Anchor" href="#question">#</a> Question</h1>
<h4 id="1ä¸ºä»€ä¹ˆhashmapå“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å–-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#1ä¸ºä»€ä¹ˆhashmapå“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å–-2-çš„å¹‚æ¬¡æ–¹">#</a> 1. ä¸ºä»€ä¹ˆ HashMap å“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å– 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<h6 id="æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª2çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦å› ä¸ºåªæœ‰2çš„å¹‚æ¬¡æ–¹åœ¨å‡1çš„æ—¶å€™æ‰ä¼šå‡ºç°01111è¿™æ ·çš„å€¼"><a class="markdownIt-Anchor" href="#æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª2çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦å› ä¸ºåªæœ‰2çš„å¹‚æ¬¡æ–¹åœ¨å‡1çš„æ—¶å€™æ‰ä¼šå‡ºç°01111è¿™æ ·çš„å€¼">#</a> æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª 2 çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰ 2 çš„å¹‚æ¬¡æ–¹åœ¨å‡ 1 çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç° 01111 è¿™æ ·çš„å€¼ã€‚</h6>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡è·å–å­˜å‚¨å†…å®¹çš„hashcodeï¼Œå¹¶ä¸”å¯¹é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹çš„æ•°ç»„é•¿åº¦-1è¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å– <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œè¿™æ˜¯å› ä¸ºå¯¹äºå¤§å¤šæ•°çš„è´¨æ•°æ¥è¯´ï¼Œå®ƒä»¬çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰å°‘æ•°ä½æ˜¯ä¸º <span class="number">1</span>ã€‚å¦‚æœä½¿ç”¨ä¸€ä¸ªä¸æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹çš„æ•°ç»„é•¿åº¦ï¼Œé‚£ä¹ˆå½“å…ƒç´ çš„å“ˆå¸Œæ˜ å°„åˆ°ç´¢å¼•æ—¶ï¼Œå°±ä¼šå‡ºç°æŸäº›ç´¢å¼•æ°¸è¿œæ— æ³•è¢«è®¿é—®åˆ°çš„æƒ…å†µï¼Œè¿™å°±æµªè´¹äº†å“ˆå¸Œè¡¨çš„ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åœ¨ä¸€ä¸ªå¤§å°ä¸º <span class="number">5</span> çš„æ•°ç»„ä¸­æ’å…¥ <span class="number">10</span> ä¸ªå…ƒç´  &#123;a,b,c,d,e,f,g,h,i,j&#125;ï¼Œè€Œå“ˆå¸Œå‡½æ•°å°†ä»–ä»¬ä¾æ¬¡æ˜ å°„åˆ°ä¸‹æ ‡ä½ç½®ï¼š[<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸‰ä¸ªä¸‹æ ‡ï¼ˆ<span class="number">5</span>ã€<span class="number">6</span>ã€<span class="number">7</span>ï¼‰å§‹ç»ˆæ²¡æœ‰è¢«æ˜ å°„åˆ°ï¼Œå®Œå…¨æµªè´¹äº†è¿™å‡ ä¸ªä¸‹æ ‡çš„å­˜å‚¨ç©ºé—´ã€‚ä½†å¦‚æœæ•°ç»„é•¿åº¦ä¸º <span class="number">8</span>ï¼Œé‚£ä¹ˆä¸Šè¿°å…ƒç´ çš„å“ˆå¸Œå€¼æŒ‰ç…§ä¸Šé¢çš„æ˜ å°„è§„åˆ™å¯ä»¥å¾—åˆ°çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] % <span class="number">8</span> = [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]ï¼Œä¸ä¼šå‡ºç°ä»»ä½•ä¸‹æ ‡è¢«æµªè´¹çš„æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå°†æ•°ç»„é•¿åº¦æ”¹ä¸º <span class="number">7</span>ï¼Œé‚£ä¹ˆä¸Šè¿°å…ƒç´ çš„å“ˆå¸Œå€¼æŒ‰ç…§ä¸Šé¢çš„æ˜ å°„è§„åˆ™å¯ä»¥å¾—åˆ°çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] % <span class="number">7</span> = [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç´¢å¼•ä¸º <span class="number">5</span>ã€<span class="number">6</span> çš„ç©ºé—´ä»ç„¶è¢«æµªè´¹äº†ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†é¿å…åœ¨å“ˆå¸Œè¡¨ä¸­æµªè´¹å­˜å‚¨ç©ºé—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šé€‰æ‹©ä½¿ç”¨ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ã€‚è¿™æ ·ï¼Œåœ¨è®¡ç®—å…ƒç´ çš„ä½ç½®æ—¶ï¼Œåªéœ€è¦å¯¹å“ˆå¸Œç è¿›è¡Œä½è¿ç®—å³å¯ï¼Œä¸éœ€è¦è¿›è¡Œé™¤æ³•ç­‰å¤æ‚çš„è®¡ç®—ã€‚åŒæ—¶ï¼Œç”±äº <span class="number">2</span> çš„å¹‚æ¬¡æ–¹æ»¡è¶³ <span class="number">2</span>^n2*n*ï¼Œæ‰€ä»¥ç”¨ä½è¿ç®—æ¥ä»£æ›¿é™¤æ³•æˆ–å–æ¨¡æ“ä½œä¹Ÿèƒ½å¤Ÿæé«˜è¿è¡Œæ•ˆç‡ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="2hashmapæ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#2hashmapæ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯-2-çš„å¹‚æ¬¡æ–¹">#</a> 2.HashMap æ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Java ä¸­ï¼Œå“ˆå¸Œè¡¨çš„é•¿åº¦æ€»æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ã€‚è¿™æ˜¯é€šè¿‡ HashMap ç±»ä¸­çš„ä¸€ä¸ªåä¸º `tableSizeFor(<span class="type">int</span> cap)` çš„é™æ€æ–¹æ³•æ¥å®ç°çš„ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªæ–¹æ³•ä¼šé¦–å…ˆå°†ä¼ å…¥çš„å‚æ•°å‡å» <span class="number">1</span>ï¼Œç„¶åå°†ç»“æœå³ç§»ä¸€ä½ï¼Œåœ¨è¿™ä¸ªå€¼ä¸ŠåŠ  <span class="number">1</span>ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§äºç­‰äºåŸå§‹å‚æ•°ä¸”æœ€æ¥è¿‘åŸå§‹å‚æ•°çš„ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ <span class="number">7</span>ï¼Œåˆ™æŒ‰ç…§ä¸Šè¿°ç®—æ³•å¯ä»¥å¾—åˆ° <span class="number">8</span>ï¼š(((<span class="number">7</span> - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>) + <span class="number">1</span>) = ((<span class="number">0110</span>)_2 &gt;&gt;&gt; <span class="number">1</span> + <span class="number">1</span>) = (<span class="number">0011</span>)_2 + (<span class="number">0001</span>)_2 = (<span class="number">0100</span>)_2 = <span class="number">8</span>(((<span class="number">7</span>âˆ’<span class="number">1</span>)&gt;&gt;&gt;<span class="number">1</span>)+<span class="number">1</span>)=((<span class="number">0110</span>)<span class="number">2</span>&gt;&gt;&gt;<span class="number">1</span>+<span class="number">1</span>)=(<span class="number">0011</span>)<span class="number">2</span>+(<span class="number">0001</span>)<span class="number">2</span>=(<span class="number">0100</span>)<span class="number">2</span>=<span class="number">8</span>ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨æ—¶ï¼Œåªéœ€è¦å°†åˆå§‹å®¹é‡è®¾ç½®ä¸ºéœ€è¦å­˜å‚¨çš„å…ƒç´ æ•°ç›®é™¤ä»¥è´Ÿè½½å› å­ï¼ˆload factorï¼‰ï¼Œç„¶åè°ƒç”¨ `tableSizeFor` æ–¹æ³•è¿›è¡Œå¤„ç†å³å¯ã€‚è¿™æ ·å°±èƒ½å¤Ÿä¿è¯å“ˆå¸Œè¡¨çš„é•¿åº¦å§‹ç»ˆæ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œå¹¶è¾¾åˆ°è¾ƒå¥½çš„æ€§èƒ½å’Œç©ºé—´åˆ©ç”¨ç‡ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™ç§æ–¹å¼ç¡®å®å¯ä»¥ä¿è¯å“ˆå¸Œè¡¨çš„é•¿åº¦æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿå¯èƒ½ä¼šå‡ºç°å“ˆå¸Œå†²çªçš„æƒ…å†µã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å“ˆå¸Œå‡½æ•°ã€è´Ÿè½½å› å­ç­‰å‚æ•°æ¥é¿å…å“ˆå¸Œå†²çªï¼Œå¹¶æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="3åœ¨hashmapå­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼è¿™æ˜¯java-8çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ"><a class="markdownIt-Anchor" href="#3åœ¨hashmapå­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼è¿™æ˜¯java-8çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ">#</a> 3. åœ¨ HashMap å­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯ java 8 çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ï¼Œç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span>&#123;</span><br><span class="line">	<span class="type">int</span> h;</span><br><span class="line">	<span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashcode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4hashä¸ºä»€ä¹ˆç”¨31è®¡ç®—"><a class="markdownIt-Anchor" href="#4hashä¸ºä»€ä¹ˆç”¨31è®¡ç®—">#</a> 4.Hash ä¸ºä»€ä¹ˆç”¨ 31 è®¡ç®—ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	ä½¿ç”¨ <span class="number">31</span> è¿™ä¸ªç³»æ•°çš„åŸå› æ˜¯å› ä¸ºå®ƒæ—¢æ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œåˆå¯ä»¥é€šè¿‡ç§»ä½å’Œå‡æ³•ç­‰ç®€å•çš„è¿ç®—æ¥å®ç°ä¹˜æ³•ã€‚åŒæ—¶ï¼Œç”±äº <span class="number">31</span> åœ¨äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä¸ªéé›¶çš„æ¯”ç‰¹ä½ï¼Œå› æ­¤ç”¨ <span class="number">31</span> è¿›è¡Œä¹˜æ³•ç›¸å½“äºè¿›è¡Œäº†ä½è¿ç®—å’ŒåŠ æ³•çš„ç»„åˆï¼Œè¿™æ ·ä¸ä»…èƒ½å¤Ÿä¿è¯é«˜æ•ˆè¿ç®—ï¼Œè¿˜èƒ½å¤Ÿé¿å…å“ˆå¸Œå†²çªã€‚</span><br><span class="line">	</span><br><span class="line"><span class="number">31</span>å…·æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š</span><br><span class="line">	<span class="number">1.</span>å°è´¨æ•°ï¼š<span class="number">31</span> æ˜¯ä¸€ä¸ªè¾ƒå°çš„è´¨æ•°ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç”¨æ¥ä¹˜ä»¥é”®çš„å“ˆå¸Œç ï¼Œä½¿å¾—ç»“æœä¸ä¼šå¤ªå¤§ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ç›¸å¯¹äºå…¶ä»–çš„è´¨æ•°ï¼Œ<span class="number">31</span> æ›´æ˜“äºè¢« CPU ç¼“å­˜ï¼Œè¿™ä¹Ÿæœ‰åŠ©äºæå‡å“ˆå¸Œè¡¨çš„æŸ¥è¯¢é€Ÿåº¦ã€‚</span><br><span class="line">	<span class="number">2.</span>å¯é€†æ€§ï¼šå› ä¸º <span class="number">31</span> æ˜¯è´¨æ•°ä¸”æ¯”è¾ƒå°ï¼Œæ‰€ä»¥åªè¦å“ˆå¸Œè¡¨çš„å¤§å°è¶³å¤Ÿå¤§ï¼Œåœ¨ä¹˜æ³•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®æº¢å‡ºæ˜¯ä¸ä¼šå½±å“å“ˆå¸Œç»“æœçš„ã€‚è€Œä¸”ï¼Œ<span class="number">31</span> çš„é€†å…ƒ <span class="number">0x9e3779b1</span> æ˜¯ä¸€ä¸ªå›ºå®šçš„å¸¸é‡ï¼Œä¹Ÿå¾ˆå®¹æ˜“è®¡ç®—ï¼Œè¿™æœ‰åŠ©äºåœ¨éœ€è¦æ¢å¤å“ˆå¸Œç æ—¶è¿›è¡Œé€†è¿ç®—ã€‚</span><br><span class="line"></span><br><span class="line">	åœ¨å®ç°å“ˆå¸Œå‡½æ•°æ—¶ï¼Œä½¿ç”¨ç³»æ•° <span class="number">31</span> å¯ä»¥ä¿è¯é«˜æ•ˆæ€§ã€å¯é€†æ€§å’Œä½å†²çªç‡ï¼Œå› æ­¤åœ¨ Java ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="5hashmapæ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹"><a class="markdownIt-Anchor" href="#5hashmapæ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹">#</a> 5.HashMap æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ‰°åŠ¨å‡½æ•°æ˜¯ä¸€ç§ç”¨äºå¢å¼ºå“ˆå¸Œå‡½æ•°çš„æŠ€æœ¯ã€‚å®ƒé€šå¸¸è¢«ç”¨æ¥å¯¹åŸå§‹å“ˆå¸Œå€¼è¿›è¡Œæ··æ·†å’Œæ‰°åŠ¨ï¼Œä»è€Œå‡å°å“ˆå¸Œå†²çªçš„å‘ç”Ÿç‡ã€‚</span><br><span class="line">	</span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œæ‰°åŠ¨å‡½æ•°ä¼šå°†åŸå§‹å“ˆå¸Œå€¼ä¸å¦ä¸€ä¸ªæ•°å€¼è¿›è¡Œæ··åˆï¼Œå¹¶å†æ¬¡è¿ç”¨å“ˆå¸Œå‡½æ•°äº§ç”Ÿæœ€ç»ˆçš„å“ˆå¸Œå€¼ã€‚è¿™ä¸ªé¢å¤–çš„æ•°å€¼å¯ä»¥æ˜¯ä»»æ„çš„å›ºå®šå€¼æˆ–éšæœºæ•°ï¼Œç›®çš„æ˜¯ä½¿å¾—ä¸åŒçš„å“ˆå¸Œå€¼åœ¨è¿›è¡Œæ··æ·†ä¹‹åï¼Œä»ç„¶èƒ½å¤Ÿä¿æŒä¸€å®šçš„åˆ†æ•£æ€§ï¼Œä»è€Œå‡å°å“ˆå¸Œå†²çªçš„æ¦‚ç‡ã€‚</span><br><span class="line"></span><br><span class="line">æ‰°åŠ¨å‡½æ•°å¯ä»¥è¢«åº”ç”¨åœ¨è®¸å¤šåœ°æ–¹ï¼Œä¾‹å¦‚ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>å“ˆå¸Œè¡¨ï¼šåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥ç”¨æ¥å¢åŠ é”®çš„éšæœºæ€§ï¼Œå‡å°‘å“ˆå¸Œå†²çªçš„å‘ç”Ÿç‡ï¼Œä»è€Œæé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚Java ä¸­çš„ HashMap å°±ä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°å¯¹é”®çš„å“ˆå¸Œç è¿›è¡Œæ··æ·†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>åŠ å¯†ç®—æ³•ï¼šåœ¨ä¸€äº›åŠ å¯†ç®—æ³•ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨æ‰°åŠ¨å‡½æ•°æ¥å¢åŠ å¯†ç ç†µï¼Œå¹¶æé«˜åŠ å¯†å¼ºåº¦ã€‚ä¾‹å¦‚ï¼ŒMD5 ç®—æ³•å°±é‡‡ç”¨äº†ä¸€ç³»åˆ—æ‰°åŠ¨å‡½æ•°å¯¹æ•°æ®è¿›è¡Œæ··æ·†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>å›¾åƒå¤„ç†ï¼šåœ¨å›¾åƒå¤„ç†ä¸­ï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥ç”¨æ¥å¯¹åƒç´ å€¼éšæœºåŒ–ï¼Œå¢åŠ å›¾åƒçš„å™ªå£°ï¼Œä»è€Œå®ç°ä¸€äº›ç‰¹æ®Šæ•ˆæœï¼Œå¦‚æ¯›ç»ç’ƒæ•ˆæœã€é›¨æ»´æ•ˆæœç­‰ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼Œæ‰°åŠ¨å‡½æ•°æ˜¯ä¸€ç§é€šç”¨çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨è®¸å¤šåœºæ™¯ä¸‹ä½¿ç”¨ã€‚é€šè¿‡å¼•å…¥éšæœºæ•°å’Œæ··æ·†æ“ä½œï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥å¢å¼ºæ•°æ®çš„éšæœºæ€§å’Œå¤æ‚æ€§ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="6hashmapè´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#6hashmapè´Ÿè½½å› å­">#</a> 6.HashMap è´Ÿè½½å› å­ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè½½å› å­ï¼Œå¯ä»¥ç†è§£æˆä¸€è¾†è½¦å¯æ‰¿é‡é‡é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼ŒæŠŠè´§æ”¾åˆ°æ–°çš„è½¦ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">	é‚£ä¹ˆåœ¨HashMapä¸­ï¼Œè´Ÿè½½å› å­å†³å®šäº†æ•°æ®é‡å¤šå°‘äº†ä»¥åè¿›è¡Œæ‰©å®¹ã€‚è¿™é‡Œè¦æåˆ°ä¸Šé¢åšçš„HashMapä¾‹å­ï¼Œæˆ‘ä»¬å‡†å¤‡äº†<span class="number">7</span>ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æœ€åè¿˜æœ‰<span class="number">3</span>ä¸ªä½ç½®ç©ºä½™ï¼Œ<span class="number">2</span>ä¸ªä½ç½®å­˜æ”¾äº†<span class="number">2</span>ä¸ªå…ƒç´ ã€‚ æ‰€ä»¥å¯èƒ½å³ä½¿ä½ æ•°æ®æ¯”æ•°ç»„å®¹é‡å¤§æ—¶ä¹Ÿæ˜¯ä¸ä¸€å®šèƒ½æ­£æ­£å¥½å¥½çš„æŠŠæ•°ç»„å æ»¡çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›å°æ ‡ä½ç½®å‡ºç°äº†å¤§é‡çš„ç¢°æ’ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”¨é“¾è¡¨å­˜æ”¾ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¤±å»äº†Mapæ•°ç»„çš„æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">	æ‰€ä»¥ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆç†çš„å¤§å°ä¸‹è¿›è¡Œæ‰©å®¹ï¼Œé»˜è®¤å€¼<span class="number">0.75</span>å°±æ˜¯è¯´å½“é˜ˆå€¼å®¹é‡å äº†<span class="number">3</span>/<span class="number">4</span>æ—¶èµ¶ç´§æ‰©å®¹ï¼Œå‡å°‘Hashç¢°æ’ã€‚</span><br><span class="line"></span><br><span class="line">	åŒæ—¶<span class="number">0.75</span>æ˜¯ä¸€ä¸ªé»˜è®¤æ„é€ å€¼ï¼Œåœ¨åˆ›å»ºHashMapä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨æ›´å¤šçš„ç©ºé—´æ¢å–æ—¶é—´ï¼Œå¯ä»¥æŠŠè´Ÿè½½å› å­è°ƒçš„æ›´å°ä¸€äº›ï¼Œå‡å°‘ç¢°æ’ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="7hashmapæ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€"><a class="markdownIt-Anchor" href="#7hashmapæ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€">#</a> 7.HashMap æ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HashMap æ˜¯ä¸€ç§æ‹‰é“¾å¼å“ˆå¸Œè¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä½¿ç”¨äº†é“¾è¡¨æ¥è§£å†³å“ˆå¸Œå†²çªã€‚</span><br><span class="line"></span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œå½“å¤šä¸ªä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶æ—¶ï¼ŒHashMap ä¼šå°†å®ƒä»¬å­˜å‚¨åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œå¹¶é€šè¿‡é“¾è¡¨æˆ–çº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„ç»„ç»‡èµ·æ¥ã€‚è¿™æ ·ï¼Œåœ¨è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼Œå°±å¯ä»¥éå†å¯¹åº”æ¡¶ä¸­çš„é“¾è¡¨ï¼Œæ‰¾åˆ°æ‰€éœ€çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">	ç›¸å¯¹äºå¼€æ”¾å¯»å€æ³•ï¼Œæ‹‰é“¾æ³•èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å“ˆå¸Œå†²çªï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚å› ä¸ºåœ¨æ‹‰é“¾æ³•ä¸­ï¼Œå“ˆå¸Œè¡¨çš„æ¯ä¸ªæ¡¶éƒ½å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œè€Œåœ¨å¼€æ”¾å¯»å€æ³•ä¸­ï¼Œæ¯ä¸ªä½ç½®åªèƒ½å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä½¿å¾—åŠ¨æ€æ‰©å®¹å˜å¾—æ›´åŠ å›°éš¾å’Œä½æ•ˆã€‚</span><br><span class="line"></span><br><span class="line">	ä½†æ˜¯ï¼Œç”±äºé“¾è¡¨çš„ç©ºé—´å’Œæ—¶é—´å¼€é”€ï¼Œå½“å“ˆå¸Œå†²çªè¾ƒä¸ºé¢‘ç¹æ—¶ï¼Œæ‹‰é“¾æ³•å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJava8 å¼•å…¥äº†åŸºäºçº¢é»‘æ ‘çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå³å½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼ŒHashMap æ˜¯ä¸€ç§åŸºäºæ‹‰é“¾æ³•å®ç°çš„å“ˆå¸Œè¡¨ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å“ˆå¸Œå†²çªï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æ‰©å®¹å’ŒåŸºäºçº¢é»‘æ ‘çš„ä¼˜åŒ–ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="8hashmapé“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#8hashmapé“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆ">#</a> 8.HashMap é“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åœ¨JDK1<span class="number">.8</span>ä¸­ï¼ŒHashMapæ˜¯ä»¥æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘æ„æˆçš„ã€‚</span><br><span class="line"></span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œå½“æŸä¸ªæ¡¶ä¸­çš„é“¾è¡¨é•¿åº¦è¶…è¿‡äº†é˜ˆå€¼æ—¶ï¼ŒHashMap ä¼šå°†è¿™ä¸ªé“¾è¡¨è½¬æ¢æˆä¸€æ£µçº¢é»‘æ ‘ï¼Œä»¥ä¾¿æ”¯æŒæ›´å¿«çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">	<span class="number">1.</span>åˆ›å»ºä¸€æ£µç©ºçš„çº¢é»‘æ ‘ï¼Œå¹¶å°†åŸå§‹é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°è¿™æ£µæ ‘ä¸­ã€‚</span><br><span class="line">	<span class="number">2.</span>åˆ é™¤åŸå§‹é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶è®¾ç½®å“ˆå¸Œè¡¨çš„ç»“æ„ç±»å‹ä¸º TREEBINã€‚</span><br><span class="line">	<span class="number">3.</span>åœ¨è¿›è¡Œæ’å…¥ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼Œå…ˆåˆ¤æ–­å½“å‰æ¡¶çš„æ•°æ®ç»“æ„ç±»å‹ï¼Œå¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™é‡‡ç”¨é“¾è¡¨çš„æ–¹æ³•è¿›è¡Œæ“ä½œï¼›å¦åˆ™ï¼Œé‡‡ç”¨çº¢é»‘æ ‘çš„æ–¹æ³•è¿›è¡Œæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">	æ€»ä¹‹ï¼Œåœ¨ JDK8 åŠä»¥åç‰ˆæœ¬ä¸­ï¼ŒHashMap åœ¨æ ‘åŒ–å’Œè¿ç§»æ•°æ®æ–¹é¢åšäº†ä¸€äº›ä¼˜åŒ–ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒå¤§è§„æ¨¡å¹¶å‘å’Œé«˜æ•ˆå†…å­˜ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="9hashmap-ä¸­çš„-keyè‹¥ä¸º-objectç±»å‹-åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•"><a class="markdownIt-Anchor" href="#9hashmap-ä¸­çš„-keyè‹¥ä¸º-objectç±»å‹-åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•">#</a> 9.HashMap ä¸­çš„ key è‹¥ä¸º Object ç±»å‹ï¼Œ åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•ï¼Ÿ</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/12e5dce6bacfa7d4db320d87936b45db.jpeg" alt="HashMap åœ¨ JDK1.7 å’Œ JDK1.8 ä¸­æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ_æ•°ç»„_07"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœ HashMap ä¸­çš„ key æ˜¯ Object ç±»å‹ï¼Œåˆ™è¯¥å¯¹è±¡éœ€è¦æ­£ç¡®åœ°å®ç° equals() å’Œ hashCode() æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶è®¡ç®—å¯¹è±¡çš„å“ˆå¸Œç ã€‚</span><br><span class="line"></span><br><span class="line">å…·ä½“æ¥è¯´ï¼Œequals() æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚åœ¨ HashMap ä¸­ï¼Œå½“ä¸¤ä¸ª key çš„å“ˆå¸Œå€¼ç›¸åŒæ—¶ï¼Œä¼šè°ƒç”¨å®ƒä»¬çš„ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦çœŸæ­£ç›¸ç­‰ã€‚å› æ­¤ï¼Œæ­£ç¡®å®ç° equals() æ–¹æ³•å¯ä»¥é˜²æ­¢å“ˆå¸Œå†²çªå’Œé”®å€¼å¯¹é‡å¤çš„é—®é¢˜ã€‚</span><br><span class="line">       </span><br><span class="line">hashCode() æ–¹æ³•ç”¨äºè®¡ç®—å¯¹è±¡çš„å“ˆå¸Œç ï¼Œå®ƒå°†ä¸€ä¸ªå¯¹è±¡æ˜ å°„åˆ°ä¸€ä¸ªæ•´æ•°å€¼ï¼Œç”¨äºç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ã€‚åœ¨ HashMap ä¸­ï¼Œå½“æ’å…¥æˆ–æŸ¥æ‰¾é”®å€¼å¯¹æ—¶ï¼Œä¼šé¦–å…ˆè®¡ç®— key çš„å“ˆå¸Œç ï¼Œå¹¶æ ¹æ®å“ˆå¸Œç æŸ¥æ‰¾å¯¹åº”çš„æ¡¶ã€‚å› æ­¤ï¼Œæ­£ç¡®å®ç° hashCode() æ–¹æ³•å¯ä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨ HashMap ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸º keyï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„ equals() æ–¹æ³•å’Œ hashCode() æ–¹æ³•æ˜¯é€šè¿‡ç»§æ‰¿ Object ç±»è€Œæ¥çš„ï¼Œè¿™å¯èƒ½å¯¼è‡´ key çš„æ¯”è¾ƒå’Œå“ˆå¸Œç è®¡ç®—ä¸å‡†ç¡®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è‡ªå·±é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Œä»¥æ»¡è¶³æˆ‘ä»¬çš„å…·ä½“éœ€æ±‚ã€‚åŒæ—¶ï¼Œè¿˜éœ€è¦éµå¾ªä¸€äº›è§„åˆ™ï¼Œä¾‹å¦‚ï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å“ˆå¸Œç å¿…é¡»ç›¸ç­‰ï¼›åä¹‹äº¦ç„¶ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="10hashmapä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„"><a class="markdownIt-Anchor" href="#10hashmapä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„">#</a> 10.HashMap ä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ‰°åŠ¨å‡½æ•°å°±æ˜¯ä¸ºäº†å¢åŠ éšæœºæ€§ï¼Œè®©æ•°æ®å…ƒç´ æ›´åŠ å‡è¡¡çš„æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’</span></span><br><span class="line"><span class="comment"> * æŠŠå“ˆå¸Œå€¼å³ç§»16ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜¯è‡ªå·±é•¿åº¦çš„ä¸€åŠï¼Œä¹‹åä¸åŸå“ˆå¸Œå€¼åšå¼‚æˆ–è¿ç®—</span></span><br><span class="line"><span class="comment"> * è¿™æ ·å°±æ··åˆäº†åŸå“ˆå¸Œå€¼ä¸­çš„é«˜ä½å’Œä½ä½ï¼Œå¢å¤§äº†éšæœºæ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">hashIndex</span> <span class="operator">=</span> (size - <span class="number">1</span>) &amp; (key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>));</span><br></pre></td></tr></table></figure>
<h4 id="11ä¸ºä»€ä¹ˆhashmapä¸­è¦ä½¿ç”¨-1-30-æ¥ä½œä¸ºæœ€å¤§é™åˆ¶"><a class="markdownIt-Anchor" href="#11ä¸ºä»€ä¹ˆhashmapä¸­è¦ä½¿ç”¨-1-30-æ¥ä½œä¸ºæœ€å¤§é™åˆ¶">#</a> 11. ä¸ºä»€ä¹ˆ hashMap ä¸­è¦ä½¿ç”¨ ï¼ˆ1 &lt;&lt; 30ï¼‰ æ¥ä½œä¸ºæœ€å¤§é™åˆ¶</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ HashMap ä¸­ï¼Œä½¿ç”¨ <span class="number">1</span> &lt;&lt; <span class="number">30</span> æ¥ä½œä¸ºå®¹é‡çš„æœ€å¤§é™åˆ¶æ˜¯å› ä¸º Java ä¸­çš„æ•°ç»„é•¿åº¦ä¸èƒ½è¶…è¿‡ Integer.MAX_VALUEï¼ˆå³ <span class="number">2</span>^<span class="number">31</span>-<span class="number">1</span>ï¼‰ã€‚è€Œ HashMap å†…éƒ¨çš„å®ç°éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ•°æ®ï¼Œå› æ­¤å…¶å®¹é‡ä¹Ÿå¿…é¡»å—åˆ°è¿™ä¸ªé™åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºäº†ä¿è¯ HashMap çš„æœ€å¤§å®¹é‡ä¸è¶…è¿‡ Integer.MAX_VALUEï¼ŒåŒæ—¶åˆè¦å°½å¯èƒ½åœ°æé«˜ HashMap çš„å®¹é‡ï¼ŒJava å¼€å‘å›¢é˜Ÿé€‰æ‹©äº† <span class="number">1</span> &lt;&lt; <span class="number">30</span> ä½œä¸º HashMap çš„æœ€å¤§å®¹é‡ã€‚è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ª <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨ä½è¿ç®—çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶åˆä¸ä¼šè¶…è¿‡æ•°ç»„é•¿åº¦çš„æœ€å¤§é™åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap å®é™…ä¸Šå¹¶ä¸ä¼šç›´æ¥ä½¿ç”¨ <span class="number">1</span> &lt;&lt; <span class="number">30</span> ä½œä¸ºå®¹é‡çš„æœ€å¤§é™åˆ¶ã€‚åœ¨åˆå§‹åŒ– HashMap æ—¶ï¼Œå¦‚æœä¼ å…¥çš„åˆå§‹å®¹é‡å¤§äºç­‰äº <span class="number">1</span> &lt;&lt; <span class="number">30</span>ï¼Œåˆ™ä¼šå°†å®¹é‡è®¾ç½®ä¸º Integer.MAX_VALUEï¼›å¦‚æœä¼ å…¥çš„åˆå§‹å®¹é‡å°äº <span class="number">1</span> &lt;&lt; <span class="number">30</span>ï¼Œåˆ™ä¼šå°†å®¹é‡è°ƒæ•´ä¸ºå¤§äºç­‰äºä¼ å…¥å€¼ä¸”æœ€æ¥è¿‘ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹çš„æ•°ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ HashMap å®¹é‡çš„åˆç†æ€§ï¼ŒåŒæ—¶é¿å…å‡ºç°æ•°ç»„é•¿åº¦è¶…è¿‡ Integer.MAX_VALUE çš„æƒ…å†µã€‚</span><br></pre></td></tr></table></figure>
<h4 id="12hashmapå¦‚ä½•å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼"><a class="markdownIt-Anchor" href="#12hashmapå¦‚ä½•å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼">#</a> 12.HashMap å¦‚ä½•å¯»æ‰¾ 2 çš„å¹‚æ¬¡æ–¹æœ€å°å€¼ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK1.8ä¸­ï¼šæŠŠäºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½å¡«ä¸Š1ï¼Œå½“äºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½æ˜¯1ä»¥åï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„2çš„å¹‚æ¬¡æ–¹å‡1äº†ï¼Œæœ€åæŠŠç»“æœåŠ 1å†è¿”å›å³å¯ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//JDK1.8ä¹‹åï¼šï¼ˆäºŒåˆ†æ³•ï¼‰é€šè¿‡å¤šæ¬¡å³ç§»å’Œå‡å°ä½å®½çš„æ–¹å¼æ¥é€æ­¥ç¼©å°æœç´¢èŒƒå›´ï¼Œæœ€ç»ˆå¾—åˆ°æœ€é«˜ä½ 0 çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">     <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> -<span class="number">1</span> &gt;&gt;&gt; Integer.numberOfLeadingZeros(cap - <span class="number">1</span>);</span><br><span class="line">     <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="12ä¸ºä»€ä¹ˆé‡å†™equalsä¸€å®šè¦é‡å†™hashcode"><a class="markdownIt-Anchor" href="#12ä¸ºä»€ä¹ˆé‡å†™equalsä¸€å®šè¦é‡å†™hashcode">#</a> 12. ä¸ºä»€ä¹ˆé‡å†™ equals ä¸€å®šè¦é‡å†™ hashcode</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Java ä¸­ï¼Œæ¯ä¸ªç±»éƒ½ç»§æ‰¿äº† Object ç±»ï¼ŒObject ç±»æä¾›äº†ä¸¤ä¸ªæœ‰å…³å“ˆå¸Œå€¼çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ equals() æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯ hashCode() æ–¹æ³•ã€‚å…¶ä¸­ï¼Œequals() æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œè€Œ hashCode() æ–¹æ³•åˆ™è¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœåœ¨ä¸€ä¸ªç±»ä¸­é‡å†™äº† equals() æ–¹æ³•ï¼Œä½†æ²¡æœ‰é‡å†™ hashCode() æ–¹æ³•ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</span><br><span class="line"></span><br><span class="line">	åœ¨ä½¿ç”¨ HashMapã€HashSet ç­‰å“ˆå¸Œæ•°æ®ç»“æ„æ—¶ï¼Œç”±äºä¸åŒçš„å¯¹è±¡å¯ä»¥è¿”å›ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå› æ­¤å¯èƒ½ä¼šå°†è¿™äº›å¯¹è±¡è¯¯è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¼•å‘ç¨‹åºé”™è¯¯ã€‚</span><br><span class="line">	åœ¨ä½¿ç”¨è‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºé”®æ¥è¿›è¡Œ Map æ“ä½œæ—¶ï¼Œç”±äºä¸åŒçš„é”®å¯ä»¥è¿”å›ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå› æ­¤å¯èƒ½æ— æ³•æ­£ç¡®åœ°å®šä½åˆ°å¯¹åº”çš„é”®å€¼å¯¹ï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸ¥æ‰¾å¤±è´¥ã€‚</span><br><span class="line">å› æ­¤ï¼Œå¦‚æœè¦é‡å†™ equals() æ–¹æ³•ï¼Œåˆ™å¿…é¡»åŒæ—¶é‡å†™ hashCode() æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºä¸€è‡´å¹¶æ»¡è¶³ä¸€äº›çº¦å®šï¼š</span><br><span class="line"></span><br><span class="line">	å¦‚æœä¸¤ä¸ªå¯¹è±¡ä½¿ç”¨ equals() æ–¹æ³•æ¯”è¾ƒè¿”å›ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬çš„ hashCode() å€¼å¿…é¡»ç›¸ç­‰ã€‚</span><br><span class="line">	å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode() å€¼ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬ä¸ä¸€å®šç›¸ç­‰ï¼ˆå³å¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çªï¼‰ï¼Œå› æ­¤éœ€è¦å†æ¬¡ä½¿ç”¨ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line">é€šè¿‡éµå¾ªè¿™äº›çº¦å®šï¼Œå¯ä»¥ä¿è¯åœ¨ä½¿ç”¨å“ˆå¸Œæ•°æ®ç»“æ„æˆ–è‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºé”®å€¼å¯¹æ—¶ä¸ä¼šå‡ºç°é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="13ä¸ºä»€ä¹ˆåœ¨-java-çš„-hashmap-å®ç°ä¸­æ•°ç»„çš„å¤§å°å³å®¹é‡å¿…é¡»å§‹ç»ˆä¿æŒä¸º-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#13ä¸ºä»€ä¹ˆåœ¨-java-çš„-hashmap-å®ç°ä¸­æ•°ç»„çš„å¤§å°å³å®¹é‡å¿…é¡»å§‹ç»ˆä¿æŒä¸º-2-çš„å¹‚æ¬¡æ–¹">#</a> 13. ä¸ºä»€ä¹ˆåœ¨ Java çš„ HashMap å®ç°ä¸­ï¼Œæ•°ç»„çš„å¤§å°ï¼ˆå³å®¹é‡ï¼‰å¿…é¡»å§‹ç»ˆä¿æŒä¸º 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HashMapçš„é•¿åº¦å¿…é¡»ä¿è¯æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œæ˜¯ä¸ºäº†é¿å…å‡ºç°HashMapä¸ºç©ºæˆ–è€…HashMapä¸­å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ä¸è¶³<span class="number">2</span>çš„å¹‚æ¬¡æ–¹çš„æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœHashMapçš„é•¿åº¦ä¸æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</span><br><span class="line"></span><br><span class="line">	å¦‚æœHashMapçš„é•¿åº¦ä¸º<span class="number">1</span>ï¼Œé‚£ä¹ˆå®ƒçš„å“ˆå¸Œå†²çªè§£å†³æ–¹å¼åªèƒ½æ˜¯é“¾åœ°å€æ³•ï¼ˆå³å°†å†²çªçš„é”®å€¼å¯¹æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼‰ï¼Œè¿™ç§æ–¹å¼ä¸èƒ½å¤„ç†å“ˆå¸Œå†²çªã€‚</span><br><span class="line">	å¦‚æœHashMapçš„é•¿åº¦ä¸º<span class="number">0</span>ï¼Œé‚£ä¹ˆå®ƒçš„å“ˆå¸Œå†²çªè§£å†³æ–¹å¼åªèƒ½æ˜¯å¼€æ”¾åœ°å€æ³•ï¼ˆå³å°†å†²çªçš„é”®å€¼å¯¹ç›´æ¥æ”¾åœ¨HashMapä¸­ï¼‰ï¼Œè¿™ç§æ–¹å¼ä¸èƒ½å¤„ç†å“ˆå¸Œå†²çªã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†ä¿è¯HashMapçš„æ­£ç¡®æ€§å’Œæ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒçš„é•¿åº¦æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œæˆ–è€…ä¸ºä¸€ä¸ªå›ºå®šçš„æœ€å¤§å€¼ã€‚å¦‚æœéœ€è¦åŠ¨æ€åœ°è°ƒæ•´HashMapçš„é•¿åº¦ï¼Œå¯ä»¥ä½¿ç”¨é“¾è¡¨æ³•æˆ–è€…å¼€æ”¾åœ°å€æ³•ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="14ä¸ºä»€ä¹ˆhashmaploadfactorçš„é€‰å€¼æ˜¯34è€Œä¸æ˜¯24"><a class="markdownIt-Anchor" href="#14ä¸ºä»€ä¹ˆhashmaploadfactorçš„é€‰å€¼æ˜¯34è€Œä¸æ˜¯24">#</a> 14. ä¸ºä»€ä¹ˆ HashMap.loadFactor çš„é€‰å€¼æ˜¯ 3/4ï¼Œè€Œä¸æ˜¯ 2/4?</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆï¼Œå½“loadFactorçš„å€¼æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œè™½ç„¶èƒ½å¤Ÿå‡å°‘ç©ºé—´çš„æµªè´¹ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å“ˆå¸Œè¡¨æ›´åŠ é¢‘ç¹åœ°è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè¿™ä¼šå½±å“åˆ°HashMapçš„æ€§èƒ½ã€‚</span><br><span class="line">å…¶æ¬¡ï¼Œå½“loadFactorçš„å€¼æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè™½ç„¶èƒ½å¤Ÿå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å“ˆå¸Œé“¾è¡¨é•¿åº¦è¿‡é•¿ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¼šå˜å¾—è¾ƒä½ã€‚</span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†å¹³è¡¡ç©ºé—´åˆ©ç”¨ç‡å’Œæ—¶é—´æ•ˆç‡ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚å½“çš„loadFactorå€¼éå¸¸é‡è¦ã€‚ç»è¿‡å®éªŒå’Œåˆ†æï¼Œå‘ç°loadFactorå–<span class="number">0.75</span>æ—¶ï¼Œå¯ä»¥åœ¨ä¿è¯å“ˆå¸Œè¡¨æŸ¥æ‰¾æ•ˆç‡çš„åŒæ—¶ï¼Œç¨å¾®å‡å°‘ç©ºé—´çš„æµªè´¹ã€‚å¦å¤–ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªå–å€¼ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿé‡‡ç”¨äº†ç±»ä¼¼çš„å€¼ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="15hashmapä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶å¦‚ä½•æ‰©å®¹"><a class="markdownIt-Anchor" href="#15hashmapä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶å¦‚ä½•æ‰©å®¹">#</a> 15.HashMap ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ï¼Ÿå¦‚ä½•æ‰©å®¹ï¼Ÿ</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">HashMapåœ¨å­˜å‚¨é”®å€¼å¯¹æ—¶ï¼Œä¼šå°†é”®é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°æ¡¶é‡Œé¢ï¼Œæ¯ä¸ªæ¡¶æ˜¯ä¸€ä¸ªé“¾è¡¨æˆ–çº¢é»‘æ ‘ã€‚å½“HashMapä¸­çš„å…ƒç´ æ•°é‡å¢åŠ åˆ°è¶…è¿‡äº†è´Ÿè½½å› å­ï¼ˆé»˜è®¤ä¸º0.75ï¼‰ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">å…·ä½“åœ°è¯´ï¼Œåœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰çš„å…ƒç´ æ•°é‡è¾¾åˆ°äº†é˜ˆå€¼ï¼ˆå³å®¹é‡ä¹˜ä»¥è´Ÿè½½å› å­ï¼‰ï¼Œå°±ä¼šå¯åŠ¨æ‰©å®¹æœºåˆ¶ã€‚è¿™ä¸ªé˜ˆå€¼é€šè¿‡å¦‚ä¸‹å…¬å¼è®¡ç®—ï¼š</span><br><span class="line"></span><br><span class="line">threshold = capacity * loadFactor</span><br><span class="line"></span><br><span class="line">å…¶ä¸­capacityæ˜¯å½“å‰HashMapçš„å®¹é‡ï¼ŒloadFactoræ˜¯è´Ÿè½½å› å­ï¼Œé»˜è®¤å€¼ä¸º0.75ã€‚å½“HashMapä¸­å…ƒç´ ä¸ªæ•°è¾¾åˆ°äº†thresholdå€¼æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">æ‰©å®¹æ“ä½œåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">	1.åˆ›å»ºä¸€ä¸ªæ–°çš„Entryæ•°ç»„ï¼Œé•¿åº¦ä¸ºåŸæ•°ç»„çš„ä¸¤å€ã€‚</span><br><span class="line">	2.å°†åŸæ¥æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ é‡æ–°åˆ†é…åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸€æ­¥éœ€è¦é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ çš„hashå€¼ï¼Œå¹¶ä¸”æ ¹æ®æ–°çš„æ•°ç»„é•¿åº¦æ±‚å‡ºå®ƒä»¬åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ã€‚</span><br><span class="line">	3.åœ¨é‡æ–°åˆ†é…å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªä½ç½®ä¸Šæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä¼šå½¢æˆä¸€ä¸ªé“¾è¡¨æˆ–çº¢é»‘æ ‘ï¼Œè¿™å–å†³äºé“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äºç­‰äº8ï¼Œå¹¶ä¸”æ¡¶å®¹é‡å¤§äº64ã€‚å¦‚æœé“¾è¡¨é•¿åº¦å¤§äºç­‰äº8å¹¶ä¸”æ¡¶å®¹é‡å¤§äº64çš„è¯ï¼Œåˆ™ä¼šå°†å…¶è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œå¦åˆ™ä»ç„¶ä½¿ç”¨é“¾è¡¨ã€‚è¿™ä¸€æ­¥æ˜¯ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå› ä¸ºçº¢é»‘æ ‘çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯O(log n)ï¼Œè€Œé“¾è¡¨çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚</span><br><span class="line">	4.æ›´æ–°HashMapçš„å®¹é‡å’Œé˜ˆå€¼ã€‚</span><br><span class="line">	</span><br><span class="line">æ‰©å®¹æ“ä½œä¼šæ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºéœ€è¦é‡æ–°è®¡ç®—hashå€¼ã€é‡æ–°åˆ†é…å…ƒç´ ç­‰ï¼Œæ‰€ä»¥åº”è¯¥å°½å¯èƒ½é¿å…é¢‘ç¹è§¦å‘æ‰©å®¹ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´è´Ÿè½½å› å­çš„å¤§å°æ¥æ§åˆ¶HashMapçš„æ€§èƒ½å’Œç©ºé—´å ç”¨</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T09:23:40.000Z" title="2023-5-6 17:23:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:33:45.897Z" title="2023-5-9 8:33:45">2023-05-09</time>æ›´æ–°</span><span class="level-item">21 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3111ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0Map/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°Hashè¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°hashè¡¨å¹¶è§£å†³å“ˆå¸Œå†²çª"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°hashè¡¨å¹¶è§£å†³å“ˆå¸Œå†²çª">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° Hash è¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<h3 id="å“ˆå¸Œè¡¨çš„å†å²"><a class="markdownIt-Anchor" href="#å“ˆå¸Œè¡¨çš„å†å²">#</a> å“ˆå¸Œè¡¨çš„å†å²</h3>
<p>å“ˆå¸Œæ•£åˆ—çš„æƒ³æ³•åœ¨ä¸åŒçš„åœ°æ–¹ç‹¬ç«‹å‡ºç°ã€‚1953 å¹´ 1 æœˆï¼Œæ±‰æ–¯ãƒ»å½¼å¾—ãƒ»å¢æ© (Hans Peter Luhn) ç¼–å†™äº†ä¸€ä»½ IBM å†…éƒ¨å¤‡å¿˜å½•ï¼Œå…¶ä¸­ä½¿ç”¨äº†æ•£åˆ—å’Œé“¾æ¥ã€‚å¼€æ”¾å¯»å€åæ¥ç”± AD Linh åœ¨ Luhn çš„è®ºæ–‡ä¸Šæå‡ºã€‚å¤§çº¦åœ¨åŒä¸€æ—¶é—´ï¼ŒIBM Research çš„ Gene Amdahlã€Elaine M. McGrawã€Nathaniel Rochester å’Œ Arthur Samuel ä¸º IBM 701 æ±‡ç¼–å™¨å®ç°äº†æ•£åˆ—ã€‚â€Šçº¿æ€§æ¢æµ‹çš„å¼€æ”¾å¯»å€å½’åŠŸäº Amdahlï¼Œå°½ç®¡ Ershov ç‹¬ç«‹åœ°æœ‰ç›¸åŒçš„æƒ³æ³•ã€‚â€œå¼€æ”¾å¯»å€â€ ä¸€è¯æ˜¯ç”± W. Wesley Peterson åœ¨ä»–çš„æ–‡ç« ä¸­åˆ›é€ çš„ï¼Œè¯¥æ–‡ç« è®¨è®ºäº†å¤§æ–‡ä»¶ä¸­çš„æœç´¢é—®é¢˜ã€‚</p>
<h2 id="äºŒ-å“ˆå¸Œæ•°æ®ç»“æ„"><a class="markdownIt-Anchor" href="#äºŒ-å“ˆå¸Œæ•°æ®ç»“æ„">#</a> äºŒã€å“ˆå¸Œæ•°æ®ç»“æ„</h2>
<p>å“ˆå¸Œè¡¨çš„å­˜åœ¨æ˜¯ä¸ºäº†è§£å†³èƒ½é€šè¿‡ O (1) æ—¶é—´å¤æ‚åº¦ç›´æ¥ç´¢å¼•åˆ°æŒ‡å®šå…ƒç´ ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé€šè¿‡æˆ‘ä»¬ä½¿ç”¨æ•°ç»„å­˜æ”¾å…ƒç´ ï¼Œéƒ½æ˜¯æŒ‰ç…§é¡ºåºå­˜æ”¾çš„ï¼Œå½“éœ€è¦è·å–æŸä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œåˆ™éœ€è¦å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œè·å–åˆ°æŒ‡å®šçš„å€¼ã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-01.png" alt="img"></p>
<p>è€Œè¿™æ ·é€šè¿‡å¾ªç¯éå†æ¯”å¯¹è·å–æŒ‡å®šå…ƒç´ çš„æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O (n)ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘å®ç°ä¸­å­˜åœ¨è¿™æ ·çš„ä»£ç æ˜¯éå¸¸æ‹‰èƒ¯çš„ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±å¼•å…¥äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è®¾è®¡ã€‚</p>
<hr>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆhash tableã€hash mapï¼‰æ˜¯ä¸€ç§å®ç°å…³è”æ•°ç»„çš„æŠ½è±¡æ•°æ®ç»“æ„ï¼Œè¯¥ç»“æ„å°†é”®é€šè¿‡å“ˆå¸Œè®¡ç®—æ˜ å°„åˆ°å€¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é€šè¿‡å¯¹ä¸€ä¸ª Key å€¼è®¡ç®—å®ƒçš„å“ˆå¸Œå¹¶ä¸é•¿åº¦ä¸º 2 çš„ n æ¬¡å¹‚çš„æ•°ç»„å‡ä¸€åšä¸è¿ç®—ï¼Œè®¡ç®—å‡ºæ§½ä½å¯¹åº”çš„ç´¢å¼•ï¼Œå°†æ•°æ®å­˜æ”¾åˆ°ç´¢å¼•ä¸‹ã€‚é‚£ä¹ˆè¿™æ ·å°±è§£å†³äº†å½“è·å–æŒ‡å®šæ•°æ®æ—¶ï¼Œåªéœ€è¦æ ¹æ®å­˜æ”¾æ—¶è®¡ç®—ç´¢å¼• ID çš„æ–¹å¼å†è®¡ç®—ä¸€æ¬¡ï¼Œå°±å¯ä»¥æŠŠæ§½ä½ä¸Šå¯¹åº”çš„æ•°æ®è·å–å¤„ç†ï¼Œä»¥æ­¤è¾¾åˆ°æ—¶é—´å¤æ‚åº¦ä¸º O (1) çš„æƒ…å†µã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-02.png" alt="img"></p>
<p>å“ˆå¸Œæ•£åˆ—è™½ç„¶è§£å†³äº†è·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜ï¼Œä½†å¤§å¤šæ•°æ—¶å€™è¿™åªæ˜¯ç†æƒ³æƒ…å†µã€‚å› ä¸ºéšç€å…ƒç´ çš„å¢å¤šï¼Œå¾ˆå¯èƒ½å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œæˆ–è€…å“ˆå¸Œå€¼æ³¢åŠ¨ä¸å¤§å¯¼è‡´ç´¢å¼•è®¡ç®—ç›¸åŒï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç´¢å¼•ä½ç½®å‡ºç°å¤šä¸ªå…ƒç´ æƒ…å†µã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-03.png" alt="img"></p>
<p>å½“ <code>æäºŒç‹—</code> ã€ <code>æ‹ç“¢å†²</code> éƒ½æœ‰æ§½ä½çš„ä¸‹æ ‡ç´¢å¼• 03 çš„  <code>å®è£†çŒ«</code>  å‘ç”Ÿå†²çªæ—¶ï¼Œæƒ…å†µå°±å˜å¾—ç³Ÿç³•äº†ï¼Œå› ä¸ºè¿™æ ·å°±ä¸èƒ½æ»¡è¶³ O (1) æ—¶é—´å¤æ‚åº¦è·å–å…ƒç´ çš„è¯‰æ±‚äº†ã€‚</p>
<h2 id="ä¸‰-å®ç°å“ˆå¸Œæ•£åˆ—"><a class="markdownIt-Anchor" href="#ä¸‰-å®ç°å“ˆå¸Œæ•£åˆ—">#</a> ä¸‰ã€å®ç°å“ˆå¸Œæ•£åˆ—</h2>
<p>â€‹		å“ˆå¸Œæ•£åˆ—æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œæ— è®ºæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„ HashMapã€ThreaLocal è¿˜æ˜¯ä½ åœ¨åˆ·é¢˜ä¸­ä½äº†æå‡ç´¢å¼•æ•ˆç‡ï¼Œéƒ½ä¼šç”¨åˆ°å“ˆå¸Œæ•£åˆ—ã€‚</p>
<p>â€‹		åªè¦å“ˆå¸Œæ¡¶çš„é•¿åº¦ç”±è´Ÿè½½å› å­æ§åˆ¶çš„åˆç†ï¼Œæ¯æ¬¡æŸ¥æ‰¾å…ƒç´ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸æ¡¶ä¸­å­˜å‚¨çš„å…ƒç´ æ•°é‡æ— å…³ã€‚å¦å¤–è®¸å¤šå“ˆå¸Œè¡¨è®¾è®¡è¿˜å…è®¸å¯¹é”®å€¼å¯¹çš„ä»»æ„æ’å…¥å’Œåˆ é™¤ï¼Œæ¯æ¬¡æ“ä½œçš„æ‘Šé”€å›ºå®šå¹³å‡æˆæœ¬ã€‚</p>
<h3 id="1-å“ˆå¸Œç¢°æ’"><a class="markdownIt-Anchor" href="#1-å“ˆå¸Œç¢°æ’">#</a> 1. å“ˆå¸Œç¢°æ’</h3>
<p><strong>è¯´æ˜</strong>ï¼šé€šè¿‡æ¨¡æ‹Ÿç®€å• HashMap å®ç°ï¼Œå»æ‰æ‹‰é“¾å¯»å€ç­‰è®¾è®¡ï¼ŒéªŒè¯å…ƒç´ å“ˆæ–°ç´¢å¼•ä½ç½®ç¢°æ’ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap01</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object[] tab = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        tab[idx] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> (V) tab[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-04.png" alt="img"></p>
<ul>
<li>HashMap01 çš„å®ç°åªæ˜¯é€šè¿‡å“ˆå¸Œè®¡ç®—å‡ºçš„ä¸‹æ ‡ï¼Œæ•£åˆ—å­˜æ”¾åˆ°å›ºå®šçš„æ•°ç»„å†…ã€‚é‚£ä¹ˆè¿™æ ·å½“å‘ç”Ÿå…ƒç´ ä¸‹æ ‡ç¢°æ’æ—¶ï¼ŒåŸæœ‰çš„å…ƒç´ å°±ä¼šè¢«æ–°çš„å…ƒç´ æ›¿æ¢æ‰ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap01</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap01</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;02&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-05.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">06</span>:<span class="number">58</span>:<span class="number">41.691</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">06</span>:<span class="number">58</span>:<span class="number">41.696</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šè‹—è‹—</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¢°æ’å‰ map.get (â€œ01â€) çš„å€¼æ˜¯ <code>èŠ±èŠ±</code> ï¼Œä¸¤æ¬¡ä¸‹æ ‡ç´¢å¼•ç¢°æ’åå­˜æ”¾çš„å€¼åˆ™æ˜¯ <code>è‹—è‹—</code></li>
<li>è¿™ä¹Ÿå°±æ˜¯ä½¿ç”¨å“ˆå¸Œæ•£åˆ—å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºæ˜¯åœ¨å·²çŸ¥å…ƒç´ æ•°é‡çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ‰©å®¹æ•°ç»„é•¿åº¦è§£å†³ï¼Œè¿˜æ˜¯æŠŠç¢°æ’çš„å…ƒç´ é€šè¿‡é“¾è¡¨å­˜æ”¾ï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚</li>
</ul>
<h3 id="2-æ‹‰é“¾å¯»å€"><a class="markdownIt-Anchor" href="#2-æ‹‰é“¾å¯»å€">#</a> 2. æ‹‰é“¾å¯»å€</h3>
<p><strong>è¯´æ˜</strong>ï¼šæ—¢ç„¶æˆ‘ä»¬æ²¡æ³•æ§åˆ¶å…ƒç´ ä¸ç¢°æ’ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¯¹ç¢°æ’åçš„å…ƒç´ è¿›è¡Œç®¡ç†ã€‚æ¯”å¦‚åƒ HashMap ä¸­æ‹‰é“¾æ³•ä¸€æ ·ï¼ŒæŠŠç¢°æ’çš„å…ƒç´ å­˜æ”¾åˆ°é“¾è¡¨ä¸Šã€‚è¿™é‡Œæˆ‘ä»¬å°±æ¥ç®€åŒ–å®ç°ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap02BySeparateChaining</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkedList&lt;Node&lt;K, V&gt;&gt;[] tab = <span class="keyword">new</span> <span class="title class_">LinkedList</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tab[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">            tab[idx] = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            tab[idx].add(<span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tab[idx].add(<span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;K, V&gt; kvNode : tab[idx]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.equals(kvNode.getKey())) &#123;</span><br><span class="line">                <span class="keyword">return</span> kvNode.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K, V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> K <span class="title function_">getKey</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> V <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-06.png" alt="img"></p>
<ul>
<li>å› ä¸ºå…ƒç´ åœ¨å­˜æ”¾åˆ°å“ˆå¸Œæ¡¶ä¸Šæ—¶ï¼Œå¯èƒ½å‘ç”Ÿä¸‹æ ‡ç´¢å¼•è†¨èƒ€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªå…ƒç´ éƒ½è®¾å®šæˆä¸€ä¸ª Node èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹é€šè¿‡ LinkedList é“¾è¡¨å…³è”ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Node èŠ‚ç‚¹æ„å»ºå‡ºé“¾è¡¨ next å…ƒç´ å³å¯ã€‚</li>
<li>é‚£ä¹ˆè¿™æ—¶å€™åœ¨å‘ç”Ÿå…ƒç´ ç¢°æ’ï¼Œç›¸åŒä½ç½®çš„å…ƒç´ å°±éƒ½è¢«å­˜æ”¾åˆ°é“¾è¡¨ä¸Šäº†ï¼Œè·å–çš„æ—¶å€™éœ€è¦å¯¹å­˜æ”¾å¤šä¸ªå…ƒç´ çš„é“¾è¡¨è¿›è¡Œéå†è·å–ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap02</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap02BySeparateChaining</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;05&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-07.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">07</span>:<span class="number">21</span>:<span class="number">16.654</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">22</span>:<span class="number">44.651</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ­¤æ—¶ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è·å– 01 ä½ç½®çš„å…ƒç´ å°±éƒ½æ˜¯ <code>èŠ±èŠ±</code> äº†ï¼Œå…ƒç´ æ²¡æœ‰è¢«æ›¿ä»£ã€‚å› ä¸ºæ­¤æ—¶çš„å…ƒç´ æ˜¯è¢«å­˜æ”¾åˆ°é“¾è¡¨ä¸Šäº†ã€‚</li>
</ul>
<h3 id="3-å¼€æ”¾å¯»å€"><a class="markdownIt-Anchor" href="#3-å¼€æ”¾å¯»å€">#</a> 3. å¼€æ”¾å¯»å€</h3>
<p><strong>è¯´æ˜</strong>ï¼šé™¤äº†å¯¹å“ˆå¸Œæ¡¶ä¸Šç¢°æ’çš„ç´¢å¼•å…ƒç´ è¿›è¡Œæ‹‰é“¾å­˜æ”¾ï¼Œè¿˜æœ‰ä¸å¼•å…¥æ–°çš„é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œåªæ˜¯åœ¨å“ˆå¸Œæ¡¶ä¸Šå­˜æ”¾ç¢°æ’å…ƒç´ çš„æ–¹å¼ã€‚å®ƒå«å¼€æ”¾å¯»å€ï¼Œä¹Ÿå°±æ˜¯ ThreaLocal ä¸­è¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ— + å¼€æ”¾å¯»å€çš„å¤„ç†æ–¹å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap03ByOpenAddressing</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K, V&gt;[] tab = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tab[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">            tab[idx] = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; tab.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tab[i] == <span class="literal">null</span>) &#123;</span><br><span class="line">                    tab[i] = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; tab.length; i ++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (tab[idx] != <span class="literal">null</span> &amp;&amp; tab[idx].key == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> tab[idx].value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K, V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-08.png" alt="img"></p>
<ul>
<li>å¼€æ”¾å¯»å€çš„è®¾è®¡ä¼šå¯¹ç¢°æ’çš„å…ƒç´ ï¼Œå¯»æ‰¾å“ˆå¸Œæ¡¶ä¸Šæ–°çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä»å½“å‰ç¢°æ’ä½ç½®å¼€å§‹å‘åå¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºçš„ä½ç½®å­˜æ”¾ã€‚</li>
<li>åœ¨ ThreadLocal çš„å®ç°ä¸­ä¼šä½¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—ã€ç´¢å¼•è®¡ç®—ç´¯åŠ ã€å¯å‘å¼æ¸…ç†ã€æ¢æµ‹å¼æ¸…ç†ç­‰æ“ä½œï¼Œä»¥ä¿è¯å°½å¯èƒ½å°‘çš„ç¢°æ’ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap03</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap03ByOpenAddressing</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;05&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-09.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.382</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.387</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.387</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - æ•°æ®ç»“æ„ï¼šHashMap&#123;tab=[<span class="literal">null</span>,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;01&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;èŠ±èŠ±&quot;</span>&#125;,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;09&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è›‹è›‹&quot;</span>&#125;,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;12&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è‹—è‹—&quot;</span>&#125;,<span class="literal">null</span>,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;05&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è±†è±†&quot;</span>&#125;,<span class="literal">null</span>,<span class="literal">null</span>]&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå¼€æ”¾å¯»å€å¯¹ç¢°æ’å…ƒç´ çš„å¯»å€å­˜æ”¾ï¼Œä¹Ÿæ˜¯å¯ç”¨è§£å†³å“ˆå¸Œç´¢å¼•å†²çªé—®é¢˜çš„ã€‚</li>
</ul>
<h2 id="å››-å¸¸è§é¢è¯•é—®é¢˜"><a class="markdownIt-Anchor" href="#å››-å¸¸è§é¢è¯•é—®é¢˜">#</a> å››ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<ul>
<li>
<p>ä»‹ç»ä¸€ä¸‹æ•£åˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨ï¼ˆHash Tableï¼‰æ˜¯ä¸€ç§åŸºäºå“ˆå¸Œå‡½æ•°è¿›è¡Œå¿«é€Ÿè®¿é—®çš„æ•°æ®ç»“æ„ï¼Œå…·æœ‰æé«˜çš„æŸ¥è¯¢å’Œæ’å…¥æ•ˆç‡ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†è¦å­˜å‚¨çš„æ•°æ®å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„ä½ç½®ä¸Šï¼Œç„¶ååœ¨è¯¥ä½ç½®ä¸Šè¿›è¡ŒæŸ¥æ‰¾æˆ–æ’å…¥æ“ä½œ</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨æ•£åˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨ä¹‹æ‰€ä»¥è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥æ”¯æŒå¸¸æ•°çº§åˆ«çš„æŸ¥è¯¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆäºå¤„ç†å¤§è§„æ¨¡æ•°æ®å’Œå®æ—¶æ•°æ®çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨æœç´¢å¼•æ“ä¸­ï¼Œéœ€è¦å¯¹æ•°åäº¿æ¡æ•°æ®è¿›è¡Œå¿«é€Ÿæ£€ç´¢ï¼Œæ•£åˆ—è¡¨å°±æ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‹‰é“¾å¯»å€å’Œå¼€æ”¾å¯»å€çš„åŒºåˆ«</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨çš„ä¸»è¦é—®é¢˜æ˜¯å“ˆå¸Œå†²çªï¼Œåœ¨ä¸åŒçš„é”®è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®ä¸Šæ—¶ï¼Œå°±ä¼šäº§ç”Ÿå“ˆå¸Œå†²çªã€‚ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªï¼Œå¸¸è§çš„æ–¹æ³•æœ‰æ‹‰é“¾æ³•å’Œå¼€æ”¾å¯»å€ã€‚</span><br><span class="line"></span><br><span class="line">æ‹‰é“¾æ³•æ˜¯æŒ‡åœ¨å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªä½ç½®ä¸Šç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œå½“å¤šä¸ªé”®æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®æ—¶ï¼Œå®ƒä»¬ä¼šè¢«ä¿å­˜åœ¨è¯¥ä½ç½®å¯¹åº”çš„é“¾è¡¨ä¸Šã€‚æŸ¥æ‰¾æŸä¸ªé”®æ—¶ï¼Œå…ˆæ ¹æ®å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºè¯¥é”®åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œç„¶ååœ¨è¯¥ä½ç½®å¯¹åº”çš„é“¾è¡¨ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚</span><br><span class="line"></span><br><span class="line">å¼€æ”¾å¯»å€æ˜¯æŒ‡å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œé€šè¿‡æ¢æµ‹ï¼ˆprobingï¼‰å¯»æ‰¾å“ˆå¸Œè¡¨ä¸­ä¸‹ä¸€ä¸ªç©ºçš„ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°å¯ä»¥å­˜å‚¨è¯¥é”®çš„ä½ç½®æˆ–è€…éå†äº†æ•´ä¸ªå“ˆå¸Œè¡¨ã€‚å…·ä½“çš„æ¢æµ‹æ–¹æ³•åŒ…æ‹¬çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹ã€åŒé‡å“ˆå¸Œç­‰ã€‚æŸ¥æ‰¾æŸä¸ªé”®æ—¶ï¼Œè®¡ç®—è¯¥é”®åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œå¹¶åœ¨è¯¥ä½ç½®åŠå…¶åç»­ä½ç½®ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿˜æœ‰å…¶ä»–ä»€ä¹ˆæ–¹å¼å¯ä»¥è§£å†³æ•£åˆ—å“ˆå¸Œç´¢å¼•å†²çª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šé™¤äº†æ‹‰é“¾æ³•å’Œå¼€æ”¾å¯»å€ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çªï¼Œå¦‚å†å“ˆå¸Œæ³•ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒºç­‰ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯¹åº”çš„ Java æºç ä¸­ï¼Œå¯¹äºå“ˆå¸Œç´¢å¼•å†²çªæä¾›äº†ä»€ä¹ˆæ ·çš„è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šåœ¨ Java ä¸­ï¼Œå¯¹äºå“ˆå¸Œç´¢å¼•å†²çªï¼Œä¸€èˆ¬ä½¿ç”¨æ‹‰é“¾æ³•æ¥å¤„ç†ã€‚Java çš„ HashMap å’Œ Hashtable éƒ½é‡‡ç”¨äº†æ‹‰é“¾æ³•ï¼Œå¹¶æ”¯æŒåŠ¨æ€æ‰©å®¹å’Œç¼©å®¹ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®è§„æ¨¡ã€‚åŒæ—¶ï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåœ¨ Java 8 ä¸­ï¼ŒHashMap è¿˜å¼•å…¥äº†çº¢é»‘æ ‘ï¼Œç”¨äºä¼˜åŒ–é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æƒ…å½¢ã€‚</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T07:53:40.000Z" title="2023-5-6 15:53:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:34:27.391Z" title="2023-5-9 8:34:27">2023-05-09</time>æ›´æ–°</span><span class="level-item">17 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2577ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0ArrayList/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°ArrayList</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°arraylist"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°arraylist">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° ArrayList</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<h3 id="æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹">#</a> æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹ï¼Ÿ</h3>
<p>æ•°ç»„åªæ˜¯ä¸ªåç§°ï¼Œå®ƒå¯ä»¥æè¿°ä¸€ç»„æ“ä½œï¼Œä¹Ÿå¯ä»¥å‘½åè¿™ç»„æ“ä½œã€‚æ•°ç»„çš„æ•°æ®æ“ä½œï¼Œæ˜¯é€šè¿‡ idx-&gt;val çš„æ–¹å¼æ¥å¤„ç†ã€‚å®ƒä¸æ˜¯å…·ä½“è¦æ±‚å†…å­˜ä¸Šè¦å­˜å‚¨ç€è¿ç»­çš„æ•°æ®æ‰å«æ•°ç»„ï¼Œè€Œæ˜¯è¯´ï¼Œé€šè¿‡è¿ç»­çš„ç´¢å¼• idxï¼Œä¹Ÿå¯ä»¥çº¿æ€§è®¿é—®ç›¸é‚»çš„æ•°æ®ã€‚</p>
<p>é‚£ä¹ˆå½“ä½ å®šä¹‰äº†æ•°æ®çš„å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå°±å®šä¹‰äº†æ•°æ®ç»“æ„ã€‚æ‰€ä»¥å®ƒä¹Ÿæ˜¯è¢«å½’ç±»ä¸ºæ•°æ®ç»“æ„ã€‚</p>
<h2 id="äºŒ-æ•°ç»„æ•°æ®ç»“æ„"><a class="markdownIt-Anchor" href="#äºŒ-æ•°ç»„æ•°æ®ç»“æ„">#</a> äºŒã€æ•°ç»„æ•°æ®ç»“æ„</h2>
<p>æ•°ç»„ï¼ˆArrayï¼‰æ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ã€‚å®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹æ•°æ®çš„é›†åˆã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-01.png" alt="img"></p>
<p>æ•°ç»„çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ•°ç»„æ˜¯ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ é›†åˆï¼ˆint ä¸èƒ½å­˜æ”¾ doubleï¼‰</li>
<li>æ•°ç»„ä¸­å„å…ƒç´ çš„å­˜å‚¨æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­æŒ‰ç…§è¿™ä¸ªé¡ºåºè¿ç»­å­˜æ”¾åˆ°ä¸€èµ·ã€‚å†…å­˜åœ°å€è¿ç»­ã€‚</li>
<li>æ•°ç»„è·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O (1)</li>
</ol>
<h3 id="1-ä¸€ç»´æ•°ç»„"><a class="markdownIt-Anchor" href="#1-ä¸€ç»´æ•°ç»„">#</a> 1. ä¸€ç»´æ•°ç»„</h3>
<p>ä¸€ç»´æ•°ç»„æ˜¯æœ€å¸¸ç”¨çš„æ•°ç»„ï¼Œå…¶ä»–å¾ˆå¤šæ•°æ®ç»“æ„çš„å˜ç§ä¹Ÿéƒ½æ˜¯ä»ä¸€ç»´æ•°ç»„æ¥çš„ã€‚ä¾‹å¦‚ HashMap çš„æ‹‰é“¾å¯»å€ç»“æ„ï¼ŒThreadLocal çš„å¼€æ”¾å¯»å€ç»“æ„ï¼Œéƒ½æ˜¯ä»ä¸€ç»´æ•°ç»„ä¸Šå®ç°çš„ã€‚</p>
<h3 id="2-äºŒç»´æ•°ç»„"><a class="markdownIt-Anchor" href="#2-äºŒç»´æ•°ç»„">#</a> 2. äºŒç»´æ•°ç»„</h3>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-02.png" alt="img"></p>
<p>äºŒç»´ä»¥åŠå¤šç»´æ•°ç»„ï¼Œåœ¨å¼€å‘åœºæ™¯ä¸­ä½¿ç”¨åˆ°çš„åˆ°æ˜¯ä¸å¤šï¼Œä¸è¿‡åœ¨ä¸€äº›ç®—æ³•é€»è¾‘ï¼Œæ•°å­¦è®¡ç®—ä¸­åˆ°æ˜¯å¯ä»¥ä½¿ç”¨ã€‚</p>
<h2 id="ä¸‰-å®ç°æ•°ç»„åˆ—è¡¨"><a class="markdownIt-Anchor" href="#ä¸‰-å®ç°æ•°ç»„åˆ—è¡¨">#</a> ä¸‰ã€å®ç°æ•°ç»„åˆ—è¡¨</h2>
<p>åœ¨ Java çš„æºç ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¾ˆå¤šå…¶ä»–æ•°æ®ç»“æ„ä¹Ÿéƒ½æœ‰æ•°ç»„çš„å½±å­ã€‚</p>
<h3 id="1-åŸºæœ¬è®¾è®¡"><a class="markdownIt-Anchor" href="#1-åŸºæœ¬è®¾è®¡">#</a> 1. åŸºæœ¬è®¾è®¡</h3>
<p>æ•°ç»„æ˜¯ä¸€ä¸ªå›ºå®šçš„ã€è¿ç»­çš„ã€çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆæƒ³æŠŠå®ƒä½œä¸ºä¸€ä¸ªè‡ªåŠ¨æ‰©å±•å®¹é‡çš„æ•°ç»„åˆ—è¡¨ï¼Œåˆ™éœ€è¦åšä¸€äº›æ‰©å±•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤åˆå§‹åŒ–ç©ºé—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç©ºå…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayList å…ƒç´ æ•°ç»„ç¼“å­˜åŒº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br></pre></td></tr></table></figure>
<ol>
<li>åˆå§‹åŒ– ArrayList é˜¶æ®µï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤ä¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å…ƒç´ ã€‚è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰é»˜è®¤é•¿åº¦çš„ã€‚</li>
<li>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ç»™åˆå§‹åŒ–çš„é•¿åº¦å‘¢ï¼Ÿæ˜¯åœ¨é¦–æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå› ä¸ºæ‰€æœ‰çš„æ·»åŠ å…ƒç´ æ“ä½œï¼Œä¹Ÿéƒ½æ˜¯éœ€è¦åˆ¤æ–­å®¹é‡ï¼Œä»¥åŠæ˜¯å¦æ‰©å®¹çš„ã€‚é‚£ä¹ˆåœ¨ add æ·»åŠ å…ƒç´ æ—¶ç»Ÿä¸€å®Œæˆè¿™ä¸ªäº‹æƒ…ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½å¤„ç†çš„ã€‚</li>
<li>ä¹‹åå°±æ˜¯éšç€å…ƒç´ çš„æ·»åŠ ï¼Œå®¹é‡æ˜¯ä¼šä¸è¶³çš„ã€‚å½“å®¹é‡ä¸è¶³çš„æ˜¯ï¼Œéœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚åŒæ—¶è¿˜å¾—éœ€è¦æŠŠæ—§æ•°æ®è¿ç§»åˆ°æ–°çš„æ•°ç»„ä¸Šã€‚<em>æ‰€ä»¥æ•°æ®çš„è¿ç§»ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ</em></li>
</ol>
<h3 id="2-æ·»åŠ å…ƒç´ "><a class="markdownIt-Anchor" href="#2-æ·»åŠ å…ƒç´ ">#</a> 2. æ·»åŠ å…ƒç´ </h3>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-03.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿å†…éƒ¨å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">minCapacity</span> <span class="operator">=</span> size + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ‰©å®¹æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        &#125;</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™æ˜¯ä¸€ä»½ç®€åŒ–åçš„ ArrayList#add æ“ä½œ</strong></p>
<ol>
<li>åˆ¤æ–­å½“å‰å®¹é‡ä¸åˆå§‹åŒ–å®¹é‡ï¼Œä½¿ç”¨ Math.max å‡½æ•°å–æœ€å¤§å€¼æœ€ä¸ºæœ€å°åˆå§‹åŒ–ç©ºé—´ã€‚</li>
<li>æ¥ä¸‹æ¥æ˜¯åˆ¤æ–­ minCapacity å’Œå…ƒç´ çš„æ•°é‡ï¼Œæ˜¯å¦è¾¾åˆ°äº†æ‰©å®¹ã€‚é¦–æ¬¡åˆ›å»º ArrayList æ˜¯ä¸€å®šä¼šæ‰©å®¹çš„ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ– DEFAULT_CAPACITY = 10 çš„å®¹é‡ã€‚</li>
<li>Arrays.copyOf å®é™…ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºé—´æ•°ç»„ï¼Œä¹‹åè°ƒç”¨çš„ System.arraycopy è¿ç§»åˆ°æ–°åˆ›å»ºçš„æ•°ç»„ä¸Šã€‚è¿™æ ·åç»­æ‰€æœ‰çš„æ‰©å®¹æ“ä½œï¼Œä¹Ÿå°±éƒ½ä¿æŒç»Ÿä¸€äº†ã€‚</li>
<li>ArrayList æ‰©å®¹å®Œæˆåï¼Œå°±æ˜¯ä½¿ç”¨ elementData [size++] = e; æ·»åŠ å…ƒç´ æ“ä½œäº†ã€‚</li>
</ol>
<h3 id="3-ç§»é™¤å…ƒç´ "><a class="markdownIt-Anchor" href="#3-ç§»é™¤å…ƒç´ ">#</a> 3. ç§»é™¤å…ƒç´ </h3>
<p>ArrayList çš„é‡ç‚¹ç¦»ä¸å¼€å¯¹ System.arraycopy çš„ä½¿ç”¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ ä»åŸæ•°ç»„çš„ç‰¹å®šä½ç½®ï¼Œè¿ç§»åˆ°æ–°æ•°ç»„çš„æŒ‡å®šä½ç½®å’Œè¿ç§»æ•°é‡ã€‚å¦‚å›¾ 2-5 æ‰€ç¤ºï¼Œæ•°æ®è¿ç§» <em>æµ‹è¯•ä»£ç åœ¨ java-algorithms</em></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-05.png" alt="img"></p>
<p><strong>åˆ é™¤å…ƒç´ </strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> (E) elementData[index];</span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// ä»åŸå§‹æ•°ç»„çš„æŸä¸ªä½ç½®ï¼Œæ‹·è´åˆ°ç›®æ ‡å¯¹è±¡çš„æŸä¸ªä½ç½®å¼€å§‹ånä¸ªå…ƒç´ </span></span><br><span class="line">        System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    &#125;</span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ArrayList çš„å…ƒç´ åˆ é™¤ï¼Œå°±æ˜¯åœ¨ç¡®å®šå‡ºå…ƒç´ ä½ç½®åï¼Œä½¿ç”¨ System.arraycopy æ‹·è´æ•°æ®æ–¹å¼ç§»åŠ¨æ•°æ®ï¼ŒæŠŠéœ€è¦åˆ é™¤çš„å…ƒç´ ä½ç½®è¦†ç›–æ‰ã€‚</li>
<li>æ­¤å¤–å®ƒè¿˜ä¼šæŠŠå·²ç»åˆ é™¤çš„å…ƒç´ è®¾ç½®ä¸º null ä¸€æ–¹é¢è®©æˆ‘ä»¬ä¸ä¼šåœ¨è¯»å–åˆ°è¿™ä¸ªå…ƒç´ ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº† GC</li>
</ul>
<h3 id="4-è·å–å…ƒç´ "><a class="markdownIt-Anchor" href="#4-è·å–å…ƒç´ ">#</a> 4. è·å–å…ƒç´ </h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ArrayList&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;elementData=&quot;</span> + Arrays.toString(elementData) +</span><br><span class="line">            <span class="string">&quot;, size=&quot;</span> + size +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å…ƒç´ å°±æ¯”è¾ƒç®€å•äº†ï¼Œç›´æ¥ä» elementData ä½¿ç”¨ç´¢å¼•ç›´æ¥è·å–å³å¯ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ª O (1) æ“ä½œã€‚ä¹Ÿæ­£å› ä¸ºæœç´¢å…ƒç´ çš„ä¾¿æ·æ€§ï¼Œæ‰è®© ArrayList ä½¿ç”¨çš„é‚£ä¹ˆå¹¿æ³›ã€‚åŒæ—¶ä¸ºäº†å…¼å®¹å¯ä»¥é€šè¿‡å…ƒç´ æ¥è·å–æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥é€šè¿‡ä¸‹æ ‡ï¼Œå¼•å‡ºäº† HashMap ä½¿ç”¨å“ˆå¸Œå€¼è®¡ç®—ä¸‹æ ‡çš„è®¡ç®—æ–¹å¼ï¼Œä¹Ÿå¼•å‡ºäº†æ–æ³¢é‚£å¥‘æ•£åˆ—ã€‚å®ƒä»¬çš„è®¾è®¡éƒ½æ˜¯åœ¨å°½å¯èƒ½å‡å°‘å…ƒç´ ç¢°æ’çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½ä½¿ç”¨è´´è¿‘ O (1) çš„æ—¶é—´å¤æ‚åº¦è·å–æ•°æ®ã€‚<em>è¿™äº›å†…å®¹çš„å­¦ä¹ å¯ä»¥é˜…è¯»å°å‚…å“¥çš„ã€ŠJava é¢ç»æ‰‹å†Œã€‹ä¹Ÿå¯ä»¥éšç€æœ¬ç³»åˆ—ç« èŠ‚å†…å®¹çš„é“ºè®¾é€æ­¥è¦†ç›–åˆ°ç®—æ³•åè¿›è¡Œå­¦ä¹ </em></li>
</ul>
<h2 id="å››-æ•°ç»„åˆ—è¡¨æµ‹è¯•"><a class="markdownIt-Anchor" href="#å››-æ•°ç»„åˆ—è¡¨æµ‹è¯•">#</a> å››ã€æ•°ç»„åˆ—è¡¨æµ‹è¯•</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_array_list</span><span class="params">()</span> &#123;</span><br><span class="line">    cn.bugstack.algorithms.data.array.List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    list.add(<span class="string">&quot;01&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;02&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;03&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;04&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;05&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;06&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;07&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;08&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;09&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;11&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;12&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(list);</span><br><span class="line">    </span><br><span class="line">    list.remove(<span class="number">9</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-06.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&#123;elementData=[<span class="number">01</span>, <span class="number">02</span>, <span class="number">03</span>, <span class="number">04</span>, <span class="number">05</span>, <span class="number">06</span>, <span class="number">07</span>, 08, 09, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>], size=<span class="number">12</span>&#125;</span><br><span class="line">ArrayList&#123;elementData=[<span class="number">01</span>, <span class="number">02</span>, <span class="number">03</span>, <span class="number">04</span>, <span class="number">05</span>, <span class="number">06</span>, <span class="number">07</span>, 08, 09, <span class="number">11</span>, <span class="number">12</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>], size=<span class="number">11</span>&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æµ‹è¯•æ¡ˆä¾‹ä¸­åŒ…æ‹¬äº†åœ¨æˆ‘ä»¬è‡ªå·±å®ç°çš„ ArrayList ä¸­é¡ºåºæ·»åŠ å…ƒç´ ï¼Œé€æ­¥æµ‹è¯•æ‰©å®¹è¿ç§»å…ƒç´ ï¼Œä»¥åŠåˆ é™¤å…ƒç´ åæ•°æ®çš„è¿ç§»ã€‚</li>
<li>æœ€ç»ˆçš„æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œä¸€å…±æœ‰ 12 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ idx=9 çš„å…ƒç´ è¢«åˆ é™¤å‰åï¼Œå…ƒç´ çš„è¿ç§»å˜åŒ–ã€‚</li>
</ul>
<h2 id="å…­-å¸¸è§é¢è¯•é—®é¢˜"><a class="markdownIt-Anchor" href="#å…­-å¸¸è§é¢è¯•é—®é¢˜">#</a> å…­ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<p>æ•°æ®ç»“æ„ä¸­æœ‰å“ªäº›æ˜¯çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šçº¿æ€§è¡¨æ•°æ®ç»“æ„æ˜¯æŒ‡ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ã€‚å¸¸è§çš„çº¿æ€§è¡¨æ•°æ®ç»“æ„åŒ…æ‹¬ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆå’Œé˜Ÿåˆ—ç­‰ã€‚</span><br></pre></td></tr></table></figure>
<p>æ•°ç»„çš„å…ƒç´ åˆ é™¤å’Œè·å–ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•°ç»„çš„å…ƒç´ åˆ é™¤å’Œè·å–çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(1)ï¼Œå› ä¸ºæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®å…ƒç´ ã€‚åˆ é™¤æ“ä½œé€šå¸¸æ˜¯å°†å¾…åˆ é™¤å…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œç„¶åå°†æ•°ç»„é•¿åº¦å‡ä¸€ï¼›è·å–æ“ä½œåˆ™æ˜¯ç›´æ¥è¿”å›å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ å€¼ã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList ä¸­é»˜è®¤çš„åˆå§‹åŒ–é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šArrayList ä¸­é»˜è®¤çš„åˆå§‹åŒ–é•¿åº¦æ˜¯10ã€‚åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆå§‹å®¹é‡ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤å®¹é‡ 10 åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList ä¸­æ‰©å®¹çš„èŒƒå›´æ˜¯å¤šå¤§ä¸€æ¬¡ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šArrayList ä¸­æ‰©å®¹çš„èŒƒå›´æ˜¯æ¯æ¬¡å¢åŠ åŸæ¥æ•°ç»„å¤§å°çš„ä¸€åŠã€‚å½“ ArrayList å®¹é‡ä¸è¶³ä»¥å®¹çº³æ›´å¤šå…ƒç´ æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹æ“ä½œã€‚å…·ä½“æ¥è¯´ï¼ŒArrayList æ‰©å®¹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶å¤§å°ä¸ºåŸæ¥æ•°ç»„å¤§å°çš„ 1.5 å€ï¼Œç„¶åå°†åŸæ¥æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚è¯¥æ‰©å®¹ç­–ç•¥å¯ä»¥ä¿è¯ ArrayList åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åªéœ€è¦è¿›è¡Œå°‘æ•°å‡ æ¬¡æ‰©å®¹æ“ä½œã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList æ˜¯å¦‚ä½•å®Œæˆæ‰©å®¹çš„ï¼ŒSystem.arraycopy å„ä¸ªå…¥å‚çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">ArrayList æ˜¯é€šè¿‡ System.arraycopy() æ–¹æ³•å®Œæˆæ‰©å®¹æ“ä½œçš„ã€‚å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">1.å½“æ·»åŠ æ–°å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰å†…éƒ¨æ•°ç»„å·²ç»æ»¡äº†ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</span><br><span class="line">2.é¦–å…ˆè®¡ç®—å‡ºæ–°æ•°ç»„çš„å¤§å°ï¼Œå…¶å¤§å°ä¸ºåŸæœ‰æ•°ç»„å¤§å°çš„ 1.5 å€ã€‚</span><br><span class="line">3.åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¹¶å°†åŸæœ‰æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚è¿™é‡Œä½¿ç”¨ System.arraycopy() æ–¹æ³•æ¥å®Œæˆå…ƒç´ çš„å¤åˆ¶æ“ä½œï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŸæ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸæ•°ç»„ä¸­éœ€è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ•°ç»„ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ•°ç»„ä¸­å­˜æ”¾å¤åˆ¶æ•°æ®çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äº”ä¸ªå‚æ•°æ˜¯éœ€è¦å¤åˆ¶çš„å…ƒç´ ä¸ªæ•°ã€‚</span><br><span class="line">4.æœ€åï¼Œå°† ArrayList çš„å†…éƒ¨æ•°ç»„è®¾ç½®ä¸ºæ–°æ•°ç»„ã€‚</span><br><span class="line"></span><br><span class="line">System.arraycopy() æ–¹æ³•å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥åˆ©ç”¨åº•å±‚ç³»ç»Ÿçº§åˆ«çš„å†…å­˜å¤åˆ¶æœºåˆ¶è¿›è¡Œæ•°æ®å¤åˆ¶ï¼Œé¿å…äº†é€šè¿‡å¾ªç¯é€ä¸ªå¤åˆ¶å…ƒç´ çš„ä½æ•ˆç‡é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T05:53:40.000Z" title="2023-5-6 13:53:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-09T00:35:14.857Z" title="2023-5-9 8:35:14">2023-05-09</time>æ›´æ–°</span><span class="level-item">16 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2436ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0LinkedList/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°LinkedList</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt=""></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°linkedlist"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°linkedlist">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° LinkedList</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<h4 id="é“¾è¡¨çš„å†å²"><a class="markdownIt-Anchor" href="#é“¾è¡¨çš„å†å²">#</a> é“¾è¡¨çš„å†å²</h4>
<p>äº 1955-1956 å¹´ï¼Œç”±å…°å¾·å…¬å¸çš„ Allen Newellã€Cliff Shaw å’Œ Herbert A. Simon å¼€å‘äº†é“¾è¡¨ï¼Œä½œä¸ºä»–ä»¬çš„ä¿¡æ¯å¤„ç†è¯­è¨€çš„ä¸»è¦æ•°æ®ç»“æ„ã€‚é“¾è¡¨çš„å¦ä¸€ä¸ªæ—©æœŸå‡ºç°æ˜¯ç”± Hans Peter Luhn åœ¨ 1953 å¹´ 1 æœˆç¼–å†™çš„ IBM å†…éƒ¨å¤‡å¿˜å½•å»ºè®®åœ¨é“¾å¼å“ˆå¸Œè¡¨ä¸­ä½¿ç”¨é“¾è¡¨ã€‚</p>
<p>åˆ° 1960 å¹´ä»£åˆï¼Œé“¾è¡¨å’Œä½¿ç”¨è¿™äº›ç»“æ„ä½œä¸ºä¸»è¦æ•°æ®è¡¨ç¤ºçš„è¯­è¨€çš„å®ç”¨æ€§å·²ç»å¾ˆå¥½åœ°å»ºç«‹èµ·æ¥ã€‚MIT æ—è‚¯å®éªŒå®¤çš„ Bert Green äº 1961 å¹´ 3 æœˆåœ¨ IRE Transactions on Human Factors in Electronics ä¸Šå‘è¡¨äº†ä¸€ç¯‡é¢˜ä¸º â€œç”¨äºç¬¦å·æ“ä½œçš„è®¡ç®—æœºè¯­è¨€â€ çš„è¯„è®ºæ–‡ç« ï¼Œæ€»ç»“äº†é“¾è¡¨æ–¹æ³•çš„ä¼˜ç‚¹ã€‚1964 å¹´ 4 æœˆï¼ŒBobrow å’Œ Raphael çš„ä¸€ç¯‡è¯„è®ºæ–‡ç«  â€œåˆ—è¡¨å¤„ç†è®¡ç®—æœºè¯­è¨€çš„æ¯”è¾ƒâ€ å‘è¡¨åœ¨ ACM é€šè®¯ä¸­ã€‚</p>
<h2 id="äºŒ-é“¾è¡¨æ•°æ®ç»“æ„"><a class="markdownIt-Anchor" href="#äºŒ-é“¾è¡¨æ•°æ®ç»“æ„">#</a> äºŒã€é“¾è¡¨æ•°æ®ç»“æ„</h2>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé“¾è¡¨æ˜¯æ•°æ®å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…ƒç´ çš„çº¿æ€§é¡ºåºä¸æ˜¯ç”±å®ƒä»¬åœ¨å†…å­˜ä¸­çš„ç‰©ç†åœ°å€ç»™å‡ºçš„ã€‚å®ƒæ˜¯ç”±ä¸€ç»„èŠ‚ç‚¹ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿™äº›èŠ‚ç‚¹ä¸€èµ·ï¼Œè¡¨ç¤ºçº¿æ€§åºåˆ—ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-01.png" alt="img"></p>
<p>åœ¨æœ€ç®€å•çš„é“¾è¡¨ç»“æ„ä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æ•°æ®å’ŒæŒ‡é’ˆï¼ˆå­˜æ”¾æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œè¿™ç§æ•°æ®ç»“æ„å…è®¸åœ¨è¿­ä»£æ—¶æœ‰æ•ˆåœ°ä»åºåˆ—ä¸­çš„ä»»ä½•ä½ç½®æ’å…¥æˆ–åˆ é™¤å…ƒç´ ã€‚</p>
<p>é“¾è¡¨çš„æ•°æ®ç»“æ„é€šè¿‡é“¾çš„è¿æ¥æ–¹å¼ï¼Œæä¾›äº†å¯ä»¥ä¸éœ€è¦æ‰©å®¹ç©ºé—´å°±æ›´é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ“ä½œï¼Œåœ¨é€‚åˆçš„åœºæ™¯ä¸‹å®ƒæ˜¯ä¸€ç§éå¸¸æ–¹ä¾¿çš„æ•°æ®ç»“æ„ã€‚ä½†åœ¨ä¸€äº›éœ€è¦éå†ã€æŒ‡å®šä½ç½®æ“ä½œã€æˆ–è€…è®¿é—®ä»»æ„å…ƒç´ ä¸‹ï¼Œæ˜¯éœ€è¦å¾ªç¯éå†çš„ï¼Œè¿™å°†å¯¼è‡´æ—¶é—´å¤æ‚åº¦çš„æå‡ã€‚</p>
<h2 id="ä¸‰-é“¾è¡¨åˆ†ç±»ç±»å‹"><a class="markdownIt-Anchor" href="#ä¸‰-é“¾è¡¨åˆ†ç±»ç±»å‹">#</a> ä¸‰ã€é“¾è¡¨åˆ†ç±»ç±»å‹</h2>
<p>é“¾è¡¨çš„ä¸»è¦è¡¨ç°å½¢å¼åˆ†ä¸ºï¼›å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€å¾ªç¯é“¾è¡¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</p>
<h3 id="1-å•å‘é“¾è¡¨"><a class="markdownIt-Anchor" href="#1-å•å‘é“¾è¡¨">#</a> 1. å•å‘é“¾è¡¨</h3>
<p>å•é“¾è¡¨åŒ…å«å…·æœ‰æ•°æ®å­—æ®µçš„èŠ‚ç‚¹ä»¥åŠæŒ‡å‘èŠ‚ç‚¹è¡Œä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ â€œä¸‹ä¸€ä¸ªâ€ å­—æ®µã€‚å¯ä»¥å¯¹å•é“¾è¡¨æ‰§è¡Œçš„æ“ä½œåŒ…æ‹¬æ’å…¥ã€åˆ é™¤å’Œéå†ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-02.png" alt="img"></p>
<h3 id="2-åŒå‘é“¾è¡¨"><a class="markdownIt-Anchor" href="#2-åŒå‘é“¾è¡¨">#</a> 2. åŒå‘é“¾è¡¨</h3>
<p>åœ¨ â€œåŒå‘é“¾è¡¨â€ ä¸­ï¼Œé™¤äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹é“¾æ¥ä¹‹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿˜åŒ…å«æŒ‡å‘åºåˆ—ä¸­ â€œå‰ä¸€ä¸ªâ€ èŠ‚ç‚¹çš„ç¬¬äºŒä¸ªé“¾æ¥å­—æ®µã€‚è¿™ä¸¤ä¸ªé“¾æ¥å¯ä»¥ç§°ä¸ºâ€™forwardï¼ˆâ€˜sâ€™ï¼‰å’Œâ€™backwardsâ€™ï¼Œæˆ–â€™nextâ€™å’Œâ€™prevâ€™ï¼ˆâ€˜previousâ€™ï¼‰ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-03.png" alt="img"></p>
<h3 id="3-å¾ªç¯é“¾è¡¨"><a class="markdownIt-Anchor" href="#3-å¾ªç¯é“¾è¡¨">#</a> 3. å¾ªç¯é“¾è¡¨</h3>
<p>åœ¨åˆ—è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸­ï¼Œé“¾æ¥å­—æ®µé€šå¸¸åŒ…å«ä¸€ä¸ªç©ºå¼•ç”¨ï¼Œä¸€ä¸ªç‰¹æ®Šçš„å€¼ç”¨äºæŒ‡ç¤ºç¼ºå°‘è¿›ä¸€æ­¥çš„èŠ‚ç‚¹ã€‚ä¸€ä¸ªä¸å¤ªå¸¸è§çš„çº¦å®šæ˜¯è®©å®ƒæŒ‡å‘åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ—è¡¨è¢«ç§°ä¸º â€œå¾ªç¯â€ æˆ– â€œå¾ªç¯é“¾æ¥â€ï¼›å¦åˆ™ï¼Œå®ƒè¢«ç§°ä¸º â€œå¼€æ”¾â€ æˆ– â€œçº¿æ€§â€ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-04.png" alt="img"></p>
<h2 id="å››-å®ç°ä¸€ä¸ªé“¾è¡¨"><a class="markdownIt-Anchor" href="#å››-å®ç°ä¸€ä¸ªé“¾è¡¨">#</a> å››ã€å®ç°ä¸€ä¸ªé“¾è¡¨</h2>
<h3 id="1-é“¾è¡¨èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#1-é“¾è¡¨èŠ‚ç‚¹">#</a> 1. é“¾è¡¨èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é“¾è¡¨çš„æ•°æ®ç»“æ„æ ¸å¿ƒæ ¹åŸºå°±åœ¨äºèŠ‚ç‚¹å¯¹è±¡çš„ä½¿ç”¨ï¼Œå¹¶åœ¨èŠ‚ç‚¹å¯¹è±¡ä¸­å…³è”å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼æ„å»ºå‡ºé“¾è¡¨ç»“æ„ã€‚</li>
<li>ä½†ä¹Ÿå› ä¸ºåœ¨é“¾è¡¨ä¸Šæ·»åŠ æ¯ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åˆ›å»ºæ–°çš„ Node èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸€éƒ¨åˆ†è€—æ—¶çš„æ“ä½œã€‚</li>
</ul>
<h3 id="2-å¤´æ’èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#2-å¤´æ’èŠ‚ç‚¹">#</a> 2. å¤´æ’èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">linkFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, e, f);</span><br><span class="line">    first = newNode;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="literal">null</span>)</span><br><span class="line">        last = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-05.png" alt="img"></p>
<ul>
<li>å¤´æ’çš„æ“ä½œæµç¨‹ï¼Œå…ˆæŠŠå¤´èŠ‚ç‚¹è®°å½•ä¸‹æ¥ã€‚ä¹‹ååˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ–°çš„èŠ‚ç‚¹æ„é€ å‡½æ•°çš„å¤´èŠ‚ç‚¹å…¥å‚ä¸º nullï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æ„å»ºå‡ºä¸€ä¸ªæ–°çš„å¤´èŠ‚ç‚¹ã€‚</li>
<li>åŸæ¥çš„å¤´ç»“ç‚¹ï¼Œè®¾ç½® f.prev è¿æ¥åˆ°æ–°çš„å¤´èŠ‚ç‚¹ï¼Œè¿™æ ·çš„å°±å¯ä»¥å®Œæˆå¤´æ’çš„æ“ä½œäº†ã€‚å¦å¤–å¦‚æœåŸæ¥å°±æ²¡æœ‰å¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°çš„èŠ‚ç‚¹å³å¯ã€‚æœ€åè®°å½•å½“å‰é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä½ ä½¿ç”¨ LinkedList è·å– size æ—¶å€™å°±æ˜¯ä»è¿™ä¸ªå€¼è·å–çš„ã€‚</li>
</ul>
<h3 id="3-å°¾æ’èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#3-å°¾æ’èŠ‚ç‚¹">#</a> 3. å°¾æ’èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        l.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-06.png" alt="img"></p>
<ul>
<li>å°¾å·®èŠ‚ç‚¹ä¸å¤´æ’èŠ‚ç‚¹æ­£å¥½ç›¸åï¼Œé€šè¿‡è®°å½•å½“å‰çš„ç»“å°¾èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œå¹¶æŠŠå½“å‰çš„ç»“å°¾èŠ‚ç‚¹ï¼Œé€šè¿‡ l.next å…³è”åˆ°æ–°åˆ›å»ºçš„èŠ‚ç‚¹ä¸Šã€‚åŒæ—¶è®°å½• size èŠ‚ç‚¹æ•°é‡å€¼ã€‚</li>
</ul>
<h3 id="4-æ‹†é“¾æ“ä½œ"><a class="markdownIt-Anchor" href="#4-æ‹†é“¾æ“ä½œ">#</a> 4. æ‹†é“¾æ“ä½œ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    x.item = <span class="literal">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-07.png" alt="img"></p>
<ul>
<li>unlink æ˜¯ä¸€ç§æ‹†é“¾æ“ä½œï¼Œåªè¦ä½ ç»™å®šä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå°±å¯ä»¥æŠŠå½“å‰è¿™ä¸ªå…ƒç´ çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œç›¸è¿ï¼Œä¹‹åæŠŠè‡ªå·±æ‹†é™¤ã€‚</li>
<li>è¿™ä¸ªæ–¹æ³•å¸¸ç”¨äº remove ç§»é™¤å…ƒç´ æ“ä½œï¼Œå› ä¸ºæ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸éœ€è¦éå†ï¼Œæ‹†é™¤å…ƒç´ åä¹Ÿä¸éœ€è¦å¤åˆ¶æ–°çš„ç©ºé—´ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚è¯»ä¸º O (1)</li>
</ul>
<h3 id="5-åˆ é™¤èŠ‚ç‚¹"><a class="markdownIt-Anchor" href="#5-åˆ é™¤èŠ‚ç‚¹">#</a> 5. åˆ é™¤èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-08.png" alt="img"></p>
<ul>
<li>åˆ é™¤å…ƒç´ çš„è¿‡ç¨‹éœ€è¦ for å¾ªç¯åˆ¤æ–­æ¯”åˆ é™¤å…ƒç´ çš„å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œè¿›è¡Œåˆ é™¤ã€‚</li>
<li>å¾ªç¯æ¯”å¯¹çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª O (n) çš„æ“ä½œï¼Œåˆ é™¤çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª O (1) çš„æ“ä½œã€‚æ‰€ä»¥å¦‚æœè¿™ä¸ªé“¾è¡¨è¾ƒå¤§ï¼Œåˆ é™¤çš„å…ƒç´ åˆéƒ½æ˜¯è´´è¿‘ç»“å°¾ï¼Œé‚£ä¹ˆè¿™ä¸ªå¾ªç¯æ¯”å¯¹çš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚</li>
</ul>
<h2 id="äº”-é“¾è¡¨ä½¿ç”¨æµ‹è¯•"><a class="markdownIt-Anchor" href="#äº”-é“¾è¡¨ä½¿ç”¨æµ‹è¯•">#</a> äº”ã€é“¾è¡¨ä½¿ç”¨æµ‹è¯•</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    list.addFirst(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    list.addLast(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰“å°åˆ—è¡¨</span></span><br><span class="line">    list.printLinkList();</span><br><span class="line">    <span class="comment">// å¤´æ’å…ƒç´ </span></span><br><span class="line">    list.addFirst(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ é™¤å…ƒç´ </span></span><br><span class="line">    list.remove(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰“å°åˆ—è¡¨</span></span><br><span class="line">    list.printLinkList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç›®å‰çš„åˆ—è¡¨ï¼Œå¤´èŠ‚ç‚¹ï¼šb å°¾èŠ‚ç‚¹ï¼šc æ•´ä½“ï¼šbï¼Œaï¼Œcï¼Œ</span><br><span class="line">ç›®å‰çš„åˆ—è¡¨ï¼Œå¤´èŠ‚ç‚¹ï¼šd å°¾èŠ‚ç‚¹ï¼šc æ•´ä½“ï¼šdï¼Œaï¼Œcï¼Œ</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰ç…§æˆ‘ä»¬çš„æµ‹è¯•é“¾è¡¨å¯¹æ•°æ®çš„æ“ä½œè¿‡ç¨‹ï¼Œä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ»¡è¶³äº†é“¾è¡¨æ•°æ®ç»“æ„çš„ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="å…­-å¸¸è§é¢è¯•é—®é¢˜"><a class="markdownIt-Anchor" href="#å…­-å¸¸è§é¢è¯•é—®é¢˜">#</a> å…­ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<ul>
<li>
<p>æè¿°ä¸€ä¸‹é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">é“¾è¡¨æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œç”¨äºæŒ‰é¡ºåºå­˜å‚¨å’Œè®¿é—®å…ƒç´ é›†åˆã€‚å®ƒç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ•°æ®å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Java ä¸­ LinkedList ä½¿ç”¨çš„æ˜¯å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨è¿˜æ˜¯å¾ªç¯é“¾è¡¨ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">Java ä¸­çš„ LinkedList ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å‰ç½®èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚è¿™ä½¿å¾—åœ¨ LinkedList ä¸­è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•ˆç‡æ¯” ArrayList æ›´é«˜ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é“¾è¡¨ä¸­æ•°æ®çš„æ’å…¥ã€åˆ é™¤ã€è·å–å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">æ’å…¥å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</span><br><span class="line">åœ¨å¾…æ’å…¥ä½ç½®ä¹‹å‰æŸ¥æ‰¾å…ƒç´ O(n)</span><br><span class="line">å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®O(1)</span><br><span class="line">å› æ­¤ï¼Œæ’å…¥å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚</span><br><span class="line"></span><br><span class="line">åˆ é™¤å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</span><br><span class="line">åœ¨å¾…åˆ é™¤ä½ç½®ä¹‹å‰æŸ¥æ‰¾å…ƒç´ O(n)</span><br><span class="line">åˆ é™¤è¯¥ä½ç½®ä¸Šçš„å…ƒç´ O(1)</span><br><span class="line">å› æ­¤ï¼Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ã€‚</span><br><span class="line"></span><br><span class="line">è·å–å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­è·å–ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚</span><br><span class="line">å› æ­¤ï¼Œè·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨é“¾è¡¨æ›´åˆé€‚ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">1.é¢‘ç¹çš„è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œ</span><br><span class="line">2.ä¸éœ€è¦éšæœºè®¿é—®å…ƒç´ </span><br><span class="line">3.å•çº¯çš„éå†æ“ä½œ</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T05:58:11.000Z" title="2023-5-5 13:58:11">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T08:29:42.568Z" title="2023-5-5 16:29:42">2023-05-05</time>æ›´æ–°</span><span class="level-item">16 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2361ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/">ã€ç®—æ³•ã€‘ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="ç®—æ³•ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#ç®—æ³•ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦">#</a> ã€ç®—æ³•ã€‘ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</h1>
<h4 id="ç®—æ³•algorithmæ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®-è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•-å¯¹äºåŒä¸€ä¸ªé—®é¢˜ä½¿ç”¨ä¸åŒçš„ç®—æ³•ä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#ç®—æ³•algorithmæ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®-è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•-å¯¹äºåŒä¸€ä¸ªé—®é¢˜ä½¿ç”¨ä¸åŒçš„ç®—æ³•ä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«">#</a> ç®—æ³•ï¼ˆAlgorithmï¼‰æ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®ã€è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•ã€‚å¯¹äºåŒä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</h4>
<h4 id="é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢"><a class="markdownIt-Anchor" href="#é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢">#</a> é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢ï¼Ÿ</h4>
<p>ä¸»è¦è¿˜æ˜¯ä»ç®—æ³•æ‰€å ç”¨çš„ã€Œæ—¶é—´ã€å’Œã€Œç©ºé—´ã€ä¸¤ä¸ªç»´åº¦å»è€ƒé‡ã€‚</p>
<ul>
<li>æ—¶é—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œæ—¶é—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚</li>
<li>ç©ºé—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•éœ€è¦å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œç©ºé—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œè¯„ä»·ä¸€ä¸ªç®—æ³•çš„æ•ˆç‡ä¸»è¦æ˜¯çœ‹å®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æƒ…å†µã€‚ç„¶è€Œï¼Œæœ‰çš„æ—¶å€™æ—¶é—´å’Œç©ºé—´å´åˆæ˜¯ã€Œé±¼å’Œç†ŠæŒã€ï¼Œä¸å¯å…¼å¾—çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä»ä¸­å»å–ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚</p>
<p>ä¸‹é¢æˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€Œæ—¶é—´å¤æ‚åº¦ã€å’Œã€Œç©ºé—´å¤æ‚åº¦ã€çš„è®¡ç®—æ–¹å¼ã€‚</p>
<h2 id="ä¸€-æ—¶é—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#ä¸€-æ—¶é—´å¤æ‚åº¦">#</a> <strong>ä¸€ã€æ—¶é—´å¤æ‚åº¦</strong></h2>
<p>æˆ‘ä»¬æƒ³è¦çŸ¥é“ä¸€ä¸ªç®—æ³•çš„ã€Œæ—¶é—´å¤æ‚åº¦ã€ï¼Œå¾ˆå¤šäººé¦–å…ˆæƒ³åˆ°çš„çš„æ–¹æ³•å°±æ˜¯æŠŠè¿™ä¸ªç®—æ³•ç¨‹åºè¿è¡Œä¸€éï¼Œé‚£ä¹ˆå®ƒæ‰€æ¶ˆè€—çš„æ—¶é—´å°±è‡ªç„¶è€Œç„¶çŸ¥é“äº†ã€‚</p>
<p>è¿™ç§æ–¹å¼å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä¸è¿‡å®ƒä¹Ÿæœ‰å¾ˆå¤šå¼Šç«¯ã€‚<br>
è¿™ç§æ–¹å¼éå¸¸å®¹æ˜“å—è¿è¡Œç¯å¢ƒçš„å½±å“ï¼Œåœ¨æ€§èƒ½é«˜çš„æœºå™¨ä¸Šè·‘å‡ºæ¥çš„ç»“æœä¸åœ¨æ€§èƒ½ä½çš„æœºå™¨ä¸Šè·‘çš„ç»“æœç›¸å·®ä¼šå¾ˆå¤§ã€‚è€Œä¸”å¯¹æµ‹è¯•æ—¶ä½¿ç”¨çš„æ•°æ®è§„æ¨¡ä¹Ÿæœ‰å¾ˆå¤§å…³ç³»ã€‚å†è€…ï¼Œå¹¶æˆ‘ä»¬åœ¨å†™ç®—æ³•çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰åŠæ³•å®Œæ•´çš„å»è¿è¡Œå‘¢ã€‚</p>
<p>å› æ­¤ï¼Œå¦ä¸€ç§æ›´ä¸ºé€šç”¨çš„æ–¹æ³•å°±å‡ºæ¥äº†ï¼šã€Œ <strong>å¤§ O ç¬¦å·è¡¨ç¤ºæ³•</strong> ã€ï¼Œå³ T (n) = O (f (n))</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ã€Œ å¤§ O ç¬¦å·è¡¨ç¤ºæ³• ã€ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO (n) ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åœ¨ å¤§ O ç¬¦å·è¡¨ç¤ºæ³•ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦çš„å…¬å¼æ˜¯ï¼š T (n) = O ( f (n) )ï¼Œå…¶ä¸­ f (n) è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œæ¬¡æ•°ä¹‹å’Œï¼Œè€Œ O è¡¨ç¤ºæ­£æ¯”ä¾‹å…³ç³»ï¼Œè¿™ä¸ªå…¬å¼çš„å…¨ç§°æ˜¯ï¼š<strong>ç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦</strong>ã€‚</p>
<p>æˆ‘ä»¬ç»§ç»­çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾æ¯è¡Œä»£ç çš„æ‰§è¡Œæ—¶é—´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ç”¨ 1 é¢—ç²’æ—¶é—´ æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆè¿™ä¸ªä¾‹å­çš„ç¬¬ä¸€è¡Œè€—æ—¶æ˜¯ 1 ä¸ªé¢—ç²’æ—¶é—´ï¼Œç¬¬ä¸‰è¡Œçš„æ‰§è¡Œæ—¶é—´æ˜¯ n ä¸ªé¢—ç²’æ—¶é—´ï¼Œç¬¬å››è¡Œçš„æ‰§è¡Œæ—¶é—´ä¹Ÿæ˜¯ n ä¸ªé¢—ç²’æ—¶é—´ï¼ˆç¬¬äºŒè¡Œå’Œç¬¬äº”è¡Œæ˜¯ç¬¦å·ï¼Œæš‚æ—¶å¿½ç•¥ï¼‰ï¼Œé‚£ä¹ˆæ€»æ—¶é—´å°±æ˜¯ 1 é¢—ç²’æ—¶é—´ + n é¢—ç²’æ—¶é—´ + n é¢—ç²’æ—¶é—´ ï¼Œå³ (1+2n) ä¸ªé¢—ç²’æ—¶é—´ï¼Œå³ï¼š T (n) = (1+2n)* é¢—ç²’æ—¶é—´ï¼Œä»è¿™ä¸ªç»“æœå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç®—æ³•çš„è€—æ—¶æ˜¯éšç€ n çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–çš„å°†è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦è¡¨ç¤ºä¸ºï¼šT (n) = O (n)</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆå»ç®€åŒ–å‘¢ï¼Œå› ä¸ºå¤§ O ç¬¦å·è¡¨ç¤ºæ³•å¹¶ä¸æ˜¯ç”¨äºæ¥çœŸå®ä»£è¡¨ç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´çš„å¢é•¿å˜åŒ–è¶‹åŠ¿çš„ã€‚</p>
<p>æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ n æ— é™å¤§çš„æ—¶å€™ï¼ŒT (n) = time (1+2n) ä¸­çš„å¸¸é‡ 1 å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œå€æ•° 2 ä¹Ÿæ„ä¹‰ä¸å¤§ã€‚å› æ­¤ç›´æ¥ç®€åŒ–ä¸º T (n) = O (n) å°±å¯ä»¥äº†ã€‚</p>
<p>å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§æœ‰ï¼š</p>
<ul>
<li>å¸¸æ•°é˜¶ O (1)</li>
<li>å¯¹æ•°é˜¶ O (logN)</li>
<li>çº¿æ€§é˜¶ O (n)</li>
<li>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN)</li>
<li>å¹³æ–¹é˜¶ O (nÂ²)</li>
<li>ç«‹æ–¹é˜¶ O (nÂ³)</li>
<li>K æ¬¡æ–¹é˜¶ O (n^k)</li>
<li>æŒ‡æ•°é˜¶ (2^n)</li>
</ul>
<p>ä¸Šé¢ä»ä¸Šè‡³ä¸‹ä¾æ¬¡çš„æ—¶é—´å¤æ‚åº¦è¶Šæ¥è¶Šå¤§ï¼Œæ‰§è¡Œçš„æ•ˆç‡è¶Šæ¥è¶Šä½ã€‚</p>
<p>ä¸‹é¢é€‰å–ä¸€äº›è¾ƒä¸ºå¸¸ç”¨çš„æ¥è®²è§£ä¸€ä¸‹ï¼ˆæ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§é¡ºåºï¼‰ï¼š</p>
<ol>
<li><strong>å¸¸æ•°é˜¶ O (1)</strong></li>
</ol>
<p>æ— è®ºä»£ç æ‰§è¡Œäº†å¤šå°‘è¡Œï¼Œåªè¦æ˜¯æ²¡æœ‰å¾ªç¯ç­‰å¤æ‚ç»“æ„ï¼Œé‚£è¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±éƒ½æ˜¯ O (1)ï¼Œå¦‚ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒæ¶ˆè€—çš„æ—¶å€™å¹¶ä¸éšç€æŸä¸ªå˜é‡çš„å¢é•¿è€Œå¢é•¿ï¼Œé‚£ä¹ˆæ— è®ºè¿™ç±»ä»£ç æœ‰å¤šé•¿ï¼Œå³ä½¿æœ‰å‡ ä¸‡å‡ åä¸‡è¡Œï¼Œéƒ½å¯ä»¥ç”¨ O (1) æ¥è¡¨ç¤ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<ol>
<li><strong>çº¿æ€§é˜¶ O (n)</strong></li>
</ol>
<p>è¿™ä¸ªåœ¨æœ€å¼€å§‹çš„ä»£ç ç¤ºä¾‹ä¸­å°±è®²è§£è¿‡äº†ï¼Œå¦‚ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ï¼Œfor å¾ªç¯é‡Œé¢çš„ä»£ç ä¼šæ‰§è¡Œ n éï¼Œå› æ­¤å®ƒæ¶ˆè€—çš„æ—¶é—´æ˜¯éšç€ n çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå› æ­¤è¿™ç±»ä»£ç éƒ½å¯ä»¥ç”¨ O (n) æ¥è¡¨ç¤ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<ol>
<li><strong>å¯¹æ•°é˜¶ O (logN)</strong></li>
</ol>
<p>è¿˜æ˜¯å…ˆæ¥çœ‹ä»£ç ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">while(i&lt;n)</span><br><span class="line">&#123;</span><br><span class="line">    i = i * 2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ while å¾ªç¯é‡Œé¢ï¼Œæ¯æ¬¡éƒ½å°† i ä¹˜ä»¥ 2ï¼Œä¹˜å®Œä¹‹åï¼Œi è·ç¦» n å°±è¶Šæ¥è¶Šè¿‘äº†ã€‚æˆ‘ä»¬è¯•ç€æ±‚è§£ä¸€ä¸‹ï¼Œå‡è®¾å¾ªç¯ x æ¬¡ä¹‹åï¼Œi å°±å¤§äº n äº†ï¼Œæ­¤æ—¶è¿™ä¸ªå¾ªç¯å°±é€€å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ 2 çš„ x æ¬¡æ–¹ç­‰äº nï¼Œé‚£ä¹ˆ x = log2^n<br>
 ä¹Ÿå°±æ˜¯è¯´å½“å¾ªç¯ log2^n æ¬¡ä»¥åï¼Œè¿™ä¸ªä»£ç å°±ç»“æŸäº†ã€‚å› æ­¤è¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š<strong>O(logn)</strong></p>
<ol>
<li><strong>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN)</strong></li>
</ol>
<p>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN) å…¶å®éå¸¸å®¹æ˜“ç†è§£ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä¸º O (logn) çš„ä»£ç å¾ªç¯ N éçš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ n * O (logN)ï¼Œä¹Ÿå°±æ˜¯äº† O (nlogN)ã€‚</p>
<p>å°±æ‹¿ä¸Šé¢çš„ä»£ç åŠ ä¸€ç‚¹ä¿®æ”¹æ¥ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(m=1; m&lt;n; m++)</span><br><span class="line">&#123;</span><br><span class="line">    i = 1;</span><br><span class="line">    while(i&lt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        i = i * 2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>å¹³æ–¹é˜¶ O (nÂ²)</strong></li>
</ol>
<p>å¹³æ–¹é˜¶ O (nÂ²) å°±æ›´å®¹æ˜“ç†è§£äº†ï¼Œå¦‚æœæŠŠ O (n) çš„ä»£ç å†åµŒå¥—å¾ªç¯ä¸€éï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O (nÂ²) äº†ã€‚<br>
ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=n; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯åµŒå¥—äº† 2 å±‚ n å¾ªç¯ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O (n*n)ï¼Œå³ O (nÂ²)<br>
 å¦‚æœå°†å…¶ä¸­ä¸€å±‚å¾ªç¯çš„ n æ”¹æˆ mï¼Œå³ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=m; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£å®ƒçš„æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº† O (m*n)</p>
<ol>
<li><strong>ç«‹æ–¹é˜¶ O (nÂ³)</strong>ã€<strong>K æ¬¡æ–¹é˜¶ O (n^k)</strong></li>
</ol>
<p>å‚è€ƒä¸Šé¢çš„ O (nÂ²) å»ç†è§£å°±å¥½äº†ï¼ŒO (nÂ³) ç›¸å½“äºä¸‰å±‚ n å¾ªç¯ï¼Œå…¶å®ƒçš„ç±»ä¼¼ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰ å¹³å‡æ—¶é—´å¤æ‚åº¦ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€æœ€åæ—¶é—´å¤æ‚åº¦ã€æœ€å¥½æ—¶é—´å¤æ‚åº¦ çš„åˆ†ææ–¹æ³•ï¼Œæœ‰ç‚¹å¤æ‚ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<h2 id="äºŒ-ç©ºé—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#äºŒ-ç©ºé—´å¤æ‚åº¦">#</a> <strong>äºŒã€ç©ºé—´å¤æ‚åº¦</strong></h2>
<p>æ—¢ç„¶æ—¶é—´å¤æ‚åº¦ä¸æ˜¯ç”¨æ¥è®¡ç®—ç¨‹åºå…·ä½“è€—æ—¶çš„ï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿåº”è¯¥æ˜ç™½ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸æ˜¯ç”¨æ¥è®¡ç®—ç¨‹åºå®é™…å ç”¨çš„ç©ºé—´çš„ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„ä¸€ä¸ªé‡åº¦ï¼ŒåŒæ ·åæ˜ çš„æ˜¯ä¸€ä¸ªè¶‹åŠ¿ï¼Œæˆ‘ä»¬ç”¨ S (n) æ¥å®šä¹‰ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼šO (1)ã€O (n)ã€O (nÂ²)ï¼Œæˆ‘ä»¬ä¸‹é¢æ¥çœ‹çœ‹ï¼š</p>
<ol>
<li><strong>ç©ºé—´å¤æ‚åº¦ O (1)</strong></li>
</ol>
<p>å¦‚æœç®—æ³•æ‰§è¡Œæ‰€éœ€è¦çš„ä¸´æ—¶ç©ºé—´ä¸éšç€æŸä¸ªå˜é‡ n çš„å¤§å°è€Œå˜åŒ–ï¼Œå³æ­¤ç®—æ³•ç©ºé—´å¤æ‚åº¦ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå¯è¡¨ç¤ºä¸º O (1)<br>
 ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸­çš„ iã€jã€m æ‰€åˆ†é…çš„ç©ºé—´éƒ½ä¸éšç€å¤„ç†æ•°æ®é‡å˜åŒ–ï¼Œå› æ­¤å®ƒçš„ç©ºé—´å¤æ‚åº¦ S (n) = O (1)</p>
<ol>
<li><strong>ç©ºé—´å¤æ‚åº¦ O (n)</strong></li>
</ol>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä»£ç ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int[] m = new int[n]</span><br><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¸­ï¼Œç¬¬ä¸€è¡Œ new äº†ä¸€ä¸ªæ•°ç»„å‡ºæ¥ï¼Œè¿™ä¸ªæ•°æ®å ç”¨çš„å¤§å°ä¸º nï¼Œè¿™æ®µä»£ç çš„ 2-6 è¡Œï¼Œè™½ç„¶æœ‰å¾ªç¯ï¼Œä½†æ²¡æœ‰å†åˆ†é…æ–°çš„ç©ºé—´ï¼Œå› æ­¤ï¼Œè¿™æ®µä»£ç çš„ç©ºé—´å¤æ‚åº¦ä¸»è¦çœ‹ç¬¬ä¸€è¡Œå³å¯ï¼Œå³ S (n) = O (n)</p>
<p>ä»¥ä¸Šï¼Œå°±æ˜¯å¯¹ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦åŸºç¡€çš„åˆ†æï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T01:57:09.000Z" title="2023-5-5 9:57:09">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T02:04:28.525Z" title="2023-5-5 10:04:28">2023-05-05</time>æ›´æ–°</span><span class="level-item">14 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2151ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90IDEA%E3%80%91IDEA%E7%9A%84debug%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E8%AF%A6%E8%A7%A3/">ã€IDEAã€‘IDEAçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="ideaideaçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£è½¬è‡ªcsdn"><a class="markdownIt-Anchor" href="#ideaideaçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£è½¬è‡ªcsdn">#</a> ã€IDEAã€‘IDEA çš„ debug è°ƒè¯•æŠ€å·§è¯¦è§£ï¼ˆè½¬è‡ª CSDNï¼‰</h1>
<p>ç›®å½•</p>
<p><a href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0">ä¸€ã€æ¦‚è¿°</a></p>
<p><a href="#%E4%BA%8C%E3%80%81debug%E6%93%8D%E4%BD%9C%E5%88%86%E6%9E%90">äºŒã€debug æ“ä½œåˆ†æ</a></p>
<p><a href="#1%E3%80%81%E6%89%93%E6%96%AD%E7%82%B9">1ã€æ‰“æ–­ç‚¹</a></p>
<p><a href="#2%E3%80%81%E8%BF%90%E8%A1%8Cdebug%E6%A8%A1%E5%BC%8F">2ã€è¿è¡Œ debug æ¨¡å¼</a></p>
<p><a href="#3%E3%80%81%E9%87%8D%E6%96%B0%E6%89%A7%E8%A1%8Cdebug">3ã€é‡æ–°æ‰§è¡Œ debug</a></p>
<p><a href="#4%E3%80%81%E8%AE%A9%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E5%88%B0%E4%B8%8B%E4%B8%80%E6%AC%A1%E6%96%AD%E7%82%B9%E5%90%8E%E6%9A%82%E5%81%9C">4ã€è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</a></p>
<p><a href="#5%E3%80%81%E8%AE%A9%E6%96%AD%E7%82%B9%E5%A4%84%E7%9A%84%E4%BB%A3%E7%A0%81%E5%86%8D%E5%8A%A0%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81">5ã€è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç </a></p>
<p><a href="#6%E3%80%81%E5%81%9C%E6%AD%A2debug%E7%A8%8B%E5%BA%8F">6ã€åœæ­¢ debug ç¨‹åº</a></p>
<p><a href="#7%E3%80%81%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9">7ã€æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</a></p>
<p><a href="#8%E3%80%81%E6%B7%BB%E5%8A%A0%E6%96%AD%E7%82%B9%E8%BF%90%E8%A1%8C%E7%9A%84%E6%9D%A1%E4%BB%B6">8ã€æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶</a></p>
<p><a href="#9%E3%80%81%E5%B1%8F%E8%94%BD%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9">9ã€å±è”½æ‰€æœ‰æ–­ç‚¹</a></p>
<p><a href="#10%E3%80%81%E6%8A%8A%E5%85%89%E6%A0%87%E7%A7%BB%E5%88%B0%E5%BD%93%E5%89%8D%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E4%BD%8D%E7%BD%AE">10ã€æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®</a></p>
<p><a href="#11%E3%80%81%E5%8D%95%E6%AD%A5%E8%B7%B3%E8%BF%87">11ã€å•æ­¥è·³è¿‡</a></p>
<p><a href="#12%E3%80%81%E5%8F%AF%E4%BB%A5%E8%B7%B3%E5%85%A5%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C">12ã€å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ</a></p>
<p><a href="#13%E3%80%81%E8%B7%B3%E5%87%BA%E6%96%B9%E6%B3%95">13ã€è·³å‡ºæ–¹æ³•</a></p>
<p><a href="#14%E3%80%81%E7%9B%B4%E6%8E%A5%E6%89%A7%E8%A1%8C%E5%88%B0%E5%85%89%E6%A0%87%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE">14ã€ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</a></p>
<p><a href="#15%E3%80%81%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%94%B9%E5%8F%98%E6%AD%A3%E5%9C%A8debug%E7%9A%84%E6%95%B0%E6%8D%AE">15ã€åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨ debug çš„æ•°æ®</a></p>
<hr>
<h1 id="ä¸€-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#ä¸€-æ¦‚è¿°">#</a> ä¸€ã€æ¦‚è¿°</h1>
<ul>
<li>debug è°ƒè¯•ä¹Ÿå«æ–­ç‚¹è°ƒè¯•</li>
<li>åœ¨ç¨‹åºçš„æŸä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ï¼Œåˆ™åœ¨ debug æ¨¡å¼ä¸‹è¿è¡Œåˆ°æ–­ç‚¹ä½ç½®æ—¶ä¼šæš‚åœï¼Œä¾¿äºç¨‹åºå‘˜è§‚å¯Ÿä»£ç çš„æ‰§è¡Œæƒ…å†µ</li>
<li>å­¦ä¼š debugï¼Œæœ‰åŠ©äºåœ¨ç¨‹åºè¿è¡Œæœªè¾¾åˆ°ç†æƒ³æƒ…å†µæ—¶ï¼Œå¯¹ç¨‹åºçš„å„ä¸ªæµç¨‹è¿›è¡Œåˆ†æ</li>
<li>æœ¬æ–‡åªè¯¦ç»†æè¿°äº† debug çš„ä¸€äº›åŸºæœ¬çš„å¸¸ç”¨æ“ä½œï¼Œå¦‚æœæœ‰ç¼ºæ¼æ¬¢è¿è¯„è®ºåŒºç•™è¨€ï½</li>
</ul>
<h1 id="äºŒ-debugæ“ä½œåˆ†æ"><a class="markdownIt-Anchor" href="#äºŒ-debugæ“ä½œåˆ†æ">#</a> äºŒã€debug æ“ä½œåˆ†æ</h1>
<h2 id="1-æ‰“æ–­ç‚¹"><a class="markdownIt-Anchor" href="#1-æ‰“æ–­ç‚¹">#</a> 1ã€æ‰“æ–­ç‚¹</h2>
<ul>
<li>åœ¨ç¨‹åºçš„æŸä¸€è¡Œä½ç½®ï¼Œæ•°å­—å³è¾¹çš„ç©ºç™½éƒ¨åˆ†ä½¿ç”¨é¼ æ ‡å·¦é”®ç‚¹å‡»ä¸€ä¸‹ï¼Œå‡ºç°çº¢ç‚¹å³ä¸ºæ‰“ä¸Šäº†ä¸€ä¸ªæ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/9e3026905fcd4c7a9a7b0dce93f324e9.png" width="422" height="362" />
<h2 id="2-è¿è¡Œdebugæ¨¡å¼"><a class="markdownIt-Anchor" href="#2-è¿è¡Œdebugæ¨¡å¼">#</a> 2ã€è¿è¡Œ debug æ¨¡å¼</h2>
<ul>
<li>æ–¹å¼ä¸€
<ul>
<li>é€‰ä¸­è¦è¿›è¡Œ debug çš„ç¨‹åºï¼Œç‚¹å‡»å³ä¸Šè§’çš„ debug æŒ‰é’®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f52559e407cf4dd9af9438fc616abca5.png" width="288" height="82" />
<ul>
<li>æ–¹å¼äºŒ
<ul>
<li>åœ¨è¦è¿›è¡Œ debug çš„ç¨‹åºå¤„å³é”®ï¼Œé€‰ä¸­ä¸‹å›¾é€‰é¡¹</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/a703e498d8dc4e91be40b3ba06a7a5be.png" width="386" height="449" />
<h2 id="3-é‡æ–°æ‰§è¡Œdebug"><a class="markdownIt-Anchor" href="#3-é‡æ–°æ‰§è¡Œdebug">#</a> 3ã€é‡æ–°æ‰§è¡Œ debug</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šå…³é—­å½“å‰ debug çš„ç¨‹åºå¹¶é‡æ–°å¯åŠ¨ debug</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/6a18ce960271427892dbc4a8df8e568d.png" width="832" height="308" />
<h2 id="4-è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ"><a class="markdownIt-Anchor" href="#4-è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ">#</a> 4ã€è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„æŒ‰é’®ï¼Œdebug ä¼šç»§ç»­è¿è¡Œç¨‹åºï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/5347586e6a414e7fbacc2863e4e7f44d.png" width="851" height="301" />
<ul>
<li>ä¸¾ä¾‹
<ul>
<li>ä¸‹å›¾æ˜¯ä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œåœ¨æ‰“æ–­ç‚¹çš„ä½ç½®ç‚¹å‡»ä¸Šé¢è¯´çš„æŒ‰é’®ï¼Œç›¸å½“äºå†å¾ªç¯ä¸€æ¬¡ï¼Œåˆ°ä»£ç ç¬¬ 9 è¡Œæ—¶åœæ­¢</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/4653841c52c54a3183914354054609dd.png" width="818" height="336" />
<h2 id="5-è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç "><a class="markdownIt-Anchor" href="#5-è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç ">#</a> 5ã€è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç </h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„åŠ å·ï¼Œå¯ä»¥åœ¨æ–­ç‚¹å¤„åŠ ä¸€è¡Œä»£ç ï¼Œæ¯”å¦‚ä¸‹å›¾ä¸­çš„ count++ å³ä¸ºæ–°æ·»åŠ çš„ä»£ç 
<ul>
<li>é€‰ä¸­ count++ï¼Œå³é”®ç‚¹å‡» Edit å¯ä»¥ç¼–è¾‘è¯¥ä»£ç </li>
<li>é€‰ä¸­è¯¥è¡Œä»£ç ï¼ˆcount++ï¼‰ï¼Œç‚¹å‡»åŠ å·ä¸‹é¢çš„å‡å·ï¼Œå¯ä»¥åˆ é™¤è¯¥è¡Œä»£ç </li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/b7843e76b1b64b488e93c9cd8b6e72a6.png" width="865" height="266" />
<ul>
<li>é€‰ä¸­ä¸‹å›¾çš„çœ¼é•œï¼Œå˜ä¸ºåˆ†å±æ“ä½œ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/ac95d9ee4ebb4c2c8e573e623e34f779.png" width="1200" height="324" />
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/18ec87566c3340689daa95295557fa12.png" width="1200" height="302" />
<hr>
<p><strong>ä¸¾ä¾‹</strong></p>
<ul>
<li>ä¸‹å›¾æ˜¯æ²¡æ·»åŠ é¢å¤–ä»£ç ä¹‹å‰çš„æˆªå›¾</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/155c34d01574452f9924b608cb26a642.png" width="1163" height="567" />
<ul>
<li>æ·»åŠ ä¸€å¥ count++ï¼Œå¹¶ç‚¹å‡»å·¦è¾¹çº¢è‰²æ¡†ä¸­çš„æŒ‰é’®ï¼Œæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹ï¼Œå³å¾ªç¯äº†ä¸€æ¬¡</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/33ebf61346304b9c9679c6f836ed99b7.png" width="1139" height="659" />
<ul>
<li>æ•ˆæœå’Œè¿è¡Œæ­¥éª¤è§ä¸‹å›¾</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/0994f7950ff1421ca6cf4116e1fafe23.png" width="1200" height="666" />
<h2 id="6-åœæ­¢debugç¨‹åº"><a class="markdownIt-Anchor" href="#6-åœæ­¢debugç¨‹åº">#</a> 6ã€åœæ­¢ debug ç¨‹åº</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®åœæ­¢ debug ç¨‹åº</li>
<li>æ³¨æ„
<ul>
<li>è¿è¡Œçš„å¦‚æœæ˜¯ javaSE é¡¹ç›®ï¼Œç‚¹ä¸€ä¸‹å°±åœæ­¢</li>
<li>è¿è¡Œçš„å¦‚æœæ˜¯ javaWeb é¡¹ç›®ï¼Œéœ€è¦ç‚¹ä¸¤ä¸‹
<ul>
<li>ç¬¬ä¸€ä¸‹åœæ­¢ä»£ç çš„å½“å‰çº¿ç¨‹</li>
<li>ç¬¬äºŒä¸‹åœæ­¢æœåŠ¡å™¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/7ce1d0c26f4a45ec9050155f0f653557.png" width="882" height="304" />
<h2 id="7-æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹"><a class="markdownIt-Anchor" href="#7-æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹">#</a> 7ã€æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/5651d84b51cf45d1bab9072c4c7d1ccc.png" width="830" height="272" />
<ul>
<li>ç‚¹å‡»åå‡ºç°ä¸‹å›¾æ‰€ç¤ºç•Œé¢ï¼Œå¯ä»¥æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶ï¼Œè§ä¸‹ä¸€æ¡åŠŸèƒ½è§£é‡Š</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/93a8e0b13c4d45e3a4adf260d9ca24b6.png" width="1108" height="670" />
<h2 id="8-æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶"><a class="markdownIt-Anchor" href="#8-æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶">#</a> 8ã€æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶</h2>
<ul>
<li>é€‰ä¸­æ–­ç‚¹ï¼Œå³é”®åå³å¯ç¼–è¾‘æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶
<ul>
<li>æ»¡è¶³æ¡ä»¶æ—¶ç¨‹åºæ‰ä¼šåœ¨è¯¥æ–­ç‚¹å¤„åœä¸‹</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/e6b57eeaa0294cdf9364c2b0f6a6cb25.png" width="1006" height="513" />
<ul>
<li>æ¯”å¦‚æ·»åŠ  i&gt;=5ï¼Œé‡æ–° debug åçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/82a7ffe03cd54958a8801e21eceb704a.png" width="918" height="645" />
<ul>
<li>æ­¤æ—¶ä¼šå‘ç°ç¬¬ 7 æ¡æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹ä¿¡æ¯å¤„ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾æ•ˆæœ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/daab0ee1bfe94a329aa68db1c95f2080.png" width="1022" height="281" />
<h2 id="9-å±è”½æ‰€æœ‰æ–­ç‚¹"><a class="markdownIt-Anchor" href="#9-å±è”½æ‰€æœ‰æ–­ç‚¹">#</a> 9ã€å±è”½æ‰€æœ‰æ–­ç‚¹</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œå¯ä»¥å±è”½æ‰€æœ‰æ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f7e06ed221044991be85af4fca6748f9.png" width="583" height="361" />
<ul>
<li>å±è”½å‰<br>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/677a8547e65844eebac684de9f46bc71.png" width="102" height="73" /></li>
<li>å±è”½å<br>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/46bb93d283a640df802eec5d8fd1bbab.png" width="81" height="56" /></li>
<li>å±è”½çš„æ–­ç‚¹åœ¨ debug çš„æ—¶å€™ä¸ä¼šè¿è¡Œ
<ul>
<li>å¦‚æœç¨‹åºè°ƒè¯•åè§‰å¾—æ²¡é—®é¢˜äº†ï¼Œå¯ä»¥å±è”½æ‰æ‰€æœ‰æ–­ç‚¹ç»§ç»­è¿è¡Œç¨‹åºæŸ¥çœ‹æ•ˆæœ</li>
</ul>
</li>
</ul>
<h2 id="10-æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®"><a class="markdownIt-Anchor" href="#10-æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®">#</a> 10ã€æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®åï¼Œä¼šæŠŠé¼ æ ‡å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®
<ul>
<li>å½“ç¨‹åºä»£ç é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¯¥æŒ‰é’®å¿«é€Ÿå®šä½åˆ°ç¨‹åºè¿è¡Œä½ç½®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/a44a214ccd894d52884cd8cd20e9665c.png" width="617" height="245" />
<ul>
<li>å¦‚ä¸‹å›¾æ‰€ç¤º
<ul>
<li>å‡è®¾ç¨‹åºè¿è¡Œåˆ°ç¬¬ 9 è¡Œæ–­ç‚¹å¤„ï¼Œé¼ æ ‡å…‰æ ‡åœ¨ç¬¬ 11 è¡Œï¼Œç‚¹å‡»è¯¥æŒ‰é’®åå…‰æ ‡å°±ä¼šç§»åŠ¨åˆ°ç¬¬ 9 è¡Œ</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/15566342c22e47b390f7922e06c080e9.png" width="648" height="129" />
<h2 id="11-å•æ­¥è·³è¿‡"><a class="markdownIt-Anchor" href="#11-å•æ­¥è·³è¿‡">#</a> 11ã€å•æ­¥è·³è¿‡</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šä¸€è¡Œä¸€è¡Œæ‰§è¡Œè‡ªå·±ç¼–å†™çš„ä»£ç 
<ul>
<li>å¦‚æœç¢°åˆ°æ–¹æ³•ï¼Œè¯¥æŒ‰é’®ä¸ä¼šè¿›å…¥åˆ°è¯¥æ–¹æ³•å†…éƒ¨</li>
<li>å¿«æ·é”® F8</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/1c54b8240f6e4d719f8aae936a925fb2.png" width="544" height="201" />
<h2 id="12-å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ"><a class="markdownIt-Anchor" href="#12-å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ">#</a> 12ã€å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ</h2>
<ul>
<li>ä¸‹å›¾ä¸­çš„è“è‰²ç®­å¤´å’Œçº¢è‰²ç®­å¤´éƒ½å¯ä»¥æ‰§è¡Œä¸€è¡Œä»£ç ï¼Œå¦‚æœé‡åˆ°æ–¹æ³•æ—¶ä¼šè¿›å…¥æ–¹æ³•å†…éƒ¨ï¼ŒåŒºåˆ«åœ¨äº
<ul>
<li>è“è‰²ç®­å¤´åªä¼šè·³è¿›è‡ªå·±å†™çš„æ–¹æ³•ï¼Œå¦‚æœæ˜¯ç³»ç»Ÿå·²ç»å†™å¥½çš„æ–¹æ³•ï¼Œè“è‰²ç®­å¤´æ— æ³•è·³å…¥è¯¥æ–¹æ³•</li>
<li>çº¢è‰²ç®­å¤´ä¸ç®¡æ˜¯è‡ªå·±å†™çš„æ–¹æ³•ï¼Œè¿˜æ˜¯ç³»ç»Ÿå·²ç»å®šä¹‰å¥½çš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/23a065624b024b29ba358d96c1e827eb.png" width="852" height="271" />
<ul>
<li>å¦‚ä¸‹å›¾æ‰€ç¤º
<ul>
<li>ArrayList çš„ add æ–¹æ³•æ˜¯ç³»ç»Ÿå·²ç»å†™å¥½çš„ï¼Œè“è‰²ç®­å¤´æ— æ³•è·³å…¥æ–¹æ³•å†…éƒ¨ï¼Œä½†æ˜¯çº¢è‰²ç®­å¤´å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨</li>
<li>printMessageï¼ˆï¼‰æ˜¯è‡ªå®šä¹‰æ–¹æ³•ï¼Œçº¢è‰²å’Œè“è‰²ç®­å¤´éƒ½å¯ä»¥è·³å…¥è¯¥æ–¹æ³•å†…éƒ¨</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f24471618ac74e69842c047606635c13.png" width="811" height="762" />
<h2 id="13-è·³å‡ºæ–¹æ³•"><a class="markdownIt-Anchor" href="#13-è·³å‡ºæ–¹æ³•">#</a> 13ã€è·³å‡ºæ–¹æ³•</h2>
<ul>
<li>ä¸‹å›¾çš„ä¸¤ä¸ªæŒ‰é’®éƒ½å¯ä»¥è·³å‡ºæ–¹æ³•
<ul>
<li>ç¬¬äºŒä¸ªæŒ‰é’®æ˜¯å…³é—­çª—å£çš„æ„æ€ï¼ŒåŒæ ·å¯ä»¥èµ·åˆ°è·³å‡ºæ–¹æ³•çš„ä½œç”¨</li>
<li>åœ¨è¿›å…¥æ–¹æ³•å†…éƒ¨çš„æ—¶å€™ä½¿ç”¨è¿™ä¸¤ä¸ªæŒ‰é’®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/0deedd480bd94b0f9d93aab8bc5d33d1.png" width="514" height="238" />
<h2 id="14-ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®"><a class="markdownIt-Anchor" href="#14-ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®">#</a> 14ã€ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„æŒ‰é’®ï¼Œç¨‹åºä¼šæ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨çš„ä½ç½®
<ul>
<li>å‰ææ˜¯å…‰æ ‡å‰é¢æ²¡æœ‰æ–­ç‚¹ï¼Œå¦åˆ™ç¨‹åºè¿˜æ˜¯ä¼šåœ¨å…‰æ ‡å‰é¢çš„æ–­ç‚¹å¤„æš‚åœ</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/75d500280cad4a7497a31bb49c1a73a4.png" width="616" height="247" />
<h2 id="15-åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨debugçš„æ•°æ®"><a class="markdownIt-Anchor" href="#15-åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨debugçš„æ•°æ®">#</a> 15ã€åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨ debug çš„æ•°æ®</h2>
<ul>
<li>åœ¨æ§åˆ¶å°é€‰ä¸­æŸä¸ªå˜é‡ï¼Œå³é”®ç‚¹å‡» SetÂ Value å¯ä»¥æ”¹å˜è¯¥å˜é‡çš„å€¼
<ul>
<li>å¦‚æœæƒ³æµ‹è¯•æŸä¸ªåœ°æ–¹çš„æ•°æ®å¦‚æœæ˜¯æ­£ç¡®çš„ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœï¼Œå¯ä»¥æ‰‹åŠ¨æ›´æ”¹è¯¥å¤„å˜é‡çš„å€¼</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/9fcd3a72eebf47a9be694fabec9549cd.png" width="1003" height="304" />
<p>è¡¥å……ï¼šdebug è°ƒè¯•çœ‹ä»£ç æ—¶ï¼Œä¸€èˆ¬ç”¨ F9 è·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œæ‰“æ–­ç‚¹çš„ç›®çš„æ˜¯ä½ æƒ³çœ‹ç¨‹åºæ‰§è¡Œåˆ°è¿™ä¸ªä½ç½®æ—¶ä¼šæœ‰ä»€ä¹ˆæ•ˆæœï¼Œæˆ–è€…æ˜¯åˆ°è¾¾æ–­ç‚¹çš„ä½ç½®åå†ç»§ç»­å¾€ä¸‹çœ‹å®ç°çš„è¿‡ç¨‹ï¼›ç”¨ F7 å»è·³è¿›æ–¹æ³•å†…éƒ¨ï¼Œçœ‹å…·ä½“çš„å®ç°ç»†èŠ‚ï¼›ç”¨ F8 å»çœ‹å½“å‰ä½ç½®ä»£ç å¾€ä¸‹çš„æ‰§è¡Œæƒ…å†µï¼ˆä¸è·³å…¥å…·ä½“æ–¹æ³•çš„å†…éƒ¨ï¼‰</p>
<h4 id="åŸæ–‡é“¾æ¥httpsblogcsdnnetfuture_god_qrarticledetails121250865"><a class="markdownIt-Anchor" href="#åŸæ–‡é“¾æ¥httpsblogcsdnnetfuture_god_qrarticledetails121250865">#</a> åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/future_god_qr/article/details/121250865">https://blog.csdn.net/future_god_qr/article/details/121250865</a></h4>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T01:57:09.000Z" title="2023-5-5 9:57:09">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T02:03:30.951Z" title="2023-5-5 10:03:30">2023-05-05</time>æ›´æ–°</span><span class="level-item">11 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1580ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E3%80%91%E7%99%BE%E5%BA%A6%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5%E6%95%99%E7%A8%8B/">ã€æ–‡å¿ƒä¸€è¨€ã€‘ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ–‡å¿ƒä¸€è¨€ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹"><a class="markdownIt-Anchor" href="#æ–‡å¿ƒä¸€è¨€ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹">#</a> ã€æ–‡å¿ƒä¸€è¨€ã€‘ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹</h1>
<h5 id="æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“å®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…-è‡ªç„¶-æœ‰è¶£çš„å¤šè½®å¯¹è¯æ¶µç›–äº†ç”Ÿæ´»-å¨±ä¹-æ•™è‚²-å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯-æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„apiè°ƒç”¨æ¥å£ä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„aièƒ½åŠ›èµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´"><a class="markdownIt-Anchor" href="#æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“å®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…-è‡ªç„¶-æœ‰è¶£çš„å¤šè½®å¯¹è¯æ¶µç›–äº†ç”Ÿæ´»-å¨±ä¹-æ•™è‚²-å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯-æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„apiè°ƒç”¨æ¥å£ä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„aièƒ½åŠ›èµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´">#</a> æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“ï¼Œå®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…ã€è‡ªç„¶ã€æœ‰è¶£çš„å¤šè½®å¯¹è¯ï¼Œæ¶µç›–äº†ç”Ÿæ´»ã€å¨±ä¹ã€æ•™è‚²ã€å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯ã€‚æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„ API è°ƒç”¨æ¥å£ï¼Œä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„ AI èƒ½åŠ›ï¼Œèµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´ã€‚</h5>
<h5 id="é‚£ä¹ˆä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·å¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„aiè§£å†³æ–¹æ¡ˆå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆ"><a class="markdownIt-Anchor" href="#é‚£ä¹ˆä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·å¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„aiè§£å†³æ–¹æ¡ˆå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆ">#</a> é‚£ä¹ˆï¼Œä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·ï¼Œå¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢ï¼Ÿæœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„ AI è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆã€‚</h5>
<h2 id="01ç¬¬ä¸€æ­¥æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·"><a class="markdownIt-Anchor" href="#01ç¬¬ä¸€æ­¥æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·">#</a> <strong>01</strong> ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·</h2>
<p>è¦ä½¿ç”¨ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„æœåŠ¡å’Œäº§å“ï¼Œæ‚¨é¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªç™¾åº¦æ™ºèƒ½äº‘è´¦å·ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ³¨å†Œï¼š</p>
<ul>
<li>è®¿é—®ç™¾åº¦æ™ºèƒ½äº‘å®˜ç½‘ (<a target="_blank" rel="noopener" href="https://cloud.baidu.com/">https://cloud.baidu.com/</a>)ï¼Œç‚¹å‡»å³ä¸Šè§’ â€œå…è´¹æ³¨å†Œâ€ æŒ‰é’®ã€‚</li>
<li>è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç ï¼Œå¹¶è·å–éªŒè¯ç ã€‚</li>
<li>è®¾ç½®æ‚¨çš„ç™»å½•å¯†ç ï¼Œå¹¶åŒæ„æœåŠ¡åè®®ã€‚</li>
<li>å®Œæˆå®åè®¤è¯ï¼Œå¹¶é€‰æ‹©è´¦å·ç±»å‹ (ä¸ªäººæˆ–ä¼ä¸š)ã€‚</li>
<li>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨å°±æˆåŠŸæ³¨å†Œäº†ä¸€ä¸ªç™¾åº¦æ™ºèƒ½äº‘è´¦å·ã€‚</li>
</ul>
<h2 id="02ç¬¬äºŒæ­¥ç”³è¯·æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æƒé™"><a class="markdownIt-Anchor" href="#02ç¬¬äºŒæ­¥ç”³è¯·æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æƒé™">#</a> <strong>02</strong> ç¬¬äºŒæ­¥ï¼šç”³è¯·æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æƒé™</h2>
<p>â€‹		è¦ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦ç”³è¯·ç›¸åº”çš„æƒé™ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œç”³è¯·ï¼š</p>
<ul>
<li><strong>ç™»å½•ç™¾åº¦æ™ºèƒ½äº‘æ§åˆ¶å° (<a target="_blank" rel="noopener" href="https://console.bce.baidu.com/">https://console.bce.baidu.com/</a>)ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ  â€œäººå·¥æ™ºèƒ½â€ ä¸‹æ‹‰èœå•ä¸­çš„ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é€‰é¡¹ã€‚</strong></li>
<li><strong>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†é¡µé¢ä¸­ï¼Œæ‰¾åˆ° â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ï¼Œå¹¶ç‚¹å‡» â€œç«‹å³ä½¿ç”¨â€ æŒ‰é’®ã€‚</strong></li>
<li><strong>åœ¨å¼¹å‡ºçª—å£ä¸­å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œå¹¶æäº¤ç”³è¯·ã€‚</strong></li>
<li><strong>ç­‰å¾…å®¡æ ¸ç»“æœã€‚å®¡æ ¸é€šè¿‡åï¼Œæ‚¨å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹å¹¶ç®¡ç†æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æƒé™ã€‚</strong></li>
</ul>
<h2 id="03ç¬¬ä¸‰æ­¥é…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£"><a class="markdownIt-Anchor" href="#03ç¬¬ä¸‰æ­¥é…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£">#</a> <strong>03</strong> ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£</h2>
<p>â€‹		è¿›å…¥ï¼š<a target="_blank" rel="noopener" href="https://wenxin.baidu.com/user/key">https://wenxin.baidu.com/user/key</a></p>
<p>â€‹		ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦é…ç½®ç›¸å…³å‚æ•°ï¼Œå¹¶è¿›è¡Œæµ‹è¯•ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œé…ç½®å’Œæµ‹è¯•ï¼š</p>
<ul>
<li>åœ¨æ§åˆ¶å°ä¸­è¿›å…¥ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é¡µé¢ï¼Œå¹¶ç‚¹å‡» â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ä¸‹æ–¹çš„ â€œç®¡ç†â€ æŒ‰é’®ï¼Œè¿›å…¥æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„é…ç½®é¡µé¢ã€‚</li>
<li>åœ¨é…ç½®é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¹¶ä¿®æ”¹æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚åº”ç”¨åç§°ã€åº”ç”¨æè¿°ã€åº”ç”¨ç±»å‹ç­‰ã€‚</li>
<li>æ‚¨è¿˜å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­è®¾ç½®æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„å®‰å…¨è®¤è¯æ–¹å¼ï¼Œå¦‚ Access Key ID å’Œ Secret Access Keyã€‚è¿™äº›æ˜¯æ‚¨è°ƒç”¨æ–‡å¿ƒä¸€è¨€ API æ—¶éœ€è¦æä¾›çš„èº«ä»½å‡­è¯ï¼Œå»ºè®®æ‚¨å¦¥å–„ä¿ç®¡ï¼Œå¹¶å®šæœŸæ›´æ¢ã€‚</li>
<li>æ‚¨è¿˜å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­è®¾ç½®æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„é…é¢å’Œé™æµç­–ç•¥ï¼Œå¦‚æ¯æ—¥è¯·æ±‚æ¬¡æ•°ã€æ¯ç§’è¯·æ±‚æ¬¡æ•°ç­‰ã€‚è¿™äº›æ˜¯ä¸ºäº†ä¿éšœæ‚¨å’Œå…¶ä»–ç”¨æˆ·çš„æœåŠ¡è´¨é‡å’Œå®‰å…¨æ€§ï¼Œå»ºè®®æ‚¨æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚åˆç†åˆ†é…ï¼Œå¹¶é¿å…è¶…å‡ºé™åˆ¶ã€‚</li>
<li>åœ¨å®Œæˆä»¥ä¸Šé…ç½®åï¼Œæ‚¨å°±å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­ç‚¹å‡» â€œåœ¨çº¿æµ‹è¯•â€ æŒ‰é’®ï¼Œè¿›è¡Œæ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„æµ‹è¯•ã€‚æµ‹è¯•æ—¶ï¼Œæ‚¨éœ€è¦è¾“å…¥ä¸€ä¸ªå¯¹è¯è¯­å¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªå¯¹è¯é¢†åŸŸå’Œåœºæ™¯ã€‚ç„¶åç‚¹å‡» â€œå‘é€â€ æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹æ–‡å¿ƒä¸€è¨€ API è¿”å›çš„å¯¹è¯å›å¤ã€‚</li>
</ul>
<h2 id="04ç¬¬å››æ­¥é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£"><a class="markdownIt-Anchor" href="#04ç¬¬å››æ­¥é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£">#</a> <strong>04</strong> ç¬¬å››æ­¥ï¼šé›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£</h2>
<p>â€‹		è¦é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦æ ¹æ®è‡ªå·±çš„å¼€å‘ç¯å¢ƒå’Œè¯­è¨€é€‰æ‹©åˆé€‚çš„ SDK æˆ–å·¥å…·ï¼Œå¹¶ç¼–å†™ç›¸åº”çš„ä»£ç ã€‚ç™¾åº¦æ™ºèƒ½äº‘æä¾›äº†å¤šç§è¯­è¨€å’Œå¹³å°æ”¯æŒçš„ SDK æˆ–å·¥å…·ï¼Œå¦‚ Javaã€Pythonã€PHPã€Node.jsã€Androidã€iOS ç­‰ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œé›†æˆå’Œä½¿ç”¨ï¼š</p>
<ul>
<li>åœ¨æ§åˆ¶å°ä¸­è¿›å…¥ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é¡µé¢ï¼Œå¹¶ç‚¹å‡» â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ä¸‹æ–¹çš„ â€œæ–‡æ¡£â€ æŒ‰é’®ï¼Œè¿›å…¥æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„æ–‡æ¡£é¡µé¢ã€‚</li>
<li>åœ¨æ–‡æ¡£é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¹¶ä¸‹è½½æ‚¨æ‰€éœ€è¦çš„ SDK æˆ–å·¥å…·ï¼Œå¹¶å‚è€ƒç›¸å…³çš„ç¤ºä¾‹ä»£ç å’Œè¯´æ˜è¿›è¡Œé›†æˆå’Œä½¿ç”¨ã€‚</li>
<li>åœ¨å®Œæˆé›†æˆå’Œä½¿ç”¨åï¼Œæ‚¨å°±å¯ä»¥åœ¨æ‚¨çš„åº”ç”¨ä¸­è°ƒç”¨æ–‡å¿ƒä¸€è¨€ APIï¼Œå®ç°ä¸ç”¨æˆ·çš„æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚</li>
</ul>
<h1 id="ç»“è¯­"><a class="markdownIt-Anchor" href="#ç»“è¯­">#</a> ç»“è¯­ï¼š</h1>
<p>â€‹		æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦æ™ºèƒ½äº‘æ¨å‡ºçš„ä¸€æ¬¾åŸºäºå¤§è§„æ¨¡è‡ªç„¶è¯­è¨€ç”Ÿæˆæ¨¡å‹ (ChatGPT) çš„æ™ºèƒ½å¯¹è¯äº§å“ï¼Œå®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…ã€è‡ªç„¶ã€æœ‰è¶£çš„å¤šè½®å¯¹è¯ï¼Œæ¶µç›–äº†ç”Ÿæ´»ã€å¨±ä¹ã€æ•™è‚²ã€å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯ã€‚æœ¬æ–‡ä»‹ç»äº†ä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·ï¼Œå¦‚ä½•é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„ AI è§£å†³æ–¹æ¡ˆï¼Œå¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/page/2/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/15/">15</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-17T05:23:03.000Z">2023-05-17</time></p><p class="title"><a href="/2023/05/17/%E3%80%90Java%E3%80%91%E4%BD%BF%E7%94%A8%20Java%208%20%E4%B8%AD%E7%9A%84%20Stream%20%EF%BC%8C%E5%8F%AF%E4%BB%A5%E8%AE%A9%E4%BD%A0%E5%86%99%E4%BB%A3%E7%A0%81%E4%BA%8B%E5%8D%8A%E5%8A%9F%E5%80%8D/">ã€Javaã€‘ä½¿ç”¨ Java 8 ä¸­çš„ Stream ï¼Œå¯ä»¥è®©ä½ å†™ä»£ç äº‹åŠåŠŸå€</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:20:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91volatile%E5%85%B3%E9%94%AE%E5%AD%97/">ã€Javaã€‘volatileå…³é”®å­—</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:14:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91%E5%A4%9A%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:04:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91HashMap%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E8%AF%BB/">ã€Javaã€‘HashMapæ ¸å¿ƒåŸç†è§£è¯»</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-06T09:23:40.000Z">2023-05-06</time></p><p class="title"><a href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0Map/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°Hashè¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">41</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">52</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">44</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">InterviewCoder</p><p class="is-size-6 is-block">é¢è¯•è®°å®˜æ–¹å…¬ä¼—å·</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">142</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s/jWs6lLHl5L-atXJhHc4YvA" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/me.png" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">æŠ€èƒ½æ”¹å˜äººç”Ÿï¼ŒçŸ¥è¯†æ”¹å˜å‘½è¿ã€‚</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ä¸­å›½Â·æ±Ÿè‹Â·æ— é”¡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">142</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ³ çµ(ç‰¹åˆ«å‘œè°¢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(ç äº‘)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(é˜¿é‡Œäº‘)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(è…¾è®¯äº‘)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(Bç«™)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/avatar.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span></p><p class="is-size-7">Â© 2029</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>