<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Brath-Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Brath-Blog"><meta name="msapplication-TileImage" content="https://brath.cloud/me.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Brath-Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="Brath-Blog"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="Brath-Blog"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="Brath"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"Brath-Blog","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"Brath"},"publisher":{"@type":"Organization","name":"Brath-Blog","logo":{"@type":"ImageObject","url":"https://brath.cloud/me.png"}},"description":""}</script><link rel="icon" href="https://brath.cloud/me.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item is-active" href="/">ä¸»é¡µ</a><a class="navbar-item" href="/archives">æ–‡ç« åˆ—è¡¨</a><a class="navbar-item" href="/tags">æ ‡ç­¾</a><a class="navbar-item" href="/about">æ›´å¤š</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:20:55.000Z" title="2023/5/8 22:20:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-08T14:31:36.952Z" title="2023/5/8 22:31:36">2023-05-08</time>æ›´æ–°</span><span class="level-item">17 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2475ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91volatile%E5%85%B3%E9%94%AE%E5%AD%97/">ã€Javaã€‘volatileå…³é”®å­—</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javavolatileå…³é”®å­—"><a class="markdownIt-Anchor" href="#javavolatileå…³é”®å­—">#</a> ã€Javaã€‘volatile å…³é”®å­—</h1>
<h1 id="volatile"><a class="markdownIt-Anchor" href="#volatile">#</a> volatile</h1>
<h3 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_1-å¯è§æ€§æ¡ˆä¾‹1-å¯è§æ€§æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_1-å¯è§æ€§æ¡ˆä¾‹1-å¯è§æ€§æ¡ˆä¾‹">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_1 - å¯è§æ€§æ¡ˆä¾‹) 1. å¯è§æ€§æ¡ˆä¾‹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ApiTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">VT</span> <span class="variable">vt</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">VT</span>();</span><br><span class="line"></span><br><span class="line">        <span class="type">Thread</span> <span class="variable">Thread01</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(vt);</span><br><span class="line">        <span class="type">Thread</span> <span class="variable">Thread02</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">Runnable</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (InterruptedException ignore) &#123;</span><br><span class="line">                &#125;</span><br><span class="line">                vt.sign = <span class="literal">true</span>;</span><br><span class="line">                System.out.println(<span class="string">&quot;vt.sign = true é€šçŸ¥ while (!sign) ç»“æŸï¼&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        Thread01.start();</span><br><span class="line">        Thread02.start();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™æ®µä»£ç </strong>ï¼Œæ˜¯ä¸¤ä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªå˜é‡ï¼Œç¨‹åºæœŸæœ›å½“  <code>sign</code>  åœ¨çº¿ç¨‹ Thread01 è¢«æ“ä½œ  <code>vt.sign = true</code>  æ—¶ï¼ŒThread02 è¾“å‡º <em>ä½ å</em>ã€‚</p>
<p>ä½†å®é™…ä¸Šè¿™æ®µä»£ç æ°¸è¿œä¸ä¼šè¾“å‡º <em>ä½ å</em>ï¼Œè€Œæ˜¯ä¸€ç›´å¤„äºæ­»å¾ªç¯ã€‚è¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿæ¥ä¸‹æ¥æˆ‘ä»¬å°±ä¸€æ­¥æ­¥è®²è§£å’ŒéªŒè¯ã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_2-åŠ ä¸Švolatileå…³é”®å­—2-åŠ ä¸Švolatileå…³é”®å­—"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_2-åŠ ä¸Švolatileå…³é”®å­—2-åŠ ä¸Švolatileå…³é”®å­—">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_2 - åŠ ä¸Š volatile å…³é”®å­—) 2. åŠ ä¸Š volatile å…³é”®å­—</h3>
<p>æˆ‘ä»¬æŠŠ sign å…³é”®å­—åŠ ä¸Š volatitle æè¿°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vt.sign = <span class="literal">true</span> é€šçŸ¥ <span class="keyword">while</span> (!sign) ç»“æŸï¼</span><br><span class="line">ä½ å</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span> </span><br></pre></td></tr></table></figure>
<p>volatile å…³é”®å­—æ˜¯ Java è™šæ‹Ÿæœºæä¾›çš„çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œå®ƒä½œä¸ºä¸€ä¸ªä¿®é¥°ç¬¦å‡ºç°ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œä½†æ˜¯è¿™é‡Œä¸åŒ…æ‹¬å±€éƒ¨å˜é‡å“¦</p>
<p>åœ¨æ·»åŠ  volatile å…³é”®å­—åï¼Œç¨‹åºå°±ç¬¦åˆé¢„æœŸçš„è¾“å‡ºäº† <em>ä½ å</em>ã€‚ä»æˆ‘ä»¬å¯¹ volatile çš„å­¦ä¹ è®¤çŸ¥å¯ä»¥çŸ¥é“ã€‚volatile å…³é”®å­—æ˜¯ JVM æä¾›çš„æœ€è½»é‡çº§çš„åŒæ­¥æœºåˆ¶ï¼Œç”¨æ¥ä¿®é¥°å˜é‡ï¼Œç”¨æ¥ä¿è¯å˜é‡å¯¹æ‰€æœ‰çº¿ç¨‹å¯è§æ€§ã€‚</p>
<p>æ­£åœ¨ä¿®é¥°åå¯ä»¥è®©å­—æ®µåœ¨çº¿ç¨‹è§å¯è§ï¼Œé‚£ä¹ˆè¿™ä¸ªå±æ€§è¢«ä¿®æ”¹å€¼åï¼Œå¯ä»¥åŠæ—¶çš„åœ¨å¦å¤–çš„çº¿ç¨‹ä¸­åšå‡ºç›¸åº”çš„ååº”ã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§3-volatileæ€ä¹ˆä¿è¯çš„å¯è§æ€§">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_3-volatile æ€ä¹ˆä¿è¯çš„å¯è§æ€§) 3. volatile æ€ä¹ˆä¿è¯çš„å¯è§æ€§</h3>
<h4 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-1-æ— volatileæ—¶-å†…å­˜å˜åŒ–31-æ— volatileæ—¶å†…å­˜å˜åŒ–"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-1-æ— volatileæ—¶-å†…å­˜å˜åŒ–31-æ— volatileæ—¶å†…å­˜å˜åŒ–">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_3-1 - æ—  volatile æ—¶ - å†…å­˜å˜åŒ–) 3.1 æ—  volatile æ—¶ï¼Œå†…å­˜å˜åŒ–</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-03.png" alt="æ— volatileæ—¶ï¼Œå†…å­˜å˜åŒ–"></p>
<p>é¦–å…ˆæ˜¯å½“ sign æ²¡æœ‰ volatitle ä¿®é¥°æ—¶  <code>public boolean sign = false;</code> ï¼Œçº¿ç¨‹ 01 å¯¹å˜é‡è¿›è¡Œæ“ä½œï¼Œçº¿ç¨‹ 02 å¹¶ä¸ä¼šæ‹¿åˆ°å˜åŒ–çš„å€¼ã€‚æ‰€ä»¥ç¨‹åºä¹Ÿå°±ä¸ä¼šè¾“å‡ºç»“æœ â€œä½ åâ€</p>
<h4 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–32-æœ‰volatileæ—¶å†…å­˜å˜åŒ–"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_3-2-æœ‰volatileæ—¶-å†…å­˜å˜åŒ–32-æœ‰volatileæ—¶å†…å­˜å˜åŒ–">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_3-2 - æœ‰ volatile æ—¶ - å†…å­˜å˜åŒ–) 3.2 æœ‰ volatile æ—¶ï¼Œå†…å­˜å˜åŒ–</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-04.png" alt="æœ‰volatileæ—¶ï¼Œå†…å­˜å˜åŒ–"></p>
<p>å½“æˆ‘ä»¬æŠŠå˜é‡ä½¿ç”¨ volatile ä¿®é¥°æ—¶  <code>public volatile boolean sign = false;</code> ï¼Œçº¿ç¨‹ 01 å¯¹å˜é‡è¿›è¡Œæ“ä½œæ—¶ï¼Œä¼šæŠŠå˜é‡å˜åŒ–çš„å€¼å¼ºåˆ¶åˆ·æ–°çš„åˆ°ä¸»å†…å­˜ã€‚å½“çº¿ç¨‹ 02 è·å–å€¼æ—¶ï¼Œä¼šæŠŠè‡ªå·±çš„å†…å­˜é‡Œçš„ sign å€¼è¿‡æœŸæ‰ï¼Œä¹‹åä»ä¸»å†…å­˜ä¸­è¯»å–ã€‚æ‰€ä»¥æ·»åŠ å…³é”®å­—åç¨‹åºå¦‚é¢„æœŸè¾“å‡ºç»“æœã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-åç¼–è¯‘è§£æ¯’å¯è§æ€§4-åç¼–è¯‘è§£æ¯’å¯è§æ€§"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-åç¼–è¯‘è§£æ¯’å¯è§æ€§4-åç¼–è¯‘è§£æ¯’å¯è§æ€§">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_4 - åç¼–è¯‘è§£æ¯’å¯è§æ€§) 4. åç¼–è¯‘è§£æ¯’å¯è§æ€§</h3>
<p>ç±»ä¼¼è¿™æ ·æœ‰æ·±åº¦çš„æŠ€æœ¯çŸ¥è¯†ï¼Œæœ€ä½³çš„æ–¹å¼å°±æ˜¯æ·±å…¥ç†è§£åŸç†ï¼Œçœ‹çœ‹å®ƒåˆ°åº•åšäº†ä»€ä¹ˆæ‰ä¿è¯çš„å†…å­˜å¯è§æ€§æ“ä½œã€‚</p>
<h4 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-1-æŸ¥çœ‹jvmæŒ‡ä»¤41-æŸ¥çœ‹jvmæŒ‡ä»¤"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-1-æŸ¥çœ‹jvmæŒ‡ä»¤41-æŸ¥çœ‹jvmæŒ‡ä»¤">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_4-1 - æŸ¥çœ‹ jvm æŒ‡ä»¤) 4.1 æŸ¥çœ‹ JVM æŒ‡ä»¤</h4>
<p><strong>æŒ‡ä»¤</strong>ï¼š <code>javap -v -p VT</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"> <span class="keyword">public</span> <span class="keyword">volatile</span> <span class="type">boolean</span> sign;</span><br><span class="line">    descriptor: Z</span><br><span class="line">    flags: ACC_PUBLIC, ACC_VOLATILE</span><br><span class="line"></span><br><span class="line">  org.itstack.interview.test.VT();</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags:</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: invokespecial #<span class="number">1</span>                  <span class="comment">// Method java/lang/Object.&quot;&lt;init&gt;&quot;:()V</span></span><br><span class="line">         <span class="number">4</span>: aload_0</span><br><span class="line">         <span class="number">5</span>: iconst_0</span><br><span class="line">         <span class="number">6</span>: putfield      #<span class="number">2</span>                  <span class="comment">// Field sign:Z</span></span><br><span class="line">         <span class="number">9</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">35</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">37</span>: <span class="number">4</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">10</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lorg/itstack/interview/test/VT;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span>;</span><br><span class="line">    descriptor: ()V</span><br><span class="line">    flags: ACC_PUBLIC</span><br><span class="line">    Code:</span><br><span class="line">      stack=<span class="number">2</span>, locals=<span class="number">1</span>, args_size=<span class="number">1</span></span><br><span class="line">         <span class="number">0</span>: aload_0</span><br><span class="line">         <span class="number">1</span>: getfield      #<span class="number">2</span>                  <span class="comment">// Field sign:Z</span></span><br><span class="line">         <span class="number">4</span>: ifne          <span class="number">10</span></span><br><span class="line">         <span class="number">7</span>: goto          <span class="number">0</span></span><br><span class="line">        <span class="number">10</span>: getstatic     #<span class="number">3</span>                  <span class="comment">// Field java/lang/System.out:Ljava/io/PrintStream;</span></span><br><span class="line">        <span class="number">13</span>: ldc           #<span class="number">4</span>                  <span class="comment">// String ä½ å</span></span><br><span class="line">        <span class="number">15</span>: invokevirtual #<span class="number">5</span>                  <span class="comment">// Method java/io/PrintStream.println:(Ljava/lang/String;)V</span></span><br><span class="line">        <span class="number">18</span>: <span class="keyword">return</span></span><br><span class="line">      LineNumberTable:</span><br><span class="line">        line <span class="number">40</span>: <span class="number">0</span></span><br><span class="line">        line <span class="number">42</span>: <span class="number">10</span></span><br><span class="line">        line <span class="number">43</span>: <span class="number">18</span></span><br><span class="line">      LocalVariableTable:</span><br><span class="line">        Start  Length  Slot  Name   Signature</span><br><span class="line">            <span class="number">0</span>      <span class="number">19</span>     <span class="number">0</span>  <span class="built_in">this</span>   Lorg/itstack/interview/test/VT;</span><br><span class="line">      StackMapTable: number_of_entries = <span class="number">2</span></span><br><span class="line">        frame_type = <span class="number">0</span> <span class="comment">/* same */</span></span><br><span class="line">        frame_type = <span class="number">9</span> <span class="comment">/* same */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä» JVM æŒ‡ä»¤ç ä¸­åªä¼šå‘ç°å¤šäº†ï¼Œ <code>ACC_VOLATILE</code> ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå…¶ä»–çš„ç‚¹ã€‚æ‰€ä»¥ï¼Œä¹Ÿä¸èƒ½çœ‹å‡ºæ˜¯æ€ä¹ˆå®ç°çš„å¯è§æ€§ã€‚</p>
<h4 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤42-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_4-2-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤42-æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_4-2 - æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤) 4.2 æŸ¥çœ‹æ±‡ç¼–æŒ‡ä»¤</h4>
<p>é€šè¿‡ Class æ–‡ä»¶æŸ¥çœ‹æ±‡ç¼–ï¼Œéœ€è¦ä¸‹è½½ hsdis-amd64.dll æ–‡ä»¶ï¼Œå¤åˆ¶åˆ°  <code>JAVA_HOME\jre\bin\serverç›®å½•ä¸‹</code> ã€‚ä¸‹è½½èµ„æºå¦‚ä¸‹ï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip">http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-amd64.zip(opens new window)</a></li>
<li><a target="_blank" rel="noopener" href="http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip">http://vorboss.dl.sourceforge.net/project/fcml/fcml-1.1.1/hsdis-1.1.1-win32-i386.zip(opens new window)</a></li>
</ul>
<p>å¦å¤–æ˜¯æ‰§è¡Œå‘½ä»¤ï¼ŒåŒ…æ‹¬ï¼š</p>
<ol>
<li>åŸºç¡€æŒ‡ä»¤ï¼š <code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly</code></li>
<li>æŒ‡å®šæ‰“å°ï¼š <code>-XX:CompileCommand=dontinline,ç±»å.æ–¹æ³•å</code></li>
<li>æŒ‡å®šæ‰“å°ï¼š <code>-XX:CompileCommand=compileonly,ç±»å.æ–¹æ³•å</code></li>
<li>è¾“å‡ºä½ç½®ï¼š <code>&gt; xxx</code></li>
</ol>
<p>æœ€ç»ˆä½¿ç”¨ï¼š <code>java -Xcomp -XX:+UnlockDiagnosticVMOptions -XX:+PrintAssembly -XX:CompileCommand=dontinline,ApiTest.main -XX:CompileCommand=compileonly,ApiTest.mian</code></p>
<p><em>æŒ‡ä»¤å¯ä»¥åœ¨ IDEA ä¸­çš„ Terminal é‡Œä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åˆ° DOS é»‘çª—å£ä¸­ä½¿ç”¨</em></p>
<p><strong>å¦å¤–</strong>ï¼Œä¸ºäº†æ›´ç®€å•çš„ä½¿ç”¨ï¼Œæˆ‘ä»¬æŠŠæŒ‡ä»¤å¯ä»¥é…ç½®åˆ° idea çš„ VM options é‡Œï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-05.png" alt="Idea VM options é…ç½®ç¼–è¯‘æŒ‡ä»¤"></p>
<p>é…ç½®å®Œæˆåï¼Œä¸å‡ºæ„å¤–çš„è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">Loaded disassembler from C:\Program Files\Java\jdk1<span class="number">.8</span><span class="number">.0_161</span>\jre\bin\server\hsdis-amd64.dll</span><br><span class="line">Decoding compiled method <span class="number">0x0000000003744990</span>:</span><br><span class="line">Code:</span><br><span class="line">Argument <span class="number">0</span> is unknown.RIP: <span class="number">0x3744ae0</span> Code size: <span class="number">0x00000110</span></span><br><span class="line">[Disassembling <span class="keyword">for</span> mach=<span class="string">&#x27;amd64&#x27;</span>]</span><br><span class="line">[Entry Point]</span><br><span class="line">[Constants]</span><br><span class="line">  # &#123;method&#125; &#123;<span class="number">0x000000001c853d18</span>&#125; <span class="string">&#x27;getSnapshotTransformerList&#x27;</span> <span class="string">&#x27;()[Lsun/instrument/TransformerManager$TransformerInfo;&#x27;</span> in <span class="string">&#x27;sun/instrument/TransformerManager&#x27;</span></span><br><span class="line">  #           [sp+<span class="number">0x40</span>]  (sp of caller)</span><br><span class="line">  <span class="number">0x0000000003744ae0</span>: mov     r10d,dword ptr [rdx+8h]</span><br><span class="line">  <span class="number">0x0000000003744ae4</span>: shl     r10,3h</span><br><span class="line">  <span class="number">0x0000000003744ae8</span>: cmp     r10,rax</span><br><span class="line">  <span class="number">0x0000000003744aeb</span>: jne     3685f60h          ;   &#123;runtime_call&#125;</span><br><span class="line">  <span class="number">0x0000000003744af1</span>: nop     word ptr [rax+rax+0h]</span><br><span class="line">  <span class="number">0x0000000003744afc</span>: nop</span><br><span class="line">[Verified Entry Point]</span><br><span class="line">  <span class="number">0x0000000003744b00</span>: mov     dword ptr [rsp+0ffffffffffffa000h],eax</span><br><span class="line">  <span class="number">0x0000000003744b07</span>: push    rbp</span><br><span class="line">  <span class="number">0x0000000003744b08</span>: sub     rsp,30h           ;*aload_0</span><br><span class="line">                                                ; - sun.instrument.TransformerManager::getSnapshotTransformerList@<span class="number">0</span> (line <span class="number">166</span>)</span><br><span class="line"></span><br><span class="line">  <span class="number">0x0000000003744b0c</span>: mov     eax,dword ptr [rdx+10h]</span><br><span class="line">  <span class="number">0x0000000003744b0f</span>: shl     rax,3h            ;*getfield mTransformerList</span><br><span class="line">                                                ; - sun.instrument.TransformerManager::getSnapshotTransformerList@<span class="number">1</span> (line <span class="number">166</span>)</span><br><span class="line"></span><br><span class="line">  <span class="number">0x0000000003744b13</span>: add     rsp,30h</span><br><span class="line">...   </span><br></pre></td></tr></table></figure>
<p><strong>è¿è¡Œç»“æœå°±æ˜¯æ±‡ç¼–æŒ‡ä»¤</strong>ï¼Œæ¯”è¾ƒå¤šè¿™é‡Œå°±ä¸éƒ½æ”¾äº†ã€‚æˆ‘ä»¬åªè§‚å¯ŸğŸ•µé‡ç‚¹éƒ¨åˆ†ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0x0000000003324cda</span>: mov    <span class="number">0x74</span>(%r8),%edx     ;*getstatic state</span><br><span class="line">                                              ; - VT::run@<span class="number">28</span> (line <span class="number">27</span>)</span><br><span class="line"> </span><br><span class="line"><span class="number">0x0000000003324cde</span>: inc    %edx</span><br><span class="line"><span class="number">0x0000000003324ce0</span>: mov    %edx,<span class="number">0x74</span>(%r8)</span><br><span class="line"><span class="number">0x0000000003324ce4</span>: lock addl $<span class="number">0x0</span>,(%rsp)     ;*putstatic state</span><br><span class="line">                                              ; - VT::run@<span class="number">33</span> (line <span class="number">27</span>)</span><br></pre></td></tr></table></figure>
<p>ç¼–è¯‘åçš„æ±‡ç¼–æŒ‡ä»¤ä¸­ï¼Œæœ‰ volatile å…³é”®å­—å’Œæ²¡æœ‰ volatile å…³é”®å­—ï¼Œä¸»è¦å·®åˆ«åœ¨äºå¤šäº†ä¸€ä¸ª  <code>lock addl $0x0,(%rsp)</code> ï¼Œä¹Ÿå°±æ˜¯ lock çš„å‰ç¼€æŒ‡ä»¤ã€‚</p>
<p><strong>lock æŒ‡ä»¤</strong>ç›¸å½“äºä¸€ä¸ª<em>å†…å­˜å±éšœ</em>ï¼Œå®ƒä¿è¯å¦‚ä¸‹ä¸‰ç‚¹ï¼š</p>
<ol>
<li>å°†æœ¬å¤„ç†å™¨çš„ç¼“å­˜å†™å…¥å†…å­˜ã€‚</li>
<li>é‡æ’åºæ—¶ä¸èƒ½æŠŠåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li>
<li>å¦‚æœæ˜¯å†™å…¥åŠ¨ä½œä¼šå¯¼è‡´å…¶ä»–å¤„ç†å™¨ä¸­å¯¹åº”çš„å†…å­˜æ— æ•ˆã€‚</li>
</ol>
<p>é‚£ä¹ˆï¼Œè¿™é‡Œçš„ 1ã€3 å°±æ˜¯ç”¨æ¥ä¿è¯è¢«ä¿®é¥°çš„å˜é‡ï¼Œä¿è¯å†…å­˜å¯è§æ€§ã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_5-ä¸åŠ volatileä¹Ÿå¯è§å—5-ä¸åŠ volatileä¹Ÿå¯è§å—"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-21-é¢ç»æ‰‹å†Œ-ç¬¬14ç¯‡volatile-æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§æ²¡æœ‰-volatile-ä¸€å®šä¸å¯è§å—html_5-ä¸åŠ volatileä¹Ÿå¯è§å—5-ä¸åŠ volatileä¹Ÿå¯è§å—">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-21-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-21 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 14 ç¯‡ã€Švolatile æ€ä¹ˆå®ç°çš„å†…å­˜å¯è§ï¼Ÿæ²¡æœ‰ volatile ä¸€å®šä¸å¯è§å—ï¼Ÿã€‹.html#_5 - ä¸åŠ  volatile ä¹Ÿå¯è§å—) 5. ä¸åŠ  volatile ä¹Ÿå¯è§å—</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">æœ‰è´¨ç–‘å°±è¦æœ‰éªŒè¯</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç°åœ¨å†æŠŠä¾‹å­ä¿®æ”¹ä¸‹ï¼Œåœ¨  <code>while (!sign)</code>  å¾ªç¯ä½“ä¸­æ·»åŠ ä¸€æ®µæ‰§è¡Œä»£ç ï¼Œå¦‚ä¸‹ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">VT</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="variable">sign</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!sign) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;ä½ å¥½&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;ä½ å&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¿®æ”¹åå»æ‰äº†  <code>volatile</code>  å…³é”®å­—ï¼Œå¹¶åœ¨ while å¾ªç¯ä¸­æ·»åŠ ä¸€æ®µä»£ç ã€‚ç°åœ¨çš„è¿è¡Œç»“æœæ˜¯ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">ä½ å¥½</span><br><span class="line">ä½ å¥½</span><br><span class="line">ä½ å¥½</span><br><span class="line">vt.sign = <span class="literal">true</span> é€šçŸ¥ <span class="keyword">while</span> (!sign) ç»“æŸï¼</span><br><span class="line">ä½ å</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p><strong>å’‹æ ·</strong>ï¼Œåˆå¯è§äº†å§ï¼</p>
<p>è¿™æ˜¯å› ä¸ºåœ¨æ²¡ volatile ä¿®é¥°æ—¶ï¼Œjvm ä¹Ÿä¼šå°½é‡ä¿è¯å¯è§æ€§ã€‚æœ‰ volatile ä¿®é¥°çš„æ—¶å€™ï¼Œä¸€å®šä¿è¯å¯è§æ€§ã€‚</p>
<h2 id="æ€»ç»“"><a class="markdownIt-Anchor" href="#æ€»ç»“">#</a> æ€»ç»“</h2>
<ul>
<li>volatile ä¼šæ§åˆ¶è¢«ä¿®é¥°çš„å˜é‡åœ¨å†…å­˜æ“ä½œä¸Šä¸»åŠ¨æŠŠå€¼åˆ·æ–°åˆ°ä¸»å†…å­˜ï¼ŒJMM ä¼šæŠŠè¯¥çº¿ç¨‹å¯¹åº”çš„ CPU å†…å­˜è®¾ç½®è¿‡æœŸï¼Œä»ä¸»å†…å­˜ä¸­è¯»å–æœ€æ–°å€¼ã€‚</li>
<li>é‚£ä¹ˆï¼Œvolatile å¦‚ä½•é˜²æ­¢æŒ‡ä»¤é‡æ’ä¹Ÿæ˜¯å†…å­˜å±éšœï¼Œvolatile çš„å†…å­˜å±æ•…éšœæ˜¯åœ¨è¯»å†™æ“ä½œçš„å‰åå„æ·»åŠ ä¸€ä¸ª StoreStore å±éšœï¼Œä¹Ÿå°±æ˜¯å››ä¸ªä½ç½®ï¼Œæ¥ä¿è¯é‡æ’åºæ—¶ä¸èƒ½æŠŠå†…å­˜å±éšœåé¢çš„æŒ‡ä»¤é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰çš„ä½ç½®ã€‚</li>
<li>å¦å¤– volatile å¹¶ä¸èƒ½è§£å†³åŸå­æ€§é—®é¢˜ï¼Œå³å¯¹äºå¤åˆæ“ä½œï¼ˆæ¯”å¦‚ i++ ç­‰ï¼‰æ— æ³•ä¿è¯çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœéœ€è¦è§£å†³åŸå­æ€§é—®é¢˜ï¼Œéœ€è¦ä½¿ç”¨ synchronzied æˆ–è€… lockã€‚</li>
<li>ä½¿ç”¨ volatile è™½ç„¶å¯ä»¥æä¾›æ¯”è¾ƒé«˜çš„å¯è§æ€§å’Œé¡ºåºæ€§çš„ä¿éšœï¼Œä½†å¹¶ä¸æ˜¯ç»å¯¹å¯é çš„ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“çš„ä¸šåŠ¡åœºæ™¯å’Œä»£ç éœ€æ±‚æ¥è¿›è¡Œç»¼åˆè€ƒè™‘å’Œè¯„ä¼°ã€‚</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:14:55.000Z" title="2023/5/8 22:14:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-08T14:31:45.396Z" title="2023/5/8 22:31:45">2023-05-08</time>æ›´æ–°</span><span class="level-item">17 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2592ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91%E5%A4%9A%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt=""></p>
<h1 id="javaå¤šç§ä»£ç†çš„å®ç°æ–¹å¼"><a class="markdownIt-Anchor" href="#javaå¤šç§ä»£ç†çš„å®ç°æ–¹å¼">#</a> ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</h1>
<h2 id="äº”ç§ç±»ä»£ç†çš„æ–¹å¼"><a class="markdownIt-Anchor" href="#äº”ç§ç±»ä»£ç†çš„æ–¹å¼">#</a> äº”ç§ç±»ä»£ç†çš„æ–¹å¼</h2>
<p><code>ä¸å‡ºæ„å¤–</code> ï¼Œä½ å¯èƒ½åªçŸ¥é“ä¸¤ç§ç±»ä»£ç†çš„æ–¹å¼ã€‚ä¸€ç§æ˜¯ JDK è‡ªå¸¦çš„ï¼Œå¦å¤–ä¸€ç§æ˜¯ CGLIBã€‚</p>
<p>æˆ‘ä»¬å…ˆå®šä¹‰å‡ºä¸€ä¸ªæ¥å£å’Œç›¸åº”çš„å®ç°ç±»ï¼Œæ–¹ä¾¿åç»­ä½¿ç”¨ä»£ç†ç±»åœ¨æ–¹æ³•ä¸­æ·»åŠ è¾“å‡ºä¿¡æ¯ã€‚</p>
<p><strong>å®šä¹‰æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">IUserApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    String <span class="title function_">queryUserInfo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å®ç°æ¥å£</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserApi</span> <span class="keyword">implements</span> <span class="title class_">IUserApi</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">queryUserInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;é¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¥½ï¼æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç»™è¿™ä¸ªç±»æ–¹æ³•ä½¿ç”¨ä»£ç†åŠ å…¥ä¸€è¡Œé¢å¤–è¾“å‡ºçš„ä¿¡æ¯ã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†0-å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_0 - å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†) 0. å…ˆè¡¥å……ä¸€ç‚¹åå°„çš„çŸ¥è¯†</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_reflect</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    Class&lt;UserApi&gt; clazz = UserApi.class;</span><br><span class="line">    <span class="type">Method</span> <span class="variable">queryUserInfo</span> <span class="operator">=</span> clazz.getMethod(<span class="string">&quot;queryUserInfo&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">invoke</span> <span class="operator">=</span> queryUserInfo.invoke(clazz.newInstance());</span><br><span class="line">    System.out.println(invoke);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­</li>
<li>ç‚¹è¯„ï¼šæœ‰ä»£ç†åœ°æ–¹å‡ ä¹å°±ä¼šæœ‰åå°„ï¼Œä»–ä»¬æ˜¯ä¸€å¥—äº’ç›¸é…åˆä½¿ç”¨çš„åŠŸèƒ½ç±»ã€‚åœ¨åå°„ä¸­å¯ä»¥è°ƒç”¨æ–¹æ³•ã€è·å–å±æ€§ã€æ‹¿åˆ°æ³¨è§£ç­‰ç›¸å…³å†…å®¹ã€‚è¿™äº›éƒ½å¯ä»¥ä¸æ¥ä¸‹æ¥çš„ç±»ä»£ç†ç»„åˆä½¿ç”¨ï¼Œå®Œæˆå„ç§æ¡†æ¶ä¸­çš„æŠ€æœ¯åœºæ™¯ã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_1-jdkä»£ç†æ–¹å¼1-jdkä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_1-jdkä»£ç†æ–¹å¼1-jdkä»£ç†æ–¹å¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_1-jdk ä»£ç†æ–¹å¼) 1. JDK ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDKProxy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> Thread.currentThread().getContextClassLoader();</span><br><span class="line">        <span class="keyword">return</span> (T) Proxy.newProxyInstance(classLoader, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;clazz&#125;, <span class="keyword">new</span> <span class="title class_">InvocationHandler</span>() &#123;</span><br><span class="line">            <span class="keyword">public</span> Object <span class="title function_">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">                System.out.println(method.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy JDKProxyï¼&quot;</span>);</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;é¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_JDKProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> JDKProxy.getProxy(IUserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy JDKProxyï¼</span></span><br><span class="line"><span class="comment"> * 19:55:47.319 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span>  </span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­</li>
<li>åœºæ™¯ï¼šä¸­é—´ä»¶å¼€å‘ã€è®¾è®¡æ¨¡å¼ä¸­ä»£ç†æ¨¡å¼å’Œè£…é¥°å™¨æ¨¡å¼åº”ç”¨</li>
<li>ç‚¹è¯„ï¼šè¿™ç§ JDK è‡ªå¸¦çš„ç±»ä»£ç†æ–¹å¼æ˜¯éå¸¸å¸¸ç”¨çš„ä¸€ç§ï¼Œä¹Ÿæ˜¯éå¸¸ç®€å•çš„ä¸€ç§ã€‚åŸºæœ¬ä¼šåœ¨ä¸€äº›ä¸­é—´ä»¶ä»£ç é‡Œçœ‹åˆ°ä¾‹å¦‚ï¼šæ•°æ®åº“è·¯ç”±ç»„ä»¶ã€Redis ç»„ä»¶ç­‰ï¼ŒåŒæ—¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è¿™æ ·çš„æ–¹å¼åº”ç”¨åˆ°è®¾è®¡æ¨¡å¼ä¸­ã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_2-cglibä»£ç†æ–¹å¼2-cglibä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_2-cglibä»£ç†æ–¹å¼2-cglibä»£ç†æ–¹å¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_2-cglib ä»£ç†æ–¹å¼) 2. CGLIB ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CglibProxy</span> <span class="keyword">implements</span> <span class="title class_">MethodInterceptor</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">newInstall</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Enhancer.create(object.getClass(), <span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">intercept</span><span class="params">(Object o, Method method, Object[] objects, MethodProxy methodProxy)</span> <span class="keyword">throws</span> Throwable &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;æˆ‘è¢«CglibProxyä»£ç†äº†&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> methodProxy.invokeSuper(o, objects);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_CglibProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">CglibProxy</span> <span class="variable">cglibProxy</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">CglibProxy</span>();</span><br><span class="line">    <span class="type">UserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> (UserApi) cglibProxy.newInstall(<span class="keyword">new</span> <span class="title class_">UserApi</span>());</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy CglibProxyï¼</span></span><br><span class="line"><span class="comment"> * 19:55:47.319 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­</li>
<li>åœºæ™¯ï¼šSpringã€AOP åˆ‡é¢ã€é‰´æƒæœåŠ¡ã€ä¸­é—´ä»¶å¼€å‘ã€RPC æ¡†æ¶ç­‰</li>
<li>ç‚¹è¯„ï¼šCGLIB ä¸åŒäº JDKï¼Œå®ƒçš„åº•å±‚ä½¿ç”¨ ASM å­—èŠ‚ç æ¡†æ¶åœ¨ç±»ä¸­ä¿®æ”¹æŒ‡ä»¤ç å®ç°ä»£ç†ï¼Œæ‰€ä»¥è¿™ç§ä»£ç†æ–¹å¼ä¹Ÿå°±ä¸éœ€è¦åƒ JDK é‚£æ ·éœ€è¦æ¥å£æ‰èƒ½ä»£ç†ã€‚åŒæ—¶å¾—ç›Šäºå­—èŠ‚ç æ¡†æ¶çš„ä½¿ç”¨ï¼Œæ‰€ä»¥è¿™ç§ä»£ç†æ–¹å¼ä¹Ÿä¼šæ¯”ä½¿ç”¨ JDK ä»£ç†çš„æ–¹å¼å¿« 1.5~2.0 å€ã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_3-asmä»£ç†æ–¹å¼3-asmä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_3-asmä»£ç†æ–¹å¼3-asmä»£ç†æ–¹å¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_3-asm ä»£ç†æ–¹å¼) 3. ASM ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ASMProxy</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassReader</span> <span class="variable">classReader</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassReader</span>(clazz.getName());</span><br><span class="line">        <span class="type">ClassWriter</span> <span class="variable">classWriter</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ClassWriter</span>(classReader, ClassWriter.COMPUTE_MAXS);</span><br><span class="line"></span><br><span class="line">        classReader.accept(<span class="keyword">new</span> <span class="title class_">ClassVisitor</span>(ASM5, classWriter) &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> MethodVisitor <span class="title function_">visitMethod</span><span class="params">(<span class="type">int</span> access, <span class="keyword">final</span> String name, String descriptor, String signature, String[] exceptions)</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// æ–¹æ³•è¿‡æ»¤</span></span><br><span class="line">                <span class="keyword">if</span> (!<span class="string">&quot;queryUserInfo&quot;</span>.equals(name))</span><br><span class="line">                    <span class="keyword">return</span> <span class="built_in">super</span>.visitMethod(access, name, descriptor, signature, exceptions);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">final</span> <span class="type">MethodVisitor</span> <span class="variable">methodVisitor</span> <span class="operator">=</span> <span class="built_in">super</span>.visitMethod(access, name, descriptor, signature, exceptions);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AdviceAdapter</span>(ASM5, methodVisitor, access, name, descriptor) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="meta">@Override</span></span><br><span class="line">                    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">onMethodEnter</span><span class="params">()</span> &#123;</span><br><span class="line">                        <span class="comment">// æ‰§è¡ŒæŒ‡ä»¤ï¼›è·å–é™æ€å±æ€§</span></span><br><span class="line">                        methodVisitor.visitFieldInsn(Opcodes.GETSTATIC, <span class="string">&quot;java/lang/System&quot;</span>, <span class="string">&quot;out&quot;</span>, <span class="string">&quot;Ljava/io/PrintStream;&quot;</span>);</span><br><span class="line">                        <span class="comment">// åŠ è½½å¸¸é‡ load constant</span></span><br><span class="line">                        methodVisitor.visitLdcInsn(name + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy ASMï¼&quot;</span>);</span><br><span class="line">                        <span class="comment">// è°ƒç”¨æ–¹æ³•</span></span><br><span class="line">                        methodVisitor.visitMethodInsn(Opcodes.INVOKEVIRTUAL, <span class="string">&quot;java/io/PrintStream&quot;</span>, <span class="string">&quot;println&quot;</span>, <span class="string">&quot;(Ljava/lang/String;)V&quot;</span>, <span class="literal">false</span>);</span><br><span class="line">                        <span class="built_in">super</span>.onMethodEnter();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;, ClassReader.EXPAND_FRAMES);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = classWriter.toByteArray();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) <span class="keyword">new</span> <span class="title class_">ASMProxy</span>().defineClass(clazz.getName(), bytes, <span class="number">0</span>, bytes.length).newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_ASMProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> ASMProxy.getProxy(UserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy ASMï¼</span></span><br><span class="line"><span class="comment"> * 20:12:26.791 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­â­</li>
<li>åœºæ™¯ï¼šå…¨é“¾è·¯ç›‘æ§ã€ç ´è§£å·¥å…·åŒ…ã€CGLIBã€Spring è·å–ç±»å…ƒæ•°æ®ç­‰</li>
<li>ç‚¹è¯„ï¼šè¿™ç§ä»£ç†å°±æ˜¯ä½¿ç”¨å­—èŠ‚ç ç¼–ç¨‹çš„æ–¹å¼è¿›è¡Œå¤„ç†ï¼Œå®ƒçš„å®ç°æ–¹å¼ç›¸å¯¹å¤æ‚ï¼Œè€Œä¸”éœ€è¦äº†è§£ Java è™šæ‹Ÿæœºè§„èŒƒç›¸å…³çš„çŸ¥è¯†ã€‚å› ä¸ºä½ çš„æ¯ä¸€æ­¥ä»£ç†æ“ä½œï¼Œéƒ½æ˜¯åœ¨æ“ä½œå­—èŠ‚ç æŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼š <code>Opcodes.GETSTATIC</code> ã€ <code>Opcodes.INVOKEVIRTUAL</code> ï¼Œé™¤äº†è¿™äº›è¿˜æœ‰å° 200 ä¸ªå¸¸ç”¨çš„æŒ‡ä»¤ã€‚ä½†è¿™ç§æœ€æ¥è¿‘åº•å±‚çš„æ–¹å¼ï¼Œä¹Ÿæ˜¯æœ€å¿«çš„æ–¹å¼ã€‚æ‰€ä»¥åœ¨ä¸€äº›ä½¿ç”¨å­—èŠ‚ç æ’è£…çš„å…¨é“¾è·¯ç›‘æ§ä¸­ï¼Œä¼šéå¸¸å¸¸è§ã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_4-byte-buddyä»£ç†æ–¹å¼4-byte-buddyä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_4-byte-buddyä»£ç†æ–¹å¼4-byte-buddyä»£ç†æ–¹å¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_4-byte-buddy ä»£ç†æ–¹å¼) 4. Byte-Buddy ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ByteBuddyProxy</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        DynamicType.Unloaded&lt;?&gt; dynamicType = <span class="keyword">new</span> <span class="title class_">ByteBuddy</span>()</span><br><span class="line">                .subclass(clazz)</span><br><span class="line">                .method(ElementMatchers.&lt;MethodDescription&gt;named(<span class="string">&quot;queryUserInfo&quot;</span>))</span><br><span class="line">                .intercept(MethodDelegation.to(InvocationHandler.class))</span><br><span class="line">                .make();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) dynamicType.load(Thread.currentThread().getContextClassLoader()).getLoaded().newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RuntimeType</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">intercept</span><span class="params">(<span class="meta">@Origin</span> Method method, <span class="meta">@AllArguments</span> Object[] args, <span class="meta">@SuperCall</span> Callable&lt;?&gt; callable)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    System.out.println(method.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy Byte-Buddyï¼&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> callable.call();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_ByteBuddyProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> ByteBuddyProxy.getProxy(UserApi.class);</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy Byte-Buddyï¼</span></span><br><span class="line"><span class="comment"> * 20:19:44.498 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span>  </span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­</li>
<li>åœºæ™¯ï¼šAOP åˆ‡é¢ã€ç±»ä»£ç†ã€ç»„ä»¶ã€ç›‘æ§ã€æ—¥å¿—</li>
<li>ç‚¹è¯„ï¼š <code>Byte Buddy</code>  ä¹Ÿæ˜¯ä¸€ä¸ªå­—èŠ‚ç æ“ä½œçš„ç±»åº“ï¼Œä½†  <code>Byte Buddy</code>  çš„ä½¿ç”¨æ–¹å¼æ›´åŠ ç®€å•ã€‚æ— éœ€ç†è§£å­—èŠ‚ç æŒ‡ä»¤ï¼Œå³å¯ä½¿ç”¨ç®€å•çš„ API å°±èƒ½å¾ˆå®¹æ˜“æ“ä½œå­—èŠ‚ç ï¼Œæ§åˆ¶ç±»å’Œæ–¹æ³•ã€‚æ¯”èµ· JDK åŠ¨æ€ä»£ç†ã€cglibï¼ŒByte Buddy åœ¨æ€§èƒ½ä¸Šå…·æœ‰ä¸€å®šçš„ä¼˜åŠ¿ã€‚<strong>å¦å¤–</strong>ï¼Œ2015 å¹´ 10 æœˆï¼ŒByte Buddy è¢« Oracle æˆäºˆäº† Dukeâ€™s Choice å¤§å¥–ã€‚è¯¥å¥–é¡¹å¯¹ Byte Buddy çš„ â€œJava æŠ€æœ¯æ–¹é¢çš„å·¨å¤§åˆ›æ–°â€ è¡¨ç¤ºèµèµã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_5-javassistä»£ç†æ–¹å¼5-javassistä»£ç†æ–¹å¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½html_5-javassistä»£ç†æ–¹å¼5-javassistä»£ç†æ–¹å¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html#_5-javassist ä»£ç†æ–¹å¼) 5. Javassist ä»£ç†æ–¹å¼</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JavassistProxy</span> <span class="keyword">extends</span> <span class="title class_">ClassLoader</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getProxy</span><span class="params">(Class clazz)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">ClassPool</span> <span class="variable">pool</span> <span class="operator">=</span> ClassPool.getDefault();</span><br><span class="line">        <span class="comment">// è·å–ç±»</span></span><br><span class="line">        <span class="type">CtClass</span> <span class="variable">ctClass</span> <span class="operator">=</span> pool.get(clazz.getName());</span><br><span class="line">        <span class="comment">// è·å–æ–¹æ³•</span></span><br><span class="line">        <span class="type">CtMethod</span> <span class="variable">ctMethod</span> <span class="operator">=</span> ctClass.getDeclaredMethod(<span class="string">&quot;queryUserInfo&quot;</span>);</span><br><span class="line">        <span class="comment">// æ–¹æ³•å‰åŠ å¼º</span></span><br><span class="line">        ctMethod.insertBefore(<span class="string">&quot;&#123;System.out.println(\&quot;&quot;</span> + ctMethod.getName() + <span class="string">&quot; ä½ è¢«ä»£ç†äº†ï¼ŒBy Javassist\&quot;);&#125;&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">byte</span>[] bytes = ctClass.toBytecode();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> (T) <span class="keyword">new</span> <span class="title class_">JavassistProxy</span>().defineClass(clazz.getName(), bytes, <span class="number">0</span>, bytes.length).newInstance();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_JavassistProxy</span><span class="params">()</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">IUserApi</span> <span class="variable">userApi</span> <span class="operator">=</span> JavassistProxy.getProxy(UserApi.class)</span><br><span class="line">    <span class="type">String</span> <span class="variable">invoke</span> <span class="operator">=</span> userApi.queryUserInfo();</span><br><span class="line">    logger.info(<span class="string">&quot;æµ‹è¯•ç»“æœï¼š&#123;&#125;&quot;</span>, invoke);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * æµ‹è¯•ç»“æœï¼š</span></span><br><span class="line"><span class="comment"> * </span></span><br><span class="line"><span class="comment"> * queryUserInfo ä½ è¢«ä»£ç†äº†ï¼ŒBy Javassist</span></span><br><span class="line"><span class="comment"> * 20:23:39.139 [main] INFO  cn.brath.interview.test.ApiTest - æµ‹è¯•ç»“æœï¼šé¢è¯•è®°å…¬ä¼—å·ï¼šInterviewCoderï¼Œä¸ºäº†æ›´å¥½çš„ä½ ï¼Œä¹Ÿä¸ºäº†æ›´å¥½çš„ä¸–ç•Œï¼</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Process finished with exit code 0</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>
<hr>
<ul>
<li>æŒ‡æ•°ï¼šâ­â­â­â­</li>
<li>åœºæ™¯ï¼šå…¨é“¾è·¯ç›‘æ§ã€ç±»ä»£ç†ã€AOP</li>
<li>ç‚¹è¯„ï¼š <code>Javassist</code>  æ˜¯ä¸€ä¸ªä½¿ç”¨éå¸¸å¹¿çš„å­—èŠ‚ç æ’è£…æ¡†æ¶ï¼Œå‡ ä¹ä¸€å¤§éƒ¨åˆ†éå…¥ä¾µçš„å…¨é“¾è·¯ç›‘æ§éƒ½æ˜¯ä¼šé€‰æ‹©ä½¿ç”¨è¿™ä¸ªæ¡†æ¶ã€‚å› ä¸ºå®ƒä¸æƒ³ ASM é‚£æ ·æ“ä½œå­—èŠ‚ç å¯¼è‡´é£é™©ï¼ŒåŒæ—¶å®ƒçš„åŠŸèƒ½ä¹Ÿéå¸¸é½å…¨ã€‚å¦å¤–ï¼Œè¿™ä¸ªæ¡†æ¶å³å¯ä½¿ç”¨å®ƒæ‰€æä¾›çš„æ–¹å¼ç›´æ¥ç¼–å†™æ’è£…ä»£ç ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—èŠ‚ç æŒ‡ä»¤è¿›è¡Œæ§åˆ¶ç”Ÿæˆä»£ç ï¼Œæ‰€ä»¥ç»¼åˆæ¥çœ‹ä¹Ÿæ˜¯ä¸€ä¸ªéå¸¸ä¸é”™çš„å­—èŠ‚ç æ¡†æ¶ã€‚</li>
</ul>
<h2 id="httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½htmlå››-æ€»ç»“å››-æ€»ç»“"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-10-14-é¢ç»æ‰‹å†Œ-ç¬¬13ç¯‡é™¤äº†jdk-cglibè¿˜æœ‰3ç§ç±»ä»£ç†æ–¹å¼é¢è¯•åˆå¡ä½htmlå››-æ€»ç»“å››-æ€»ç»“">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-10-14-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-10-14 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 13 ç¯‡ã€Šé™¤äº† JDKã€CGLIBï¼Œè¿˜æœ‰ 3 ç§ç±»ä»£ç†æ–¹å¼ï¼Ÿé¢è¯•åˆå¡ä½ï¼ã€‹.html# å››ã€æ€»ç»“) å››ã€æ€»ç»“</h2>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-14-01.png" alt="img"></p>
<ul>
<li>ä»£ç†çš„å®é™…ç›®çš„å°±æ˜¯é€šè¿‡ä¸€äº›æŠ€æœ¯æ‰‹æ®µï¼Œæ›¿æ¢æ‰åŸæœ‰çš„å®ç°ç±»æˆ–è€…ç»™åŸæœ‰çš„å®ç°ç±»æ³¨å…¥æ–°çš„å­—èŠ‚ç æŒ‡ä»¤ã€‚è€Œè¿™äº›æŠ€æœ¯æœ€ç»ˆéƒ½ä¼šç”¨åˆ°ä¸€äº›æ¡†æ¶åº”ç”¨ã€ä¸­é—´ä»¶å¼€å‘ä»¥åŠç±»ä¼¼éå…¥ä¾µçš„å…¨é“¾è·¯ç›‘æ§ä¸­ã€‚</li>
<li>ä¸€ä¸ªæŠ€æœ¯æ ˆæ·±åº¦çš„å­¦ä¹ èƒ½è®©ä½ é€å½»çš„äº†è§£åˆ°ä¸€äº›åŸºæœ¬çš„æ ¹æœ¬åŸç†ï¼Œé€šè¿‡è¿™æ ·çš„å­¦ä¹ å¯ä»¥è§£æƒ‘æ‰ä¸€äº›ä¼¼æ‡‚éæ‡‚çš„ç–‘é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è¿™æ ·æŠ€æœ¯çš„æ‹“å±•è®©è‡ªå·±æœ‰æ›´å¥½çš„å·¥ä½œæœºä¼šå’Œè–ªèµ„å¾…é‡ã€‚</li>
<li>è¿™äº›æŠ€æœ¯å­¦èµ·æ¥å¹¶ä¸ä¼šå¾ˆå®¹æ˜“ï¼Œç”šè‡³å¯èƒ½è¿˜æœ‰ä¸€äº›çƒ§è„‘ã€‚ä½†æ¯ä¸€æ®µå€¼å¾—æ·±å…¥å­¦ä¹ çš„æŠ€æœ¯éƒ½èƒ½å¸®åŠ©ä½ çªç ´ä¸€å®šé˜¶æ®µçš„æŠ€æœ¯ç“¶é¢ˆã€‚</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-08T14:04:55.000Z" title="2023/5/8 22:04:55">2023-05-08</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-08T14:31:58.919Z" title="2023/5/8 22:31:58">2023-05-08</time>æ›´æ–°</span><span class="level-item">1 å°æ—¶è¯»å®Œ (å¤§çº¦10532ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/08/%E3%80%90Java%E3%80%91HashMap%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E8%AF%BB/">ã€Javaã€‘HashMapæ ¸å¿ƒåŸç†è§£è¯»</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="javahashmapæ ¸å¿ƒåŸç†è§£è¯»"><a class="markdownIt-Anchor" href="#javahashmapæ ¸å¿ƒåŸç†è§£è¯»">#</a> ã€Javaã€‘HashMap æ ¸å¿ƒåŸç†è§£è¯»</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<p>å¾—ç›Šäº <code>Doug Lea</code>  è€çˆ·å­çš„æ“åˆ€ï¼Œè®© <code>HashMap</code>  æˆä¸ºä½¿ç”¨å’Œé¢è¯•æœ€é¢‘ç¹çš„ APIï¼Œæ²¡åŠæ³•è®¾è®¡çš„å¤ªä¼˜ç§€äº†ï¼</p>
<p>HashMap æœ€æ—©å‡ºç°åœ¨ JDK 1.2 ä¸­ï¼Œåº•å±‚åŸºäºæ•£åˆ—ç®—æ³•å®ç°ã€‚HashMap å…è®¸ null é”®å’Œ null å€¼ï¼Œåœ¨è®¡ç®—å“ˆé”®çš„å“ˆå¸Œå€¼æ—¶ï¼Œnull é”®å“ˆå¸Œå€¼ä¸º 0ã€‚HashMap å¹¶ä¸ä¿è¯é”®å€¼å¯¹çš„é¡ºåºï¼Œè¿™æ„å‘³ç€åœ¨è¿›è¡ŒæŸäº›æ“ä½œåï¼Œé”®å€¼å¯¹çš„é¡ºåºå¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚å¦å¤–ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap æ˜¯éçº¿ç¨‹å®‰å…¨ç±»ï¼Œåœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½ä¼šå­˜åœ¨é—®é¢˜ã€‚</p>
<h2 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ htmlä¸‰-æºç åˆ†æäºŒ-æºç åˆ†æ"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ htmlä¸‰-æºç åˆ†æäºŒ-æºç åˆ†æ">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html# ä¸‰ã€æºç åˆ†æ) äºŒã€æºç åˆ†æ</h2>
<h3 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap1-å†™ä¸€ä¸ªæœ€ç®€å•çš„hashmap">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_1 - å†™ä¸€ä¸ªæœ€ç®€å•çš„ hashmap) 1. å†™ä¸€ä¸ªæœ€ç®€å•çš„ HashMap</h3>
<p>å­¦ä¹  HashMap å‰ï¼Œæœ€å¥½çš„æ–¹å¼æ˜¯å…ˆäº†è§£è¿™æ˜¯ä¸€ç§æ€ä¹ˆæ ·çš„æ•°æ®ç»“æ„æ¥å­˜æ”¾æ•°æ®ã€‚è€Œ HashMap ç»è¿‡å¤šä¸ªç‰ˆæœ¬çš„è¿­ä»£åï¼Œä¹ä¸€çœ‹ä»£ç è¿˜æ˜¯å¾ˆå¤æ‚çš„ã€‚å°±åƒä½ åŸæ¥åªç©¿ä¸ªè£¤è¡©ï¼Œç°åœ¨è¿˜æœ‰ç§‹è£¤å’Œé£è¡£ã€‚æ‰€ä»¥æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹æœ€æ ¹æœ¬çš„ HashMap æ˜¯ä»€ä¹ˆæ ·ï¼Œä¹Ÿå°±æ˜¯åªç©¿è£¤è¡©æ˜¯ä»€ä¹ˆæ•ˆæœï¼Œä¹‹åå†å»åˆ†æå®ƒçš„æºç ã€‚</p>
<p><strong>é—®é¢˜ï¼š</strong> å‡è®¾æˆ‘ä»¬æœ‰ä¸€ç»„ 7 ä¸ªå­—ç¬¦ä¸²ï¼Œéœ€è¦å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œä½†è¦æ±‚åœ¨è·å–æ¯ä¸ªå…ƒç´ çš„æ—¶å€™æ—¶é—´å¤æ‚åº¦æ˜¯ O (1)ã€‚ä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½é€šè¿‡å¾ªç¯éå†çš„æ–¹å¼è¿›è¡Œè·å–ï¼Œè€Œæ˜¯è¦å®šä½åˆ°æ•°ç»„ ID ç›´æ¥è·å–ç›¸åº”çš„å…ƒç´ ã€‚</p>
<p><strong>æ–¹æ¡ˆï¼š</strong> å¦‚æœè¯´æˆ‘ä»¬éœ€è¦é€šè¿‡ ID ä»æ•°ç»„ä¸­è·å–å…ƒç´ ï¼Œé‚£ä¹ˆå°±éœ€è¦æŠŠæ¯ä¸ªå­—ç¬¦ä¸²éƒ½è®¡ç®—å‡ºä¸€ä¸ªåœ¨æ•°ç»„ä¸­çš„ä½ç½® IDã€‚<em>å­—ç¬¦ä¸²è·å– ID ä½ èƒ½æƒ³åˆ°ä»€ä¹ˆæ–¹å¼ï¼Ÿ</em> ä¸€ä¸ªå­—ç¬¦ä¸²æœ€ç›´æ¥çš„è·å–è·Ÿæ•°å­—ç›¸å…³çš„ä¿¡æ¯å°±æ˜¯ HashCodeï¼Œå¯ HashCode çš„å–å€¼èŒƒå›´å¤ªå¤§äº† <code>[-2147483648, 2147483647]</code> ï¼Œä¸å¯èƒ½ç›´æ¥ä½¿ç”¨ã€‚é‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨ HashCode ä¸æ•°ç»„é•¿åº¦åšä¸è¿ç®—ï¼Œå¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®ã€‚å¦‚æœè¯´æœ‰ä¸¤ä¸ªå…ƒç´ å¾—åˆ°åŒæ ·çš„ IDï¼Œé‚£ä¹ˆè¿™ä¸ªæ•°ç»„ ID ä¸‹å°±å­˜æ”¾ä¸¤ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>ä»¥ä¸Šå‘¢å…¶å®å°±æ˜¯æˆ‘ä»¬è¦æŠŠå­—ç¬¦ä¸²æ•£åˆ—åˆ°æ•°ç»„ä¸­çš„ä¸€ä¸ªåŸºæœ¬æ€è·¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±æŠŠè¿™ä¸ªæ€è·¯ç”¨ä»£ç å®ç°å‡ºæ¥ã€‚</p>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-1-ä»£ç å®ç°11-ä»£ç å®ç°"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-1-ä»£ç å®ç°11-ä»£ç å®ç°">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_1-1 - ä»£ç å®ç°) 1.1 ä»£ç å®ç°</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²</span></span><br><span class="line">List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">list.add(<span class="string">&quot;jlkk&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;lopi&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;å°å‚…å“¥&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;e4we&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;alpo&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;yhjk&quot;</span>);</span><br><span class="line">list.add(<span class="string">&quot;plop&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰è¦å­˜æ”¾çš„æ•°ç»„</span></span><br><span class="line">String[] tab = <span class="keyword">new</span> <span class="title class_">String</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¾ªç¯å­˜æ”¾</span></span><br><span class="line"><span class="keyword">for</span> (String key : list) &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);  <span class="comment">// è®¡ç®—ç´¢å¼•ä½ç½®</span></span><br><span class="line">    System.out.println(String.format(<span class="string">&quot;keyå€¼=%s Idx=%d&quot;</span>, key, idx));</span><br><span class="line">    <span class="keyword">if</span> (<span class="literal">null</span> == tab[idx]) &#123;</span><br><span class="line">        tab[idx] = key;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    tab[idx] = tab[idx] + <span class="string">&quot;-&gt;&quot;</span> + key;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¾“å‡ºæµ‹è¯•ç»“æœ</span></span><br><span class="line">System.out.println(JSON.toJSONString(tab));</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ•´ä½“çœ‹èµ·æ¥ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œå¹¶æ²¡æœ‰ä»€ä¹ˆå¤æ‚åº¦ï¼Œä¸»è¦åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼›</p>
<ol>
<li>åˆå§‹åŒ–ä¸€ç»„å­—ç¬¦ä¸²é›†åˆï¼Œè¿™é‡Œåˆå§‹åŒ–äº† 7 ä¸ªã€‚</li>
<li>å®šä¹‰ä¸€ä¸ªæ•°ç»„ç”¨äºå­˜æ”¾å­—ç¬¦ä¸²ï¼Œæ³¨æ„è¿™é‡Œçš„é•¿åº¦æ˜¯ 8ï¼Œä¹Ÿå°±æ˜¯ 2 çš„ 3 æ¬¡å¹‚ã€‚è¿™æ ·çš„æ•°ç»„é•¿åº¦æ‰ä¼šå‡ºç°ä¸€ä¸ª  <code>0111</code>  é™¤é«˜ä½ä»¥å¤–éƒ½æ˜¯ 1 çš„ç‰¹å¾ï¼Œä¹Ÿæ˜¯ä¸ºäº†æ•£åˆ—ã€‚</li>
<li>æ¥ä¸‹æ¥å°±æ˜¯å¾ªç¯å­˜æ”¾æ•°æ®ï¼Œè®¡ç®—å‡ºæ¯ä¸ªå­—ç¬¦ä¸²åœ¨æ•°ç»„ä¸­çš„ä½ç½®ã€‚ <code>key.hashCode() &amp; (tab.length - 1)</code> ã€‚</li>
<li>åœ¨å­—ç¬¦ä¸²å­˜æ”¾åˆ°æ•°ç»„çš„è¿‡ç¨‹ï¼Œå¦‚æœé‡åˆ°ç›¸åŒçš„å…ƒç´ ï¼Œè¿›è¡Œè¿æ¥æ“ä½œ <code>æ¨¡æ‹Ÿé“¾è¡¨çš„è¿‡ç¨‹</code> ã€‚</li>
<li>æœ€åè¾“å‡ºå­˜æ”¾ç»“æœã€‚</li>
</ol>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">keyå€¼=jlkk Idx=<span class="number">2</span></span><br><span class="line">keyå€¼=lopi Idx=<span class="number">4</span></span><br><span class="line">keyå€¼=å°å‚…å“¥ Idx=<span class="number">7</span></span><br><span class="line">keyå€¼=e4we Idx=<span class="number">5</span></span><br><span class="line">keyå€¼=alpo Idx=<span class="number">2</span></span><br><span class="line">keyå€¼=yhjk Idx=<span class="number">0</span></span><br><span class="line">keyå€¼=plop Idx=<span class="number">5</span></span><br><span class="line">æµ‹è¯•ç»“æœï¼š[<span class="string">&quot;yhjk&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;jlkk-&gt;alpo&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;lopi&quot;</span>,<span class="string">&quot;e4we-&gt;plop&quot;</span>,<span class="literal">null</span>,<span class="string">&quot;å°å‚…å“¥&quot;</span>]</span><br></pre></td></tr></table></figure>
<ul>
<li>åœ¨æµ‹è¯•ç»“æœé¦–å…ˆæ˜¯è®¡ç®—å‡ºæ¯ä¸ªå…ƒç´ åœ¨æ•°ç»„çš„ Idxï¼Œä¹Ÿæœ‰å‡ºç°é‡å¤çš„ä½ç½®ã€‚</li>
<li>æœ€åæ˜¯æµ‹è¯•ç»“æœçš„è¾“å‡ºï¼Œ1ã€3ã€6ï¼Œä½ç½®æ˜¯ç©ºçš„ï¼Œ2ã€5ï¼Œä½ç½®æœ‰ä¸¤ä¸ªå…ƒç´ è¢«é“¾æ¥èµ·æ¥ <code>e4we-&gt;plop</code> ã€‚</li>
<li>è¿™å°±è¾¾åˆ°äº†æˆ‘ä»¬ä¸€ä¸ªæœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå°†ä¸²å…ƒç´ æ•£åˆ—å­˜æ”¾åˆ°æ•°ç»„ä¸­ï¼Œæœ€åé€šè¿‡å­—ç¬¦ä¸²å…ƒç´ çš„ç´¢å¼• ID è¿›è¡Œè·å–å¯¹åº”å­—ç¬¦ä¸²ã€‚è¿™æ ·æ˜¯ HashMap çš„ä¸€ä¸ªæœ€åŸºæœ¬åŸç†ï¼Œæœ‰äº†è¿™ä¸ªåŸºç¡€åé¢å°±ä¼šæ›´å®¹æ˜“ç†è§£ HashMap çš„æºç å®ç°ã€‚</li>
</ul>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-2-hashæ•£åˆ—ç¤ºæ„å›¾12-hashæ•£åˆ—ç¤ºæ„å›¾"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-2-hashæ•£åˆ—ç¤ºæ„å›¾12-hashæ•£åˆ—ç¤ºæ„å›¾">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_1-2-hash æ•£åˆ—ç¤ºæ„å›¾) 1.2 Hash æ•£åˆ—ç¤ºæ„å›¾</h4>
<p>å¦‚æœä¸Šé¢çš„æµ‹è¯•ç»“æœä¸èƒ½åœ¨ä½ çš„å¤´è„‘ä¸­å¾ˆå¥½çš„å»ºç«‹å‡ºä¸€ä¸ªæ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆå¯ä»¥çœ‹ä»¥ä¸‹è¿™å¼ æ•£åˆ—ç¤ºæ„å›¾ï¼Œæ–¹ä¾¿ç†è§£ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-01.png" alt="bugstack.cn Hashæ•£åˆ—ç¤ºæ„å›¾"></p>
<ul>
<li>è¿™å¼ å›¾å°±æ˜¯ä¸Šé¢ä»£ç å®ç°çš„å…¨è¿‡ç¨‹ï¼Œå°†æ¯ä¸€ä¸ªå­—ç¬¦ä¸²å…ƒç´ é€šè¿‡ Hash è®¡ç®—ç´¢å¼•ä½ç½®ï¼Œå­˜æ”¾åˆ°æ•°ç»„ä¸­ã€‚</li>
<li>é»„è‰²çš„ç´¢å¼• ID æ˜¯æ²¡æœ‰å…ƒç´ å­˜æ”¾ã€ç»¿è‰²çš„ç´¢å¼• ID å­˜æ”¾äº†ä¸€ä¸ªå…ƒç´ ã€çº¢è‰²çš„ç´¢å¼• ID å­˜æ”¾äº†ä¸¤ä¸ªå…ƒç´ ã€‚</li>
</ul>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-3-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜13-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_1-3-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜13-è¿™ä¸ªç®€å•çš„hashmapæœ‰å“ªäº›é—®é¢˜">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_1-3 - è¿™ä¸ªç®€å•çš„ hashmap æœ‰å“ªäº›é—®é¢˜) 1.3 è¿™ä¸ªç®€å•çš„ HashMap æœ‰å“ªäº›é—®é¢˜</h4>
<p>ä»¥ä¸Šæˆ‘ä»¬å®ç°äº†ä¸€ä¸ªç®€å•çš„ HashMapï¼Œæˆ–è€…è¯´è¿˜ç®—ä¸ä¸Š HashMapï¼Œåªèƒ½ç®—åšä¸€ä¸ªæ•£åˆ—æ•°æ®å­˜æ”¾çš„é›å½¢ã€‚ä½†è¿™æ ·çš„ä¸€ä¸ªæ•°æ®ç»“æ„æ”¾åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä¼šæœ‰å“ªäº›é—®é¢˜å‘¢ï¼Ÿ</p>
<ol>
<li>è¿™é‡Œæ‰€æœ‰çš„å…ƒç´ å­˜æ”¾éƒ½éœ€è¦è·å–ä¸€ä¸ªç´¢å¼•ä½ç½®ï¼Œè€Œå¦‚æœå…ƒç´ çš„ä½ç½®ä¸å¤Ÿæ•£åˆ—ç¢°æ’ä¸¥é‡ï¼Œé‚£ä¹ˆå°±å¤±å»äº†æ•£åˆ—è¡¨å­˜æ”¾çš„æ„ä¹‰ï¼Œæ²¡æœ‰è¾¾åˆ°é¢„æœŸçš„æ€§èƒ½ã€‚</li>
<li>åœ¨è·å–ç´¢å¼• ID çš„è®¡ç®—å…¬å¼ä¸­ï¼Œéœ€è¦æ•°ç»„é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Œé‚£ä¹ˆæ€ä¹ˆè¿›è¡Œåˆå§‹åŒ–è¿™ä¸ªæ•°ç»„å¤§å°ã€‚</li>
<li>æ•°ç»„è¶Šå°ç¢°æ’çš„è¶Šå¤§ï¼Œæ•°ç»„è¶Šå¤§ç¢°æ’çš„è¶Šå°ï¼Œæ—¶é—´ä¸ç©ºé—´å¦‚ä½•å–èˆã€‚</li>
<li>ç›®å‰å­˜æ”¾ 7 ä¸ªå…ƒç´ ï¼Œå·²ç»æœ‰ä¸¤ä¸ªä½ç½®éƒ½å­˜æ”¾äº† 2 ä¸ªå­—ç¬¦ä¸²ï¼Œé‚£ä¹ˆé“¾è¡¨è¶Šæ¥è¶Šé•¿æ€ä¹ˆä¼˜åŒ–ã€‚</li>
<li>éšç€å…ƒç´ çš„ä¸æ–­æ·»åŠ ï¼Œæ•°ç»„é•¿åº¦ä¸è¶³æ‰©å®¹æ—¶ï¼Œæ€ä¹ˆæŠŠåŸæœ‰çš„å…ƒç´ ï¼Œæ‹†åˆ†åˆ°æ–°çš„ä½ç½®ä¸Šå»ã€‚</li>
</ol>
<p>ä»¥ä¸Šè¿™äº›é—®é¢˜å¯ä»¥å½’çº³ä¸ºï¼› <code>æ‰°åŠ¨å‡½æ•°</code> ã€ <code>åˆå§‹åŒ–å®¹é‡</code> ã€ <code>è´Ÿè½½å› å­</code> ã€ <code>æ‰©å®¹æ–¹æ³•</code> ä»¥åŠ <code>é“¾è¡¨å’Œçº¢é»‘æ ‘</code> è½¬æ¢çš„ä½¿ç”¨ç­‰ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬ä¼šé€ä¸ªé—®é¢˜è¿›è¡Œåˆ†æã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-æ‰°åŠ¨å‡½æ•°2-æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-æ‰°åŠ¨å‡½æ•°2-æ‰°åŠ¨å‡½æ•°">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2 - æ‰°åŠ¨å‡½æ•°) 2. æ‰°åŠ¨å‡½æ•°</h3>
<p>åœ¨ HashMap å­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯ <code>java 8</code>  çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ï¼Œç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span> &#123;</span><br><span class="line">    <span class="type">int</span> h;</span><br><span class="line">    <span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-1-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°21-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-1-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°21-ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2-1 - ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°) 2.1 ä¸ºä»€ä¹ˆä½¿ç”¨æ‰°åŠ¨å‡½æ•°</h4>
<p>ç†è®ºä¸Šæ¥è¯´å­—ç¬¦ä¸²çš„ <code>hashCode</code>  æ˜¯ä¸€ä¸ª int ç±»å‹å€¼ï¼Œé‚£å¯ä»¥ç›´æ¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡äº†ï¼Œä¸”ä¸ä¼šå‡ºç°ç¢°æ’ã€‚ä½†æ˜¯è¿™ä¸ª <code>hashCode</code>  çš„å–å€¼èŒƒå›´æ˜¯ [-2147483648, 2147483647]ï¼Œæœ‰å°†è¿‘ 40 äº¿çš„é•¿åº¦ï¼Œè°ä¹Ÿä¸èƒ½æŠŠæ•°ç»„åˆå§‹åŒ–çš„è¿™ä¹ˆå¤§ï¼Œå†…å­˜ä¹Ÿæ˜¯æ”¾ä¸ä¸‹çš„ã€‚</p>
<p>æˆ‘ä»¬é»˜è®¤åˆå§‹åŒ–çš„ Map å¤§å°æ˜¯ 16 ä¸ªé•¿åº¦  <code>DEFAULT_INITIAL_CAPACITY = 1 &lt;&lt; 4</code> ï¼Œæ‰€ä»¥è·å–çš„ Hash å€¼å¹¶ä¸èƒ½ç›´æ¥ä½œä¸ºä¸‹æ ‡ä½¿ç”¨ï¼Œéœ€è¦ä¸æ•°ç»„é•¿åº¦è¿›è¡Œå–æ¨¡è¿ç®—å¾—åˆ°ä¸€ä¸ªä¸‹æ ‡å€¼ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬ä¸Šé¢åšçš„æ•£åˆ—åˆ—å­ã€‚</p>
<p>é‚£ä¹ˆï¼ŒhashMap æºç è¿™é‡Œä¸åªæ˜¯ç›´æ¥è·å–å“ˆå¸Œå€¼ï¼Œè¿˜è¿›è¡Œäº†ä¸€æ¬¡æ‰°åŠ¨è®¡ç®—ï¼Œ <code>(h = key.hashCode()) ^ (h &gt;&gt;&gt; 16)</code> ã€‚æŠŠå“ˆå¸Œå€¼å³ç§» 16 ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜¯è‡ªå·±é•¿åº¦çš„ä¸€åŠï¼Œä¹‹åä¸åŸå“ˆå¸Œå€¼åšå¼‚æˆ–è¿ç®—ï¼Œè¿™æ ·å°±æ··åˆäº†åŸå“ˆå¸Œå€¼ä¸­çš„é«˜ä½å’Œä½ä½ï¼Œå¢å¤§äº†<strong>éšæœºæ€§</strong>ã€‚è®¡ç®—æ–¹å¼å¦‚ä¸‹å›¾ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-02.png" alt="bugstack.cn æ‰°åŠ¨å‡½æ•°"></p>
<ul>
<li>è¯´ç™½äº†ï¼Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°å°±æ˜¯ä¸ºäº†å¢åŠ éšæœºæ€§ï¼Œè®©æ•°æ®å…ƒç´ æ›´åŠ å‡è¡¡çš„æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’ã€‚</li>
</ul>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°22-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°22-å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2-2 - å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°) 2.2 å®éªŒéªŒè¯æ‰°åŠ¨å‡½æ•°</h4>
<p>ä»ä¸Šé¢çš„åˆ†æå¯ä»¥çœ‹å‡ºï¼Œæ‰°åŠ¨å‡½æ•°ä½¿ç”¨äº†å“ˆå¸Œå€¼çš„é«˜åŠåŒºå’Œä½åŠåŒºåšå¼‚æˆ–ï¼Œæ··åˆåŸå§‹å“ˆå¸Œç çš„é«˜ä½å’Œä½ä½ï¼Œä»¥æ­¤æ¥åŠ å¤§ä½ä½åŒºçš„éšæœºæ€§ã€‚</p>
<p>ä½†çœ‹ä¸åˆ°å®éªŒæ•°æ®çš„è¯ï¼Œè¿™ç»ˆç©¶æ˜¯ä¸€æ®µç†è®ºï¼Œå…·ä½“è¿™æ®µå“ˆå¸Œå€¼çœŸçš„è¢«å¢åŠ äº†éšæœºæ€§æ²¡æœ‰ï¼Œå¹¶ä¸çŸ¥é“ã€‚æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬è¦åšä¸€ä¸ªå®éªŒï¼Œè¿™ä¸ªå®éªŒæ˜¯è¿™æ ·åšï¼›</p>
<ol>
<li>é€‰å– 10 ä¸‡ä¸ªå•è¯è¯åº“</li>
<li>å®šä¹‰ 128 ä½é•¿åº¦çš„æ•°ç»„æ ¼å­</li>
<li>åˆ†åˆ«è®¡ç®—åœ¨æ‰°åŠ¨å’Œä¸æ‰°åŠ¨ä¸‹ï¼Œ10 ä¸‡å•è¯çš„ä¸‹æ ‡åˆ†é…åˆ° 128 ä¸ªæ ¼å­çš„æ•°é‡</li>
<li>ç»Ÿè®¡å„ä¸ªæ ¼å­æ•°é‡ï¼Œç”Ÿæˆæ³¢åŠ¨æ›²çº¿ã€‚å¦‚æœæ‰°åŠ¨å‡½æ•°ä¸‹çš„æ³¢åŠ¨æ›²çº¿ç›¸å¯¹æ›´å¹³ç¨³ï¼Œé‚£ä¹ˆè¯æ˜æ‰°åŠ¨å‡½æ•°æœ‰æ•ˆæœã€‚</li>
</ol>
<h5 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-1-æ‰°åŠ¨ä»£ç æµ‹è¯•221-æ‰°åŠ¨ä»£ç æµ‹è¯•"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-1-æ‰°åŠ¨ä»£ç æµ‹è¯•221-æ‰°åŠ¨ä»£ç æµ‹è¯•">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2-2-1 - æ‰°åŠ¨ä»£ç æµ‹è¯•) 2.2.1 æ‰°åŠ¨ä»£ç æµ‹è¯•</h5>
<p><strong>æ‰°åŠ¨å‡½æ•°å¯¹æ¯”æ–¹æ³•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Disturb</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">disturbHashIdx</span><span class="params">(String key, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (size - <span class="number">1</span>) &amp; (key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> <span class="title function_">hashIdx</span><span class="params">(String key, <span class="type">int</span> size)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> (size - <span class="number">1</span>) &amp; key.hashCode();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><code>disturbHashIdx</code>  æ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—</li>
<li><code>hashIdx</code>  éæ‰°åŠ¨å‡½æ•°ä¸‹ï¼Œä¸‹æ ‡å€¼è®¡ç®—</li>
</ul>
<p><strong>å•å…ƒæµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 10ä¸‡å•è¯å·²ç»åˆå§‹åŒ–åˆ°wordsä¸­</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_disturb</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;(<span class="number">16</span>);</span><br><span class="line">    <span class="keyword">for</span> (String word : words) &#123;</span><br><span class="line">        <span class="comment">// ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> Disturb.disturbHashIdx(word, <span class="number">128</span>);</span><br><span class="line">        <span class="comment">// ä¸ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</span></span><br><span class="line">        <span class="comment">// int idx = Disturb.hashIdx(word, 128);</span></span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(idx)) &#123;</span><br><span class="line">            <span class="type">Integer</span> <span class="variable">integer</span> <span class="operator">=</span> map.get(idx);</span><br><span class="line">            map.put(idx, ++integer);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(idx, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    System.out.println(map.values());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šåˆ†åˆ«ç»Ÿè®¡ä¸¤ç§å‡½æ•°ä¸‹çš„ä¸‹æ ‡å€¼åˆ†é…ï¼Œæœ€ç»ˆå°†ç»Ÿè®¡ç»“æœæ”¾åˆ° excel ä¸­ç”Ÿæˆå›¾è¡¨ã€‚</p>
<h5 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-2-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨222-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_2-2-2-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨222-æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_2-2-2 - æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨) 2.2.2 æ‰°åŠ¨å‡½æ•°æ•£åˆ—å›¾è¡¨</h5>
<p>ä»¥ä¸Šçš„ä¸¤å¼ å›¾ï¼Œåˆ†åˆ«æ˜¯æ²¡æœ‰ä½¿ç”¨æ‰°åŠ¨å‡½æ•°å’Œä½¿ç”¨æ‰°åŠ¨å‡½æ•°çš„ï¼Œä¸‹æ ‡åˆ†é…ã€‚å®éªŒæ•°æ®ï¼›</p>
<ol>
<li>10 ä¸‡ä¸ªä¸é‡å¤çš„å•è¯</li>
<li>128 ä¸ªæ ¼å­ï¼Œç›¸å½“äº 128 é•¿åº¦çš„æ•°ç»„</li>
</ol>
<p><strong>æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-03.png" alt="bugstack.cn æœªä½¿ç”¨æ‰°åŠ¨å‡½æ•°"></p>
<p><strong>ä½¿ç”¨æ‰°åŠ¨å‡½æ•°</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-04.png" alt="bugstack.cn ä½¿ç”¨æ‰°åŠ¨å‡½æ•°"></p>
<ul>
<li>ä»è¿™ä¸¤ç§çš„å¯¹æ¯”å›¾å¯ä»¥çœ‹å‡ºæ¥ï¼Œåœ¨ä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°åï¼Œæ•°æ®åˆ†é…çš„æ›´åŠ å‡åŒ€äº†ã€‚</li>
<li>æ•°æ®åˆ†é…å‡åŒ€ï¼Œä¹Ÿå°±æ˜¯æ•£åˆ—çš„æ•ˆæœæ›´å¥½ï¼Œå‡å°‘äº† hash çš„ç¢°æ’ï¼Œè®©æ•°æ®å­˜æ”¾å’Œè·å–çš„æ•ˆç‡æ›´ä½³ã€‚</li>
</ul>
<h3 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­3-åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_3 - åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­) 3. åˆå§‹åŒ–å®¹é‡å’Œè´Ÿè½½å› å­</h3>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬è®¨è®ºä¸‹ä¸€ä¸ªé—®é¢˜ï¼Œä»æˆ‘ä»¬æ¨¡ä»¿ HashMap çš„ä¾‹å­ä¸­ä»¥åŠ HashMap é»˜è®¤çš„åˆå§‹åŒ–å¤§å°é‡Œï¼Œéƒ½å¯ä»¥çŸ¥é“ï¼Œæ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª 2 çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰ 2 çš„å¹‚æ¬¡æ–¹åœ¨å‡ 1 çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç° <code>01111</code>  è¿™æ ·çš„å€¼ã€‚</p>
<p>é‚£ä¹ˆè¿™é‡Œå°±æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åœ¨åˆå§‹åŒ– HashMap çš„æ—¶å€™ï¼Œå¦‚æœä¼ ä¸€ä¸ª 17 ä¸ªçš„å€¼ <code>new HashMap&lt;&gt;(17);</code> ï¼Œå®ƒä¼šæ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ</p>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-1-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼31-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-1-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼31-å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_3-1 - å¯»æ‰¾ 2 çš„å¹‚æ¬¡æ–¹æœ€å°å€¼) 3.1 å¯»æ‰¾ 2 çš„å¹‚æ¬¡æ–¹æœ€å°å€¼</h4>
<p>åœ¨ HashMap çš„åˆå§‹åŒ–ä¸­ï¼Œæœ‰è¿™æ ·ä¸€æ®µæ–¹æ³•ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">HashMap</span><span class="params">(<span class="type">int</span> initialCapacity, <span class="type">float</span> loadFactor)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="built_in">this</span>.loadFactor = loadFactor;</span><br><span class="line">    <span class="built_in">this</span>.threshold = tableSizeFor(initialCapacity);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é˜ˆå€¼ <code>threshold</code> ï¼Œé€šè¿‡æ–¹æ³• <code>tableSizeFor</code>  è¿›è¡Œè®¡ç®—ï¼Œæ˜¯æ ¹æ®åˆå§‹åŒ–æ¥è®¡ç®—çš„ã€‚</li>
<li>è¿™ä¸ªæ–¹æ³•ä¹Ÿå°±æ˜¯è¦å¯»æ‰¾æ¯”åˆå§‹å€¼å¤§çš„ï¼Œæœ€å°çš„é‚£ä¸ª 2 è¿›åˆ¶æ•°å€¼ã€‚æ¯”å¦‚ä¼ äº† 17ï¼Œæˆ‘åº”è¯¥æ‰¾åˆ°çš„æ˜¯ 32ï¼ˆ2 çš„ 4 æ¬¡å¹‚æ˜¯ 16&lt;17, æ‰€ä»¥æ‰¾åˆ° 2 çš„ 5 æ¬¡å¹‚ 32ï¼‰ã€‚</li>
</ul>
<p>è®¡ç®—é˜ˆå€¼å¤§å°çš„æ–¹æ³•ï¼›</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>MAXIMUM_CAPACITY = 1 &lt;&lt; 30ï¼Œè¿™ä¸ªæ˜¯ä¸´ç•ŒèŒƒå›´ï¼Œä¹Ÿå°±æ˜¯æœ€å¤§çš„ Map é›†åˆã€‚</li>
<li>ä¹ä¸€çœ‹å¯èƒ½æœ‰ç‚¹æ™•ğŸ˜µæ€ä¹ˆéƒ½åœ¨å‘å³ç§»ä½ 1ã€2ã€4ã€8ã€16ï¼Œè¿™ä¸»è¦æ˜¯ä¸ºäº†æŠŠäºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½å¡«ä¸Š 1ï¼Œå½“äºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½æ˜¯ 1 ä»¥åï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ 2 çš„å¹‚æ¬¡æ–¹å‡ 1 äº†ï¼Œæœ€åæŠŠç»“æœåŠ  1 å†è¿”å›å³å¯ã€‚</li>
</ul>
<p>é‚£è¿™é‡Œæˆ‘ä»¬æŠŠ 17 è¿™æ ·ä¸€ä¸ªåˆå§‹åŒ–è®¡ç®—é˜ˆå€¼çš„è¿‡ç¨‹ï¼Œç”¨å›¾å±•ç¤ºå‡ºæ¥ï¼Œæ–¹ä¾¿ç†è§£ï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-05.png" alt="bugstack.cn è®¡ç®—é˜ˆå€¼"></p>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-2-è´Ÿè½½å› å­32-è´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_3-2-è´Ÿè½½å› å­32-è´Ÿè½½å› å­">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_3-2 - è´Ÿè½½å› å­) 3.2 è´Ÿè½½å› å­</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">float</span> <span class="variable">DEFAULT_LOAD_FACTOR</span> <span class="operator">=</span> <span class="number">0.75f</span>;  </span><br></pre></td></tr></table></figure>
<p><strong>è´Ÿè½½å› å­æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ</strong></p>
<p>è´Ÿè½½å› å­ï¼Œå¯ä»¥ç†è§£æˆä¸€è¾†è½¦å¯æ‰¿é‡é‡é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼ŒæŠŠè´§æ”¾åˆ°æ–°çš„è½¦ä¸Šã€‚</p>
<p>é‚£ä¹ˆåœ¨ HashMap ä¸­ï¼Œè´Ÿè½½å› å­å†³å®šäº†æ•°æ®é‡å¤šå°‘äº†ä»¥åè¿›è¡Œæ‰©å®¹ã€‚<em>è¿™é‡Œè¦æåˆ°ä¸Šé¢åšçš„ HashMap ä¾‹å­ï¼Œæˆ‘ä»¬å‡†å¤‡äº† 7 ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æœ€åè¿˜æœ‰ 3 ä¸ªä½ç½®ç©ºä½™ï¼Œ2 ä¸ªä½ç½®å­˜æ”¾äº† 2 ä¸ªå…ƒç´ ã€‚</em> æ‰€ä»¥å¯èƒ½å³ä½¿ä½ æ•°æ®æ¯”æ•°ç»„å®¹é‡å¤§æ—¶ä¹Ÿæ˜¯ä¸ä¸€å®šèƒ½æ­£æ­£å¥½å¥½çš„æŠŠæ•°ç»„å æ»¡çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›å°æ ‡ä½ç½®å‡ºç°äº†å¤§é‡çš„ç¢°æ’ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”¨é“¾è¡¨å­˜æ”¾ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¤±å»äº† Map æ•°ç»„çš„æ€§èƒ½ã€‚</p>
<p>æ‰€ä»¥ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆç†çš„å¤§å°ä¸‹è¿›è¡Œæ‰©å®¹ï¼Œé»˜è®¤å€¼ 0.75 å°±æ˜¯è¯´å½“é˜ˆå€¼å®¹é‡å äº† 3/4 æ—¶èµ¶ç´§æ‰©å®¹ï¼Œå‡å°‘ Hash ç¢°æ’ã€‚</p>
<p>åŒæ—¶ 0.75 æ˜¯ä¸€ä¸ªé»˜è®¤æ„é€ å€¼ï¼Œåœ¨åˆ›å»º HashMap ä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨æ›´å¤šçš„ç©ºé—´æ¢å–æ—¶é—´ï¼Œå¯ä»¥æŠŠè´Ÿè½½å› å­è°ƒçš„æ›´å°ä¸€äº›ï¼Œå‡å°‘ç¢°æ’ã€‚</p>
<h3 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-æ‰©å®¹å…ƒç´ æ‹†åˆ†4-æ‰©å®¹å…ƒç´ æ‹†åˆ†"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-æ‰©å®¹å…ƒç´ æ‹†åˆ†4-æ‰©å®¹å…ƒç´ æ‹†åˆ†">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_4 - æ‰©å®¹å…ƒç´ æ‹†åˆ†) 4. æ‰©å®¹å…ƒç´ æ‹†åˆ†</h3>
<p>ä¸ºä»€ä¹ˆæ‰©å®¹ï¼Œå› ä¸ºæ•°ç»„é•¿åº¦ä¸è¶³äº†ã€‚é‚£æ‰©å®¹æœ€ç›´æ¥çš„é—®é¢˜ï¼Œå°±æ˜¯éœ€è¦æŠŠå…ƒç´ æ‹†åˆ†åˆ°æ–°çš„æ•°ç»„ä¸­ã€‚æ‹†åˆ†å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼ŒåŸ jdk1.7 ä¸­ä¼šéœ€è¦é‡æ–°è®¡ç®—å“ˆå¸Œå€¼ï¼Œä½†æ˜¯åˆ° jdk1.8 ä¸­å·²ç»è¿›è¡Œä¼˜åŒ–ï¼Œä¸å†éœ€è¦é‡æ–°è®¡ç®—ï¼Œæå‡äº†æ‹†åˆ†çš„æ€§èƒ½ï¼Œè®¾è®¡çš„è¿˜æ˜¯éå¸¸å·§å¦™çš„ã€‚</p>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-1-æµ‹è¯•æ•°æ®41-æµ‹è¯•æ•°æ®"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-1-æµ‹è¯•æ•°æ®41-æµ‹è¯•æ•°æ®">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_4-1 - æµ‹è¯•æ•°æ®) 4.1 æµ‹è¯•æ•°æ®</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap</span><span class="params">()</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    list.add(<span class="string">&quot;jlkk&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;lopi&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;jmdw&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;e4we&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;io98&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;nmhg&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;vfg6&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;gfrt&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;alpo&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;vfbh&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;bnhj&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;zuio&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;iu8e&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;yhjk&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;plop&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;dd0p&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (String key : list) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">hash</span> <span class="operator">=</span> key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;å­—ç¬¦ä¸²ï¼š&quot;</span> + key + <span class="string">&quot; \tIdx(16)ï¼š&quot;</span> + ((<span class="number">16</span> - <span class="number">1</span>) &amp; hash) + <span class="string">&quot; \tBitå€¼ï¼š&quot;</span> + Integer.toBinaryString(hash) + <span class="string">&quot; - &quot;</span> + Integer.toBinaryString(hash &amp; <span class="number">16</span>) + <span class="string">&quot; \t\tIdx(32)ï¼š&quot;</span> + ((</span><br><span class="line">        System.out.println(Integer.toBinaryString(key.hashCode()) +<span class="string">&quot; &quot;</span>+ Integer.toBinaryString(hash) + <span class="string">&quot; &quot;</span> + Integer.toBinaryString((<span class="number">32</span> - <span class="number">1</span>) &amp; hash));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">å­—ç¬¦ä¸²ï¼šjlkk 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">3</span> 	Bitå€¼ï¼š<span class="number">1100011101001000010011</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">19</span></span><br><span class="line"><span class="number">1100011101001000100010</span> <span class="number">1100011101001000010011</span> <span class="number">10011</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šlopi 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">14</span> 	Bitå€¼ï¼š<span class="number">1100101100011010001110</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">14</span></span><br><span class="line"><span class="number">1100101100011010111100</span> <span class="number">1100101100011010001110</span> <span class="number">1110</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šjmdw 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">7</span> 	Bitå€¼ï¼š<span class="number">1100011101010100100111</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">7</span></span><br><span class="line"><span class="number">1100011101010100010110</span> <span class="number">1100011101010100100111</span> <span class="number">111</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼še4we 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">3</span> 	Bitå€¼ï¼š<span class="number">1011101011101101010011</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">19</span></span><br><span class="line"><span class="number">1011101011101101111101</span> <span class="number">1011101011101101010011</span> <span class="number">10011</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šio98 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">4</span> 	Bitå€¼ï¼š<span class="number">1100010110001011110100</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">20</span></span><br><span class="line"><span class="number">1100010110001011000101</span> <span class="number">1100010110001011110100</span> <span class="number">10100</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šnmhg 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">13</span> 	Bitå€¼ï¼š<span class="number">1100111010011011001101</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">13</span></span><br><span class="line"><span class="number">1100111010011011111110</span> <span class="number">1100111010011011001101</span> <span class="number">1101</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼švfg6 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1101110010111101101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1101110010111101011111</span> <span class="number">1101110010111101101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šgfrt 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">1</span> 	Bitå€¼ï¼š<span class="number">1100000101111101010001</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">17</span></span><br><span class="line"><span class="number">1100000101111101100001</span> <span class="number">1100000101111101010001</span> <span class="number">10001</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šalpo 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">7</span> 	Bitå€¼ï¼š<span class="number">1011011011101101000111</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">7</span></span><br><span class="line"><span class="number">1011011011101101101010</span> <span class="number">1011011011101101000111</span> <span class="number">111</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼švfbh 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">1</span> 	Bitå€¼ï¼š<span class="number">1101110010111011000001</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">1</span></span><br><span class="line"><span class="number">1101110010111011110110</span> <span class="number">1101110010111011000001</span> <span class="number">1</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šbnhj 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">0</span> 	Bitå€¼ï¼š<span class="number">1011100011011001100000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">0</span></span><br><span class="line"><span class="number">1011100011011001001110</span> <span class="number">1011100011011001100000</span> <span class="number">0</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šzuio 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1110010011100110011000</span> - <span class="number">10000</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">24</span></span><br><span class="line"><span class="number">1110010011100110100001</span> <span class="number">1110010011100110011000</span> <span class="number">11000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šiu8e 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1100010111100101101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1100010111100101011001</span> <span class="number">1100010111100101101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šyhjk 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">8</span> 	Bitå€¼ï¼š<span class="number">1110001001010010101000</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">8</span></span><br><span class="line"><span class="number">1110001001010010010000</span> <span class="number">1110001001010010101000</span> <span class="number">1000</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šplop 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">9</span> 	Bitå€¼ï¼š<span class="number">1101001000110011101001</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">9</span></span><br><span class="line"><span class="number">1101001000110011011101</span> <span class="number">1101001000110011101001</span> <span class="number">1001</span></span><br><span class="line">å­—ç¬¦ä¸²ï¼šdd0p 	<span class="title function_">Idx</span><span class="params">(<span class="number">16</span>)</span>ï¼š<span class="number">14</span> 	Bitå€¼ï¼š<span class="number">1011101111001011101110</span> - <span class="number">0</span> 		Idx(<span class="number">32</span>)ï¼š<span class="number">14</span></span><br><span class="line"><span class="number">1011101111001011000000</span> <span class="number">1011101111001011101110</span> <span class="number">1110</span></span><br></pre></td></tr></table></figure>
<ul>
<li>è¿™é‡Œæˆ‘ä»¬éšæœºä½¿ç”¨ä¸€äº›å­—ç¬¦ä¸²è®¡ç®—ä»–ä»¬åˆ†åˆ«åœ¨ 16 ä½é•¿åº¦å’Œ 32 ä½é•¿åº¦æ•°ç»„ä¸‹çš„ç´¢å¼•åˆ†é…æƒ…å†µï¼Œçœ‹å“ªäº›æ•°æ®è¢«é‡æ–°è·¯ç”±åˆ°äº†æ–°çš„åœ°å€ã€‚</li>
<li>åŒæ—¶ï¼Œè¿™é‡Œè¿˜å¯ä»¥è§‚å¯ŸğŸ•µå‡ºä¸€ä¸ªéå¸¸é‡è¦çš„ä¿¡æ¯ï¼ŒåŸå“ˆå¸Œå€¼ä¸æ‰©å®¹æ–°å¢å‡ºæ¥çš„é•¿åº¦ 16ï¼Œè¿›è¡Œ &amp; è¿ç®—ï¼Œå¦‚æœå€¼ç­‰äº 0ï¼Œåˆ™ä¸‹æ ‡ä½ç½®ä¸å˜ã€‚å¦‚æœä¸ä¸º 0ï¼Œé‚£ä¹ˆæ–°çš„ä½ç½®åˆ™æ˜¯åŸæ¥ä½ç½®ä¸ŠåŠ  16ã€‚ï½›è¿™ä¸ªåœ°æ–¹éœ€è¦å¥½å¥½ç†è§£ä¸‹ï¼Œå¹¶çœ‹å®éªŒæ•°æ®ï½</li>
<li>è¿™æ ·ä¸€æ¥ï¼Œå°±ä¸éœ€è¦åœ¨é‡æ–°è®¡ç®—æ¯ä¸€ä¸ªæ•°ç»„ä¸­å…ƒç´ çš„å“ˆå¸Œå€¼äº†ã€‚</li>
</ul>
<h4 id="httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-2-æ•°æ®è¿ç§»42-æ•°æ®è¿ç§»"><a class="markdownIt-Anchor" href="#httpsbugstackcnmdjavainterview2020-08-07-é¢ç»æ‰‹å†Œ-ç¬¬3ç¯‡hashmapæ ¸å¿ƒçŸ¥è¯†æ‰°åŠ¨å‡½æ•°-è´Ÿè½½å› å­-æ‰©å®¹é“¾è¡¨æ‹†åˆ†æ·±åº¦å­¦ä¹ html_4-2-æ•°æ®è¿ç§»42-æ•°æ®è¿ç§»">#</a> [#](<a target="_blank" rel="noopener" href="https://bugstack.cn/md/java/interview/2020-08-07-%E9%9D%A2%E7%BB%8F%E6%89%8B%E5%86%8C">https://bugstack.cn/md/java/interview/2020-08-07 - é¢ç»æ‰‹å†Œ</a>ãƒ»ç¬¬ 3 ç¯‡ã€ŠHashMap æ ¸å¿ƒçŸ¥è¯†ï¼Œæ‰°åŠ¨å‡½æ•°ã€è´Ÿè½½å› å­ã€æ‰©å®¹é“¾è¡¨æ‹†åˆ†ï¼Œæ·±åº¦å­¦ä¹ ã€‹.html#_4-2 - æ•°æ®è¿ç§») 4.2 æ•°æ®è¿ç§»</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/interview-4-06.png" alt="bugstack.cn æ•°æ®è¿ç§»"></p>
<ul>
<li>è¿™å¼ å›¾å°±æ˜¯åŸ 16 ä½é•¿åº¦æ•°ç»„å…ƒç´ ï¼Œå‘ 32 ä½æ‰©å®¹åæ•°ç»„è½¬ç§»çš„è¿‡ç¨‹ã€‚</li>
<li>å¯¹ 31 å–æ¨¡ä¿ç•™ä½ 5 ä½ï¼Œå¯¹ 15 å–æ¨¡ä¿ç•™ä½ 4 ä½ï¼Œä¸¤è€…çš„å·®å¼‚å°±åœ¨äºç¬¬ 5 ä½æ˜¯å¦ä¸º 1ï¼Œæ˜¯çš„è¯åˆ™éœ€è¦åŠ ä¸Šå¢é‡ï¼Œä¸º 0 çš„è¯åˆ™ä¸éœ€è¦æ”¹å˜</li>
<li>å…¶ä¸­é»„è‰²åŒºåŸŸå…ƒç´  <code>zuio</code>  å› è®¡ç®—ç»“æœ  <code>hash &amp; oldCap</code>  ä½ä½ç¬¬ 5 ä½ä¸º 1ï¼Œåˆ™è¢«è¿ç§»åˆ°ä¸‹æ ‡ä½ç½® 24ã€‚</li>
<li>åŒæ—¶è¿˜æ˜¯ç”¨é‡æ–°è®¡ç®—å“ˆå¸Œå€¼çš„æ–¹å¼éªŒè¯äº†ï¼Œç¡®å®åˆ†é…åˆ° 24 çš„ä½ç½®ï¼Œå› ä¸ºè¿™æ˜¯åœ¨äºŒè¿›åˆ¶è®¡ç®—ä¸­è¡¥ 1 çš„è¿‡ç¨‹ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ä¸Šé¢ç®€åŒ–çš„æ–¹å¼ç¡®å®šå“ˆå¸Œå€¼çš„ä½ç½®ã€‚</li>
</ul>
<p>é‚£ä¹ˆä¸ºä»€ä¹ˆ e.hash &amp; oldCap == 0 ä¸ºä»€ä¹ˆå¯ä»¥åˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦éœ€è¦ç§»ä½ï¼Œè€Œä¸æ˜¯å†æ¬¡è®¡ç®— hash;</p>
<p>ä»ç„¶æ˜¯åŸå§‹é•¿åº¦ä¸º 16 ä¸¾ä¾‹:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">old:</span><br><span class="line"><span class="number">10</span>: <span class="number">0000</span> <span class="number">1010</span></span><br><span class="line"><span class="number">15</span>: <span class="number">0000</span> <span class="number">1111</span></span><br><span class="line">&amp;: <span class="number">0000</span> <span class="number">1010</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span>:</span><br><span class="line"><span class="number">10</span>: <span class="number">0000</span> <span class="number">1010</span></span><br><span class="line"><span class="number">31</span>: <span class="number">0001</span> <span class="number">1111</span></span><br><span class="line">&amp;: <span class="number">0000</span> <span class="number">1010</span> </span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢çš„ç¤ºä¾‹å¯ä»¥å¾ˆè½»æ˜“çš„çœ‹å‡ºï¼Œä¸¤æ¬¡ indexFor () çš„å·®åˆ«åªæ˜¯ç¬¬äºŒæ¬¡å‚ä¸ä½äºæ¯”ç¬¬ä¸€æ¬¡å·¦è¾¹æœ‰ä¸€ä½ä» 0 å˜ä¸º 1, è€Œè¿™ä¸ªå˜åŒ–çš„ 1 åˆšå¥½æ˜¯ oldCap, é‚£ä¹ˆåªéœ€è¦åˆ¤æ–­åŸ key çš„ hash è¿™ä¸ªä½ä¸Šæ˜¯å¦ä¸º 1: è‹¥æ˜¯ 1, åˆ™éœ€è¦ç§»åŠ¨è‡³ oldCap + i çš„æ§½ä½ï¼Œè‹¥ä¸º 0, åˆ™ä¸éœ€è¦ç§»åŠ¨ï¼›</p>
<p>è¿™ä¹Ÿæ˜¯ HashMap çš„é•¿åº¦å¿…é¡»ä¿è¯æ˜¯ 2 çš„å¹‚æ¬¡æ–¹çš„åŸå› ï¼Œæ­£å› ä¸ºè¿™ç§ç¯ç¯ç›¸æ‰£çš„è®¾è®¡ï¼ŒHashMap.loadFactor çš„é€‰å€¼æ˜¯ 3/4 å°±èƒ½ç†è§£äº†ï¼Œtable.length * 3/4 å¯ä»¥è¢«ä¼˜åŒ–ä¸º ((table.length&gt;&gt; 2) &lt;&lt; 2) - (table.length &gt;&gt; 2) == table.length - (table.length &gt;&gt; 2), JAVA çš„ä½è¿ç®—æ¯”ä¹˜é™¤çš„æ•ˆç‡æ›´é«˜ï¼Œæ‰€ä»¥å– 3/4 åœ¨ä¿è¯ hash å†²çªå°çš„æƒ…å†µä¸‹å…¼é¡¾äº†æ•ˆç‡ï¼›</p>
<h1 id="é¢è¯•é¢˜æ€»ç»“"><a class="markdownIt-Anchor" href="#é¢è¯•é¢˜æ€»ç»“">#</a> é¢è¯•é¢˜æ€»ç»“</h1>
<h1 id="question"><a class="markdownIt-Anchor" href="#question">#</a> Question</h1>
<h4 id="1ä¸ºä»€ä¹ˆhashmapå“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å–-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#1ä¸ºä»€ä¹ˆhashmapå“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å–-2-çš„å¹‚æ¬¡æ–¹">#</a> 1. ä¸ºä»€ä¹ˆ HashMap å“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å– 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<h6 id="æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª2çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦å› ä¸ºåªæœ‰2çš„å¹‚æ¬¡æ–¹åœ¨å‡1çš„æ—¶å€™æ‰ä¼šå‡ºç°01111è¿™æ ·çš„å€¼"><a class="markdownIt-Anchor" href="#æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª2çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦å› ä¸ºåªæœ‰2çš„å¹‚æ¬¡æ–¹åœ¨å‡1çš„æ—¶å€™æ‰ä¼šå‡ºç°01111è¿™æ ·çš„å€¼">#</a> æ•£åˆ—æ•°ç»„éœ€è¦ä¸€ä¸ª 2 çš„å¹‚æ¬¡æ–¹çš„é•¿åº¦ï¼Œå› ä¸ºåªæœ‰ 2 çš„å¹‚æ¬¡æ–¹åœ¨å‡ 1 çš„æ—¶å€™ï¼Œæ‰ä¼šå‡ºç° 01111 è¿™æ ·çš„å€¼ã€‚</h6>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡è·å–å­˜å‚¨å†…å®¹çš„hashcodeï¼Œå¹¶ä¸”å¯¹é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹çš„æ•°ç»„é•¿åº¦-1è¿›è¡Œä¸è¿ç®—å¾—åˆ°ä¸€ä¸ªå¯ä»¥åœ¨æ•°ç»„ä¸­å‡ºç°çš„ä½ç½®</span></span><br><span class="line"><span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å“ˆå¸Œè¡¨ä¸­æ•°ç»„é•¿åº¦æ€»æ˜¯å– <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œè¿™æ˜¯å› ä¸ºå¯¹äºå¤§å¤šæ•°çš„è´¨æ•°æ¥è¯´ï¼Œå®ƒä»¬çš„äºŒè¿›åˆ¶è¡¨ç¤ºä¸­åªæœ‰å°‘æ•°ä½æ˜¯ä¸º <span class="number">1</span>ã€‚å¦‚æœä½¿ç”¨ä¸€ä¸ªä¸æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹çš„æ•°ç»„é•¿åº¦ï¼Œé‚£ä¹ˆå½“å…ƒç´ çš„å“ˆå¸Œæ˜ å°„åˆ°ç´¢å¼•æ—¶ï¼Œå°±ä¼šå‡ºç°æŸäº›ç´¢å¼•æ°¸è¿œæ— æ³•è¢«è®¿é—®åˆ°çš„æƒ…å†µï¼Œè¿™å°±æµªè´¹äº†å“ˆå¸Œè¡¨çš„ç©ºé—´ã€‚</span><br><span class="line"></span><br><span class="line">ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦åœ¨ä¸€ä¸ªå¤§å°ä¸º <span class="number">5</span> çš„æ•°ç»„ä¸­æ’å…¥ <span class="number">10</span> ä¸ªå…ƒç´  &#123;a,b,c,d,e,f,g,h,i,j&#125;ï¼Œè€Œå“ˆå¸Œå‡½æ•°å°†ä»–ä»¬ä¾æ¬¡æ˜ å°„åˆ°ä¸‹æ ‡ä½ç½®ï¼š[<span class="number">0</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>]ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œæœ‰ä¸‰ä¸ªä¸‹æ ‡ï¼ˆ<span class="number">5</span>ã€<span class="number">6</span>ã€<span class="number">7</span>ï¼‰å§‹ç»ˆæ²¡æœ‰è¢«æ˜ å°„åˆ°ï¼Œå®Œå…¨æµªè´¹äº†è¿™å‡ ä¸ªä¸‹æ ‡çš„å­˜å‚¨ç©ºé—´ã€‚ä½†å¦‚æœæ•°ç»„é•¿åº¦ä¸º <span class="number">8</span>ï¼Œé‚£ä¹ˆä¸Šè¿°å…ƒç´ çš„å“ˆå¸Œå€¼æŒ‰ç…§ä¸Šé¢çš„æ˜ å°„è§„åˆ™å¯ä»¥å¾—åˆ°çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] % <span class="number">8</span> = [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]ï¼Œä¸ä¼šå‡ºç°ä»»ä½•ä¸‹æ ‡è¢«æµªè´¹çš„æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœå°†æ•°ç»„é•¿åº¦æ”¹ä¸º <span class="number">7</span>ï¼Œé‚£ä¹ˆä¸Šè¿°å…ƒç´ çš„å“ˆå¸Œå€¼æŒ‰ç…§ä¸Šé¢çš„æ˜ å°„è§„åˆ™å¯ä»¥å¾—åˆ°çš„ä¸‹æ ‡åˆ†åˆ«æ˜¯ [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>] % <span class="number">7</span> = [<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">4</span>, <span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>]ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œç´¢å¼•ä¸º <span class="number">5</span>ã€<span class="number">6</span> çš„ç©ºé—´ä»ç„¶è¢«æµªè´¹äº†ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†é¿å…åœ¨å“ˆå¸Œè¡¨ä¸­æµªè´¹å­˜å‚¨ç©ºé—´ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šé€‰æ‹©ä½¿ç”¨ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ä½œä¸ºå“ˆå¸Œè¡¨çš„å¤§å°ã€‚è¿™æ ·ï¼Œåœ¨è®¡ç®—å…ƒç´ çš„ä½ç½®æ—¶ï¼Œåªéœ€è¦å¯¹å“ˆå¸Œç è¿›è¡Œä½è¿ç®—å³å¯ï¼Œä¸éœ€è¦è¿›è¡Œé™¤æ³•ç­‰å¤æ‚çš„è®¡ç®—ã€‚åŒæ—¶ï¼Œç”±äº <span class="number">2</span> çš„å¹‚æ¬¡æ–¹æ»¡è¶³ <span class="number">2</span>^n2*n*ï¼Œæ‰€ä»¥ç”¨ä½è¿ç®—æ¥ä»£æ›¿é™¤æ³•æˆ–å–æ¨¡æ“ä½œä¹Ÿèƒ½å¤Ÿæé«˜è¿è¡Œæ•ˆç‡ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="2hashmapæ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#2hashmapæ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯-2-çš„å¹‚æ¬¡æ–¹">#</a> 2.HashMap æ€ä¹ˆä¿è¯å“ˆå¸Œè¡¨é•¿åº¦æ˜¯ 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Java ä¸­ï¼Œå“ˆå¸Œè¡¨çš„é•¿åº¦æ€»æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ã€‚è¿™æ˜¯é€šè¿‡ HashMap ç±»ä¸­çš„ä¸€ä¸ªåä¸º `tableSizeFor(<span class="type">int</span> cap)` çš„é™æ€æ–¹æ³•æ¥å®ç°çš„ã€‚</span><br><span class="line"></span><br><span class="line">è¿™ä¸ªæ–¹æ³•ä¼šé¦–å…ˆå°†ä¼ å…¥çš„å‚æ•°å‡å» <span class="number">1</span>ï¼Œç„¶åå°†ç»“æœå³ç§»ä¸€ä½ï¼Œåœ¨è¿™ä¸ªå€¼ä¸ŠåŠ  <span class="number">1</span>ï¼Œæœ€ç»ˆå¾—åˆ°çš„ç»“æœå°±æ˜¯å¤§äºç­‰äºåŸå§‹å‚æ•°ä¸”æœ€æ¥è¿‘åŸå§‹å‚æ•°çš„ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ <span class="number">7</span>ï¼Œåˆ™æŒ‰ç…§ä¸Šè¿°ç®—æ³•å¯ä»¥å¾—åˆ° <span class="number">8</span>ï¼š(((<span class="number">7</span> - <span class="number">1</span>) &gt;&gt;&gt; <span class="number">1</span>) + <span class="number">1</span>) = ((<span class="number">0110</span>)_2 &gt;&gt;&gt; <span class="number">1</span> + <span class="number">1</span>) = (<span class="number">0011</span>)_2 + (<span class="number">0001</span>)_2 = (<span class="number">0100</span>)_2 = <span class="number">8</span>(((<span class="number">7</span>âˆ’<span class="number">1</span>)&gt;&gt;&gt;<span class="number">1</span>)+<span class="number">1</span>)=((<span class="number">0110</span>)<span class="number">2</span>&gt;&gt;&gt;<span class="number">1</span>+<span class="number">1</span>)=(<span class="number">0011</span>)<span class="number">2</span>+(<span class="number">0001</span>)<span class="number">2</span>=(<span class="number">0100</span>)<span class="number">2</span>=<span class="number">8</span>ã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œå½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å“ˆå¸Œè¡¨æ—¶ï¼Œåªéœ€è¦å°†åˆå§‹å®¹é‡è®¾ç½®ä¸ºéœ€è¦å­˜å‚¨çš„å…ƒç´ æ•°ç›®é™¤ä»¥è´Ÿè½½å› å­ï¼ˆload factorï¼‰ï¼Œç„¶åè°ƒç”¨ `tableSizeFor` æ–¹æ³•è¿›è¡Œå¤„ç†å³å¯ã€‚è¿™æ ·å°±èƒ½å¤Ÿä¿è¯å“ˆå¸Œè¡¨çš„é•¿åº¦å§‹ç»ˆæ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œå¹¶è¾¾åˆ°è¾ƒå¥½çš„æ€§èƒ½å’Œç©ºé—´åˆ©ç”¨ç‡ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶è¿™ç§æ–¹å¼ç¡®å®å¯ä»¥ä¿è¯å“ˆå¸Œè¡¨çš„é•¿åº¦æ˜¯ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œä½†æœ‰æ—¶å€™ä¹Ÿå¯èƒ½ä¼šå‡ºç°å“ˆå¸Œå†²çªçš„æƒ…å†µã€‚å› æ­¤ï¼Œåœ¨å®é™…åº”ç”¨ä¸­ï¼Œè¿˜éœ€è¦æ ¹æ®å…·ä½“æƒ…å†µé€‰æ‹©åˆé€‚çš„å“ˆå¸Œå‡½æ•°ã€è´Ÿè½½å› å­ç­‰å‚æ•°æ¥é¿å…å“ˆå¸Œå†²çªï¼Œå¹¶æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="3åœ¨hashmapå­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼è¿™æ˜¯java-8çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ"><a class="markdownIt-Anchor" href="#3åœ¨hashmapå­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼è¿™æ˜¯java-8çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ">#</a> 3. åœ¨ HashMap å­˜æ”¾å…ƒç´ æ—¶å€™æœ‰è¿™æ ·ä¸€æ®µä»£ç æ¥å¤„ç†å“ˆå¸Œå€¼ï¼Œè¿™æ˜¯ java 8 çš„æ•£åˆ—å€¼æ‰°åŠ¨å‡½æ•°ï¼Œç”¨äºä¼˜åŒ–æ•£åˆ—æ•ˆæœ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">hash</span><span class="params">(Object key)</span>&#123;</span><br><span class="line">	<span class="type">int</span> h;</span><br><span class="line">	<span class="keyword">return</span> (key == <span class="literal">null</span>) ? <span class="number">0</span> : (h = key.hashcode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="4hashä¸ºä»€ä¹ˆç”¨31è®¡ç®—"><a class="markdownIt-Anchor" href="#4hashä¸ºä»€ä¹ˆç”¨31è®¡ç®—">#</a> 4.Hash ä¸ºä»€ä¹ˆç”¨ 31 è®¡ç®—ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">	ä½¿ç”¨ <span class="number">31</span> è¿™ä¸ªç³»æ•°çš„åŸå› æ˜¯å› ä¸ºå®ƒæ—¢æ˜¯ä¸€ä¸ªè´¨æ•°ï¼Œåˆå¯ä»¥é€šè¿‡ç§»ä½å’Œå‡æ³•ç­‰ç®€å•çš„è¿ç®—æ¥å®ç°ä¹˜æ³•ã€‚åŒæ—¶ï¼Œç”±äº <span class="number">31</span> åœ¨äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä¸ªéé›¶çš„æ¯”ç‰¹ä½ï¼Œå› æ­¤ç”¨ <span class="number">31</span> è¿›è¡Œä¹˜æ³•ç›¸å½“äºè¿›è¡Œäº†ä½è¿ç®—å’ŒåŠ æ³•çš„ç»„åˆï¼Œè¿™æ ·ä¸ä»…èƒ½å¤Ÿä¿è¯é«˜æ•ˆè¿ç®—ï¼Œè¿˜èƒ½å¤Ÿé¿å…å“ˆå¸Œå†²çªã€‚</span><br><span class="line">	</span><br><span class="line"><span class="number">31</span>å…·æœ‰ä¸¤ä¸ªä¼˜ç‚¹ï¼š</span><br><span class="line">	<span class="number">1.</span>å°è´¨æ•°ï¼š<span class="number">31</span> æ˜¯ä¸€ä¸ªè¾ƒå°çš„è´¨æ•°ï¼Œåœ¨å“ˆå¸Œè¡¨ä¸­è¢«ç”¨æ¥ä¹˜ä»¥é”®çš„å“ˆå¸Œç ï¼Œä½¿å¾—ç»“æœä¸ä¼šå¤ªå¤§ï¼Œä»è€Œæé«˜æ€§èƒ½ã€‚ç›¸å¯¹äºå…¶ä»–çš„è´¨æ•°ï¼Œ<span class="number">31</span> æ›´æ˜“äºè¢« CPU ç¼“å­˜ï¼Œè¿™ä¹Ÿæœ‰åŠ©äºæå‡å“ˆå¸Œè¡¨çš„æŸ¥è¯¢é€Ÿåº¦ã€‚</span><br><span class="line">	<span class="number">2.</span>å¯é€†æ€§ï¼šå› ä¸º <span class="number">31</span> æ˜¯è´¨æ•°ä¸”æ¯”è¾ƒå°ï¼Œæ‰€ä»¥åªè¦å“ˆå¸Œè¡¨çš„å¤§å°è¶³å¤Ÿå¤§ï¼Œåœ¨ä¹˜æ³•è¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ•°æ®æº¢å‡ºæ˜¯ä¸ä¼šå½±å“å“ˆå¸Œç»“æœçš„ã€‚è€Œä¸”ï¼Œ<span class="number">31</span> çš„é€†å…ƒ <span class="number">0x9e3779b1</span> æ˜¯ä¸€ä¸ªå›ºå®šçš„å¸¸é‡ï¼Œä¹Ÿå¾ˆå®¹æ˜“è®¡ç®—ï¼Œè¿™æœ‰åŠ©äºåœ¨éœ€è¦æ¢å¤å“ˆå¸Œç æ—¶è¿›è¡Œé€†è¿ç®—ã€‚</span><br><span class="line"></span><br><span class="line">	åœ¨å®ç°å“ˆå¸Œå‡½æ•°æ—¶ï¼Œä½¿ç”¨ç³»æ•° <span class="number">31</span> å¯ä»¥ä¿è¯é«˜æ•ˆæ€§ã€å¯é€†æ€§å’Œä½å†²çªç‡ï¼Œå› æ­¤åœ¨ Java ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="5hashmapæ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹"><a class="markdownIt-Anchor" href="#5hashmapæ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹">#</a> 5.HashMap æ‰°åŠ¨å‡½æ•°çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå¯ä»¥è¢«åº”ç”¨åœ¨å“ªäº›åœ°æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">æ‰°åŠ¨å‡½æ•°æ˜¯ä¸€ç§ç”¨äºå¢å¼ºå“ˆå¸Œå‡½æ•°çš„æŠ€æœ¯ã€‚å®ƒé€šå¸¸è¢«ç”¨æ¥å¯¹åŸå§‹å“ˆå¸Œå€¼è¿›è¡Œæ··æ·†å’Œæ‰°åŠ¨ï¼Œä»è€Œå‡å°å“ˆå¸Œå†²çªçš„å‘ç”Ÿç‡ã€‚</span><br><span class="line">	</span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œæ‰°åŠ¨å‡½æ•°ä¼šå°†åŸå§‹å“ˆå¸Œå€¼ä¸å¦ä¸€ä¸ªæ•°å€¼è¿›è¡Œæ··åˆï¼Œå¹¶å†æ¬¡è¿ç”¨å“ˆå¸Œå‡½æ•°äº§ç”Ÿæœ€ç»ˆçš„å“ˆå¸Œå€¼ã€‚è¿™ä¸ªé¢å¤–çš„æ•°å€¼å¯ä»¥æ˜¯ä»»æ„çš„å›ºå®šå€¼æˆ–éšæœºæ•°ï¼Œç›®çš„æ˜¯ä½¿å¾—ä¸åŒçš„å“ˆå¸Œå€¼åœ¨è¿›è¡Œæ··æ·†ä¹‹åï¼Œä»ç„¶èƒ½å¤Ÿä¿æŒä¸€å®šçš„åˆ†æ•£æ€§ï¼Œä»è€Œå‡å°å“ˆå¸Œå†²çªçš„æ¦‚ç‡ã€‚</span><br><span class="line"></span><br><span class="line">æ‰°åŠ¨å‡½æ•°å¯ä»¥è¢«åº”ç”¨åœ¨è®¸å¤šåœ°æ–¹ï¼Œä¾‹å¦‚ï¼š</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>å“ˆå¸Œè¡¨ï¼šåœ¨å“ˆå¸Œè¡¨ä¸­ï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥ç”¨æ¥å¢åŠ é”®çš„éšæœºæ€§ï¼Œå‡å°‘å“ˆå¸Œå†²çªçš„å‘ç”Ÿç‡ï¼Œä»è€Œæé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚Java ä¸­çš„ HashMap å°±ä½¿ç”¨äº†æ‰°åŠ¨å‡½æ•°å¯¹é”®çš„å“ˆå¸Œç è¿›è¡Œæ··æ·†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">2.</span>åŠ å¯†ç®—æ³•ï¼šåœ¨ä¸€äº›åŠ å¯†ç®—æ³•ä¸­ï¼Œä¹Ÿä¼šä½¿ç”¨æ‰°åŠ¨å‡½æ•°æ¥å¢åŠ å¯†ç ç†µï¼Œå¹¶æé«˜åŠ å¯†å¼ºåº¦ã€‚ä¾‹å¦‚ï¼ŒMD5 ç®—æ³•å°±é‡‡ç”¨äº†ä¸€ç³»åˆ—æ‰°åŠ¨å‡½æ•°å¯¹æ•°æ®è¿›è¡Œæ··æ·†ã€‚</span><br><span class="line"></span><br><span class="line"><span class="number">3.</span>å›¾åƒå¤„ç†ï¼šåœ¨å›¾åƒå¤„ç†ä¸­ï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥ç”¨æ¥å¯¹åƒç´ å€¼éšæœºåŒ–ï¼Œå¢åŠ å›¾åƒçš„å™ªå£°ï¼Œä»è€Œå®ç°ä¸€äº›ç‰¹æ®Šæ•ˆæœï¼Œå¦‚æ¯›ç»ç’ƒæ•ˆæœã€é›¨æ»´æ•ˆæœç­‰ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼Œæ‰°åŠ¨å‡½æ•°æ˜¯ä¸€ç§é€šç”¨çš„æŠ€æœ¯ï¼Œå¯ä»¥åœ¨è®¸å¤šåœºæ™¯ä¸‹ä½¿ç”¨ã€‚é€šè¿‡å¼•å…¥éšæœºæ•°å’Œæ··æ·†æ“ä½œï¼Œæ‰°åŠ¨å‡½æ•°å¯ä»¥å¢å¼ºæ•°æ®çš„éšæœºæ€§å’Œå¤æ‚æ€§ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œæ€§èƒ½ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="6hashmapè´Ÿè½½å› å­"><a class="markdownIt-Anchor" href="#6hashmapè´Ÿè½½å› å­">#</a> 6.HashMap è´Ÿè½½å› å­ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">è´Ÿè½½å› å­ï¼Œå¯ä»¥ç†è§£æˆä¸€è¾†è½¦å¯æ‰¿é‡é‡é‡è¶…è¿‡æŸä¸ªé˜ˆå€¼æ—¶ï¼ŒæŠŠè´§æ”¾åˆ°æ–°çš„è½¦ä¸Šã€‚</span><br><span class="line"></span><br><span class="line">	é‚£ä¹ˆåœ¨HashMapä¸­ï¼Œè´Ÿè½½å› å­å†³å®šäº†æ•°æ®é‡å¤šå°‘äº†ä»¥åè¿›è¡Œæ‰©å®¹ã€‚è¿™é‡Œè¦æåˆ°ä¸Šé¢åšçš„HashMapä¾‹å­ï¼Œæˆ‘ä»¬å‡†å¤‡äº†<span class="number">7</span>ä¸ªå…ƒç´ ï¼Œä½†æ˜¯æœ€åè¿˜æœ‰<span class="number">3</span>ä¸ªä½ç½®ç©ºä½™ï¼Œ<span class="number">2</span>ä¸ªä½ç½®å­˜æ”¾äº†<span class="number">2</span>ä¸ªå…ƒç´ ã€‚ æ‰€ä»¥å¯èƒ½å³ä½¿ä½ æ•°æ®æ¯”æ•°ç»„å®¹é‡å¤§æ—¶ä¹Ÿæ˜¯ä¸ä¸€å®šèƒ½æ­£æ­£å¥½å¥½çš„æŠŠæ•°ç»„å æ»¡çš„ï¼Œè€Œæ˜¯åœ¨æŸäº›å°æ ‡ä½ç½®å‡ºç°äº†å¤§é‡çš„ç¢°æ’ï¼Œåªèƒ½åœ¨åŒä¸€ä¸ªä½ç½®ç”¨é“¾è¡¨å­˜æ”¾ï¼Œé‚£ä¹ˆè¿™æ ·å°±å¤±å»äº†Mapæ•°ç»„çš„æ€§èƒ½ã€‚</span><br><span class="line"></span><br><span class="line">	æ‰€ä»¥ï¼Œè¦é€‰æ‹©ä¸€ä¸ªåˆç†çš„å¤§å°ä¸‹è¿›è¡Œæ‰©å®¹ï¼Œé»˜è®¤å€¼<span class="number">0.75</span>å°±æ˜¯è¯´å½“é˜ˆå€¼å®¹é‡å äº†<span class="number">3</span>/<span class="number">4</span>æ—¶èµ¶ç´§æ‰©å®¹ï¼Œå‡å°‘Hashç¢°æ’ã€‚</span><br><span class="line"></span><br><span class="line">	åŒæ—¶<span class="number">0.75</span>æ˜¯ä¸€ä¸ªé»˜è®¤æ„é€ å€¼ï¼Œåœ¨åˆ›å»ºHashMapä¹Ÿå¯ä»¥è°ƒæ•´ï¼Œæ¯”å¦‚ä½ å¸Œæœ›ç”¨æ›´å¤šçš„ç©ºé—´æ¢å–æ—¶é—´ï¼Œå¯ä»¥æŠŠè´Ÿè½½å› å­è°ƒçš„æ›´å°ä¸€äº›ï¼Œå‡å°‘ç¢°æ’ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="7hashmapæ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€"><a class="markdownIt-Anchor" href="#7hashmapæ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€">#</a> 7.HashMap æ˜¯å¼€æ”¾å¯»å€è¿˜æ˜¯æ‹‰é“¾å¯»å€ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">HashMap æ˜¯ä¸€ç§æ‹‰é“¾å¼å“ˆå¸Œè¡¨ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä½¿ç”¨äº†é“¾è¡¨æ¥è§£å†³å“ˆå¸Œå†²çªã€‚</span><br><span class="line"></span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œå½“å¤šä¸ªä¸åŒçš„é”®æ˜ å°„åˆ°åŒä¸€ä¸ªæ¡¶æ—¶ï¼ŒHashMap ä¼šå°†å®ƒä»¬å­˜å‚¨åœ¨åŒä¸€ä¸ªæ¡¶ä¸­ï¼Œå¹¶é€šè¿‡é“¾è¡¨æˆ–çº¢é»‘æ ‘ç­‰æ•°æ®ç»“æ„ç»„ç»‡èµ·æ¥ã€‚è¿™æ ·ï¼Œåœ¨è¿›è¡ŒæŸ¥æ‰¾ã€æ’å…¥ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼Œå°±å¯ä»¥éå†å¯¹åº”æ¡¶ä¸­çš„é“¾è¡¨ï¼Œæ‰¾åˆ°æ‰€éœ€çš„å…ƒç´ ã€‚</span><br><span class="line"></span><br><span class="line">	ç›¸å¯¹äºå¼€æ”¾å¯»å€æ³•ï¼Œæ‹‰é“¾æ³•èƒ½å¤Ÿæ›´å¥½åœ°å¤„ç†å“ˆå¸Œå†²çªï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æ‰©å®¹ã€‚å› ä¸ºåœ¨æ‹‰é“¾æ³•ä¸­ï¼Œå“ˆå¸Œè¡¨çš„æ¯ä¸ªæ¡¶éƒ½å¯ä»¥å­˜å‚¨å¤šä¸ªå…ƒç´ ï¼Œè€Œåœ¨å¼€æ”¾å¯»å€æ³•ä¸­ï¼Œæ¯ä¸ªä½ç½®åªèƒ½å­˜å‚¨ä¸€ä¸ªå…ƒç´ ï¼Œè¿™ä½¿å¾—åŠ¨æ€æ‰©å®¹å˜å¾—æ›´åŠ å›°éš¾å’Œä½æ•ˆã€‚</span><br><span class="line"></span><br><span class="line">	ä½†æ˜¯ï¼Œç”±äºé“¾è¡¨çš„ç©ºé—´å’Œæ—¶é—´å¼€é”€ï¼Œå½“å“ˆå¸Œå†²çªè¾ƒä¸ºé¢‘ç¹æ—¶ï¼Œæ‹‰é“¾æ³•å¯èƒ½ä¼šå¯¼è‡´æ€§èƒ½ä¸‹é™ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒJava8 å¼•å…¥äº†åŸºäºçº¢é»‘æ ‘çš„ä¼˜åŒ–æœºåˆ¶ï¼Œå³å½“é“¾è¡¨é•¿åº¦è¶…è¿‡ä¸€å®šé˜ˆå€¼æ—¶ï¼Œå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œä»¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">æ€»ä¹‹ï¼ŒHashMap æ˜¯ä¸€ç§åŸºäºæ‹‰é“¾æ³•å®ç°çš„å“ˆå¸Œè¡¨ï¼Œèƒ½å¤Ÿé«˜æ•ˆå¤„ç†å“ˆå¸Œå†²çªï¼Œå¹¶ä¸”æ”¯æŒåŠ¨æ€æ‰©å®¹å’ŒåŸºäºçº¢é»‘æ ‘çš„ä¼˜åŒ–ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="8hashmapé“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆ"><a class="markdownIt-Anchor" href="#8hashmapé“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆ">#</a> 8.HashMap é“¾è¡¨ä»€ä¹ˆæ—¶å€™æ ‘åŒ–ä»¥åŠè¿ç§»æ•°æ®ç®—æ³•æ˜¯ä»€ä¹ˆï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">åœ¨JDK1<span class="number">.8</span>ä¸­ï¼ŒHashMapæ˜¯ä»¥æ•°ç»„+é“¾è¡¨+çº¢é»‘æ ‘æ„æˆçš„ã€‚</span><br><span class="line"></span><br><span class="line">	å…·ä½“æ¥è¯´ï¼Œå½“æŸä¸ªæ¡¶ä¸­çš„é“¾è¡¨é•¿åº¦è¶…è¿‡äº†é˜ˆå€¼æ—¶ï¼ŒHashMap ä¼šå°†è¿™ä¸ªé“¾è¡¨è½¬æ¢æˆä¸€æ£µçº¢é»‘æ ‘ï¼Œä»¥ä¾¿æ”¯æŒæ›´å¿«çš„æŸ¥æ‰¾ã€æ’å…¥å’Œåˆ é™¤ç­‰æ“ä½œã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œéœ€è¦è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">	<span class="number">1.</span>åˆ›å»ºä¸€æ£µç©ºçš„çº¢é»‘æ ‘ï¼Œå¹¶å°†åŸå§‹é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ æ’å…¥åˆ°è¿™æ£µæ ‘ä¸­ã€‚</span><br><span class="line">	<span class="number">2.</span>åˆ é™¤åŸå§‹é“¾è¡¨ä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå¹¶è®¾ç½®å“ˆå¸Œè¡¨çš„ç»“æ„ç±»å‹ä¸º TREEBINã€‚</span><br><span class="line">	<span class="number">3.</span>åœ¨è¿›è¡Œæ’å…¥ã€åˆ é™¤ç­‰æ“ä½œæ—¶ï¼Œå…ˆåˆ¤æ–­å½“å‰æ¡¶çš„æ•°æ®ç»“æ„ç±»å‹ï¼Œå¦‚æœæ˜¯é“¾è¡¨ï¼Œåˆ™é‡‡ç”¨é“¾è¡¨çš„æ–¹æ³•è¿›è¡Œæ“ä½œï¼›å¦åˆ™ï¼Œé‡‡ç”¨çº¢é»‘æ ‘çš„æ–¹æ³•è¿›è¡Œæ“ä½œã€‚</span><br><span class="line"></span><br><span class="line">	æ€»ä¹‹ï¼Œåœ¨ JDK8 åŠä»¥åç‰ˆæœ¬ä¸­ï¼ŒHashMap åœ¨æ ‘åŒ–å’Œè¿ç§»æ•°æ®æ–¹é¢åšäº†ä¸€äº›ä¼˜åŒ–ï¼Œä½¿å¾—å®ƒèƒ½å¤Ÿæ›´å¥½åœ°æ”¯æŒå¤§è§„æ¨¡å¹¶å‘å’Œé«˜æ•ˆå†…å­˜ä½¿ç”¨ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="9hashmap-ä¸­çš„-keyè‹¥ä¸º-objectç±»å‹-åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•"><a class="markdownIt-Anchor" href="#9hashmap-ä¸­çš„-keyè‹¥ä¸º-objectç±»å‹-åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•">#</a> 9.HashMap ä¸­çš„ key è‹¥ä¸º Object ç±»å‹ï¼Œ åˆ™éœ€å®ç°å“ªäº›æ–¹æ³•ï¼Ÿ</h4>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/12e5dce6bacfa7d4db320d87936b45db.jpeg" alt="HashMap åœ¨ JDK1.7 å’Œ JDK1.8 ä¸­æœ‰å“ªäº›åŒºåˆ«ï¼Ÿ_æ•°ç»„_07"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">å¦‚æœ HashMap ä¸­çš„ key æ˜¯ Object ç±»å‹ï¼Œåˆ™è¯¥å¯¹è±¡éœ€è¦æ­£ç¡®åœ°å®ç° equals() å’Œ hashCode() æ–¹æ³•ã€‚è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºç¡®å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œå¹¶è®¡ç®—å¯¹è±¡çš„å“ˆå¸Œç ã€‚</span><br><span class="line"></span><br><span class="line">å…·ä½“æ¥è¯´ï¼Œequals() æ–¹æ³•ç”¨äºæ¯”è¾ƒä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ã€‚åœ¨ HashMap ä¸­ï¼Œå½“ä¸¤ä¸ª key çš„å“ˆå¸Œå€¼ç›¸åŒæ—¶ï¼Œä¼šè°ƒç”¨å®ƒä»¬çš„ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦çœŸæ­£ç›¸ç­‰ã€‚å› æ­¤ï¼Œæ­£ç¡®å®ç° equals() æ–¹æ³•å¯ä»¥é˜²æ­¢å“ˆå¸Œå†²çªå’Œé”®å€¼å¯¹é‡å¤çš„é—®é¢˜ã€‚</span><br><span class="line">       </span><br><span class="line">hashCode() æ–¹æ³•ç”¨äºè®¡ç®—å¯¹è±¡çš„å“ˆå¸Œç ï¼Œå®ƒå°†ä¸€ä¸ªå¯¹è±¡æ˜ å°„åˆ°ä¸€ä¸ªæ•´æ•°å€¼ï¼Œç”¨äºç¡®å®šè¯¥å¯¹è±¡åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ã€‚åœ¨ HashMap ä¸­ï¼Œå½“æ’å…¥æˆ–æŸ¥æ‰¾é”®å€¼å¯¹æ—¶ï¼Œä¼šé¦–å…ˆè®¡ç®— key çš„å“ˆå¸Œç ï¼Œå¹¶æ ¹æ®å“ˆå¸Œç æŸ¥æ‰¾å¯¹åº”çš„æ¡¶ã€‚å› æ­¤ï¼Œæ­£ç¡®å®ç° hashCode() æ–¹æ³•å¯ä»¥æé«˜å“ˆå¸Œè¡¨çš„æ€§èƒ½å’Œæ•ˆç‡ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœåœ¨ HashMap ä¸­ä½¿ç”¨è‡ªå®šä¹‰çš„å¯¹è±¡ä½œä¸º keyï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬çš„ equals() æ–¹æ³•å’Œ hashCode() æ–¹æ³•æ˜¯é€šè¿‡ç»§æ‰¿ Object ç±»è€Œæ¥çš„ï¼Œè¿™å¯èƒ½å¯¼è‡´ key çš„æ¯”è¾ƒå’Œå“ˆå¸Œç è®¡ç®—ä¸å‡†ç¡®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦è‡ªå·±é‡å†™ equals() å’Œ hashCode() æ–¹æ³•ï¼Œä»¥æ»¡è¶³æˆ‘ä»¬çš„å…·ä½“éœ€æ±‚ã€‚åŒæ—¶ï¼Œè¿˜éœ€è¦éµå¾ªä¸€äº›è§„åˆ™ï¼Œä¾‹å¦‚ï¼šå¦‚æœä¸¤ä¸ªå¯¹è±¡ç›¸ç­‰ï¼Œé‚£ä¹ˆå®ƒä»¬çš„å“ˆå¸Œç å¿…é¡»ç›¸ç­‰ï¼›åä¹‹äº¦ç„¶ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="10hashmapä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„"><a class="markdownIt-Anchor" href="#10hashmapä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„">#</a> 10.HashMap ä¸­çš„æ‰°åŠ¨å‡½æ•°æ˜¯å¦‚ä½•è®¡ç®—çš„ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ä½¿ç”¨æ‰°åŠ¨å‡½æ•°å°±æ˜¯ä¸ºäº†å¢åŠ éšæœºæ€§ï¼Œè®©æ•°æ®å…ƒç´ æ›´åŠ å‡è¡¡çš„æ•£åˆ—ï¼Œå‡å°‘ç¢°æ’</span></span><br><span class="line"><span class="comment"> * æŠŠå“ˆå¸Œå€¼å³ç§»16ä½ï¼Œä¹Ÿå°±æ­£å¥½æ˜¯è‡ªå·±é•¿åº¦çš„ä¸€åŠï¼Œä¹‹åä¸åŸå“ˆå¸Œå€¼åšå¼‚æˆ–è¿ç®—</span></span><br><span class="line"><span class="comment"> * è¿™æ ·å°±æ··åˆäº†åŸå“ˆå¸Œå€¼ä¸­çš„é«˜ä½å’Œä½ä½ï¼Œå¢å¤§äº†éšæœºæ€§</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="type">int</span> <span class="variable">hashIndex</span> <span class="operator">=</span> (size - <span class="number">1</span>) &amp; (key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; <span class="number">16</span>));</span><br></pre></td></tr></table></figure>
<h4 id="11ä¸ºä»€ä¹ˆhashmapä¸­è¦ä½¿ç”¨-1-30-æ¥ä½œä¸ºæœ€å¤§é™åˆ¶"><a class="markdownIt-Anchor" href="#11ä¸ºä»€ä¹ˆhashmapä¸­è¦ä½¿ç”¨-1-30-æ¥ä½œä¸ºæœ€å¤§é™åˆ¶">#</a> 11. ä¸ºä»€ä¹ˆ hashMap ä¸­è¦ä½¿ç”¨ ï¼ˆ1 &lt;&lt; 30ï¼‰ æ¥ä½œä¸ºæœ€å¤§é™åˆ¶</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ HashMap ä¸­ï¼Œä½¿ç”¨ <span class="number">1</span> &lt;&lt; <span class="number">30</span> æ¥ä½œä¸ºå®¹é‡çš„æœ€å¤§é™åˆ¶æ˜¯å› ä¸º Java ä¸­çš„æ•°ç»„é•¿åº¦ä¸èƒ½è¶…è¿‡ Integer.MAX_VALUEï¼ˆå³ <span class="number">2</span>^<span class="number">31</span>-<span class="number">1</span>ï¼‰ã€‚è€Œ HashMap å†…éƒ¨çš„å®ç°éœ€è¦ä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥ä¿å­˜æ•°æ®ï¼Œå› æ­¤å…¶å®¹é‡ä¹Ÿå¿…é¡»å—åˆ°è¿™ä¸ªé™åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">ä¸ºäº†ä¿è¯ HashMap çš„æœ€å¤§å®¹é‡ä¸è¶…è¿‡ Integer.MAX_VALUEï¼ŒåŒæ—¶åˆè¦å°½å¯èƒ½åœ°æé«˜ HashMap çš„å®¹é‡ï¼ŒJava å¼€å‘å›¢é˜Ÿé€‰æ‹©äº† <span class="number">1</span> &lt;&lt; <span class="number">30</span> ä½œä¸º HashMap çš„æœ€å¤§å®¹é‡ã€‚è¿™ä¸ªå€¼æ˜¯ä¸€ä¸ª <span class="number">2</span> çš„å¹‚æ¬¡æ–¹ï¼Œå¯ä»¥å……åˆ†åˆ©ç”¨ä½è¿ç®—çš„ä¼˜åŠ¿ï¼ŒåŒæ—¶åˆä¸ä¼šè¶…è¿‡æ•°ç»„é•¿åº¦çš„æœ€å¤§é™åˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒHashMap å®é™…ä¸Šå¹¶ä¸ä¼šç›´æ¥ä½¿ç”¨ <span class="number">1</span> &lt;&lt; <span class="number">30</span> ä½œä¸ºå®¹é‡çš„æœ€å¤§é™åˆ¶ã€‚åœ¨åˆå§‹åŒ– HashMap æ—¶ï¼Œå¦‚æœä¼ å…¥çš„åˆå§‹å®¹é‡å¤§äºç­‰äº <span class="number">1</span> &lt;&lt; <span class="number">30</span>ï¼Œåˆ™ä¼šå°†å®¹é‡è®¾ç½®ä¸º Integer.MAX_VALUEï¼›å¦‚æœä¼ å…¥çš„åˆå§‹å®¹é‡å°äº <span class="number">1</span> &lt;&lt; <span class="number">30</span>ï¼Œåˆ™ä¼šå°†å®¹é‡è°ƒæ•´ä¸ºå¤§äºç­‰äºä¼ å…¥å€¼ä¸”æœ€æ¥è¿‘ <span class="number">2</span> çš„å¹‚æ¬¡æ–¹çš„æ•°ã€‚è¿™æ ·å¯ä»¥ç¡®ä¿ HashMap å®¹é‡çš„åˆç†æ€§ï¼ŒåŒæ—¶é¿å…å‡ºç°æ•°ç»„é•¿åº¦è¶…è¿‡ Integer.MAX_VALUE çš„æƒ…å†µã€‚</span><br></pre></td></tr></table></figure>
<h4 id="12hashmapå¦‚ä½•å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼"><a class="markdownIt-Anchor" href="#12hashmapå¦‚ä½•å¯»æ‰¾2çš„å¹‚æ¬¡æ–¹æœ€å°å€¼">#</a> 12.HashMap å¦‚ä½•å¯»æ‰¾ 2 çš„å¹‚æ¬¡æ–¹æœ€å°å€¼ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDK1.8ä¸­ï¼šæŠŠäºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½å¡«ä¸Š1ï¼Œå½“äºŒè¿›åˆ¶çš„å„ä¸ªä½ç½®éƒ½æ˜¯1ä»¥åï¼Œå°±æ˜¯ä¸€ä¸ªæ ‡å‡†çš„2çš„å¹‚æ¬¡æ–¹å‡1äº†ï¼Œæœ€åæŠŠç»“æœåŠ 1å†è¿”å›å³å¯ã€‚</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">    <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> cap - <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">1</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">2</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">4</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">8</span>;</span><br><span class="line">    n |= n &gt;&gt;&gt; <span class="number">16</span>;</span><br><span class="line">    <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//JDK1.8ä¹‹åï¼šï¼ˆäºŒåˆ†æ³•ï¼‰é€šè¿‡å¤šæ¬¡å³ç§»å’Œå‡å°ä½å®½çš„æ–¹å¼æ¥é€æ­¥ç¼©å°æœç´¢èŒƒå›´ï¼Œæœ€ç»ˆå¾—åˆ°æœ€é«˜ä½ 0 çš„ä¸ªæ•°</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="title function_">tableSizeFor</span><span class="params">(<span class="type">int</span> cap)</span> &#123;</span><br><span class="line">     <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> -<span class="number">1</span> &gt;&gt;&gt; Integer.numberOfLeadingZeros(cap - <span class="number">1</span>);</span><br><span class="line">     <span class="keyword">return</span> (n &lt; <span class="number">0</span>) ? <span class="number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="12ä¸ºä»€ä¹ˆé‡å†™equalsä¸€å®šè¦é‡å†™hashcode"><a class="markdownIt-Anchor" href="#12ä¸ºä»€ä¹ˆé‡å†™equalsä¸€å®šè¦é‡å†™hashcode">#</a> 12. ä¸ºä»€ä¹ˆé‡å†™ equals ä¸€å®šè¦é‡å†™ hashcode</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">åœ¨ Java ä¸­ï¼Œæ¯ä¸ªç±»éƒ½ç»§æ‰¿äº† Object ç±»ï¼ŒObject ç±»æä¾›äº†ä¸¤ä¸ªæœ‰å…³å“ˆå¸Œå€¼çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ equals() æ–¹æ³•ï¼Œå¦ä¸€ä¸ªæ˜¯ hashCode() æ–¹æ³•ã€‚å…¶ä¸­ï¼Œequals() æ–¹æ³•ç”¨äºåˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼Œè€Œ hashCode() æ–¹æ³•åˆ™è¿”å›è¯¥å¯¹è±¡çš„å“ˆå¸Œç ã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœåœ¨ä¸€ä¸ªç±»ä¸­é‡å†™äº† equals() æ–¹æ³•ï¼Œä½†æ²¡æœ‰é‡å†™ hashCode() æ–¹æ³•ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´å‡ºç°ä»¥ä¸‹æƒ…å†µï¼š</span><br><span class="line"></span><br><span class="line">	åœ¨ä½¿ç”¨ HashMapã€HashSet ç­‰å“ˆå¸Œæ•°æ®ç»“æ„æ—¶ï¼Œç”±äºä¸åŒçš„å¯¹è±¡å¯ä»¥è¿”å›ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå› æ­¤å¯èƒ½ä¼šå°†è¿™äº›å¯¹è±¡è¯¯è®¤ä¸ºæ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œå¼•å‘ç¨‹åºé”™è¯¯ã€‚</span><br><span class="line">	åœ¨ä½¿ç”¨è‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºé”®æ¥è¿›è¡Œ Map æ“ä½œæ—¶ï¼Œç”±äºä¸åŒçš„é”®å¯ä»¥è¿”å›ç›¸åŒçš„å“ˆå¸Œå€¼ï¼Œå› æ­¤å¯èƒ½æ— æ³•æ­£ç¡®åœ°å®šä½åˆ°å¯¹åº”çš„é”®å€¼å¯¹ï¼Œä»è€Œå¯¼è‡´æ•°æ®ä¸¢å¤±æˆ–æŸ¥æ‰¾å¤±è´¥ã€‚</span><br><span class="line">å› æ­¤ï¼Œå¦‚æœè¦é‡å†™ equals() æ–¹æ³•ï¼Œåˆ™å¿…é¡»åŒæ—¶é‡å†™ hashCode() æ–¹æ³•ï¼Œä»¥ç¡®ä¿å®ƒä»¬çš„è¡Œä¸ºä¸€è‡´å¹¶æ»¡è¶³ä¸€äº›çº¦å®šï¼š</span><br><span class="line"></span><br><span class="line">	å¦‚æœä¸¤ä¸ªå¯¹è±¡ä½¿ç”¨ equals() æ–¹æ³•æ¯”è¾ƒè¿”å›ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬çš„ hashCode() å€¼å¿…é¡»ç›¸ç­‰ã€‚</span><br><span class="line">	å¦‚æœä¸¤ä¸ªå¯¹è±¡çš„ hashCode() å€¼ç›¸ç­‰ï¼Œåˆ™å®ƒä»¬ä¸ä¸€å®šç›¸ç­‰ï¼ˆå³å¯èƒ½å­˜åœ¨å“ˆå¸Œå†²çªï¼‰ï¼Œå› æ­¤éœ€è¦å†æ¬¡ä½¿ç”¨ equals() æ–¹æ³•è¿›è¡Œæ¯”è¾ƒã€‚</span><br><span class="line">é€šè¿‡éµå¾ªè¿™äº›çº¦å®šï¼Œå¯ä»¥ä¿è¯åœ¨ä½¿ç”¨å“ˆå¸Œæ•°æ®ç»“æ„æˆ–è‡ªå®šä¹‰å¯¹è±¡ä½œä¸ºé”®å€¼å¯¹æ—¶ä¸ä¼šå‡ºç°é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="13ä¸ºä»€ä¹ˆåœ¨-java-çš„-hashmap-å®ç°ä¸­æ•°ç»„çš„å¤§å°å³å®¹é‡å¿…é¡»å§‹ç»ˆä¿æŒä¸º-2-çš„å¹‚æ¬¡æ–¹"><a class="markdownIt-Anchor" href="#13ä¸ºä»€ä¹ˆåœ¨-java-çš„-hashmap-å®ç°ä¸­æ•°ç»„çš„å¤§å°å³å®¹é‡å¿…é¡»å§‹ç»ˆä¿æŒä¸º-2-çš„å¹‚æ¬¡æ–¹">#</a> 13. ä¸ºä»€ä¹ˆåœ¨ Java çš„ HashMap å®ç°ä¸­ï¼Œæ•°ç»„çš„å¤§å°ï¼ˆå³å®¹é‡ï¼‰å¿…é¡»å§‹ç»ˆä¿æŒä¸º 2 çš„å¹‚æ¬¡æ–¹ï¼Ÿ</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">HashMapçš„é•¿åº¦å¿…é¡»ä¿è¯æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œæ˜¯ä¸ºäº†é¿å…å‡ºç°HashMapä¸ºç©ºæˆ–è€…HashMapä¸­å­˜å‚¨çš„å…ƒç´ ä¸ªæ•°ä¸è¶³<span class="number">2</span>çš„å¹‚æ¬¡æ–¹çš„æƒ…å†µã€‚</span><br><span class="line"></span><br><span class="line">å¦‚æœHashMapçš„é•¿åº¦ä¸æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä»¥ä¸‹é—®é¢˜ï¼š</span><br><span class="line"></span><br><span class="line">	å¦‚æœHashMapçš„é•¿åº¦ä¸º<span class="number">1</span>ï¼Œé‚£ä¹ˆå®ƒçš„å“ˆå¸Œå†²çªè§£å†³æ–¹å¼åªèƒ½æ˜¯é“¾åœ°å€æ³•ï¼ˆå³å°†å†²çªçš„é”®å€¼å¯¹æ’å…¥åˆ°é“¾è¡¨ä¸­ï¼‰ï¼Œè¿™ç§æ–¹å¼ä¸èƒ½å¤„ç†å“ˆå¸Œå†²çªã€‚</span><br><span class="line">	å¦‚æœHashMapçš„é•¿åº¦ä¸º<span class="number">0</span>ï¼Œé‚£ä¹ˆå®ƒçš„å“ˆå¸Œå†²çªè§£å†³æ–¹å¼åªèƒ½æ˜¯å¼€æ”¾åœ°å€æ³•ï¼ˆå³å°†å†²çªçš„é”®å€¼å¯¹ç›´æ¥æ”¾åœ¨HashMapä¸­ï¼‰ï¼Œè¿™ç§æ–¹å¼ä¸èƒ½å¤„ç†å“ˆå¸Œå†²çªã€‚</span><br><span class="line"></span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†ä¿è¯HashMapçš„æ­£ç¡®æ€§å’Œæ€§èƒ½ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å®ƒçš„é•¿åº¦æ˜¯<span class="number">2</span>çš„å¹‚æ¬¡æ–¹ï¼Œæˆ–è€…ä¸ºä¸€ä¸ªå›ºå®šçš„æœ€å¤§å€¼ã€‚å¦‚æœéœ€è¦åŠ¨æ€åœ°è°ƒæ•´HashMapçš„é•¿åº¦ï¼Œå¯ä»¥ä½¿ç”¨é“¾è¡¨æ³•æˆ–è€…å¼€æ”¾åœ°å€æ³•ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="14ä¸ºä»€ä¹ˆhashmaploadfactorçš„é€‰å€¼æ˜¯34è€Œä¸æ˜¯24"><a class="markdownIt-Anchor" href="#14ä¸ºä»€ä¹ˆhashmaploadfactorçš„é€‰å€¼æ˜¯34è€Œä¸æ˜¯24">#</a> 14. ä¸ºä»€ä¹ˆ HashMap.loadFactor çš„é€‰å€¼æ˜¯ 3/4ï¼Œè€Œä¸æ˜¯ 2/4?</h4>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">é¦–å…ˆï¼Œå½“loadFactorçš„å€¼æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œè™½ç„¶èƒ½å¤Ÿå‡å°‘ç©ºé—´çš„æµªè´¹ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å“ˆå¸Œè¡¨æ›´åŠ é¢‘ç¹åœ°è¿›è¡Œæ‰©å®¹æ“ä½œï¼Œè¿™ä¼šå½±å“åˆ°HashMapçš„æ€§èƒ½ã€‚</span><br><span class="line">å…¶æ¬¡ï¼Œå½“loadFactorçš„å€¼æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œè™½ç„¶èƒ½å¤Ÿå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ï¼Œä½†æ˜¯ä¼šå¯¼è‡´å“ˆå¸Œé“¾è¡¨é•¿åº¦è¿‡é•¿ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¼šå˜å¾—è¾ƒä½ã€‚</span><br><span class="line">å› æ­¤ï¼Œä¸ºäº†å¹³è¡¡ç©ºé—´åˆ©ç”¨ç‡å’Œæ—¶é—´æ•ˆç‡ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚å½“çš„loadFactorå€¼éå¸¸é‡è¦ã€‚ç»è¿‡å®éªŒå’Œåˆ†æï¼Œå‘ç°loadFactorå–<span class="number">0.75</span>æ—¶ï¼Œå¯ä»¥åœ¨ä¿è¯å“ˆå¸Œè¡¨æŸ¥æ‰¾æ•ˆç‡çš„åŒæ—¶ï¼Œç¨å¾®å‡å°‘ç©ºé—´çš„æµªè´¹ã€‚å¦å¤–ï¼Œè¿™ä¸ªå€¼ä¹Ÿæ˜¯æ¯”è¾ƒå¸¸è§çš„ä¸€ä¸ªå–å€¼ï¼Œå¾ˆå¤šç¼–ç¨‹è¯­è¨€ä¸­ä¹Ÿé‡‡ç”¨äº†ç±»ä¼¼çš„å€¼ã€‚</span><br></pre></td></tr></table></figure>
<h4 id="15hashmapä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶å¦‚ä½•æ‰©å®¹"><a class="markdownIt-Anchor" href="#15hashmapä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶å¦‚ä½•æ‰©å®¹">#</a> 15.HashMap ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ï¼Ÿå¦‚ä½•æ‰©å®¹ï¼Ÿ</h4>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">HashMapåœ¨å­˜å‚¨é”®å€¼å¯¹æ—¶ï¼Œä¼šå°†é”®é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°æ¡¶é‡Œé¢ï¼Œæ¯ä¸ªæ¡¶æ˜¯ä¸€ä¸ªé“¾è¡¨æˆ–çº¢é»‘æ ‘ã€‚å½“HashMapä¸­çš„å…ƒç´ æ•°é‡å¢åŠ åˆ°è¶…è¿‡äº†è´Ÿè½½å› å­ï¼ˆé»˜è®¤ä¸º0.75ï¼‰ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">å…·ä½“åœ°è¯´ï¼Œåœ¨æ·»åŠ å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰çš„å…ƒç´ æ•°é‡è¾¾åˆ°äº†é˜ˆå€¼ï¼ˆå³å®¹é‡ä¹˜ä»¥è´Ÿè½½å› å­ï¼‰ï¼Œå°±ä¼šå¯åŠ¨æ‰©å®¹æœºåˆ¶ã€‚è¿™ä¸ªé˜ˆå€¼é€šè¿‡å¦‚ä¸‹å…¬å¼è®¡ç®—ï¼š</span><br><span class="line"></span><br><span class="line">threshold = capacity * loadFactor</span><br><span class="line"></span><br><span class="line">å…¶ä¸­capacityæ˜¯å½“å‰HashMapçš„å®¹é‡ï¼ŒloadFactoræ˜¯è´Ÿè½½å› å­ï¼Œé»˜è®¤å€¼ä¸º0.75ã€‚å½“HashMapä¸­å…ƒç´ ä¸ªæ•°è¾¾åˆ°äº†thresholdå€¼æ—¶ï¼Œå°±ä¼šè§¦å‘æ‰©å®¹æœºåˆ¶ã€‚</span><br><span class="line"></span><br><span class="line">æ‰©å®¹æ“ä½œåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ï¼š</span><br><span class="line"></span><br><span class="line">	1.åˆ›å»ºä¸€ä¸ªæ–°çš„Entryæ•°ç»„ï¼Œé•¿åº¦ä¸ºåŸæ•°ç»„çš„ä¸¤å€ã€‚</span><br><span class="line">	2.å°†åŸæ¥æ•°ç»„ä¸­æ‰€æœ‰çš„å…ƒç´ é‡æ–°åˆ†é…åˆ°æ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸€æ­¥éœ€è¦é‡æ–°è®¡ç®—æ¯ä¸ªå…ƒç´ çš„hashå€¼ï¼Œå¹¶ä¸”æ ¹æ®æ–°çš„æ•°ç»„é•¿åº¦æ±‚å‡ºå®ƒä»¬åœ¨æ–°æ•°ç»„ä¸­çš„ä½ç½®ã€‚</span><br><span class="line">	3.åœ¨é‡æ–°åˆ†é…å…ƒç´ çš„è¿‡ç¨‹ä¸­ï¼Œå¦‚æœæŸä¸ªä½ç½®ä¸Šæœ‰å¤šä¸ªå…ƒç´ ï¼Œåˆ™ä¼šå½¢æˆä¸€ä¸ªé“¾è¡¨æˆ–çº¢é»‘æ ‘ï¼Œè¿™å–å†³äºé“¾è¡¨é•¿åº¦æ˜¯å¦å¤§äºç­‰äº8ï¼Œå¹¶ä¸”æ¡¶å®¹é‡å¤§äº64ã€‚å¦‚æœé“¾è¡¨é•¿åº¦å¤§äºç­‰äº8å¹¶ä¸”æ¡¶å®¹é‡å¤§äº64çš„è¯ï¼Œåˆ™ä¼šå°†å…¶è½¬æ¢ä¸ºçº¢é»‘æ ‘ï¼Œå¦åˆ™ä»ç„¶ä½¿ç”¨é“¾è¡¨ã€‚è¿™ä¸€æ­¥æ˜¯ä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œå› ä¸ºçº¢é»‘æ ‘çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯O(log n)ï¼Œè€Œé“¾è¡¨çš„æŸ¥è¯¢æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚</span><br><span class="line">	4.æ›´æ–°HashMapçš„å®¹é‡å’Œé˜ˆå€¼ã€‚</span><br><span class="line">	</span><br><span class="line">æ‰©å®¹æ“ä½œä¼šæ¯”è¾ƒè€—æ—¶ï¼Œå› ä¸ºéœ€è¦é‡æ–°è®¡ç®—hashå€¼ã€é‡æ–°åˆ†é…å…ƒç´ ç­‰ï¼Œæ‰€ä»¥åº”è¯¥å°½å¯èƒ½é¿å…é¢‘ç¹è§¦å‘æ‰©å®¹ã€‚å¯ä»¥é€šè¿‡è°ƒæ•´è´Ÿè½½å› å­çš„å¤§å°æ¥æ§åˆ¶HashMapçš„æ€§èƒ½å’Œç©ºé—´å ç”¨</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T09:23:40.000Z" title="2023/5/6 17:23:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-06T09:24:08.969Z" title="2023/5/6 17:24:08">2023-05-06</time>æ›´æ–°</span><span class="level-item">21 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦3221ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0Map/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°Hashè¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°hashè¡¨å¹¶è§£å†³å“ˆå¸Œå†²çª"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°hashè¡¨å¹¶è§£å†³å“ˆå¸Œå†²çª">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° Hash è¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</h1>
<h2 id=""><a class="markdownIt-Anchor" href="#">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#%E4%B8%80%E3%80%81%E5%89%8D%E8%A8%80">#</a>ä¸€ã€å‰è¨€</h2>
<h3 id="å“ˆå¸Œè¡¨çš„å†å²"><a class="markdownIt-Anchor" href="#å“ˆå¸Œè¡¨çš„å†å²">#</a> å“ˆå¸Œè¡¨çš„å†å²</h3>
<p>å“ˆå¸Œæ•£åˆ—çš„æƒ³æ³•åœ¨ä¸åŒçš„åœ°æ–¹ç‹¬ç«‹å‡ºç°ã€‚1953 å¹´ 1 æœˆï¼Œæ±‰æ–¯ãƒ»å½¼å¾—ãƒ»å¢æ© (Hans Peter Luhn) ç¼–å†™äº†ä¸€ä»½ IBM å†…éƒ¨å¤‡å¿˜å½•ï¼Œå…¶ä¸­ä½¿ç”¨äº†æ•£åˆ—å’Œé“¾æ¥ã€‚å¼€æ”¾å¯»å€åæ¥ç”± AD Linh åœ¨ Luhn çš„è®ºæ–‡ä¸Šæå‡ºã€‚å¤§çº¦åœ¨åŒä¸€æ—¶é—´ï¼ŒIBM Research çš„ Gene Amdahlã€Elaine M. McGrawã€Nathaniel Rochester å’Œ Arthur Samuel ä¸º IBM 701 æ±‡ç¼–å™¨å®ç°äº†æ•£åˆ—ã€‚â€Šçº¿æ€§æ¢æµ‹çš„å¼€æ”¾å¯»å€å½’åŠŸäº Amdahlï¼Œå°½ç®¡ Ershov ç‹¬ç«‹åœ°æœ‰ç›¸åŒçš„æƒ³æ³•ã€‚â€œå¼€æ”¾å¯»å€â€ ä¸€è¯æ˜¯ç”± W. Wesley Peterson åœ¨ä»–çš„æ–‡ç« ä¸­åˆ›é€ çš„ï¼Œè¯¥æ–‡ç« è®¨è®ºäº†å¤§æ–‡ä»¶ä¸­çš„æœç´¢é—®é¢˜ã€‚</p>
<h2 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#%E4%BA%8C%E3%80%81%E5%93%88%E5%B8%8C%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">#</a>äºŒã€å“ˆå¸Œæ•°æ®ç»“æ„</h2>
<p>å“ˆå¸Œè¡¨çš„å­˜åœ¨æ˜¯ä¸ºäº†è§£å†³èƒ½é€šè¿‡ O (1) æ—¶é—´å¤æ‚åº¦ç›´æ¥ç´¢å¼•åˆ°æŒ‡å®šå…ƒç´ ã€‚</p>
<p>è¿™æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿé€šè¿‡æˆ‘ä»¬ä½¿ç”¨æ•°ç»„å­˜æ”¾å…ƒç´ ï¼Œéƒ½æ˜¯æŒ‰ç…§é¡ºåºå­˜æ”¾çš„ï¼Œå½“éœ€è¦è·å–æŸä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œåˆ™éœ€è¦å¯¹æ•°ç»„è¿›è¡Œéå†ï¼Œè·å–åˆ°æŒ‡å®šçš„å€¼ã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-01.png" alt="img"></p>
<p>è€Œè¿™æ ·é€šè¿‡å¾ªç¯éå†æ¯”å¯¹è·å–æŒ‡å®šå…ƒç´ çš„æ“ä½œï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯ O (n)ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœä½ çš„ä¸šåŠ¡é€»è¾‘å®ç°ä¸­å­˜åœ¨è¿™æ ·çš„ä»£ç æ˜¯éå¸¸æ‹‰èƒ¯çš„ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿè¿™å°±å¼•å…¥äº†å“ˆå¸Œæ•£åˆ—è¡¨çš„è®¾è®¡ã€‚</p>
<hr>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œä¸€ä¸ªå“ˆå¸Œè¡¨ï¼ˆhash tableã€hash mapï¼‰æ˜¯ä¸€ç§å®ç°å…³è”æ•°ç»„çš„æŠ½è±¡æ•°æ®ç»“æ„ï¼Œè¯¥ç»“æ„å°†é”®é€šè¿‡å“ˆå¸Œè®¡ç®—æ˜ å°„åˆ°å€¼ã€‚</p>
<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é€šè¿‡å¯¹ä¸€ä¸ª Key å€¼è®¡ç®—å®ƒçš„å“ˆå¸Œå¹¶ä¸é•¿åº¦ä¸º 2 çš„ n æ¬¡å¹‚çš„æ•°ç»„å‡ä¸€åšä¸è¿ç®—ï¼Œè®¡ç®—å‡ºæ§½ä½å¯¹åº”çš„ç´¢å¼•ï¼Œå°†æ•°æ®å­˜æ”¾åˆ°ç´¢å¼•ä¸‹ã€‚é‚£ä¹ˆè¿™æ ·å°±è§£å†³äº†å½“è·å–æŒ‡å®šæ•°æ®æ—¶ï¼Œåªéœ€è¦æ ¹æ®å­˜æ”¾æ—¶è®¡ç®—ç´¢å¼• ID çš„æ–¹å¼å†è®¡ç®—ä¸€æ¬¡ï¼Œå°±å¯ä»¥æŠŠæ§½ä½ä¸Šå¯¹åº”çš„æ•°æ®è·å–å¤„ç†ï¼Œä»¥æ­¤è¾¾åˆ°æ—¶é—´å¤æ‚åº¦ä¸º O (1) çš„æƒ…å†µã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-02.png" alt="img"></p>
<p>å“ˆå¸Œæ•£åˆ—è™½ç„¶è§£å†³äº†è·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦é—®é¢˜ï¼Œä½†å¤§å¤šæ•°æ—¶å€™è¿™åªæ˜¯ç†æƒ³æƒ…å†µã€‚å› ä¸ºéšç€å…ƒç´ çš„å¢å¤šï¼Œå¾ˆå¯èƒ½å‘ç”Ÿå“ˆå¸Œå†²çªï¼Œæˆ–è€…å“ˆå¸Œå€¼æ³¢åŠ¨ä¸å¤§å¯¼è‡´ç´¢å¼•è®¡ç®—ç›¸åŒï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªç´¢å¼•ä½ç½®å‡ºç°å¤šä¸ªå…ƒç´ æƒ…å†µã€‚å¦‚å›¾æ‰€ç¤ºï¼›</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-03.png" alt="img"></p>
<p>å½“ <code>æäºŒç‹—</code> ã€ <code>æ‹ç“¢å†²</code> éƒ½æœ‰æ§½ä½çš„ä¸‹æ ‡ç´¢å¼• 03 çš„  <code>å®è£†çŒ«</code>  å‘ç”Ÿå†²çªæ—¶ï¼Œæƒ…å†µå°±å˜å¾—ç³Ÿç³•äº†ï¼Œå› ä¸ºè¿™æ ·å°±ä¸èƒ½æ»¡è¶³ O (1) æ—¶é—´å¤æ‚åº¦è·å–å…ƒç´ çš„è¯‰æ±‚äº†ã€‚</p>
<h2 id="-3"><a class="markdownIt-Anchor" href="#-3">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E5%93%88%E5%B8%8C%E6%95%A3%E5%88%97">#</a>ä¸‰ã€å®ç°å“ˆå¸Œæ•£åˆ—</h2>
<p>â€‹		å“ˆå¸Œæ•£åˆ—æ˜¯ä¸€ä¸ªéå¸¸å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œæ— è®ºæ˜¯æˆ‘ä»¬ä½¿ç”¨çš„ HashMapã€ThreaLocal è¿˜æ˜¯ä½ åœ¨åˆ·é¢˜ä¸­ä½äº†æå‡ç´¢å¼•æ•ˆç‡ï¼Œéƒ½ä¼šç”¨åˆ°å“ˆå¸Œæ•£åˆ—ã€‚</p>
<p>â€‹		åªè¦å“ˆå¸Œæ¡¶çš„é•¿åº¦ç”±è´Ÿè½½å› å­æ§åˆ¶çš„åˆç†ï¼Œæ¯æ¬¡æŸ¥æ‰¾å…ƒç´ çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸æ¡¶ä¸­å­˜å‚¨çš„å…ƒç´ æ•°é‡æ— å…³ã€‚å¦å¤–è®¸å¤šå“ˆå¸Œè¡¨è®¾è®¡è¿˜å…è®¸å¯¹é”®å€¼å¯¹çš„ä»»æ„æ’å…¥å’Œåˆ é™¤ï¼Œæ¯æ¬¡æ“ä½œçš„æ‘Šé”€å›ºå®šå¹³å‡æˆæœ¬ã€‚</p>
<h3 id="-4"><a class="markdownIt-Anchor" href="#-4">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#_1-%E5%93%88%E5%B8%8C%E7%A2%B0%E6%92%9E">#</a>1. å“ˆå¸Œç¢°æ’</h3>
<p><strong>è¯´æ˜</strong>ï¼šé€šè¿‡æ¨¡æ‹Ÿç®€å• HashMap å®ç°ï¼Œå»æ‰æ‹‰é“¾å¯»å€ç­‰è®¾è®¡ï¼ŒéªŒè¯å…ƒç´ å“ˆæ–°ç´¢å¼•ä½ç½®ç¢°æ’ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap01</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Object[] tab = <span class="keyword">new</span> <span class="title class_">Object</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        tab[idx] = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">return</span> (V) tab[idx];</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-04.png" alt="img"></p>
<ul>
<li>HashMap01 çš„å®ç°åªæ˜¯é€šè¿‡å“ˆå¸Œè®¡ç®—å‡ºçš„ä¸‹æ ‡ï¼Œæ•£åˆ—å­˜æ”¾åˆ°å›ºå®šçš„æ•°ç»„å†…ã€‚é‚£ä¹ˆè¿™æ ·å½“å‘ç”Ÿå…ƒç´ ä¸‹æ ‡ç¢°æ’æ—¶ï¼ŒåŸæœ‰çš„å…ƒç´ å°±ä¼šè¢«æ–°çš„å…ƒç´ æ›¿æ¢æ‰ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap01</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap01</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;02&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-05.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">06</span>:<span class="number">58</span>:<span class="number">41.691</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">06</span>:<span class="number">58</span>:<span class="number">41.696</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šè‹—è‹—</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¢°æ’å‰ map.get (â€œ01â€) çš„å€¼æ˜¯ <code>èŠ±èŠ±</code> ï¼Œä¸¤æ¬¡ä¸‹æ ‡ç´¢å¼•ç¢°æ’åå­˜æ”¾çš„å€¼åˆ™æ˜¯ <code>è‹—è‹—</code></li>
<li>è¿™ä¹Ÿå°±æ˜¯ä½¿ç”¨å“ˆå¸Œæ•£åˆ—å¿…é¡»è§£å†³çš„ä¸€ä¸ªé—®é¢˜ï¼Œæ— è®ºæ˜¯åœ¨å·²çŸ¥å…ƒç´ æ•°é‡çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ‰©å®¹æ•°ç»„é•¿åº¦è§£å†³ï¼Œè¿˜æ˜¯æŠŠç¢°æ’çš„å…ƒç´ é€šè¿‡é“¾è¡¨å­˜æ”¾ï¼Œéƒ½æ˜¯å¯ä»¥çš„ã€‚</li>
</ul>
<h3 id="-5"><a class="markdownIt-Anchor" href="#-5">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#_2-%E6%8B%89%E9%93%BE%E5%AF%BB%E5%9D%80">#</a>2. æ‹‰é“¾å¯»å€</h3>
<p><strong>è¯´æ˜</strong>ï¼šæ—¢ç„¶æˆ‘ä»¬æ²¡æ³•æ§åˆ¶å…ƒç´ ä¸ç¢°æ’ï¼Œä½†æˆ‘ä»¬å¯ä»¥å¯¹ç¢°æ’åçš„å…ƒç´ è¿›è¡Œç®¡ç†ã€‚æ¯”å¦‚åƒ HashMap ä¸­æ‹‰é“¾æ³•ä¸€æ ·ï¼ŒæŠŠç¢°æ’çš„å…ƒç´ å­˜æ”¾åˆ°é“¾è¡¨ä¸Šã€‚è¿™é‡Œæˆ‘ä»¬å°±æ¥ç®€åŒ–å®ç°ä¸€ä¸‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap02BySeparateChaining</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> LinkedList&lt;Node&lt;K, V&gt;&gt;[] tab = <span class="keyword">new</span> <span class="title class_">LinkedList</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tab[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">            tab[idx] = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">            tab[idx].add(<span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            tab[idx].add(<span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;K, V&gt; kvNode : tab[idx]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (key.equals(kvNode.getKey())) &#123;</span><br><span class="line">                <span class="keyword">return</span> kvNode.value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K, V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> K <span class="title function_">getKey</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> V <span class="title function_">getValue</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-06.png" alt="img"></p>
<ul>
<li>å› ä¸ºå…ƒç´ åœ¨å­˜æ”¾åˆ°å“ˆå¸Œæ¡¶ä¸Šæ—¶ï¼Œå¯èƒ½å‘ç”Ÿä¸‹æ ‡ç´¢å¼•è†¨èƒ€ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æŠŠæ¯ä¸€ä¸ªå…ƒç´ éƒ½è®¾å®šæˆä¸€ä¸ª Node èŠ‚ç‚¹ï¼Œè¿™äº›èŠ‚ç‚¹é€šè¿‡ LinkedList é“¾è¡¨å…³è”ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡ Node èŠ‚ç‚¹æ„å»ºå‡ºé“¾è¡¨ next å…ƒç´ å³å¯ã€‚</li>
<li>é‚£ä¹ˆè¿™æ—¶å€™åœ¨å‘ç”Ÿå…ƒç´ ç¢°æ’ï¼Œç›¸åŒä½ç½®çš„å…ƒç´ å°±éƒ½è¢«å­˜æ”¾åˆ°é“¾è¡¨ä¸Šäº†ï¼Œè·å–çš„æ—¶å€™éœ€è¦å¯¹å­˜æ”¾å¤šä¸ªå…ƒç´ çš„é“¾è¡¨è¿›è¡Œéå†è·å–ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap02</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap02BySeparateChaining</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;05&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-07.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">07</span>:<span class="number">21</span>:<span class="number">16.654</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">22</span>:<span class="number">44.651</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æ­¤æ—¶ç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡è·å– 01 ä½ç½®çš„å…ƒç´ å°±éƒ½æ˜¯ <code>èŠ±èŠ±</code> äº†ï¼Œå…ƒç´ æ²¡æœ‰è¢«æ›¿ä»£ã€‚å› ä¸ºæ­¤æ—¶çš„å…ƒç´ æ˜¯è¢«å­˜æ”¾åˆ°é“¾è¡¨ä¸Šäº†ã€‚</li>
</ul>
<h3 id="-6"><a class="markdownIt-Anchor" href="#-6">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#_3-%E5%BC%80%E6%94%BE%E5%AF%BB%E5%9D%80">#</a>3. å¼€æ”¾å¯»å€</h3>
<p><strong>è¯´æ˜</strong>ï¼šé™¤äº†å¯¹å“ˆå¸Œæ¡¶ä¸Šç¢°æ’çš„ç´¢å¼•å…ƒç´ è¿›è¡Œæ‹‰é“¾å­˜æ”¾ï¼Œè¿˜æœ‰ä¸å¼•å…¥æ–°çš„é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œåªæ˜¯åœ¨å“ˆå¸Œæ¡¶ä¸Šå­˜æ”¾ç¢°æ’å…ƒç´ çš„æ–¹å¼ã€‚å®ƒå«å¼€æ”¾å¯»å€ï¼Œä¹Ÿå°±æ˜¯ ThreaLocal ä¸­è¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ— + å¼€æ”¾å¯»å€çš„å¤„ç†æ–¹å¼ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HashMap03ByOpenAddressing</span>&lt;K, V&gt; <span class="keyword">implements</span> <span class="title class_">Map</span>&lt;K, V&gt; &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Node&lt;K, V&gt;[] tab = <span class="keyword">new</span> <span class="title class_">Node</span>[<span class="number">8</span>];</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (tab[idx] == <span class="literal">null</span>) &#123;</span><br><span class="line">            tab[idx] = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; tab.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (tab[i] == <span class="literal">null</span>) &#123;</span><br><span class="line">                    tab[i] = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(key, value);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">idx</span> <span class="operator">=</span> key.hashCode() &amp; (tab.length - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> idx; i &lt; tab.length; i ++)&#123;</span><br><span class="line">            <span class="keyword">if</span> (tab[idx] != <span class="literal">null</span> &amp;&amp; tab[idx].key == key) &#123;</span><br><span class="line">                <span class="keyword">return</span> tab[idx].value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K, V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> K key;</span><br><span class="line">        V value;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">            <span class="built_in">this</span>.key = key;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-08.png" alt="img"></p>
<ul>
<li>å¼€æ”¾å¯»å€çš„è®¾è®¡ä¼šå¯¹ç¢°æ’çš„å…ƒç´ ï¼Œå¯»æ‰¾å“ˆå¸Œæ¡¶ä¸Šæ–°çš„ä½ç½®ï¼Œè¿™ä¸ªä½ç½®ä»å½“å‰ç¢°æ’ä½ç½®å¼€å§‹å‘åå¯»æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°ç©ºçš„ä½ç½®å­˜æ”¾ã€‚</li>
<li>åœ¨ ThreadLocal çš„å®ç°ä¸­ä¼šä½¿ç”¨æ–æ³¢é‚£å¥‘æ•£åˆ—ã€ç´¢å¼•è®¡ç®—ç´¯åŠ ã€å¯å‘å¼æ¸…ç†ã€æ¢æµ‹å¼æ¸…ç†ç­‰æ“ä½œï¼Œä»¥ä¿è¯å°½å¯èƒ½å°‘çš„ç¢°æ’ã€‚</li>
</ul>
<p><strong>æµ‹è¯•</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_hashMap03</span><span class="params">()</span> &#123;</span><br><span class="line">    Map&lt;String, String&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap03ByOpenAddressing</span>&lt;&gt;();</span><br><span class="line">    map.put(<span class="string">&quot;01&quot;</span>, <span class="string">&quot;èŠ±èŠ±&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;05&quot;</span>, <span class="string">&quot;è±†è±†&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">    <span class="comment">// ä¸‹æ ‡ç¢°æ’</span></span><br><span class="line">    map.put(<span class="string">&quot;09&quot;</span>, <span class="string">&quot;è›‹è›‹&quot;</span>);</span><br><span class="line">    map.put(<span class="string">&quot;12&quot;</span>, <span class="string">&quot;è‹—è‹—&quot;</span>);</span><br><span class="line">    logger.info(<span class="string">&quot;ç¢°æ’å‰ keyï¼š&#123;&#125; valueï¼š&#123;&#125;&quot;</span>, <span class="string">&quot;01&quot;</span>, map.get(<span class="string">&quot;01&quot;</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220824-09.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.382</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.387</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - ç¢°æ’å‰ keyï¼š<span class="number">01</span> valueï¼šèŠ±èŠ±</span><br><span class="line"><span class="number">07</span>:<span class="number">20</span>:<span class="number">22.387</span> [main] INFO cn.bugstack.algorithms.test.AlgorithmsTest - æ•°æ®ç»“æ„ï¼šHashMap&#123;tab=[<span class="literal">null</span>,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;01&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;èŠ±èŠ±&quot;</span>&#125;,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;09&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è›‹è›‹&quot;</span>&#125;,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;12&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è‹—è‹—&quot;</span>&#125;,<span class="literal">null</span>,&#123;<span class="string">&quot;key&quot;</span>:<span class="string">&quot;05&quot;</span>,<span class="string">&quot;value&quot;</span>:<span class="string">&quot;è±†è±†&quot;</span>&#125;,<span class="literal">null</span>,<span class="literal">null</span>]&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>é€šè¿‡æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå¼€æ”¾å¯»å€å¯¹ç¢°æ’å…ƒç´ çš„å¯»å€å­˜æ”¾ï¼Œä¹Ÿæ˜¯å¯ç”¨è§£å†³å“ˆå¸Œç´¢å¼•å†²çªé—®é¢˜çš„ã€‚</li>
</ul>
<h2 id="-7"><a class="markdownIt-Anchor" href="#-7">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-08-27-hash-table.html#%E5%9B%9B%E3%80%81%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98">#</a>å››ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<ul>
<li>
<p>ä»‹ç»ä¸€ä¸‹æ•£åˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨ï¼ˆHash Tableï¼‰æ˜¯ä¸€ç§åŸºäºå“ˆå¸Œå‡½æ•°è¿›è¡Œå¿«é€Ÿè®¿é—®çš„æ•°æ®ç»“æ„ï¼Œå…·æœ‰æé«˜çš„æŸ¥è¯¢å’Œæ’å…¥æ•ˆç‡ã€‚å®ƒçš„åŸºæœ¬æ€æƒ³æ˜¯å°†è¦å­˜å‚¨çš„æ•°æ®å…ƒç´ é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°ä¸€ä¸ªå›ºå®šçš„ä½ç½®ä¸Šï¼Œç„¶ååœ¨è¯¥ä½ç½®ä¸Šè¿›è¡ŒæŸ¥æ‰¾æˆ–æ’å…¥æ“ä½œ</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨æ•£åˆ—è¡¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨ä¹‹æ‰€ä»¥è¢«å¹¿æ³›ä½¿ç”¨ï¼Œæ˜¯å› ä¸ºå®ƒå¯ä»¥æ”¯æŒå¸¸æ•°çº§åˆ«çš„æŸ¥è¯¢ã€æ’å…¥å’Œåˆ é™¤æ“ä½œï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆäºå¤„ç†å¤§è§„æ¨¡æ•°æ®å’Œå®æ—¶æ•°æ®çš„åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œåœ¨æœç´¢å¼•æ“ä¸­ï¼Œéœ€è¦å¯¹æ•°åäº¿æ¡æ•°æ®è¿›è¡Œå¿«é€Ÿæ£€ç´¢ï¼Œæ•£åˆ—è¡¨å°±æ˜¯ä¸€ç§å¾ˆå¥½çš„é€‰æ‹©ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>æ‹‰é“¾å¯»å€å’Œå¼€æ”¾å¯»å€çš„åŒºåˆ«</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•£åˆ—è¡¨çš„ä¸»è¦é—®é¢˜æ˜¯å“ˆå¸Œå†²çªï¼Œåœ¨ä¸åŒçš„é”®è¢«æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®ä¸Šæ—¶ï¼Œå°±ä¼šäº§ç”Ÿå“ˆå¸Œå†²çªã€‚ä¸ºäº†è§£å†³å“ˆå¸Œå†²çªï¼Œå¸¸è§çš„æ–¹æ³•æœ‰æ‹‰é“¾æ³•å’Œå¼€æ”¾å¯»å€ã€‚</span><br><span class="line"></span><br><span class="line">æ‹‰é“¾æ³•æ˜¯æŒ‡åœ¨å“ˆå¸Œè¡¨ä¸­çš„æ¯ä¸ªä½ç½®ä¸Šç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œå½“å¤šä¸ªé”®æ˜ å°„åˆ°åŒä¸€ä¸ªä½ç½®æ—¶ï¼Œå®ƒä»¬ä¼šè¢«ä¿å­˜åœ¨è¯¥ä½ç½®å¯¹åº”çš„é“¾è¡¨ä¸Šã€‚æŸ¥æ‰¾æŸä¸ªé”®æ—¶ï¼Œå…ˆæ ¹æ®å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºè¯¥é”®åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œç„¶ååœ¨è¯¥ä½ç½®å¯¹åº”çš„é“¾è¡¨ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚</span><br><span class="line"></span><br><span class="line">å¼€æ”¾å¯»å€æ˜¯æŒ‡å½“å‘ç”Ÿå“ˆå¸Œå†²çªæ—¶ï¼Œé€šè¿‡æ¢æµ‹ï¼ˆprobingï¼‰å¯»æ‰¾å“ˆå¸Œè¡¨ä¸­ä¸‹ä¸€ä¸ªç©ºçš„ä½ç½®ï¼Œç›´åˆ°æ‰¾åˆ°å¯ä»¥å­˜å‚¨è¯¥é”®çš„ä½ç½®æˆ–è€…éå†äº†æ•´ä¸ªå“ˆå¸Œè¡¨ã€‚å…·ä½“çš„æ¢æµ‹æ–¹æ³•åŒ…æ‹¬çº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹ã€åŒé‡å“ˆå¸Œç­‰ã€‚æŸ¥æ‰¾æŸä¸ªé”®æ—¶ï¼Œè®¡ç®—è¯¥é”®åœ¨å“ˆå¸Œè¡¨ä¸­çš„ä½ç½®ï¼Œå¹¶åœ¨è¯¥ä½ç½®åŠå…¶åç»­ä½ç½®ä¸Šè¿›è¡ŒæŸ¥æ‰¾ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>è¿˜æœ‰å…¶ä»–ä»€ä¹ˆæ–¹å¼å¯ä»¥è§£å†³æ•£åˆ—å“ˆå¸Œç´¢å¼•å†²çª</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šé™¤äº†æ‹‰é“¾æ³•å’Œå¼€æ”¾å¯»å€ï¼Œè¿˜æœ‰ä¸€äº›å…¶ä»–æ–¹å¼å¯ä»¥è§£å†³å“ˆå¸Œå†²çªï¼Œå¦‚å†å“ˆå¸Œæ³•ã€å»ºç«‹å…¬å…±æº¢å‡ºåŒºç­‰ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>å¯¹åº”çš„ Java æºç ä¸­ï¼Œå¯¹äºå“ˆå¸Œç´¢å¼•å†²çªæä¾›äº†ä»€ä¹ˆæ ·çš„è§£å†³æ–¹æ¡ˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šåœ¨ Java ä¸­ï¼Œå¯¹äºå“ˆå¸Œç´¢å¼•å†²çªï¼Œä¸€èˆ¬ä½¿ç”¨æ‹‰é“¾æ³•æ¥å¤„ç†ã€‚Java çš„ HashMap å’Œ Hashtable éƒ½é‡‡ç”¨äº†æ‹‰é“¾æ³•ï¼Œå¹¶æ”¯æŒåŠ¨æ€æ‰©å®¹å’Œç¼©å®¹ï¼Œä»¥é€‚åº”ä¸åŒçš„æ•°æ®è§„æ¨¡ã€‚åŒæ—¶ï¼Œä¸ºäº†æé«˜æŸ¥è¯¢æ•ˆç‡ï¼Œåœ¨ Java 8 ä¸­ï¼ŒHashMap è¿˜å¼•å…¥äº†çº¢é»‘æ ‘ï¼Œç”¨äºä¼˜åŒ–é“¾è¡¨é•¿åº¦è¿‡é•¿çš„æƒ…å½¢ã€‚</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T07:53:40.000Z" title="2023/5/6 15:53:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-06T09:24:20.297Z" title="2023/5/6 17:24:20">2023-05-06</time>æ›´æ–°</span><span class="level-item">18 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2733ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0ArrayList/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°ArrayList</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°arraylist"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°arraylist">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° ArrayList</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<h3 id="æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹"><a class="markdownIt-Anchor" href="#æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹">#</a> æ•°ç»„æ˜¯æ•°æ®ç»“æ„è¿˜æ˜¯æ•°æ®ç±»å‹ï¼Ÿ</h3>
<p>æ•°ç»„åªæ˜¯ä¸ªåç§°ï¼Œå®ƒå¯ä»¥æè¿°ä¸€ç»„æ“ä½œï¼Œä¹Ÿå¯ä»¥å‘½åè¿™ç»„æ“ä½œã€‚æ•°ç»„çš„æ•°æ®æ“ä½œï¼Œæ˜¯é€šè¿‡ idx-&gt;val çš„æ–¹å¼æ¥å¤„ç†ã€‚å®ƒä¸æ˜¯å…·ä½“è¦æ±‚å†…å­˜ä¸Šè¦å­˜å‚¨ç€è¿ç»­çš„æ•°æ®æ‰å«æ•°ç»„ï¼Œè€Œæ˜¯è¯´ï¼Œé€šè¿‡è¿ç»­çš„ç´¢å¼• idxï¼Œä¹Ÿå¯ä»¥çº¿æ€§è®¿é—®ç›¸é‚»çš„æ•°æ®ã€‚</p>
<p>é‚£ä¹ˆå½“ä½ å®šä¹‰äº†æ•°æ®çš„å­˜å‚¨æ–¹å¼ï¼Œä¹Ÿå°±å®šä¹‰äº†æ•°æ®ç»“æ„ã€‚æ‰€ä»¥å®ƒä¹Ÿæ˜¯è¢«å½’ç±»ä¸ºæ•°æ®ç»“æ„ã€‚</p>
<h2 id=""><a class="markdownIt-Anchor" href="#">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#%E4%BA%8C%E3%80%81%E6%95%B0%E7%BB%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">#</a>äºŒã€æ•°ç»„æ•°æ®ç»“æ„</h2>
<p>æ•°ç»„ï¼ˆArrayï¼‰æ˜¯ä¸€ç§çº¿æ€§è¡¨æ•°æ®ç»“æ„ã€‚å®ƒç”¨ä¸€ç»„è¿ç»­çš„å†…å­˜ç©ºé—´ï¼Œæ¥å­˜å‚¨ä¸€ç»„å…·æœ‰ç›¸åŒç±»å‹æ•°æ®çš„é›†åˆã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-01.png" alt="img"></p>
<p>æ•°ç»„çš„ç‰¹ç‚¹ï¼š</p>
<ol>
<li>æ•°ç»„æ˜¯ç›¸åŒæ•°æ®ç±»å‹çš„å…ƒç´ é›†åˆï¼ˆint ä¸èƒ½å­˜æ”¾ doubleï¼‰</li>
<li>æ•°ç»„ä¸­å„å…ƒç´ çš„å­˜å‚¨æ˜¯æœ‰å…ˆåé¡ºåºçš„ï¼Œå®ƒä»¬åœ¨å†…å­˜ä¸­æŒ‰ç…§è¿™ä¸ªé¡ºåºè¿ç»­å­˜æ”¾åˆ°ä¸€èµ·ã€‚å†…å­˜åœ°å€è¿ç»­ã€‚</li>
<li>æ•°ç»„è·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¸º O (1)</li>
</ol>
<h3 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_1-%E4%B8%80%E7%BB%B4%E6%95%B0%E7%BB%84">#</a>1. ä¸€ç»´æ•°ç»„</h3>
<p>ä¸€ç»´æ•°ç»„æ˜¯æœ€å¸¸ç”¨çš„æ•°ç»„ï¼Œå…¶ä»–å¾ˆå¤šæ•°æ®ç»“æ„çš„å˜ç§ä¹Ÿéƒ½æ˜¯ä»ä¸€ç»´æ•°ç»„æ¥çš„ã€‚ä¾‹å¦‚ HashMap çš„æ‹‰é“¾å¯»å€ç»“æ„ï¼ŒThreadLocal çš„å¼€æ”¾å¯»å€ç»“æ„ï¼Œéƒ½æ˜¯ä»ä¸€ç»´æ•°ç»„ä¸Šå®ç°çš„ã€‚</p>
<h3 id="-3"><a class="markdownIt-Anchor" href="#-3">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_2-%E4%BA%8C%E7%BB%B4%E6%95%B0%E7%BB%84">#</a>2. äºŒç»´æ•°ç»„</h3>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-02.png" alt="img"></p>
<p>äºŒç»´ä»¥åŠå¤šç»´æ•°ç»„ï¼Œåœ¨å¼€å‘åœºæ™¯ä¸­ä½¿ç”¨åˆ°çš„åˆ°æ˜¯ä¸å¤šï¼Œä¸è¿‡åœ¨ä¸€äº›ç®—æ³•é€»è¾‘ï¼Œæ•°å­¦è®¡ç®—ä¸­åˆ°æ˜¯å¯ä»¥ä½¿ç”¨ã€‚</p>
<h2 id="-4"><a class="markdownIt-Anchor" href="#-4">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#%E4%B8%89%E3%80%81%E5%AE%9E%E7%8E%B0%E6%95%B0%E7%BB%84%E5%88%97%E8%A1%A8">#</a>ä¸‰ã€å®ç°æ•°ç»„åˆ—è¡¨</h2>
<p>åœ¨ Java çš„æºç ä¸­ï¼Œæ•°ç»„æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå¾ˆå¤šå…¶ä»–æ•°æ®ç»“æ„ä¹Ÿéƒ½æœ‰æ•°ç»„çš„å½±å­ã€‚</p>
<h3 id="-5"><a class="markdownIt-Anchor" href="#-5">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_1-%E5%9F%BA%E6%9C%AC%E8%AE%BE%E8%AE%A1">#</a>1. åŸºæœ¬è®¾è®¡</h3>
<p>æ•°ç»„æ˜¯ä¸€ä¸ªå›ºå®šçš„ã€è¿ç»­çš„ã€çº¿æ€§çš„æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆæƒ³æŠŠå®ƒä½œä¸ºä¸€ä¸ªè‡ªåŠ¨æ‰©å±•å®¹é‡çš„æ•°ç»„åˆ—è¡¨ï¼Œåˆ™éœ€è¦åšä¸€äº›æ‰©å±•ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * é»˜è®¤åˆå§‹åŒ–ç©ºé—´</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">DEFAULT_CAPACITY</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ç©ºå…ƒç´ </span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = &#123;&#125;;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * ArrayList å…ƒç´ æ•°ç»„ç¼“å­˜åŒº</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">transient</span> Object[] elementData;</span><br></pre></td></tr></table></figure>
<ol>
<li>åˆå§‹åŒ– ArrayList é˜¶æ®µï¼Œå¦‚æœä¸æŒ‡å®šå¤§å°ï¼Œé»˜è®¤ä¼šåˆå§‹åŒ–ä¸€ä¸ªç©ºçš„å…ƒç´ ã€‚è¿™ä¸ªæ—¶å€™æ˜¯æ²¡æœ‰é»˜è®¤é•¿åº¦çš„ã€‚</li>
<li>é‚£ä¹ˆä»€ä¹ˆæ—¶å€™ç»™åˆå§‹åŒ–çš„é•¿åº¦å‘¢ï¼Ÿæ˜¯åœ¨é¦–æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ï¼Œå› ä¸ºæ‰€æœ‰çš„æ·»åŠ å…ƒç´ æ“ä½œï¼Œä¹Ÿéƒ½æ˜¯éœ€è¦åˆ¤æ–­å®¹é‡ï¼Œä»¥åŠæ˜¯å¦æ‰©å®¹çš„ã€‚é‚£ä¹ˆåœ¨ add æ·»åŠ å…ƒç´ æ—¶ç»Ÿä¸€å®Œæˆè¿™ä¸ªäº‹æƒ…ï¼Œè¿˜æ˜¯æ¯”è¾ƒå¥½å¤„ç†çš„ã€‚</li>
<li>ä¹‹åå°±æ˜¯éšç€å…ƒç´ çš„æ·»åŠ ï¼Œå®¹é‡æ˜¯ä¼šä¸è¶³çš„ã€‚å½“å®¹é‡ä¸è¶³çš„æ˜¯ï¼Œéœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚åŒæ—¶è¿˜å¾—éœ€è¦æŠŠæ—§æ•°æ®è¿ç§»åˆ°æ–°çš„æ•°ç»„ä¸Šã€‚<em>æ‰€ä»¥æ•°æ®çš„è¿ç§»ç®—æ˜¯ä¸€ä¸ªæ¯”è¾ƒè€—æ—¶çš„æ“ä½œ</em></li>
</ol>
<h3 id="-6"><a class="markdownIt-Anchor" href="#-6">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_2-%E6%B7%BB%E5%8A%A0%E5%85%83%E7%B4%A0">#</a>2. æ·»åŠ å…ƒç´ </h3>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-03.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">add</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="comment">// ç¡®ä¿å†…éƒ¨å®¹é‡</span></span><br><span class="line">    <span class="type">int</span> <span class="variable">minCapacity</span> <span class="operator">=</span> size + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;</span><br><span class="line">        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ‰©å®¹æ“ä½œ</span></span><br><span class="line">    <span class="keyword">if</span> (minCapacity - elementData.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">oldCapacity</span> <span class="operator">=</span> elementData.length;</span><br><span class="line">        <span class="type">int</span> <span class="variable">newCapacity</span> <span class="operator">=</span> oldCapacity + (oldCapacity &gt;&gt; <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (newCapacity - minCapacity &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            newCapacity = minCapacity;</span><br><span class="line">        &#125;</span><br><span class="line">        elementData = Arrays.copyOf(elementData, newCapacity);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    elementData[size++] = e;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>è¿™æ˜¯ä¸€ä»½ç®€åŒ–åçš„ ArrayList#add æ“ä½œ</strong></p>
<ol>
<li>åˆ¤æ–­å½“å‰å®¹é‡ä¸åˆå§‹åŒ–å®¹é‡ï¼Œä½¿ç”¨ Math.max å‡½æ•°å–æœ€å¤§å€¼æœ€ä¸ºæœ€å°åˆå§‹åŒ–ç©ºé—´ã€‚</li>
<li>æ¥ä¸‹æ¥æ˜¯åˆ¤æ–­ minCapacity å’Œå…ƒç´ çš„æ•°é‡ï¼Œæ˜¯å¦è¾¾åˆ°äº†æ‰©å®¹ã€‚é¦–æ¬¡åˆ›å»º ArrayList æ˜¯ä¸€å®šä¼šæ‰©å®¹çš„ï¼Œä¹Ÿå°±æ˜¯åˆå§‹åŒ– DEFAULT_CAPACITY = 10 çš„å®¹é‡ã€‚</li>
<li>Arrays.copyOf å®é™…ä¸Šæ˜¯åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºé—´æ•°ç»„ï¼Œä¹‹åè°ƒç”¨çš„ System.arraycopy è¿ç§»åˆ°æ–°åˆ›å»ºçš„æ•°ç»„ä¸Šã€‚è¿™æ ·åç»­æ‰€æœ‰çš„æ‰©å®¹æ“ä½œï¼Œä¹Ÿå°±éƒ½ä¿æŒç»Ÿä¸€äº†ã€‚</li>
<li>ArrayList æ‰©å®¹å®Œæˆåï¼Œå°±æ˜¯ä½¿ç”¨ elementData [size++] = e; æ·»åŠ å…ƒç´ æ“ä½œäº†ã€‚</li>
</ol>
<h3 id="-7"><a class="markdownIt-Anchor" href="#-7">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_3-%E7%A7%BB%E9%99%A4%E5%85%83%E7%B4%A0">#</a>3. ç§»é™¤å…ƒç´ </h3>
<p>ArrayList çš„é‡ç‚¹ç¦»ä¸å¼€å¯¹ System.arraycopy çš„ä½¿ç”¨ï¼Œå®ƒæ˜¯ä¸€ä¸ªæœ¬åœ°æ–¹æ³•ï¼Œå¯ä»¥è®©ä½ ä»åŸæ•°ç»„çš„ç‰¹å®šä½ç½®ï¼Œè¿ç§»åˆ°æ–°æ•°ç»„çš„æŒ‡å®šä½ç½®å’Œè¿ç§»æ•°é‡ã€‚å¦‚å›¾ 2-5 æ‰€ç¤ºï¼Œæ•°æ®è¿ç§» <em>æµ‹è¯•ä»£ç åœ¨ java-algorithms</em></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-05.png" alt="img"></p>
<p><strong>åˆ é™¤å…ƒç´ </strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">remove</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="type">E</span> <span class="variable">oldValue</span> <span class="operator">=</span> (E) elementData[index];</span><br><span class="line">    <span class="type">int</span> <span class="variable">numMoved</span> <span class="operator">=</span> size - index - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (numMoved &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// ä»åŸå§‹æ•°ç»„çš„æŸä¸ªä½ç½®ï¼Œæ‹·è´åˆ°ç›®æ ‡å¯¹è±¡çš„æŸä¸ªä½ç½®å¼€å§‹ånä¸ªå…ƒç´ </span></span><br><span class="line">        System.arraycopy(elementData, index + <span class="number">1</span>, elementData, index, numMoved);</span><br><span class="line">    &#125;</span><br><span class="line">    elementData[--size] = <span class="literal">null</span>; <span class="comment">// clear to let GC do its work</span></span><br><span class="line">    <span class="keyword">return</span> oldValue;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>ArrayList çš„å…ƒç´ åˆ é™¤ï¼Œå°±æ˜¯åœ¨ç¡®å®šå‡ºå…ƒç´ ä½ç½®åï¼Œä½¿ç”¨ System.arraycopy æ‹·è´æ•°æ®æ–¹å¼ç§»åŠ¨æ•°æ®ï¼ŒæŠŠéœ€è¦åˆ é™¤çš„å…ƒç´ ä½ç½®è¦†ç›–æ‰ã€‚</li>
<li>æ­¤å¤–å®ƒè¿˜ä¼šæŠŠå·²ç»åˆ é™¤çš„å…ƒç´ è®¾ç½®ä¸º null ä¸€æ–¹é¢è®©æˆ‘ä»¬ä¸ä¼šåœ¨è¯»å–åˆ°è¿™ä¸ªå…ƒç´ ï¼Œå¦å¤–ä¸€æ–¹é¢ä¹Ÿæ˜¯ä¸ºäº† GC</li>
</ul>
<h3 id="-8"><a class="markdownIt-Anchor" href="#-8">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#_4-%E8%8E%B7%E5%8F%96%E5%85%83%E7%B4%A0">#</a>4. è·å–å…ƒç´ </h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> E <span class="title function_">get</span><span class="params">(<span class="type">int</span> index)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (E) elementData[index];</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;ArrayList&#123;&quot;</span> +</span><br><span class="line">            <span class="string">&quot;elementData=&quot;</span> + Arrays.toString(elementData) +</span><br><span class="line">            <span class="string">&quot;, size=&quot;</span> + size +</span><br><span class="line">            <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">&#125;   </span><br></pre></td></tr></table></figure>
<ul>
<li>è·å–å…ƒç´ å°±æ¯”è¾ƒç®€å•äº†ï¼Œç›´æ¥ä» elementData ä½¿ç”¨ç´¢å¼•ç›´æ¥è·å–å³å¯ã€‚è¿™ä¸ªæ˜¯ä¸€ä¸ª O (1) æ“ä½œã€‚ä¹Ÿæ­£å› ä¸ºæœç´¢å…ƒç´ çš„ä¾¿æ·æ€§ï¼Œæ‰è®© ArrayList ä½¿ç”¨çš„é‚£ä¹ˆå¹¿æ³›ã€‚åŒæ—¶ä¸ºäº†å…¼å®¹å¯ä»¥é€šè¿‡å…ƒç´ æ¥è·å–æ•°æ®ï¼Œè€Œä¸æ˜¯ç›´æ¥é€šè¿‡ä¸‹æ ‡ï¼Œå¼•å‡ºäº† HashMap ä½¿ç”¨å“ˆå¸Œå€¼è®¡ç®—ä¸‹æ ‡çš„è®¡ç®—æ–¹å¼ï¼Œä¹Ÿå¼•å‡ºäº†æ–æ³¢é‚£å¥‘æ•£åˆ—ã€‚å®ƒä»¬çš„è®¾è®¡éƒ½æ˜¯åœ¨å°½å¯èƒ½å‡å°‘å…ƒç´ ç¢°æ’çš„æƒ…å†µä¸‹ï¼Œå°½å¯èƒ½ä½¿ç”¨è´´è¿‘ O (1) çš„æ—¶é—´å¤æ‚åº¦è·å–æ•°æ®ã€‚<em>è¿™äº›å†…å®¹çš„å­¦ä¹ å¯ä»¥é˜…è¯»å°å‚…å“¥çš„ã€ŠJava é¢ç»æ‰‹å†Œã€‹ä¹Ÿå¯ä»¥éšç€æœ¬ç³»åˆ—ç« èŠ‚å†…å®¹çš„é“ºè®¾é€æ­¥è¦†ç›–åˆ°ç®—æ³•åè¿›è¡Œå­¦ä¹ </em></li>
</ul>
<h2 id="-9"><a class="markdownIt-Anchor" href="#-9">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#%E5%9B%9B%E3%80%81%E6%95%B0%E7%BB%84%E5%88%97%E8%A1%A8%E6%B5%8B%E8%AF%95">#</a>å››ã€æ•°ç»„åˆ—è¡¨æµ‹è¯•</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">test_array_list</span><span class="params">()</span> &#123;</span><br><span class="line">    cn.bugstack.algorithms.data.array.List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    list.add(<span class="string">&quot;01&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;02&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;03&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;04&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;05&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;06&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;07&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;08&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;09&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;10&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;11&quot;</span>);</span><br><span class="line">    list.add(<span class="string">&quot;12&quot;</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(list);</span><br><span class="line">    </span><br><span class="line">    list.remove(<span class="number">9</span>);</span><br><span class="line">    </span><br><span class="line">    System.out.println(list);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220730-06.png" alt="img"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&#123;elementData=[<span class="number">01</span>, <span class="number">02</span>, <span class="number">03</span>, <span class="number">04</span>, <span class="number">05</span>, <span class="number">06</span>, <span class="number">07</span>, 08, 09, <span class="number">10</span>, <span class="number">11</span>, <span class="number">12</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>], size=<span class="number">12</span>&#125;</span><br><span class="line">ArrayList&#123;elementData=[<span class="number">01</span>, <span class="number">02</span>, <span class="number">03</span>, <span class="number">04</span>, <span class="number">05</span>, <span class="number">06</span>, <span class="number">07</span>, 08, 09, <span class="number">11</span>, <span class="number">12</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>, <span class="literal">null</span>], size=<span class="number">11</span>&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æµ‹è¯•æ¡ˆä¾‹ä¸­åŒ…æ‹¬äº†åœ¨æˆ‘ä»¬è‡ªå·±å®ç°çš„ ArrayList ä¸­é¡ºåºæ·»åŠ å…ƒç´ ï¼Œé€æ­¥æµ‹è¯•æ‰©å®¹è¿ç§»å…ƒç´ ï¼Œä»¥åŠåˆ é™¤å…ƒç´ åæ•°æ®çš„è¿ç§»ã€‚</li>
<li>æœ€ç»ˆçš„æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œä¸€å…±æœ‰ 12 ä¸ªå…ƒç´ ï¼Œå…¶ä¸­ idx=9 çš„å…ƒç´ è¢«åˆ é™¤å‰åï¼Œå…ƒç´ çš„è¿ç§»å˜åŒ–ã€‚</li>
</ul>
<h2 id="-10"><a class="markdownIt-Anchor" href="#-10">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-30-array-list.html#%E5%85%AD%E3%80%81%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98">#</a>å…­ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<p>æ•°æ®ç»“æ„ä¸­æœ‰å“ªäº›æ˜¯çº¿æ€§è¡¨æ•°æ®ç»“æ„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šçº¿æ€§è¡¨æ•°æ®ç»“æ„æ˜¯æŒ‡ä¸€ç§ç‰¹æ®Šçš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­æ•°æ®å…ƒç´ ä¹‹é—´å­˜åœ¨çº¿æ€§å…³ç³»ã€‚å¸¸è§çš„çº¿æ€§è¡¨æ•°æ®ç»“æ„åŒ…æ‹¬ï¼šæ•°ç»„ã€é“¾è¡¨ã€æ ˆå’Œé˜Ÿåˆ—ç­‰ã€‚</span><br></pre></td></tr></table></figure>
<p>æ•°ç»„çš„å…ƒç´ åˆ é™¤å’Œè·å–ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šæ•°ç»„çš„å…ƒç´ åˆ é™¤å’Œè·å–çš„æ—¶é—´å¤æ‚åº¦å‡ä¸ºO(1)ï¼Œå› ä¸ºæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯è¿ç»­å­˜å‚¨çš„ï¼Œå¹¶ä¸”å¯ä»¥é€šè¿‡ä¸‹æ ‡ç›´æ¥è®¿é—®å…ƒç´ ã€‚åˆ é™¤æ“ä½œé€šå¸¸æ˜¯å°†å¾…åˆ é™¤å…ƒç´ åé¢çš„æ‰€æœ‰å…ƒç´ å‘å‰ç§»åŠ¨ä¸€ä½ï¼Œç„¶åå°†æ•°ç»„é•¿åº¦å‡ä¸€ï¼›è·å–æ“ä½œåˆ™æ˜¯ç›´æ¥è¿”å›å¯¹åº”ä¸‹æ ‡çš„å…ƒç´ å€¼ã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList ä¸­é»˜è®¤çš„åˆå§‹åŒ–é•¿åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šArrayList ä¸­é»˜è®¤çš„åˆå§‹åŒ–é•¿åº¦æ˜¯10ã€‚åœ¨åˆ›å»ºä¸€ä¸ªæ–°çš„ ArrayList å¯¹è±¡æ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šåˆå§‹å®¹é‡ï¼Œé‚£ä¹ˆå°±ä¼šä½¿ç”¨é»˜è®¤å®¹é‡ 10 åˆ›å»ºä¸€ä¸ªç©ºæ•°ç»„ã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList ä¸­æ‰©å®¹çš„èŒƒå›´æ˜¯å¤šå¤§ä¸€æ¬¡ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼šArrayList ä¸­æ‰©å®¹çš„èŒƒå›´æ˜¯æ¯æ¬¡å¢åŠ åŸæ¥æ•°ç»„å¤§å°çš„ä¸€åŠã€‚å½“ ArrayList å®¹é‡ä¸è¶³ä»¥å®¹çº³æ›´å¤šå…ƒç´ æ—¶ï¼Œå°±ä¼šè‡ªåŠ¨è¿›è¡Œæ‰©å®¹æ“ä½œã€‚å…·ä½“æ¥è¯´ï¼ŒArrayList æ‰©å®¹æ—¶ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå…¶å¤§å°ä¸ºåŸæ¥æ•°ç»„å¤§å°çš„ 1.5 å€ï¼Œç„¶åå°†åŸæ¥æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚è¯¥æ‰©å®¹ç­–ç•¥å¯ä»¥ä¿è¯ ArrayList åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹éƒ½åªéœ€è¦è¿›è¡Œå°‘æ•°å‡ æ¬¡æ‰©å®¹æ“ä½œã€‚</span><br></pre></td></tr></table></figure>
<p>ArrayList æ˜¯å¦‚ä½•å®Œæˆæ‰©å®¹çš„ï¼ŒSystem.arraycopy å„ä¸ªå…¥å‚çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">ArrayList æ˜¯é€šè¿‡ System.arraycopy() æ–¹æ³•å®Œæˆæ‰©å®¹æ“ä½œçš„ã€‚å…·ä½“å®ç°è¿‡ç¨‹å¦‚ä¸‹ï¼š</span><br><span class="line"></span><br><span class="line">1.å½“æ·»åŠ æ–°å…ƒç´ æ—¶ï¼Œå¦‚æœå½“å‰å†…éƒ¨æ•°ç»„å·²ç»æ»¡äº†ï¼Œå°±éœ€è¦è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</span><br><span class="line">2.é¦–å…ˆè®¡ç®—å‡ºæ–°æ•°ç»„çš„å¤§å°ï¼Œå…¶å¤§å°ä¸ºåŸæœ‰æ•°ç»„å¤§å°çš„ 1.5 å€ã€‚</span><br><span class="line">3.åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œå¹¶å°†åŸæœ‰æ•°ç»„ä¸­çš„å…ƒç´ å¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ã€‚è¿™é‡Œä½¿ç”¨ System.arraycopy() æ–¹æ³•æ¥å®Œæˆå…ƒç´ çš„å¤åˆ¶æ“ä½œï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯åŸæ•°ç»„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯åŸæ•°ç»„ä¸­éœ€è¦å¤åˆ¶çš„èµ·å§‹ä½ç½®ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ•°ç»„ï¼Œç¬¬å››ä¸ªå‚æ•°æ˜¯ç›®æ ‡æ•°ç»„ä¸­å­˜æ”¾å¤åˆ¶æ•°æ®çš„èµ·å§‹ä½ç½®ï¼Œç¬¬äº”ä¸ªå‚æ•°æ˜¯éœ€è¦å¤åˆ¶çš„å…ƒç´ ä¸ªæ•°ã€‚</span><br><span class="line">4.æœ€åï¼Œå°† ArrayList çš„å†…éƒ¨æ•°ç»„è®¾ç½®ä¸ºæ–°æ•°ç»„ã€‚</span><br><span class="line"></span><br><span class="line">System.arraycopy() æ–¹æ³•å…·æœ‰è¾ƒé«˜çš„æ•ˆç‡ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥åˆ©ç”¨åº•å±‚ç³»ç»Ÿçº§åˆ«çš„å†…å­˜å¤åˆ¶æœºåˆ¶è¿›è¡Œæ•°æ®å¤åˆ¶ï¼Œé¿å…äº†é€šè¿‡å¾ªç¯é€ä¸ªå¤åˆ¶å…ƒç´ çš„ä½æ•ˆç‡é—®é¢˜ã€‚</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-06T05:53:40.000Z" title="2023/5/6 13:53:40">2023-05-06</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-06T09:23:38.451Z" title="2023/5/6 17:23:38">2023-05-06</time>æ›´æ–°</span><span class="level-item">18 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2638ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0LinkedList/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°LinkedList</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt=""></p>
<h1 id="æ•°æ®ç»“æ„æ‰‹å†™å®ç°linkedlist"><a class="markdownIt-Anchor" href="#æ•°æ®ç»“æ„æ‰‹å†™å®ç°linkedlist">#</a> ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç° LinkedList</h1>
<h2 id="ä¸€-å‰è¨€"><a class="markdownIt-Anchor" href="#ä¸€-å‰è¨€">#</a> ä¸€ã€å‰è¨€</h2>
<h4 id="é“¾è¡¨çš„å†å²"><a class="markdownIt-Anchor" href="#é“¾è¡¨çš„å†å²">#</a> é“¾è¡¨çš„å†å²</h4>
<p>äº 1955-1956 å¹´ï¼Œç”±å…°å¾·å…¬å¸çš„ Allen Newellã€Cliff Shaw å’Œ Herbert A. Simon å¼€å‘äº†é“¾è¡¨ï¼Œä½œä¸ºä»–ä»¬çš„ä¿¡æ¯å¤„ç†è¯­è¨€çš„ä¸»è¦æ•°æ®ç»“æ„ã€‚é“¾è¡¨çš„å¦ä¸€ä¸ªæ—©æœŸå‡ºç°æ˜¯ç”± Hans Peter Luhn åœ¨ 1953 å¹´ 1 æœˆç¼–å†™çš„ IBM å†…éƒ¨å¤‡å¿˜å½•å»ºè®®åœ¨é“¾å¼å“ˆå¸Œè¡¨ä¸­ä½¿ç”¨é“¾è¡¨ã€‚</p>
<p>åˆ° 1960 å¹´ä»£åˆï¼Œé“¾è¡¨å’Œä½¿ç”¨è¿™äº›ç»“æ„ä½œä¸ºä¸»è¦æ•°æ®è¡¨ç¤ºçš„è¯­è¨€çš„å®ç”¨æ€§å·²ç»å¾ˆå¥½åœ°å»ºç«‹èµ·æ¥ã€‚MIT æ—è‚¯å®éªŒå®¤çš„ Bert Green äº 1961 å¹´ 3 æœˆåœ¨ IRE Transactions on Human Factors in Electronics ä¸Šå‘è¡¨äº†ä¸€ç¯‡é¢˜ä¸º â€œç”¨äºç¬¦å·æ“ä½œçš„è®¡ç®—æœºè¯­è¨€â€ çš„è¯„è®ºæ–‡ç« ï¼Œæ€»ç»“äº†é“¾è¡¨æ–¹æ³•çš„ä¼˜ç‚¹ã€‚1964 å¹´ 4 æœˆï¼ŒBobrow å’Œ Raphael çš„ä¸€ç¯‡è¯„è®ºæ–‡ç«  â€œåˆ—è¡¨å¤„ç†è®¡ç®—æœºè¯­è¨€çš„æ¯”è¾ƒâ€ å‘è¡¨åœ¨ ACM é€šè®¯ä¸­ã€‚</p>
<h2 id=""><a class="markdownIt-Anchor" href="#">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#%E4%BA%8C%E3%80%81%E9%93%BE%E8%A1%A8%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84">#</a>äºŒã€é“¾è¡¨æ•°æ®ç»“æ„</h2>
<p>åœ¨è®¡ç®—æœºç§‘å­¦ä¸­ï¼Œé“¾è¡¨æ˜¯æ•°æ®å…ƒç´ çš„çº¿æ€§é›†åˆï¼Œå…ƒç´ çš„çº¿æ€§é¡ºåºä¸æ˜¯ç”±å®ƒä»¬åœ¨å†…å­˜ä¸­çš„ç‰©ç†åœ°å€ç»™å‡ºçš„ã€‚å®ƒæ˜¯ç”±ä¸€ç»„èŠ‚ç‚¹ç»„æˆçš„æ•°æ®ç»“æ„ï¼Œæ¯ä¸ªå…ƒç´ æŒ‡å‘ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œè¿™äº›èŠ‚ç‚¹ä¸€èµ·ï¼Œè¡¨ç¤ºçº¿æ€§åºåˆ—ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-01.png" alt="img"></p>
<p>åœ¨æœ€ç®€å•çš„é“¾è¡¨ç»“æ„ä¸‹ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç”±æ•°æ®å’ŒæŒ‡é’ˆï¼ˆå­˜æ”¾æŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼‰ä¸¤éƒ¨åˆ†ç»„æˆï¼Œè¿™ç§æ•°æ®ç»“æ„å…è®¸åœ¨è¿­ä»£æ—¶æœ‰æ•ˆåœ°ä»åºåˆ—ä¸­çš„ä»»ä½•ä½ç½®æ’å…¥æˆ–åˆ é™¤å…ƒç´ ã€‚</p>
<p>é“¾è¡¨çš„æ•°æ®ç»“æ„é€šè¿‡é“¾çš„è¿æ¥æ–¹å¼ï¼Œæä¾›äº†å¯ä»¥ä¸éœ€è¦æ‰©å®¹ç©ºé—´å°±æ›´é«˜æ•ˆçš„æ’å…¥å’Œåˆ é™¤å…ƒç´ çš„æ“ä½œï¼Œåœ¨é€‚åˆçš„åœºæ™¯ä¸‹å®ƒæ˜¯ä¸€ç§éå¸¸æ–¹ä¾¿çš„æ•°æ®ç»“æ„ã€‚ä½†åœ¨ä¸€äº›éœ€è¦éå†ã€æŒ‡å®šä½ç½®æ“ä½œã€æˆ–è€…è®¿é—®ä»»æ„å…ƒç´ ä¸‹ï¼Œæ˜¯éœ€è¦å¾ªç¯éå†çš„ï¼Œè¿™å°†å¯¼è‡´æ—¶é—´å¤æ‚åº¦çš„æå‡ã€‚</p>
<h2 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#%E4%B8%89%E3%80%81%E9%93%BE%E8%A1%A8%E5%88%86%E7%B1%BB%E7%B1%BB%E5%9E%8B">#</a>ä¸‰ã€é“¾è¡¨åˆ†ç±»ç±»å‹</h2>
<p>é“¾è¡¨çš„ä¸»è¦è¡¨ç°å½¢å¼åˆ†ä¸ºï¼›å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨ã€å¾ªç¯é“¾è¡¨ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬åˆ†åˆ«ä»‹ç»ä¸‹ã€‚</p>
<h3 id="-3"><a class="markdownIt-Anchor" href="#-3">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_1-%E5%8D%95%E5%90%91%E9%93%BE%E8%A1%A8">#</a>1. å•å‘é“¾è¡¨</h3>
<p>å•é“¾è¡¨åŒ…å«å…·æœ‰æ•°æ®å­—æ®µçš„èŠ‚ç‚¹ä»¥åŠæŒ‡å‘èŠ‚ç‚¹è¡Œä¸­çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„ â€œä¸‹ä¸€ä¸ªâ€ å­—æ®µã€‚å¯ä»¥å¯¹å•é“¾è¡¨æ‰§è¡Œçš„æ“ä½œåŒ…æ‹¬æ’å…¥ã€åˆ é™¤å’Œéå†ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-02.png" alt="img"></p>
<h3 id="-4"><a class="markdownIt-Anchor" href="#-4">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_2-%E5%8F%8C%E5%90%91%E9%93%BE%E8%A1%A8">#</a>2. åŒå‘é“¾è¡¨</h3>
<p>åœ¨ â€œåŒå‘é“¾è¡¨â€ ä¸­ï¼Œé™¤äº†ä¸‹ä¸€ä¸ªèŠ‚ç‚¹é“¾æ¥ä¹‹å¤–ï¼Œæ¯ä¸ªèŠ‚ç‚¹è¿˜åŒ…å«æŒ‡å‘åºåˆ—ä¸­ â€œå‰ä¸€ä¸ªâ€ èŠ‚ç‚¹çš„ç¬¬äºŒä¸ªé“¾æ¥å­—æ®µã€‚è¿™ä¸¤ä¸ªé“¾æ¥å¯ä»¥ç§°ä¸ºâ€™forwardï¼ˆâ€˜sâ€™ï¼‰å’Œâ€™backwardsâ€™ï¼Œæˆ–â€™nextâ€™å’Œâ€™prevâ€™ï¼ˆâ€˜previousâ€™ï¼‰ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-03.png" alt="img"></p>
<h3 id="-5"><a class="markdownIt-Anchor" href="#-5">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_3-%E5%BE%AA%E7%8E%AF%E9%93%BE%E8%A1%A8">#</a>3. å¾ªç¯é“¾è¡¨</h3>
<p>åœ¨åˆ—è¡¨çš„æœ€åä¸€ä¸ªèŠ‚ç‚¹ä¸­ï¼Œé“¾æ¥å­—æ®µé€šå¸¸åŒ…å«ä¸€ä¸ªç©ºå¼•ç”¨ï¼Œä¸€ä¸ªç‰¹æ®Šçš„å€¼ç”¨äºæŒ‡ç¤ºç¼ºå°‘è¿›ä¸€æ­¥çš„èŠ‚ç‚¹ã€‚ä¸€ä¸ªä¸å¤ªå¸¸è§çš„çº¦å®šæ˜¯è®©å®ƒæŒ‡å‘åˆ—è¡¨çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåˆ—è¡¨è¢«ç§°ä¸º â€œå¾ªç¯â€ æˆ– â€œå¾ªç¯é“¾æ¥â€ï¼›å¦åˆ™ï¼Œå®ƒè¢«ç§°ä¸º â€œå¼€æ”¾â€ æˆ– â€œçº¿æ€§â€ã€‚å®ƒæ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-04.png" alt="img"></p>
<h2 id="-6"><a class="markdownIt-Anchor" href="#-6">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#%E5%9B%9B%E3%80%81%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%B8%AA%E9%93%BE%E8%A1%A8">#</a>å››ã€å®ç°ä¸€ä¸ªé“¾è¡¨</h2>
<h3 id="-7"><a class="markdownIt-Anchor" href="#-7">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_1-%E9%93%BE%E8%A1%A8%E8%8A%82%E7%82%B9">#</a>1. é“¾è¡¨èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;E&gt; &#123;</span><br><span class="line">    E item;</span><br><span class="line">    Node&lt;E&gt; next;</span><br><span class="line">    Node&lt;E&gt; prev;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Node</span><span class="params">(Node&lt;E&gt; prev, E element, Node&lt;E&gt; next)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.item = element;</span><br><span class="line">        <span class="built_in">this</span>.next = next;</span><br><span class="line">        <span class="built_in">this</span>.prev = prev;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>é“¾è¡¨çš„æ•°æ®ç»“æ„æ ¸å¿ƒæ ¹åŸºå°±åœ¨äºèŠ‚ç‚¹å¯¹è±¡çš„ä½¿ç”¨ï¼Œå¹¶åœ¨èŠ‚ç‚¹å¯¹è±¡ä¸­å…³è”å½“å‰èŠ‚ç‚¹çš„ä¸Šä¸€ä¸ªå’Œä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚é€šè¿‡è¿™æ ·çš„æ–¹å¼æ„å»ºå‡ºé“¾è¡¨ç»“æ„ã€‚</li>
<li>ä½†ä¹Ÿå› ä¸ºåœ¨é“¾è¡¨ä¸Šæ·»åŠ æ¯ä¸ªå…ƒç´ çš„æ—¶å€™ï¼Œéƒ½éœ€è¦åˆ›å»ºæ–°çš„ Node èŠ‚ç‚¹ï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯ä¸€éƒ¨åˆ†è€—æ—¶çš„æ“ä½œã€‚</li>
</ul>
<h3 id="-8"><a class="markdownIt-Anchor" href="#-8">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_2-%E5%A4%B4%E6%8F%92%E8%8A%82%E7%82%B9">#</a>2. å¤´æ’èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">linkFirst</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; f = first;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(<span class="literal">null</span>, e, f);</span><br><span class="line">    first = newNode;</span><br><span class="line">    <span class="keyword">if</span> (f == <span class="literal">null</span>)</span><br><span class="line">        last = newNode;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        f.prev = newNode;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-05.png" alt="img"></p>
<ul>
<li>å¤´æ’çš„æ“ä½œæµç¨‹ï¼Œå…ˆæŠŠå¤´èŠ‚ç‚¹è®°å½•ä¸‹æ¥ã€‚ä¹‹ååˆ›å»ºä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œæ–°çš„èŠ‚ç‚¹æ„é€ å‡½æ•°çš„å¤´èŠ‚ç‚¹å…¥å‚ä¸º nullï¼Œé€šè¿‡è¿™æ ·çš„æ–¹å¼æ„å»ºå‡ºä¸€ä¸ªæ–°çš„å¤´èŠ‚ç‚¹ã€‚</li>
<li>åŸæ¥çš„å¤´ç»“ç‚¹ï¼Œè®¾ç½® f.prev è¿æ¥åˆ°æ–°çš„å¤´èŠ‚ç‚¹ï¼Œè¿™æ ·çš„å°±å¯ä»¥å®Œæˆå¤´æ’çš„æ“ä½œäº†ã€‚å¦å¤–å¦‚æœåŸæ¥å°±æ²¡æœ‰å¤´èŠ‚ç‚¹ï¼Œå¤´èŠ‚ç‚¹è®¾ç½®ä¸ºæ–°çš„èŠ‚ç‚¹å³å¯ã€‚æœ€åè®°å½•å½“å‰é“¾è¡¨ä¸­èŠ‚ç‚¹çš„æ•°é‡ï¼Œä¹Ÿå°±æ˜¯ä½ ä½¿ç”¨ LinkedList è·å– size æ—¶å€™å°±æ˜¯ä»è¿™ä¸ªå€¼è·å–çš„ã€‚</li>
</ul>
<h3 id="-9"><a class="markdownIt-Anchor" href="#-9">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_3-%E5%B0%BE%E6%8F%92%E8%8A%82%E7%82%B9">#</a>3. å°¾æ’èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">linkLast</span><span class="params">(E e)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; l = last;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; newNode = <span class="keyword">new</span> <span class="title class_">Node</span>&lt;&gt;(l, e, <span class="literal">null</span>);</span><br><span class="line">    last = newNode;</span><br><span class="line">    <span class="keyword">if</span> (l == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = newNode;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        l.next = newNode;</span><br><span class="line">    &#125;</span><br><span class="line">    size++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-06.png" alt="img"></p>
<ul>
<li>å°¾å·®èŠ‚ç‚¹ä¸å¤´æ’èŠ‚ç‚¹æ­£å¥½ç›¸åï¼Œé€šè¿‡è®°å½•å½“å‰çš„ç»“å°¾èŠ‚ç‚¹ï¼Œåˆ›å»ºæ–°çš„èŠ‚ç‚¹ï¼Œå¹¶æŠŠå½“å‰çš„ç»“å°¾èŠ‚ç‚¹ï¼Œé€šè¿‡ l.next å…³è”åˆ°æ–°åˆ›å»ºçš„èŠ‚ç‚¹ä¸Šã€‚åŒæ—¶è®°å½• size èŠ‚ç‚¹æ•°é‡å€¼ã€‚</li>
</ul>
<h3 id="-10"><a class="markdownIt-Anchor" href="#-10">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_4-%E6%8B%86%E9%93%BE%E6%93%8D%E4%BD%9C">#</a>4. æ‹†é“¾æ“ä½œ</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">E <span class="title function_">unlink</span><span class="params">(Node&lt;E&gt; x)</span> &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">E</span> <span class="variable">element</span> <span class="operator">=</span> x.item;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; next = x.next;</span><br><span class="line">    <span class="keyword">final</span> Node&lt;E&gt; prev = x.prev;</span><br><span class="line">    <span class="keyword">if</span> (prev == <span class="literal">null</span>) &#123;</span><br><span class="line">        first = next;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        prev.next = next;</span><br><span class="line">        x.prev = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (next == <span class="literal">null</span>) &#123;</span><br><span class="line">        last = prev;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        next.prev = prev;</span><br><span class="line">        x.next = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    x.item = <span class="literal">null</span>;</span><br><span class="line">    size--;</span><br><span class="line">    <span class="keyword">return</span> element;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-07.png" alt="img"></p>
<ul>
<li>unlink æ˜¯ä¸€ç§æ‹†é“¾æ“ä½œï¼Œåªè¦ä½ ç»™å®šä¸€ä¸ªå…ƒç´ ï¼Œå®ƒå°±å¯ä»¥æŠŠå½“å‰è¿™ä¸ªå…ƒç´ çš„ä¸Šä¸€ä¸ªèŠ‚ç‚¹å’Œä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œç›¸è¿ï¼Œä¹‹åæŠŠè‡ªå·±æ‹†é™¤ã€‚</li>
<li>è¿™ä¸ªæ–¹æ³•å¸¸ç”¨äº remove ç§»é™¤å…ƒç´ æ“ä½œï¼Œå› ä¸ºæ•´ä¸ªæ“ä½œè¿‡ç¨‹ä¸éœ€è¦éå†ï¼Œæ‹†é™¤å…ƒç´ åä¹Ÿä¸éœ€è¦å¤åˆ¶æ–°çš„ç©ºé—´ï¼Œæ‰€ä»¥æ—¶é—´å¤æ‚è¯»ä¸º O (1)</li>
</ul>
<h3 id="-11"><a class="markdownIt-Anchor" href="#-11">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#_5-%E5%88%A0%E9%99%A4%E8%8A%82%E7%82%B9">#</a>5. åˆ é™¤èŠ‚ç‚¹</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">remove</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x.item == <span class="literal">null</span>) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">for</span> (Node&lt;E&gt; x = first; x != <span class="literal">null</span>; x = x.next) &#123;</span><br><span class="line">            <span class="keyword">if</span> (o.equals(x.item)) &#123;</span><br><span class="line">                unlink(x);</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/algorithms-220723-08.png" alt="img"></p>
<ul>
<li>åˆ é™¤å…ƒç´ çš„è¿‡ç¨‹éœ€è¦ for å¾ªç¯åˆ¤æ–­æ¯”åˆ é™¤å…ƒç´ çš„å€¼ï¼Œæ‰¾åˆ°å¯¹åº”çš„å…ƒç´ ï¼Œè¿›è¡Œåˆ é™¤ã€‚</li>
<li>å¾ªç¯æ¯”å¯¹çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª O (n) çš„æ“ä½œï¼Œåˆ é™¤çš„è¿‡ç¨‹æ˜¯ä¸€ä¸ª O (1) çš„æ“ä½œã€‚æ‰€ä»¥å¦‚æœè¿™ä¸ªé“¾è¡¨è¾ƒå¤§ï¼Œåˆ é™¤çš„å…ƒç´ åˆéƒ½æ˜¯è´´è¿‘ç»“å°¾ï¼Œé‚£ä¹ˆè¿™ä¸ªå¾ªç¯æ¯”å¯¹çš„è¿‡ç¨‹ä¹Ÿæ˜¯æ¯”è¾ƒè€—æ—¶çš„ã€‚</li>
</ul>
<h2 id="-12"><a class="markdownIt-Anchor" href="#-12">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#%E4%BA%94%E3%80%81%E9%93%BE%E8%A1%A8%E4%BD%BF%E7%94%A8%E6%B5%8B%E8%AF%95">#</a>äº”ã€é“¾è¡¨ä½¿ç”¨æµ‹è¯•</h2>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">    <span class="comment">// æ·»åŠ å…ƒç´ </span></span><br><span class="line">    list.add(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    list.addFirst(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    list.addLast(<span class="string">&quot;c&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰“å°åˆ—è¡¨</span></span><br><span class="line">    list.printLinkList();</span><br><span class="line">    <span class="comment">// å¤´æ’å…ƒç´ </span></span><br><span class="line">    list.addFirst(<span class="string">&quot;d&quot;</span>);</span><br><span class="line">    <span class="comment">// åˆ é™¤å…ƒç´ </span></span><br><span class="line">    list.remove(<span class="string">&quot;b&quot;</span>);</span><br><span class="line">    <span class="comment">// æ‰“å°åˆ—è¡¨</span></span><br><span class="line">    list.printLinkList();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æµ‹è¯•ç»“æœ</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç›®å‰çš„åˆ—è¡¨ï¼Œå¤´èŠ‚ç‚¹ï¼šb å°¾èŠ‚ç‚¹ï¼šc æ•´ä½“ï¼šbï¼Œaï¼Œcï¼Œ</span><br><span class="line">ç›®å‰çš„åˆ—è¡¨ï¼Œå¤´èŠ‚ç‚¹ï¼šd å°¾èŠ‚ç‚¹ï¼šc æ•´ä½“ï¼šdï¼Œaï¼Œcï¼Œ</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>
<ul>
<li>æŒ‰ç…§æˆ‘ä»¬çš„æµ‹è¯•é“¾è¡¨å¯¹æ•°æ®çš„æ“ä½œè¿‡ç¨‹ï¼Œä»æµ‹è¯•ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå·²ç»æ»¡è¶³äº†é“¾è¡¨æ•°æ®ç»“æ„çš„ä½¿ç”¨ã€‚</li>
</ul>
<h2 id="-13"><a class="markdownIt-Anchor" href="#-13">#</a> <a target="_blank" rel="noopener" href="https://bugstack.cn/md/algorithm/data-structures/2022-07-22-linked-list.html#%E5%85%AD%E3%80%81%E5%B8%B8%E8%A7%81%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98">#</a>å…­ã€å¸¸è§é¢è¯•é—®é¢˜</h2>
<ul>
<li>
<p>æè¿°ä¸€ä¸‹é“¾è¡¨çš„æ•°æ®ç»“æ„ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">é“¾è¡¨æ˜¯ä¸€ç§å¸¸è§çš„æ•°æ®ç»“æ„ï¼Œç”¨äºæŒ‰é¡ºåºå­˜å‚¨å’Œè®¿é—®å…ƒç´ é›†åˆã€‚å®ƒç”±å¤šä¸ªèŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šæ•°æ®å’ŒæŒ‡å‘ä¸‹ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>Java ä¸­ LinkedList ä½¿ç”¨çš„æ˜¯å•å‘é“¾è¡¨ã€åŒå‘é“¾è¡¨è¿˜æ˜¯å¾ªç¯é“¾è¡¨ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">Java ä¸­çš„ LinkedList ä½¿ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å‰ç½®èŠ‚ç‚¹å’Œåç»§èŠ‚ç‚¹çš„æŒ‡é’ˆã€‚è¿™ä½¿å¾—åœ¨ LinkedList ä¸­è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œçš„æ•ˆç‡æ¯” ArrayList æ›´é«˜ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>é“¾è¡¨ä¸­æ•°æ®çš„æ’å…¥ã€åˆ é™¤ã€è·å–å…ƒç´ ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¯å¤šå°‘ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">æ’å…¥å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­æ’å…¥ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</span><br><span class="line">åœ¨å¾…æ’å…¥ä½ç½®ä¹‹å‰æŸ¥æ‰¾å…ƒç´ O(n)</span><br><span class="line">å°†æ–°å…ƒç´ æ’å…¥åˆ°è¯¥ä½ç½®O(1)</span><br><span class="line">å› æ­¤ï¼Œæ’å…¥å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦æ˜¯O(n)ã€‚</span><br><span class="line"></span><br><span class="line">åˆ é™¤å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­åˆ é™¤ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š</span><br><span class="line">åœ¨å¾…åˆ é™¤ä½ç½®ä¹‹å‰æŸ¥æ‰¾å…ƒç´ O(n)</span><br><span class="line">åˆ é™¤è¯¥ä½ç½®ä¸Šçš„å…ƒç´ O(1)</span><br><span class="line">å› æ­¤ï¼Œåˆ é™¤å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ã€‚</span><br><span class="line"></span><br><span class="line">è·å–å…ƒç´ ï¼ˆO(n)ï¼‰ï¼š</span><br><span class="line">åœ¨é“¾è¡¨ä¸­è·å–ä¸€ä¸ªå…ƒç´ é€šå¸¸éœ€è¦éå†æ•´ä¸ªé“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°ç›®æ ‡å…ƒç´ ã€‚</span><br><span class="line">å› æ­¤ï¼Œè·å–å…ƒç´ çš„æ—¶é—´å¤æ‚åº¦ä¹Ÿæ˜¯O(n)ã€‚</span><br></pre></td></tr></table></figure>
</li>
<li>
<p>ä»€ä¹ˆåœºæ™¯ä¸‹ä½¿ç”¨é“¾è¡¨æ›´åˆé€‚ï¼Ÿ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ç­”ï¼š</span><br><span class="line">1.é¢‘ç¹çš„è¿›è¡Œæ’å…¥å’Œåˆ é™¤æ“ä½œ</span><br><span class="line">2.ä¸éœ€è¦éšæœºè®¿é—®å…ƒç´ </span><br><span class="line">3.å•çº¯çš„éå†æ“ä½œ</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T05:58:11.000Z" title="2023/5/5 13:58:11">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T08:29:42.568Z" title="2023/5/5 16:29:42">2023-05-05</time>æ›´æ–°</span><span class="level-item">16 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2361ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90%E7%AE%97%E6%B3%95%E3%80%91%E7%AE%97%E6%B3%95%E7%9A%84%E6%97%B6%E9%97%B4%E4%B8%8E%E7%A9%BA%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6/">ã€ç®—æ³•ã€‘ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="ç®—æ³•ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#ç®—æ³•ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦">#</a> ã€ç®—æ³•ã€‘ç®—æ³•çš„æ—¶é—´ä¸ç©ºé—´å¤æ‚åº¦</h1>
<h4 id="ç®—æ³•algorithmæ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®-è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•-å¯¹äºåŒä¸€ä¸ªé—®é¢˜ä½¿ç”¨ä¸åŒçš„ç®—æ³•ä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«"><a class="markdownIt-Anchor" href="#ç®—æ³•algorithmæ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®-è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•-å¯¹äºåŒä¸€ä¸ªé—®é¢˜ä½¿ç”¨ä¸åŒçš„ç®—æ³•ä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«">#</a> ç®—æ³•ï¼ˆAlgorithmï¼‰æ˜¯æŒ‡ç”¨æ¥æ“ä½œæ•°æ®ã€è§£å†³ç¨‹åºé—®é¢˜çš„ä¸€ç»„æ–¹æ³•ã€‚å¯¹äºåŒä¸€ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œä¹Ÿè®¸æœ€ç»ˆå¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„ï¼Œä½†åœ¨è¿‡ç¨‹ä¸­æ¶ˆè€—çš„èµ„æºå’Œæ—¶é—´å´ä¼šæœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚</h4>
<h4 id="é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢"><a class="markdownIt-Anchor" href="#é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢">#</a> é‚£ä¹ˆæˆ‘ä»¬åº”è¯¥å¦‚ä½•å»è¡¡é‡ä¸åŒç®—æ³•ä¹‹é—´çš„ä¼˜åŠ£å‘¢ï¼Ÿ</h4>
<p>ä¸»è¦è¿˜æ˜¯ä»ç®—æ³•æ‰€å ç”¨çš„ã€Œæ—¶é—´ã€å’Œã€Œç©ºé—´ã€ä¸¤ä¸ªç»´åº¦å»è€ƒé‡ã€‚</p>
<ul>
<li>æ—¶é—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œæ—¶é—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚</li>
<li>ç©ºé—´ç»´åº¦ï¼šæ˜¯æŒ‡æ‰§è¡Œå½“å‰ç®—æ³•éœ€è¦å ç”¨å¤šå°‘å†…å­˜ç©ºé—´ï¼Œæˆ‘ä»¬é€šå¸¸ç”¨ã€Œç©ºé—´å¤æ‚åº¦ã€æ¥æè¿°ã€‚</li>
</ul>
<p>å› æ­¤ï¼Œè¯„ä»·ä¸€ä¸ªç®—æ³•çš„æ•ˆç‡ä¸»è¦æ˜¯çœ‹å®ƒçš„æ—¶é—´å¤æ‚åº¦å’Œç©ºé—´å¤æ‚åº¦æƒ…å†µã€‚ç„¶è€Œï¼Œæœ‰çš„æ—¶å€™æ—¶é—´å’Œç©ºé—´å´åˆæ˜¯ã€Œé±¼å’Œç†ŠæŒã€ï¼Œä¸å¯å…¼å¾—çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦ä»ä¸­å»å–ä¸€ä¸ªå¹³è¡¡ç‚¹ã€‚</p>
<p>ä¸‹é¢æˆ‘æ¥åˆ†åˆ«ä»‹ç»ä¸€ä¸‹ã€Œæ—¶é—´å¤æ‚åº¦ã€å’Œã€Œç©ºé—´å¤æ‚åº¦ã€çš„è®¡ç®—æ–¹å¼ã€‚</p>
<h2 id="ä¸€-æ—¶é—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#ä¸€-æ—¶é—´å¤æ‚åº¦">#</a> <strong>ä¸€ã€æ—¶é—´å¤æ‚åº¦</strong></h2>
<p>æˆ‘ä»¬æƒ³è¦çŸ¥é“ä¸€ä¸ªç®—æ³•çš„ã€Œæ—¶é—´å¤æ‚åº¦ã€ï¼Œå¾ˆå¤šäººé¦–å…ˆæƒ³åˆ°çš„çš„æ–¹æ³•å°±æ˜¯æŠŠè¿™ä¸ªç®—æ³•ç¨‹åºè¿è¡Œä¸€éï¼Œé‚£ä¹ˆå®ƒæ‰€æ¶ˆè€—çš„æ—¶é—´å°±è‡ªç„¶è€Œç„¶çŸ¥é“äº†ã€‚</p>
<p>è¿™ç§æ–¹å¼å¯ä»¥å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼Œä¸è¿‡å®ƒä¹Ÿæœ‰å¾ˆå¤šå¼Šç«¯ã€‚<br>
è¿™ç§æ–¹å¼éå¸¸å®¹æ˜“å—è¿è¡Œç¯å¢ƒçš„å½±å“ï¼Œåœ¨æ€§èƒ½é«˜çš„æœºå™¨ä¸Šè·‘å‡ºæ¥çš„ç»“æœä¸åœ¨æ€§èƒ½ä½çš„æœºå™¨ä¸Šè·‘çš„ç»“æœç›¸å·®ä¼šå¾ˆå¤§ã€‚è€Œä¸”å¯¹æµ‹è¯•æ—¶ä½¿ç”¨çš„æ•°æ®è§„æ¨¡ä¹Ÿæœ‰å¾ˆå¤§å…³ç³»ã€‚å†è€…ï¼Œå¹¶æˆ‘ä»¬åœ¨å†™ç®—æ³•çš„æ—¶å€™ï¼Œè¿˜æ²¡æœ‰åŠæ³•å®Œæ•´çš„å»è¿è¡Œå‘¢ã€‚</p>
<p>å› æ­¤ï¼Œå¦ä¸€ç§æ›´ä¸ºé€šç”¨çš„æ–¹æ³•å°±å‡ºæ¥äº†ï¼šã€Œ <strong>å¤§ O ç¬¦å·è¡¨ç¤ºæ³•</strong> ã€ï¼Œå³ T (n) = O (f (n))</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ã€Œ å¤§ O ç¬¦å·è¡¨ç¤ºæ³• ã€ï¼Œè¿™æ®µä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼šO (n) ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>åœ¨ å¤§ O ç¬¦å·è¡¨ç¤ºæ³•ä¸­ï¼Œæ—¶é—´å¤æ‚åº¦çš„å…¬å¼æ˜¯ï¼š T (n) = O ( f (n) )ï¼Œå…¶ä¸­ f (n) è¡¨ç¤ºæ¯è¡Œä»£ç æ‰§è¡Œæ¬¡æ•°ä¹‹å’Œï¼Œè€Œ O è¡¨ç¤ºæ­£æ¯”ä¾‹å…³ç³»ï¼Œè¿™ä¸ªå…¬å¼çš„å…¨ç§°æ˜¯ï¼š<strong>ç®—æ³•çš„æ¸è¿›æ—¶é—´å¤æ‚åº¦</strong>ã€‚</p>
<p>æˆ‘ä»¬ç»§ç»­çœ‹ä¸Šé¢çš„ä¾‹å­ï¼Œå‡è®¾æ¯è¡Œä»£ç çš„æ‰§è¡Œæ—¶é—´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬ç”¨ 1 é¢—ç²’æ—¶é—´ æ¥è¡¨ç¤ºï¼Œé‚£ä¹ˆè¿™ä¸ªä¾‹å­çš„ç¬¬ä¸€è¡Œè€—æ—¶æ˜¯ 1 ä¸ªé¢—ç²’æ—¶é—´ï¼Œç¬¬ä¸‰è¡Œçš„æ‰§è¡Œæ—¶é—´æ˜¯ n ä¸ªé¢—ç²’æ—¶é—´ï¼Œç¬¬å››è¡Œçš„æ‰§è¡Œæ—¶é—´ä¹Ÿæ˜¯ n ä¸ªé¢—ç²’æ—¶é—´ï¼ˆç¬¬äºŒè¡Œå’Œç¬¬äº”è¡Œæ˜¯ç¬¦å·ï¼Œæš‚æ—¶å¿½ç•¥ï¼‰ï¼Œé‚£ä¹ˆæ€»æ—¶é—´å°±æ˜¯ 1 é¢—ç²’æ—¶é—´ + n é¢—ç²’æ—¶é—´ + n é¢—ç²’æ—¶é—´ ï¼Œå³ (1+2n) ä¸ªé¢—ç²’æ—¶é—´ï¼Œå³ï¼š T (n) = (1+2n)* é¢—ç²’æ—¶é—´ï¼Œä»è¿™ä¸ªç»“æœå¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªç®—æ³•çš„è€—æ—¶æ˜¯éšç€ n çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç®€åŒ–çš„å°†è¿™ä¸ªç®—æ³•çš„æ—¶é—´å¤æ‚åº¦è¡¨ç¤ºä¸ºï¼šT (n) = O (n)</p>
<p>ä¸ºä»€ä¹ˆå¯ä»¥è¿™ä¹ˆå»ç®€åŒ–å‘¢ï¼Œå› ä¸ºå¤§ O ç¬¦å·è¡¨ç¤ºæ³•å¹¶ä¸æ˜¯ç”¨äºæ¥çœŸå®ä»£è¡¨ç®—æ³•çš„æ‰§è¡Œæ—¶é—´çš„ï¼Œå®ƒæ˜¯ç”¨æ¥è¡¨ç¤ºä»£ç æ‰§è¡Œæ—¶é—´çš„å¢é•¿å˜åŒ–è¶‹åŠ¿çš„ã€‚</p>
<p>æ‰€ä»¥ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œå¦‚æœ n æ— é™å¤§çš„æ—¶å€™ï¼ŒT (n) = time (1+2n) ä¸­çš„å¸¸é‡ 1 å°±æ²¡æœ‰æ„ä¹‰äº†ï¼Œå€æ•° 2 ä¹Ÿæ„ä¹‰ä¸å¤§ã€‚å› æ­¤ç›´æ¥ç®€åŒ–ä¸º T (n) = O (n) å°±å¯ä»¥äº†ã€‚</p>
<p>å¸¸è§çš„æ—¶é—´å¤æ‚åº¦é‡çº§æœ‰ï¼š</p>
<ul>
<li>å¸¸æ•°é˜¶ O (1)</li>
<li>å¯¹æ•°é˜¶ O (logN)</li>
<li>çº¿æ€§é˜¶ O (n)</li>
<li>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN)</li>
<li>å¹³æ–¹é˜¶ O (nÂ²)</li>
<li>ç«‹æ–¹é˜¶ O (nÂ³)</li>
<li>K æ¬¡æ–¹é˜¶ O (n^k)</li>
<li>æŒ‡æ•°é˜¶ (2^n)</li>
</ul>
<p>ä¸Šé¢ä»ä¸Šè‡³ä¸‹ä¾æ¬¡çš„æ—¶é—´å¤æ‚åº¦è¶Šæ¥è¶Šå¤§ï¼Œæ‰§è¡Œçš„æ•ˆç‡è¶Šæ¥è¶Šä½ã€‚</p>
<p>ä¸‹é¢é€‰å–ä¸€äº›è¾ƒä¸ºå¸¸ç”¨çš„æ¥è®²è§£ä¸€ä¸‹ï¼ˆæ²¡æœ‰ä¸¥æ ¼æŒ‰ç…§é¡ºåºï¼‰ï¼š</p>
<ol>
<li><strong>å¸¸æ•°é˜¶ O (1)</strong></li>
</ol>
<p>æ— è®ºä»£ç æ‰§è¡Œäº†å¤šå°‘è¡Œï¼Œåªè¦æ˜¯æ²¡æœ‰å¾ªç¯ç­‰å¤æ‚ç»“æ„ï¼Œé‚£è¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦å°±éƒ½æ˜¯ O (1)ï¼Œå¦‚ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç åœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œå®ƒæ¶ˆè€—çš„æ—¶å€™å¹¶ä¸éšç€æŸä¸ªå˜é‡çš„å¢é•¿è€Œå¢é•¿ï¼Œé‚£ä¹ˆæ— è®ºè¿™ç±»ä»£ç æœ‰å¤šé•¿ï¼Œå³ä½¿æœ‰å‡ ä¸‡å‡ åä¸‡è¡Œï¼Œéƒ½å¯ä»¥ç”¨ O (1) æ¥è¡¨ç¤ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<ol>
<li><strong>çº¿æ€§é˜¶ O (n)</strong></li>
</ol>
<p>è¿™ä¸ªåœ¨æœ€å¼€å§‹çš„ä»£ç ç¤ºä¾‹ä¸­å°±è®²è§£è¿‡äº†ï¼Œå¦‚ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ï¼Œfor å¾ªç¯é‡Œé¢çš„ä»£ç ä¼šæ‰§è¡Œ n éï¼Œå› æ­¤å®ƒæ¶ˆè€—çš„æ—¶é—´æ˜¯éšç€ n çš„å˜åŒ–è€Œå˜åŒ–çš„ï¼Œå› æ­¤è¿™ç±»ä»£ç éƒ½å¯ä»¥ç”¨ O (n) æ¥è¡¨ç¤ºå®ƒçš„æ—¶é—´å¤æ‚åº¦ã€‚</p>
<ol>
<li><strong>å¯¹æ•°é˜¶ O (logN)</strong></li>
</ol>
<p>è¿˜æ˜¯å…ˆæ¥çœ‹ä»£ç ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">while(i&lt;n)</span><br><span class="line">&#123;</span><br><span class="line">    i = i * 2;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»ä¸Šé¢ä»£ç å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ while å¾ªç¯é‡Œé¢ï¼Œæ¯æ¬¡éƒ½å°† i ä¹˜ä»¥ 2ï¼Œä¹˜å®Œä¹‹åï¼Œi è·ç¦» n å°±è¶Šæ¥è¶Šè¿‘äº†ã€‚æˆ‘ä»¬è¯•ç€æ±‚è§£ä¸€ä¸‹ï¼Œå‡è®¾å¾ªç¯ x æ¬¡ä¹‹åï¼Œi å°±å¤§äº n äº†ï¼Œæ­¤æ—¶è¿™ä¸ªå¾ªç¯å°±é€€å‡ºäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ 2 çš„ x æ¬¡æ–¹ç­‰äº nï¼Œé‚£ä¹ˆ x = log2^n<br>
 ä¹Ÿå°±æ˜¯è¯´å½“å¾ªç¯ log2^n æ¬¡ä»¥åï¼Œè¿™ä¸ªä»£ç å°±ç»“æŸäº†ã€‚å› æ­¤è¿™ä¸ªä»£ç çš„æ—¶é—´å¤æ‚åº¦ä¸ºï¼š<strong>O(logn)</strong></p>
<ol>
<li><strong>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN)</strong></li>
</ol>
<p>çº¿æ€§å¯¹æ•°é˜¶ O (nlogN) å…¶å®éå¸¸å®¹æ˜“ç†è§£ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä¸º O (logn) çš„ä»£ç å¾ªç¯ N éçš„è¯ï¼Œé‚£ä¹ˆå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ n * O (logN)ï¼Œä¹Ÿå°±æ˜¯äº† O (nlogN)ã€‚</p>
<p>å°±æ‹¿ä¸Šé¢çš„ä»£ç åŠ ä¸€ç‚¹ä¿®æ”¹æ¥ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(m=1; m&lt;n; m++)</span><br><span class="line">&#123;</span><br><span class="line">    i = 1;</span><br><span class="line">    while(i&lt;n)</span><br><span class="line">    &#123;</span><br><span class="line">        i = i * 2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol>
<li><strong>å¹³æ–¹é˜¶ O (nÂ²)</strong></li>
</ol>
<p>å¹³æ–¹é˜¶ O (nÂ²) å°±æ›´å®¹æ˜“ç†è§£äº†ï¼Œå¦‚æœæŠŠ O (n) çš„ä»£ç å†åµŒå¥—å¾ªç¯ä¸€éï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O (nÂ²) äº†ã€‚<br>
ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=n; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯åµŒå¥—äº† 2 å±‚ n å¾ªç¯ï¼Œå®ƒçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ O (n*n)ï¼Œå³ O (nÂ²)<br>
 å¦‚æœå°†å…¶ä¸­ä¸€å±‚å¾ªç¯çš„ n æ”¹æˆ mï¼Œå³ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">for(x=1; i&lt;=m; x++)</span><br><span class="line">&#123;</span><br><span class="line">   for(i=1; i&lt;=n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">       j = i;</span><br><span class="line">       j++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é‚£å®ƒçš„æ—¶é—´å¤æ‚åº¦å°±å˜æˆäº† O (m*n)</p>
<ol>
<li><strong>ç«‹æ–¹é˜¶ O (nÂ³)</strong>ã€<strong>K æ¬¡æ–¹é˜¶ O (n^k)</strong></li>
</ol>
<p>å‚è€ƒä¸Šé¢çš„ O (nÂ²) å»ç†è§£å°±å¥½äº†ï¼ŒO (nÂ³) ç›¸å½“äºä¸‰å±‚ n å¾ªç¯ï¼Œå…¶å®ƒçš„ç±»ä¼¼ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œå…¶å®è¿˜æœ‰ å¹³å‡æ—¶é—´å¤æ‚åº¦ã€å‡æ‘Šæ—¶é—´å¤æ‚åº¦ã€æœ€åæ—¶é—´å¤æ‚åº¦ã€æœ€å¥½æ—¶é—´å¤æ‚åº¦ çš„åˆ†ææ–¹æ³•ï¼Œæœ‰ç‚¹å¤æ‚ï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<h2 id="äºŒ-ç©ºé—´å¤æ‚åº¦"><a class="markdownIt-Anchor" href="#äºŒ-ç©ºé—´å¤æ‚åº¦">#</a> <strong>äºŒã€ç©ºé—´å¤æ‚åº¦</strong></h2>
<p>æ—¢ç„¶æ—¶é—´å¤æ‚åº¦ä¸æ˜¯ç”¨æ¥è®¡ç®—ç¨‹åºå…·ä½“è€—æ—¶çš„ï¼Œé‚£ä¹ˆæˆ‘ä¹Ÿåº”è¯¥æ˜ç™½ï¼Œç©ºé—´å¤æ‚åº¦ä¹Ÿä¸æ˜¯ç”¨æ¥è®¡ç®—ç¨‹åºå®é™…å ç”¨çš„ç©ºé—´çš„ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦æ˜¯å¯¹ä¸€ä¸ªç®—æ³•åœ¨è¿è¡Œè¿‡ç¨‹ä¸­ä¸´æ—¶å ç”¨å­˜å‚¨ç©ºé—´å¤§å°çš„ä¸€ä¸ªé‡åº¦ï¼ŒåŒæ ·åæ˜ çš„æ˜¯ä¸€ä¸ªè¶‹åŠ¿ï¼Œæˆ‘ä»¬ç”¨ S (n) æ¥å®šä¹‰ã€‚</p>
<p>ç©ºé—´å¤æ‚åº¦æ¯”è¾ƒå¸¸ç”¨çš„æœ‰ï¼šO (1)ã€O (n)ã€O (nÂ²)ï¼Œæˆ‘ä»¬ä¸‹é¢æ¥çœ‹çœ‹ï¼š</p>
<ol>
<li><strong>ç©ºé—´å¤æ‚åº¦ O (1)</strong></li>
</ol>
<p>å¦‚æœç®—æ³•æ‰§è¡Œæ‰€éœ€è¦çš„ä¸´æ—¶ç©ºé—´ä¸éšç€æŸä¸ªå˜é‡ n çš„å¤§å°è€Œå˜åŒ–ï¼Œå³æ­¤ç®—æ³•ç©ºé—´å¤æ‚åº¦ä¸ºä¸€ä¸ªå¸¸é‡ï¼Œå¯è¡¨ç¤ºä¸º O (1)<br>
 ä¸¾ä¾‹ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">int i = 1;</span><br><span class="line">int j = 2;</span><br><span class="line">++i;</span><br><span class="line">j++;</span><br><span class="line">int m = i + j;</span><br></pre></td></tr></table></figure>
<p>ä»£ç ä¸­çš„ iã€jã€m æ‰€åˆ†é…çš„ç©ºé—´éƒ½ä¸éšç€å¤„ç†æ•°æ®é‡å˜åŒ–ï¼Œå› æ­¤å®ƒçš„ç©ºé—´å¤æ‚åº¦ S (n) = O (1)</p>
<ol>
<li><strong>ç©ºé—´å¤æ‚åº¦ O (n)</strong></li>
</ol>
<p>æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸ªä»£ç ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">int[] m = new int[n]</span><br><span class="line">for(i=1; i&lt;=n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">   j = i;</span><br><span class="line">   j++;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç ä¸­ï¼Œç¬¬ä¸€è¡Œ new äº†ä¸€ä¸ªæ•°ç»„å‡ºæ¥ï¼Œè¿™ä¸ªæ•°æ®å ç”¨çš„å¤§å°ä¸º nï¼Œè¿™æ®µä»£ç çš„ 2-6 è¡Œï¼Œè™½ç„¶æœ‰å¾ªç¯ï¼Œä½†æ²¡æœ‰å†åˆ†é…æ–°çš„ç©ºé—´ï¼Œå› æ­¤ï¼Œè¿™æ®µä»£ç çš„ç©ºé—´å¤æ‚åº¦ä¸»è¦çœ‹ç¬¬ä¸€è¡Œå³å¯ï¼Œå³ S (n) = O (n)</p>
<p>ä»¥ä¸Šï¼Œå°±æ˜¯å¯¹ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ä¸ç©ºé—´å¤æ‚åº¦åŸºç¡€çš„åˆ†æï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T01:57:09.000Z" title="2023/5/5 09:57:09">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T02:04:28.525Z" title="2023/5/5 10:04:28">2023-05-05</time>æ›´æ–°</span><span class="level-item">14 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦2151ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90IDEA%E3%80%91IDEA%E7%9A%84debug%E8%B0%83%E8%AF%95%E6%8A%80%E5%B7%A7%E8%AF%A6%E8%A7%A3/">ã€IDEAã€‘IDEAçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="ideaideaçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£è½¬è‡ªcsdn"><a class="markdownIt-Anchor" href="#ideaideaçš„debugè°ƒè¯•æŠ€å·§è¯¦è§£è½¬è‡ªcsdn">#</a> ã€IDEAã€‘IDEA çš„ debug è°ƒè¯•æŠ€å·§è¯¦è§£ï¼ˆè½¬è‡ª CSDNï¼‰</h1>
<p>ç›®å½•</p>
<p><a href="#%E4%B8%80%E3%80%81%E6%A6%82%E8%BF%B0">ä¸€ã€æ¦‚è¿°</a></p>
<p><a href="#%E4%BA%8C%E3%80%81debug%E6%93%8D%E4%BD%9C%E5%88%86%E6%9E%90">äºŒã€debug æ“ä½œåˆ†æ</a></p>
<p><a href="#1%E3%80%81%E6%89%93%E6%96%AD%E7%82%B9">1ã€æ‰“æ–­ç‚¹</a></p>
<p><a href="#2%E3%80%81%E8%BF%90%E8%A1%8Cdebug%E6%A8%A1%E5%BC%8F">2ã€è¿è¡Œ debug æ¨¡å¼</a></p>
<p><a href="#3%E3%80%81%E9%87%8D%E6%96%B0%E6%89%A7%E8%A1%8Cdebug">3ã€é‡æ–°æ‰§è¡Œ debug</a></p>
<p><a href="#4%E3%80%81%E8%AE%A9%E7%A8%8B%E5%BA%8F%E6%89%A7%E8%A1%8C%E5%88%B0%E4%B8%8B%E4%B8%80%E6%AC%A1%E6%96%AD%E7%82%B9%E5%90%8E%E6%9A%82%E5%81%9C">4ã€è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</a></p>
<p><a href="#5%E3%80%81%E8%AE%A9%E6%96%AD%E7%82%B9%E5%A4%84%E7%9A%84%E4%BB%A3%E7%A0%81%E5%86%8D%E5%8A%A0%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81">5ã€è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç </a></p>
<p><a href="#6%E3%80%81%E5%81%9C%E6%AD%A2debug%E7%A8%8B%E5%BA%8F">6ã€åœæ­¢ debug ç¨‹åº</a></p>
<p><a href="#7%E3%80%81%E6%98%BE%E7%A4%BA%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9">7ã€æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</a></p>
<p><a href="#8%E3%80%81%E6%B7%BB%E5%8A%A0%E6%96%AD%E7%82%B9%E8%BF%90%E8%A1%8C%E7%9A%84%E6%9D%A1%E4%BB%B6">8ã€æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶</a></p>
<p><a href="#9%E3%80%81%E5%B1%8F%E8%94%BD%E6%89%80%E6%9C%89%E6%96%AD%E7%82%B9">9ã€å±è”½æ‰€æœ‰æ–­ç‚¹</a></p>
<p><a href="#10%E3%80%81%E6%8A%8A%E5%85%89%E6%A0%87%E7%A7%BB%E5%88%B0%E5%BD%93%E5%89%8D%E7%A8%8B%E5%BA%8F%E8%BF%90%E8%A1%8C%E4%BD%8D%E7%BD%AE">10ã€æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®</a></p>
<p><a href="#11%E3%80%81%E5%8D%95%E6%AD%A5%E8%B7%B3%E8%BF%87">11ã€å•æ­¥è·³è¿‡</a></p>
<p><a href="#12%E3%80%81%E5%8F%AF%E4%BB%A5%E8%B7%B3%E5%85%A5%E6%96%B9%E6%B3%95%E5%86%85%E9%83%A8%E7%9A%84%E6%89%A7%E8%A1%8C%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E6%93%8D%E4%BD%9C">12ã€å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ</a></p>
<p><a href="#13%E3%80%81%E8%B7%B3%E5%87%BA%E6%96%B9%E6%B3%95">13ã€è·³å‡ºæ–¹æ³•</a></p>
<p><a href="#14%E3%80%81%E7%9B%B4%E6%8E%A5%E6%89%A7%E8%A1%8C%E5%88%B0%E5%85%89%E6%A0%87%E6%89%80%E5%9C%A8%E4%BD%8D%E7%BD%AE">14ã€ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</a></p>
<p><a href="#15%E3%80%81%E5%9C%A8%E6%8E%A7%E5%88%B6%E5%8F%B0%E6%94%B9%E5%8F%98%E6%AD%A3%E5%9C%A8debug%E7%9A%84%E6%95%B0%E6%8D%AE">15ã€åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨ debug çš„æ•°æ®</a></p>
<hr>
<h1 id="ä¸€-æ¦‚è¿°"><a class="markdownIt-Anchor" href="#ä¸€-æ¦‚è¿°">#</a> ä¸€ã€æ¦‚è¿°</h1>
<ul>
<li>debug è°ƒè¯•ä¹Ÿå«æ–­ç‚¹è°ƒè¯•</li>
<li>åœ¨ç¨‹åºçš„æŸä¸€è¡Œæ‰“ä¸Šæ–­ç‚¹ï¼Œåˆ™åœ¨ debug æ¨¡å¼ä¸‹è¿è¡Œåˆ°æ–­ç‚¹ä½ç½®æ—¶ä¼šæš‚åœï¼Œä¾¿äºç¨‹åºå‘˜è§‚å¯Ÿä»£ç çš„æ‰§è¡Œæƒ…å†µ</li>
<li>å­¦ä¼š debugï¼Œæœ‰åŠ©äºåœ¨ç¨‹åºè¿è¡Œæœªè¾¾åˆ°ç†æƒ³æƒ…å†µæ—¶ï¼Œå¯¹ç¨‹åºçš„å„ä¸ªæµç¨‹è¿›è¡Œåˆ†æ</li>
<li>æœ¬æ–‡åªè¯¦ç»†æè¿°äº† debug çš„ä¸€äº›åŸºæœ¬çš„å¸¸ç”¨æ“ä½œï¼Œå¦‚æœæœ‰ç¼ºæ¼æ¬¢è¿è¯„è®ºåŒºç•™è¨€ï½</li>
</ul>
<h1 id="äºŒ-debugæ“ä½œåˆ†æ"><a class="markdownIt-Anchor" href="#äºŒ-debugæ“ä½œåˆ†æ">#</a> äºŒã€debug æ“ä½œåˆ†æ</h1>
<h2 id="1-æ‰“æ–­ç‚¹"><a class="markdownIt-Anchor" href="#1-æ‰“æ–­ç‚¹">#</a> 1ã€æ‰“æ–­ç‚¹</h2>
<ul>
<li>åœ¨ç¨‹åºçš„æŸä¸€è¡Œä½ç½®ï¼Œæ•°å­—å³è¾¹çš„ç©ºç™½éƒ¨åˆ†ä½¿ç”¨é¼ æ ‡å·¦é”®ç‚¹å‡»ä¸€ä¸‹ï¼Œå‡ºç°çº¢ç‚¹å³ä¸ºæ‰“ä¸Šäº†ä¸€ä¸ªæ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/9e3026905fcd4c7a9a7b0dce93f324e9.png" width="422" height="362" />
<h2 id="2-è¿è¡Œdebugæ¨¡å¼"><a class="markdownIt-Anchor" href="#2-è¿è¡Œdebugæ¨¡å¼">#</a> 2ã€è¿è¡Œ debug æ¨¡å¼</h2>
<ul>
<li>æ–¹å¼ä¸€
<ul>
<li>é€‰ä¸­è¦è¿›è¡Œ debug çš„ç¨‹åºï¼Œç‚¹å‡»å³ä¸Šè§’çš„ debug æŒ‰é’®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f52559e407cf4dd9af9438fc616abca5.png" width="288" height="82" />
<ul>
<li>æ–¹å¼äºŒ
<ul>
<li>åœ¨è¦è¿›è¡Œ debug çš„ç¨‹åºå¤„å³é”®ï¼Œé€‰ä¸­ä¸‹å›¾é€‰é¡¹</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/a703e498d8dc4e91be40b3ba06a7a5be.png" width="386" height="449" />
<h2 id="3-é‡æ–°æ‰§è¡Œdebug"><a class="markdownIt-Anchor" href="#3-é‡æ–°æ‰§è¡Œdebug">#</a> 3ã€é‡æ–°æ‰§è¡Œ debug</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šå…³é—­å½“å‰ debug çš„ç¨‹åºå¹¶é‡æ–°å¯åŠ¨ debug</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/6a18ce960271427892dbc4a8df8e568d.png" width="832" height="308" />
<h2 id="4-è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ"><a class="markdownIt-Anchor" href="#4-è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ">#</a> 4ã€è®©ç¨‹åºæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„æŒ‰é’®ï¼Œdebug ä¼šç»§ç»­è¿è¡Œç¨‹åºï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹åæš‚åœ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/5347586e6a414e7fbacc2863e4e7f44d.png" width="851" height="301" />
<ul>
<li>ä¸¾ä¾‹
<ul>
<li>ä¸‹å›¾æ˜¯ä¸€ä¸ªå¾ªç¯æ“ä½œï¼Œåœ¨æ‰“æ–­ç‚¹çš„ä½ç½®ç‚¹å‡»ä¸Šé¢è¯´çš„æŒ‰é’®ï¼Œç›¸å½“äºå†å¾ªç¯ä¸€æ¬¡ï¼Œåˆ°ä»£ç ç¬¬ 9 è¡Œæ—¶åœæ­¢</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/4653841c52c54a3183914354054609dd.png" width="818" height="336" />
<h2 id="5-è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç "><a class="markdownIt-Anchor" href="#5-è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç ">#</a> 5ã€è®©æ–­ç‚¹å¤„çš„ä»£ç å†åŠ ä¸€è¡Œä»£ç </h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„åŠ å·ï¼Œå¯ä»¥åœ¨æ–­ç‚¹å¤„åŠ ä¸€è¡Œä»£ç ï¼Œæ¯”å¦‚ä¸‹å›¾ä¸­çš„ count++ å³ä¸ºæ–°æ·»åŠ çš„ä»£ç 
<ul>
<li>é€‰ä¸­ count++ï¼Œå³é”®ç‚¹å‡» Edit å¯ä»¥ç¼–è¾‘è¯¥ä»£ç </li>
<li>é€‰ä¸­è¯¥è¡Œä»£ç ï¼ˆcount++ï¼‰ï¼Œç‚¹å‡»åŠ å·ä¸‹é¢çš„å‡å·ï¼Œå¯ä»¥åˆ é™¤è¯¥è¡Œä»£ç </li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/b7843e76b1b64b488e93c9cd8b6e72a6.png" width="865" height="266" />
<ul>
<li>é€‰ä¸­ä¸‹å›¾çš„çœ¼é•œï¼Œå˜ä¸ºåˆ†å±æ“ä½œ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/ac95d9ee4ebb4c2c8e573e623e34f779.png" width="1200" height="324" />
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/18ec87566c3340689daa95295557fa12.png" width="1200" height="302" />
<hr>
<p><strong>ä¸¾ä¾‹</strong></p>
<ul>
<li>ä¸‹å›¾æ˜¯æ²¡æ·»åŠ é¢å¤–ä»£ç ä¹‹å‰çš„æˆªå›¾</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/155c34d01574452f9924b608cb26a642.png" width="1163" height="567" />
<ul>
<li>æ·»åŠ ä¸€å¥ count++ï¼Œå¹¶ç‚¹å‡»å·¦è¾¹çº¢è‰²æ¡†ä¸­çš„æŒ‰é’®ï¼Œæ‰§è¡Œåˆ°ä¸‹ä¸€æ¬¡æ–­ç‚¹ï¼Œå³å¾ªç¯äº†ä¸€æ¬¡</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/33ebf61346304b9c9679c6f836ed99b7.png" width="1139" height="659" />
<ul>
<li>æ•ˆæœå’Œè¿è¡Œæ­¥éª¤è§ä¸‹å›¾</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/0994f7950ff1421ca6cf4116e1fafe23.png" width="1200" height="666" />
<h2 id="6-åœæ­¢debugç¨‹åº"><a class="markdownIt-Anchor" href="#6-åœæ­¢debugç¨‹åº">#</a> 6ã€åœæ­¢ debug ç¨‹åº</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®åœæ­¢ debug ç¨‹åº</li>
<li>æ³¨æ„
<ul>
<li>è¿è¡Œçš„å¦‚æœæ˜¯ javaSE é¡¹ç›®ï¼Œç‚¹ä¸€ä¸‹å°±åœæ­¢</li>
<li>è¿è¡Œçš„å¦‚æœæ˜¯ javaWeb é¡¹ç›®ï¼Œéœ€è¦ç‚¹ä¸¤ä¸‹
<ul>
<li>ç¬¬ä¸€ä¸‹åœæ­¢ä»£ç çš„å½“å‰çº¿ç¨‹</li>
<li>ç¬¬äºŒä¸‹åœæ­¢æœåŠ¡å™¨</li>
</ul>
</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/7ce1d0c26f4a45ec9050155f0f653557.png" width="882" height="304" />
<h2 id="7-æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹"><a class="markdownIt-Anchor" href="#7-æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹">#</a> 7ã€æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šæ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/5651d84b51cf45d1bab9072c4c7d1ccc.png" width="830" height="272" />
<ul>
<li>ç‚¹å‡»åå‡ºç°ä¸‹å›¾æ‰€ç¤ºç•Œé¢ï¼Œå¯ä»¥æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶ï¼Œè§ä¸‹ä¸€æ¡åŠŸèƒ½è§£é‡Š</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/93a8e0b13c4d45e3a4adf260d9ca24b6.png" width="1108" height="670" />
<h2 id="8-æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶"><a class="markdownIt-Anchor" href="#8-æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶">#</a> 8ã€æ·»åŠ æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶</h2>
<ul>
<li>é€‰ä¸­æ–­ç‚¹ï¼Œå³é”®åå³å¯ç¼–è¾‘æ–­ç‚¹è¿è¡Œçš„æ¡ä»¶
<ul>
<li>æ»¡è¶³æ¡ä»¶æ—¶ç¨‹åºæ‰ä¼šåœ¨è¯¥æ–­ç‚¹å¤„åœä¸‹</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/e6b57eeaa0294cdf9364c2b0f6a6cb25.png" width="1006" height="513" />
<ul>
<li>æ¯”å¦‚æ·»åŠ  i&gt;=5ï¼Œé‡æ–° debug åçš„æ•ˆæœå¦‚ä¸‹å›¾æ‰€ç¤º</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/82a7ffe03cd54958a8801e21eceb704a.png" width="918" height="645" />
<ul>
<li>æ­¤æ—¶ä¼šå‘ç°ç¬¬ 7 æ¡æ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹ä¿¡æ¯å¤„ï¼Œå¯ä»¥çœ‹åˆ°ä¸‹å›¾æ•ˆæœ</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/daab0ee1bfe94a329aa68db1c95f2080.png" width="1022" height="281" />
<h2 id="9-å±è”½æ‰€æœ‰æ–­ç‚¹"><a class="markdownIt-Anchor" href="#9-å±è”½æ‰€æœ‰æ–­ç‚¹">#</a> 9ã€å±è”½æ‰€æœ‰æ–­ç‚¹</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œå¯ä»¥å±è”½æ‰€æœ‰æ–­ç‚¹</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f7e06ed221044991be85af4fca6748f9.png" width="583" height="361" />
<ul>
<li>å±è”½å‰<br>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/677a8547e65844eebac684de9f46bc71.png" width="102" height="73" /></li>
<li>å±è”½å<br>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/46bb93d283a640df802eec5d8fd1bbab.png" width="81" height="56" /></li>
<li>å±è”½çš„æ–­ç‚¹åœ¨ debug çš„æ—¶å€™ä¸ä¼šè¿è¡Œ
<ul>
<li>å¦‚æœç¨‹åºè°ƒè¯•åè§‰å¾—æ²¡é—®é¢˜äº†ï¼Œå¯ä»¥å±è”½æ‰æ‰€æœ‰æ–­ç‚¹ç»§ç»­è¿è¡Œç¨‹åºæŸ¥çœ‹æ•ˆæœ</li>
</ul>
</li>
</ul>
<h2 id="10-æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®"><a class="markdownIt-Anchor" href="#10-æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®">#</a> 10ã€æŠŠå…‰æ ‡ç§»åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®åï¼Œä¼šæŠŠé¼ æ ‡å…‰æ ‡ç§»åŠ¨åˆ°å½“å‰ç¨‹åºè¿è¡Œä½ç½®
<ul>
<li>å½“ç¨‹åºä»£ç é‡å¾ˆå¤§çš„æ—¶å€™ï¼Œå¯ä»¥é€šè¿‡è¯¥æŒ‰é’®å¿«é€Ÿå®šä½åˆ°ç¨‹åºè¿è¡Œä½ç½®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/a44a214ccd894d52884cd8cd20e9665c.png" width="617" height="245" />
<ul>
<li>å¦‚ä¸‹å›¾æ‰€ç¤º
<ul>
<li>å‡è®¾ç¨‹åºè¿è¡Œåˆ°ç¬¬ 9 è¡Œæ–­ç‚¹å¤„ï¼Œé¼ æ ‡å…‰æ ‡åœ¨ç¬¬ 11 è¡Œï¼Œç‚¹å‡»è¯¥æŒ‰é’®åå…‰æ ‡å°±ä¼šç§»åŠ¨åˆ°ç¬¬ 9 è¡Œ</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/15566342c22e47b390f7922e06c080e9.png" width="648" height="129" />
<h2 id="11-å•æ­¥è·³è¿‡"><a class="markdownIt-Anchor" href="#11-å•æ­¥è·³è¿‡">#</a> 11ã€å•æ­¥è·³è¿‡</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾æŒ‰é’®ï¼Œä¼šä¸€è¡Œä¸€è¡Œæ‰§è¡Œè‡ªå·±ç¼–å†™çš„ä»£ç 
<ul>
<li>å¦‚æœç¢°åˆ°æ–¹æ³•ï¼Œè¯¥æŒ‰é’®ä¸ä¼šè¿›å…¥åˆ°è¯¥æ–¹æ³•å†…éƒ¨</li>
<li>å¿«æ·é”® F8</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/1c54b8240f6e4d719f8aae936a925fb2.png" width="544" height="201" />
<h2 id="12-å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ"><a class="markdownIt-Anchor" href="#12-å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ">#</a> 12ã€å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨çš„æ‰§è¡Œä¸€è¡Œä»£ç æ“ä½œ</h2>
<ul>
<li>ä¸‹å›¾ä¸­çš„è“è‰²ç®­å¤´å’Œçº¢è‰²ç®­å¤´éƒ½å¯ä»¥æ‰§è¡Œä¸€è¡Œä»£ç ï¼Œå¦‚æœé‡åˆ°æ–¹æ³•æ—¶ä¼šè¿›å…¥æ–¹æ³•å†…éƒ¨ï¼ŒåŒºåˆ«åœ¨äº
<ul>
<li>è“è‰²ç®­å¤´åªä¼šè·³è¿›è‡ªå·±å†™çš„æ–¹æ³•ï¼Œå¦‚æœæ˜¯ç³»ç»Ÿå·²ç»å†™å¥½çš„æ–¹æ³•ï¼Œè“è‰²ç®­å¤´æ— æ³•è·³å…¥è¯¥æ–¹æ³•</li>
<li>çº¢è‰²ç®­å¤´ä¸ç®¡æ˜¯è‡ªå·±å†™çš„æ–¹æ³•ï¼Œè¿˜æ˜¯ç³»ç»Ÿå·²ç»å®šä¹‰å¥½çš„æ–¹æ³•ï¼Œéƒ½å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/23a065624b024b29ba358d96c1e827eb.png" width="852" height="271" />
<ul>
<li>å¦‚ä¸‹å›¾æ‰€ç¤º
<ul>
<li>ArrayList çš„ add æ–¹æ³•æ˜¯ç³»ç»Ÿå·²ç»å†™å¥½çš„ï¼Œè“è‰²ç®­å¤´æ— æ³•è·³å…¥æ–¹æ³•å†…éƒ¨ï¼Œä½†æ˜¯çº¢è‰²ç®­å¤´å¯ä»¥è·³å…¥æ–¹æ³•å†…éƒ¨</li>
<li>printMessageï¼ˆï¼‰æ˜¯è‡ªå®šä¹‰æ–¹æ³•ï¼Œçº¢è‰²å’Œè“è‰²ç®­å¤´éƒ½å¯ä»¥è·³å…¥è¯¥æ–¹æ³•å†…éƒ¨</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/f24471618ac74e69842c047606635c13.png" width="811" height="762" />
<h2 id="13-è·³å‡ºæ–¹æ³•"><a class="markdownIt-Anchor" href="#13-è·³å‡ºæ–¹æ³•">#</a> 13ã€è·³å‡ºæ–¹æ³•</h2>
<ul>
<li>ä¸‹å›¾çš„ä¸¤ä¸ªæŒ‰é’®éƒ½å¯ä»¥è·³å‡ºæ–¹æ³•
<ul>
<li>ç¬¬äºŒä¸ªæŒ‰é’®æ˜¯å…³é—­çª—å£çš„æ„æ€ï¼ŒåŒæ ·å¯ä»¥èµ·åˆ°è·³å‡ºæ–¹æ³•çš„ä½œç”¨</li>
<li>åœ¨è¿›å…¥æ–¹æ³•å†…éƒ¨çš„æ—¶å€™ä½¿ç”¨è¿™ä¸¤ä¸ªæŒ‰é’®</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/0deedd480bd94b0f9d93aab8bc5d33d1.png" width="514" height="238" />
<h2 id="14-ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®"><a class="markdownIt-Anchor" href="#14-ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®">#</a> 14ã€ç›´æ¥æ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨ä½ç½®</h2>
<ul>
<li>ç‚¹å‡»ä¸‹å›¾çš„æŒ‰é’®ï¼Œç¨‹åºä¼šæ‰§è¡Œåˆ°å…‰æ ‡æ‰€åœ¨çš„ä½ç½®
<ul>
<li>å‰ææ˜¯å…‰æ ‡å‰é¢æ²¡æœ‰æ–­ç‚¹ï¼Œå¦åˆ™ç¨‹åºè¿˜æ˜¯ä¼šåœ¨å…‰æ ‡å‰é¢çš„æ–­ç‚¹å¤„æš‚åœ</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/75d500280cad4a7497a31bb49c1a73a4.png" width="616" height="247" />
<h2 id="15-åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨debugçš„æ•°æ®"><a class="markdownIt-Anchor" href="#15-åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨debugçš„æ•°æ®">#</a> 15ã€åœ¨æ§åˆ¶å°æ”¹å˜æ­£åœ¨ debug çš„æ•°æ®</h2>
<ul>
<li>åœ¨æ§åˆ¶å°é€‰ä¸­æŸä¸ªå˜é‡ï¼Œå³é”®ç‚¹å‡» SetÂ Value å¯ä»¥æ”¹å˜è¯¥å˜é‡çš„å€¼
<ul>
<li>å¦‚æœæƒ³æµ‹è¯•æŸä¸ªåœ°æ–¹çš„æ•°æ®å¦‚æœæ˜¯æ­£ç¡®çš„ä¼šæ˜¯ä»€ä¹ˆæ•ˆæœï¼Œå¯ä»¥æ‰‹åŠ¨æ›´æ”¹è¯¥å¤„å˜é‡çš„å€¼</li>
</ul>
</li>
</ul>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/9fcd3a72eebf47a9be694fabec9549cd.png" width="1003" height="304" />
<p>è¡¥å……ï¼šdebug è°ƒè¯•çœ‹ä»£ç æ—¶ï¼Œä¸€èˆ¬ç”¨ F9 è·³åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹ï¼Œæ‰“æ–­ç‚¹çš„ç›®çš„æ˜¯ä½ æƒ³çœ‹ç¨‹åºæ‰§è¡Œåˆ°è¿™ä¸ªä½ç½®æ—¶ä¼šæœ‰ä»€ä¹ˆæ•ˆæœï¼Œæˆ–è€…æ˜¯åˆ°è¾¾æ–­ç‚¹çš„ä½ç½®åå†ç»§ç»­å¾€ä¸‹çœ‹å®ç°çš„è¿‡ç¨‹ï¼›ç”¨ F7 å»è·³è¿›æ–¹æ³•å†…éƒ¨ï¼Œçœ‹å…·ä½“çš„å®ç°ç»†èŠ‚ï¼›ç”¨ F8 å»çœ‹å½“å‰ä½ç½®ä»£ç å¾€ä¸‹çš„æ‰§è¡Œæƒ…å†µï¼ˆä¸è·³å…¥å…·ä½“æ–¹æ³•çš„å†…éƒ¨ï¼‰</p>
<h4 id="åŸæ–‡é“¾æ¥httpsblogcsdnnetfuture_god_qrarticledetails121250865"><a class="markdownIt-Anchor" href="#åŸæ–‡é“¾æ¥httpsblogcsdnnetfuture_god_qrarticledetails121250865">#</a> åŸæ–‡é“¾æ¥ï¼š<a target="_blank" rel="noopener" href="https://blog.csdn.net/future_god_qr/article/details/121250865">https://blog.csdn.net/future_god_qr/article/details/121250865</a></h4>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-05-05T01:57:09.000Z" title="2023/5/5 09:57:09">2023-05-05</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-05-05T02:03:30.951Z" title="2023/5/5 10:03:30">2023-05-05</time>æ›´æ–°</span><span class="level-item">11 åˆ†é’Ÿè¯»å®Œ (å¤§çº¦1580ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/05/05/%E3%80%90%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E3%80%91%E7%99%BE%E5%BA%A6%E6%96%87%E5%BF%83%E4%B8%80%E8%A8%80%E5%A4%A7%E5%9E%8B%E8%AF%AD%E8%A8%80%E6%A8%A1%E5%9E%8B%E6%8E%A5%E5%85%A5%E6%95%99%E7%A8%8B/">ã€æ–‡å¿ƒä¸€è¨€ã€‘ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="æ–‡å¿ƒä¸€è¨€ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹"><a class="markdownIt-Anchor" href="#æ–‡å¿ƒä¸€è¨€ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹">#</a> ã€æ–‡å¿ƒä¸€è¨€ã€‘ç™¾åº¦æ–‡å¿ƒä¸€è¨€å¤§å‹è¯­è¨€æ¨¡å‹æ¥å…¥æ•™ç¨‹</h1>
<h5 id="æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“å®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…-è‡ªç„¶-æœ‰è¶£çš„å¤šè½®å¯¹è¯æ¶µç›–äº†ç”Ÿæ´»-å¨±ä¹-æ•™è‚²-å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯-æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„apiè°ƒç”¨æ¥å£ä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„aièƒ½åŠ›èµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´"><a class="markdownIt-Anchor" href="#æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“å®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…-è‡ªç„¶-æœ‰è¶£çš„å¤šè½®å¯¹è¯æ¶µç›–äº†ç”Ÿæ´»-å¨±ä¹-æ•™è‚²-å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯-æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„apiè°ƒç”¨æ¥å£ä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„aièƒ½åŠ›èµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´">#</a> æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦çš„æ™ºèƒ½å¯¹è¯äº§å“ï¼Œå®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…ã€è‡ªç„¶ã€æœ‰è¶£çš„å¤šè½®å¯¹è¯ï¼Œæ¶µç›–äº†ç”Ÿæ´»ã€å¨±ä¹ã€æ•™è‚²ã€å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯ã€‚æ–‡å¿ƒä¸€è¨€ä¸ä»…å¯ä»¥ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„åº”ç”¨ä¾›ç”¨æˆ·ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘çš„ API è°ƒç”¨æ¥å£ï¼Œä¸ºå„è¡Œå„ä¸šçš„ä¼ä¸šå®¢æˆ·æä¾›å¼ºå¤§è€Œçµæ´»çš„ AI èƒ½åŠ›ï¼Œèµ‹èƒ½æ›´å¤šè¡Œä¸šä¼™ä¼´ã€‚</h5>
<h5 id="é‚£ä¹ˆä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·å¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„aiè§£å†³æ–¹æ¡ˆå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆ"><a class="markdownIt-Anchor" href="#é‚£ä¹ˆä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·å¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢æœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„aiè§£å†³æ–¹æ¡ˆå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆ">#</a> é‚£ä¹ˆï¼Œä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·ï¼Œå¦‚ä½•æ¥å…¥æ–‡å¿ƒä¸€è¨€å‘¢ï¼Ÿæœ¬æ–‡å°†ä¸ºæ‚¨ä»‹ç»ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„ AI è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆã€‚</h5>
<h2 id="01ç¬¬ä¸€æ­¥æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·"><a class="markdownIt-Anchor" href="#01ç¬¬ä¸€æ­¥æ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·">#</a> <strong>01</strong> ç¬¬ä¸€æ­¥ï¼šæ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·</h2>
<p>è¦ä½¿ç”¨ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„æœåŠ¡å’Œäº§å“ï¼Œæ‚¨é¦–å…ˆéœ€è¦æ³¨å†Œä¸€ä¸ªç™¾åº¦æ™ºèƒ½äº‘è´¦å·ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œæ³¨å†Œï¼š</p>
<ul>
<li>è®¿é—®ç™¾åº¦æ™ºèƒ½äº‘å®˜ç½‘ (<a target="_blank" rel="noopener" href="https://cloud.baidu.com/">https://cloud.baidu.com/</a>)ï¼Œç‚¹å‡»å³ä¸Šè§’ â€œå…è´¹æ³¨å†Œâ€ æŒ‰é’®ã€‚</li>
<li>è¾“å…¥æ‚¨çš„æ‰‹æœºå·ç ï¼Œå¹¶è·å–éªŒè¯ç ã€‚</li>
<li>è®¾ç½®æ‚¨çš„ç™»å½•å¯†ç ï¼Œå¹¶åŒæ„æœåŠ¡åè®®ã€‚</li>
<li>å®Œæˆå®åè®¤è¯ï¼Œå¹¶é€‰æ‹©è´¦å·ç±»å‹ (ä¸ªäººæˆ–ä¼ä¸š)ã€‚</li>
<li>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œæ‚¨å°±æˆåŠŸæ³¨å†Œäº†ä¸€ä¸ªç™¾åº¦æ™ºèƒ½äº‘è´¦å·ã€‚</li>
</ul>
<h2 id="02ç¬¬äºŒæ­¥ç”³è¯·æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æƒé™"><a class="markdownIt-Anchor" href="#02ç¬¬äºŒæ­¥ç”³è¯·æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æƒé™">#</a> <strong>02</strong> ç¬¬äºŒæ­¥ï¼šç”³è¯·æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æƒé™</h2>
<p>â€‹		è¦ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦ç”³è¯·ç›¸åº”çš„æƒé™ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œç”³è¯·ï¼š</p>
<ul>
<li><strong>ç™»å½•ç™¾åº¦æ™ºèƒ½äº‘æ§åˆ¶å° (<a target="_blank" rel="noopener" href="https://console.bce.baidu.com/">https://console.bce.baidu.com/</a>)ï¼Œç‚¹å‡»å·¦ä¾§å¯¼èˆªæ  â€œäººå·¥æ™ºèƒ½â€ ä¸‹æ‹‰èœå•ä¸­çš„ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é€‰é¡¹ã€‚</strong></li>
<li><strong>åœ¨è‡ªç„¶è¯­è¨€å¤„ç†é¡µé¢ä¸­ï¼Œæ‰¾åˆ° â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ï¼Œå¹¶ç‚¹å‡» â€œç«‹å³ä½¿ç”¨â€ æŒ‰é’®ã€‚</strong></li>
<li><strong>åœ¨å¼¹å‡ºçª—å£ä¸­å¡«å†™ç›¸å…³ä¿¡æ¯ï¼Œå¹¶æäº¤ç”³è¯·ã€‚</strong></li>
<li><strong>ç­‰å¾…å®¡æ ¸ç»“æœã€‚å®¡æ ¸é€šè¿‡åï¼Œæ‚¨å°±å¯ä»¥åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹å¹¶ç®¡ç†æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æƒé™ã€‚</strong></li>
</ul>
<h2 id="03ç¬¬ä¸‰æ­¥é…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£"><a class="markdownIt-Anchor" href="#03ç¬¬ä¸‰æ­¥é…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£">#</a> <strong>03</strong> ç¬¬ä¸‰æ­¥ï¼šé…ç½®å¹¶æµ‹è¯•æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£</h2>
<p>â€‹		è¿›å…¥ï¼š<a target="_blank" rel="noopener" href="https://wenxin.baidu.com/user/key">https://wenxin.baidu.com/user/key</a></p>
<p>â€‹		ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦é…ç½®ç›¸å…³å‚æ•°ï¼Œå¹¶è¿›è¡Œæµ‹è¯•ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œé…ç½®å’Œæµ‹è¯•ï¼š</p>
<ul>
<li>åœ¨æ§åˆ¶å°ä¸­è¿›å…¥ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é¡µé¢ï¼Œå¹¶ç‚¹å‡» â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ä¸‹æ–¹çš„ â€œç®¡ç†â€ æŒ‰é’®ï¼Œè¿›å…¥æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„é…ç½®é¡µé¢ã€‚</li>
<li>åœ¨é…ç½®é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¹¶ä¿®æ”¹æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¦‚åº”ç”¨åç§°ã€åº”ç”¨æè¿°ã€åº”ç”¨ç±»å‹ç­‰ã€‚</li>
<li>æ‚¨è¿˜å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­è®¾ç½®æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„å®‰å…¨è®¤è¯æ–¹å¼ï¼Œå¦‚ Access Key ID å’Œ Secret Access Keyã€‚è¿™äº›æ˜¯æ‚¨è°ƒç”¨æ–‡å¿ƒä¸€è¨€ API æ—¶éœ€è¦æä¾›çš„èº«ä»½å‡­è¯ï¼Œå»ºè®®æ‚¨å¦¥å–„ä¿ç®¡ï¼Œå¹¶å®šæœŸæ›´æ¢ã€‚</li>
<li>æ‚¨è¿˜å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­è®¾ç½®æ‚¨çš„æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„é…é¢å’Œé™æµç­–ç•¥ï¼Œå¦‚æ¯æ—¥è¯·æ±‚æ¬¡æ•°ã€æ¯ç§’è¯·æ±‚æ¬¡æ•°ç­‰ã€‚è¿™äº›æ˜¯ä¸ºäº†ä¿éšœæ‚¨å’Œå…¶ä»–ç”¨æˆ·çš„æœåŠ¡è´¨é‡å’Œå®‰å…¨æ€§ï¼Œå»ºè®®æ‚¨æ ¹æ®è‡ªå·±çš„ä¸šåŠ¡éœ€æ±‚åˆç†åˆ†é…ï¼Œå¹¶é¿å…è¶…å‡ºé™åˆ¶ã€‚</li>
<li>åœ¨å®Œæˆä»¥ä¸Šé…ç½®åï¼Œæ‚¨å°±å¯ä»¥åœ¨é…ç½®é¡µé¢ä¸­ç‚¹å‡» â€œåœ¨çº¿æµ‹è¯•â€ æŒ‰é’®ï¼Œè¿›è¡Œæ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„æµ‹è¯•ã€‚æµ‹è¯•æ—¶ï¼Œæ‚¨éœ€è¦è¾“å…¥ä¸€ä¸ªå¯¹è¯è¯­å¥ï¼Œå¹¶é€‰æ‹©ä¸€ä¸ªå¯¹è¯é¢†åŸŸå’Œåœºæ™¯ã€‚ç„¶åç‚¹å‡» â€œå‘é€â€ æŒ‰é’®ï¼Œå³å¯æŸ¥çœ‹æ–‡å¿ƒä¸€è¨€ API è¿”å›çš„å¯¹è¯å›å¤ã€‚</li>
</ul>
<h2 id="04ç¬¬å››æ­¥é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£"><a class="markdownIt-Anchor" href="#04ç¬¬å››æ­¥é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€apiè°ƒç”¨æ¥å£">#</a> <strong>04</strong> ç¬¬å››æ­¥ï¼šé›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£</h2>
<p>â€‹		è¦é›†æˆå¹¶ä½¿ç”¨æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£ï¼Œæ‚¨éœ€è¦æ ¹æ®è‡ªå·±çš„å¼€å‘ç¯å¢ƒå’Œè¯­è¨€é€‰æ‹©åˆé€‚çš„ SDK æˆ–å·¥å…·ï¼Œå¹¶ç¼–å†™ç›¸åº”çš„ä»£ç ã€‚ç™¾åº¦æ™ºèƒ½äº‘æä¾›äº†å¤šç§è¯­è¨€å’Œå¹³å°æ”¯æŒçš„ SDK æˆ–å·¥å…·ï¼Œå¦‚ Javaã€Pythonã€PHPã€Node.jsã€Androidã€iOS ç­‰ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è¿›è¡Œé›†æˆå’Œä½¿ç”¨ï¼š</p>
<ul>
<li>åœ¨æ§åˆ¶å°ä¸­è¿›å…¥ â€œè‡ªç„¶è¯­è¨€å¤„ç†â€ é¡µé¢ï¼Œå¹¶ç‚¹å‡» â€œæ–‡å¿ƒä¸€è¨€â€ äº§å“ä¸‹æ–¹çš„ â€œæ–‡æ¡£â€ æŒ‰é’®ï¼Œè¿›å…¥æ–‡å¿ƒä¸€è¨€ API è°ƒç”¨æ¥å£çš„æ–‡æ¡£é¡µé¢ã€‚</li>
<li>åœ¨æ–‡æ¡£é¡µé¢ä¸­ï¼Œæ‚¨å¯ä»¥æŸ¥çœ‹å¹¶ä¸‹è½½æ‚¨æ‰€éœ€è¦çš„ SDK æˆ–å·¥å…·ï¼Œå¹¶å‚è€ƒç›¸å…³çš„ç¤ºä¾‹ä»£ç å’Œè¯´æ˜è¿›è¡Œé›†æˆå’Œä½¿ç”¨ã€‚</li>
<li>åœ¨å®Œæˆé›†æˆå’Œä½¿ç”¨åï¼Œæ‚¨å°±å¯ä»¥åœ¨æ‚¨çš„åº”ç”¨ä¸­è°ƒç”¨æ–‡å¿ƒä¸€è¨€ APIï¼Œå®ç°ä¸ç”¨æˆ·çš„æ™ºèƒ½å¯¹è¯åŠŸèƒ½ã€‚</li>
</ul>
<h1 id="ç»“è¯­"><a class="markdownIt-Anchor" href="#ç»“è¯­">#</a> ç»“è¯­ï¼š</h1>
<p>â€‹		æ–‡å¿ƒä¸€è¨€æ˜¯ç™¾åº¦æ™ºèƒ½äº‘æ¨å‡ºçš„ä¸€æ¬¾åŸºäºå¤§è§„æ¨¡è‡ªç„¶è¯­è¨€ç”Ÿæˆæ¨¡å‹ (ChatGPT) çš„æ™ºèƒ½å¯¹è¯äº§å“ï¼Œå®ƒå¯ä»¥ä¸ç”¨æˆ·è¿›è¡Œæµç•…ã€è‡ªç„¶ã€æœ‰è¶£çš„å¤šè½®å¯¹è¯ï¼Œæ¶µç›–äº†ç”Ÿæ´»ã€å¨±ä¹ã€æ•™è‚²ã€å•†åŠ¡ç­‰å¤šä¸ªé¢†åŸŸå’Œåœºæ™¯ã€‚æœ¬æ–‡ä»‹ç»äº†ä½œä¸ºä¸€ä¸ªä¼ä¸šå®¢æˆ·ï¼Œå¦‚ä½•é€šè¿‡ç™¾åº¦æ™ºèƒ½äº‘æä¾›çš„å…¨é¢çš„ AI è§£å†³æ–¹æ¡ˆï¼Œå¿«é€Ÿå®ç°ä¸æ–‡å¿ƒä¸€è¨€çš„å¯¹æ¥å’Œé›†æˆã€‚</p>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-04-29T11:42:37.000Z" title="2023/4/29 19:42:37">2023-04-29</time>å‘è¡¨</span><span class="level-item"><time dateTime="2023-04-29T11:44:45.229Z" title="2023/4/29 19:44:45">2023-04-29</time>æ›´æ–°</span><span class="level-item">2 å°æ—¶è¯»å®Œ (å¤§çº¦20643ä¸ªå­—)</span></div></div><p class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/04/29/%E3%80%90%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%9123%20%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E8%AF%A6%E8%A7%A3%EF%BC%88%E5%85%A823%E7%A7%8D%EF%BC%89/">ã€è®¾è®¡æ¨¡å¼ã€‘23 ç§è®¾è®¡æ¨¡å¼è¯¦è§£ï¼ˆå…¨23ç§ï¼‰</a></p><div class="content"><p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E6%89%AB%E7%A0%81_%E6%90%9C%E7%B4%A2%E8%81%94%E5%90%88%E4%BC%A0%E6%92%AD%E6%A0%B7%E5%BC%8F-%E6%A0%87%E5%87%86%E8%89%B2%E7%89%88.png" alt="InterviewCoder"></p>
<h1 id="è®¾è®¡æ¨¡å¼23-ç§è®¾è®¡æ¨¡å¼è¯¦è§£å…¨23ç§"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼23-ç§è®¾è®¡æ¨¡å¼è¯¦è§£å…¨23ç§">#</a> ã€è®¾è®¡æ¨¡å¼ã€‘23 ç§è®¾è®¡æ¨¡å¼è¯¦è§£ï¼ˆå…¨ 23 ç§ï¼‰</h1>
<h1 id="è®¾è®¡æ¨¡å¼çš„åˆ†ç±»"><a class="markdownIt-Anchor" href="#è®¾è®¡æ¨¡å¼çš„åˆ†ç±»">#</a> è®¾è®¡æ¨¡å¼çš„åˆ†ç±»</h1>
<p>æ€»ä½“æ¥è¯´è®¾è®¡æ¨¡å¼åˆ†ä¸ºä¸‰å¤§ç±»ï¼š</p>
<p>åˆ›å»ºå‹æ¨¡å¼ï¼Œå…±äº”ç§ï¼šå·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€‚</p>
<p>ç»“æ„å‹æ¨¡å¼ï¼Œå…±ä¸ƒç§ï¼šé€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚</p>
<p>è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…±åä¸€ç§ï¼šç­–ç•¥æ¨¡å¼ã€æ¨¡æ¿æ–¹æ³•æ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€è¿­ä»£å­æ¨¡å¼ã€è´£ä»»é“¾æ¨¡å¼ã€å‘½ä»¤æ¨¡å¼ã€å¤‡å¿˜å½•æ¨¡å¼ã€çŠ¶æ€æ¨¡å¼ã€è®¿é—®è€…æ¨¡å¼ã€ä¸­ä»‹è€…æ¨¡å¼ã€è§£é‡Šå™¨æ¨¡å¼ã€‚</p>
<h2 id=""><a class="markdownIt-Anchor" href="#">#</a> </h2>
<h1 id="a-åˆ›å»ºæ¨¡å¼5ç§"><a class="markdownIt-Anchor" href="#a-åˆ›å»ºæ¨¡å¼5ç§">#</a> Aã€åˆ›å»ºæ¨¡å¼ï¼ˆ5 ç§ï¼‰</h1>
<p><strong>å·¥å‚æ–¹æ³•æ¨¡å¼ã€æŠ½è±¡å·¥å‚æ¨¡å¼ã€å•ä¾‹æ¨¡å¼ã€å»ºé€ è€…æ¨¡å¼ã€åŸå‹æ¨¡å¼ã€‚</strong></p>
<h2 id="1-å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#1-å·¥å‚æ¨¡å¼">#</a> 1 å·¥å‚æ¨¡å¼</h2>
<h3 id="11-ç®€å•å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#11-ç®€å•å·¥å‚æ¨¡å¼">#</a> 1.1 ç®€å•å·¥å‚æ¨¡å¼</h3>
<p>** å®šä¹‰ï¼š** å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„ç±»ï¼Œç”±è¿™ä¸ªç±»æ¥å°è£…å®ä¾‹åŒ–å¯¹è±¡çš„è¡Œä¸ºã€‚</p>
<p><strong>ä¸¾ä¾‹ï¼š</strong>ï¼ˆæˆ‘ä»¬ä¸¾ä¸€ä¸ª pizza å·¥å‚çš„ä¾‹å­ï¼‰</p>
<p>pizza å·¥å‚ä¸€å…±ç”Ÿäº§ä¸‰ç§ç±»å‹çš„ pizzaï¼šchesse,pepper,greakã€‚é€šè¿‡å·¥å‚ç±»ï¼ˆSimplePizzaFactoryï¼‰å®ä¾‹åŒ–è¿™ä¸‰ç§ç±»å‹çš„å¯¹è±¡ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609001610870.png" class="has" width="503" height="276" />
<p>å·¥å‚ç±»çš„ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SimplePizzaFactory</span> &#123;</span><br><span class="line">       <span class="keyword">public</span> Pizza <span class="title function_">CreatePizza</span><span class="params">(String ordertype)</span> &#123;</span><br><span class="line">              <span class="type">Pizza</span> <span class="variable">pizza</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">              <span class="keyword">if</span> (ordertype.equals(<span class="string">&quot;cheese&quot;</span>)) &#123;</span><br><span class="line">                     pizza = <span class="keyword">new</span> <span class="title class_">CheesePizza</span>();</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">&quot;greek&quot;</span>)) &#123;</span><br><span class="line">                     pizza = <span class="keyword">new</span> <span class="title class_">GreekPizza</span>();</span><br><span class="line">              &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ordertype.equals(<span class="string">&quot;pepper&quot;</span>)) &#123;</span><br><span class="line">                     pizza = <span class="keyword">new</span> <span class="title class_">PepperPizza</span>();</span><br><span class="line">              &#125;</span><br><span class="line">              <span class="keyword">return</span> pizza;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç®€å•å·¥å‚å­˜åœ¨çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•ï¼š</strong> ç®€å•å·¥å‚æ¨¡å¼æœ‰ä¸€ä¸ªé—®é¢˜å°±æ˜¯ï¼Œç±»çš„åˆ›å»ºä¾èµ–å·¥å‚ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæƒ³è¦æ‹“å±•ç¨‹åºï¼Œå¿…é¡»å¯¹å·¥å‚ç±»è¿›è¡Œä¿®æ”¹ï¼Œè¿™è¿èƒŒäº†å¼€é—­åŸåˆ™ï¼Œæ‰€ä»¥ï¼Œä»è®¾è®¡è§’åº¦è€ƒè™‘ï¼Œæœ‰ä¸€å®šçš„é—®é¢˜ï¼Œå¦‚ä½•è§£å†³ï¼Ÿæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•å¹¶åˆ›å»ºå¤šä¸ªä¸åŒçš„å·¥å‚ç±»å®ç°è¯¥æŠ½è±¡æ–¹æ³•ï¼Œè¿™æ ·ä¸€æ—¦éœ€è¦å¢åŠ æ–°çš„åŠŸèƒ½ï¼Œç›´æ¥å¢åŠ æ–°çš„å·¥å‚ç±»å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ä¿®æ”¹ä¹‹å‰çš„ä»£ç ã€‚è¿™ç§æ–¹æ³•ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„å·¥å‚æ–¹æ³•æ¨¡å¼ã€‚</p>
<h3 id="12-å·¥å‚æ–¹æ³•æ¨¡å¼"><a class="markdownIt-Anchor" href="#12-å·¥å‚æ–¹æ³•æ¨¡å¼">#</a> 1.2 å·¥å‚æ–¹æ³•æ¨¡å¼</h3>
<p>** å®šä¹‰ï¼š** å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼å°†å¯¹è±¡çš„å®ä¾‹åŒ–æ¨è¿Ÿåˆ°å­ç±»ã€‚</p>
<p><strong>ä¸¾ä¾‹ï¼š</strong>ï¼ˆæˆ‘ä»¬ä¾ç„¶ä¸¾ pizza å·¥å‚çš„ä¾‹å­ï¼Œä¸è¿‡è¿™ä¸ªä¾‹å­ä¸­ï¼Œpizza äº§åœ°æœ‰ä¸¤ä¸ªï¼šä¼¦æ•¦å’Œçº½çº¦ï¼‰ã€‚æ·»åŠ äº†ä¸€ä¸ªæ–°çš„äº§åœ°ï¼Œå¦‚æœç”¨ç®€å•å·¥å‚æ¨¡å¼çš„çš„è¯ï¼Œæˆ‘ä»¬è¦å»ä¿®æ”¹å·¥å‚ä»£ç ï¼Œå¹¶ä¸”ä¼šå¢åŠ ä¸€å †çš„ if else è¯­å¥ã€‚è€Œå·¥å‚æ–¹æ³•æ¨¡å¼å…‹æœäº†ç®€å•å·¥å‚è¦ä¿®æ”¹ä»£ç çš„ç¼ºç‚¹ï¼Œå®ƒä¼šç›´æ¥åˆ›å»ºä¸¤ä¸ªå·¥å‚ï¼Œçº½çº¦å·¥å‚å’Œä¼¦æ•¦å·¥å‚ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609001610872.png" class="has" width="279" height="144" />
<p>OrderPizza ä¸­æœ‰ä¸ªæŠ½è±¡çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">abstract Pizza createPizza();</span><br></pre></td></tr></table></figure>
<p>ä¸¤ä¸ªå·¥å‚ç±»ç»§æ‰¿ OrderPizza å¹¶å®ç°æŠ½è±¡æ–¹æ³•ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class LDOrderPizza extends OrderPizza &#123;</span><br><span class="line">       Pizza createPizza(String ordertype) &#123;</span><br><span class="line">              Pizza pizza = null;</span><br><span class="line">              if (ordertype.equals(&quot;cheese&quot;)) &#123;</span><br><span class="line">                     pizza = new LDCheesePizza();</span><br><span class="line">              &#125; else if (ordertype.equals(&quot;pepper&quot;)) &#123;</span><br><span class="line">                     pizza = new LDPepperPizza();</span><br><span class="line">              &#125;</span><br><span class="line">              return pizza;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class NYOrderPizza extends OrderPizza &#123;</span><br><span class="line"></span><br><span class="line">    Pizza createPizza(String ordertype) &#123;</span><br><span class="line">        Pizza pizza = null;</span><br><span class="line"></span><br><span class="line">        if (ordertype.equals(&quot;cheese&quot;)) &#123;</span><br><span class="line">            pizza = new NYCheesePizza();</span><br><span class="line">        &#125; else if (ordertype.equals(&quot;pepper&quot;)) &#123;</span><br><span class="line">            pizza = new NYPepperPizza();</span><br><span class="line">        &#125;</span><br><span class="line">        return pizza;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ã€é€šè¿‡ä¸åŒçš„å·¥å‚ä¼šå¾—åˆ°ä¸åŒçš„å®ä¾‹åŒ–çš„å¯¹è±¡ï¼ŒPizzaStroe çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class PizzaStroe &#123;</span><br><span class="line">       public static void main(String[] args) &#123;</span><br><span class="line">              OrderPizza mOrderPizza;</span><br><span class="line">              mOrderPizza = new NYOrderPizza();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>** è§£å†³äº†ç®€å•å·¥å‚æ¨¡å¼çš„é—®é¢˜ï¼š** å¢åŠ ä¸€ä¸ªæ–°çš„ pizza äº§åœ°ï¼ˆåŒ—äº¬ï¼‰ï¼Œåªè¦å¢åŠ ä¸€ä¸ª BJOrderPizza ç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class BJOrderPizza extends OrderPizza &#123;</span><br><span class="line">       Pizza createPizza(String ordertype) &#123;</span><br><span class="line">              Pizza pizza = null;</span><br><span class="line">              if (ordertype.equals(&quot;cheese&quot;)) &#123;</span><br><span class="line">                     pizza = new LDCheesePizza();</span><br><span class="line">              &#125; else if (ordertype.equals(&quot;pepper&quot;)) &#123;</span><br><span class="line">                     pizza = new LDPepperPizza();</span><br><span class="line">              &#125;</span><br><span class="line">              return pizza;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å…¶å®è¿™ä¸ªæ¨¡å¼çš„å¥½å¤„å°±æ˜¯ï¼Œå¦‚æœä½ ç°åœ¨æƒ³å¢åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œåªéœ€åšä¸€ä¸ªå®ç°ç±»å°± OK äº†ï¼Œæ— éœ€å»æ”¹åŠ¨ç°æˆçš„ä»£ç ã€‚è¿™æ ·åšï¼Œæ‹“å±•æ€§è¾ƒå¥½ï¼</p>
<p>** å·¥å‚æ–¹æ³•å­˜åœ¨çš„é—®é¢˜ä¸è§£å†³æ–¹æ³•ï¼š** å®¢æˆ·ç«¯éœ€è¦åˆ›å»ºç±»çš„å…·ä½“çš„å®ä¾‹ã€‚ç®€å•æ¥è¯´å°±æ˜¯ç”¨æˆ·è¦è®¢çº½çº¦å·¥å‚çš„æŠ«è¨ï¼Œä»–å¿…é¡»å»çº½çº¦å·¥å‚ï¼Œæƒ³è®¢ä¼¦æ•¦å·¥å‚çš„æŠ«è¨ï¼Œå¿…é¡»å»ä¼¦æ•¦å·¥å‚ã€‚ å½“ä¼¦æ•¦å·¥å‚å’Œçº½çº¦å·¥å‚å‘ç”Ÿå˜åŒ–äº†ï¼Œç”¨æˆ·ä¹Ÿè¦è·Ÿç€å˜åŒ–ï¼Œè¿™æ— ç–‘å°±å¢åŠ äº†ç”¨æˆ·çš„æ“ä½œå¤æ‚æ€§ã€‚ä¸ºäº†è§£å†³è¿™ä¸€é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠå·¥å‚ç±»æŠ½è±¡ä¸ºæ¥å£ï¼Œç”¨æˆ·åªéœ€è¦å»æ‰¾é»˜è®¤çš„å·¥å‚æå‡ºè‡ªå·±çš„éœ€æ±‚ï¼ˆä¼ å…¥å‚æ•°ï¼‰ï¼Œä¾¿èƒ½å¾—åˆ°è‡ªå·±æƒ³è¦äº§å“ï¼Œè€Œä¸ç”¨æ ¹æ®äº§å“å»å¯»æ‰¾ä¸åŒçš„å·¥å‚ï¼Œæ–¹ä¾¿ç”¨æˆ·æ“ä½œã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥è¦è¯´çš„æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚</p>
<h3 id="13-æŠ½è±¡å·¥å‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#13-æŠ½è±¡å·¥å‚æ¨¡å¼">#</a> 1.3 æŠ½è±¡å·¥å‚æ¨¡å¼</h3>
<p>** å®šä¹‰ï¼š** å®šä¹‰äº†ä¸€ä¸ªæ¥å£ç”¨äºåˆ›å»ºç›¸å…³æˆ–æœ‰ä¾èµ–å…³ç³»çš„å¯¹è±¡æ—ï¼Œè€Œæ— éœ€æ˜ç¡®æŒ‡å®šå…·ä½“ç±»ã€‚</p>
<p><strong>ä¸¾ä¾‹ï¼š</strong>ï¼ˆæˆ‘ä»¬ä¾ç„¶ä¸¾ pizza å·¥å‚çš„ä¾‹å­ï¼Œpizza å·¥å‚æœ‰ä¸¤ä¸ªï¼šçº½çº¦å·¥å‚å’Œä¼¦æ•¦å·¥å‚ï¼‰ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609001610898.png" class="has" width="433" height="208" />
<p>å·¥å‚çš„æ¥å£ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface AbsFactory &#123;</span><br><span class="line">       Pizza CreatePizza(String ordertype) ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å·¥å‚çš„å®ç°ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class LDFactory implements AbsFactory &#123;</span><br><span class="line">       @Override</span><br><span class="line">       public Pizza CreatePizza(String ordertype) &#123;</span><br><span class="line">              Pizza pizza = null;</span><br><span class="line">              if (&quot;cheese&quot;.equals(ordertype)) &#123;</span><br><span class="line">                     pizza = new LDCheesePizza();</span><br><span class="line">              &#125; else if (&quot;pepper&quot;.equals(ordertype)) &#123;</span><br><span class="line">                     pizza = new LDPepperPizza();</span><br><span class="line">              &#125;</span><br><span class="line">              return pizza;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>PizzaStroe çš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class PizzaStroe &#123;</span><br><span class="line">       public static void main(String[] args) &#123;</span><br><span class="line">              OrderPizza mOrderPizza;</span><br><span class="line">              mOrderPizza = new OrderPizza(&quot;London&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>** è§£å†³äº†å·¥å‚æ–¹æ³•æ¨¡å¼çš„é—®é¢˜ï¼š** åœ¨æŠ½è±¡å·¥å‚ä¸­ PizzaStroe ä¸­åªéœ€è¦ä¼ å…¥å‚æ•°å°±å¯ä»¥å®ä¾‹åŒ–å¯¹è±¡ã€‚</p>
<h3 id="14-å·¥å‚æ¨¡å¼é€‚ç”¨çš„åœºåˆ"><a class="markdownIt-Anchor" href="#14-å·¥å‚æ¨¡å¼é€‚ç”¨çš„åœºåˆ">#</a> 1.4 å·¥å‚æ¨¡å¼é€‚ç”¨çš„åœºåˆ</h3>
<p>å¤§é‡çš„äº§å“éœ€è¦åˆ›å»ºï¼Œå¹¶ä¸”è¿™äº›äº§å“å…·æœ‰å…±åŒçš„æ¥å£ ã€‚</p>
<h3 id="15-ä¸‰ç§å·¥å‚æ¨¡å¼çš„ä½¿ç”¨é€‰æ‹©"><a class="markdownIt-Anchor" href="#15-ä¸‰ç§å·¥å‚æ¨¡å¼çš„ä½¿ç”¨é€‰æ‹©">#</a> 1.5  ä¸‰ç§å·¥å‚æ¨¡å¼çš„ä½¿ç”¨é€‰æ‹©</h3>
<p>ç®€å•å·¥å‚ ï¼š ç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„ä»»æ„äº§å“ã€‚ï¼ˆä¸æ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰</p>
<p>å·¥å‚æ–¹æ³• ï¼šç”¨æ¥ç”Ÿäº§åŒä¸€ç­‰çº§ç»“æ„ä¸­çš„å›ºå®šäº§å“ã€‚ï¼ˆæ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼‰</p>
<p>æŠ½è±¡å·¥å‚ ï¼šç”¨æ¥ç”Ÿäº§ä¸åŒäº§å“æ—çš„å…¨éƒ¨äº§å“ã€‚ï¼ˆæ”¯æŒæ‹“å±•å¢åŠ äº§å“ï¼›æ”¯æŒå¢åŠ äº§å“æ—ï¼‰</p>
<p>** ç®€å•å·¥å‚çš„é€‚ç”¨åœºåˆï¼š** åªæœ‰ä¼¦æ•¦å·¥å‚ï¼ˆåªæœ‰è¿™ä¸€ä¸ªç­‰çº§ï¼‰ï¼Œå¹¶ä¸”è¿™ä¸ªå·¥å‚åªç”Ÿäº§ä¸‰ç§ç±»å‹çš„ pizzaï¼šchesse,pepper,greakï¼ˆå›ºå®šäº§å“ï¼‰ã€‚</p>
<p><strong>å·¥å‚æ–¹æ³•çš„é€‚ç”¨åœºåˆ</strong>ï¼šç°åœ¨ä¸å…‰æœ‰ä¼¦æ•¦å·¥å‚ï¼Œè¿˜å¢è®¾äº†çº½çº¦å·¥å‚ï¼ˆä»ç„¶æ˜¯åŒä¸€ç­‰çº§ç»“æ„ï¼Œä½†æ˜¯æ”¯æŒäº†äº§å“çš„æ‹“å±•ï¼‰ï¼Œè¿™ä¸¤ä¸ªå·¥å‚ä¾ç„¶åªç”Ÿäº§ä¸‰ç§ç±»å‹çš„ pizzaï¼šchesse,pepper,greakï¼ˆå›ºå®šäº§å“ï¼‰ã€‚</p>
<p>** æŠ½è±¡å·¥å‚çš„é€‚ç”¨åœºåˆï¼š** ä¸å…‰å¢è®¾äº†çº½çº¦å·¥å‚ï¼ˆä»ç„¶æ˜¯åŒä¸€ç­‰çº§ç»“æ„ï¼Œä½†æ˜¯æ”¯æŒäº†äº§å“çš„æ‹“å±•ï¼‰ï¼Œè¿™ä¸¤ä¸ªå·¥å‚è¿˜å¢åŠ äº†ä¸€ç§æ–°çš„ç±»å‹çš„ pizzaï¼šchinese pizzaï¼ˆå¢åŠ äº§å“æ—ï¼‰ã€‚</p>
<p>** æ‰€ä»¥è¯´æŠ½è±¡å·¥å‚å°±åƒå·¥å‚ï¼Œè€Œå·¥å‚æ–¹æ³•åˆ™åƒæ˜¯å·¥å‚çš„ä¸€ç§äº§å“ç”Ÿäº§çº¿ã€‚<strong>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºå·¥å‚ï¼Œè€Œç”¨å·¥å‚æ–¹æ³•æ¨¡å¼åˆ›å»ºç”Ÿäº§çº¿ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼åˆ›å»ºä¼¦æ•¦å·¥å‚å’Œçº½çº¦å·¥å‚ï¼Œä½¿ç”¨å·¥å‚æ–¹æ³•å®ç° cheese pizza å’Œ greak pizza çš„ç”Ÿäº§ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</strong>     **</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609001610907.png" class="has" width="697" height="258" />
<p>æ€»ç»“ä¸€ä¸‹ä¸‰ç§æ¨¡å¼ï¼š</p>
<p><strong>ç®€å•å·¥å‚æ¨¡å¼å°±æ˜¯å»ºç«‹ä¸€ä¸ªå®ä¾‹åŒ–å¯¹è±¡çš„ç±»ï¼Œåœ¨è¯¥ç±»ä¸­å¯¹å¤šä¸ªå¯¹è±¡å®ä¾‹åŒ–ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯å®šä¹‰äº†ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŠ½è±¡æ–¹æ³•ï¼Œç”±å­ç±»å†³å®šè¦å®ä¾‹åŒ–çš„ç±»ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å†æœ‰æ–°çš„ç±»å‹çš„å¯¹è±¡éœ€è¦å®ä¾‹åŒ–åªè¦å¢åŠ å­ç±»å³å¯ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼å®šä¹‰äº†ä¸€ä¸ªæ¥å£ç”¨äºåˆ›å»ºå¯¹è±¡æ—ï¼Œè€Œæ— éœ€æ˜ç¡®æŒ‡å®šå…·ä½“ç±»ã€‚æŠ½è±¡å·¥å‚ä¹Ÿæ˜¯æŠŠå¯¹è±¡çš„å®ä¾‹åŒ–äº¤ç»™äº†å­ç±»ï¼Œå³æ”¯æŒæ‹“å±•ã€‚åŒæ—¶æä¾›ç»™å®¢æˆ·ç«¯æ¥å£ï¼Œé¿å…äº†ç”¨æˆ·ç›´æ¥æ“ä½œå­ç±»å·¥å‚ã€‚</strong></p>
<h3 id="-2"><a class="markdownIt-Anchor" href="#-2">#</a> </h3>
<h2 id="2-å•ä¾‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#2-å•ä¾‹æ¨¡å¼">#</a> 2 å•ä¾‹æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** ç¡®ä¿ä¸€ä¸ªç±»æœ€å¤šåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶æä¾›ä¸€ä¸ªå…¨å±€è®¿é—®ç‚¹</p>
<p>å•ä¾‹æ¨¡å¼å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šé¢„åŠ è½½å’Œæ‡’åŠ è½½</p>
<h3 id="21-é¢„åŠ è½½"><a class="markdownIt-Anchor" href="#21-é¢„åŠ è½½">#</a> 2.1 é¢„åŠ è½½</h3>
<p>é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯é¢„å…ˆåŠ è½½ã€‚å†è¿›ä¸€æ­¥è§£é‡Šå°±æ˜¯è¿˜æ²¡æœ‰ä½¿ç”¨è¯¥å•ä¾‹å¯¹è±¡ï¼Œä½†æ˜¯ï¼Œè¯¥å•ä¾‹å¯¹è±¡å°±å·²ç»è¢«åŠ è½½åˆ°å†…å­˜äº†ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class PreloadSingleton &#123;</span><br><span class="line">       </span><br><span class="line">       public static PreloadSingleton instance = new PreloadSingleton();</span><br><span class="line">   </span><br><span class="line">       //å…¶ä»–çš„ç±»æ— æ³•å®ä¾‹åŒ–å•ä¾‹ç±»çš„å¯¹è±¡</span><br><span class="line">       private PreloadSingleton() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       </span><br><span class="line">       public static PreloadSingleton getInstance() &#123;</span><br><span class="line">              return instance;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>å¾ˆæ˜æ˜¾ï¼Œæ²¡æœ‰ä½¿ç”¨è¯¥å•ä¾‹å¯¹è±¡ï¼Œè¯¥å¯¹è±¡å°±è¢«åŠ è½½åˆ°äº†å†…å­˜ï¼Œä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚</strong></p>
<h3 id="22-æ‡’åŠ è½½"><a class="markdownIt-Anchor" href="#22-æ‡’åŠ è½½">#</a> 2.2 æ‡’åŠ è½½</h3>
<p>ä¸ºäº†é¿å…å†…å­˜çš„æµªè´¹ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨æ‡’åŠ è½½ï¼Œå³ç”¨åˆ°è¯¥å•ä¾‹å¯¹è±¡çš„æ—¶å€™å†åˆ›å»ºã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">       </span><br><span class="line">       private static Singleton instance=null;</span><br><span class="line">       </span><br><span class="line">       private Singleton()&#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       </span><br><span class="line">       public static Singleton getInstance()</span><br><span class="line">       &#123;</span><br><span class="line">              if(instance==null)</span><br><span class="line">              &#123;</span><br><span class="line">                     instance=new Singleton();</span><br><span class="line">              &#125;</span><br><span class="line">              return instance;</span><br><span class="line">              </span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="23-å•ä¾‹æ¨¡å¼å’Œçº¿ç¨‹å®‰å…¨"><a class="markdownIt-Anchor" href="#23-å•ä¾‹æ¨¡å¼å’Œçº¿ç¨‹å®‰å…¨">#</a> 2.3 å•ä¾‹æ¨¡å¼å’Œçº¿ç¨‹å®‰å…¨</h3>
<p>ï¼ˆ1ï¼‰é¢„åŠ è½½åªæœ‰ä¸€æ¡è¯­å¥ return instance, è¿™æ˜¾ç„¶å¯ä»¥ä¿è¯çº¿ç¨‹å®‰å…¨ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬çŸ¥é“é¢„åŠ è½½ä¼šé€ æˆå†…å­˜çš„æµªè´¹ã€‚</p>
<p>ï¼ˆ2ï¼‰æ‡’åŠ è½½ä¸æµªè´¹å†…å­˜ï¼Œä½†æ˜¯æ— æ³•ä¿è¯çº¿ç¨‹çš„å®‰å…¨ã€‚é¦–å…ˆï¼Œif åˆ¤æ–­ä»¥åŠå…¶å†…å­˜æ‰§è¡Œä»£ç æ˜¯éåŸå­æ€§çš„ã€‚å…¶æ¬¡ï¼Œnew Singleton () æ— æ³•ä¿è¯æ‰§è¡Œçš„é¡ºåºæ€§ã€‚</p>
<p>ä¸æ»¡è¶³åŸå­æ€§æˆ–è€…é¡ºåºæ€§ï¼Œçº¿ç¨‹è‚¯å®šæ˜¯ä¸å®‰å…¨çš„ï¼Œè¿™æ˜¯åŸºæœ¬çš„å¸¸è¯†ï¼Œä¸å†èµ˜è¿°ã€‚æˆ‘ä¸»è¦è®²ä¸€ä¸‹ä¸ºä»€ä¹ˆ new Singleton () æ— æ³•ä¿è¯é¡ºåºæ€§ã€‚æˆ‘ä»¬çŸ¥é“åˆ›å»ºä¸€ä¸ªå¯¹è±¡åˆ†ä¸‰æ­¥:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">memory=allocate();//1:åˆå§‹åŒ–å†…å­˜ç©ºé—´</span><br><span class="line"></span><br><span class="line">ctorInstance(memory);//2:åˆå§‹åŒ–å¯¹è±¡</span><br><span class="line"></span><br><span class="line">instance=memory();//3:è®¾ç½®instanceæŒ‡å‘åˆšåˆ†é…çš„å†…å­˜åœ°å€</span><br></pre></td></tr></table></figure>
<p>**jvm ä¸ºäº†æé«˜ç¨‹åºæ‰§è¡Œæ€§èƒ½ï¼Œä¼šå¯¹æ²¡æœ‰ä¾èµ–å…³ç³»çš„ä»£ç è¿›è¡Œé‡æ’åºï¼Œä¸Šé¢ 2 å’Œ 3 è¡Œä»£ç å¯èƒ½è¢«é‡æ–°æ’åºã€‚** æˆ‘ä»¬ç”¨ä¸¤ä¸ªçº¿ç¨‹æ¥è¯´æ˜çº¿ç¨‹æ˜¯ä¸å®‰å…¨çš„ã€‚çº¿ç¨‹ A å’Œçº¿ç¨‹ B éƒ½åˆ›å»ºå¯¹è±¡ã€‚å…¶ä¸­ï¼ŒA2 å’Œ A3 çš„é‡æ’åºï¼Œå°†å¯¼è‡´çº¿ç¨‹ B åœ¨ B1 å¤„åˆ¤æ–­å‡º instance ä¸ä¸ºç©ºï¼Œçº¿ç¨‹ B æ¥ä¸‹æ¥å°†è®¿é—® instance å¼•ç”¨çš„å¯¹è±¡ã€‚æ­¤æ—¶ï¼Œçº¿ç¨‹ B å°†ä¼šè®¿é—®åˆ°ä¸€ä¸ªè¿˜æœªåˆå§‹åŒ–çš„å¯¹è±¡ï¼ˆçº¿ç¨‹ä¸å®‰å…¨ï¼‰ã€‚</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609030328860.png" class="has" width="674" height="386" />
<h3 id="24-ä¿è¯æ‡’åŠ è½½çš„çº¿ç¨‹å®‰å…¨"><a class="markdownIt-Anchor" href="#24-ä¿è¯æ‡’åŠ è½½çš„çº¿ç¨‹å®‰å…¨">#</a> 2.4 ä¿è¯æ‡’åŠ è½½çš„çº¿ç¨‹å®‰å…¨</h3>
<p><span style="color:#000000;">æˆ‘ä»¬é¦–å…ˆæƒ³åˆ°çš„å°±æ˜¯ä½¿ç”¨</span><span style="color:#f33b45;">synchronized</span><span style="color:#000000;">å…³é”®å­—ã€‚</span><span style="color:#f33b45;">synchronized</span>åŠ è½½ getInstace () å‡½æ•°ä¸Šç¡®å®ä¿è¯äº†çº¿ç¨‹çš„å®‰å…¨ã€‚ä½†æ˜¯ï¼Œå¦‚æœè¦ç»å¸¸çš„è°ƒç”¨<span style="color:#000000;"><span style="color:#7f0055;"><span style="color:#7f0055;"><span style="color:#333333;">getInstance () æ–¹æ³•ï¼Œä¸ç®¡æœ‰æ²¡æœ‰åˆå§‹åŒ–å®ä¾‹ï¼Œéƒ½ä¼šå”¤é†’å’Œé˜»å¡çº¿ç¨‹ã€‚ä¸ºäº†é¿å…çº¿ç¨‹çš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¶ˆè€—å¤§é‡æ—¶é—´ï¼Œå¦‚æœå¯¹è±¡å·²ç»å®ä¾‹åŒ–äº†ï¼Œæˆ‘ä»¬æ²¡æœ‰å¿…è¦å†ä½¿ç”¨</span></span></span></span><span style="color:#f33b45;">synchronized</span><span style="color:#000000;"><span style="color:#7f0055;"><span style="color:#7f0055;"><span style="color:#333333;">åŠ é”ï¼Œç›´æ¥è¿”å›å¯¹è±¡ã€‚</span></span></span></span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">       private static Singleton instance = null;</span><br><span class="line">       private Singleton() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       public static synchronized Singleton getInstance() &#123;</span><br><span class="line">              if (instance == null) &#123;</span><br><span class="line">                     instance = new Singleton();</span><br><span class="line">              &#125;</span><br><span class="line">              return instance;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬æŠŠ<span style="color:#f33b45;">sychronized</span>åŠ åœ¨ if (instance==null) åˆ¤æ–­è¯­å¥é‡Œé¢ï¼Œ<strong>ä¿è¯ instance æœªå®ä¾‹åŒ–çš„æ—¶å€™æ‰åŠ é”</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">       private static Singleton instance = null;</span><br><span class="line">       private Singleton() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       public static synchronized Singleton getInstance() &#123;</span><br><span class="line">              if (instance == null) &#123;</span><br><span class="line">                     synchronized (Singleton.class) &#123;</span><br><span class="line">                           if (instance == null) &#123;</span><br><span class="line">                                  instance = new Singleton();</span><br><span class="line">                           &#125;</span><br><span class="line">                     &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              return instance;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬ç»è¿‡ 2.3 çš„è®¨è®ºçŸ¥é“ new ä¸€ä¸ªå¯¹è±¡çš„ä»£ç æ˜¯æ— æ³•ä¿è¯é¡ºåºæ€§çš„ï¼Œå› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªå…³é”®å­—<span style="color:#f33b45;">volatile</span>ä¿è¯å¯¹è±¡å®ä¾‹åŒ–è¿‡ç¨‹çš„é¡ºåºæ€§ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Singleton &#123;</span><br><span class="line">       private static volatile Singleton instance = null;</span><br><span class="line">       private Singleton() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       public static synchronized Singleton getInstance() &#123;</span><br><span class="line">              if (instance == null) &#123;</span><br><span class="line">                     synchronized (instance) &#123;</span><br><span class="line">                           if (instance == null) &#123;</span><br><span class="line">                                  instance = new Singleton();</span><br><span class="line">                           &#125;</span><br><span class="line">                     &#125;</span><br><span class="line">              &#125;</span><br><span class="line">              return instance;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>åˆ°æ­¤ï¼Œæˆ‘ä»¬å°±ä¿è¯äº†æ‡’åŠ è½½çš„çº¿ç¨‹å®‰å…¨ã€‚</strong></p>
<h2 id="3-ç”Ÿæˆå™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#3-ç”Ÿæˆå™¨æ¨¡å¼">#</a> 3 ç”Ÿæˆå™¨æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å°è£…ä¸€ä¸ªå¤æ‚å¯¹è±¡æ„é€ è¿‡ç¨‹ï¼Œå¹¶å…è®¸æŒ‰æ­¥éª¤æ„é€ ã€‚</p>
<p><strong>å®šä¹‰è§£é‡Šï¼š</strong> æˆ‘ä»¬å¯ä»¥å°†ç”Ÿæˆå™¨æ¨¡å¼ç†è§£ä¸ºï¼Œå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå¯¹è±¡éœ€è¦å»ºç«‹ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ç”±å¤šä¸ªç»„ä»¶ï¼ˆComponentï¼‰ç»„åˆè€Œæˆï¼Œæ¯ä¸ªç»„ä»¶çš„å»ºç«‹éƒ½æ¯”è¾ƒå¤æ‚ï¼Œä½†è¿ç”¨ç»„ä»¶æ¥å»ºç«‹æ‰€éœ€çš„å¯¹è±¡éå¸¸ç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬å°±å¯ä»¥å°†æ„å»ºå¤æ‚ç»„ä»¶çš„æ­¥éª¤ä¸è¿ç”¨ç»„ä»¶æ„å»ºå¯¹è±¡åˆ†ç¦»ï¼Œä½¿ç”¨ builder æ¨¡å¼å¯ä»¥å»ºç«‹ã€‚</p>
<h3 id="31-æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#31-æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 3.1 æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<p>ç”Ÿæˆå™¨æ¨¡å¼ç»“æ„ä¸­åŒ…æ‹¬å››ç§è§’è‰²ï¼š</p>
<p>ï¼ˆ1ï¼‰äº§å“ (Product)ï¼šå…·ä½“ç”Ÿäº§å™¨è¦æ„é€ çš„å¤æ‚å¯¹è±¡ï¼›</p>
<p>ï¼ˆ2ï¼‰æŠ½è±¡ç”Ÿæˆå™¨ (Bulider)ï¼šæŠ½è±¡ç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¯¥æ¥å£é™¤äº†ä¸ºåˆ›å»ºä¸€ä¸ª Product å¯¹è±¡çš„å„ä¸ªç»„ä»¶å®šä¹‰äº†è‹¥å¹²ä¸ªæ–¹æ³•ä¹‹å¤–ï¼Œè¿˜è¦å®šä¹‰è¿”å› Product å¯¹è±¡çš„æ–¹æ³•ï¼ˆ<strong>å®šä¹‰æ„é€ æ­¥éª¤</strong>ï¼‰ï¼›</p>
<p>ï¼ˆ3ï¼‰å…·ä½“ç”Ÿäº§å™¨ (ConcreteBuilder)ï¼šå®ç° Builder æ¥å£çš„ç±»ï¼Œå…·ä½“ç”Ÿæˆå™¨å°†å®ç° Builder æ¥å£æ‰€å®šä¹‰çš„æ–¹æ³•ï¼ˆ<strong>ç”Ÿäº§å„ä¸ªç»„ä»¶</strong>ï¼‰ï¼›</p>
<p>ï¼ˆ4ï¼‰æŒ‡æŒ¥è€… (Director)ï¼šæŒ‡æŒ¥è€…æ˜¯ä¸€ä¸ªç±»ï¼Œè¯¥ç±»éœ€è¦å«æœ‰ Builder æ¥å£å£°æ˜çš„å˜é‡ã€‚æŒ‡æŒ¥è€…çš„èŒè´£æ˜¯è´Ÿè´£å‘ç”¨æˆ·æä¾›å…·ä½“ç”Ÿæˆå™¨ï¼Œå³æŒ‡æŒ¥è€…å°†è¯·æ±‚å…·ä½“ç”Ÿæˆå™¨ç±»æ¥æ„é€ ç”¨æˆ·æ‰€éœ€è¦çš„ Product å¯¹è±¡ï¼Œå¦‚æœæ‰€è¯·æ±‚çš„å…·ä½“ç”Ÿæˆå™¨æˆåŠŸåœ°æ„é€ å‡º Product å¯¹è±¡ï¼ŒæŒ‡æŒ¥è€…å°±å¯ä»¥è®©è¯¥å…·ä½“ç”Ÿäº§å™¨è¿”å›æ‰€æ„é€ çš„ Product å¯¹è±¡ã€‚ï¼ˆ<strong>æŒ‰ç…§æ­¥éª¤ç»„è£…éƒ¨ä»¶ï¼Œå¹¶è¿”å› Product</strong>ï¼‰</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609172340456.png" class="has" width="680" height="225" />
<p><strong>ä¸¾ä¾‹</strong>ï¼ˆæˆ‘ä»¬å¦‚æœæ„å»ºç”Ÿæˆä¸€å°ç”µè„‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯èƒ½éœ€è¦è¿™ä¹ˆå‡ ä¸ªæ­¥éª¤ï¼ˆ1ï¼‰éœ€è¦ä¸€ä¸ªä¸»æœºï¼ˆ2ï¼‰éœ€è¦ä¸€ä¸ªæ˜¾ç¤ºå™¨ï¼ˆ3ï¼‰éœ€è¦ä¸€ä¸ªé”®ç›˜ï¼ˆ4ï¼‰éœ€è¦ä¸€ä¸ªé¼ æ ‡ï¼‰</p>
<p>è™½ç„¶æˆ‘ä»¬å…·ä½“åœ¨æ„å»ºä¸€å°ä¸»æœºçš„æ—¶å€™ï¼Œæ¯ä¸ªå¯¹è±¡çš„å®é™…æ­¥éª¤æ˜¯ä¸ä¸€æ ·çš„ï¼Œæ¯”å¦‚ï¼Œæœ‰çš„å¯¹è±¡æ„å»ºäº† i7cpu çš„ä¸»æœºï¼Œæœ‰çš„å¯¹è±¡æ„å»ºäº† i5cpu çš„ä¸»æœºï¼Œæœ‰çš„å¯¹è±¡æ„å»ºäº†æ™®é€šé”®ç›˜ï¼Œæœ‰çš„å¯¹è±¡æ„å»ºäº†æœºæ¢°é”®ç›˜ç­‰ã€‚ä½†ä¸ç®¡æ€æ ·ï¼Œä½ æ€»æ˜¯éœ€è¦ç»è¿‡ä¸€ä¸ªæ­¥éª¤å°±æ˜¯æ„å»ºä¸€å°ä¸»æœºï¼Œä¸€å°é”®ç›˜ã€‚å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼æ¥ç”Ÿæˆä¸€å°ç”µè„‘ï¼Œä»–éœ€è¦é€šè¿‡å¤šä¸ªæ­¥éª¤æ¥ç”Ÿæˆã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609172340477.png" class="has" width="470" height="437" />
<p>ComputerBuilder ç±»å®šä¹‰æ„é€ æ­¥éª¤ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public abstract class ComputerBuilder &#123;</span><br><span class="line">   </span><br><span class="line">    protected Computer computer;</span><br><span class="line">   </span><br><span class="line">    public Computer getComputer() &#123;</span><br><span class="line">        return computer;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public void buildComputer() &#123;</span><br><span class="line">        computer = new Computer();</span><br><span class="line">        System.out.println(&quot;ç”Ÿæˆäº†ä¸€å°ç”µè„‘ï¼ï¼ï¼&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract void buildMaster();</span><br><span class="line">    public abstract void buildScreen();</span><br><span class="line">    public abstract void buildKeyboard();</span><br><span class="line">    public abstract void buildMouse();</span><br><span class="line">    public abstract void buildAudio();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>HPComputerBuilder å®šä¹‰å„ä¸ªç»„ä»¶ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">public class HPComputerBuilder extends ComputerBuilder &#123;</span><br><span class="line">    @Override</span><br><span class="line">    public void buildMaster() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        computer.setMaster(&quot;i7,16g,512SSD,1060&quot;);</span><br><span class="line">        System.out.println(&quot;(i7,16g,512SSD,1060)çš„æƒ æ™®ä¸»æœº&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void buildScreen() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        computer.setScreen(&quot;1080p&quot;);</span><br><span class="line">        System.out.println(&quot;(1080p)çš„æƒ æ™®æ˜¾ç¤ºå±&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void buildKeyboard() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        computer.setKeyboard(&quot;cherry é’è½´æœºæ¢°é”®ç›˜&quot;);</span><br><span class="line">        System.out.println(&quot;(cherry é’è½´æœºæ¢°é”®ç›˜)çš„é”®ç›˜&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void buildMouse() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        computer.setMouse(&quot;MI é¼ æ ‡&quot;);</span><br><span class="line">        System.out.println(&quot;(MI é¼ æ ‡)çš„é¼ æ ‡&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void buildAudio() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        computer.setAudio(&quot;é£åˆ©æµ¦ éŸ³å“&quot;);</span><br><span class="line">        System.out.println(&quot;(é£åˆ©æµ¦ éŸ³å“)çš„éŸ³å“&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Director ç±»å¯¹ç»„ä»¶è¿›è¡Œç»„è£…å¹¶ç”Ÿæˆäº§å“</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class Director &#123;</span><br><span class="line">   </span><br><span class="line">    private ComputerBuilder computerBuilder;</span><br><span class="line">    public void setComputerBuilder(ComputerBuilder computerBuilder) &#123;</span><br><span class="line">        this.computerBuilder = computerBuilder;</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public Computer getComputer() &#123;</span><br><span class="line">        return computerBuilder.getComputer();</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    public void constructComputer() &#123;</span><br><span class="line">        computerBuilder.buildComputer();</span><br><span class="line">        computerBuilder.buildMaster();</span><br><span class="line">        computerBuilder.buildScreen();</span><br><span class="line">        computerBuilder.buildKeyboard();</span><br><span class="line">        computerBuilder.buildMouse();</span><br><span class="line">        computerBuilder.buildAudio();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="32-ç”Ÿæˆå™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#32-ç”Ÿæˆå™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹">#</a> 3.2 ç”Ÿæˆå™¨æ¨¡å¼çš„ä¼˜ç¼ºç‚¹</h3>
<h3 id="ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#ä¼˜ç‚¹">#</a> ä¼˜ç‚¹</h3>
<ul>
<li>
<p>å°†ä¸€ä¸ªå¯¹è±¡åˆ†è§£ä¸ºå„ä¸ªç»„ä»¶</p>
</li>
<li>
<p>å°†å¯¹è±¡ç»„ä»¶çš„æ„é€ å°è£…èµ·æ¥</p>
</li>
<li>
<p>å¯ä»¥æ§åˆ¶æ•´ä¸ªå¯¹è±¡çš„ç”Ÿæˆè¿‡ç¨‹</p>
</li>
</ul>
<h3 id="ç¼ºç‚¹"><a class="markdownIt-Anchor" href="#ç¼ºç‚¹">#</a> ç¼ºç‚¹</h3>
<ul>
<li>å¯¹ä¸åŒç±»å‹çš„å¯¹è±¡éœ€è¦å®ç°ä¸åŒçš„å…·ä½“æ„é€ å™¨çš„ç±»ï¼Œè¿™å¯èƒ½å›ç­”å¤§å¤§å¢åŠ ç±»çš„æ•°é‡</li>
</ul>
<h3 id="33-ç”Ÿæˆå™¨æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ä¸åŒ"><a class="markdownIt-Anchor" href="#33-ç”Ÿæˆå™¨æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ä¸åŒ">#</a> 3.3 ç”Ÿæˆå™¨æ¨¡å¼ä¸å·¥å‚æ¨¡å¼çš„ä¸åŒ</h3>
<p>ç”Ÿæˆå™¨æ¨¡å¼æ„å»ºå¯¹è±¡çš„æ—¶å€™ï¼Œå¯¹è±¡é€šå¸¸æ„å»ºçš„è¿‡ç¨‹ä¸­éœ€è¦å¤šä¸ªæ­¥éª¤ï¼Œå°±åƒæˆ‘ä»¬ä¾‹å­ä¸­çš„å…ˆæœ‰ä¸»æœºï¼Œå†æœ‰æ˜¾ç¤ºå±ï¼Œå†æœ‰é¼ æ ‡ç­‰ç­‰ï¼Œç”Ÿæˆå™¨æ¨¡å¼çš„ä½œç”¨å°±æ˜¯å°†è¿™äº›å¤æ‚çš„æ„å»ºè¿‡ç¨‹å°è£…èµ·æ¥ã€‚å·¥å‚æ¨¡å¼æ„å»ºå¯¹è±¡çš„æ—¶å€™é€šå¸¸å°±åªæœ‰ä¸€ä¸ªæ­¥éª¤ï¼Œè°ƒç”¨ä¸€ä¸ªå·¥å‚æ–¹æ³•å°±å¯ä»¥ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ã€‚</p>
<h2 id="4-åŸå‹æ¨¡å¼"><a class="markdownIt-Anchor" href="#4-åŸå‹æ¨¡å¼">#</a> 4 åŸå‹æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** é€šè¿‡å¤åˆ¶ç°æœ‰å®ä¾‹æ¥åˆ›å»ºæ–°çš„å®ä¾‹ï¼Œæ— éœ€çŸ¥é“ç›¸åº”ç±»çš„ä¿¡æ¯ã€‚</p>
<p>ç®€å•åœ°ç†è§£ï¼Œå…¶å®å°±æ˜¯å½“éœ€è¦åˆ›å»ºä¸€ä¸ªæŒ‡å®šçš„å¯¹è±¡æ—¶ï¼Œæˆ‘ä»¬åˆšå¥½æœ‰ä¸€ä¸ªè¿™æ ·çš„å¯¹è±¡ï¼Œä½†æ˜¯åˆä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œæˆ‘ä¼š clone ä¸€ä¸ªä¸€æ¯›ä¸€æ ·çš„æ–°å¯¹è±¡æ¥ä½¿ç”¨ï¼›åŸºæœ¬ä¸Šè¿™å°±æ˜¯åŸå‹æ¨¡å¼ã€‚å…³é”®å­—ï¼š<strong>Clone</strong>ã€‚</p>
<h3 id="41-æ·±æ‹·è´å’Œæµ…æ‹·è´"><a class="markdownIt-Anchor" href="#41-æ·±æ‹·è´å’Œæµ…æ‹·è´">#</a> 4.1 æ·±æ‹·è´å’Œæµ…æ‹·è´</h3>
<p>æµ…å¤åˆ¶ï¼šå°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼ŒåŸºæœ¬æ•°æ®ç±»å‹çš„å˜é‡éƒ½ä¼šé‡æ–°åˆ›å»ºï¼Œè€Œå¼•ç”¨ç±»å‹ï¼ŒæŒ‡å‘çš„è¿˜æ˜¯åŸå¯¹è±¡æ‰€æŒ‡å‘çš„ã€‚</p>
<p>æ·±å¤åˆ¶ï¼šå°†ä¸€ä¸ªå¯¹è±¡å¤åˆ¶åï¼Œä¸è®ºæ˜¯åŸºæœ¬æ•°æ®ç±»å‹è¿˜æœ‰å¼•ç”¨ç±»å‹ï¼Œéƒ½æ˜¯é‡æ–°åˆ›å»ºçš„ã€‚ç®€å•æ¥è¯´ï¼Œå°±æ˜¯æ·±å¤åˆ¶è¿›è¡Œäº†å®Œå…¨å½»åº•çš„å¤åˆ¶ï¼Œè€Œæµ…å¤åˆ¶ä¸å½»åº•ã€‚clone æ˜æ˜¾æ˜¯æ·±å¤åˆ¶ï¼Œclone å‡ºæ¥çš„å¯¹è±¡æ˜¯æ˜¯ä¸èƒ½å»å½±å“åŸå‹å¯¹è±¡çš„</p>
<h3 id="42-åŸå‹æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#42-åŸå‹æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 4.2 åŸå‹æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609184856243.png" class="has" width="367" height="237" />
<p>Clientï¼šä½¿ç”¨è€…</p>
<p>Prototypeï¼šæ¥å£ï¼ˆæŠ½è±¡ç±»ï¼‰ï¼Œå£°æ˜å…·å¤‡ clone èƒ½åŠ›ï¼Œä¾‹å¦‚ java ä¸­å¾— Cloneable æ¥å£</p>
<p>ConcretePrototypeï¼šå…·ä½“çš„åŸå‹ç±»</p>
<p>å¯ä»¥çœ‹å‡ºè®¾è®¡æ¨¡å¼è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œé‡ç‚¹åœ¨äº Prototype æ¥å£å’Œ Prototype æ¥å£çš„å®ç°ç±» ConcretePrototypeã€‚åŸå‹æ¨¡å¼çš„å…·ä½“å®ç°ï¼šä¸€ä¸ªåŸå‹ç±»ï¼Œåªéœ€è¦å®ç° Cloneable æ¥å£ï¼Œè¦†å†™ clone æ–¹æ³•ï¼Œæ­¤å¤„ clone æ–¹æ³•å¯ä»¥æ”¹æˆä»»æ„çš„åç§°ï¼Œå› ä¸º Cloneable æ¥å£æ˜¯ä¸ªç©ºæ¥å£ï¼Œä½ å¯ä»¥ä»»æ„å®šä¹‰å®ç°ç±»çš„æ–¹æ³•åï¼Œå¦‚ cloneA æˆ–è€… cloneBï¼Œå› ä¸ºæ­¤å¤„çš„é‡ç‚¹æ˜¯ super.clone () è¿™å¥è¯ï¼Œsuper.clone () è°ƒç”¨çš„æ˜¯ Object çš„ clone () æ–¹æ³•ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class Prototype implements Cloneable &#123;  </span><br><span class="line">     public Object clone() throws CloneNotSupportedException &#123;  </span><br><span class="line">         Prototype proto = (Prototype) super.clone();  </span><br><span class="line">         return proto;  </span><br><span class="line">     &#125;  </span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
<p>** ä¸¾ä¾‹ï¼ˆ<strong>é“¶è¡Œå‘é€å¤§é‡é‚®ä»¶ï¼Œä½¿ç”¨ clone å’Œä¸ä½¿ç”¨ clone çš„æ—¶é—´å¯¹æ¯”</strong>ï¼‰ï¼š** æˆ‘ä»¬æ¨¡æ‹Ÿåˆ›å»ºä¸€ä¸ªå¯¹è±¡éœ€è¦è€—è´¹æ¯”è¾ƒé•¿çš„æ—¶é—´ï¼Œå› æ­¤ï¼Œåœ¨æ„é€ å‡½æ•°ä¸­æˆ‘ä»¬è®©å½“å‰çº¿ç¨‹ sleep ä¸€ä¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public Mail(EventTemplate et) &#123;</span><br><span class="line">              this.tail = et.geteventContent();</span><br><span class="line">              this.subject = et.geteventSubject();</span><br><span class="line">              try &#123;</span><br><span class="line">                     Thread.sleep(1000);</span><br><span class="line">              &#125; catch (InterruptedException e) &#123;</span><br><span class="line">                     // TODO Auto-generated catch block</span><br><span class="line">                     e.printStackTrace();</span><br><span class="line">              &#125;</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p>ä¸ä½¿ç”¨ clone, å‘é€åä¸ªé‚®ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">              int i = 0;</span><br><span class="line">              int MAX_COUNT = 10;</span><br><span class="line">              EventTemplate et = new EventTemplate(&quot;9æœˆä»½ä¿¡ç”¨å¡è´¦å•&quot;, &quot;å›½åº†æŠ½å¥–æ´»åŠ¨...&quot;);</span><br><span class="line">              long start = System.currentTimeMillis();</span><br><span class="line">              while (i &lt; MAX_COUNT) &#123;</span><br><span class="line">                     // ä»¥ä¸‹æ˜¯æ¯å°é‚®ä»¶ä¸åŒçš„åœ°æ–¹</span><br><span class="line">                     Mail mail = new Mail(et);</span><br><span class="line">                     mail.setContent(getRandString(5) + &quot;,å…ˆç”Ÿï¼ˆå¥³å£«ï¼‰:ä½ çš„ä¿¡ç”¨å¡è´¦å•...&quot; + mail.getTail());</span><br><span class="line">                     mail.setReceiver(getRandString(5) + &quot;@&quot; + getRandString(8) + &quot;.com&quot;);</span><br><span class="line">                     // ç„¶åå‘é€é‚®ä»¶</span><br><span class="line">                     sendMail(mail);</span><br><span class="line">                     i++;</span><br><span class="line">              &#125;</span><br><span class="line">              long end = System.currentTimeMillis();</span><br><span class="line">              System.out.println(&quot;ç”¨æ—¶:&quot; + (end - start));</span><br><span class="line">       &#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç”¨æ—¶ï¼š10001</strong></p>
<p>ä½¿ç”¨ clone, å‘é€åä¸ªé‚®ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public static void main(String[] args) &#123;</span><br><span class="line">          int i = 0;</span><br><span class="line">          int MAX_COUNT = 10;</span><br><span class="line">          EventTemplate et = new EventTemplate(&quot;9æœˆä»½ä¿¡ç”¨å¡è´¦å•&quot;, &quot;å›½åº†æŠ½å¥–æ´»åŠ¨...&quot;);</span><br><span class="line">          long start=System.currentTimeMillis();</span><br><span class="line">          Mail mail = new Mail(et);         </span><br><span class="line">          while (i &lt; MAX_COUNT) &#123;</span><br><span class="line">                 Mail cloneMail = mail.clone();</span><br><span class="line">                 mail.setContent(getRandString(5) + &quot;,å…ˆç”Ÿï¼ˆå¥³å£«ï¼‰:ä½ çš„ä¿¡ç”¨å¡è´¦å•...&quot;</span><br><span class="line">                              + mail.getTail());</span><br><span class="line">                 mail.setReceiver(getRandString(5) + &quot;@&quot; + getRandString(8) + &quot;.com&quot;);</span><br><span class="line">                 sendMail(cloneMail);</span><br><span class="line">                 i++;</span><br><span class="line">          &#125;</span><br><span class="line">          long end=System.currentTimeMillis();</span><br><span class="line">          System.out.println(&quot;ç”¨æ—¶:&quot;+(end-start));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><strong>ç”¨æ—¶ï¼š1001</strong></p>
<h3 id="43-æ€»ç»“"><a class="markdownIt-Anchor" href="#43-æ€»ç»“">#</a> 4.3 æ€»ç»“</h3>
<p><strong>åŸå‹æ¨¡å¼çš„æœ¬è´¨å°±æ˜¯ cloneï¼Œå¯ä»¥è§£å†³æ„å»ºå¤æ‚å¯¹è±¡çš„èµ„æºæ¶ˆè€—é—®é¢˜ï¼Œèƒ½å†æŸäº›åœºæ™¯ä¸­æå‡æ„å»ºå¯¹è±¡çš„æ•ˆç‡ï¼›è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ç”¨é€”å°±æ˜¯ä¿æŠ¤æ€§æ‹·è´ï¼Œå¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªæ‹·è´å¯¹è±¡çš„å½¢å¼ï¼Œå®ç°åªè¯»çš„é™åˆ¶ã€‚</strong></p>
<h1 id="b-ç»“æ„æ¨¡å¼7ç§"><a class="markdownIt-Anchor" href="#b-ç»“æ„æ¨¡å¼7ç§">#</a> Bã€ç»“æ„æ¨¡å¼ï¼ˆ7 ç§ï¼‰</h1>
<p>é€‚é…å™¨æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€ä»£ç†æ¨¡å¼ã€å¤–è§‚æ¨¡å¼ã€æ¡¥æ¥æ¨¡å¼ã€ç»„åˆæ¨¡å¼ã€äº«å…ƒæ¨¡å¼ã€‚</p>
<h3 id="-3"><a class="markdownIt-Anchor" href="#-3">#</a> </h3>
<h2 id="5-é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#5-é€‚é…å™¨æ¨¡å¼">#</a> 5 é€‚é…å™¨æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong> é€‚é…å™¨æ¨¡å¼å°†æŸä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£è¡¨ç¤ºï¼Œç›®çš„æ˜¯æ¶ˆé™¤ç”±äºæ¥å£ä¸åŒ¹é…æ‰€é€ æˆçš„ç±»çš„å…¼å®¹æ€§é—®é¢˜ã€‚</p>
<p>** ä¸»è¦åˆ†ä¸ºä¸‰ç±»ï¼š** ç±»çš„é€‚é…å™¨æ¨¡å¼ã€å¯¹è±¡çš„é€‚é…å™¨æ¨¡å¼ã€æ¥å£çš„é€‚é…å™¨æ¨¡å¼ã€‚</p>
<h3 id="51-ç±»é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#51-ç±»é€‚é…å™¨æ¨¡å¼">#</a> 5.1 ç±»é€‚é…å™¨æ¨¡å¼</h3>
<p>é€šè¿‡å¤šé‡<strong>ç»§æ‰¿</strong>ç›®æ ‡æ¥å£å’Œè¢«é€‚é…è€…ç±»æ–¹å¼æ¥å®ç°é€‚é…</p>
<p><strong>ä¸¾ä¾‹</strong> (å°† USB æ¥å£è½¬ä¸º VGA æ¥å£)ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609210401275.png" class="has" width="329" height="268" />
<p>USBImpl çš„ä»£ç ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class USBImpl implements USB&#123;</span><br><span class="line">       @Override</span><br><span class="line">       public void showPPT() &#123;</span><br><span class="line">              // TODO Auto-generated method stub</span><br><span class="line">              System.out.println(&quot;PPTå†…å®¹æ¼”ç¤º&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AdatperUSB2VGA é¦–å…ˆç»§æ‰¿ USBImpl è·å– USB çš„åŠŸèƒ½ï¼Œå…¶æ¬¡ï¼Œå®ç° VGA æ¥å£ï¼Œè¡¨ç¤ºè¯¥ç±»çš„ç±»å‹ä¸º VGAã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class AdapterUSB2VGA extends USBImpl implements VGA &#123;</span><br><span class="line">       @Override</span><br><span class="line">       public void projection() &#123;</span><br><span class="line">              super.showPPT();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Projector å°† USB æ˜ å°„ä¸º VGAï¼Œåªæœ‰ VGA æ¥å£æ‰å¯ä»¥è¿æ¥ä¸ŠæŠ•å½±ä»ªè¿›è¡ŒæŠ•å½±</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Projector&lt;T&gt; &#123;</span><br><span class="line">       public void projection(T t) &#123;</span><br><span class="line">              if (t instanceof VGA) &#123;</span><br><span class="line">                     System.out.println(&quot;å¼€å§‹æŠ•å½±&quot;);</span><br><span class="line">                     VGA v = new VGAImpl();</span><br><span class="line">                     v = (VGA) t;</span><br><span class="line">                     v.projection();</span><br><span class="line">              &#125; else &#123;</span><br><span class="line">                     System.out.println(&quot;æ¥å£ä¸åŒ¹é…ï¼Œæ— æ³•æŠ•å½±&quot;);</span><br><span class="line">              &#125;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>test ä»£ç </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void test2()&#123;</span><br><span class="line">       //é€šè¿‡é€‚é…å™¨åˆ›å»ºä¸€ä¸ªVGAå¯¹è±¡ï¼Œè¿™ä¸ªé€‚é…å™¨å®é™…æ˜¯ä½¿ç”¨çš„æ˜¯USBçš„showPPTï¼ˆï¼‰æ–¹æ³•</span><br><span class="line">       VGA a=new AdapterUSB2VGA();</span><br><span class="line">       //è¿›è¡ŒæŠ•å½±</span><br><span class="line">       Projector p1=new Projector();</span><br><span class="line">       p1.projection(a);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
<h3 id="52-å¯¹è±¡é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#52-å¯¹è±¡é€‚é…å™¨æ¨¡å¼">#</a> 5.2 å¯¹è±¡é€‚é…å™¨æ¨¡å¼</h3>
<p>å¯¹è±¡é€‚é…å™¨å’Œç±»é€‚é…å™¨ä½¿ç”¨äº†ä¸åŒçš„æ–¹æ³•å®ç°é€‚é…ï¼Œå¯¹è±¡é€‚é…å™¨ä½¿ç”¨ç»„åˆï¼Œç±»é€‚é…å™¨ä½¿ç”¨ç»§æ‰¿ã€‚</p>
<p><strong>ä¸¾ä¾‹</strong> (å°† USB æ¥å£è½¬ä¸º VGA æ¥å£)ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609210401318.png" class="has" width="356" height="278" />
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class AdapterUSB2VGA implements VGA &#123;</span><br><span class="line">       USB u = new USBImpl();</span><br><span class="line">       @Override</span><br><span class="line">       public void projection() &#123;</span><br><span class="line">              u.showPPT();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å®ç° VGA æ¥å£ï¼Œè¡¨ç¤ºé€‚é…å™¨ç±»æ˜¯ VGA ç±»å‹çš„ï¼Œé€‚é…å™¨æ–¹æ³•ä¸­ç›´æ¥ä½¿ç”¨ USB å¯¹è±¡ã€‚</p>
<h3 id="53-æ¥å£é€‚é…å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#53-æ¥å£é€‚é…å™¨æ¨¡å¼">#</a> 5.3 æ¥å£é€‚é…å™¨æ¨¡å¼</h3>
<p>å½“ä¸éœ€è¦å…¨éƒ¨å®ç°æ¥å£æä¾›çš„æ–¹æ³•æ—¶ï¼Œå¯å…ˆè®¾è®¡ä¸€ä¸ªæŠ½è±¡ç±»å®ç°æ¥å£ï¼Œå¹¶ä¸ºè¯¥æ¥å£ä¸­æ¯ä¸ªæ–¹æ³•æä¾›ä¸€ä¸ªé»˜è®¤å®ç°ï¼ˆç©ºæ–¹æ³•ï¼‰ï¼Œé‚£ä¹ˆè¯¥æŠ½è±¡ç±»çš„å­ç±»å¯æœ‰é€‰æ‹©åœ°è¦†ç›–çˆ¶ç±»çš„æŸäº›æ–¹æ³•æ¥å®ç°éœ€æ±‚ï¼Œ<strong>å®ƒé€‚ç”¨äºä¸€ä¸ªæ¥å£ä¸æƒ³ä½¿ç”¨å…¶æ‰€æœ‰çš„æ–¹æ³•çš„æƒ…å†µã€‚</strong></p>
<p><strong>ä¸¾ä¾‹</strong> (å°† USB æ¥å£è½¬ä¸º VGA æ¥å£ï¼ŒVGA ä¸­çš„ b () å’Œ c () ä¸ä¼šè¢«å®ç°)ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609210401289.png" class="has" width="451" height="351" />
<p><span style="color:#333333;">AdapterUSB2VGA</span>æŠ½è±¡ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public abstract class AdapterUSB2VGA implements VGA &#123;</span><br><span class="line">       USB u = new USBImpl();</span><br><span class="line">       @Override</span><br><span class="line">       public void projection() &#123;</span><br><span class="line">              u.showPPT();</span><br><span class="line">       &#125;</span><br><span class="line">       @Override</span><br><span class="line">       public void b() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">       @Override</span><br><span class="line">       public void c() &#123;</span><br><span class="line">       &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><span style="color:#333333;">AdapterUSB2VGA å®ç°ï¼Œä¸ç”¨å»å®ç° b () å’Œ c () æ–¹æ³•ã€‚</span></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public class AdapterUSB2VGAImpl extends AdapterUSB2VGA &#123;</span><br><span class="line">       public void projection() &#123;</span><br><span class="line">              super.projection();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="54-æ€»ç»“"><a class="markdownIt-Anchor" href="#54-æ€»ç»“">#</a> 5.4 æ€»ç»“</h3>
<p>æ€»ç»“ä¸€ä¸‹ä¸‰ç§é€‚é…å™¨æ¨¡å¼çš„åº”ç”¨åœºæ™¯ï¼š</p>
<p><strong>ç±»é€‚é…å™¨æ¨¡å¼ï¼š<strong>å½“å¸Œæœ›å°†</strong>ä¸€ä¸ªç±»</strong>è½¬æ¢æˆæ»¡è¶³å¦ä¸€ä¸ªæ–°æ¥å£çš„ç±»æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ç±»çš„é€‚é…å™¨æ¨¡å¼ï¼Œåˆ›å»ºä¸€ä¸ªæ–°ç±»ï¼Œç»§æ‰¿åŸæœ‰çš„ç±»ï¼Œå®ç°æ–°çš„æ¥å£å³å¯ã€‚</p>
<p>** å¯¹è±¡é€‚é…å™¨æ¨¡å¼ï¼š** å½“å¸Œæœ›å°†ä¸€ä¸ªå¯¹è±¡è½¬æ¢æˆæ»¡è¶³å¦ä¸€ä¸ªæ–°æ¥å£çš„å¯¹è±¡æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ª Wrapper ç±»ï¼ŒæŒæœ‰åŸç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œåœ¨ Wrapper ç±»çš„æ–¹æ³•ä¸­ï¼Œè°ƒç”¨å®ä¾‹çš„æ–¹æ³•å°±è¡Œã€‚</p>
<p>** æ¥å£é€‚é…å™¨æ¨¡å¼ï¼š** å½“ä¸å¸Œæœ›å®ç°ä¸€ä¸ªæ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•æ—¶ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæŠ½è±¡ç±» Wrapperï¼Œå®ç°æ‰€æœ‰æ–¹æ³•ï¼Œæˆ‘ä»¬å†™åˆ«çš„ç±»çš„æ—¶å€™ï¼Œç»§æ‰¿æŠ½è±¡ç±»å³å¯ã€‚</p>
<p><strong>å‘½åè§„åˆ™ï¼š</strong></p>
<p><strong>æˆ‘ä¸ªäººç†è§£ï¼Œä¸‰ç§å‘½åæ–¹å¼ï¼Œæ˜¯æ ¹æ® src æ˜¯ä»¥æ€æ ·çš„å½¢å¼ç»™åˆ° Adapterï¼ˆåœ¨ Adapter é‡Œçš„å½¢å¼ï¼‰æ¥å‘½åçš„ã€‚</strong></p>
<p>ç±»é€‚é…å™¨ï¼Œä»¥ç±»ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°±æ˜¯å°† src å½“åšç±»ï¼Œç»§æ‰¿ï¼Œ</p>
<p>å¯¹è±¡é€‚é…å™¨ï¼Œä»¥å¯¹è±¡ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°† src ä½œä¸ºä¸€ä¸ªå¯¹è±¡ï¼ŒæŒæœ‰ã€‚</p>
<p>æ¥å£é€‚é…å™¨ï¼Œä»¥æ¥å£ç»™åˆ°ï¼Œåœ¨ Adapter é‡Œï¼Œå°† src ä½œä¸ºä¸€ä¸ªæ¥å£ï¼Œå®ç°ã€‚</p>
<p><strong>ä½¿ç”¨é€‰æ‹©ï¼š</strong></p>
<p><strong>æ ¹æ®åˆæˆå¤ç”¨åŸåˆ™ï¼Œç»„åˆå¤§äºç»§æ‰¿ã€‚å› æ­¤ï¼Œç±»çš„é€‚é…å™¨æ¨¡å¼åº”è¯¥å°‘ç”¨ã€‚</strong></p>
<h3 id="-4"><a class="markdownIt-Anchor" href="#-4">#</a> </h3>
<h2 id="6-è£…é¥°è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#6-è£…é¥°è€…æ¨¡å¼">#</a> 6 è£…é¥°è€…æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong><span style="color:#4d4d4d;">åŠ¨æ€çš„å°†æ–°åŠŸèƒ½é™„åŠ åˆ°å¯¹è±¡ä¸Šã€‚åœ¨å¯¹è±¡åŠŸèƒ½æ‰©å±•æ–¹é¢ï¼Œå®ƒ</span><span style="color:#4d4d4d;">æ¯”ç»§æ‰¿æ›´æœ‰å¼¹æ€§ã€‚</span></p>
<h3 id="span-stylecolor4d4d4d61-è£…é¥°è€…æ¨¡å¼ç»“æ„å›¾ä¸ä»£ç ç¤ºä¾‹span"><a class="markdownIt-Anchor" href="#span-stylecolor4d4d4d61-è£…é¥°è€…æ¨¡å¼ç»“æ„å›¾ä¸ä»£ç ç¤ºä¾‹span">#</a> <span style="color:#4d4d4d;">6.1 è£…é¥°è€…æ¨¡å¼ç»“æ„å›¾ä¸ä»£ç ç¤ºä¾‹</span></h3>
<p><span style="color:#4d4d4d;">1.Componentï¼ˆè¢«è£…é¥°å¯¹è±¡çš„åŸºç±»ï¼‰</span></p>
<p><span style="color:#4d4d4d;">   å®šä¹‰ä¸€ä¸ªå¯¹è±¡æ¥å£ï¼Œå¯ä»¥ç»™è¿™äº›å¯¹è±¡åŠ¨æ€åœ°æ·»åŠ èŒè´£ã€‚</span></p>
<p><span style="color:#4d4d4d;">2.ConcreteComponentï¼ˆå…·ä½“è¢«è£…é¥°å¯¹è±¡ï¼‰</span></p>
<p><span style="color:#4d4d4d;">   å®šä¹‰ä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ç»™è¿™ä¸ªå¯¹è±¡æ·»åŠ ä¸€äº›èŒè´£ã€‚</span></p>
<p><span style="color:#4d4d4d;">3.Decoratorï¼ˆè£…é¥°è€…æŠ½è±¡ç±»ï¼‰</span></p>
<p><span style="color:#4d4d4d;">   ç»´æŒä¸€ä¸ªæŒ‡å‘ Component å®ä¾‹çš„å¼•ç”¨ï¼Œå¹¶å®šä¹‰ä¸€ä¸ªä¸ Component æ¥å£ä¸€è‡´çš„æ¥å£ã€‚</span></p>
<p><span style="color:#4d4d4d;">4.ConcreteDecoratorï¼ˆå…·ä½“è£…é¥°è€…ï¼‰</span></p>
<p><span style="color:#4d4d4d;">   å…·ä½“çš„è£…é¥°å¯¹è±¡ï¼Œç»™å†…éƒ¨æŒæœ‰çš„å…·ä½“è¢«è£…é¥°å¯¹è±¡ï¼Œå¢åŠ å…·ä½“çš„èŒè´£ã€‚</span></p>
<p><strong>è¢«è£…é¥°å¯¹è±¡å’Œä¿®é¥°è€…ç»§æ‰¿è‡ªåŒä¸€ä¸ªè¶…ç±»</strong></p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609223457210.png" class="has" width="561" height="287" />
<p><strong><span style="color:#4d4d4d;">ä¸¾ä¾‹</span></strong><span style="color:#4d4d4d;">(<span style="color:#4d4d4d;">å’–å•¡é¦†è®¢å•é¡¹ç›®ï¼š</span></span><span style="color:#4d4d4d;">1ï¼‰ã€å’–å•¡ç§ç±»ï¼šEspressoã€ShortBlackã€LongBlackã€Decaf</span><span style="color:#4d4d4d;">2ï¼‰ã€<strong>è°ƒæ–™ï¼ˆè£…é¥°è€…ï¼‰</strong>ï¼šMilkã€Soyã€Chocolate</span><span style="color:#4d4d4d;">)ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</span></p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190609222716270.png" class="has" width="561" height="287" />
<p>è¢«è£…é¥°çš„å¯¹è±¡å’Œè£…é¥°è€…éƒ½ç»§æ‰¿è‡ªåŒä¸€ä¸ªè¶…ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Drink &#123;</span><br><span class="line">       public String description=&quot;&quot;;</span><br><span class="line">       private float price=0f;;</span><br><span class="line">       </span><br><span class="line">       </span><br><span class="line">       public void setDescription(String description)</span><br><span class="line">       &#123;</span><br><span class="line">              this.description=description;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       public String getDescription()</span><br><span class="line">       &#123;</span><br><span class="line">              return description+&quot;-&quot;+this.getPrice();</span><br><span class="line">       &#125;</span><br><span class="line">       public float getPrice()</span><br><span class="line">       &#123;</span><br><span class="line">              return price;</span><br><span class="line">       &#125;</span><br><span class="line">       public void setPrice(float price)</span><br><span class="line">       &#123;</span><br><span class="line">              this.price=price;</span><br><span class="line">       &#125;</span><br><span class="line">       public abstract float cost();</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¢«è£…é¥°çš„å¯¹è±¡ï¼Œä¸ç”¨å»æ”¹é€ ã€‚åŸæ¥æ€ä¹ˆæ ·å†™ï¼Œç°åœ¨è¿˜æ˜¯æ€ä¹ˆå†™ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public  class Coffee extends Drink &#123;</span><br><span class="line">       @Override</span><br><span class="line">       public float cost() &#123;</span><br><span class="line">              // TODO Auto-generated method stub</span><br><span class="line">              return super.getPrice();</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>coffee ç±»çš„å®ç°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class Decaf extends Coffee &#123;</span><br><span class="line">       public Decaf()</span><br><span class="line">       &#123;</span><br><span class="line">              super.setDescription(&quot;Decaf&quot;);</span><br><span class="line">              super.setPrice(3.0f);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è£…é¥°è€…</p>
<p>è£…é¥°è€…ä¸ä»…è¦è€ƒè™‘è‡ªèº«ï¼Œè¿˜è¦è€ƒè™‘è¢«å®ƒä¿®é¥°çš„å¯¹è±¡ï¼Œå®ƒæ˜¯åœ¨è¢«ä¿®é¥°çš„å¯¹è±¡ä¸Šç»§ç»­æ·»åŠ ä¿®é¥°ã€‚ä¾‹å¦‚ï¼Œå’–å•¡é‡Œé¢åŠ ç‰›å¥¶ï¼Œå†åŠ å·§å…‹åŠ›ã€‚åŠ ç³–åä»·æ ¼ä¸º coffee+milkã€‚å†åŠ ç‰›å¥¶ä»·æ ¼ä¸º coffee+milk+chocolateã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class Decorator extends Drink &#123;</span><br><span class="line">       private Drink Obj;</span><br><span class="line">       public Decorator(Drink Obj) &#123;</span><br><span class="line">              this.Obj = Obj;</span><br><span class="line">       &#125;;</span><br><span class="line">       @Override</span><br><span class="line">       public float cost() &#123;</span><br><span class="line">              // TODO Auto-generated method stub</span><br><span class="line">              return super.getPrice() + Obj.cost();</span><br><span class="line">       &#125;</span><br><span class="line">       @Override</span><br><span class="line">       public String getDescription() &#123;</span><br><span class="line">              return super.description + &quot;-&quot; + super.getPrice() + &quot;&amp;&amp;&quot; + Obj.getDescription();</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è£…é¥°è€…å®ä¾‹åŒ–ï¼ˆåŠ ç‰›å¥¶ï¼‰ã€‚è¿™é‡Œé¢è¦å¯¹è¢«ä¿®é¥°çš„å¯¹è±¡è¿›è¡Œå®ä¾‹åŒ–ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class Milk extends Decorator &#123;</span><br><span class="line">       public Milk(Drink Obj) &#123;          </span><br><span class="line">              super(Obj);</span><br><span class="line">              // TODO Auto-generated constructor stub</span><br><span class="line">              super.setDescription(&quot;Milk&quot;);</span><br><span class="line">              super.setPrice(2.0f);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>coffee åº—ï¼šåˆå§‹åŒ–ä¸€ä¸ªè¢«ä¿®é¥°å¯¹è±¡ï¼Œä¿®é¥°è€…å®ä¾‹éœ€è¦å¯¹è¢«ä¿®æ”¹è€…å®ä¾‹åŒ–ï¼Œæ‰èƒ½å¯¹å…·ä½“çš„è¢«ä¿®é¥°è€…è¿›è¡Œä¿®é¥°ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">public class CoffeeBar &#123;</span><br><span class="line">       public static void main(String[] args) &#123;</span><br><span class="line">              Drink order;</span><br><span class="line">              order = new Decaf();</span><br><span class="line">              System.out.println(&quot;order1 price:&quot; + order.cost());</span><br><span class="line">              System.out.println(&quot;order1 desc:&quot; + order.getDescription());</span><br><span class="line">              System.out.println(&quot;****************&quot;);</span><br><span class="line">              order = new LongBlack();</span><br><span class="line">              order = new Milk(order);</span><br><span class="line">              order = new Chocolate(order);</span><br><span class="line">              order = new Chocolate(order);</span><br><span class="line">              System.out.println(&quot;order2 price:&quot; + order.cost());</span><br><span class="line">              System.out.println(&quot;order2 desc:&quot; + order.getDescription());</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>6.2 æ€»ç»“</p>
<p><strong>è£…é¥°è€…å’Œè¢«è£…é¥°è€…ä¹‹é—´å¿…é¡»æ˜¯ä¸€æ ·çš„ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¦æœ‰å…±åŒçš„è¶…ç±»ã€‚åœ¨è¿™é‡Œåº”ç”¨ç»§æ‰¿å¹¶ä¸æ˜¯å®ç°æ–¹æ³•çš„å¤åˆ¶ï¼Œè€Œæ˜¯å®ç°ç±»å‹çš„åŒ¹é…ã€‚å› ä¸ºè£…é¥°è€…å’Œè¢«è£…é¥°è€…æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œå› æ­¤è£…é¥°è€…å¯ä»¥å–ä»£è¢«è£…é¥°è€…ï¼Œè¿™æ ·å°±ä½¿è¢«è£…é¥°è€…æ‹¥æœ‰äº†è£…é¥°è€…ç‹¬æœ‰çš„è¡Œä¸ºã€‚æ ¹æ®è£…é¥°è€…æ¨¡å¼çš„ç†å¿µï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ï¼Œå®ç°æ–°çš„è£…é¥°è€…å¢åŠ æ–°çš„è¡Œä¸ºã€‚å¦‚æœæ˜¯ç”¨ç»§æ‰¿ï¼Œæ¯å½“éœ€è¦å¢åŠ æ–°çš„è¡Œä¸ºæ—¶ï¼Œå°±è¦ä¿®æ”¹åŸç¨‹åºäº†ã€‚</strong></p>
<h3 id="-5"><a class="markdownIt-Anchor" href="#-5">#</a> </h3>
<h3 id="-6"><a class="markdownIt-Anchor" href="#-6">#</a> </h3>
<h2 id="7-ä»£ç†æ¨¡å¼"><a class="markdownIt-Anchor" href="#7-ä»£ç†æ¨¡å¼">#</a> 7 ä»£ç†æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** ä»£ç†æ¨¡å¼ç»™æŸä¸€ä¸ªå¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†å¯¹è±¡ï¼Œå¹¶ç”±ä»£ç†å¯¹è±¡æ§åˆ¶å¯¹åŸå¯¹è±¡çš„å¼•ç”¨ã€‚é€šä¿—çš„æ¥è®²ä»£ç†æ¨¡å¼å°±æ˜¯æˆ‘ä»¬ç”Ÿæ´»ä¸­å¸¸è§çš„ä¸­ä»‹ã€‚</p>
<p>ä¸¾ä¸ªä¾‹å­æ¥è¯´æ˜ï¼šå‡å¦‚è¯´æˆ‘ç°åœ¨æƒ³ä¹°ä¸€è¾†äºŒæ‰‹è½¦ï¼Œè™½ç„¶æˆ‘å¯ä»¥è‡ªå·±å»æ‰¾è½¦æºï¼Œåšè´¨é‡æ£€æµ‹ç­‰ä¸€ç³»åˆ—çš„è½¦è¾†è¿‡æˆ·æµç¨‹ï¼Œä½†æ˜¯è¿™ç¡®å®å¤ªæµªè´¹æˆ‘å¾—æ—¶é—´å’Œç²¾åŠ›äº†ã€‚æˆ‘åªæ˜¯æƒ³ä¹°ä¸€è¾†è½¦è€Œå·²ä¸ºä»€ä¹ˆæˆ‘è¿˜è¦é¢å¤–åšè¿™ä¹ˆå¤šäº‹å‘¢ï¼Ÿäºæ˜¯æˆ‘å°±é€šè¿‡ä¸­ä»‹å…¬å¸æ¥ä¹°è½¦ï¼Œä»–ä»¬æ¥ç»™æˆ‘æ‰¾è½¦æºï¼Œå¸®æˆ‘åŠç†è½¦è¾†è¿‡æˆ·æµç¨‹ï¼Œæˆ‘åªæ˜¯è´Ÿè´£é€‰æ‹©è‡ªå·±å–œæ¬¢çš„è½¦ï¼Œç„¶åä»˜é’±å°±å¯ä»¥äº†ã€‚ç”¨å›¾è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/2019061001123986.png" class="has" width="633" height="210" />
<h3 id="71-ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ¨¡å¼"><a class="markdownIt-Anchor" href="#71-ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ¨¡å¼">#</a> 7.1 ä¸ºä»€ä¹ˆè¦ç”¨ä»£ç†æ¨¡å¼ï¼Ÿ</h3>
<p>** ä¸­ä»‹éš”ç¦»ä½œç”¨ï¼š** åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå®¢æˆ·ç±»ä¸æƒ³æˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨ä¸€ä¸ªå§”æ‰˜å¯¹è±¡ï¼Œè€Œä»£ç†ç±»å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç±»å’Œå§”æ‰˜å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ï¼Œå…¶ç‰¹å¾æ˜¯ä»£ç†ç±»å’Œå§”æ‰˜ç±»å®ç°ç›¸åŒçš„æ¥å£ã€‚</p>
<p>** å¼€é—­åŸåˆ™ï¼Œå¢åŠ åŠŸèƒ½ï¼š** ä»£ç†ç±»é™¤äº†æ˜¯å®¢æˆ·ç±»å’Œå§”æ‰˜ç±»çš„ä¸­ä»‹ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ç»™ä»£ç†ç±»å¢åŠ é¢å¤–çš„åŠŸèƒ½æ¥æ‰©å±•å§”æ‰˜ç±»çš„åŠŸèƒ½ï¼Œè¿™æ ·åšæˆ‘ä»¬åªéœ€è¦ä¿®æ”¹ä»£ç†ç±»è€Œä¸éœ€è¦å†ä¿®æ”¹å§”æ‰˜ç±»ï¼Œç¬¦åˆä»£ç è®¾è®¡çš„å¼€é—­åŸåˆ™ã€‚ä»£ç†ç±»ä¸»è¦è´Ÿè´£ä¸ºå§”æ‰˜ç±»é¢„å¤„ç†æ¶ˆæ¯ã€è¿‡æ»¤æ¶ˆæ¯ã€æŠŠæ¶ˆæ¯è½¬å‘ç»™å§”æ‰˜ç±»ï¼Œä»¥åŠäº‹åå¯¹è¿”å›ç»“æœçš„å¤„ç†ç­‰ã€‚ä»£ç†ç±»æœ¬èº«å¹¶ä¸çœŸæ­£å®ç°æœåŠ¡ï¼Œè€Œæ˜¯åŒè¿‡è°ƒç”¨å§”æ‰˜ç±»çš„ç›¸å…³æ–¹æ³•ï¼Œæ¥æä¾›ç‰¹å®šçš„æœåŠ¡ã€‚çœŸæ­£çš„ä¸šåŠ¡åŠŸèƒ½è¿˜æ˜¯ç”±å§”æ‰˜ç±»æ¥å®ç°ï¼Œä½†æ˜¯å¯ä»¥åœ¨ä¸šåŠ¡åŠŸèƒ½æ‰§è¡Œçš„å‰ååŠ å…¥ä¸€äº›å…¬å…±çš„æœåŠ¡ã€‚ä¾‹å¦‚æˆ‘ä»¬æƒ³ç»™é¡¹ç›®åŠ å…¥ç¼“å­˜ã€æ—¥å¿—è¿™äº›åŠŸèƒ½ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ä»£ç†ç±»æ¥å®Œæˆï¼Œè€Œæ²¡å¿…è¦æ‰“å¼€å·²ç»å°è£…å¥½çš„å§”æ‰˜ç±»ã€‚</p>
<p><strong>ä»£ç†æ¨¡å¼åˆ†ä¸ºä¸‰ç±»ï¼š1. é™æ€ä»£ç† 2. åŠ¨æ€ä»£ç† 3. CGLIB ä»£ç†</strong></p>
<p>7.2 é™æ€ä»£ç†</p>
<p><span style="color:#4d4d4d;"><strong>ä¸¾ä¾‹</strong></span><span style="color:#4d4d4d;">(ä¹°æˆ¿</span><span style="color:#4d4d4d;">ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</span></p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/2019061001123984.png" class="has" width="359" height="179" />
<p>ç¬¬ä¸€æ­¥ï¼šåˆ›å»ºæœåŠ¡ç±»æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface BuyHouse &#123;</span><br><span class="line">    void buyHosue();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼šå®ç°æœåŠ¡æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public class BuyHouseImpl implements BuyHouse &#123;</span><br><span class="line">       @Override</span><br><span class="line">       public void buyHosue() &#123;</span><br><span class="line">              System.out.println(&quot;æˆ‘è¦ä¹°æˆ¿&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸‰æ­¥ï¼šåˆ›å»ºä»£ç†ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class BuyHouseProxy implements BuyHouse &#123;</span><br><span class="line">       private BuyHouse buyHouse;</span><br><span class="line">       public BuyHouseProxy(final BuyHouse buyHouse) &#123;</span><br><span class="line">              this.buyHouse = buyHouse;</span><br><span class="line">       &#125;</span><br><span class="line">       @Override</span><br><span class="line">       public void buyHosue() &#123;</span><br><span class="line">              System.out.println(&quot;ä¹°æˆ¿å‰å‡†å¤‡&quot;);</span><br><span class="line">              buyHouse.buyHosue();</span><br><span class="line">              System.out.println(&quot;ä¹°æˆ¿åè£…ä¿®&quot;);</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æ€»ç»“ï¼š</strong></p>
<p>ä¼˜ç‚¹ï¼šå¯ä»¥åšåˆ°åœ¨ç¬¦åˆå¼€é—­åŸåˆ™çš„æƒ…å†µä¸‹å¯¹ç›®æ ‡å¯¹è±¡è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚</p>
<p>ç¼ºç‚¹ï¼š <strong>ä»£ç†å¯¹è±¡ä¸ç›®æ ‡å¯¹è±¡è¦å®ç°ç›¸åŒçš„æ¥å£ï¼Œæˆ‘ä»¬å¾—ä¸ºæ¯ä¸€ä¸ªæœåŠ¡éƒ½å¾—åˆ›å»ºä»£ç†ç±»ï¼Œå·¥ä½œé‡å¤ªå¤§</strong>ï¼Œä¸æ˜“ç®¡ç†ã€‚åŒæ—¶æ¥å£ä¸€æ—¦å‘ç”Ÿæ”¹å˜ï¼Œä»£ç†ç±»ä¹Ÿå¾—ç›¸åº”ä¿®æ”¹ã€‚</p>
<h3 id="73-åŠ¨æ€ä»£ç†"><a class="markdownIt-Anchor" href="#73-åŠ¨æ€ä»£ç†">#</a> 7.3 åŠ¨æ€ä»£ç†</h3>
<p>åŠ¨æ€ä»£ç†æœ‰ä»¥ä¸‹ç‰¹ç‚¹:</p>
<p>1. ä»£ç†å¯¹è±¡ï¼Œä¸éœ€è¦å®ç°æ¥å£</p>
<p>2. ä»£ç†å¯¹è±¡çš„ç”Ÿæˆï¼Œæ˜¯åˆ©ç”¨ JDK çš„ API, åŠ¨æ€çš„åœ¨å†…å­˜ä¸­æ„å»ºä»£ç†å¯¹è±¡ (éœ€è¦æˆ‘ä»¬æŒ‡å®šåˆ›å»ºä»£ç†å¯¹è±¡ / ç›®æ ‡å¯¹è±¡å®ç°çš„æ¥å£çš„ç±»å‹)</p>
<p>ä»£ç†ç±»ä¸ç”¨å†å®ç°æ¥å£äº†ã€‚ä½†æ˜¯ï¼Œè¦æ±‚è¢«ä»£ç†å¯¹è±¡å¿…é¡»æœ‰æ¥å£ã€‚</p>
<p><strong>åŠ¨æ€ä»£ç†å®ç°ï¼š</strong></p>
<p>Java.lang.reflect.Proxy ç±»å¯ä»¥ç›´æ¥ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡</p>
<ul>
<li>
<p>Proxy.newProxyInstance (ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h) ç”Ÿæˆä¸€ä¸ªä»£ç†å¯¹è±¡</p>
<ul>
<li>
<p>å‚æ•° 1:ClassLoader loader ä»£ç†å¯¹è±¡çš„ç±»åŠ è½½å™¨ ä¸€èˆ¬ä½¿ç”¨è¢«ä»£ç†å¯¹è±¡çš„ç±»åŠ è½½å™¨</p>
</li>
<li>
<p>å‚æ•° 2:Class&lt;?&gt;[] interfaces ä»£ç†å¯¹è±¡çš„è¦å®ç°çš„æ¥å£ ä¸€èˆ¬ä½¿ç”¨çš„è¢«ä»£ç†å¯¹è±¡å®ç°çš„æ¥å£</p>
</li>
<li>
<p>å‚æ•° 3:InvocationHandler h (æ¥å£) æ‰§è¡Œå¤„ç†ç±»</p>
</li>
</ul>
</li>
<li>
<p>InvocationHandler ä¸­çš„ invoke (Object proxy, Method method, Object [] args) æ–¹æ³•ï¼šè°ƒç”¨ä»£ç†ç±»çš„ä»»ä½•æ–¹æ³•ï¼Œæ­¤æ–¹æ³•éƒ½ä¼šæ‰§è¡Œ</p>
<ul>
<li>
<p>å‚æ•° 3.1: ä»£ç†å¯¹è±¡ (æ…ç”¨)</p>
</li>
<li>
<p>å‚æ•° 3.2: å½“å‰æ‰§è¡Œçš„æ–¹æ³•</p>
</li>
<li>
<p>å‚æ•° 3.3: å½“å‰æ‰§è¡Œçš„æ–¹æ³•è¿è¡Œæ—¶ä¼ é€’è¿‡æ¥çš„å‚æ•°</p>
</li>
</ul>
</li>
</ul>
<p>ç¬¬ä¸€æ­¥ï¼šç¼–å†™åŠ¨æ€å¤„ç†å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicProxyHandler implements InvocationHandler &#123;</span><br><span class="line">       private Object object;</span><br><span class="line">       public DynamicProxyHandler(final Object object) &#123;</span><br><span class="line">              this.object = object;</span><br><span class="line">       &#125;</span><br><span class="line">       @Override</span><br><span class="line">       public Object invoke(Object proxy, Method method, Object[] args) throws Throwable &#123;</span><br><span class="line">              System.out.println(&quot;ä¹°æˆ¿å‰å‡†å¤‡&quot;);</span><br><span class="line">              Object result = method.invoke(object, args);</span><br><span class="line">              System.out.println(&quot;ä¹°æˆ¿åè£…ä¿®&quot;);</span><br><span class="line">              return result;</span><br><span class="line">       &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç¬¬äºŒæ­¥ï¼šç¼–å†™æµ‹è¯•ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class DynamicProxyTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        BuyHouse buyHouse = new BuyHouseImpl();</span><br><span class="line">        BuyHouse proxyBuyHouse = (BuyHouse) Proxy.newProxyInstance(BuyHouse.class.getClassLoader(), new</span><br><span class="line">                Class[]&#123;BuyHouse.class&#125;, new DynamicProxyHandler(buyHouse));</span><br><span class="line">        proxyBuyHouse.buyHosue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>** åŠ¨æ€ä»£ç†æ€»ç»“ï¼š** è™½ç„¶ç›¸å¯¹äºé™æ€ä»£ç†ï¼ŒåŠ¨æ€ä»£ç†å¤§å¤§å‡å°‘äº†æˆ‘ä»¬çš„å¼€å‘ä»»åŠ¡ï¼ŒåŒæ—¶å‡å°‘äº†å¯¹ä¸šåŠ¡æ¥å£çš„ä¾èµ–ï¼Œé™ä½äº†è€¦åˆåº¦ã€‚ä½†æ˜¯è¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹å°å°çš„é—æ†¾ä¹‹å¤„ï¼Œé‚£å°±æ˜¯å®ƒå§‹ç»ˆæ— æ³•æ‘†è„±ä»…æ”¯æŒ interface ä»£ç†çš„æ¡æ¢ï¼ˆæˆ‘ä»¬è¦ä½¿ç”¨è¢«ä»£ç†çš„å¯¹è±¡çš„æ¥å£ï¼‰ï¼Œå› ä¸ºå®ƒçš„è®¾è®¡æ³¨å®šäº†è¿™ä¸ªé—æ†¾ã€‚</p>
<p>7.4 CGLIB ä»£ç†</p>
<p><strong>CGLIB åŸç†</strong>ï¼šåŠ¨æ€ç”Ÿæˆä¸€ä¸ªè¦ä»£ç†ç±»çš„å­ç±»ï¼Œå­ç±»é‡å†™è¦ä»£ç†çš„ç±»çš„æ‰€æœ‰ä¸æ˜¯ final çš„æ–¹æ³•ã€‚åœ¨å­ç±»ä¸­é‡‡ç”¨æ–¹æ³•æ‹¦æˆªçš„æŠ€æœ¯æ‹¦æˆªæ‰€æœ‰çˆ¶ç±»æ–¹æ³•çš„è°ƒç”¨ï¼Œé¡ºåŠ¿ç»‡å…¥æ¨ªåˆ‡é€»è¾‘ã€‚å®ƒæ¯”ä½¿ç”¨ java åå°„çš„ JDK åŠ¨æ€ä»£ç†è¦å¿«ã€‚</p>
<p><strong>CGLIB åº•å±‚</strong>ï¼šä½¿ç”¨å­—èŠ‚ç å¤„ç†æ¡†æ¶ ASMï¼Œæ¥è½¬æ¢å­—èŠ‚ç å¹¶ç”Ÿæˆæ–°çš„ç±»ã€‚ä¸é¼“åŠ±ç›´æ¥ä½¿ç”¨ ASMï¼Œå› ä¸ºå®ƒè¦æ±‚ä½ å¿…é¡»å¯¹ JVM å†…éƒ¨ç»“æ„åŒ…æ‹¬ class æ–‡ä»¶çš„æ ¼å¼å’ŒæŒ‡ä»¤é›†éƒ½å¾ˆç†Ÿæ‚‰ã€‚</p>
<p><strong>CGLIB ç¼ºç‚¹</strong>ï¼šå¯¹äº final æ–¹æ³•ï¼Œæ— æ³•è¿›è¡Œä»£ç†ã€‚</p>
<p>CGLIB çš„å®ç°æ­¥éª¤ï¼š</p>
<p>ç¬¬ä¸€æ­¥ï¼šå»ºç«‹æ‹¦æˆªå™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">public Object intercept(Object object, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;ä¹°æˆ¿å‰å‡†å¤‡&quot;);</span><br><span class="line"></span><br><span class="line">        Object result = methodProxy.invoke(object, args);</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;ä¹°æˆ¿åè£…ä¿®&quot;);</span><br><span class="line"></span><br><span class="line">        return result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>å‚æ•°ï¼šObject ä¸ºç”± CGLib åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»å®ä¾‹ï¼ŒMethod ä¸ºä¸Šæ–‡ä¸­å®ä½“ç±»æ‰€è°ƒç”¨çš„è¢«ä»£ç†çš„æ–¹æ³•å¼•ç”¨ï¼ŒObject [] ä¸ºå‚æ•°å€¼åˆ—è¡¨ï¼ŒMethodProxy ä¸ºç”Ÿæˆçš„ä»£ç†ç±»å¯¹æ–¹æ³•çš„ä»£ç†å¼•ç”¨ã€‚</p>
<p>è¿”å›ï¼šä»ä»£ç†å®ä¾‹çš„æ–¹æ³•è°ƒç”¨è¿”å›çš„å€¼ã€‚</p>
<p>å…¶ä¸­ï¼Œ<strong>proxy.invokeSuper(obj,arg)</strong> è°ƒç”¨ä»£ç†ç±»å®ä¾‹ä¸Šçš„ proxy æ–¹æ³•çš„çˆ¶ç±»æ–¹æ³•ï¼ˆå³å®ä½“ç±» TargetObject ä¸­å¯¹åº”çš„æ–¹æ³•ï¼‰</p>
<p>ç¬¬äºŒæ­¥ï¼š ç”ŸæˆåŠ¨æ€ä»£ç†ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class CglibProxy implements MethodInterceptor &#123;</span><br><span class="line">    private Object target;</span><br><span class="line">    public Object getInstance(final Object target) &#123;</span><br><span class="line">        this.target = target;</span><br><span class="line">        Enhancer enhancer = new Enhancer();</span><br><span class="line">        enhancer.setSuperclass(this.target.getClass());</span><br><span class="line">        enhancer.setCallback(this);</span><br><span class="line">        return enhancer.create();</span><br><span class="line">    &#125;</span><br><span class="line">    public Object intercept(Object object, Method method, Object[] args, MethodProxy methodProxy) throws Throwable &#123;</span><br><span class="line">        System.out.println(&quot;ä¹°æˆ¿å‰å‡†å¤‡&quot;);</span><br><span class="line">        Object result = methodProxy.invoke(object, args);</span><br><span class="line">        System.out.println(&quot;ä¹°æˆ¿åè£…ä¿®&quot;);</span><br><span class="line">        return result;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œ Enhancer ç±»æ˜¯ CGLib ä¸­çš„ä¸€ä¸ªå­—èŠ‚ç å¢å¼ºå™¨ï¼Œå®ƒå¯ä»¥æ–¹ä¾¿çš„å¯¹ä½ æƒ³è¦å¤„ç†çš„ç±»è¿›è¡Œæ‰©å±•ï¼Œä»¥åä¼šç»å¸¸çœ‹åˆ°å®ƒã€‚</p>
<p>é¦–å…ˆå°†è¢«ä»£ç†ç±» TargetObject è®¾ç½®æˆçˆ¶ç±»ï¼Œç„¶åè®¾ç½®æ‹¦æˆªå™¨ TargetInterceptorï¼Œæœ€åæ‰§è¡Œ enhancer.create () åŠ¨æ€ç”Ÿæˆä¸€ä¸ªä»£ç†ç±»ï¼Œå¹¶ä» Object å¼ºåˆ¶è½¬å‹æˆçˆ¶ç±»å‹ TargetObjectã€‚</p>
<p>ç¬¬ä¸‰æ­¥ï¼šæµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">public class CglibProxyTest &#123;</span><br><span class="line">    public static void main(String[] args)&#123;</span><br><span class="line">        BuyHouse buyHouse = new BuyHouseImpl();</span><br><span class="line">        CglibProxy cglibProxy = new CglibProxy();</span><br><span class="line">        BuyHouseImpl buyHouseCglibProxy = (BuyHouseImpl) cglibProxy.getInstance(buyHouse);</span><br><span class="line">        buyHouseCglibProxy.buyHosue();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>CGLIB ä»£ç†æ€»ç»“ï¼š** CGLIB åˆ›å»ºçš„åŠ¨æ€ä»£ç†å¯¹è±¡æ¯” JDK åˆ›å»ºçš„åŠ¨æ€ä»£ç†å¯¹è±¡çš„æ€§èƒ½æ›´é«˜ï¼Œä½†æ˜¯ CGLIB åˆ›å»ºä»£ç†å¯¹è±¡æ—¶æ‰€èŠ±è´¹çš„æ—¶é—´å´æ¯” JDK å¤šå¾—å¤šã€‚æ‰€ä»¥å¯¹äºå•ä¾‹çš„å¯¹è±¡ï¼Œå› ä¸ºæ— éœ€é¢‘ç¹åˆ›å»ºå¯¹è±¡ï¼Œç”¨ CGLIB åˆé€‚ï¼Œåä¹‹ä½¿ç”¨ JDK æ–¹å¼è¦æ›´ä¸ºåˆé€‚ä¸€äº›ã€‚åŒæ—¶ç”±äº CGLib ç”±äºæ˜¯é‡‡ç”¨åŠ¨æ€åˆ›å»ºå­ç±»çš„æ–¹æ³•ï¼Œå¯¹äº final ä¿®é¥°çš„æ–¹æ³•æ— æ³•è¿›è¡Œä»£ç†ã€‚**</p>
<h2 id="8-å¤–è§‚æ¨¡å¼"><a class="markdownIt-Anchor" href="#8-å¤–è§‚æ¨¡å¼">#</a> 8 å¤–è§‚æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong> éšè—äº†ç³»ç»Ÿçš„å¤æ‚æ€§ï¼Œå¹¶å‘å®¢æˆ·ç«¯æä¾›äº†ä¸€ä¸ªå¯ä»¥è®¿é—®ç³»ç»Ÿçš„æ¥å£ã€‚</p>
<h3 id="81-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#81-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 8.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610154828945.png" class="has" width="666" height="408" />
<p>ç®€å•æ¥è¯´ï¼Œè¯¥æ¨¡å¼å°±æ˜¯æŠŠä¸€äº›å¤æ‚çš„æµç¨‹å°è£…æˆä¸€ä¸ªæ¥å£ä¾›ç»™å¤–éƒ¨ç”¨æˆ·æ›´ç®€å•çš„ä½¿ç”¨ã€‚è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œè®¾è®¡åˆ° 3 ä¸ªè§’è‰²ã€‚</p>
<p>1ï¼‰. é—¨é¢è§’è‰²ï¼šå¤–è§‚æ¨¡å¼çš„æ ¸å¿ƒã€‚å®ƒè¢«å®¢æˆ·è§’è‰²è°ƒç”¨ï¼Œå®ƒç†Ÿæ‚‰å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å†…éƒ¨æ ¹æ®å®¢æˆ·è§’è‰²çš„éœ€æ±‚é¢„å®šäº†å‡ ç§åŠŸèƒ½çš„ç»„åˆã€‚ï¼ˆ<strong>å®¢æˆ·è°ƒç”¨ï¼ŒåŒæ—¶è‡ªèº«è°ƒç”¨å­ç³»ç»ŸåŠŸèƒ½</strong>ï¼‰</p>
<p>2ï¼‰. å­ç³»ç»Ÿè§’è‰²ï¼šå®ç°äº†å­ç³»ç»Ÿçš„åŠŸèƒ½ã€‚å®ƒå¯¹å®¢æˆ·è§’è‰²å’Œ Facade æ—¶æœªçŸ¥çš„ã€‚å®ƒå†…éƒ¨å¯ä»¥æœ‰ç³»ç»Ÿå†…çš„ç›¸äº’äº¤äº’ï¼Œä¹Ÿå¯ä»¥ç”±ä¾›å¤–ç•Œè°ƒç”¨çš„æ¥å£ã€‚ï¼ˆå®ç°å…·ä½“åŠŸèƒ½ï¼‰</p>
<p>3ï¼‰. å®¢æˆ·è§’è‰²ï¼šé€šè¿‡è°ƒç”¨ Facede æ¥å®Œæˆè¦å®ç°çš„åŠŸèƒ½ï¼ˆ<strong>è°ƒç”¨é—¨é¢è§’è‰²</strong>ï¼‰ã€‚</p>
<p>ä¸¾ä¾‹ï¼ˆæ¯ä¸ª Computer éƒ½æœ‰ CPUã€Memoryã€Diskã€‚åœ¨ Computer å¼€å¯å’Œå…³é—­çš„æ—¶å€™ï¼Œç›¸åº”çš„éƒ¨ä»¶ä¹Ÿä¼šå¼€å¯å’Œå…³é—­ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610154828952.png" class="has" width="473" height="187" />
<p>é¦–å…ˆæ˜¯å­ç³»ç»Ÿç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">public class CPU &#123;</span><br><span class="line"></span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot;cpu is start...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void shutDown() &#123;</span><br><span class="line">        System.out.println(&quot;CPU is shutDown...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Disk &#123;</span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot;Disk is start...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void shutDown() &#123;</span><br><span class="line">        System.out.println(&quot;Disk is shutDown...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public class Memory &#123;</span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot;Memory is start...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void shutDown() &#123;</span><br><span class="line">        System.out.println(&quot;Memory is shutDown...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç„¶åæ˜¯ï¼Œé—¨é¢ç±» Facade</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Computer &#123;</span><br><span class="line"></span><br><span class="line">    private CPU cpu;</span><br><span class="line">    private Memory memory;</span><br><span class="line">    private Disk disk;</span><br><span class="line"></span><br><span class="line">    public Computer() &#123;</span><br><span class="line">        cpu = new CPU();</span><br><span class="line">        memory = new Memory();</span><br><span class="line">        disk = new Disk();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void start() &#123;</span><br><span class="line">        System.out.println(&quot;Computer start begin&quot;);</span><br><span class="line">        cpu.start();</span><br><span class="line">        disk.start();</span><br><span class="line">        memory.start();</span><br><span class="line">        System.out.println(&quot;Computer start end&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void shutDown() &#123;</span><br><span class="line">        System.out.println(&quot;Computer shutDown begin&quot;);</span><br><span class="line">        cpu.shutDown();</span><br><span class="line">        disk.shutDown();</span><br><span class="line">        memory.shutDown();</span><br><span class="line">        System.out.println(&quot;Computer shutDown end...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åä¸ºï¼Œå®¢æˆ·è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Client &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Computer computer = new Computer();</span><br><span class="line">        computer.start();</span><br><span class="line">        System.out.println(&quot;=================&quot;);</span><br><span class="line">        computer.shutDown();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="82-ä¼˜ç‚¹"><a class="markdownIt-Anchor" href="#82-ä¼˜ç‚¹">#</a> 8.2 ä¼˜ç‚¹</h3>
<p>**ã€€- æ¾æ•£è€¦åˆ **</p>
<p>ä½¿å¾—å®¢æˆ·ç«¯å’Œå­ç³»ç»Ÿä¹‹é—´è§£è€¦ï¼Œè®©å­ç³»ç»Ÿå†…éƒ¨çš„æ¨¡å—åŠŸèƒ½æ›´å®¹æ˜“æ‰©å±•å’Œç»´æŠ¤ï¼›</p>
<p>**ã€€ã€€- ç®€å•æ˜“ç”¨ **</p>
<p>å®¢æˆ·ç«¯æ ¹æœ¬ä¸éœ€è¦çŸ¥é“å­ç³»ç»Ÿå†…éƒ¨çš„å®ç°ï¼Œæˆ–è€…æ ¹æœ¬ä¸éœ€è¦çŸ¥é“å­ç³»ç»Ÿå†…éƒ¨çš„æ„æˆï¼Œå®ƒåªéœ€è¦è·Ÿ Facade ç±»äº¤äº’å³å¯ã€‚</p>
<p>**ã€€- æ›´å¥½çš„åˆ’åˆ†è®¿é—®å±‚æ¬¡ **</p>
<p>æœ‰äº›æ–¹æ³•æ˜¯å¯¹ç³»ç»Ÿå¤–çš„ï¼Œæœ‰äº›æ–¹æ³•æ˜¯ç³»ç»Ÿå†…éƒ¨ç›¸äº’äº¤äº’çš„ä½¿ç”¨çš„ã€‚å­ç³»ç»ŸæŠŠé‚£äº›æš´éœ²ç»™å¤–éƒ¨çš„åŠŸèƒ½é›†ä¸­åˆ°é—¨é¢ä¸­ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°å®¢æˆ·ç«¯çš„ä½¿ç”¨ï¼Œå¾ˆå¥½çš„éšè—äº†å­ç³»ç»Ÿå†…éƒ¨çš„ç»†èŠ‚ã€‚</p>
<h2 id="9-æ¡¥æ¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#9-æ¡¥æ¥æ¨¡å¼">#</a> 9 æ¡¥æ¥æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong> å°†æŠ½è±¡éƒ¨åˆ†ä¸å®ƒçš„å®ç°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚</p>
<h3 id="91-æ¡ˆä¾‹"><a class="markdownIt-Anchor" href="#91-æ¡ˆä¾‹">#</a> 9.1 æ¡ˆä¾‹</h3>
<p>çœ‹ä¸‹å›¾æ‰‹æœºä¸æ‰‹æœºè½¯ä»¶çš„ç±»å›¾</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610180930798.png" class="has" width="710" height="417" />
<p>å¢åŠ ä¸€æ¬¾æ–°çš„æ‰‹æœºè½¯ä»¶ï¼Œéœ€è¦åœ¨æ‰€æœ‰æ‰‹æœºå“ç‰Œç±»ä¸‹æ·»åŠ å¯¹åº”çš„æ‰‹æœºè½¯ä»¶ç±»ï¼Œå½“æ‰‹æœºè½¯ä»¶ç§ç±»è¾ƒå¤šæ—¶ï¼Œå°†å¯¼è‡´ç±»çš„ä¸ªæ•°æ€¥å‰§è†¨èƒ€ï¼Œéš¾ä»¥ç»´æŠ¤</p>
<p>æ‰‹æœºå’Œæ‰‹æœºä¸­çš„è½¯ä»¶æ˜¯ä»€ä¹ˆå…³ç³»ï¼Ÿ</p>
<p>æ‰‹æœºä¸­çš„è½¯ä»¶ä»æœ¬è´¨ä¸Šæ¥è¯´å¹¶ä¸æ˜¯ä¸€ç§æ‰‹æœºï¼Œæ‰‹æœºè½¯ä»¶è¿è¡Œåœ¨æ‰‹æœºä¸­ï¼Œæ˜¯ä¸€ç§åŒ…å«ä¸è¢«åŒ…å«å…³ç³»ï¼Œè€Œä¸æ˜¯ä¸€ç§çˆ¶ä¸å­æˆ–è€…è¯´ä¸€èˆ¬ä¸ç‰¹æ®Šçš„å…³ç³»ï¼Œé€šè¿‡ç»§æ‰¿æ‰‹æœºç±»å®ç°æ‰‹æœºè½¯ä»¶ç±»çš„è®¾è®¡æ˜¯è¿åä¸€èˆ¬è§„å¾‹çš„ã€‚</p>
<p>å¦‚æœ Oppo æ‰‹æœºå®ç°äº† wifi åŠŸèƒ½ï¼Œç»§æ‰¿å®ƒçš„ Oppo åº”ç”¨å•†åŸä¹Ÿä¼šç»§æ‰¿ wifi åŠŸèƒ½ï¼Œå¹¶ä¸” Oppo æ‰‹æœºç±»çš„ä»»ä½•å˜åŠ¨ï¼Œéƒ½ä¼šå½±å“å…¶å­ç±»</p>
<p>æ¢ä¸€ç§è§£å†³æ€è·¯</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610180930823.png" class="has" width="710" height="430" />
<p>ä»ç±»å›¾ä¸Šçœ‹èµ·æ¥æ›´åƒæ˜¯æ‰‹æœºè½¯ä»¶ç±»å›¾ï¼Œæ¶‰åŠåˆ°æ‰‹æœºæœ¬èº«ç›¸å…³çš„åŠŸèƒ½ï¼Œæ¯”å¦‚è¯´ï¼šwifi åŠŸèƒ½ï¼Œæ”¾åˆ°å“ªä¸ªç±»ä¸­å®ç°å‘¢ï¼Ÿæ”¾åˆ° OppoAppStore ä¸­å®ç°æ˜¾ç„¶æ˜¯ä¸åˆé€‚çš„</p>
<p>å¼•èµ·æ•´ä¸ªç»“æ„å˜åŒ–çš„å…ƒç´ æœ‰ä¸¤ä¸ªï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºå“ç‰Œï¼Œä¸€ä¸ªæ˜¯æ‰‹æœºè½¯ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªç‚¹æŠ½å‡ºæ¥ï¼Œåˆ†åˆ«è¿›è¡Œå°è£…</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610180930831.png" class="has" width="690" height="331" />
<h3 id="92-æ¡¥æ¥æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#92-æ¡¥æ¥æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 9.2 æ¡¥æ¥æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610180930861.png" class="has" width="556" height="274" />
<p><strong>ç±»å›¾ï¼š</strong></p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610180930821.png" class="has" width="451" height="197" />
<p><strong>å®ç°ï¼š</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public interface Software &#123;</span><br><span class="line">    public void run();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public class AppStore implements Software &#123;</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        System.out.println(&quot;run app store&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Camera implements Software &#123;</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        System.out.println(&quot;run camera&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æŠ½è±¡ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Phone &#123;</span><br><span class="line"></span><br><span class="line">    protected Software software;</span><br><span class="line"></span><br><span class="line">    public void setSoftware(Software software) &#123;</span><br><span class="line">        this.software = software;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void run();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public class Oppo extends Phone &#123;</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        software.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Vivo extends Phone &#123;</span><br><span class="line">     </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        software.run();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¯¹æ¯”æœ€åˆçš„è®¾è®¡ï¼Œå°†æŠ½è±¡éƒ¨åˆ†ï¼ˆæ‰‹æœºï¼‰ä¸å®ƒçš„å®ç°éƒ¨åˆ†ï¼ˆæ‰‹æœºè½¯ä»¶ç±»ï¼‰åˆ†ç¦»ï¼Œå°†å®ç°éƒ¨åˆ†æŠ½è±¡æˆå•ç‹¬çš„ç±»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹åœ°å˜åŒ–ã€‚æ•´ä¸ªç±»å›¾çœ‹èµ·æ¥åƒä¸€åº§æ¡¥ï¼Œæ‰€ä»¥ç§°ä¸ºæ¡¥æ¥æ¨¡å¼</p>
<p>ç»§æ‰¿æ˜¯ä¸€ç§å¼ºè€¦åˆå…³ç³»ï¼Œå­ç±»çš„å®ç°ä¸å®ƒçš„çˆ¶ç±»æœ‰éå¸¸ç´§å¯†çš„ä¾èµ–å…³ç³»ï¼Œçˆ¶ç±»çš„ä»»ä½•å˜åŒ– éƒ½ä¼šå¯¼è‡´å­ç±»å‘ç”Ÿå˜åŒ–ï¼Œå› æ­¤ç»§æ‰¿æˆ–è€…è¯´å¼ºè€¦åˆå…³ç³»ä¸¥é‡å½±å“äº†ç±»çš„çµæ´»æ€§ï¼Œå¹¶æœ€ç»ˆé™åˆ¶äº†å¯å¤ç”¨æ€§</p>
<p>ä»æ¡¥æ¥æ¨¡å¼çš„è®¾è®¡ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºèšåˆæ˜¯ä¸€ç§æ¯”ç»§æ‰¿è¦å¼±çš„å…³è”å…³ç³»ï¼Œæ‰‹æœºç±»å’Œè½¯ä»¶ç±»éƒ½å¯ç‹¬ç«‹çš„è¿›è¡Œå˜åŒ–ï¼Œä¸ä¼šäº’ç›¸å½±å“</p>
<h3 id="span-stylecolor00000093-é€‚ç”¨åœºæ™¯span"><a class="markdownIt-Anchor" href="#span-stylecolor00000093-é€‚ç”¨åœºæ™¯span">#</a> <span style="color:#000000;">9.3 é€‚ç”¨åœºæ™¯</span></h3>
<p>æ¡¥æ¥æ¨¡å¼é€šå¸¸é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ã€‚</p>
<ol>
<li>
<p>å½“ä¸€ä¸ªç±»å­˜åœ¨ä¸¤ä¸ªç‹¬ç«‹å˜åŒ–çš„ç»´åº¦ï¼Œä¸”è¿™ä¸¤ä¸ªç»´åº¦éƒ½éœ€è¦è¿›è¡Œæ‰©å±•æ—¶ã€‚</p>
</li>
<li>
<p>å½“ä¸€ä¸ªç³»ç»Ÿä¸å¸Œæœ›ä½¿ç”¨ç»§æ‰¿æˆ–å› ä¸ºå¤šå±‚æ¬¡ç»§æ‰¿å¯¼è‡´ç³»ç»Ÿç±»çš„ä¸ªæ•°æ€¥å‰§å¢åŠ æ—¶ã€‚</p>
</li>
<li>
<p>å½“ä¸€ä¸ªç³»ç»Ÿéœ€è¦åœ¨æ„ä»¶çš„æŠ½è±¡åŒ–è§’è‰²å’Œå…·ä½“åŒ–è§’è‰²ä¹‹é—´å¢åŠ æ›´å¤šçš„çµæ´»æ€§æ—¶ã€‚</p>
</li>
</ol>
<h3 id="span-stylecolor00000094-ä¼˜ç¼ºç‚¹span"><a class="markdownIt-Anchor" href="#span-stylecolor00000094-ä¼˜ç¼ºç‚¹span">#</a> <span style="color:#000000;">9.4 ä¼˜ç¼ºç‚¹</span></h3>
<p><strong>ä¼˜ç‚¹ï¼š</strong></p>
<p>(1) åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¡¥æ¥æ¨¡å¼å¯ä»¥å–ä»£å¤šå±‚ç»§æ‰¿æ–¹æ¡ˆï¼Œå¤šå±‚ç»§æ‰¿æ–¹æ¡ˆè¿èƒŒäº† â€œå•ä¸€èŒè´£åŸåˆ™â€ï¼Œå¤ç”¨æ€§è¾ƒå·®ï¼Œä¸”ç±»çš„ä¸ªæ•°éå¸¸å¤šï¼Œæ¡¥æ¥æ¨¡å¼æ˜¯æ¯”å¤šå±‚ç»§æ‰¿æ–¹æ¡ˆæ›´å¥½çš„è§£å†³æ–¹æ³•ï¼Œå®ƒæå¤§å‡å°‘äº†å­ç±»çš„ä¸ªæ•°ã€‚</p>
<p>(2) æ¡¥æ¥æ¨¡å¼æé«˜äº†ç³»ç»Ÿçš„å¯æ‰©å±•æ€§ï¼Œåœ¨ä¸¤ä¸ªå˜åŒ–ç»´åº¦ä¸­ä»»æ„æ‰©å±•ä¸€ä¸ªç»´åº¦ï¼Œéƒ½ä¸éœ€è¦ä¿®æ”¹åŸæœ‰ç³»ç»Ÿï¼Œç¬¦åˆ â€œå¼€é—­åŸåˆ™â€ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong></p>
<p>æ¡¥æ¥æ¨¡å¼çš„ä½¿ç”¨ä¼šå¢åŠ ç³»ç»Ÿçš„ç†è§£ä¸è®¾è®¡éš¾åº¦ï¼Œç”±äºå…³è”å…³ç³»å»ºç«‹åœ¨æŠ½è±¡å±‚ï¼Œè¦æ±‚å¼€å‘è€…ä¸€å¼€å§‹å°±é’ˆå¯¹æŠ½è±¡å±‚è¿›è¡Œè®¾è®¡ä¸ç¼–ç¨‹ã€‚</p>
<h2 id="10-ç»„åˆæ¨¡å¼"><a class="markdownIt-Anchor" href="#10-ç»„åˆæ¨¡å¼">#</a> 10 ç»„åˆæ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** æœ‰æ—¶åˆå«ä½œ<span style="color:#006400;">éƒ¨åˆ† - æ•´ä½“æ¨¡å¼</span>ï¼Œå®ƒæ˜¯ä¸€ç§å°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶çš„å±‚æ¬¡ç»“æ„çš„æ¨¡å¼ï¼Œç”¨æ¥è¡¨ç¤º â€œéƒ¨åˆ† - æ•´ä½“â€ çš„å…³ç³»ï¼Œä½¿ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡å…·æœ‰ä¸€è‡´çš„è®¿é—®æ€§ã€‚</p>
<p>** æ„å›¾ï¼š** å°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æ„ä»¥è¡¨ç¤º &quot;éƒ¨åˆ† - æ•´ä½“&quot; çš„å±‚æ¬¡ç»“æ„ã€‚ç»„åˆæ¨¡å¼ä½¿å¾—ç”¨æˆ·å¯¹å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** å®ƒåœ¨æˆ‘ä»¬æ ‘å‹ç»“æ„çš„é—®é¢˜ä¸­ï¼Œæ¨¡ç³Šäº†ç®€å•å…ƒç´ å’Œå¤æ‚å…ƒç´ çš„æ¦‚å¿µï¼Œå®¢æˆ·ç¨‹åºå¯ä»¥å‘å¤„ç†ç®€å•å…ƒç´ ä¸€æ ·æ¥å¤„ç†å¤æ‚å…ƒç´ ï¼Œä»è€Œä½¿å¾—å®¢æˆ·ç¨‹åºä¸å¤æ‚å…ƒç´ çš„å†…éƒ¨ç»“æ„è§£è€¦ã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€æ‚¨æƒ³è¡¨ç¤ºå¯¹è±¡çš„éƒ¨åˆ† - æ•´ä½“å±‚æ¬¡ç»“æ„ï¼ˆæ ‘å½¢ç»“æ„ï¼‰ã€‚ 2ã€æ‚¨å¸Œæœ›ç”¨æˆ·å¿½ç•¥ç»„åˆå¯¹è±¡ä¸å•ä¸ªå¯¹è±¡çš„ä¸åŒï¼Œç”¨æˆ·å°†ç»Ÿä¸€åœ°ä½¿ç”¨ç»„åˆç»“æ„ä¸­çš„æ‰€æœ‰å¯¹è±¡ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** æ ‘æå’Œå¶å­å®ç°ç»Ÿä¸€æ¥å£ï¼Œæ ‘æå†…éƒ¨ç»„åˆè¯¥æ¥å£ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** æ ‘æå†…éƒ¨ç»„åˆè¯¥æ¥å£ï¼Œå¹¶ä¸”å«æœ‰å†…éƒ¨å±æ€§ Listï¼Œé‡Œé¢æ”¾ Componentã€‚</p>
<p>ç»„åˆæ¨¡å¼çš„ä¸»è¦ä¼˜ç‚¹æœ‰ï¼š</p>
<ol>
<li>
<p>ç»„åˆæ¨¡å¼ä½¿å¾—å®¢æˆ·ç«¯ä»£ç å¯ä»¥ä¸€è‡´åœ°å¤„ç†å•ä¸ªå¯¹è±¡å’Œç»„åˆå¯¹è±¡ï¼Œæ— é¡»å…³å¿ƒè‡ªå·±å¤„ç†çš„æ˜¯å•ä¸ªå¯¹è±¡ï¼Œè¿˜æ˜¯ç»„åˆå¯¹è±¡ï¼Œè¿™ç®€åŒ–äº†å®¢æˆ·ç«¯ä»£ç ï¼›</p>
</li>
<li>
<p>æ›´å®¹æ˜“åœ¨ç»„åˆä½“å†…åŠ å…¥æ–°çš„å¯¹è±¡ï¼Œå®¢æˆ·ç«¯ä¸ä¼šå› ä¸ºåŠ å…¥äº†æ–°çš„å¯¹è±¡è€Œæ›´æ”¹æºä»£ç ï¼Œæ»¡è¶³ â€œå¼€é—­åŸåˆ™â€ï¼›</p>
</li>
</ol>
<p>å…¶ä¸»è¦ç¼ºç‚¹æ˜¯ï¼š</p>
<ol>
<li>
<p>è®¾è®¡è¾ƒå¤æ‚ï¼Œå®¢æˆ·ç«¯éœ€è¦èŠ±æ›´å¤šæ—¶é—´ç†æ¸…ç±»ä¹‹é—´çš„å±‚æ¬¡å…³ç³»ï¼›</p>
</li>
<li>
<p>ä¸å®¹æ˜“é™åˆ¶å®¹å™¨ä¸­çš„æ„ä»¶ï¼›</p>
</li>
<li>
<p>ä¸å®¹æ˜“ç”¨ç»§æ‰¿çš„æ–¹æ³•æ¥å¢åŠ æ„ä»¶çš„æ–°åŠŸèƒ½ï¼›</p>
</li>
</ol>
<h3 id="101-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#101-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 10.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612191511416.png" class="has" width="529" height="565" />
<ul>
<li>
<p>æŠ½è±¡æ„ä»¶ï¼ˆComponentï¼‰è§’è‰²ï¼šå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯ä¸ºæ ‘å¶æ„ä»¶å’Œæ ‘ææ„ä»¶å£°æ˜å…¬å…±æ¥å£ï¼Œå¹¶å®ç°å®ƒä»¬çš„é»˜è®¤è¡Œä¸ºã€‚åœ¨é€æ˜å¼çš„ç»„åˆæ¨¡å¼ä¸­æŠ½è±¡æ„ä»¶è¿˜å£°æ˜è®¿é—®å’Œç®¡ç†å­ç±»çš„æ¥å£ï¼›åœ¨å®‰å…¨å¼çš„ç»„åˆæ¨¡å¼ä¸­ä¸å£°æ˜è®¿é—®å’Œç®¡ç†å­ç±»çš„æ¥å£ï¼Œç®¡ç†å·¥ä½œç”±æ ‘ææ„ä»¶å®Œæˆã€‚</p>
</li>
<li>
<p>æ ‘å¶æ„ä»¶ï¼ˆLeafï¼‰è§’è‰²ï¼šæ˜¯ç»„åˆä¸­çš„å¶èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒæ²¡æœ‰å­èŠ‚ç‚¹ï¼Œç”¨äºå®ç°æŠ½è±¡æ„ä»¶è§’è‰²ä¸­ å£°æ˜çš„å…¬å…±æ¥å£ã€‚</p>
</li>
<li>
<p>æ ‘ææ„ä»¶ï¼ˆCompositeï¼‰è§’è‰²ï¼šæ˜¯ç»„åˆä¸­çš„åˆ†æ”¯èŠ‚ç‚¹å¯¹è±¡ï¼Œå®ƒæœ‰å­èŠ‚ç‚¹ã€‚å®ƒå®ç°äº†æŠ½è±¡æ„ä»¶è§’è‰²ä¸­å£°æ˜çš„æ¥å£ï¼Œå®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å­˜å‚¨å’Œç®¡ç†å­éƒ¨ä»¶ï¼Œé€šå¸¸åŒ…å« Add ()ã€Remove ()ã€GetChild () ç­‰æ–¹æ³•</p>
</li>
</ul>
<p>ä¸¾ä¾‹ï¼ˆè®¿é—®ä¸€é¢—æ ‘ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/201906121917147.png" class="has" width="286" height="216" />
<p>1 ç»„ä»¶</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface Component &#123;</span><br><span class="line">    public void add(Component c);</span><br><span class="line">    public void remove(Component c);</span><br><span class="line">    public Component getChild(int i);</span><br><span class="line">    public void operation();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å¶å­</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class Leaf implements Component&#123;</span><br><span class="line">    </span><br><span class="line">    private String name;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    public Leaf(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void add(Component c) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void remove(Component c) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Component getChild(int i) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void operation() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">         System.out.println(&quot;æ ‘å¶&quot;+name+&quot;ï¼šè¢«è®¿é—®ï¼&quot;); </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 æ ‘æ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class Composite implements Component &#123;</span><br><span class="line"></span><br><span class="line">    private ArrayList&lt;Component&gt; children = new ArrayList&lt;Component&gt;();</span><br><span class="line"></span><br><span class="line">    public void add(Component c) &#123;</span><br><span class="line">        children.add(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void remove(Component c) &#123;</span><br><span class="line">        children.remove(c);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Component getChild(int i) &#123;</span><br><span class="line">        return children.get(i);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void operation() &#123;</span><br><span class="line">        for (Object obj : children) &#123;</span><br><span class="line">            ((Component) obj).operation();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="-7"><a class="markdownIt-Anchor" href="#-7">#</a> </h3>
<h2 id="11-äº«å…ƒæ¨¡å¼"><a class="markdownIt-Anchor" href="#11-äº«å…ƒæ¨¡å¼">#</a> 11 äº«å…ƒæ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** é€šè¿‡å…±äº«çš„æ–¹å¼é«˜æ•ˆçš„æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** åœ¨æœ‰å¤§é‡å¯¹è±¡æ—¶ï¼Œæœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æº¢å‡ºï¼Œæˆ‘ä»¬æŠŠå…¶ä¸­å…±åŒçš„éƒ¨åˆ†æŠ½è±¡å‡ºæ¥ï¼Œå¦‚æœæœ‰ç›¸åŒçš„ä¸šåŠ¡è¯·æ±‚ï¼Œç›´æ¥è¿”å›åœ¨å†…å­˜ä¸­å·²æœ‰çš„å¯¹è±¡ï¼Œé¿å…é‡æ–°åˆ›å»ºã€‚</p>
<p><strong>ä½•æ—¶ä½¿ç”¨ï¼š</strong> 1ã€ç³»ç»Ÿä¸­æœ‰å¤§é‡å¯¹è±¡ã€‚ 2ã€è¿™äº›å¯¹è±¡æ¶ˆè€—å¤§é‡å†…å­˜ã€‚ 3ã€è¿™äº›å¯¹è±¡çš„çŠ¶æ€å¤§éƒ¨åˆ†å¯ä»¥å¤–éƒ¨åŒ–ã€‚ 4ã€è¿™äº›å¯¹è±¡å¯ä»¥æŒ‰ç…§å†…è•´çŠ¶æ€åˆ†ä¸ºå¾ˆå¤šç»„ï¼Œå½“æŠŠå¤–è•´å¯¹è±¡ä»å¯¹è±¡ä¸­å‰”é™¤å‡ºæ¥æ—¶ï¼Œæ¯ä¸€ç»„å¯¹è±¡éƒ½å¯ä»¥ç”¨ä¸€ä¸ªå¯¹è±¡æ¥ä»£æ›¿ã€‚ 5ã€ç³»ç»Ÿä¸ä¾èµ–äºè¿™äº›å¯¹è±¡èº«ä»½ï¼Œè¿™äº›å¯¹è±¡æ˜¯ä¸å¯åˆ†è¾¨çš„ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** ç”¨å”¯ä¸€æ ‡è¯†ç åˆ¤æ–­ï¼Œå¦‚æœåœ¨å†…å­˜ä¸­æœ‰ï¼Œåˆ™è¿”å›è¿™ä¸ªå”¯ä¸€æ ‡è¯†ç æ‰€æ ‡è¯†çš„å¯¹è±¡ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** ç”¨ HashMap å­˜å‚¨è¿™äº›å¯¹è±¡ã€‚</p>
<p><strong>åº”ç”¨å®ä¾‹ï¼š</strong> 1ã€JAVA ä¸­çš„ Stringï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ä¿å­˜åœ¨å­—ç¬¦ä¸²ç¼“å­˜æ± é‡Œé¢ã€‚</p>
<p>** ä¼˜ç‚¹ï¼š** å¤§å¤§å‡å°‘å¯¹è±¡çš„åˆ›å»ºï¼Œé™ä½ç³»ç»Ÿçš„å†…å­˜ï¼Œä½¿æ•ˆç‡æé«˜ã€‚</p>
<p>** ç¼ºç‚¹ï¼š** æé«˜äº†ç³»ç»Ÿçš„å¤æ‚åº¦ï¼Œéœ€è¦åˆ†ç¦»å‡ºå¤–éƒ¨çŠ¶æ€å’Œå†…éƒ¨çŠ¶æ€ï¼Œè€Œä¸”å¤–éƒ¨çŠ¶æ€å…·æœ‰å›ºæœ‰åŒ–çš„æ€§è´¨ï¼Œä¸åº”è¯¥éšç€å†…éƒ¨çŠ¶æ€çš„å˜åŒ–è€Œå˜åŒ–ï¼Œå¦åˆ™ä¼šé€ æˆç³»ç»Ÿçš„æ··ä¹±ã€‚</p>
<p><span style="color:#f33b45;">ç®€å•æ¥è¯´ï¼Œæˆ‘ä»¬æŠ½å–å‡ºä¸€ä¸ªå¯¹è±¡çš„å¤–éƒ¨çŠ¶æ€ï¼ˆä¸èƒ½å…±äº«ï¼‰å’Œå†…éƒ¨çŠ¶æ€ï¼ˆå¯ä»¥å…±äº«ï¼‰ã€‚ç„¶åæ ¹æ®å¤–éƒ¨çŠ¶æ€çš„å†³å®šæ˜¯å¦åˆ›å»ºå†…éƒ¨çŠ¶æ€å¯¹è±¡ã€‚å†…éƒ¨çŠ¶æ€å¯¹è±¡æ˜¯é€šè¿‡å“ˆå¸Œè¡¨ä¿å­˜çš„ï¼Œå½“å¤–éƒ¨çŠ¶æ€ç›¸åŒçš„æ—¶å€™ï¼Œä¸å†é‡å¤çš„åˆ›å»ºå†…éƒ¨çŠ¶æ€å¯¹è±¡ï¼Œä»è€Œå‡å°‘è¦åˆ›å»ºå¯¹è±¡çš„æ•°é‡ã€‚</span></p>
<h3 id="111-äº«å…ƒæ¨¡å¼çš„ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#111-äº«å…ƒæ¨¡å¼çš„ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹">#</a> 11.1 äº«å…ƒæ¨¡å¼çš„ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610202655697.png" class="has" width="563" height="320" />
<p>1ã€Flyweight (äº«å…ƒæŠ½è±¡ç±»)ï¼šä¸€èˆ¬æ˜¯æ¥å£æˆ–è€…æŠ½è±¡ç±»ï¼Œå®šä¹‰äº†äº«å…ƒç±»çš„å…¬å…±æ–¹æ³•ã€‚è¿™äº›æ–¹æ³•å¯ä»¥åˆ†äº«å†…éƒ¨çŠ¶æ€çš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨è¿™äº›æ–¹æ³•ä¿®æ”¹å¤–éƒ¨çŠ¶æ€ã€‚</p>
<p>2ã€ConcreteFlyweight (å…·ä½“äº«å…ƒç±»)ï¼šå…·ä½“äº«å…ƒç±»å®ç°äº†æŠ½è±¡äº«å…ƒç±»çš„æ–¹æ³•ï¼Œä¸ºäº«å…ƒå¯¹è±¡å¼€è¾Ÿäº†å†…å­˜ç©ºé—´æ¥ä¿å­˜äº«å…ƒå¯¹è±¡çš„å†…éƒ¨æ•°æ®ï¼ŒåŒæ—¶å¯ä»¥é€šè¿‡å’Œå•ä¾‹æ¨¡å¼ç»“åˆåªåˆ›å»ºä¸€ä¸ªäº«å…ƒå¯¹è±¡ã€‚</p>
<p>3ã€FlyweightFactory (äº«å…ƒå·¥å‚ç±»)ï¼šäº«å…ƒå·¥å‚ç±»åˆ›å»ºå¹¶ä¸”ç®¡ç†äº«å…ƒç±»ï¼Œäº«å…ƒå·¥å‚ç±»é’ˆå¯¹äº«å…ƒç±»æ¥è¿›è¡Œç¼–ç¨‹ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªäº«å…ƒæ± æ¥è¿›è¡Œäº«å…ƒå¯¹è±¡çš„ç®¡ç†ã€‚ä¸€èˆ¬äº«å…ƒæ± è®¾è®¡æˆ<strong>é”®å€¼å¯¹</strong>ï¼Œæˆ–è€…å…¶ä»–çš„å­˜å‚¨ç»“æ„æ¥å­˜å‚¨ã€‚å½“å®¢æˆ·ç«¯è¿›è¡Œäº«å…ƒå¯¹è±¡çš„è¯·æ±‚æ—¶ï¼Œå¦‚æœäº«å…ƒæ± ä¸­æœ‰å¯¹åº”çš„äº«å…ƒå¯¹è±¡åˆ™ç›´æ¥è¿”å›å¯¹åº”çš„å¯¹è±¡ï¼Œå¦åˆ™å·¥å‚ç±»åˆ›å»ºå¯¹åº”çš„äº«å…ƒå¯¹è±¡å¹¶ä¿å­˜åˆ°äº«å…ƒæ± ã€‚</p>
<p>ä¸¾ä¾‹ï¼ˆJAVA ä¸­çš„ Stringï¼Œå¦‚æœæœ‰åˆ™è¿”å›ï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ä¿å­˜åœ¨å­—ç¬¦ä¸²ç¼“å­˜æ± é‡Œé¢ï¼‰ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610202655744.png" class="has" width="310" height="187" />
<p>ï¼ˆ1ï¼‰åˆ›å»ºäº«å…ƒå¯¹è±¡æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface IFlyweight &#123;</span><br><span class="line">    void print();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ2ï¼‰åˆ›å»ºå…·ä½“äº«å…ƒå¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Flyweight implements IFlyweight &#123;</span><br><span class="line">    private String id;</span><br><span class="line">    public Flyweight(String id)&#123;</span><br><span class="line">        this.id = id;</span><br><span class="line">    &#125;</span><br><span class="line">    @Override</span><br><span class="line">    public void print() &#123;</span><br><span class="line">        System.out.println(&quot;Flyweight.id = &quot; + getId() + &quot; ...&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    public String getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ3ï¼‰åˆ›å»ºå·¥å‚ï¼Œè¿™é‡Œè¦ç‰¹åˆ«æ³¨æ„ï¼Œä¸ºäº†é¿å…äº«å…ƒå¯¹è±¡è¢«é‡å¤åˆ›å»ºï¼Œæˆ‘ä»¬ä½¿ç”¨ HashMap ä¸­çš„ key å€¼ä¿è¯å…¶å”¯ä¸€ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class FlyweightFactory &#123;</span><br><span class="line">    private Map&lt;String, IFlyweight&gt; flyweightMap = new HashMap();</span><br><span class="line">    public IFlyweight getFlyweight(String str)&#123;</span><br><span class="line">        IFlyweight flyweight = flyweightMap.get(str);</span><br><span class="line">        if(flyweight == null)&#123;</span><br><span class="line">            flyweight = new Flyweight(str);</span><br><span class="line">            flyweightMap.put(str, flyweight);</span><br><span class="line">        &#125;</span><br><span class="line">        return  flyweight;</span><br><span class="line">    &#125;</span><br><span class="line">    public int getFlyweightMapSize()&#123;</span><br><span class="line">        return flyweightMap.size();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ï¼ˆ4ï¼‰æµ‹è¯•ï¼Œæˆ‘ä»¬åˆ›å»ºä¸‰ä¸ªå­—ç¬¦ä¸²ï¼Œä½†æ˜¯åªä¼šäº§ç”Ÿä¸¤ä¸ªäº«å…ƒå¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class MainTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        FlyweightFactory flyweightFactory = new FlyweightFactory();</span><br><span class="line">        IFlyweight flyweight1 = flyweightFactory.getFlyweight(&quot;A&quot;);</span><br><span class="line">        IFlyweight flyweight2 = flyweightFactory.getFlyweight(&quot;B&quot;);</span><br><span class="line">        IFlyweight flyweight3 = flyweightFactory.getFlyweight(&quot;A&quot;);</span><br><span class="line">        flyweight1.print();</span><br><span class="line">        flyweight2.print();</span><br><span class="line">        flyweight3.print();</span><br><span class="line">        System.out.println(flyweightFactory.getFlyweightMapSize());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610203118380.png" class="has" width="466" height="100" />
<h2 id="-8"><a class="markdownIt-Anchor" href="#-8">#</a> </h2>
<h1 id="c-å…³ç³»æ¨¡å¼11ç§"><a class="markdownIt-Anchor" href="#c-å…³ç³»æ¨¡å¼11ç§">#</a> <strong>Cã€å…³ç³»æ¨¡å¼ï¼ˆ11 ç§ï¼‰</strong></h1>
<p>å…ˆæ¥å¼ å›¾ï¼Œçœ‹çœ‹è¿™ 11 ä¸­æ¨¡å¼çš„å…³ç³»ï¼š</p>
<p>ç¬¬ä¸€ç±»ï¼šé€šè¿‡çˆ¶ç±»ä¸å­ç±»çš„å…³ç³»è¿›è¡Œå®ç°ã€‚</p>
<p>ç¬¬äºŒç±»ï¼šä¸¤ä¸ªç±»ä¹‹é—´ã€‚</p>
<p>ç¬¬ä¸‰ç±»ï¼šç±»çš„çŠ¶æ€ã€‚</p>
<p>ç¬¬å››ç±»ï¼šé€šè¿‡ä¸­é—´ç±»</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610215352532.png" class="has" width="675" height="323" />
<h2 id="12-ç­–ç•¥æ¨¡å¼"><a class="markdownIt-Anchor" href="#12-ç­–ç•¥æ¨¡å¼">#</a> 12 ç­–ç•¥æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong> ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ä¸€ç³»åˆ—ç®—æ³•ï¼Œå¹¶å°†æ¯ä¸ªç®—æ³•å°è£…èµ·æ¥ï¼Œä½¿ä»–ä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œä¸”ç®—æ³•çš„å˜åŒ–ä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</p>
<p>** æ„å›¾ï¼š** å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ç›¸äº’æ›¿æ¢ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** åœ¨æœ‰å¤šç§ç®—æ³•ç›¸ä¼¼çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ ifâ€¦else æ‰€å¸¦æ¥çš„å¤æ‚å’Œéš¾ä»¥ç»´æŠ¤ã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** ä¸€ä¸ªç³»ç»Ÿæœ‰è®¸å¤šè®¸å¤šç±»ï¼Œè€ŒåŒºåˆ†å®ƒä»¬çš„åªæ˜¯ä»–ä»¬ç›´æ¥çš„è¡Œä¸ºã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** å°†è¿™äº›ç®—æ³•å°è£…æˆä¸€ä¸ªä¸€ä¸ªçš„ç±»ï¼Œä»»æ„åœ°æ›¿æ¢ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** å®ç°åŒä¸€ä¸ªæ¥å£ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€ç®—æ³•å¯ä»¥è‡ªç”±åˆ‡æ¢ã€‚ 2ã€é¿å…ä½¿ç”¨å¤šé‡æ¡ä»¶åˆ¤æ–­ã€‚ 3ã€æ‰©å±•æ€§è‰¯å¥½ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€ç­–ç•¥ç±»ä¼šå¢å¤šã€‚ 2ã€æ‰€æœ‰ç­–ç•¥ç±»éƒ½éœ€è¦å¯¹å¤–æš´éœ²ã€‚</p>
<h3 id="121-ç­–ç•¥æ¨¡å¼ç»“æ„å’Œç¤ºä¾‹ä»£ç "><a class="markdownIt-Anchor" href="#121-ç­–ç•¥æ¨¡å¼ç»“æ„å’Œç¤ºä¾‹ä»£ç ">#</a> 12.1 ç­–ç•¥æ¨¡å¼ç»“æ„å’Œç¤ºä¾‹ä»£ç </h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610215352527.png" class="has" width="725" height="311" />
<p><strong>æŠ½è±¡ç­–ç•¥è§’è‰²:</strong> è¿™ä¸ªæ˜¯ä¸€ä¸ªæŠ½è±¡çš„è§’è‰²ï¼Œé€šå¸¸æƒ…å†µä¸‹ä½¿ç”¨æ¥å£æˆ–è€…æŠ½è±¡ç±»å»å®ç°ã€‚å¯¹æ¯”æ¥è¯´ï¼Œå°±æ˜¯æˆ‘ä»¬çš„ Comparator æ¥å£ã€‚</p>
<p><strong>å…·ä½“ç­–ç•¥è§’è‰²:</strong> åŒ…è£…äº†å…·ä½“çš„ç®—æ³•å’Œè¡Œä¸ºã€‚å¯¹æ¯”æ¥è¯´ï¼Œå°±æ˜¯å®ç°äº† Comparator æ¥å£çš„å®ç°ä¸€ç»„å®ç°ç±»ã€‚</p>
<p><strong>ç¯å¢ƒè§’è‰²:</strong> å†…éƒ¨ä¼šæŒæœ‰ä¸€ä¸ªæŠ½è±¡è§’è‰²çš„å¼•ç”¨ï¼Œç»™å®¢æˆ·ç«¯è°ƒç”¨ã€‚</p>
<p>ä¸¾ä¾‹å¦‚ä¸‹ï¼ˆ å®ç°ä¸€ä¸ªåŠ å‡çš„åŠŸèƒ½ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190610215352523.png" class="has" width="335" height="261" />
<p>1ã€å®šä¹‰æŠ½è±¡ç­–ç•¥è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Strategy &#123;</span><br><span class="line"></span><br><span class="line">    public int calc(int num1,int num2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ã€å®šä¹‰å…·ä½“ç­–ç•¥è§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">public class AddStrategy implements Strategy &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int calc(int num1, int num2) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        return num1 + num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public class SubstractStrategy implements Strategy &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int calc(int num1, int num2) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        return num1 - num2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ã€ç¯å¢ƒè§’è‰²</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Environment &#123;</span><br><span class="line">    private Strategy strategy;</span><br><span class="line"></span><br><span class="line">    public Environment(Strategy strategy) &#123;</span><br><span class="line">        this.strategy = strategy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int calculate(int a, int b) &#123;</span><br><span class="line">        return strategy.calc(a, b);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ã€æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class MainTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        </span><br><span class="line">        Environment environment=new Environment(new AddStrategy());</span><br><span class="line">        int result=environment.calculate(20, 5);</span><br><span class="line">        System.out.println(result);</span><br><span class="line">        </span><br><span class="line">        Environment environment1=new Environment(new SubstractStrategy());</span><br><span class="line">        int result1=environment1.calculate(20, 5);</span><br><span class="line">        System.out.println(result1);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="-9"><a class="markdownIt-Anchor" href="#-9">#</a> </h3>
<h2 id="13-æ¨¡æ¿æ¨¡å¼"><a class="markdownIt-Anchor" href="#13-æ¨¡æ¿æ¨¡å¼">#</a> 13 æ¨¡æ¿æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p>
<p>é€šä¿—ç‚¹çš„ç†è§£å°±æ˜¯ ï¼šå®Œæˆä¸€ä»¶äº‹æƒ…ï¼Œæœ‰å›ºå®šçš„æ•°ä¸ªæ­¥éª¤ï¼Œä½†æ˜¯æ¯ä¸ªæ­¥éª¤æ ¹æ®å¯¹è±¡çš„ä¸åŒï¼Œè€Œå®ç°ç»†èŠ‚ä¸åŒï¼›å°±å¯ä»¥åœ¨çˆ¶ç±»ä¸­å®šä¹‰ä¸€ä¸ªå®Œæˆè¯¥äº‹æƒ…çš„æ€»æ–¹æ³•ï¼ŒæŒ‰ç…§å®Œæˆäº‹ä»¶éœ€è¦çš„æ­¥éª¤å»è°ƒç”¨å…¶æ¯ä¸ªæ­¥éª¤çš„å®ç°æ–¹æ³•ã€‚æ¯ä¸ªæ­¥éª¤çš„å…·ä½“å®ç°ï¼Œç”±å­ç±»å®Œæˆã€‚</p>
<h3 id="131-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#131-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 13.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612192139396.png" class="has" width="713" height="582" />
<p>æŠ½è±¡çˆ¶ç±»ï¼ˆAbstractClassï¼‰ï¼šå®ç°äº†æ¨¡æ¿æ–¹æ³•ï¼Œå®šä¹‰äº†ç®—æ³•çš„éª¨æ¶ã€‚</p>
<p>å…·ä½“ç±»ï¼ˆConcreteClass)ï¼šå®ç°æŠ½è±¡ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•ï¼Œå³ä¸åŒçš„å¯¹è±¡çš„å…·ä½“å®ç°ç»†èŠ‚ã€‚</p>
<p>ä¸¾ä¾‹ï¼ˆ æˆ‘ä»¬åšèœå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªæ­¥éª¤ ï¼ˆ1ï¼‰å¤‡æ–™ ï¼ˆ2ï¼‰å…·ä½“åšèœ ï¼ˆ3ï¼‰ç››èœç«¯ç»™å®¢äººäº«ç”¨ï¼Œè¿™ä¸‰éƒ¨å°±æ˜¯ç®—æ³•çš„éª¨æ¶ ï¼›ç„¶è€Œåšä¸åŒèœéœ€è¦çš„æ–™ï¼Œåšçš„æ–¹æ³•ï¼Œä»¥åŠå¦‚ä½•ç››è£…ç»™å®¢äººäº«ç”¨éƒ½æ˜¯ä¸åŒçš„è¿™ä¸ªå°±æ˜¯ä¸åŒçš„å®ç°ç»†èŠ‚ã€‚ï¼‰ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612192139362.png" class="has" width="425" height="250" />
<p>a. å…ˆæ¥å†™ä¸€ä¸ªæŠ½è±¡çš„åšèœçˆ¶ç±»ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Dish &#123;    </span><br><span class="line">    /**</span><br><span class="line">     * å…·ä½“çš„æ•´ä¸ªè¿‡ç¨‹</span><br><span class="line">     */</span><br><span class="line">    protected void dodish()&#123;</span><br><span class="line">        this.preparation();</span><br><span class="line">        this.doing();</span><br><span class="line">        this.carriedDishes();</span><br><span class="line">    &#125;</span><br><span class="line">    /**</span><br><span class="line">     * å¤‡æ–™</span><br><span class="line">     */</span><br><span class="line">    public abstract void preparation();</span><br><span class="line">    /**</span><br><span class="line">     * åšèœ</span><br><span class="line">     */</span><br><span class="line">    public abstract void doing();</span><br><span class="line">    /**</span><br><span class="line">     * ä¸Šèœ</span><br><span class="line">     */</span><br><span class="line">    public abstract void carriedDishes ();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>b. ä¸‹æ¥åšä¸¤ä¸ªç•ªèŒ„ç‚’è›‹ï¼ˆEggsWithTomatoï¼‰å’Œçº¢çƒ§è‚‰ï¼ˆBouilliï¼‰å®ç°çˆ¶ç±»ä¸­çš„æŠ½è±¡æ–¹æ³•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">public class EggsWithTomato extends Dish &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void preparation() &#123;</span><br><span class="line">        System.out.println(&quot;æ´—å¹¶åˆ‡è¥¿çº¢æŸ¿ï¼Œæ‰“é¸¡è›‹ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doing() &#123;</span><br><span class="line">        System.out.println(&quot;é¸¡è›‹å€’å…¥é”…é‡Œï¼Œç„¶åå€’å…¥è¥¿çº¢æŸ¿ä¸€èµ·ç‚’ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void carriedDishes() &#123;</span><br><span class="line">        System.out.println(&quot;å°†ç‚’å¥½çš„è¥¿çº¢å¯ºé¸¡è›‹è£…å…¥ç¢Ÿå­é‡Œï¼Œç«¯ç»™å®¢äººåƒã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public class Bouilli extends Dish&#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void preparation() &#123;</span><br><span class="line">        System.out.println(&quot;åˆ‡çŒªè‚‰å’ŒåœŸè±†ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void doing() &#123;</span><br><span class="line">        System.out.println(&quot;å°†åˆ‡å¥½çš„çŒªè‚‰å€’å…¥é”…ä¸­ç‚’ä¸€ä¼šç„¶åå€’å…¥åœŸè±†è¿ç‚’å¸¦ç‚–ã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void carriedDishes() &#123;</span><br><span class="line">        System.out.println(&quot;å°†åšå¥½çš„çº¢çƒ§è‚‰ç››è¿›ç¢—é‡Œç«¯ç»™å®¢äººåƒã€‚&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>c. åœ¨æµ‹è¯•ç±»ä¸­æˆ‘ä»¬æ¥åšèœï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class MainTest &#123;</span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line">        Dish eggsWithTomato = new EggsWithTomato();</span><br><span class="line">        eggsWithTomato.dodish();</span><br><span class="line"></span><br><span class="line">        System.out.println(&quot;-----------------------------&quot;);</span><br><span class="line"></span><br><span class="line">        Dish bouilli = new Bouilli();</span><br><span class="line">        bouilli.dodish();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="132-æ¨¡æ¿æ¨¡å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹"><a class="markdownIt-Anchor" href="#132-æ¨¡æ¿æ¨¡å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹">#</a> 13.2  æ¨¡æ¿æ¨¡å¼çš„ä¼˜ç‚¹å’Œç¼ºç‚¹</h3>
<p>ä¼˜ç‚¹ï¼š</p>
<p>ï¼ˆ1ï¼‰å…·ä½“ç»†èŠ‚æ­¥éª¤å®ç°å®šä¹‰åœ¨å­ç±»ä¸­ï¼Œå­ç±»å®šä¹‰è¯¦ç»†å¤„ç†ç®—æ³•æ˜¯ä¸ä¼šæ”¹å˜ç®—æ³•æ•´ä½“ç»“æ„ã€‚</p>
<p>ï¼ˆ2ï¼‰ä»£ç å¤ç”¨çš„åŸºæœ¬æŠ€æœ¯ï¼Œåœ¨æ•°æ®åº“è®¾è®¡ä¸­å°¤ä¸ºé‡è¦ã€‚</p>
<p>ï¼ˆ3ï¼‰å­˜åœ¨ä¸€ç§åå‘çš„æ§åˆ¶ç»“æ„ï¼Œé€šè¿‡ä¸€ä¸ªçˆ¶ç±»è°ƒç”¨å…¶å­ç±»çš„æ“ä½œï¼Œé€šè¿‡å­ç±»å¯¹çˆ¶ç±»è¿›è¡Œæ‰©å±•å¢åŠ æ–°çš„è¡Œä¸ºï¼Œç¬¦åˆ â€œå¼€é—­åŸåˆ™â€ã€‚</p>
<h3 id="ç¼ºç‚¹-2"><a class="markdownIt-Anchor" href="#ç¼ºç‚¹-2">#</a> ç¼ºç‚¹ï¼š</h3>
<pre><code>æ¯ä¸ªä¸åŒçš„å®ç°éƒ½éœ€è¦å®šä¹‰ä¸€ä¸ªå­ç±»ï¼Œä¼šå¯¼è‡´ç±»çš„ä¸ªæ•°å¢åŠ ï¼Œç³»ç»Ÿæ›´åŠ åºå¤§ã€‚
</code></pre>
<h3 id="-10"><a class="markdownIt-Anchor" href="#-10">#</a> </h3>
<h2 id="14-è§‚å¯Ÿè€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#14-è§‚å¯Ÿè€…æ¨¡å¼">#</a> 14 è§‚å¯Ÿè€…æ¨¡å¼</h2>
<p><strong>å®šä¹‰ï¼š</strong> å®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜ç»™å…¶ä»–å¯¹è±¡é€šçŸ¥çš„é—®é¢˜ï¼Œè€Œä¸”è¦è€ƒè™‘åˆ°æ˜“ç”¨å’Œä½è€¦åˆï¼Œä¿è¯é«˜åº¦çš„åä½œã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** ä¸€ä¸ªå¯¹è±¡ï¼ˆç›®æ ‡å¯¹è±¡ï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜ï¼Œæ‰€æœ‰çš„ä¾èµ–å¯¹è±¡ï¼ˆè§‚å¯Ÿè€…å¯¹è±¡ï¼‰éƒ½å°†å¾—åˆ°é€šçŸ¥ï¼Œè¿›è¡Œå¹¿æ’­é€šçŸ¥ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** ä½¿ç”¨é¢å‘å¯¹è±¡æŠ€æœ¯ï¼Œå¯ä»¥å°†è¿™ç§ä¾èµ–å…³ç³»å¼±åŒ–ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** åœ¨æŠ½è±¡ç±»é‡Œæœ‰ä¸€ä¸ª ArrayList å­˜æ”¾è§‚å¯Ÿè€…ä»¬ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€è§‚å¯Ÿè€…å’Œè¢«è§‚å¯Ÿè€…æ˜¯æŠ½è±¡è€¦åˆçš„ã€‚ 2ã€å»ºç«‹ä¸€å¥—è§¦å‘æœºåˆ¶ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€å¦‚æœä¸€ä¸ªè¢«è§‚å¯Ÿè€…å¯¹è±¡æœ‰å¾ˆå¤šçš„ç›´æ¥å’Œé—´æ¥çš„è§‚å¯Ÿè€…çš„è¯ï¼Œå°†æ‰€æœ‰çš„è§‚å¯Ÿè€…éƒ½é€šçŸ¥åˆ°ä¼šèŠ±è´¹å¾ˆå¤šæ—¶é—´ã€‚ 2ã€å¦‚æœåœ¨è§‚å¯Ÿè€…å’Œè§‚å¯Ÿç›®æ ‡ä¹‹é—´æœ‰å¾ªç¯ä¾èµ–çš„è¯ï¼Œè§‚å¯Ÿç›®æ ‡ä¼šè§¦å‘å®ƒä»¬ä¹‹é—´è¿›è¡Œå¾ªç¯è°ƒç”¨ï¼Œå¯èƒ½å¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚ 3ã€è§‚å¯Ÿè€…æ¨¡å¼æ²¡æœ‰ç›¸åº”çš„æœºåˆ¶è®©è§‚å¯Ÿè€…çŸ¥é“æ‰€è§‚å¯Ÿçš„ç›®æ ‡å¯¹è±¡æ˜¯æ€ä¹ˆå‘ç”Ÿå˜åŒ–çš„ï¼Œè€Œä»…ä»…åªæ˜¯çŸ¥é“è§‚å¯Ÿç›®æ ‡å‘ç”Ÿäº†å˜åŒ–ã€‚</p>
<h3 id="141-æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#141-æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹">#</a> 14.1 æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190611172644555.png" class="has" width="505" height="416" />
<ul>
<li>
<p><strong>æŠ½è±¡è¢«è§‚å¯Ÿè€…è§’è‰²</strong>ï¼šä¹Ÿå°±æ˜¯ä¸€ä¸ªæŠ½è±¡ä¸»é¢˜ï¼Œå®ƒæŠŠæ‰€æœ‰å¯¹è§‚å¯Ÿè€…å¯¹è±¡çš„å¼•ç”¨ä¿å­˜åœ¨ä¸€ä¸ªé›†åˆä¸­ï¼Œæ¯ä¸ªä¸»é¢˜éƒ½å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„è§‚å¯Ÿè€…ã€‚æŠ½è±¡ä¸»é¢˜æä¾›ä¸€ä¸ªæ¥å£ï¼Œå¯ä»¥å¢åŠ å’Œåˆ é™¤è§‚å¯Ÿè€…è§’è‰²ã€‚ä¸€èˆ¬ç”¨ä¸€ä¸ªæŠ½è±¡ç±»å’Œæ¥å£æ¥å®ç°ã€‚</p>
</li>
<li>
<p><strong>æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²</strong>ï¼šä¸ºæ‰€æœ‰çš„å…·ä½“è§‚å¯Ÿè€…å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œåœ¨å¾—åˆ°ä¸»é¢˜é€šçŸ¥æ—¶æ›´æ–°è‡ªå·±ã€‚</p>
</li>
<li>
<p><strong>å…·ä½“è¢«è§‚å¯Ÿè€…è§’è‰²</strong>ï¼šä¹Ÿå°±æ˜¯ä¸€ä¸ªå…·ä½“çš„ä¸»é¢˜ï¼Œåœ¨é›†ä½“ä¸»é¢˜çš„å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶ï¼Œæ‰€æœ‰ç™»è®°è¿‡çš„è§‚å¯Ÿè€…å‘å‡ºé€šçŸ¥ã€‚</p>
</li>
<li>
<p><strong>å…·ä½“è§‚å¯Ÿè€…è§’è‰²</strong>ï¼šå®ç°æŠ½è±¡è§‚å¯Ÿè€…è§’è‰²æ‰€éœ€è¦çš„æ›´æ–°æ¥å£ï¼Œä¸€è¾¹ä½¿æœ¬èº«çš„çŠ¶æ€ä¸åˆ¶å›¾çš„çŠ¶æ€ç›¸åè°ƒã€‚</p>
</li>
</ul>
<p>ä¸¾ä¾‹ï¼ˆæœ‰ä¸€ä¸ªå¾®ä¿¡å…¬ä¼—å·æœåŠ¡ï¼Œä¸å®šæ—¶å‘å¸ƒä¸€äº›æ¶ˆæ¯ï¼Œå…³æ³¨å…¬ä¼—å·å°±å¯ä»¥æ”¶åˆ°æ¨é€æ¶ˆæ¯ï¼Œå–æ¶ˆå…³æ³¨å°±æ”¶ä¸åˆ°æ¨é€æ¶ˆæ¯ã€‚ï¼‰ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190611172644540.png" class="has" width="545" height="359" />
<p>1ã€å®šä¹‰ä¸€ä¸ªæŠ½è±¡è¢«è§‚å¯Ÿè€…æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface Subject &#123;</span><br><span class="line">    </span><br><span class="line">      public void registerObserver(Observer o);</span><br><span class="line">      public void removeObserver(Observer o);</span><br><span class="line">      public void notifyObserver();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ã€å®šä¹‰ä¸€ä¸ªæŠ½è±¡è§‚å¯Ÿè€…æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface Observer &#123;</span><br><span class="line">    </span><br><span class="line">    public void update(String message);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ã€å®šä¹‰è¢«è§‚å¯Ÿè€…ï¼Œå®ç°äº† Observerable æ¥å£ï¼Œå¯¹ Observerable æ¥å£çš„ä¸‰ä¸ªæ–¹æ³•è¿›è¡Œäº†å…·ä½“å®ç°ï¼ŒåŒæ—¶æœ‰ä¸€ä¸ª List é›†åˆï¼Œç”¨ä»¥ä¿å­˜æ³¨å†Œçš„è§‚å¯Ÿè€…ï¼Œç­‰éœ€è¦é€šçŸ¥è§‚å¯Ÿè€…æ—¶ï¼Œéå†è¯¥é›†åˆå³å¯ã€‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">public class WechatServer implements Subject &#123;</span><br><span class="line"></span><br><span class="line">    private List&lt;Observer&gt; list;</span><br><span class="line">    private String message;</span><br><span class="line"></span><br><span class="line">    public WechatServer() &#123;</span><br><span class="line">        list = new ArrayList&lt;Observer&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void registerObserver(Observer o) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        list.add(o);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void removeObserver(Observer o) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        if (!list.isEmpty()) &#123;</span><br><span class="line">            list.remove(o);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void notifyObserver() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        for (Observer o : list) &#123;</span><br><span class="line">            o.update(message);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setInfomation(String s) &#123;</span><br><span class="line">        this.message = s;</span><br><span class="line">        System.out.println(&quot;å¾®ä¿¡æœåŠ¡æ›´æ–°æ¶ˆæ¯ï¼š &quot; + s);</span><br><span class="line">        // æ¶ˆæ¯æ›´æ–°ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</span><br><span class="line">        notifyObserver();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ã€å®šä¹‰å…·ä½“è§‚å¯Ÿè€…ï¼Œå¾®ä¿¡å…¬ä¼—å·çš„å…·ä½“è§‚å¯Ÿè€…ä¸ºç”¨æˆ· User</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class User implements Observer &#123;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line">    private String message;</span><br><span class="line"></span><br><span class="line">    public User(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void update(String message) &#123;</span><br><span class="line">        this.message = message;</span><br><span class="line">        read();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void read() &#123;</span><br><span class="line">        System.out.println(name + &quot; æ”¶åˆ°æ¨é€æ¶ˆæ¯ï¼š &quot; + message);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5ã€ç¼–å†™ä¸€ä¸ªæµ‹è¯•ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">public class MainTest &#123;</span><br><span class="line">    </span><br><span class="line">     public static void main(String[] args) &#123;</span><br><span class="line">         </span><br><span class="line">            WechatServer server = new WechatServer();</span><br><span class="line">            </span><br><span class="line">            Observer userZhang = new User(&quot;ZhangSan&quot;);</span><br><span class="line">            Observer userLi = new User(&quot;LiSi&quot;);</span><br><span class="line">            Observer userWang = new User(&quot;WangWu&quot;);</span><br><span class="line">            </span><br><span class="line">            server.registerObserver(userZhang);</span><br><span class="line">            server.registerObserver(userLi);</span><br><span class="line">            server.registerObserver(userWang);</span><br><span class="line">            server.setInfomation(&quot;PHPæ˜¯ä¸–ç•Œä¸Šæœ€å¥½ç”¨çš„è¯­è¨€ï¼&quot;);</span><br><span class="line">            </span><br><span class="line">            System.out.println(&quot;----------------------------------------------&quot;);</span><br><span class="line">            server.removeObserver(userZhang);</span><br><span class="line">            server.setInfomation(&quot;JAVAæ˜¯ä¸–ç•Œä¸Šæœ€å¥½ç”¨çš„è¯­è¨€ï¼&quot;);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="15-è¿­ä»£å™¨æ¨¡å¼"><a class="markdownIt-Anchor" href="#15-è¿­ä»£å™¨æ¨¡å¼">#</a> 15 è¿­ä»£å™¨æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** æä¾›ä¸€ç§æ–¹æ³•é¡ºåºè®¿é—®ä¸€ä¸ªèšåˆå¯¹è±¡ä¸­å„ä¸ªå…ƒç´ ï¼Œè€Œåˆæ— é¡»æš´éœ²è¯¥å¯¹è±¡çš„å†…éƒ¨è¡¨ç¤ºã€‚</p>
<p><strong>ç®€å•æ¥è¯´ï¼Œä¸åŒç§ç±»çš„å¯¹è±¡å¯èƒ½éœ€è¦ä¸åŒçš„éå†æ–¹å¼ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸€ç§ç±»å‹çš„å¯¹è±¡é…ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæœ€åå¤šä¸ªè¿­ä»£å™¨åˆæˆä¸€ä¸ªã€‚</strong></p>
<p>** ä¸»è¦è§£å†³ï¼š** ä¸åŒçš„æ–¹å¼æ¥éå†æ•´ä¸ªæ•´åˆå¯¹è±¡ã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** éå†ä¸€ä¸ªèšåˆå¯¹è±¡ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** æŠŠåœ¨å…ƒç´ ä¹‹é—´æ¸¸èµ°çš„è´£ä»»äº¤ç»™è¿­ä»£å™¨ï¼Œè€Œä¸æ˜¯èšåˆå¯¹è±¡ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** å®šä¹‰æ¥å£ï¼šhasNext, nextã€‚</p>
<p>** åº”ç”¨å®ä¾‹ï¼š**JAVA ä¸­çš„ iteratorã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å®ƒæ”¯æŒä»¥ä¸åŒçš„æ–¹å¼éå†ä¸€ä¸ªèšåˆå¯¹è±¡ã€‚ 2ã€è¿­ä»£å™¨ç®€åŒ–äº†èšåˆç±»ã€‚ 3ã€åœ¨åŒä¸€ä¸ªèšåˆä¸Šå¯ä»¥æœ‰å¤šä¸ªéå†ã€‚ 4ã€åœ¨è¿­ä»£å™¨æ¨¡å¼ä¸­ï¼Œå¢åŠ æ–°çš„èšåˆç±»å’Œè¿­ä»£å™¨ç±»éƒ½å¾ˆæ–¹ä¾¿ï¼Œæ— é¡»ä¿®æ”¹åŸæœ‰ä»£ç ã€‚</p>
<p>** ç¼ºç‚¹ï¼š** ç”±äºè¿­ä»£å™¨æ¨¡å¼å°†å­˜å‚¨æ•°æ®å’Œéå†æ•°æ®çš„èŒè´£åˆ†ç¦»ï¼Œå¢åŠ æ–°çš„èšåˆç±»éœ€è¦å¯¹åº”å¢åŠ æ–°çš„è¿­ä»£å™¨ç±»ï¼Œç±»çš„ä¸ªæ•°æˆå¯¹å¢åŠ ï¼Œè¿™åœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†ç³»ç»Ÿçš„å¤æ‚æ€§ã€‚</p>
<h3 id="151-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#151-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 15.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190611195714196.png" class="has" width="726" height="380" />
<p>(1) è¿­ä»£å™¨è§’è‰²ï¼ˆIteratorï¼‰: å®šä¹‰éå†å…ƒç´ æ‰€éœ€è¦çš„æ–¹æ³•ï¼Œä¸€èˆ¬æ¥è¯´ä¼šæœ‰è¿™ä¹ˆä¸‰ä¸ªæ–¹æ³•ï¼šå–å¾—ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³• next ()ï¼Œåˆ¤æ–­æ˜¯å¦éå†ç»“æŸçš„æ–¹æ³• hasNext ()ï¼‰ï¼Œç§»å‡ºå½“å‰å¯¹è±¡çš„æ–¹æ³• remove (),</p>
<p>(2) å…·ä½“è¿­ä»£å™¨è§’è‰²ï¼ˆConcrete Iteratorï¼‰ï¼šå®ç°è¿­ä»£å™¨æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œå®Œæˆé›†åˆçš„è¿­ä»£ã€‚</p>
<p>(3) å®¹å™¨è§’è‰² (Aggregate):  ä¸€èˆ¬æ˜¯ä¸€ä¸ªæ¥å£ï¼Œæä¾›ä¸€ä¸ª iterator () æ–¹æ³•ï¼Œä¾‹å¦‚ java ä¸­çš„ Collection æ¥å£ï¼ŒList æ¥å£ï¼ŒSet æ¥å£ç­‰</p>
<p>(4) å…·ä½“å®¹å™¨è§’è‰²ï¼ˆConcreteAggregateï¼‰ï¼šå°±æ˜¯æŠ½è±¡å®¹å™¨çš„å…·ä½“å®ç°ç±»ï¼Œæ¯”å¦‚ List æ¥å£çš„æœ‰åºåˆ—è¡¨å®ç° ArrayListï¼ŒList æ¥å£çš„é“¾è¡¨å®ç° LinkListï¼ŒSet æ¥å£çš„å“ˆå¸Œåˆ—è¡¨çš„å®ç° HashSet ç­‰ã€‚</p>
<p>ä¸¾ä¾‹ï¼ˆå’–å•¡å…å’Œä¸­é¤å…åˆå¹¶ï¼Œä»–ä»¬ä¸¤ä¸ªé¤å…çš„èœå•ä¸€ä¸ªæ˜¯æ•°ç»„ä¿å­˜çš„ï¼Œä¸€ä¸ªæ˜¯ ArrayList ä¿å­˜çš„ã€‚éå†æ–¹å¼ä¸ä¸€æ ·ï¼Œä½¿ç”¨è¿­ä»£å™¨èšåˆè®¿é—®ï¼Œåªéœ€è¦ä¸€ç§æ–¹å¼ï¼‰</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190611195714224.png" class="has" width="494" height="360" />
<p>1 è¿­ä»£å™¨æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public interface Iterator &#123;</span><br><span class="line">    </span><br><span class="line">    public boolean hasNext();</span><br><span class="line">    public Object next();</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å’–å•¡åº—èœå•å’Œå’–å•¡åº—èœå•éå†å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">public class CakeHouseMenu &#123;</span><br><span class="line">    private ArrayList&lt;MenuItem&gt; menuItems;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    public CakeHouseMenu() &#123;</span><br><span class="line">        menuItems = new ArrayList&lt;MenuItem&gt;();</span><br><span class="line">        </span><br><span class="line">        addItem(&quot;KFC Cake Breakfast&quot;,&quot;boiled eggs&amp;toast&amp;cabbage&quot;,true,3.99f);</span><br><span class="line">        addItem(&quot;MDL Cake Breakfast&quot;,&quot;fried eggs&amp;toast&quot;,false,3.59f);</span><br><span class="line">        addItem(&quot;Stawberry Cake&quot;,&quot;fresh stawberry&quot;,true,3.29f);</span><br><span class="line">        addItem(&quot;Regular Cake Breakfast&quot;,&quot;toast&amp;sausage&quot;,true,2.59f);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void addItem(String name, String description, boolean vegetable,</span><br><span class="line">            float price) &#123;</span><br><span class="line">        MenuItem menuItem = new MenuItem(name, description, vegetable, price);</span><br><span class="line">        menuItems.add(menuItem);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    public Iterator getIterator()</span><br><span class="line">    &#123;</span><br><span class="line">        return new CakeHouseIterator() ;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    class CakeHouseIterator implements  Iterator</span><br><span class="line">     &#123;      </span><br><span class="line">        private int position=0;</span><br><span class="line">        public CakeHouseIterator()</span><br><span class="line">        &#123;</span><br><span class="line">              position=0;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">            @Override</span><br><span class="line">            public boolean hasNext() &#123;</span><br><span class="line">            // TODO Auto-generated method stub</span><br><span class="line">            if(position&lt;menuItems.size())</span><br><span class="line">            &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Object next() &#123;</span><br><span class="line">            // TODO Auto-generated method stub</span><br><span class="line">            MenuItem menuItem =menuItems.get(position);</span><br><span class="line">            position++;</span><br><span class="line">            return menuItem;</span><br><span class="line">        &#125;&#125;;</span><br><span class="line">    //éæœµç²¬é”ç†»å…˜æµ ï½‡çˆœ</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 ä¸­é¤å…èœå•å’Œä¸­é¤å…èœå•éå†å™¨</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">public class DinerMenu &#123;</span><br><span class="line">    private final static int Max_Items = 5;</span><br><span class="line">    private int numberOfItems = 0;</span><br><span class="line">    private MenuItem[] menuItems;</span><br><span class="line"></span><br><span class="line">    public DinerMenu() &#123;</span><br><span class="line">        menuItems = new MenuItem[Max_Items];</span><br><span class="line">        addItem(&quot;vegetable Blt&quot;, &quot;bacon&amp;lettuce&amp;tomato&amp;cabbage&quot;, true, 3.58f);</span><br><span class="line">        addItem(&quot;Blt&quot;, &quot;bacon&amp;lettuce&amp;tomato&quot;, false, 3.00f);</span><br><span class="line">        addItem(&quot;bean soup&quot;, &quot;bean&amp;potato salad&quot;, true, 3.28f);</span><br><span class="line">        addItem(&quot;hotdog&quot;, &quot;onions&amp;cheese&amp;bread&quot;, false, 3.05f);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void addItem(String name, String description, boolean vegetable,</span><br><span class="line">            float price) &#123;</span><br><span class="line">        MenuItem menuItem = new MenuItem(name, description, vegetable, price);</span><br><span class="line">        if (numberOfItems &gt;= Max_Items) &#123;</span><br><span class="line">            System.err.println(&quot;sorry,menu is full!can not add another item&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            menuItems[numberOfItems] = menuItem;</span><br><span class="line">            numberOfItems++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Iterator getIterator() &#123;</span><br><span class="line">        return new DinerIterator();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    class DinerIterator implements Iterator &#123;</span><br><span class="line">        private int position;</span><br><span class="line"></span><br><span class="line">        public DinerIterator() &#123;</span><br><span class="line">            position = 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public boolean hasNext() &#123;</span><br><span class="line">            // TODO Auto-generated method stub</span><br><span class="line">            if (position &lt; numberOfItems) &#123;</span><br><span class="line">                return true;</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            return false;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        @Override</span><br><span class="line">        public Object next() &#123;</span><br><span class="line">            // TODO Auto-generated method stub</span><br><span class="line">            MenuItem menuItem = menuItems[position];</span><br><span class="line">            position++;</span><br><span class="line">            return menuItem;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 å¥³æœåŠ¡å‘˜</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class Waitress &#123;</span><br><span class="line">    private ArrayList&lt;Iterator&gt; iterators = new ArrayList&lt;Iterator&gt;();</span><br><span class="line"></span><br><span class="line">    public Waitress() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void addIterator(Iterator iterator) &#123;</span><br><span class="line">        iterators.add(iterator);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void printMenu() &#123;</span><br><span class="line">        Iterator iterator;</span><br><span class="line">        MenuItem menuItem;</span><br><span class="line">        for (int i = 0, len = iterators.size(); i &lt; len; i++) &#123;</span><br><span class="line">            iterator = iterators.get(i);</span><br><span class="line"></span><br><span class="line">            while (iterator.hasNext()) &#123;</span><br><span class="line">                menuItem = (MenuItem) iterator.next();</span><br><span class="line">                System.out</span><br><span class="line">                        .println(menuItem.getName() + &quot;***&quot; + menuItem.getPrice() + &quot;***&quot; + menuItem.getDescription());</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void printBreakfastMenu() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void printLunchMenu() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void printVegetableMenu() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="16-è´£ä»»é“¾æ¨¡å¼"><a class="markdownIt-Anchor" href="#16-è´£ä»»é“¾æ¨¡å¼">#</a> 16 è´£ä»»é“¾æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å¦‚æœæœ‰å¤šä¸ªå¯¹è±¡æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œè´£ä»»é“¾å¯ä½¿è¯·æ±‚çš„å‘é€è€…å’Œæ¥å—è€…è§£è€¦ï¼Œè¯·æ±‚æ²¿ç€è´£ä»»é“¾ä¼ é€’ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†äº†å®ƒä¸ºæ­¢ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** èŒè´£é“¾ä¸Šçš„å¤„ç†è€…è´Ÿè´£å¤„ç†è¯·æ±‚ï¼Œå®¢æˆ·åªéœ€è¦å°†è¯·æ±‚å‘é€åˆ°èŒè´£é“¾ä¸Šå³å¯ï¼Œæ— é¡»å…³å¿ƒè¯·æ±‚çš„å¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’ï¼Œæ‰€ä»¥èŒè´£é“¾å°†è¯·æ±‚çš„å‘é€è€…å’Œè¯·æ±‚çš„å¤„ç†è€…è§£è€¦äº†ã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** åœ¨å¤„ç†æ¶ˆæ¯çš„æ—¶å€™ä»¥è¿‡æ»¤å¾ˆå¤šé“ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** æ‹¦æˆªçš„ç±»éƒ½å®ç°ç»Ÿä¸€æ¥å£ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š**Handler é‡Œé¢èšåˆå®ƒè‡ªå·±ï¼Œåœ¨ HandlerRequest é‡Œåˆ¤æ–­æ˜¯å¦åˆé€‚ï¼Œå¦‚æœæ²¡è¾¾åˆ°æ¡ä»¶åˆ™å‘ä¸‹ä¼ é€’ï¼Œå‘è°ä¼ é€’ä¹‹å‰ set è¿›å»ã€‚</p>
<h3 id="161-æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#161-æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 16.1 æ¨¡å¼çš„ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/2019061120335378.png" class="has" width="468" height="272" />
<ol>
<li>
<p>æŠ½è±¡å¤„ç†è€…ï¼ˆHandlerï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªå¤„ç†è¯·æ±‚çš„æ¥å£ï¼ŒåŒ…å«æŠ½è±¡å¤„ç†æ–¹æ³•å’Œä¸€ä¸ªåç»§è¿æ¥ã€‚</p>
</li>
<li>
<p>å…·ä½“å¤„ç†è€…ï¼ˆConcrete Handlerï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡å¤„ç†è€…çš„å¤„ç†æ–¹æ³•ï¼Œåˆ¤æ–­èƒ½å¦å¤„ç†æœ¬æ¬¡è¯·æ±‚ï¼Œå¦‚æœå¯ä»¥å¤„ç†è¯·æ±‚åˆ™å¤„ç†ï¼Œå¦åˆ™å°†è¯¥è¯·æ±‚è½¬ç»™å®ƒçš„åç»§è€…ã€‚</p>
</li>
<li>
<p>å®¢æˆ·ç±»ï¼ˆClientï¼‰è§’è‰²ï¼šåˆ›å»ºå¤„ç†é“¾ï¼Œå¹¶å‘é“¾å¤´çš„å…·ä½“å¤„ç†è€…å¯¹è±¡æäº¤è¯·æ±‚ï¼Œå®ƒä¸å…³å¿ƒå¤„ç†ç»†èŠ‚å’Œè¯·æ±‚çš„ä¼ é€’è¿‡ç¨‹ã€‚</p>
</li>
</ol>
<p>ä¸¾ä¾‹ï¼ˆè´­ä¹°è¯·æ±‚å†³ç­–ï¼Œä»·æ ¼ä¸åŒè¦ç”±ä¸åŒçš„çº§åˆ«å†³å®šï¼šç»„é•¿ã€éƒ¨é•¿ã€å‰¯éƒ¨ã€æ€»è£ï¼‰ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190611203353118.png" class="has" width="1041" height="363" />
<p>1 å†³ç­–è€…æŠ½è±¡ç±»ï¼ŒåŒ…å«å¯¹è¯·æ±‚å¤„ç†çš„å‡½æ•°ï¼ŒåŒæ—¶è¿˜åŒ…å«æŒ‡å®šä¸‹ä¸€ä¸ªå†³ç­–è€…çš„å‡½æ•°</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Approver &#123;</span><br><span class="line">     Approver successor;</span><br><span class="line">     String Name;</span><br><span class="line">    public Approver(String Name)</span><br><span class="line">    &#123;</span><br><span class="line">        this.Name=Name;</span><br><span class="line">    &#125;</span><br><span class="line">    public abstract void ProcessRequest( PurchaseRequest request);</span><br><span class="line">    public void SetSuccessor(Approver successor) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        this.successor=successor;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å®¢æˆ·ç«¯ä»¥åŠè¯·æ±‚</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">public class PurchaseRequest &#123;</span><br><span class="line">    private int Type = 0;</span><br><span class="line">    private int Number = 0;</span><br><span class="line">    private float Price = 0;</span><br><span class="line">    private int ID = 0;</span><br><span class="line"></span><br><span class="line">    public PurchaseRequest(int Type, int Number, float Price) &#123;</span><br><span class="line">        this.Type = Type;</span><br><span class="line">        this.Number = Number;</span><br><span class="line">        this.Price = Price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int GetType() &#123;</span><br><span class="line">        return Type;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public float GetSum() &#123;</span><br><span class="line">        return Number * Price;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int GetID() &#123;</span><br><span class="line">        return (int) (Math.random() * 1000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">public class Client &#123;</span><br><span class="line"></span><br><span class="line">    public Client() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public PurchaseRequest sendRequst(int Type, int Number, float Price) &#123;</span><br><span class="line">        return new PurchaseRequest(Type, Number, Price);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 ç»„é•¿ã€éƒ¨é•¿ã€‚ã€‚ã€‚ç»§æ‰¿å†³ç­–è€…æŠ½è±¡ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public class GroupApprover extends Approver &#123;</span><br><span class="line"></span><br><span class="line">    public GroupApprover(String Name) &#123;</span><br><span class="line">        super(Name + &quot; GroupLeader&quot;);</span><br><span class="line">        // TODO Auto-generated constructor stub</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void ProcessRequest(PurchaseRequest request) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">        if (request.GetSum() &lt; 5000) &#123;</span><br><span class="line">            System.out.println(&quot;**This request &quot; + request.GetID() + &quot; will be handled by &quot; + this.Name + &quot; **&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            successor.ProcessRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">public class DepartmentApprover extends Approver &#123;</span><br><span class="line"></span><br><span class="line">    public DepartmentApprover(String Name) &#123;</span><br><span class="line">        super(Name + &quot; DepartmentLeader&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void ProcessRequest(PurchaseRequest request) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line"></span><br><span class="line">        if ((5000 &lt;= request.GetSum()) &amp;&amp; (request.GetSum() &lt; 10000)) &#123;</span><br><span class="line">            System.out.println(&quot;**This request &quot; + request.GetID()</span><br><span class="line">                    + &quot; will be handled by &quot; + this.Name + &quot; **&quot;);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            successor.ProcessRequest(request);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 æµ‹è¯•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">public class MainTest &#123;</span><br><span class="line"></span><br><span class="line">    public static void main(String[] args) &#123;</span><br><span class="line"></span><br><span class="line">        Client mClient = new Client();</span><br><span class="line">        Approver GroupLeader = new GroupApprover(&quot;Tom&quot;);</span><br><span class="line">        Approver DepartmentLeader = new DepartmentApprover(&quot;Jerry&quot;);</span><br><span class="line">        Approver VicePresident = new VicePresidentApprover(&quot;Kate&quot;);</span><br><span class="line">        Approver President = new PresidentApprover(&quot;Bush&quot;);</span><br><span class="line"></span><br><span class="line">        GroupLeader.SetSuccessor(VicePresident);</span><br><span class="line">        DepartmentLeader.SetSuccessor(President);</span><br><span class="line">        VicePresident.SetSuccessor(DepartmentLeader);</span><br><span class="line">        President.SetSuccessor(GroupLeader);</span><br><span class="line"></span><br><span class="line">        GroupLeader.ProcessRequest(mClient.sendRequst(1, 10000, 40));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="-11"><a class="markdownIt-Anchor" href="#-11">#</a> </h2>
<h2 id="17-å‘½ä»¤æ¨¡å¼"><a class="markdownIt-Anchor" href="#17-å‘½ä»¤æ¨¡å¼">#</a> 17 å‘½ä»¤æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å°†ä¸€ä¸ªè¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å‘å‡ºè¯·æ±‚çš„è´£ä»»å’Œæ‰§è¡Œè¯·æ±‚çš„è´£ä»»åˆ†å‰²å¼€ã€‚è¿™æ ·ä¸¤è€…ä¹‹é—´é€šè¿‡å‘½ä»¤å¯¹è±¡è¿›è¡Œæ²Ÿé€šï¼Œè¿™æ ·æ–¹ä¾¿å°†å‘½ä»¤å¯¹è±¡è¿›è¡Œå‚¨å­˜ã€ä¼ é€’ã€è°ƒç”¨ã€å¢åŠ ä¸ç®¡ç†ã€‚</p>
<p>** æ„å›¾ï¼š** å°†ä¸€ä¸ªè¯·æ±‚å°è£…æˆä¸€ä¸ªå¯¹è±¡ï¼Œä»è€Œä½¿æ‚¨å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚å¯¹å®¢æˆ·è¿›è¡Œå‚æ•°åŒ–ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** åœ¨è½¯ä»¶ç³»ç»Ÿä¸­ï¼Œè¡Œä¸ºè¯·æ±‚è€…ä¸è¡Œä¸ºå®ç°è€…é€šå¸¸æ˜¯ä¸€ç§ç´§è€¦åˆçš„å…³ç³»ï¼Œä½†æŸäº›åœºåˆï¼Œæ¯”å¦‚éœ€è¦å¯¹è¡Œä¸ºè¿›è¡Œè®°å½•ã€æ’¤é”€æˆ–é‡åšã€äº‹åŠ¡ç­‰å¤„ç†æ—¶ï¼Œè¿™ç§æ— æ³•æŠµå¾¡å˜åŒ–çš„ç´§è€¦åˆçš„è®¾è®¡å°±ä¸å¤ªåˆé€‚ã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** åœ¨æŸäº›åœºåˆï¼Œæ¯”å¦‚è¦å¯¹è¡Œä¸ºè¿›è¡Œ &quot;è®°å½•ã€æ’¤é”€ / é‡åšã€äº‹åŠ¡&quot; ç­‰å¤„ç†ï¼Œè¿™ç§æ— æ³•æŠµå¾¡å˜åŒ–çš„ç´§è€¦åˆæ˜¯ä¸åˆé€‚çš„ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚ä½•å°† &quot;è¡Œä¸ºè¯·æ±‚è€…&quot; ä¸ &quot;è¡Œä¸ºå®ç°è€…&quot; è§£è€¦ï¼Ÿå°†ä¸€ç»„è¡Œä¸ºæŠ½è±¡ä¸ºå¯¹è±¡ï¼Œå¯ä»¥å®ç°äºŒè€…ä¹‹é—´çš„æ¾è€¦åˆã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** é€šè¿‡è°ƒç”¨è€…è°ƒç”¨æ¥å—è€…æ‰§è¡Œå‘½ä»¤ï¼Œé¡ºåºï¼šè°ƒç”¨è€…â†’æ¥å—è€…â†’å‘½ä»¤ã€‚</p>
<h3 id="171æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#171æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 17.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<h2 id="img-srchttpsbrath4oss-cn-shenzhenaliyuncscompicgo20190612194014850gif-classhas-width550-height612"><a class="markdownIt-Anchor" href="#img-srchttpsbrath4oss-cn-shenzhenaliyuncscompicgo20190612194014850gif-classhas-width550-height612">#</a> <img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612194014850.gif" class="has" width="550" height="612" /></h2>
<ol>
<li>æŠ½è±¡å‘½ä»¤ç±»ï¼ˆCommandï¼‰è§’è‰²ï¼šå£°æ˜æ‰§è¡Œå‘½ä»¤çš„æ¥å£ï¼Œæ‹¥æœ‰æ‰§è¡Œå‘½ä»¤çš„æŠ½è±¡æ–¹æ³• execute ()ã€‚</li>
<li>å…·ä½“å‘½ä»¤è§’è‰²ï¼ˆConcrete    Commandï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡å‘½ä»¤ç±»çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒæ‹¥æœ‰æ¥æ”¶è€…å¯¹è±¡ï¼Œå¹¶é€šè¿‡è°ƒç”¨æ¥æ”¶è€…çš„åŠŸèƒ½æ¥å®Œæˆå‘½ä»¤è¦æ‰§è¡Œçš„æ“ä½œã€‚</li>
<li>å®ç°è€… / æ¥æ”¶è€…ï¼ˆReceiverï¼‰è§’è‰²ï¼šæ‰§è¡Œå‘½ä»¤åŠŸèƒ½çš„ç›¸å…³æ“ä½œï¼Œæ˜¯å…·ä½“å‘½ä»¤å¯¹è±¡ä¸šåŠ¡çš„çœŸæ­£å®ç°è€…ã€‚</li>
<li>è°ƒç”¨è€… / è¯·æ±‚è€…ï¼ˆInvokerï¼‰è§’è‰²ï¼šæ˜¯è¯·æ±‚çš„å‘é€è€…ï¼Œå®ƒé€šå¸¸æ‹¥æœ‰å¾ˆå¤šçš„å‘½ä»¤å¯¹è±¡ï¼Œå¹¶é€šè¿‡è®¿é—®å‘½ä»¤å¯¹è±¡æ¥æ‰§è¡Œç›¸å…³è¯·æ±‚ï¼Œå®ƒä¸ç›´æ¥è®¿é—®æ¥æ”¶è€…ã€‚</li>
</ol>
<p>ä»£ç ä¸¾ä¾‹ï¼ˆå¼€ç¯å’Œå…³ç¯ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612194307560.png" class="has" width="420" height="277" />
<p>1 å‘½ä»¤æŠ½è±¡ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">public interface Command &#123;</span><br><span class="line">    </span><br><span class="line">    public void excute();</span><br><span class="line">    public void undo();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å…·ä½“å‘½ä»¤å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class TurnOffLight implements Command &#123;</span><br><span class="line"></span><br><span class="line">    private Light light;</span><br><span class="line"></span><br><span class="line">    public TurnOffLight(Light light) &#123;</span><br><span class="line">        this.light = light;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void excute() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        light.Off();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void undo() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        light.On();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 å®ç°è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">public class Light &#123;</span><br><span class="line"></span><br><span class="line">    String loc = &quot;&quot;;</span><br><span class="line"></span><br><span class="line">    public Light(String loc) &#123;</span><br><span class="line">        this.loc = loc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void On() &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(loc + &quot; On&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Off() &#123;</span><br><span class="line"></span><br><span class="line">        System.out.println(loc + &quot; Off&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 è¯·æ±‚è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class Contral&#123;</span><br><span class="line"></span><br><span class="line">    public void CommandExcute(Command command) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        command.excute();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void CommandUndo(Command command) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        command.undo();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="-12"><a class="markdownIt-Anchor" href="#-12">#</a> </h2>
<h2 id="18-çŠ¶æ€æ¨¡å¼"><a class="markdownIt-Anchor" href="#18-çŠ¶æ€æ¨¡å¼">#</a> 18 çŠ¶æ€æ¨¡å¼</h2>
<p><strong>å®šä¹‰</strong>ï¼š åœ¨çŠ¶æ€æ¨¡å¼ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºè¡¨ç¤ºå„ç§çŠ¶æ€çš„å¯¹è±¡å’Œä¸€ä¸ªè¡Œä¸ºéšç€çŠ¶æ€å¯¹è±¡æ”¹å˜è€Œæ”¹å˜çš„ context å¯¹è±¡ã€‚</p>
<p>ç®€å•ç†è§£ï¼Œä¸€ä¸ªæ‹¥æœ‰çŠ¶æ€çš„ context å¯¹è±¡ï¼Œåœ¨ä¸åŒçš„çŠ¶æ€ä¸‹ï¼Œå…¶è¡Œä¸ºä¼šå‘ç”Ÿæ”¹å˜ã€‚</p>
<p>** æ„å›¾ï¼š** å…è®¸å¯¹è±¡åœ¨å†…éƒ¨çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œå¯¹è±¡çœ‹èµ·æ¥å¥½åƒä¿®æ”¹äº†å®ƒçš„ç±»ã€‚</p>
<p>** ä¸»è¦è§£å†³ï¼š** å¯¹è±¡çš„è¡Œä¸ºä¾èµ–äºå®ƒçš„çŠ¶æ€ï¼ˆå±æ€§ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®å®ƒçš„çŠ¶æ€æ”¹å˜è€Œæ”¹å˜å®ƒçš„ç›¸å…³è¡Œä¸ºã€‚</p>
<p>** ä½•æ—¶ä½¿ç”¨ï¼š** ä»£ç ä¸­åŒ…å«å¤§é‡ä¸å¯¹è±¡çŠ¶æ€æœ‰å…³çš„æ¡ä»¶è¯­å¥ã€‚</p>
<p>** å¦‚ä½•è§£å†³ï¼š** å°†å„ç§å…·ä½“çš„çŠ¶æ€ç±»æŠ½è±¡å‡ºæ¥ã€‚</p>
<p>** å…³é”®ä»£ç ï¼š** é€šå¸¸å‘½ä»¤æ¨¡å¼çš„æ¥å£ä¸­åªæœ‰ä¸€ä¸ªæ–¹æ³•ã€‚è€ŒçŠ¶æ€æ¨¡å¼çš„æ¥å£ä¸­æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ–¹æ³•ã€‚è€Œä¸”ï¼ŒçŠ¶æ€æ¨¡å¼çš„å®ç°ç±»çš„æ–¹æ³•ï¼Œä¸€èˆ¬è¿”å›å€¼ï¼Œæˆ–è€…æ˜¯æ”¹å˜å®ä¾‹å˜é‡çš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒçŠ¶æ€æ¨¡å¼ä¸€èˆ¬å’Œå¯¹è±¡çš„çŠ¶æ€æœ‰å…³ã€‚å®ç°ç±»çš„æ–¹æ³•æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œè¦†ç›–æ¥å£ä¸­çš„æ–¹æ³•ã€‚çŠ¶æ€æ¨¡å¼å’Œå‘½ä»¤æ¨¡å¼ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥ç”¨äºæ¶ˆé™¤ ifâ€¦else ç­‰æ¡ä»¶é€‰æ‹©è¯­å¥ã€‚</p>
<p><strong>ä¼˜ç‚¹ï¼š</strong> 1ã€å°è£…äº†è½¬æ¢è§„åˆ™ã€‚ 2ã€æšä¸¾å¯èƒ½çš„çŠ¶æ€ï¼Œåœ¨æšä¸¾çŠ¶æ€ä¹‹å‰éœ€è¦ç¡®å®šçŠ¶æ€ç§ç±»ã€‚ 3ã€å°†æ‰€æœ‰ä¸æŸä¸ªçŠ¶æ€æœ‰å…³çš„è¡Œä¸ºæ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œå¹¶ä¸”å¯ä»¥æ–¹ä¾¿åœ°å¢åŠ æ–°çš„çŠ¶æ€ï¼Œåªéœ€è¦æ”¹å˜å¯¹è±¡çŠ¶æ€å³å¯æ”¹å˜å¯¹è±¡çš„è¡Œä¸ºã€‚ 4ã€å…è®¸çŠ¶æ€è½¬æ¢é€»è¾‘ä¸çŠ¶æ€å¯¹è±¡åˆæˆä¸€ä½“ï¼Œè€Œä¸æ˜¯æŸä¸€ä¸ªå·¨å¤§çš„æ¡ä»¶è¯­å¥å—ã€‚ 5ã€å¯ä»¥è®©å¤šä¸ªç¯å¢ƒå¯¹è±¡å…±äº«ä¸€ä¸ªçŠ¶æ€å¯¹è±¡ï¼Œä»è€Œå‡å°‘ç³»ç»Ÿä¸­å¯¹è±¡çš„ä¸ªæ•°ã€‚</p>
<p><strong>ç¼ºç‚¹ï¼š</strong> 1ã€çŠ¶æ€æ¨¡å¼çš„ä½¿ç”¨å¿…ç„¶ä¼šå¢åŠ ç³»ç»Ÿç±»å’Œå¯¹è±¡çš„ä¸ªæ•°ã€‚ 2ã€çŠ¶æ€æ¨¡å¼çš„ç»“æ„ä¸å®ç°éƒ½è¾ƒä¸ºå¤æ‚ï¼Œå¦‚æœä½¿ç”¨ä¸å½“å°†å¯¼è‡´ç¨‹åºç»“æ„å’Œä»£ç çš„æ··ä¹±ã€‚ 3ã€çŠ¶æ€æ¨¡å¼å¯¹ &quot;å¼€é—­åŸåˆ™&quot; çš„æ”¯æŒå¹¶ä¸å¤ªå¥½ï¼Œå¯¹äºå¯ä»¥åˆ‡æ¢çŠ¶æ€çš„çŠ¶æ€æ¨¡å¼ï¼Œå¢åŠ æ–°çš„çŠ¶æ€ç±»éœ€è¦ä¿®æ”¹é‚£äº›è´Ÿè´£çŠ¶æ€è½¬æ¢çš„æºä»£ç ï¼Œå¦åˆ™æ— æ³•åˆ‡æ¢åˆ°æ–°å¢çŠ¶æ€ï¼Œè€Œä¸”ä¿®æ”¹æŸä¸ªçŠ¶æ€ç±»çš„è¡Œä¸ºä¹Ÿéœ€ä¿®æ”¹å¯¹åº”ç±»çš„æºä»£ç ã€‚</p>
<h3 id="181-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#181-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 18.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612003537747.png" class="has" width="585" height="357" />
<ul>
<li>
<p><strong>State æŠ½è±¡çŠ¶æ€è§’è‰²</strong></p>
<p>æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè´Ÿè´£å¯¹è±¡çŠ¶æ€å®šä¹‰ï¼Œå¹¶ä¸”å°è£…ç¯å¢ƒè§’è‰²ä»¥å®ç°çŠ¶æ€åˆ‡æ¢ã€‚</p>
</li>
<li>
<p><strong>ConcreteState å…·ä½“çŠ¶æ€è§’è‰²</strong></p>
<p>å…·ä½“çŠ¶æ€ä¸»è¦æœ‰ä¸¤ä¸ªèŒè´£ï¼šä¸€æ˜¯å¤„ç†æœ¬çŠ¶æ€ä¸‹çš„äº‹æƒ…ï¼ŒäºŒæ˜¯ä»æœ¬çŠ¶æ€å¦‚ä½•è¿‡æ¸¡åˆ°å…¶ä»–çŠ¶æ€ã€‚</p>
</li>
<li>
<p><strong>Context ç¯å¢ƒè§’è‰²</strong></p>
<p>å®šä¹‰å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£ï¼Œå¹¶ä¸”è´Ÿè´£å…·ä½“çŠ¶æ€çš„åˆ‡æ¢ã€‚</p>
</li>
</ul>
<p>ä¸¾ä¾‹ï¼ˆäººç‰©åœ¨åœ°ç‚¹ A å‘åœ°ç‚¹ B ç§»åŠ¨ï¼Œåœ¨åœ°ç‚¹ B å‘åœ°ç‚¹ A ç§»åŠ¨ï¼‰ã€‚ç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612003537942.png" class="has" width="473" height="324" />
<p>1 state æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">public interface State &#123;</span><br><span class="line">    public void stop();</span><br><span class="line">    public void move();</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 çŠ¶æ€å®ä¾‹</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">public class PlaceA implements State &#123;</span><br><span class="line"></span><br><span class="line">    private Player context;</span><br><span class="line"></span><br><span class="line">    public PlaceA(Player context) &#123;</span><br><span class="line">        this.context = context;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void move() &#123;</span><br><span class="line">        System.out.println(&quot;å¤„äºåœ°ç‚¹A,å¼€å§‹å‘Bç§»åŠ¨&quot;);</span><br><span class="line">        System.out.println(&quot;--------&quot;);</span><br><span class="line">        context.setDirection(&quot;AB&quot;);</span><br><span class="line">        context.setState(context.onMove);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        System.out.println(&quot;æ­£å¤„åœ¨åœ°ç‚¹Aï¼Œä¸ç”¨åœæ­¢ç§»åŠ¨&quot;);</span><br><span class="line">        System.out.println(&quot;--------&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 context (player) æ‹¥æœ‰çŠ¶æ€çš„å¯¹è±¡</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">public class Player &#123;</span><br><span class="line"></span><br><span class="line">    State placeA;</span><br><span class="line">    State placeB;</span><br><span class="line">    State onMove;</span><br><span class="line">    private State state;</span><br><span class="line">    private String direction;</span><br><span class="line"></span><br><span class="line">    public Player() &#123;</span><br><span class="line">        direction = &quot;AB&quot;;</span><br><span class="line">        placeA = new PlaceA(this);</span><br><span class="line">        placeB = new PlaceB(this);</span><br><span class="line">        onMove = new OnMove(this);</span><br><span class="line">        this.state = placeA;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void move() &#123;</span><br><span class="line">        System.out.println(&quot;æŒ‡ä»¤:å¼€å§‹ç§»åŠ¨&quot;);</span><br><span class="line">        state.move();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void stop() &#123;</span><br><span class="line">        System.out.println(&quot;æŒ‡ä»¤:åœæ­¢ç§»åŠ¨&quot;);</span><br><span class="line">        state.stop();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public State getState() &#123;</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setState(State state) &#123;</span><br><span class="line">        this.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setDirection(String direction) &#123;</span><br><span class="line">        this.direction = direction;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getDirection() &#123;</span><br><span class="line">        return direction;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="-13"><a class="markdownIt-Anchor" href="#-13">#</a> </h3>
<h2 id="19-å¤‡å¿˜å½•æ¨¡å¼"><a class="markdownIt-Anchor" href="#19-å¤‡å¿˜å½•æ¨¡å¼">#</a> 19 å¤‡å¿˜å½•æ¨¡å¼</h2>
<p>å®šä¹‰ï¼š åœ¨ä¸ç ´åå°è£…æ€§çš„å‰æä¸‹ï¼Œæ•è·ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¹‹å¤–ä¿å­˜è¿™ä¸ªçŠ¶æ€ï¼Œä»¥ä¾¿ä»¥åå½“éœ€è¦æ—¶èƒ½å°†è¯¥å¯¹è±¡æ¢å¤åˆ°åŸå…ˆä¿å­˜çš„çŠ¶æ€ã€‚è¯¥æ¨¡å¼<span style="color:#b22222;">åˆå«å¿«ç…§æ¨¡å¼ã€‚</span></p>
<p>å¤‡å¿˜å½•æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ã€‚</p>
<ul>
<li>
<p>æä¾›äº†ä¸€ç§å¯ä»¥æ¢å¤çŠ¶æ€çš„æœºåˆ¶ã€‚å½“ç”¨æˆ·éœ€è¦æ—¶èƒ½å¤Ÿæ¯”è¾ƒæ–¹ä¾¿åœ°å°†æ•°æ®æ¢å¤åˆ°æŸä¸ªå†å²çš„çŠ¶æ€ã€‚</p>
</li>
<li>
<p>å®ç°äº†å†…éƒ¨çŠ¶æ€çš„å°è£…ã€‚é™¤äº†åˆ›å»ºå®ƒçš„å‘èµ·äººä¹‹å¤–ï¼Œå…¶ä»–å¯¹è±¡éƒ½ä¸èƒ½å¤Ÿè®¿é—®è¿™äº›çŠ¶æ€ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>ç®€åŒ–äº†å‘èµ·äººç±»ã€‚å‘èµ·äººä¸éœ€è¦ç®¡ç†å’Œä¿å­˜å…¶å†…éƒ¨çŠ¶æ€çš„å„ä¸ªå¤‡ä»½ï¼Œæ‰€æœ‰çŠ¶æ€ä¿¡æ¯éƒ½ä¿å­˜åœ¨å¤‡å¿˜å½•ä¸­ï¼Œå¹¶ç”±ç®¡ç†è€…è¿›è¡Œç®¡ç†ï¼Œè¿™ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚</p>
</li>
</ul>
<p>å…¶ä¸»è¦ç¼ºç‚¹æ˜¯ï¼šèµ„æºæ¶ˆè€—å¤§ã€‚å¦‚æœè¦ä¿å­˜çš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯è¿‡å¤šæˆ–è€…ç‰¹åˆ«é¢‘ç¹ï¼Œå°†ä¼šå ç”¨æ¯”è¾ƒå¤§çš„å†…å­˜èµ„æºã€‚</p>
<h3 id="191-æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#191-æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹">#</a> 19.1 æ¨¡å¼ç»“æ„å›¾å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612143829622.png" class="has" width="564" height="405" />
<ol>
<li>
<p>å‘èµ·äººï¼ˆOriginatorï¼‰è§’è‰²ï¼šè®°å½•å½“å‰æ—¶åˆ»çš„å†…éƒ¨çŠ¶æ€ä¿¡æ¯ï¼Œæä¾›åˆ›å»ºå¤‡å¿˜å½•å’Œæ¢å¤å¤‡å¿˜å½•æ•°æ®çš„åŠŸèƒ½ï¼Œå®ç°å…¶ä»–ä¸šåŠ¡åŠŸèƒ½ï¼Œå®ƒå¯ä»¥è®¿é—®å¤‡å¿˜å½•é‡Œçš„æ‰€æœ‰ä¿¡æ¯ã€‚</p>
</li>
<li>
<p>å¤‡å¿˜å½•ï¼ˆMementoï¼‰è§’è‰²ï¼šè´Ÿè´£å­˜å‚¨å‘èµ·äººçš„å†…éƒ¨çŠ¶æ€ï¼Œåœ¨éœ€è¦çš„æ—¶å€™æä¾›è¿™äº›å†…éƒ¨çŠ¶æ€ç»™å‘èµ·äººã€‚</p>
</li>
<li>
<p>ç®¡ç†è€…ï¼ˆCaretakerï¼‰è§’è‰²ï¼šå¯¹å¤‡å¿˜å½•è¿›è¡Œç®¡ç†ï¼Œæä¾›ä¿å­˜ä¸è·å–å¤‡å¿˜å½•çš„åŠŸèƒ½ï¼Œä½†å…¶ä¸èƒ½å¯¹å¤‡å¿˜å½•çš„å†…å®¹è¿›è¡Œè®¿é—®ä¸ä¿®æ”¹ã€‚</p>
</li>
</ol>
<p>ä¸¾ä¾‹ï¼ˆå‘èµ·è€…é€šè¿‡å¤‡å¿˜å½•å­˜å‚¨ä¿¡æ¯å’Œè·å–ä¿¡æ¯ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612143829817.png" class="has" width="401" height="198" />
<p>1 å¤‡å¿˜å½•æ¥å£</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">public interface MementoIF &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å¤‡å¿˜å½•</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">public class Memento implements MementoIF&#123;</span><br><span class="line">    </span><br><span class="line">    private String state;</span><br><span class="line"></span><br><span class="line">    public Memento(String state) &#123;</span><br><span class="line">        this.state = state;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    public String getState()&#123;</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 å‘èµ·è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Originator &#123;</span><br><span class="line"></span><br><span class="line">    private String state;</span><br><span class="line"></span><br><span class="line">    public String getState() &#123;</span><br><span class="line">        return state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setState(String state) &#123;</span><br><span class="line">        this.state = state;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Memento saveToMemento() &#123;</span><br><span class="line">        return new Memento(state);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getStateFromMemento(MementoIF memento) &#123;</span><br><span class="line">        return ((Memento) memento).getState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 ç®¡ç†è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">public class CareTaker &#123;</span><br><span class="line">    </span><br><span class="line">    private List&lt;MementoIF&gt; mementoList = new ArrayList&lt;MementoIF&gt;();</span><br><span class="line"></span><br><span class="line">    public void add(MementoIF memento) &#123;</span><br><span class="line">        mementoList.add(memento);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public MementoIF get(int index) &#123;</span><br><span class="line">        return mementoList.get(index);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="20-è®¿é—®è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#20-è®¿é—®è€…æ¨¡å¼">#</a> 20 è®¿é—®è€…æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å°†ä½œç”¨äºæŸç§æ•°æ®ç»“æ„ä¸­çš„å„å…ƒç´ çš„æ“ä½œåˆ†ç¦»å‡ºæ¥å°è£…æˆç‹¬ç«‹çš„ç±»ï¼Œä½¿å…¶åœ¨ä¸æ”¹å˜æ•°æ®ç»“æ„çš„å‰æä¸‹å¯ä»¥æ·»åŠ ä½œç”¨äºè¿™äº›å…ƒç´ çš„æ–°çš„æ“ä½œï¼Œä¸ºæ•°æ®ç»“æ„ä¸­çš„æ¯ä¸ªå…ƒç´ æä¾›å¤šç§è®¿é—®æ–¹å¼ã€‚å®ƒå°†å¯¹æ•°æ®çš„æ“ä½œä¸æ•°æ®ç»“æ„è¿›è¡Œåˆ†ç¦»ã€‚</p>
<p>è®¿é—®è€…ï¼ˆVisitorï¼‰æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ã€‚</p>
<ol>
<li>
<p>æ‰©å±•æ€§å¥½ã€‚èƒ½å¤Ÿåœ¨ä¸ä¿®æ”¹å¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ çš„æƒ…å†µä¸‹ï¼Œä¸ºå¯¹è±¡ç»“æ„ä¸­çš„å…ƒç´ æ·»åŠ æ–°çš„åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>å¤ç”¨æ€§å¥½ã€‚å¯ä»¥é€šè¿‡è®¿é—®è€…æ¥å®šä¹‰æ•´ä¸ªå¯¹è±¡ç»“æ„é€šç”¨çš„åŠŸèƒ½ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„å¤ç”¨ç¨‹åº¦ã€‚</p>
</li>
<li>
<p>çµæ´»æ€§å¥½ã€‚è®¿é—®è€…æ¨¡å¼å°†æ•°æ®ç»“æ„ä¸ä½œç”¨äºç»“æ„ä¸Šçš„æ“ä½œè§£è€¦ï¼Œä½¿å¾—æ“ä½œé›†åˆå¯ç›¸å¯¹è‡ªç”±åœ°æ¼”åŒ–è€Œä¸å½±å“ç³»ç»Ÿçš„æ•°æ®ç»“æ„ã€‚</p>
</li>
<li>
<p>ç¬¦åˆå•ä¸€èŒè´£åŸåˆ™ã€‚è®¿é—®è€…æ¨¡å¼æŠŠç›¸å…³çš„è¡Œä¸ºå°è£…åœ¨ä¸€èµ·ï¼Œæ„æˆä¸€ä¸ªè®¿é—®è€…ï¼Œä½¿æ¯ä¸€ä¸ªè®¿é—®è€…çš„åŠŸèƒ½éƒ½æ¯”è¾ƒå•ä¸€ã€‚</p>
</li>
</ol>
<p>è®¿é—®è€…ï¼ˆVisitorï¼‰æ¨¡å¼çš„ä¸»è¦ç¼ºç‚¹å¦‚ä¸‹ã€‚</p>
<ol>
<li>
<p>å¢åŠ æ–°çš„å…ƒç´ ç±»å¾ˆå›°éš¾ã€‚åœ¨è®¿é—®è€…æ¨¡å¼ä¸­ï¼Œæ¯å¢åŠ ä¸€ä¸ªæ–°çš„å…ƒç´ ç±»ï¼Œéƒ½è¦åœ¨æ¯ä¸€ä¸ªå…·ä½“è®¿é—®è€…ç±»ä¸­å¢åŠ ç›¸åº”çš„å…·ä½“æ“ä½œï¼Œè¿™è¿èƒŒäº† â€œå¼€é—­åŸåˆ™â€ã€‚</p>
</li>
<li>
<p>ç ´åå°è£…ã€‚è®¿é—®è€…æ¨¡å¼ä¸­å…·ä½“å…ƒç´ å¯¹è®¿é—®è€…å…¬å¸ƒç»†èŠ‚ï¼Œè¿™ç ´åäº†å¯¹è±¡çš„å°è£…æ€§ã€‚</p>
</li>
<li>
<p>è¿åäº†ä¾èµ–å€’ç½®åŸåˆ™ã€‚è®¿é—®è€…æ¨¡å¼ä¾èµ–äº†å…·ä½“ç±»ï¼Œè€Œæ²¡æœ‰ä¾èµ–æŠ½è±¡ç±»ã€‚</p>
</li>
</ol>
<h3 id="201-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#201-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 20.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612154308216.gif" class="has" width="500" height="443" />
<p>è®¿é—®è€…æ¨¡å¼åŒ…å«ä»¥ä¸‹ä¸»è¦è§’è‰²ã€‚</p>
<ol>
<li>
<p>æŠ½è±¡è®¿é—®è€…ï¼ˆVisitorï¼‰è§’è‰²ï¼šå®šä¹‰ä¸€ä¸ªè®¿é—®å…·ä½“å…ƒç´ çš„æ¥å£ï¼Œä¸ºæ¯ä¸ªå…·ä½“å…ƒç´ ç±»å¯¹åº”ä¸€ä¸ªè®¿é—®æ“ä½œ visit () ï¼Œè¯¥æ“ä½œä¸­çš„å‚æ•°ç±»å‹æ ‡è¯†äº†è¢«è®¿é—®çš„å…·ä½“å…ƒç´ ã€‚</p>
</li>
<li>
<p>å…·ä½“è®¿é—®è€…ï¼ˆConcreteVisitorï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡è®¿é—®è€…è§’è‰²ä¸­å£°æ˜çš„å„ä¸ªè®¿é—®æ“ä½œï¼Œç¡®å®šè®¿é—®è€…è®¿é—®ä¸€ä¸ªå…ƒç´ æ—¶è¯¥åšä»€ä¹ˆã€‚</p>
</li>
<li>
<p>æŠ½è±¡å…ƒç´ ï¼ˆElementï¼‰è§’è‰²ï¼šå£°æ˜ä¸€ä¸ªåŒ…å«æ¥å—æ“ä½œ accept () çš„æ¥å£ï¼Œè¢«æ¥å—çš„è®¿é—®è€…å¯¹è±¡ä½œä¸º accept () æ–¹æ³•çš„å‚æ•°ã€‚</p>
</li>
<li>
<p>å…·ä½“å…ƒç´ ï¼ˆConcreteElementï¼‰è§’è‰²ï¼šå®ç°æŠ½è±¡å…ƒç´ è§’è‰²æä¾›çš„ accept () æ“ä½œï¼Œå…¶æ–¹æ³•ä½“é€šå¸¸éƒ½æ˜¯ visitor.visit (this) ï¼Œå¦å¤–å…·ä½“å…ƒç´ ä¸­å¯èƒ½è¿˜åŒ…å«æœ¬èº«ä¸šåŠ¡é€»è¾‘çš„ç›¸å…³æ“ä½œã€‚</p>
</li>
<li>
<p>å¯¹è±¡ç»“æ„ï¼ˆObject Structureï¼‰è§’è‰²ï¼šæ˜¯ä¸€ä¸ªåŒ…å«å…ƒç´ è§’è‰²çš„å®¹å™¨ï¼Œæä¾›è®©è®¿é—®è€…å¯¹è±¡éå†å®¹å™¨ä¸­çš„æ‰€æœ‰å…ƒç´ çš„æ–¹æ³•ï¼Œé€šå¸¸ç”± Listã€Setã€Map ç­‰èšåˆç±»å®ç°ã€‚</p>
</li>
</ol>
<p>1 æŠ½è±¡è®¿é—®è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Visitor &#123;</span><br><span class="line"></span><br><span class="line">    abstract public void Visit(Element element);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å…·ä½“è®¿é—®è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class CompensationVisitor implements Visitor &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void Visit(Element element) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        Employee employee = ((Employee) element);</span><br><span class="line"></span><br><span class="line">        System.out.println(</span><br><span class="line">                employee.getName() + &quot;&#x27;s Compensation is &quot; + (employee.getDegree() * employee.getVacationDays() * 10));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 æŠ½è±¡å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">public interface Element &#123;</span><br><span class="line">    abstract public void Accept(Visitor visitor);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 å…·ä½“å…ƒç´ </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class CompensationVisitor implements Visitor &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void Visit(Element element) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        Employee employee = ((Employee) element);</span><br><span class="line"></span><br><span class="line">        System.out.println(</span><br><span class="line">                employee.getName() + &quot;&#x27;s Compensation is &quot; + (employee.getDegree() * employee.getVacationDays() * 10));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>5 å¯¹è±¡ç»“æ„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">public class ObjectStructure &#123;</span><br><span class="line">    private HashMap&lt;String, Employee&gt; employees;</span><br><span class="line"></span><br><span class="line">    public ObjectStructure() &#123;</span><br><span class="line">        employees = new HashMap();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Attach(Employee employee) &#123;</span><br><span class="line">        employees.put(employee.getName(), employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Detach(Employee employee) &#123;</span><br><span class="line">        employees.remove(employee);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Employee getEmployee(String name) &#123;</span><br><span class="line">        return employees.get(name);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void Accept(Visitor visitor) &#123;</span><br><span class="line">        for (Employee e : employees.values()) &#123;</span><br><span class="line">            e.Accept(visitor);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="-14"><a class="markdownIt-Anchor" href="#-14">#</a> </h3>
<h2 id="21-ä¸­ä»‹è€…æ¨¡å¼"><a class="markdownIt-Anchor" href="#21-ä¸­ä»‹è€…æ¨¡å¼">#</a> 21 ä¸­ä»‹è€…æ¨¡å¼</h2>
<p>** å®šä¹‰ï¼š** å®šä¹‰ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—å¯¹è±¡ä¹‹é—´çš„äº¤äº’ï¼Œä½¿åŸæœ‰å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ¾æ•£ï¼Œä¸”å¯ä»¥ç‹¬ç«‹åœ°æ”¹å˜å®ƒä»¬ä¹‹é—´çš„äº¤äº’ã€‚ä¸­ä»‹è€…æ¨¡å¼åˆå«è°ƒåœæ¨¡å¼ï¼Œå®ƒæ˜¯è¿ªç±³ç‰¹æ³•åˆ™çš„å…¸å‹åº”ç”¨ã€‚</p>
<p>ä¸­ä»‹è€…æ¨¡å¼æ˜¯ä¸€ç§å¯¹è±¡è¡Œä¸ºå‹æ¨¡å¼ï¼Œå…¶ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ã€‚</p>
<ol>
<li>
<p>é™ä½äº†å¯¹è±¡ä¹‹é—´çš„è€¦åˆæ€§ï¼Œä½¿å¾—å¯¹è±¡æ˜“äºç‹¬ç«‹åœ°è¢«å¤ç”¨ã€‚</p>
</li>
<li>
<p>å°†å¯¹è±¡é—´çš„ä¸€å¯¹å¤šå…³è”è½¬å˜ä¸ºä¸€å¯¹ä¸€çš„å…³è”ï¼Œæé«˜ç³»ç»Ÿçš„çµæ´»æ€§ï¼Œä½¿å¾—ç³»ç»Ÿæ˜“äºç»´æŠ¤å’Œæ‰©å±•ã€‚</p>
</li>
</ol>
<p>å…¶ä¸»è¦ç¼ºç‚¹æ˜¯ï¼šå½“åŒäº‹ç±»å¤ªå¤šæ—¶ï¼Œä¸­ä»‹è€…çš„èŒè´£å°†å¾ˆå¤§ï¼Œå®ƒä¼šå˜å¾—å¤æ‚è€Œåºå¤§ï¼Œä»¥è‡³äºç³»ç»Ÿéš¾ä»¥ç»´æŠ¤ã€‚</p>
<h3 id="211-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹"><a class="markdownIt-Anchor" href="#211-æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹">#</a> 21.1 æ¨¡å¼ç»“æ„å’Œä»£ç ç¤ºä¾‹</h3>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612175348613.png" class="has" width="803" height="457" />
<ol>
<li>
<p>æŠ½è±¡ä¸­ä»‹è€…ï¼ˆMediatorï¼‰è§’è‰²ï¼šå®ƒæ˜¯ä¸­ä»‹è€…çš„æ¥å£ï¼Œæä¾›äº†åŒäº‹å¯¹è±¡æ³¨å†Œä¸è½¬å‘åŒäº‹å¯¹è±¡ä¿¡æ¯çš„æŠ½è±¡æ–¹æ³•ã€‚</p>
</li>
<li>
<p>å…·ä½“ä¸­ä»‹è€…ï¼ˆConcreteMediatorï¼‰è§’è‰²ï¼šå®ç°ä¸­ä»‹è€…æ¥å£ï¼Œå®šä¹‰ä¸€ä¸ª List æ¥ç®¡ç†åŒäº‹å¯¹è±¡ï¼Œåè°ƒå„ä¸ªåŒäº‹è§’è‰²ä¹‹é—´çš„äº¤äº’å…³ç³»ï¼Œå› æ­¤å®ƒä¾èµ–äºåŒäº‹è§’è‰²ã€‚</p>
</li>
<li>
<p>æŠ½è±¡åŒäº‹ç±»ï¼ˆColleagueï¼‰è§’è‰²ï¼šå®šä¹‰åŒäº‹ç±»çš„æ¥å£ï¼Œä¿å­˜ä¸­ä»‹è€…å¯¹è±¡ï¼Œæä¾›åŒäº‹å¯¹è±¡äº¤äº’çš„æŠ½è±¡æ–¹æ³•ï¼Œå®ç°æ‰€æœ‰ç›¸äº’å½±å“çš„åŒäº‹ç±»çš„å…¬å…±åŠŸèƒ½ã€‚</p>
</li>
<li>
<p>å…·ä½“åŒäº‹ç±»ï¼ˆConcrete Colleagueï¼‰è§’è‰²ï¼šæ˜¯æŠ½è±¡åŒäº‹ç±»çš„å®ç°è€…ï¼Œå½“éœ€è¦ä¸å…¶ä»–åŒäº‹å¯¹è±¡äº¤äº’æ—¶ï¼Œç”±ä¸­ä»‹è€…å¯¹è±¡è´Ÿè´£åç»­çš„äº¤äº’ã€‚</p>
</li>
</ol>
<p>ä¸¾ä¾‹ï¼ˆé€šè¿‡ä¸­ä»‹å–æ–¹ï¼‰ï¼Œç±»å›¾å¦‚ä¸‹ï¼š</p>
<img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/20190612175348612.png" class="has" width="577" height="290" />
<p>1 æŠ½è±¡ä¸­ä»‹è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public interface Mediator &#123;</span><br><span class="line"></span><br><span class="line">    void register(Colleague colleague); // å®¢æˆ·æ³¨å†Œ</span><br><span class="line"></span><br><span class="line">    void relay(String from, String to,String ad); // è½¬å‘</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2 å…·ä½“ä¸­ä»‹è€…</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">public class ConcreteMediator implements Mediator &#123;</span><br><span class="line"></span><br><span class="line">    private List&lt;Colleague&gt; colleagues = new ArrayList&lt;Colleague&gt;();</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void register(Colleague colleague) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        if (!colleagues.contains(colleague)) &#123;</span><br><span class="line">            colleagues.add(colleague);</span><br><span class="line">            colleague.setMedium(this);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void relay(String from, String to, String ad) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        for (Colleague cl : colleagues) &#123;</span><br><span class="line"></span><br><span class="line">            String name = cl.getName();</span><br><span class="line">            if (name.equals(to)) &#123;</span><br><span class="line">                cl.receive(from, ad);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3 æŠ½è±¡åŒäº‹ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public abstract class Colleague &#123;</span><br><span class="line"></span><br><span class="line">    protected Mediator mediator;</span><br><span class="line">    protected String name;</span><br><span class="line"></span><br><span class="line">    public Colleague(String name) &#123;</span><br><span class="line">        this.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setMedium(Mediator mediator) &#123;</span><br><span class="line"></span><br><span class="line">        this.mediator = mediator;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract void Send(String to, String ad);</span><br><span class="line"></span><br><span class="line">    public abstract void receive(String from, String ad);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4 å…·ä½“åŒäº‹ç±»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class Buyer extends Colleague &#123;</span><br><span class="line"></span><br><span class="line">    public Buyer(String name) &#123;</span><br><span class="line"></span><br><span class="line">        super(name);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void Send(String to, String ad) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        mediator.relay(name, to, ad);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void receive(String from, String ad) &#123;</span><br><span class="line">        // TODO Auto-generated method stub</span><br><span class="line">        System.out.println(name + &quot;æ¥æ”¶åˆ°æ¥è‡ª&quot; + from + &quot;çš„æ¶ˆæ¯:&quot; + ad);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å…³äºæˆ‘"><a class="markdownIt-Anchor" href="#å…³äºæˆ‘">#</a> å…³äºæˆ‘</h2>
<p>Brath æ˜¯ä¸€ä¸ªçƒ­çˆ±æŠ€æœ¯çš„ Java ç¨‹åºçŒ¿ï¼Œå…¬ä¼—å·ã€ŒInterviewCoderã€å®šæœŸåˆ†äº«æœ‰è¶£æœ‰æ–™çš„ç²¾å“åŸåˆ›æ–‡ç« ï¼</p>
<p><img src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></p>
<p>éå¸¸æ„Ÿè°¢å„ä½äººæ‰èƒ½çœ‹åˆ°è¿™é‡Œï¼ŒåŸåˆ›ä¸æ˜“ï¼Œæ–‡ç« å¦‚æœæœ‰å¸®åŠ©å¯ä»¥å…³æ³¨ã€ç‚¹èµã€åˆ†äº«æˆ–è¯„è®ºï¼Œè¿™éƒ½æ˜¯å¯¹æˆ‘çš„è«å¤§æ”¯æŒï¼</p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous is-invisible is-hidden-mobile"><a href="/page/0/">ä¸Šä¸€é¡µ</a></div><div class="pagination-next"><a href="/page/2/">ä¸‹ä¸€é¡µ</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link is-current" href="/">1</a></li><li><a class="pagination-link" href="/page/2/">2</a></li><li><span class="pagination-ellipsis">&hellip;</span></li><li><a class="pagination-link" href="/page/15/">15</a></li></ul></nav></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:20:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91volatile%E5%85%B3%E9%94%AE%E5%AD%97/">ã€Javaã€‘volatileå…³é”®å­—</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:14:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91%E5%A4%9A%E7%A7%8D%E4%BB%A3%E7%90%86%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F/">ã€Javaã€‘å¤šç§ä»£ç†çš„å®ç°æ–¹å¼</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-08T14:04:55.000Z">2023-05-08</time></p><p class="title"><a href="/2023/05/08/%E3%80%90Java%E3%80%91HashMap%E6%A0%B8%E5%BF%83%E5%8E%9F%E7%90%86%E8%A7%A3%E8%AF%BB/">ã€Javaã€‘HashMapæ ¸å¿ƒåŸç†è§£è¯»</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-06T09:23:40.000Z">2023-05-06</time></p><p class="title"><a href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0Map/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°Hashè¡¨ï¼Œå¹¶è§£å†³å“ˆå¸Œå†²çª</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-05-06T07:53:40.000Z">2023-05-06</time></p><p class="title"><a href="/2023/05/06/%E3%80%90%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E3%80%91%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0ArrayList/">ã€æ•°æ®ç»“æ„ã€‘æ‰‹å†™å®ç°ArrayList</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">40</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">50</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">44</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">7</span></span></a></li></ul></div></div></div><!--!--><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="https://brath4.oss-cn-shenzhen.aliyuncs.com/picgo/%E4%BA%8C%E7%BB%B4%E7%A0%81plus.png" alt="InterviewCoder"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">InterviewCoder</p><p class="is-size-6 is-block">é¢è¯•è®°å®˜æ–¹å…¬ä¼—å·</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">141</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://mp.weixin.qq.com/s/jWs6lLHl5L-atXJhHc4YvA" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://brath.cloud/me.png" alt="Brath"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Brath</p><p class="is-size-6 is-block">æŠ€èƒ½æ”¹å˜äººç”Ÿï¼ŒçŸ¥è¯†æ”¹å˜å‘½è¿ã€‚</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ä¸­å›½Â·æ±Ÿè‹Â·æ— é”¡</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">141</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Guoqing815" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Guoqing815"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Gitee" href="https://gitee.com/Guoqing-Li"><i class="fab fa-gitee"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://schokolade.cn/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ³ çµ(ç‰¹åˆ«å‘œè°¢)</span></span><span class="level-right"><span class="level-item tag">schokolade.cn</span></span></a></li><li><a class="level is-mobile" href="https://gitee.com/Guoqing-Li" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Gitee(ç äº‘)</span></span><span class="level-right"><span class="level-item tag">gitee.com</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/Brath?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://juejin.cn/user/settings/profile" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.cn</span></span></a></li><li><a class="level is-mobile" href="https://oss.console.aliyun.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">AliCloud(é˜¿é‡Œäº‘)</span></span><span class="level-right"><span class="level-item tag">oss.console.aliyun.com</span></span></a></li><li><a class="level is-mobile" href="https://cloud.tencent.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">TencentCloud(è…¾è®¯äº‘)</span></span><span class="level-right"><span class="level-item tag">cloud.tencent.com</span></span></a></li><li><a class="level is-mobile" href="https://www.zhipin.com/web/user/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BOSS</span></span><span class="level-right"><span class="level-item tag">www.zhipin.com</span></span></a></li><li><a class="level is-mobile" href="https://www.bilibili.com/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bilibili(Bç«™)</span></span><span class="level-right"><span class="level-item tag">www.bilibili.com</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://brath.cloud/me.png" alt="Brath-Blog" height="28"></a><p class="is-size-7"><span>&copy; 2023 Brath</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">å…±<span id="busuanzi_value_site_uv">0</span>ä¸ªè®¿å®¢</span></p><p class="is-size-7">Â© 2029</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "æ­¤ç½‘ç«™ä½¿ç”¨Cookieæ¥æ”¹å–„æ‚¨çš„ä½“éªŒã€‚",
          dismiss: "çŸ¥é“äº†ï¼",
          allow: "å…è®¸ä½¿ç”¨Cookie",
          deny: "æ‹’ç»",
          link: "äº†è§£æ›´å¤š",
          policy: "Cookieæ”¿ç­–",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>